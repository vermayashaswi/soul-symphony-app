/* Mobile-specific styles */
@media (max-width: 768px) {
  /* Global app background in dark mode */
  body.dark {
    background-color: #000000;
  }

  /* Main header styling */
  .mobile-chat-header {
    background-color: #000000;
    color: #ffffff;
    border-bottom: 1px solid #333333;
  }

  .mobile-chat-header h2 {
    color: #f759ab;
    font-weight: bold;
  }

  /* Chat container */
  .mobile-chat-content {
    background-color: #000000;
    padding-bottom: 80px !important;
  }

  /* Message spacing for better visual hierarchy */
  .mobile-chat-content > div {
    margin-bottom: 16px;
  }

  /* Rounded corners for mobile UI elements */
  .mobile-chat-interface .rounded-full {
    border-radius: 24px;
  }
  
  /* Purple top border for the interface */
  .smart-chat-container {
    border-top: 3px solid #f759ab;
  }
  
  /* Add padding to the bottom of the page content to make room for the navigation bar */
  .smart-chat-container,
  .journal-container,
  .insights-container,
  .settings-container {
    padding-bottom: 4rem !important;
    background-color: #000000;
  }
  
  /* Remove extra space at the top of mobile pages */
  .container {
    padding-top: 0 !important;
  }
  
  /* Adjust the top margin for pages when in mobile view */
  .mt-8, .mt-12 {
    margin-top: 0 !important;
  }
  
  /* Adjust padding for header sections in mobile */
  .py-8, .py-4 {
    padding-top: 2px !important;
    padding-bottom: 2px !important;
  }
  
  /* Increase touch targets */
  .mobile-chat-interface button {
    min-height: 40px;
  }

  /* Styling for message bubbles - Updated to match design */
  .user-message,
  .mobile-chat-content [role="user"],
  .mobile-chat-interface .bg-fuchsia-500 {
    background-color: #f759ab !important;
    color: white !important;
    border-radius: 24px !important;
    border-bottom-right-radius: 4px !important;
    box-shadow: 0 2px 5px rgba(0,0,0,0.2) !important;
  }

  .assistant-message,
  .mobile-chat-content [role="assistant"],
  .mobile-chat-interface .bg-gray-800 {
    background-color: #222833 !important;
    color: white !important;
    border-radius: 24px !important;
    border-top-left-radius: 4px !important;
    border: 1px solid #333 !important;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1) !important;
  }

  /* IMPROVED: Chat suggestion text wrapping and alignment */
  .mobile-chat-content .text-sm,
  .mobile-chat-content li,
  .mobile-chat-content button {
    max-width: 100% !important;
    width: 100% !important;
    white-space: normal !important;
    overflow-wrap: break-word !important;
    word-wrap: break-word !important;
    word-break: break-word !important;
    overflow-x: hidden !important;
    overflow-y: visible !important;
    display: flex !important;
  }
  
  /* IMPROVED: Prevent horizontal overflow in chat interface */
  .mobile-chat-interface,
  .mobile-chat-content,
  .mobile-chat-content div,
  .mobile-chat-content ul,
  .mobile-chat-content li {
    max-width: 100vw !important;
    overflow-x: hidden !important;
  }
  
  /* Optimize space usage in chat interface */
  .smart-chat-interface .prose,
  .mobile-chat-interface .prose {
    font-size: 0.95rem !important;
    line-height: 1.5 !important;
    overflow-wrap: break-word !important;
    word-wrap: break-word !important;
    word-break: break-word !important;
    color: white !important;
  }

  /* Updated prose styling for mobile */
  .mobile-chat-interface .prose p,
  .mobile-chat-interface .prose li {
    margin-top: 0.5em !important;
    margin-bottom: 0.5em !important;
    color: white !important;
  }

  .mobile-chat-interface .prose h1,
  .mobile-chat-interface .prose h2,
  .mobile-chat-interface .prose h3 {
    margin-top: 0.5em !important;
    margin-bottom: 0.5em !important;
    color: white !important;
    font-weight: bold !important;
  }

  .mobile-chat-interface .prose ul,
  .mobile-chat-interface .prose ol {
    padding-left: 1.5em !important;
    margin-top: 0.5em !important;
    margin-bottom: 0.5em !important;
  }

  .mobile-chat-interface .prose li::marker {
    color: #f759ab !important;
  }
  
  /* Reduce padding in chat messages */
  .smart-chat-interface .p-4,
  .mobile-chat-interface .p-4 {
    padding: 1rem !important;
  }
  
  /* Journal entries reference style */
  .chat-message .journal-entries-ref,
  .journal-reference {
    position: absolute !important;
    top: 0 !important;
    left: 0 !important;
    transform: translateY(-100%) !important;
    background-color: rgba(17, 24, 39, 0.85) !important;
    border-radius: 9999px !important;
    padding: 2px 10px !important;
    z-index: 10 !important;
    backdrop-filter: blur(4px) !important;
    border: none !important;
    margin-top: 0 !important;
    color: rgba(255, 255, 255, 0.8) !important;
  }

  /* Journal reference button styling */
  .journal-entries-ref button,
  .journal-reference button {
    color: #f78dc4 !important;
    font-size: 11px !important;
    padding: 0 !important;
    height: auto !important;
  }

  /* Journal entries dropdown container */
  .journal-entries-dropdown,
  .chat-message .border-l-2.border-fuchsia-500\/30 {
    border: 1px solid rgba(247, 89, 171, 0.3) !important;
    border-radius: 6px !important;
    background-color: rgba(17, 24, 39, 0.9) !important;
    backdrop-filter: blur(8px) !important;
    padding: 6px !important;
    margin-top: 4px !important;
    max-height: 150px !important;
    overflow-y: auto !important;
    z-index: 20 !important;
    width: 200px !important;
  }

  /* Journal entries button */
  .mobile-chat-interface button.text-white\/80 {
    color: rgba(255, 255, 255, 0.8) !important;
  }

  .mobile-chat-interface button.text-white\/80:hover {
    color: rgba(255, 255, 255, 1) !important;
  }
  
  /* IMPROVED: Ensure suggestion buttons have proper text wrapping */
  .suggestion-button,
  .suggestion-button span,
  .mobile-chat-content button,
  .mobile-chat-content button div {
    white-space: normal !important;
    overflow-wrap: break-word !important;
    word-wrap: break-word !important;
    word-break: break-word !important;
    text-align: left !important;
    justify-content: flex-start !important;
  }

  /* FIXED: Ensure flex items properly align and wrap */
  .flex.gap-1,
  .flex.gap-2,
  .flex.items-start {
    flex-wrap: nowrap !important;
    max-width: 100% !important;
    overflow: hidden !important;
  }

  /* FIXED: Ensure icon stays aligned with text */
  .flex.gap-1 .mt-0.5,
  .flex.gap-2 .mt-0.5,
  .flex.items-start .mt-0.5 {
    flex-shrink: 0 !important;
    margin-right: 8px !important;
  }

  /* FIXED: Ensure text portion wraps properly */
  .flex.gap-1 .break-words,
  .flex.gap-2 .break-words,
  .flex.items-start .break-words {
    flex: 1 !important;
    min-width: 0 !important;
  }

  /* Adjust card headers on home page */
  .card .card-header {
    padding-top: 0.75rem;
    padding-bottom: 0.25rem;
  }
  
  /* Compact card titles and icons */
  .card .card-title {
    display: inline-flex;
    align-items: center;
    font-size: 1.25rem !important;
  }
  
  /* Custom loading spinner */
  .loading-spinner {
    border: 3px solid rgba(247, 89, 171, 0.3);
    border-top: 3px solid #f759ab;
    border-radius: 50%;
    width: 24px;
    height: 24px;
    animation: spin 1s linear infinite;
  }
  
  @keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
  }
  
  /* Make thread buttons more touchable on mobile with purple highlights */
  .chat-thread-list .h-8.w-8 {
    min-height: 38px;
    min-width: 38px;
    display: flex !important;
    align-items: center;
    justify-content: center;
  }
  
  /* Ensure the thread buttons are always visible with strong purple styling */
  .chat-thread-list .flex-shrink-0,
  .chat-thread-list .chat-thread-buttons {
    display: flex !important;
    visibility: visible !important;
    opacity: 1 !important;
  }
  
  /* Voice recorder container height - making it fit the green box outline */
  [class*="min-h-[160px]"], [class*="min-h-[185px]"] {
    min-height: calc(70vh - 160px) !important;
    max-height: calc(100vh - 260px) !important;
    margin-bottom: 0.5rem !important;
    border-radius: 1rem !important;
  }
  
  /* Voice recorder container position adjustment to stay above mobile navbar */
  .min-h-\[185px\] {
    min-height: calc(70vh - 160px) !important;
    margin-bottom: 0;
    position: relative;
    bottom: 0;
    border-radius: 1rem !important;
  }
  
  /* Center the recording button */
  .voice-recorder .recording-button-container,
  .relative.z-10.flex.justify-center.items-center.w-full.h-full {
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    height: 100% !important;
    width: 100% !important;
  }
  
  /* Make card padding smaller on mobile */
  .card-content {
    padding-top: 0.5rem !important;
    padding-bottom: 0.75rem !important;
  }
  
  /* Tabs should be more compact */
  .tabs {
    margin-bottom: 0.5rem !important;
  }
  
  /* Make the tab text more readable */
  .tab {
    font-size: 1rem !important;
    font-weight: 500;
  }
  
  /* Journal header text size adjustments */
  .journal-container h1.text-2xl {
    font-size: 1.75rem !important;
  }
  
  .journal-container p.text-sm {
    font-size: 1rem !important;
  }
  
  /* Voice recorder component adjustments */
  .mb-20 {
    margin-bottom: 4.5rem !important;
  }
  
  /* Card header and content spacing */
  .journal-container .card-header {
    padding-bottom: 0 !important;
  }
  
  /* Mobile chat input specific fixes */
  .mobile-chat-input-container {
    position: fixed;
    bottom: 16px;
    left: 0;
    right: 0;
    background-color: black;
    z-index: 50;
    padding-bottom: env(safe-area-inset-bottom, 16px);
    border-top: 1px solid #333;
  }
  
  /* Add space at the bottom of the chat content to prevent messages from being hidden behind the input */
  .mobile-chat-content {
    padding-bottom: 80px !important;
  }
  
  /* Ensure empty chat state is properly visible */
  .mobile-chat-content h3.text-xl {
    margin-top: 1rem;
    display: block;
    position: relative;
    z-index: 10;
  }
  
  /* Mobile loading indicator */
  .mobile-chat-content .loading-indicator {
    color: #f759ab;
    text-align: center;
    padding: 1rem;
  }
  
  .mobile-chat-content .loading-text {
    color: #f759ab;
    margin-top: 8px;
    font-size: 14px;
  }
  
  /* Improve loading state and progress indicators */
  .animate-spin {
    animation-duration: 1.2s;
    transform-origin: center;
  }
  
  /* Improve toast visibility on mobile */
  [data-sonner-toast] {
    border-radius: 12px !important;
    padding: 10px 16px !important;
    margin: 8px !important;
    max-width: 90% !important;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15) !important;
    color: white !important;
  }
  
  /* Style toast based on type */
  [data-sonner-toast][data-type="success"] {
    background-color: #222833 !important;
    border-color: #f759ab !important;
    color: white !important;
  }
  
  [data-sonner-toast][data-type="error"] {
    background-color: #222833 !important;
    border-color: #ef4444 !important;
    color: white !important;
  }
  
  [data-sonner-toast][data-type="loading"] {
    background-color: #222833 !important;
    border-color: #0ea5e9 !important;
    color: white !important;
  }
  
  /* Dark mode specific styles */
  .dark .mobile-chat-content,
  .dark .mobile-chat-interface,
  .dark .smart-chat-container {
    background-color: #000000 !important;
  }
  
  .dark .mobile-chat-header {
    background-color: #000000 !important;
    border-bottom: 1px solid #333 !important;
  }
  
  .dark .mobile-chat-input-container {
    background-color: #000000 !important;
  }

  /* Chat messages should not overflow horizontally */
  .smart-chat-interface .card-content,
  .mobile-chat-interface .card-content,
  .smart-chat-interface .prose p,
  .mobile-chat-interface .prose p,
  .smart-chat-interface .break-words,
  .mobile-chat-interface .break-words {
    overflow-wrap: break-word !important;
    word-wrap: break-word !important;
    word-break: break-word !important;
    overflow-x: hidden !important;
  }
}

/* Ensure chat components don't overflow horizontally on any screen size */
.smart-chat-interface,
.mobile-chat-interface,
.message-container,
.suggestion-container {
  max-width: 100%;
  overflow-x: hidden;
}

.break-words {
  overflow-wrap: break-word;
  word-wrap: break-word;
  word-break: break-word;
  hyphens: auto;
}

/* Dark mode support for sticky elements */
.dark .sticky {
  background-color: hsl(var(--background));
  border-bottom: 1px solid hsl(var(--border));
}

/* Message-specific styles for both mobile and desktop */
.mobile-chat-message,
.chat-message {
  border-radius: 24px !important;
}

.user-message {
  background-color: #f759ab !important;
  color: white !important;
  border-radius: 24px !important;
  border-bottom-right-radius: 4px !important;
}

.assistant-message {
  background-color: #222833 !important;
  color: white !important;
  border-radius: 24px !important;
  border-top-left-radius: 4px !important;
  border: 1px solid #444444 !important;
}

/* Journal entries reference styling */
.journal-entries-ref {
  position: absolute !important;
  top: 0 !important;
  left: 0 !important;
  transform: translateY(-100%) !important;
  background-color: rgba(17, 24, 39, 0.85) !important;
  border-radius: 9999px !important;
  padding: 2px 10px !important;
  z-index: 10 !important;
  backdrop-filter: blur(4px) !important;
  border: none !important;
  margin-top: 0 !important;
  color: rgba(255, 255, 255, 0.8) !important;
}

/* Application title/header styling */
.app-title {
  color: #f759ab !important;
  font-weight: bold !important;
  text-align: center !important;
}

/* Loading state styling */
.loading-state {
  background-color: rgba(0, 0, 0, 0.7) !important;
  color: white !important;
  border-radius: 12px !important;
  border: 1px solid #444 !important;
}

.loading-state .spinner {
  color: #f759ab !important;
}

/* Toast notification styling for all modes */
.Toaster__toast {
  background-color: #222833 !important;
  color: white !important;
  border-color: #f759ab !important;
}

.Toaster__toast-title {
  color: white !important;
}

.Toaster__toast-description {
  color: #ccc !important;
}

/* Custom dark gradients */
.grad-dark-purple {
  background: linear-gradient(135deg, #333 0%, #222 100%) !important;
}

/* Thread Edit Button - Always visible with purple styling */
.chat-thread-list .thread-edit-button {
  color: #f759ab;
  background-color: rgba(247, 89, 171, 0.3);
}

.chat-thread-list .thread-edit-button:active {
  background-color: rgba(247, 89, 171, 0.5);
}

/* Thread Delete Button - Always visible with purple styling */
.chat-thread-list .thread-delete-button {
  color: #f759ab;
  background-color: rgba(247, 89, 171, 0.3);
}

.chat-thread-list .thread-delete-button:active {
  background-color: rgba(255, 0, 0, 0.2);
  color: #ff5757;
}
