var Zhe=Object.defineProperty;var Qhe=(t,e,n)=>e in t?Zhe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Mt=(t,e,n)=>Qhe(t,typeof e!="symbol"?e+"":e,n);function epe(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var ur=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function $n(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function tpe(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var vM={exports:{}},zx={},xM={exports:{}},Cn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GU;function npe(){if(GU)return Cn;GU=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),a=Symbol.for("react.context"),s=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),f=Symbol.iterator;function h(N){return N===null||typeof N!="object"?null:(N=f&&N[f]||N["@@iterator"],typeof N=="function"?N:null)}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,g={};function v(N,V,W){this.props=N,this.context=V,this.refs=g,this.updater=W||p}v.prototype.isReactComponent={},v.prototype.setState=function(N,V){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,V,"setState")},v.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function b(){}b.prototype=v.prototype;function w(N,V,W){this.props=N,this.context=V,this.refs=g,this.updater=W||p}var T=w.prototype=new b;T.constructor=w,y(T,v.prototype),T.isPureReactComponent=!0;var C=Array.isArray,P=Object.prototype.hasOwnProperty,M={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function I(N,V,W){var ne,se={},te=null,ie=null;if(V!=null)for(ne in V.ref!==void 0&&(ie=V.ref),V.key!==void 0&&(te=""+V.key),V)P.call(V,ne)&&!k.hasOwnProperty(ne)&&(se[ne]=V[ne]);var pe=arguments.length-2;if(pe===1)se.children=W;else if(1<pe){for(var de=Array(pe),ce=0;ce<pe;ce++)de[ce]=arguments[ce+2];se.children=de}if(N&&N.defaultProps)for(ne in pe=N.defaultProps,pe)se[ne]===void 0&&(se[ne]=pe[ne]);return{$$typeof:t,type:N,key:te,ref:ie,props:se,_owner:M.current}}function U(N,V){return{$$typeof:t,type:N.type,key:V,ref:N.ref,props:N.props,_owner:N._owner}}function z(N){return typeof N=="object"&&N!==null&&N.$$typeof===t}function O(N){var V={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(W){return V[W]})}var B=/\/+/g;function $(N,V){return typeof N=="object"&&N!==null&&N.key!=null?O(""+N.key):V.toString(36)}function F(N,V,W,ne,se){var te=typeof N;(te==="undefined"||te==="boolean")&&(N=null);var ie=!1;if(N===null)ie=!0;else switch(te){case"string":case"number":ie=!0;break;case"object":switch(N.$$typeof){case t:case e:ie=!0}}if(ie)return ie=N,se=se(ie),N=ne===""?"."+$(ie,0):ne,C(se)?(W="",N!=null&&(W=N.replace(B,"$&/")+"/"),F(se,V,W,"",function(ce){return ce})):se!=null&&(z(se)&&(se=U(se,W+(!se.key||ie&&ie.key===se.key?"":(""+se.key).replace(B,"$&/")+"/")+N)),V.push(se)),1;if(ie=0,ne=ne===""?".":ne+":",C(N))for(var pe=0;pe<N.length;pe++){te=N[pe];var de=ne+$(te,pe);ie+=F(te,V,W,de,se)}else if(de=h(N),typeof de=="function")for(N=de.call(N),pe=0;!(te=N.next()).done;)te=te.value,de=ne+$(te,pe++),ie+=F(te,V,W,de,se);else if(te==="object")throw V=String(N),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.");return ie}function J(N,V,W){if(N==null)return N;var ne=[],se=0;return F(N,ne,"","",function(te){return V.call(W,te,se++)}),ne}function K(N){if(N._status===-1){var V=N._result;V=V(),V.then(function(W){(N._status===0||N._status===-1)&&(N._status=1,N._result=W)},function(W){(N._status===0||N._status===-1)&&(N._status=2,N._result=W)}),N._status===-1&&(N._status=0,N._result=V)}if(N._status===1)return N._result.default;throw N._result}var Z={current:null},H={transition:null},Y={ReactCurrentDispatcher:Z,ReactCurrentBatchConfig:H,ReactCurrentOwner:M};function L(){throw Error("act(...) is not supported in production builds of React.")}return Cn.Children={map:J,forEach:function(N,V,W){J(N,function(){V.apply(this,arguments)},W)},count:function(N){var V=0;return J(N,function(){V++}),V},toArray:function(N){return J(N,function(V){return V})||[]},only:function(N){if(!z(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},Cn.Component=v,Cn.Fragment=n,Cn.Profiler=i,Cn.PureComponent=w,Cn.StrictMode=r,Cn.Suspense=l,Cn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Y,Cn.act=L,Cn.cloneElement=function(N,V,W){if(N==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+N+".");var ne=y({},N.props),se=N.key,te=N.ref,ie=N._owner;if(V!=null){if(V.ref!==void 0&&(te=V.ref,ie=M.current),V.key!==void 0&&(se=""+V.key),N.type&&N.type.defaultProps)var pe=N.type.defaultProps;for(de in V)P.call(V,de)&&!k.hasOwnProperty(de)&&(ne[de]=V[de]===void 0&&pe!==void 0?pe[de]:V[de])}var de=arguments.length-2;if(de===1)ne.children=W;else if(1<de){pe=Array(de);for(var ce=0;ce<de;ce++)pe[ce]=arguments[ce+2];ne.children=pe}return{$$typeof:t,type:N.type,key:se,ref:te,props:ne,_owner:ie}},Cn.createContext=function(N){return N={$$typeof:a,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},N.Provider={$$typeof:o,_context:N},N.Consumer=N},Cn.createElement=I,Cn.createFactory=function(N){var V=I.bind(null,N);return V.type=N,V},Cn.createRef=function(){return{current:null}},Cn.forwardRef=function(N){return{$$typeof:s,render:N}},Cn.isValidElement=z,Cn.lazy=function(N){return{$$typeof:u,_payload:{_status:-1,_result:N},_init:K}},Cn.memo=function(N,V){return{$$typeof:c,type:N,compare:V===void 0?null:V}},Cn.startTransition=function(N){var V=H.transition;H.transition={};try{N()}finally{H.transition=V}},Cn.unstable_act=L,Cn.useCallback=function(N,V){return Z.current.useCallback(N,V)},Cn.useContext=function(N){return Z.current.useContext(N)},Cn.useDebugValue=function(){},Cn.useDeferredValue=function(N){return Z.current.useDeferredValue(N)},Cn.useEffect=function(N,V){return Z.current.useEffect(N,V)},Cn.useId=function(){return Z.current.useId()},Cn.useImperativeHandle=function(N,V,W){return Z.current.useImperativeHandle(N,V,W)},Cn.useInsertionEffect=function(N,V){return Z.current.useInsertionEffect(N,V)},Cn.useLayoutEffect=function(N,V){return Z.current.useLayoutEffect(N,V)},Cn.useMemo=function(N,V){return Z.current.useMemo(N,V)},Cn.useReducer=function(N,V,W){return Z.current.useReducer(N,V,W)},Cn.useRef=function(N){return Z.current.useRef(N)},Cn.useState=function(N){return Z.current.useState(N)},Cn.useSyncExternalStore=function(N,V,W){return Z.current.useSyncExternalStore(N,V,W)},Cn.useTransition=function(){return Z.current.useTransition()},Cn.version="18.3.1",Cn}var qU;function GC(){return qU||(qU=1,xM.exports=npe()),xM.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YU;function rpe(){if(YU)return zx;YU=1;var t=GC(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function a(s,l,c){var u,f={},h=null,p=null;c!==void 0&&(h=""+c),l.key!==void 0&&(h=""+l.key),l.ref!==void 0&&(p=l.ref);for(u in l)r.call(l,u)&&!o.hasOwnProperty(u)&&(f[u]=l[u]);if(s&&s.defaultProps)for(u in l=s.defaultProps,l)f[u]===void 0&&(f[u]=l[u]);return{$$typeof:e,type:s,key:h,ref:p,props:f,_owner:i.current}}return zx.Fragment=n,zx.jsx=a,zx.jsxs=a,zx}var XU;function ipe(){return XU||(XU=1,vM.exports=rpe()),vM.exports}var d=ipe(),_=GC();const ve=$n(_),_K=epe({__proto__:null,default:ve},[_]);var hE={},wM={exports:{}},Va={},bM={exports:{}},SM={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KU;function ope(){return KU||(KU=1,function(t){function e(H,Y){var L=H.length;H.push(Y);e:for(;0<L;){var N=L-1>>>1,V=H[N];if(0<i(V,Y))H[N]=Y,H[L]=V,L=N;else break e}}function n(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var Y=H[0],L=H.pop();if(L!==Y){H[0]=L;e:for(var N=0,V=H.length,W=V>>>1;N<W;){var ne=2*(N+1)-1,se=H[ne],te=ne+1,ie=H[te];if(0>i(se,L))te<V&&0>i(ie,se)?(H[N]=ie,H[te]=L,N=te):(H[N]=se,H[ne]=L,N=ne);else if(te<V&&0>i(ie,L))H[N]=ie,H[te]=L,N=te;else break e}}return Y}function i(H,Y){var L=H.sortIndex-Y.sortIndex;return L!==0?L:H.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,s=a.now();t.unstable_now=function(){return a.now()-s}}var l=[],c=[],u=1,f=null,h=3,p=!1,y=!1,g=!1,v=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(H){for(var Y=n(c);Y!==null;){if(Y.callback===null)r(c);else if(Y.startTime<=H)r(c),Y.sortIndex=Y.expirationTime,e(l,Y);else break;Y=n(c)}}function C(H){if(g=!1,T(H),!y)if(n(l)!==null)y=!0,K(P);else{var Y=n(c);Y!==null&&Z(C,Y.startTime-H)}}function P(H,Y){y=!1,g&&(g=!1,b(I),I=-1),p=!0;var L=h;try{for(T(Y),f=n(l);f!==null&&(!(f.expirationTime>Y)||H&&!O());){var N=f.callback;if(typeof N=="function"){f.callback=null,h=f.priorityLevel;var V=N(f.expirationTime<=Y);Y=t.unstable_now(),typeof V=="function"?f.callback=V:f===n(l)&&r(l),T(Y)}else r(l);f=n(l)}if(f!==null)var W=!0;else{var ne=n(c);ne!==null&&Z(C,ne.startTime-Y),W=!1}return W}finally{f=null,h=L,p=!1}}var M=!1,k=null,I=-1,U=5,z=-1;function O(){return!(t.unstable_now()-z<U)}function B(){if(k!==null){var H=t.unstable_now();z=H;var Y=!0;try{Y=k(!0,H)}finally{Y?$():(M=!1,k=null)}}else M=!1}var $;if(typeof w=="function")$=function(){w(B)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,J=F.port2;F.port1.onmessage=B,$=function(){J.postMessage(null)}}else $=function(){v(B,0)};function K(H){k=H,M||(M=!0,$())}function Z(H,Y){I=v(function(){H(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_continueExecution=function(){y||p||(y=!0,K(P))},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(H){switch(h){case 1:case 2:case 3:var Y=3;break;default:Y=h}var L=h;h=Y;try{return H()}finally{h=L}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(H,Y){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var L=h;h=H;try{return Y()}finally{h=L}},t.unstable_scheduleCallback=function(H,Y,L){var N=t.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?N+L:N):L=N,H){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=L+V,H={id:u++,callback:Y,priorityLevel:H,startTime:L,expirationTime:V,sortIndex:-1},L>N?(H.sortIndex=L,e(c,H),n(l)===null&&H===n(c)&&(g?(b(I),I=-1):g=!0,Z(C,L-N))):(H.sortIndex=V,e(l,H),y||p||(y=!0,K(P))),H},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(H){var Y=h;return function(){var L=h;h=Y;try{return H.apply(this,arguments)}finally{h=L}}}}(SM)),SM}var JU;function ape(){return JU||(JU=1,bM.exports=ope()),bM.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZU;function spe(){if(ZU)return Va;ZU=1;var t=GC(),e=ape();function n(m){for(var x="https://reactjs.org/docs/error-decoder.html?invariant="+m,A=1;A<arguments.length;A++)x+="&args[]="+encodeURIComponent(arguments[A]);return"Minified React error #"+m+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function o(m,x){a(m,x),a(m+"Capture",x)}function a(m,x){for(i[m]=x,m=0;m<x.length;m++)r.add(x[m])}var s=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),l=Object.prototype.hasOwnProperty,c=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,u={},f={};function h(m){return l.call(f,m)?!0:l.call(u,m)?!1:c.test(m)?f[m]=!0:(u[m]=!0,!1)}function p(m,x,A,j){if(A!==null&&A.type===0)return!1;switch(typeof x){case"function":case"symbol":return!0;case"boolean":return j?!1:A!==null?!A.acceptsBooleans:(m=m.toLowerCase().slice(0,5),m!=="data-"&&m!=="aria-");default:return!1}}function y(m,x,A,j){if(x===null||typeof x>"u"||p(m,x,A,j))return!0;if(j)return!1;if(A!==null)switch(A.type){case 3:return!x;case 4:return x===!1;case 5:return isNaN(x);case 6:return isNaN(x)||1>x}return!1}function g(m,x,A,j,G,X,ue){this.acceptsBooleans=x===2||x===3||x===4,this.attributeName=j,this.attributeNamespace=G,this.mustUseProperty=A,this.propertyName=m,this.type=x,this.sanitizeURL=X,this.removeEmptyString=ue}var v={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(m){v[m]=new g(m,0,!1,m,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(m){var x=m[0];v[x]=new g(x,1,!1,m[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(m){v[m]=new g(m,2,!1,m.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(m){v[m]=new g(m,2,!1,m,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(m){v[m]=new g(m,3,!1,m.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(m){v[m]=new g(m,3,!0,m,null,!1,!1)}),["capture","download"].forEach(function(m){v[m]=new g(m,4,!1,m,null,!1,!1)}),["cols","rows","size","span"].forEach(function(m){v[m]=new g(m,6,!1,m,null,!1,!1)}),["rowSpan","start"].forEach(function(m){v[m]=new g(m,5,!1,m.toLowerCase(),null,!1,!1)});var b=/[\-:]([a-z])/g;function w(m){return m[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(m){var x=m.replace(b,w);v[x]=new g(x,1,!1,m,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(m){var x=m.replace(b,w);v[x]=new g(x,1,!1,m,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(m){var x=m.replace(b,w);v[x]=new g(x,1,!1,m,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(m){v[m]=new g(m,1,!1,m.toLowerCase(),null,!1,!1)}),v.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(m){v[m]=new g(m,1,!1,m.toLowerCase(),null,!0,!0)});function T(m,x,A,j){var G=v.hasOwnProperty(x)?v[x]:null;(G!==null?G.type!==0:j||!(2<x.length)||x[0]!=="o"&&x[0]!=="O"||x[1]!=="n"&&x[1]!=="N")&&(y(x,A,G,j)&&(A=null),j||G===null?h(x)&&(A===null?m.removeAttribute(x):m.setAttribute(x,""+A)):G.mustUseProperty?m[G.propertyName]=A===null?G.type===3?!1:"":A:(x=G.attributeName,j=G.attributeNamespace,A===null?m.removeAttribute(x):(G=G.type,A=G===3||G===4&&A===!0?"":""+A,j?m.setAttributeNS(j,x,A):m.setAttribute(x,A))))}var C=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,P=Symbol.for("react.element"),M=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),U=Symbol.for("react.profiler"),z=Symbol.for("react.provider"),O=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),$=Symbol.for("react.suspense"),F=Symbol.for("react.suspense_list"),J=Symbol.for("react.memo"),K=Symbol.for("react.lazy"),Z=Symbol.for("react.offscreen"),H=Symbol.iterator;function Y(m){return m===null||typeof m!="object"?null:(m=H&&m[H]||m["@@iterator"],typeof m=="function"?m:null)}var L=Object.assign,N;function V(m){if(N===void 0)try{throw Error()}catch(A){var x=A.stack.trim().match(/\n( *(at )?)/);N=x&&x[1]||""}return`
`+N+m}var W=!1;function ne(m,x){if(!m||W)return"";W=!0;var A=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(x)if(x=function(){throw Error()},Object.defineProperty(x.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(x,[])}catch(Ye){var j=Ye}Reflect.construct(m,[],x)}else{try{x.call()}catch(Ye){j=Ye}m.call(x.prototype)}else{try{throw Error()}catch(Ye){j=Ye}m()}}catch(Ye){if(Ye&&j&&typeof Ye.stack=="string"){for(var G=Ye.stack.split(`
`),X=j.stack.split(`
`),ue=G.length-1,Te=X.length-1;1<=ue&&0<=Te&&G[ue]!==X[Te];)Te--;for(;1<=ue&&0<=Te;ue--,Te--)if(G[ue]!==X[Te]){if(ue!==1||Te!==1)do if(ue--,Te--,0>Te||G[ue]!==X[Te]){var je=`
`+G[ue].replace(" at new "," at ");return m.displayName&&je.includes("<anonymous>")&&(je=je.replace("<anonymous>",m.displayName)),je}while(1<=ue&&0<=Te);break}}}finally{W=!1,Error.prepareStackTrace=A}return(m=m?m.displayName||m.name:"")?V(m):""}function se(m){switch(m.tag){case 5:return V(m.type);case 16:return V("Lazy");case 13:return V("Suspense");case 19:return V("SuspenseList");case 0:case 2:case 15:return m=ne(m.type,!1),m;case 11:return m=ne(m.type.render,!1),m;case 1:return m=ne(m.type,!0),m;default:return""}}function te(m){if(m==null)return null;if(typeof m=="function")return m.displayName||m.name||null;if(typeof m=="string")return m;switch(m){case k:return"Fragment";case M:return"Portal";case U:return"Profiler";case I:return"StrictMode";case $:return"Suspense";case F:return"SuspenseList"}if(typeof m=="object")switch(m.$$typeof){case O:return(m.displayName||"Context")+".Consumer";case z:return(m._context.displayName||"Context")+".Provider";case B:var x=m.render;return m=m.displayName,m||(m=x.displayName||x.name||"",m=m!==""?"ForwardRef("+m+")":"ForwardRef"),m;case J:return x=m.displayName||null,x!==null?x:te(m.type)||"Memo";case K:x=m._payload,m=m._init;try{return te(m(x))}catch{}}return null}function ie(m){var x=m.type;switch(m.tag){case 24:return"Cache";case 9:return(x.displayName||"Context")+".Consumer";case 10:return(x._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return m=x.render,m=m.displayName||m.name||"",x.displayName||(m!==""?"ForwardRef("+m+")":"ForwardRef");case 7:return"Fragment";case 5:return x;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return te(x);case 8:return x===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof x=="function")return x.displayName||x.name||null;if(typeof x=="string")return x}return null}function pe(m){switch(typeof m){case"boolean":case"number":case"string":case"undefined":return m;case"object":return m;default:return""}}function de(m){var x=m.type;return(m=m.nodeName)&&m.toLowerCase()==="input"&&(x==="checkbox"||x==="radio")}function ce(m){var x=de(m)?"checked":"value",A=Object.getOwnPropertyDescriptor(m.constructor.prototype,x),j=""+m[x];if(!m.hasOwnProperty(x)&&typeof A<"u"&&typeof A.get=="function"&&typeof A.set=="function"){var G=A.get,X=A.set;return Object.defineProperty(m,x,{configurable:!0,get:function(){return G.call(this)},set:function(ue){j=""+ue,X.call(this,ue)}}),Object.defineProperty(m,x,{enumerable:A.enumerable}),{getValue:function(){return j},setValue:function(ue){j=""+ue},stopTracking:function(){m._valueTracker=null,delete m[x]}}}}function he(m){m._valueTracker||(m._valueTracker=ce(m))}function ee(m){if(!m)return!1;var x=m._valueTracker;if(!x)return!0;var A=x.getValue(),j="";return m&&(j=de(m)?m.checked?"true":"false":m.value),m=j,m!==A?(x.setValue(m),!0):!1}function xe(m){if(m=m||(typeof document<"u"?document:void 0),typeof m>"u")return null;try{return m.activeElement||m.body}catch{return m.body}}function be(m,x){var A=x.checked;return L({},x,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:A??m._wrapperState.initialChecked})}function Ae(m,x){var A=x.defaultValue==null?"":x.defaultValue,j=x.checked!=null?x.checked:x.defaultChecked;A=pe(x.value!=null?x.value:A),m._wrapperState={initialChecked:j,initialValue:A,controlled:x.type==="checkbox"||x.type==="radio"?x.checked!=null:x.value!=null}}function Ce(m,x){x=x.checked,x!=null&&T(m,"checked",x,!1)}function oe(m,x){Ce(m,x);var A=pe(x.value),j=x.type;if(A!=null)j==="number"?(A===0&&m.value===""||m.value!=A)&&(m.value=""+A):m.value!==""+A&&(m.value=""+A);else if(j==="submit"||j==="reset"){m.removeAttribute("value");return}x.hasOwnProperty("value")?Se(m,x.type,A):x.hasOwnProperty("defaultValue")&&Se(m,x.type,pe(x.defaultValue)),x.checked==null&&x.defaultChecked!=null&&(m.defaultChecked=!!x.defaultChecked)}function ae(m,x,A){if(x.hasOwnProperty("value")||x.hasOwnProperty("defaultValue")){var j=x.type;if(!(j!=="submit"&&j!=="reset"||x.value!==void 0&&x.value!==null))return;x=""+m._wrapperState.initialValue,A||x===m.value||(m.value=x),m.defaultValue=x}A=m.name,A!==""&&(m.name=""),m.defaultChecked=!!m._wrapperState.initialChecked,A!==""&&(m.name=A)}function Se(m,x,A){(x!=="number"||xe(m.ownerDocument)!==m)&&(A==null?m.defaultValue=""+m._wrapperState.initialValue:m.defaultValue!==""+A&&(m.defaultValue=""+A))}var me=Array.isArray;function ye(m,x,A,j){if(m=m.options,x){x={};for(var G=0;G<A.length;G++)x["$"+A[G]]=!0;for(A=0;A<m.length;A++)G=x.hasOwnProperty("$"+m[A].value),m[A].selected!==G&&(m[A].selected=G),G&&j&&(m[A].defaultSelected=!0)}else{for(A=""+pe(A),x=null,G=0;G<m.length;G++){if(m[G].value===A){m[G].selected=!0,j&&(m[G].defaultSelected=!0);return}x!==null||m[G].disabled||(x=m[G])}x!==null&&(x.selected=!0)}}function Ie(m,x){if(x.dangerouslySetInnerHTML!=null)throw Error(n(91));return L({},x,{value:void 0,defaultValue:void 0,children:""+m._wrapperState.initialValue})}function De(m,x){var A=x.value;if(A==null){if(A=x.children,x=x.defaultValue,A!=null){if(x!=null)throw Error(n(92));if(me(A)){if(1<A.length)throw Error(n(93));A=A[0]}x=A}x==null&&(x=""),A=x}m._wrapperState={initialValue:pe(A)}}function Ue(m,x){var A=pe(x.value),j=pe(x.defaultValue);A!=null&&(A=""+A,A!==m.value&&(m.value=A),x.defaultValue==null&&m.defaultValue!==A&&(m.defaultValue=A)),j!=null&&(m.defaultValue=""+j)}function $e(m){var x=m.textContent;x===m._wrapperState.initialValue&&x!==""&&x!==null&&(m.value=x)}function we(m){switch(m){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function fe(m,x){return m==null||m==="http://www.w3.org/1999/xhtml"?we(x):m==="http://www.w3.org/2000/svg"&&x==="foreignObject"?"http://www.w3.org/1999/xhtml":m}var ke,Ne=function(m){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(x,A,j,G){MSApp.execUnsafeLocalFunction(function(){return m(x,A,j,G)})}:m}(function(m,x){if(m.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in m)m.innerHTML=x;else{for(ke=ke||document.createElement("div"),ke.innerHTML="<svg>"+x.valueOf().toString()+"</svg>",x=ke.firstChild;m.firstChild;)m.removeChild(m.firstChild);for(;x.firstChild;)m.appendChild(x.firstChild)}});function qe(m,x){if(x){var A=m.firstChild;if(A&&A===m.lastChild&&A.nodeType===3){A.nodeValue=x;return}}m.textContent=x}var tt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ot=["Webkit","ms","Moz","O"];Object.keys(tt).forEach(function(m){ot.forEach(function(x){x=x+m.charAt(0).toUpperCase()+m.substring(1),tt[x]=tt[m]})});function St(m,x,A){return x==null||typeof x=="boolean"||x===""?"":A||typeof x!="number"||x===0||tt.hasOwnProperty(m)&&tt[m]?(""+x).trim():x+"px"}function dt(m,x){m=m.style;for(var A in x)if(x.hasOwnProperty(A)){var j=A.indexOf("--")===0,G=St(A,x[A],j);A==="float"&&(A="cssFloat"),j?m.setProperty(A,G):m[A]=G}}var ft=L({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ee(m,x){if(x){if(ft[m]&&(x.children!=null||x.dangerouslySetInnerHTML!=null))throw Error(n(137,m));if(x.dangerouslySetInnerHTML!=null){if(x.children!=null)throw Error(n(60));if(typeof x.dangerouslySetInnerHTML!="object"||!("__html"in x.dangerouslySetInnerHTML))throw Error(n(61))}if(x.style!=null&&typeof x.style!="object")throw Error(n(62))}}function Ve(m,x){if(m.indexOf("-")===-1)return typeof x.is=="string";switch(m){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xe=null;function et(m){return m=m.target||m.srcElement||window,m.correspondingUseElement&&(m=m.correspondingUseElement),m.nodeType===3?m.parentNode:m}var wt=null,Bt=null,en=null;function Hn(m){if(m=bl(m)){if(typeof wt!="function")throw Error(n(280));var x=m.stateNode;x&&(x=fg(x),wt(m.stateNode,m.type,x))}}function gr(m){Bt?en?en.push(m):en=[m]:Bt=m}function Mn(){if(Bt){var m=Bt,x=en;if(en=Bt=null,Hn(m),x)for(m=0;m<x.length;m++)Hn(x[m])}}function Jt(m,x){return m(x)}function fn(){}var Ar=!1;function gn(m,x,A){if(Ar)return m(x,A);Ar=!0;try{return Jt(m,x,A)}finally{Ar=!1,(Bt!==null||en!==null)&&(fn(),Mn())}}function un(m,x){var A=m.stateNode;if(A===null)return null;var j=fg(A);if(j===null)return null;A=j[x];e:switch(x){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(j=!j.disabled)||(m=m.type,j=!(m==="button"||m==="input"||m==="select"||m==="textarea")),m=!j;break e;default:m=!1}if(m)return null;if(A&&typeof A!="function")throw Error(n(231,x,typeof A));return A}var ln=!1;if(s)try{var Nn={};Object.defineProperty(Nn,"passive",{get:function(){ln=!0}}),window.addEventListener("test",Nn,Nn),window.removeEventListener("test",Nn,Nn)}catch{ln=!1}function Zt(m,x,A,j,G,X,ue,Te,je){var Ye=Array.prototype.slice.call(arguments,3);try{x.apply(A,Ye)}catch(lt){this.onError(lt)}}var le=!1,Me=null,Pe=!1,Re=null,ze={onError:function(m){le=!0,Me=m}};function at(m,x,A,j,G,X,ue,Te,je){le=!1,Me=null,Zt.apply(ze,arguments)}function it(m,x,A,j,G,X,ue,Te,je){if(at.apply(this,arguments),le){if(le){var Ye=Me;le=!1,Me=null}else throw Error(n(198));Pe||(Pe=!0,Re=Ye)}}function pt(m){var x=m,A=m;if(m.alternate)for(;x.return;)x=x.return;else{m=x;do x=m,(x.flags&4098)!==0&&(A=x.return),m=x.return;while(m)}return x.tag===3?A:null}function Qt(m){if(m.tag===13){var x=m.memoizedState;if(x===null&&(m=m.alternate,m!==null&&(x=m.memoizedState)),x!==null)return x.dehydrated}return null}function Pn(m){if(pt(m)!==m)throw Error(n(188))}function cn(m){var x=m.alternate;if(!x){if(x=pt(m),x===null)throw Error(n(188));return x!==m?null:m}for(var A=m,j=x;;){var G=A.return;if(G===null)break;var X=G.alternate;if(X===null){if(j=G.return,j!==null){A=j;continue}break}if(G.child===X.child){for(X=G.child;X;){if(X===A)return Pn(G),m;if(X===j)return Pn(G),x;X=X.sibling}throw Error(n(188))}if(A.return!==j.return)A=G,j=X;else{for(var ue=!1,Te=G.child;Te;){if(Te===A){ue=!0,A=G,j=X;break}if(Te===j){ue=!0,j=G,A=X;break}Te=Te.sibling}if(!ue){for(Te=X.child;Te;){if(Te===A){ue=!0,A=X,j=G;break}if(Te===j){ue=!0,j=X,A=G;break}Te=Te.sibling}if(!ue)throw Error(n(189))}}if(A.alternate!==j)throw Error(n(190))}if(A.tag!==3)throw Error(n(188));return A.stateNode.current===A?m:x}function yn(m){return m=cn(m),m!==null?tr(m):null}function tr(m){if(m.tag===5||m.tag===6)return m;for(m=m.child;m!==null;){var x=tr(m);if(x!==null)return x;m=m.sibling}return null}var ua=e.unstable_scheduleCallback,vn=e.unstable_cancelCallback,ns=e.unstable_shouldYield,Vn=e.unstable_requestPaint,yt=e.unstable_now,di=e.unstable_getCurrentPriorityLevel,Eo=e.unstable_ImmediatePriority,Qr=e.unstable_UserBlockingPriority,Fn=e.unstable_NormalPriority,Na=e.unstable_LowPriority,Mr=e.unstable_IdlePriority,so=null,xn=null;function Xn(m){if(xn&&typeof xn.onCommitFiberRoot=="function")try{xn.onCommitFiberRoot(so,m,void 0,(m.current.flags&128)===128)}catch{}}var Pr=Math.clz32?Math.clz32:Os,fi=Math.log,_i=Math.LN2;function Os(m){return m>>>=0,m===0?32:31-(fi(m)/_i|0)|0}var _o=64,Hr=4194304;function To(m){switch(m&-m){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return m&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return m}}function cl(m,x){var A=m.pendingLanes;if(A===0)return 0;var j=0,G=m.suspendedLanes,X=m.pingedLanes,ue=A&268435455;if(ue!==0){var Te=ue&~G;Te!==0?j=To(Te):(X&=ue,X!==0&&(j=To(X)))}else ue=A&~G,ue!==0?j=To(ue):X!==0&&(j=To(X));if(j===0)return 0;if(x!==0&&x!==j&&(x&G)===0&&(G=j&-j,X=x&-x,G>=X||G===16&&(X&4194240)!==0))return x;if((j&4)!==0&&(j|=A&16),x=m.entangledLanes,x!==0)for(m=m.entanglements,x&=j;0<x;)A=31-Pr(x),G=1<<A,j|=m[A],x&=~G;return j}function kd(m,x){switch(m){case 1:case 2:case 4:return x+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return x+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function hc(m,x){for(var A=m.suspendedLanes,j=m.pingedLanes,G=m.expirationTimes,X=m.pendingLanes;0<X;){var ue=31-Pr(X),Te=1<<ue,je=G[ue];je===-1?((Te&A)===0||(Te&j)!==0)&&(G[ue]=kd(Te,x)):je<=x&&(m.expiredLanes|=Te),X&=~Te}}function Co(m){return m=m.pendingLanes&-1073741825,m!==0?m:m&1073741824?1073741824:0}function Wo(){var m=_o;return _o<<=1,(_o&4194240)===0&&(_o=64),m}function pc(m){for(var x=[],A=0;31>A;A++)x.push(m);return x}function rs(m,x,A){m.pendingLanes|=x,x!==536870912&&(m.suspendedLanes=0,m.pingedLanes=0),m=m.eventTimes,x=31-Pr(x),m[x]=A}function Um(m,x){var A=m.pendingLanes&~x;m.pendingLanes=x,m.suspendedLanes=0,m.pingedLanes=0,m.expiredLanes&=x,m.mutableReadLanes&=x,m.entangledLanes&=x,x=m.entanglements;var j=m.eventTimes;for(m=m.expirationTimes;0<A;){var G=31-Pr(A),X=1<<G;x[G]=0,j[G]=-1,m[G]=-1,A&=~X}}function is(m,x){var A=m.entangledLanes|=x;for(m=m.entanglements;A;){var j=31-Pr(A),G=1<<j;G&x|m[j]&x&&(m[j]|=x),A&=~G}}var En=0;function Ls(m){return m&=-m,1<m?4<m?(m&268435455)!==0?16:536870912:4:1}var mc,Nd,Rd,Ds,uu,Ra=!1,os=[],Gi=null,nn=null,ja=null,da=new Map,Fs=new Map,Ia=[],Bm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function yr(m,x){switch(m){case"focusin":case"focusout":Gi=null;break;case"dragenter":case"dragleave":nn=null;break;case"mouseover":case"mouseout":ja=null;break;case"pointerover":case"pointerout":da.delete(x.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fs.delete(x.pointerId)}}function as(m,x,A,j,G,X){return m===null||m.nativeEvent!==X?(m={blockedOn:x,domEventName:A,eventSystemFlags:j,nativeEvent:X,targetContainers:[G]},x!==null&&(x=bl(x),x!==null&&Nd(x)),m):(m.eventSystemFlags|=j,x=m.targetContainers,G!==null&&x.indexOf(G)===-1&&x.push(G),m)}function $m(m,x,A,j,G){switch(x){case"focusin":return Gi=as(Gi,m,x,A,j,G),!0;case"dragenter":return nn=as(nn,m,x,A,j,G),!0;case"mouseover":return ja=as(ja,m,x,A,j,G),!0;case"pointerover":var X=G.pointerId;return da.set(X,as(da.get(X)||null,m,x,A,j,G)),!0;case"gotpointercapture":return X=G.pointerId,Fs.set(X,as(Fs.get(X)||null,m,x,A,j,G)),!0}return!1}function lo(m){var x=Ac(m.target);if(x!==null){var A=pt(x);if(A!==null){if(x=A.tag,x===13){if(x=Qt(A),x!==null){m.blockedOn=x,uu(m.priority,function(){Rd(A)});return}}else if(x===3&&A.stateNode.current.memoizedState.isDehydrated){m.blockedOn=A.tag===3?A.stateNode.containerInfo:null;return}}}m.blockedOn=null}function gc(m){if(m.blockedOn!==null)return!1;for(var x=m.targetContainers;0<x.length;){var A=co(m.domEventName,m.eventSystemFlags,x[0],m.nativeEvent);if(A===null){A=m.nativeEvent;var j=new A.constructor(A.type,A);Xe=j,A.target.dispatchEvent(j),Xe=null}else return x=bl(A),x!==null&&Nd(x),m.blockedOn=A,!1;x.shift()}return!0}function yc(m,x,A){gc(m)&&A.delete(x)}function fa(){Ra=!1,Gi!==null&&gc(Gi)&&(Gi=null),nn!==null&&gc(nn)&&(nn=null),ja!==null&&gc(ja)&&(ja=null),da.forEach(yc),Fs.forEach(yc)}function ul(m,x){m.blockedOn===x&&(m.blockedOn=null,Ra||(Ra=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,fa)))}function vc(m){function x(G){return ul(G,m)}if(0<os.length){ul(os[0],m);for(var A=1;A<os.length;A++){var j=os[A];j.blockedOn===m&&(j.blockedOn=null)}}for(Gi!==null&&ul(Gi,m),nn!==null&&ul(nn,m),ja!==null&&ul(ja,m),da.forEach(x),Fs.forEach(x),A=0;A<Ia.length;A++)j=Ia[A],j.blockedOn===m&&(j.blockedOn=null);for(;0<Ia.length&&(A=Ia[0],A.blockedOn===null);)lo(A),A.blockedOn===null&&Ia.shift()}var Ti=C.ReactCurrentBatchConfig,Ci=!0;function zs(m,x,A,j){var G=En,X=Ti.transition;Ti.transition=null;try{En=1,du(m,x,A,j)}finally{En=G,Ti.transition=X}}function Oa(m,x,A,j){var G=En,X=Ti.transition;Ti.transition=null;try{En=4,du(m,x,A,j)}finally{En=G,Ti.transition=X}}function du(m,x,A,j){if(Ci){var G=co(m,x,A,j);if(G===null)ag(m,x,j,xc,A),yr(m,j);else if($m(G,m,x,A,j))j.stopPropagation();else if(yr(m,j),x&4&&-1<Bm.indexOf(m)){for(;G!==null;){var X=bl(G);if(X!==null&&mc(X),X=co(m,x,A,j),X===null&&ag(m,x,j,xc,A),X===G)break;G=X}G!==null&&j.stopPropagation()}else ag(m,x,j,null,A)}}var xc=null;function co(m,x,A,j){if(xc=null,m=et(j),m=Ac(m),m!==null)if(x=pt(m),x===null)m=null;else if(A=x.tag,A===13){if(m=Qt(x),m!==null)return m;m=null}else if(A===3){if(x.stateNode.current.memoizedState.isDehydrated)return x.tag===3?x.stateNode.containerInfo:null;m=null}else x!==m&&(m=null);return xc=m,null}function wc(m){switch(m){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(di()){case Eo:return 1;case Qr:return 4;case Fn:case Na:return 16;case Mr:return 536870912;default:return 16}default:return 16}}var Go=null,dl=null,Ai=null;function hi(){if(Ai)return Ai;var m,x=dl,A=x.length,j,G="value"in Go?Go.value:Go.textContent,X=G.length;for(m=0;m<A&&x[m]===G[m];m++);var ue=A-m;for(j=1;j<=ue&&x[A-j]===G[X-j];j++);return Ai=G.slice(m,1<j?1-j:void 0)}function fl(m){var x=m.keyCode;return"charCode"in m?(m=m.charCode,m===0&&x===13&&(m=13)):m=x,m===10&&(m=13),32<=m||m===13?m:0}function qo(){return!0}function hl(){return!1}function Mi(m){function x(A,j,G,X,ue){this._reactName=A,this._targetInst=G,this.type=j,this.nativeEvent=X,this.target=ue,this.currentTarget=null;for(var Te in m)m.hasOwnProperty(Te)&&(A=m[Te],this[Te]=A?A(X):X[Te]);return this.isDefaultPrevented=(X.defaultPrevented!=null?X.defaultPrevented:X.returnValue===!1)?qo:hl,this.isPropagationStopped=hl,this}return L(x.prototype,{preventDefault:function(){this.defaultPrevented=!0;var A=this.nativeEvent;A&&(A.preventDefault?A.preventDefault():typeof A.returnValue!="unknown"&&(A.returnValue=!1),this.isDefaultPrevented=qo)},stopPropagation:function(){var A=this.nativeEvent;A&&(A.stopPropagation?A.stopPropagation():typeof A.cancelBubble!="unknown"&&(A.cancelBubble=!0),this.isPropagationStopped=qo)},persist:function(){},isPersistent:qo}),x}var pl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(m){return m.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ei=Mi(pl),pi=L({},pl,{view:0,detail:0}),Vr=Mi(pi),kr,Ao,La,jd=L({},pi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sc,button:0,buttons:0,relatedTarget:function(m){return m.relatedTarget===void 0?m.fromElement===m.srcElement?m.toElement:m.fromElement:m.relatedTarget},movementX:function(m){return"movementX"in m?m.movementX:(m!==La&&(La&&m.type==="mousemove"?(kr=m.screenX-La.screenX,Ao=m.screenY-La.screenY):Ao=kr=0,La=m),kr)},movementY:function(m){return"movementY"in m?m.movementY:Ao}}),Y0=Mi(jd),ml=L({},jd,{dataTransfer:0}),bc=Mi(ml),Hm=L({},pi,{relatedTarget:0}),Vm=Mi(Hm),Wm=L({},pl,{animationName:0,elapsedTime:0,pseudoElement:0}),ES=Mi(Wm),_S=L({},pl,{clipboardData:function(m){return"clipboardData"in m?m.clipboardData:window.clipboardData}}),X0=Mi(_S),Gm=L({},pl,{data:0}),K0=Mi(Gm),TS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},CS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},J0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Id(m){var x=this.nativeEvent;return x.getModifierState?x.getModifierState(m):(m=J0[m])?!!x[m]:!1}function Sc(){return Id}var qm=L({},pi,{key:function(m){if(m.key){var x=TS[m.key]||m.key;if(x!=="Unidentified")return x}return m.type==="keypress"?(m=fl(m),m===13?"Enter":String.fromCharCode(m)):m.type==="keydown"||m.type==="keyup"?CS[m.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sc,charCode:function(m){return m.type==="keypress"?fl(m):0},keyCode:function(m){return m.type==="keydown"||m.type==="keyup"?m.keyCode:0},which:function(m){return m.type==="keypress"?fl(m):m.type==="keydown"||m.type==="keyup"?m.keyCode:0}}),Ym=Mi(qm),Da=L({},jd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ha=Mi(Da),fu=L({},pi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sc}),gl=Mi(fu),yl=L({},pl,{propertyName:0,elapsedTime:0,pseudoElement:0}),hu=Mi(yl),AS=L({},jd,{deltaX:function(m){return"deltaX"in m?m.deltaX:"wheelDeltaX"in m?-m.wheelDeltaX:0},deltaY:function(m){return"deltaY"in m?m.deltaY:"wheelDeltaY"in m?-m.wheelDeltaY:"wheelDelta"in m?-m.wheelDelta:0},deltaZ:0,deltaMode:0}),Z0=Mi(AS),Q0=[9,13,27,32],Mo=s&&"CompositionEvent"in window,qi=null;s&&"documentMode"in document&&(qi=document.documentMode);var vr=s&&"TextEvent"in window&&!qi,Od=s&&(!Mo||qi&&8<qi&&11>=qi),Fa=" ",ex=!1;function tx(m,x){switch(m){case"keyup":return Q0.indexOf(x.keyCode)!==-1;case"keydown":return x.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Xm(m){return m=m.detail,typeof m=="object"&&"data"in m?m.data:null}var Ec=!1;function MS(m,x){switch(m){case"compositionend":return Xm(x);case"keypress":return x.which!==32?null:(ex=!0,Fa);case"textInput":return m=x.data,m===Fa&&ex?null:m;default:return null}}function wh(m,x){if(Ec)return m==="compositionend"||!Mo&&tx(m,x)?(m=hi(),Ai=dl=Go=null,Ec=!1,m):null;switch(m){case"paste":return null;case"keypress":if(!(x.ctrlKey||x.altKey||x.metaKey)||x.ctrlKey&&x.altKey){if(x.char&&1<x.char.length)return x.char;if(x.which)return String.fromCharCode(x.which)}return null;case"compositionend":return Od&&x.locale!=="ko"?null:x.data;default:return null}}var Ld={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Km(m){var x=m&&m.nodeName&&m.nodeName.toLowerCase();return x==="input"?!!Ld[m.type]:x==="textarea"}function Dd(m,x,A,j){gr(j),x=sg(x,"onChange"),0<x.length&&(A=new ei("onChange","change",null,A,j),m.push({event:A,listeners:x}))}var _c=null,Fd=null;function PS(m){$d(m,0)}function vl(m){var x=Wr(m);if(ee(x))return m}function kS(m,x){if(m==="change")return x}var zd=!1;if(s){var Yo;if(s){var pu="oninput"in document;if(!pu){var mu=document.createElement("div");mu.setAttribute("oninput","return;"),pu=typeof mu.oninput=="function"}Yo=pu}else Yo=!1;zd=Yo&&(!document.documentMode||9<document.documentMode)}function ss(){_c&&(_c.detachEvent("onpropertychange",Jm),Fd=_c=null)}function Jm(m){if(m.propertyName==="value"&&vl(Fd)){var x=[];Dd(x,Fd,m,et(m)),gn(PS,x)}}function Ud(m,x,A){m==="focusin"?(ss(),_c=x,Fd=A,_c.attachEvent("onpropertychange",Jm)):m==="focusout"&&ss()}function NS(m){if(m==="selectionchange"||m==="keyup"||m==="keydown")return vl(Fd)}function nx(m,x){if(m==="click")return vl(x)}function Nr(m,x){if(m==="input"||m==="change")return vl(x)}function Zm(m,x){return m===x&&(m!==0||1/m===1/x)||m!==m&&x!==x}var pa=typeof Object.is=="function"?Object.is:Zm;function gu(m,x){if(pa(m,x))return!0;if(typeof m!="object"||m===null||typeof x!="object"||x===null)return!1;var A=Object.keys(m),j=Object.keys(x);if(A.length!==j.length)return!1;for(j=0;j<A.length;j++){var G=A[j];if(!l.call(x,G)||!pa(m[G],x[G]))return!1}return!0}function bh(m){for(;m&&m.firstChild;)m=m.firstChild;return m}function ma(m,x){var A=bh(m);m=0;for(var j;A;){if(A.nodeType===3){if(j=m+A.textContent.length,m<=x&&j>=x)return{node:A,offset:x-m};m=j}e:{for(;A;){if(A.nextSibling){A=A.nextSibling;break e}A=A.parentNode}A=void 0}A=bh(A)}}function yu(m,x){return m&&x?m===x?!0:m&&m.nodeType===3?!1:x&&x.nodeType===3?yu(m,x.parentNode):"contains"in m?m.contains(x):m.compareDocumentPosition?!!(m.compareDocumentPosition(x)&16):!1:!1}function Rr(){for(var m=window,x=xe();x instanceof m.HTMLIFrameElement;){try{var A=typeof x.contentWindow.location.href=="string"}catch{A=!1}if(A)m=x.contentWindow;else break;x=xe(m.document)}return x}function Pi(m){var x=m&&m.nodeName&&m.nodeName.toLowerCase();return x&&(x==="input"&&(m.type==="text"||m.type==="search"||m.type==="tel"||m.type==="url"||m.type==="password")||x==="textarea"||m.contentEditable==="true")}function ki(m){var x=Rr(),A=m.focusedElem,j=m.selectionRange;if(x!==A&&A&&A.ownerDocument&&yu(A.ownerDocument.documentElement,A)){if(j!==null&&Pi(A)){if(x=j.start,m=j.end,m===void 0&&(m=x),"selectionStart"in A)A.selectionStart=x,A.selectionEnd=Math.min(m,A.value.length);else if(m=(x=A.ownerDocument||document)&&x.defaultView||window,m.getSelection){m=m.getSelection();var G=A.textContent.length,X=Math.min(j.start,G);j=j.end===void 0?X:Math.min(j.end,G),!m.extend&&X>j&&(G=j,j=X,X=G),G=ma(A,X);var ue=ma(A,j);G&&ue&&(m.rangeCount!==1||m.anchorNode!==G.node||m.anchorOffset!==G.offset||m.focusNode!==ue.node||m.focusOffset!==ue.offset)&&(x=x.createRange(),x.setStart(G.node,G.offset),m.removeAllRanges(),X>j?(m.addRange(x),m.extend(ue.node,ue.offset)):(x.setEnd(ue.node,ue.offset),m.addRange(x)))}}for(x=[],m=A;m=m.parentNode;)m.nodeType===1&&x.push({element:m,left:m.scrollLeft,top:m.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<x.length;A++)m=x[A],m.element.scrollLeft=m.left,m.element.scrollTop=m.top}}var Qm=s&&"documentMode"in document&&11>=document.documentMode,Us=null,vu=null,Sh=null,Ni=!1;function eg(m,x,A){var j=A.window===A?A.document:A.nodeType===9?A:A.ownerDocument;Ni||Us==null||Us!==xe(j)||(j=Us,"selectionStart"in j&&Pi(j)?j={start:j.selectionStart,end:j.selectionEnd}:(j=(j.ownerDocument&&j.ownerDocument.defaultView||window).getSelection(),j={anchorNode:j.anchorNode,anchorOffset:j.anchorOffset,focusNode:j.focusNode,focusOffset:j.focusOffset}),Sh&&gu(Sh,j)||(Sh=j,j=sg(vu,"onSelect"),0<j.length&&(x=new ei("onSelect","select",null,x,A),m.push({event:x,listeners:j}),x.target=Us)))}function Bd(m,x){var A={};return A[m.toLowerCase()]=x.toLowerCase(),A["Webkit"+m]="webkit"+x,A["Moz"+m]="moz"+x,A}var Tc={animationend:Bd("Animation","AnimationEnd"),animationiteration:Bd("Animation","AnimationIteration"),animationstart:Bd("Animation","AnimationStart"),transitionend:Bd("Transition","TransitionEnd")},ls={},cs={};s&&(cs=document.createElement("div").style,"AnimationEvent"in window||(delete Tc.animationend.animation,delete Tc.animationiteration.animation,delete Tc.animationstart.animation),"TransitionEvent"in window||delete Tc.transitionend.transition);function Bs(m){if(ls[m])return ls[m];if(!Tc[m])return m;var x=Tc[m],A;for(A in x)if(x.hasOwnProperty(A)&&A in cs)return ls[m]=x[A];return m}var Eh=Bs("animationend"),_h=Bs("animationiteration"),rx=Bs("animationstart"),ix=Bs("transitionend"),ox=new Map,ax="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function xl(m,x){ox.set(m,x),o(x,[m])}for(var tg=0;tg<ax.length;tg++){var Th=ax[tg],Ch=Th.toLowerCase(),RS=Th[0].toUpperCase()+Th.slice(1);xl(Ch,"on"+RS)}xl(Eh,"onAnimationEnd"),xl(_h,"onAnimationIteration"),xl(rx,"onAnimationStart"),xl("dblclick","onDoubleClick"),xl("focusin","onFocus"),xl("focusout","onBlur"),xl(ix,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Cc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ng=new Set("cancel close invalid load scroll toggle".split(" ").concat(Cc));function rg(m,x,A){var j=m.type||"unknown-event";m.currentTarget=A,it(j,x,void 0,m),m.currentTarget=null}function $d(m,x){x=(x&4)!==0;for(var A=0;A<m.length;A++){var j=m[A],G=j.event;j=j.listeners;e:{var X=void 0;if(x)for(var ue=j.length-1;0<=ue;ue--){var Te=j[ue],je=Te.instance,Ye=Te.currentTarget;if(Te=Te.listener,je!==X&&G.isPropagationStopped())break e;rg(G,Te,Ye),X=je}else for(ue=0;ue<j.length;ue++){if(Te=j[ue],je=Te.instance,Ye=Te.currentTarget,Te=Te.listener,je!==X&&G.isPropagationStopped())break e;rg(G,Te,Ye),X=je}}}if(Pe)throw m=Re,Pe=!1,Re=null,m}function sr(m,x){var A=x[bu];A===void 0&&(A=x[bu]=new Set);var j=m+"__bubble";A.has(j)||(og(x,m,2,!1),A.add(j))}function ig(m,x,A){var j=0;x&&(j|=4),og(A,m,j,x)}var Ah="_reactListening"+Math.random().toString(36).slice(2);function Hd(m){if(!m[Ah]){m[Ah]=!0,r.forEach(function(A){A!=="selectionchange"&&(ng.has(A)||ig(A,!1,m),ig(A,!0,m))});var x=m.nodeType===9?m:m.ownerDocument;x===null||x[Ah]||(x[Ah]=!0,ig("selectionchange",!1,x))}}function og(m,x,A,j){switch(wc(x)){case 1:var G=zs;break;case 4:G=Oa;break;default:G=du}A=G.bind(null,x,A,m),G=void 0,!ln||x!=="touchstart"&&x!=="touchmove"&&x!=="wheel"||(G=!0),j?G!==void 0?m.addEventListener(x,A,{capture:!0,passive:G}):m.addEventListener(x,A,!0):G!==void 0?m.addEventListener(x,A,{passive:G}):m.addEventListener(x,A,!1)}function ag(m,x,A,j,G){var X=j;if((x&1)===0&&(x&2)===0&&j!==null)e:for(;;){if(j===null)return;var ue=j.tag;if(ue===3||ue===4){var Te=j.stateNode.containerInfo;if(Te===G||Te.nodeType===8&&Te.parentNode===G)break;if(ue===4)for(ue=j.return;ue!==null;){var je=ue.tag;if((je===3||je===4)&&(je=ue.stateNode.containerInfo,je===G||je.nodeType===8&&je.parentNode===G))return;ue=ue.return}for(;Te!==null;){if(ue=Ac(Te),ue===null)return;if(je=ue.tag,je===5||je===6){j=X=ue;continue e}Te=Te.parentNode}}j=j.return}gn(function(){var Ye=X,lt=et(A),ht=[];e:{var st=ox.get(m);if(st!==void 0){var kt=ei,Ot=m;switch(m){case"keypress":if(fl(A)===0)break e;case"keydown":case"keyup":kt=Ym;break;case"focusin":Ot="focus",kt=Vm;break;case"focusout":Ot="blur",kt=Vm;break;case"beforeblur":case"afterblur":kt=Vm;break;case"click":if(A.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":kt=Y0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":kt=bc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":kt=gl;break;case Eh:case _h:case rx:kt=ES;break;case ix:kt=hu;break;case"scroll":kt=Vr;break;case"wheel":kt=Z0;break;case"copy":case"cut":case"paste":kt=X0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":kt=ha}var Lt=(x&4)!==0,gi=!Lt&&m==="scroll",Be=Lt?st!==null?st+"Capture":null:st;Lt=[];for(var Oe=Ye,We;Oe!==null;){We=Oe;var vt=We.stateNode;if(We.tag===5&&vt!==null&&(We=vt,Be!==null&&(vt=un(Oe,Be),vt!=null&&Lt.push(Vd(Oe,vt,We)))),gi)break;Oe=Oe.return}0<Lt.length&&(st=new kt(st,Ot,null,A,lt),ht.push({event:st,listeners:Lt}))}}if((x&7)===0){e:{if(st=m==="mouseover"||m==="pointerover",kt=m==="mouseout"||m==="pointerout",st&&A!==Xe&&(Ot=A.relatedTarget||A.fromElement)&&(Ac(Ot)||Ot[ga]))break e;if((kt||st)&&(st=lt.window===lt?lt:(st=lt.ownerDocument)?st.defaultView||st.parentWindow:window,kt?(Ot=A.relatedTarget||A.toElement,kt=Ye,Ot=Ot?Ac(Ot):null,Ot!==null&&(gi=pt(Ot),Ot!==gi||Ot.tag!==5&&Ot.tag!==6)&&(Ot=null)):(kt=null,Ot=Ye),kt!==Ot)){if(Lt=Y0,vt="onMouseLeave",Be="onMouseEnter",Oe="mouse",(m==="pointerout"||m==="pointerover")&&(Lt=ha,vt="onPointerLeave",Be="onPointerEnter",Oe="pointer"),gi=kt==null?st:Wr(kt),We=Ot==null?st:Wr(Ot),st=new Lt(vt,Oe+"leave",kt,A,lt),st.target=gi,st.relatedTarget=We,vt=null,Ac(lt)===Ye&&(Lt=new Lt(Be,Oe+"enter",Ot,A,lt),Lt.target=We,Lt.relatedTarget=gi,vt=Lt),gi=vt,kt&&Ot)t:{for(Lt=kt,Be=Ot,Oe=0,We=Lt;We;We=xu(We))Oe++;for(We=0,vt=Be;vt;vt=xu(vt))We++;for(;0<Oe-We;)Lt=xu(Lt),Oe--;for(;0<We-Oe;)Be=xu(Be),We--;for(;Oe--;){if(Lt===Be||Be!==null&&Lt===Be.alternate)break t;Lt=xu(Lt),Be=xu(Be)}Lt=null}else Lt=null;kt!==null&&jS(ht,st,kt,Lt,!1),Ot!==null&&gi!==null&&jS(ht,gi,Ot,Lt,!0)}}e:{if(st=Ye?Wr(Ye):window,kt=st.nodeName&&st.nodeName.toLowerCase(),kt==="select"||kt==="input"&&st.type==="file")var zt=kS;else if(Km(st))if(zd)zt=Nr;else{zt=NS;var Wt=Ud}else(kt=st.nodeName)&&kt.toLowerCase()==="input"&&(st.type==="checkbox"||st.type==="radio")&&(zt=nx);if(zt&&(zt=zt(m,Ye))){Dd(ht,zt,A,lt);break e}Wt&&Wt(m,st,Ye),m==="focusout"&&(Wt=st._wrapperState)&&Wt.controlled&&st.type==="number"&&Se(st,"number",st.value)}switch(Wt=Ye?Wr(Ye):window,m){case"focusin":(Km(Wt)||Wt.contentEditable==="true")&&(Us=Wt,vu=Ye,Sh=null);break;case"focusout":Sh=vu=Us=null;break;case"mousedown":Ni=!0;break;case"contextmenu":case"mouseup":case"dragend":Ni=!1,eg(ht,A,lt);break;case"selectionchange":if(Qm)break;case"keydown":case"keyup":eg(ht,A,lt)}var Gt;if(Mo)e:{switch(m){case"compositionstart":var rn="onCompositionStart";break e;case"compositionend":rn="onCompositionEnd";break e;case"compositionupdate":rn="onCompositionUpdate";break e}rn=void 0}else Ec?tx(m,A)&&(rn="onCompositionEnd"):m==="keydown"&&A.keyCode===229&&(rn="onCompositionStart");rn&&(Od&&A.locale!=="ko"&&(Ec||rn!=="onCompositionStart"?rn==="onCompositionEnd"&&Ec&&(Gt=hi()):(Go=lt,dl="value"in Go?Go.value:Go.textContent,Ec=!0)),Wt=sg(Ye,rn),0<Wt.length&&(rn=new K0(rn,m,null,A,lt),ht.push({event:rn,listeners:Wt}),Gt?rn.data=Gt:(Gt=Xm(A),Gt!==null&&(rn.data=Gt)))),(Gt=vr?MS(m,A):wh(m,A))&&(Ye=sg(Ye,"onBeforeInput"),0<Ye.length&&(lt=new K0("onBeforeInput","beforeinput",null,A,lt),ht.push({event:lt,listeners:Ye}),lt.data=Gt))}$d(ht,x)})}function Vd(m,x,A){return{instance:m,listener:x,currentTarget:A}}function sg(m,x){for(var A=x+"Capture",j=[];m!==null;){var G=m,X=G.stateNode;G.tag===5&&X!==null&&(G=X,X=un(m,A),X!=null&&j.unshift(Vd(m,X,G)),X=un(m,x),X!=null&&j.push(Vd(m,X,G))),m=m.return}return j}function xu(m){if(m===null)return null;do m=m.return;while(m&&m.tag!==5);return m||null}function jS(m,x,A,j,G){for(var X=x._reactName,ue=[];A!==null&&A!==j;){var Te=A,je=Te.alternate,Ye=Te.stateNode;if(je!==null&&je===j)break;Te.tag===5&&Ye!==null&&(Te=Ye,G?(je=un(A,X),je!=null&&ue.unshift(Vd(A,je,Te))):G||(je=un(A,X),je!=null&&ue.push(Vd(A,je,Te)))),A=A.return}ue.length!==0&&m.push({event:x,listeners:ue})}var W2=/\r\n?/g,IS=/\u0000|\uFFFD/g;function sx(m){return(typeof m=="string"?m:""+m).replace(W2,`
`).replace(IS,"")}function Mh(m,x,A){if(x=sx(x),sx(m)!==x&&A)throw Error(n(425))}function Ph(){}var Wd=null,lx=null;function cx(m,x){return m==="textarea"||m==="noscript"||typeof x.children=="string"||typeof x.children=="number"||typeof x.dangerouslySetInnerHTML=="object"&&x.dangerouslySetInnerHTML!==null&&x.dangerouslySetInnerHTML.__html!=null}var ux=typeof setTimeout=="function"?setTimeout:void 0,dx=typeof clearTimeout=="function"?clearTimeout:void 0,lg=typeof Promise=="function"?Promise:void 0,G2=typeof queueMicrotask=="function"?queueMicrotask:typeof lg<"u"?function(m){return lg.resolve(null).then(m).catch(OS)}:ux;function OS(m){setTimeout(function(){throw m})}function cg(m,x){var A=x,j=0;do{var G=A.nextSibling;if(m.removeChild(A),G&&G.nodeType===8)if(A=G.data,A==="/$"){if(j===0){m.removeChild(G),vc(x);return}j--}else A!=="$"&&A!=="$?"&&A!=="$!"||j++;A=G}while(A);vc(x)}function wl(m){for(;m!=null;m=m.nextSibling){var x=m.nodeType;if(x===1||x===3)break;if(x===8){if(x=m.data,x==="$"||x==="$!"||x==="$?")break;if(x==="/$")return null}}return m}function fx(m){m=m.previousSibling;for(var x=0;m;){if(m.nodeType===8){var A=m.data;if(A==="$"||A==="$!"||A==="$?"){if(x===0)return m;x--}else A==="/$"&&x++}m=m.previousSibling}return null}var wu=Math.random().toString(36).slice(2),mi="__reactFiber$"+wu,Gd="__reactProps$"+wu,ga="__reactContainer$"+wu,bu="__reactEvents$"+wu,ug="__reactListeners$"+wu,dg="__reactHandles$"+wu;function Ac(m){var x=m[mi];if(x)return x;for(var A=m.parentNode;A;){if(x=A[ga]||A[mi]){if(A=x.alternate,x.child!==null||A!==null&&A.child!==null)for(m=fx(m);m!==null;){if(A=m[mi])return A;m=fx(m)}return x}m=A,A=m.parentNode}return null}function bl(m){return m=m[mi]||m[ga],!m||m.tag!==5&&m.tag!==6&&m.tag!==13&&m.tag!==3?null:m}function Wr(m){if(m.tag===5||m.tag===6)return m.stateNode;throw Error(n(33))}function fg(m){return m[Gd]||null}var hx=[],Ri=-1;function Dr(m){return{current:m}}function lr(m){0>Ri||(m.current=hx[Ri],hx[Ri]=null,Ri--)}function nr(m,x){Ri++,hx[Ri]=m.current,m.current=x}var Sl={},Yi=Dr(Sl),Po=Dr(!1),El=Sl;function Su(m,x){var A=m.type.contextTypes;if(!A)return Sl;var j=m.stateNode;if(j&&j.__reactInternalMemoizedUnmaskedChildContext===x)return j.__reactInternalMemoizedMaskedChildContext;var G={},X;for(X in A)G[X]=x[X];return j&&(m=m.stateNode,m.__reactInternalMemoizedUnmaskedChildContext=x,m.__reactInternalMemoizedMaskedChildContext=G),G}function uo(m){return m=m.childContextTypes,m!=null}function kh(){lr(Po),lr(Yi)}function px(m,x,A){if(Yi.current!==Sl)throw Error(n(168));nr(Yi,x),nr(Po,A)}function Nh(m,x,A){var j=m.stateNode;if(x=x.childContextTypes,typeof j.getChildContext!="function")return A;j=j.getChildContext();for(var G in j)if(!(G in x))throw Error(n(108,ie(m)||"Unknown",G));return L({},A,j)}function Eu(m){return m=(m=m.stateNode)&&m.__reactInternalMemoizedMergedChildContext||Sl,El=Yi.current,nr(Yi,m),nr(Po,Po.current),!0}function mx(m,x,A){var j=m.stateNode;if(!j)throw Error(n(169));A?(m=Nh(m,x,El),j.__reactInternalMemoizedMergedChildContext=m,lr(Po),lr(Yi),nr(Yi,m)):lr(Po),nr(Po,A)}var us=null,Rh=!1,hg=!1;function jh(m){us===null?us=[m]:us.push(m)}function LS(m){Rh=!0,jh(m)}function $s(){if(!hg&&us!==null){hg=!0;var m=0,x=En;try{var A=us;for(En=1;m<A.length;m++){var j=A[m];do j=j(!0);while(j!==null)}us=null,Rh=!1}catch(G){throw us!==null&&(us=us.slice(m+1)),ua(Eo,$s),G}finally{En=x,hg=!1}}return null}var _u=[],Xo=0,pg=null,mg=0,ko=[],ji=0,Tu=null,xt=1,za="";function _l(m,x){_u[Xo++]=mg,_u[Xo++]=pg,pg=m,mg=x}function gx(m,x,A){ko[ji++]=xt,ko[ji++]=za,ko[ji++]=Tu,Tu=m;var j=xt;m=za;var G=32-Pr(j)-1;j&=~(1<<G),A+=1;var X=32-Pr(x)+G;if(30<X){var ue=G-G%5;X=(j&(1<<ue)-1).toString(32),j>>=ue,G-=ue,xt=1<<32-Pr(x)+G|A<<G|j,za=X+m}else xt=1<<X|A<<G|j,za=m}function yx(m){m.return!==null&&(_l(m,1),gx(m,1,0))}function Tl(m){for(;m===pg;)pg=_u[--Xo],_u[Xo]=null,mg=_u[--Xo],_u[Xo]=null;for(;m===Tu;)Tu=ko[--ji],ko[ji]=null,za=ko[--ji],ko[ji]=null,xt=ko[--ji],ko[ji]=null}var Xi=null,No=null,fr=!1,Ua=null;function vx(m,x){var A=qs(5,null,null,0);A.elementType="DELETED",A.stateNode=x,A.return=m,x=m.deletions,x===null?(m.deletions=[A],m.flags|=16):x.push(A)}function xx(m,x){switch(m.tag){case 5:var A=m.type;return x=x.nodeType!==1||A.toLowerCase()!==x.nodeName.toLowerCase()?null:x,x!==null?(m.stateNode=x,Xi=m,No=wl(x.firstChild),!0):!1;case 6:return x=m.pendingProps===""||x.nodeType!==3?null:x,x!==null?(m.stateNode=x,Xi=m,No=null,!0):!1;case 13:return x=x.nodeType!==8?null:x,x!==null?(A=Tu!==null?{id:xt,overflow:za}:null,m.memoizedState={dehydrated:x,treeContext:A,retryLane:1073741824},A=qs(18,null,null,0),A.stateNode=x,A.return=m,m.child=A,Xi=m,No=null,!0):!1;default:return!1}}function gg(m){return(m.mode&1)!==0&&(m.flags&128)===0}function yg(m){if(fr){var x=No;if(x){var A=x;if(!xx(m,x)){if(gg(m))throw Error(n(418));x=wl(A.nextSibling);var j=Xi;x&&xx(m,x)?vx(j,A):(m.flags=m.flags&-4097|2,fr=!1,Xi=m)}}else{if(gg(m))throw Error(n(418));m.flags=m.flags&-4097|2,fr=!1,Xi=m}}}function vg(m){for(m=m.return;m!==null&&m.tag!==5&&m.tag!==3&&m.tag!==13;)m=m.return;Xi=m}function qd(m){if(m!==Xi)return!1;if(!fr)return vg(m),fr=!0,!1;var x;if((x=m.tag!==3)&&!(x=m.tag!==5)&&(x=m.type,x=x!=="head"&&x!=="body"&&!cx(m.type,m.memoizedProps)),x&&(x=No)){if(gg(m))throw wx(),Error(n(418));for(;x;)vx(m,x),x=wl(x.nextSibling)}if(vg(m),m.tag===13){if(m=m.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(n(317));e:{for(m=m.nextSibling,x=0;m;){if(m.nodeType===8){var A=m.data;if(A==="/$"){if(x===0){No=wl(m.nextSibling);break e}x--}else A!=="$"&&A!=="$!"&&A!=="$?"||x++}m=m.nextSibling}No=null}}else No=Xi?wl(m.stateNode.nextSibling):null;return!0}function wx(){for(var m=No;m;)m=wl(m.nextSibling)}function Mc(){No=Xi=null,fr=!1}function Yd(m){Ua===null?Ua=[m]:Ua.push(m)}var q2=C.ReactCurrentBatchConfig;function Ih(m,x,A){if(m=A.ref,m!==null&&typeof m!="function"&&typeof m!="object"){if(A._owner){if(A=A._owner,A){if(A.tag!==1)throw Error(n(309));var j=A.stateNode}if(!j)throw Error(n(147,m));var G=j,X=""+m;return x!==null&&x.ref!==null&&typeof x.ref=="function"&&x.ref._stringRef===X?x.ref:(x=function(ue){var Te=G.refs;ue===null?delete Te[X]:Te[X]=ue},x._stringRef=X,x)}if(typeof m!="string")throw Error(n(284));if(!A._owner)throw Error(n(290,m))}return m}function Oh(m,x){throw m=Object.prototype.toString.call(x),Error(n(31,m==="[object Object]"?"object with keys {"+Object.keys(x).join(", ")+"}":m))}function bx(m){var x=m._init;return x(m._payload)}function Sx(m){function x(Be,Oe){if(m){var We=Be.deletions;We===null?(Be.deletions=[Oe],Be.flags|=16):We.push(Oe)}}function A(Be,Oe){if(!m)return null;for(;Oe!==null;)x(Be,Oe),Oe=Oe.sibling;return null}function j(Be,Oe){for(Be=new Map;Oe!==null;)Oe.key!==null?Be.set(Oe.key,Oe):Be.set(Oe.index,Oe),Oe=Oe.sibling;return Be}function G(Be,Oe){return Be=af(Be,Oe),Be.index=0,Be.sibling=null,Be}function X(Be,Oe,We){return Be.index=We,m?(We=Be.alternate,We!==null?(We=We.index,We<Oe?(Be.flags|=2,Oe):We):(Be.flags|=2,Oe)):(Be.flags|=1048576,Oe)}function ue(Be){return m&&Be.alternate===null&&(Be.flags|=2),Be}function Te(Be,Oe,We,vt){return Oe===null||Oe.tag!==6?(Oe=fM(We,Be.mode,vt),Oe.return=Be,Oe):(Oe=G(Oe,We),Oe.return=Be,Oe)}function je(Be,Oe,We,vt){var zt=We.type;return zt===k?lt(Be,Oe,We.props.children,vt,We.key):Oe!==null&&(Oe.elementType===zt||typeof zt=="object"&&zt!==null&&zt.$$typeof===K&&bx(zt)===Oe.type)?(vt=G(Oe,We.props),vt.ref=Ih(Be,Oe,We),vt.return=Be,vt):(vt=oE(We.type,We.key,We.props,null,Be.mode,vt),vt.ref=Ih(Be,Oe,We),vt.return=Be,vt)}function Ye(Be,Oe,We,vt){return Oe===null||Oe.tag!==4||Oe.stateNode.containerInfo!==We.containerInfo||Oe.stateNode.implementation!==We.implementation?(Oe=hM(We,Be.mode,vt),Oe.return=Be,Oe):(Oe=G(Oe,We.children||[]),Oe.return=Be,Oe)}function lt(Be,Oe,We,vt,zt){return Oe===null||Oe.tag!==7?(Oe=Zh(We,Be.mode,vt,zt),Oe.return=Be,Oe):(Oe=G(Oe,We),Oe.return=Be,Oe)}function ht(Be,Oe,We){if(typeof Oe=="string"&&Oe!==""||typeof Oe=="number")return Oe=fM(""+Oe,Be.mode,We),Oe.return=Be,Oe;if(typeof Oe=="object"&&Oe!==null){switch(Oe.$$typeof){case P:return We=oE(Oe.type,Oe.key,Oe.props,null,Be.mode,We),We.ref=Ih(Be,null,Oe),We.return=Be,We;case M:return Oe=hM(Oe,Be.mode,We),Oe.return=Be,Oe;case K:var vt=Oe._init;return ht(Be,vt(Oe._payload),We)}if(me(Oe)||Y(Oe))return Oe=Zh(Oe,Be.mode,We,null),Oe.return=Be,Oe;Oh(Be,Oe)}return null}function st(Be,Oe,We,vt){var zt=Oe!==null?Oe.key:null;if(typeof We=="string"&&We!==""||typeof We=="number")return zt!==null?null:Te(Be,Oe,""+We,vt);if(typeof We=="object"&&We!==null){switch(We.$$typeof){case P:return We.key===zt?je(Be,Oe,We,vt):null;case M:return We.key===zt?Ye(Be,Oe,We,vt):null;case K:return zt=We._init,st(Be,Oe,zt(We._payload),vt)}if(me(We)||Y(We))return zt!==null?null:lt(Be,Oe,We,vt,null);Oh(Be,We)}return null}function kt(Be,Oe,We,vt,zt){if(typeof vt=="string"&&vt!==""||typeof vt=="number")return Be=Be.get(We)||null,Te(Oe,Be,""+vt,zt);if(typeof vt=="object"&&vt!==null){switch(vt.$$typeof){case P:return Be=Be.get(vt.key===null?We:vt.key)||null,je(Oe,Be,vt,zt);case M:return Be=Be.get(vt.key===null?We:vt.key)||null,Ye(Oe,Be,vt,zt);case K:var Wt=vt._init;return kt(Be,Oe,We,Wt(vt._payload),zt)}if(me(vt)||Y(vt))return Be=Be.get(We)||null,lt(Oe,Be,vt,zt,null);Oh(Oe,vt)}return null}function Ot(Be,Oe,We,vt){for(var zt=null,Wt=null,Gt=Oe,rn=Oe=0,mo=null;Gt!==null&&rn<We.length;rn++){Gt.index>rn?(mo=Gt,Gt=null):mo=Gt.sibling;var qn=st(Be,Gt,We[rn],vt);if(qn===null){Gt===null&&(Gt=mo);break}m&&Gt&&qn.alternate===null&&x(Be,Gt),Oe=X(qn,Oe,rn),Wt===null?zt=qn:Wt.sibling=qn,Wt=qn,Gt=mo}if(rn===We.length)return A(Be,Gt),fr&&_l(Be,rn),zt;if(Gt===null){for(;rn<We.length;rn++)Gt=ht(Be,We[rn],vt),Gt!==null&&(Oe=X(Gt,Oe,rn),Wt===null?zt=Gt:Wt.sibling=Gt,Wt=Gt);return fr&&_l(Be,rn),zt}for(Gt=j(Be,Gt);rn<We.length;rn++)mo=kt(Gt,Be,rn,We[rn],vt),mo!==null&&(m&&mo.alternate!==null&&Gt.delete(mo.key===null?rn:mo.key),Oe=X(mo,Oe,rn),Wt===null?zt=mo:Wt.sibling=mo,Wt=mo);return m&&Gt.forEach(function(sf){return x(Be,sf)}),fr&&_l(Be,rn),zt}function Lt(Be,Oe,We,vt){var zt=Y(We);if(typeof zt!="function")throw Error(n(150));if(We=zt.call(We),We==null)throw Error(n(151));for(var Wt=zt=null,Gt=Oe,rn=Oe=0,mo=null,qn=We.next();Gt!==null&&!qn.done;rn++,qn=We.next()){Gt.index>rn?(mo=Gt,Gt=null):mo=Gt.sibling;var sf=st(Be,Gt,qn.value,vt);if(sf===null){Gt===null&&(Gt=mo);break}m&&Gt&&sf.alternate===null&&x(Be,Gt),Oe=X(sf,Oe,rn),Wt===null?zt=sf:Wt.sibling=sf,Wt=sf,Gt=mo}if(qn.done)return A(Be,Gt),fr&&_l(Be,rn),zt;if(Gt===null){for(;!qn.done;rn++,qn=We.next())qn=ht(Be,qn.value,vt),qn!==null&&(Oe=X(qn,Oe,rn),Wt===null?zt=qn:Wt.sibling=qn,Wt=qn);return fr&&_l(Be,rn),zt}for(Gt=j(Be,Gt);!qn.done;rn++,qn=We.next())qn=kt(Gt,Be,rn,qn.value,vt),qn!==null&&(m&&qn.alternate!==null&&Gt.delete(qn.key===null?rn:qn.key),Oe=X(qn,Oe,rn),Wt===null?zt=qn:Wt.sibling=qn,Wt=qn);return m&&Gt.forEach(function(Jhe){return x(Be,Jhe)}),fr&&_l(Be,rn),zt}function gi(Be,Oe,We,vt){if(typeof We=="object"&&We!==null&&We.type===k&&We.key===null&&(We=We.props.children),typeof We=="object"&&We!==null){switch(We.$$typeof){case P:e:{for(var zt=We.key,Wt=Oe;Wt!==null;){if(Wt.key===zt){if(zt=We.type,zt===k){if(Wt.tag===7){A(Be,Wt.sibling),Oe=G(Wt,We.props.children),Oe.return=Be,Be=Oe;break e}}else if(Wt.elementType===zt||typeof zt=="object"&&zt!==null&&zt.$$typeof===K&&bx(zt)===Wt.type){A(Be,Wt.sibling),Oe=G(Wt,We.props),Oe.ref=Ih(Be,Wt,We),Oe.return=Be,Be=Oe;break e}A(Be,Wt);break}else x(Be,Wt);Wt=Wt.sibling}We.type===k?(Oe=Zh(We.props.children,Be.mode,vt,We.key),Oe.return=Be,Be=Oe):(vt=oE(We.type,We.key,We.props,null,Be.mode,vt),vt.ref=Ih(Be,Oe,We),vt.return=Be,Be=vt)}return ue(Be);case M:e:{for(Wt=We.key;Oe!==null;){if(Oe.key===Wt)if(Oe.tag===4&&Oe.stateNode.containerInfo===We.containerInfo&&Oe.stateNode.implementation===We.implementation){A(Be,Oe.sibling),Oe=G(Oe,We.children||[]),Oe.return=Be,Be=Oe;break e}else{A(Be,Oe);break}else x(Be,Oe);Oe=Oe.sibling}Oe=hM(We,Be.mode,vt),Oe.return=Be,Be=Oe}return ue(Be);case K:return Wt=We._init,gi(Be,Oe,Wt(We._payload),vt)}if(me(We))return Ot(Be,Oe,We,vt);if(Y(We))return Lt(Be,Oe,We,vt);Oh(Be,We)}return typeof We=="string"&&We!==""||typeof We=="number"?(We=""+We,Oe!==null&&Oe.tag===6?(A(Be,Oe.sibling),Oe=G(Oe,We),Oe.return=Be,Be=Oe):(A(Be,Oe),Oe=fM(We,Be.mode,vt),Oe.return=Be,Be=Oe),ue(Be)):A(Be,Oe)}return gi}var Cu=Sx(!0),Lh=Sx(!1),Au=Dr(null),Mu=null,Cl=null,Xd=null;function Pu(){Xd=Cl=Mu=null}function Dh(m){var x=Au.current;lr(Au),m._currentValue=x}function Fh(m,x,A){for(;m!==null;){var j=m.alternate;if((m.childLanes&x)!==x?(m.childLanes|=x,j!==null&&(j.childLanes|=x)):j!==null&&(j.childLanes&x)!==x&&(j.childLanes|=x),m===A)break;m=m.return}}function Pc(m,x){Mu=m,Xd=Cl=null,m=m.dependencies,m!==null&&m.firstContext!==null&&((m.lanes&x)!==0&&(pn=!0),m.firstContext=null)}function ya(m){var x=m._currentValue;if(Xd!==m)if(m={context:m,memoizedValue:x,next:null},Cl===null){if(Mu===null)throw Error(n(308));Cl=m,Mu.dependencies={lanes:0,firstContext:m}}else Cl=Cl.next=m;return x}var Al=null;function Ex(m){Al===null?Al=[m]:Al.push(m)}function zh(m,x,A,j){var G=x.interleaved;return G===null?(A.next=A,Ex(x)):(A.next=G.next,G.next=A),x.interleaved=A,ds(m,j)}function ds(m,x){m.lanes|=x;var A=m.alternate;for(A!==null&&(A.lanes|=x),A=m,m=m.return;m!==null;)m.childLanes|=x,A=m.alternate,A!==null&&(A.childLanes|=x),A=m,m=m.return;return A.tag===3?A.stateNode:null}var Zn=!1;function hn(m){m.updateQueue={baseState:m.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Gr(m,x){m=m.updateQueue,x.updateQueue===m&&(x.updateQueue={baseState:m.baseState,firstBaseUpdate:m.firstBaseUpdate,lastBaseUpdate:m.lastBaseUpdate,shared:m.shared,effects:m.effects})}function Qn(m,x){return{eventTime:m,lane:x,tag:0,payload:null,callback:null,next:null}}function xr(m,x,A){var j=m.updateQueue;if(j===null)return null;if(j=j.shared,(Wn&2)!==0){var G=j.pending;return G===null?x.next=x:(x.next=G.next,G.next=x),j.pending=x,ds(m,A)}return G=j.interleaved,G===null?(x.next=x,Ex(j)):(x.next=G.next,G.next=x),j.interleaved=x,ds(m,A)}function fo(m,x,A){if(x=x.updateQueue,x!==null&&(x=x.shared,(A&4194240)!==0)){var j=x.lanes;j&=m.pendingLanes,A|=j,x.lanes=A,is(m,A)}}function ku(m,x){var A=m.updateQueue,j=m.alternate;if(j!==null&&(j=j.updateQueue,A===j)){var G=null,X=null;if(A=A.firstBaseUpdate,A!==null){do{var ue={eventTime:A.eventTime,lane:A.lane,tag:A.tag,payload:A.payload,callback:A.callback,next:null};X===null?G=X=ue:X=X.next=ue,A=A.next}while(A!==null);X===null?G=X=x:X=X.next=x}else G=X=x;A={baseState:j.baseState,firstBaseUpdate:G,lastBaseUpdate:X,shared:j.shared,effects:j.effects},m.updateQueue=A;return}m=A.lastBaseUpdate,m===null?A.firstBaseUpdate=x:m.next=x,A.lastBaseUpdate=x}function Fr(m,x,A,j){var G=m.updateQueue;Zn=!1;var X=G.firstBaseUpdate,ue=G.lastBaseUpdate,Te=G.shared.pending;if(Te!==null){G.shared.pending=null;var je=Te,Ye=je.next;je.next=null,ue===null?X=Ye:ue.next=Ye,ue=je;var lt=m.alternate;lt!==null&&(lt=lt.updateQueue,Te=lt.lastBaseUpdate,Te!==ue&&(Te===null?lt.firstBaseUpdate=Ye:Te.next=Ye,lt.lastBaseUpdate=je))}if(X!==null){var ht=G.baseState;ue=0,lt=Ye=je=null,Te=X;do{var st=Te.lane,kt=Te.eventTime;if((j&st)===st){lt!==null&&(lt=lt.next={eventTime:kt,lane:0,tag:Te.tag,payload:Te.payload,callback:Te.callback,next:null});e:{var Ot=m,Lt=Te;switch(st=x,kt=A,Lt.tag){case 1:if(Ot=Lt.payload,typeof Ot=="function"){ht=Ot.call(kt,ht,st);break e}ht=Ot;break e;case 3:Ot.flags=Ot.flags&-65537|128;case 0:if(Ot=Lt.payload,st=typeof Ot=="function"?Ot.call(kt,ht,st):Ot,st==null)break e;ht=L({},ht,st);break e;case 2:Zn=!0}}Te.callback!==null&&Te.lane!==0&&(m.flags|=64,st=G.effects,st===null?G.effects=[Te]:st.push(Te))}else kt={eventTime:kt,lane:st,tag:Te.tag,payload:Te.payload,callback:Te.callback,next:null},lt===null?(Ye=lt=kt,je=ht):lt=lt.next=kt,ue|=st;if(Te=Te.next,Te===null){if(Te=G.shared.pending,Te===null)break;st=Te,Te=st.next,st.next=null,G.lastBaseUpdate=st,G.shared.pending=null}}while(!0);if(lt===null&&(je=ht),G.baseState=je,G.firstBaseUpdate=Ye,G.lastBaseUpdate=lt,x=G.shared.interleaved,x!==null){G=x;do ue|=G.lane,G=G.next;while(G!==x)}else X===null&&(G.shared.lanes=0);Yh|=ue,m.lanes=ue,m.memoizedState=ht}}function Kd(m,x,A){if(m=x.effects,x.effects=null,m!==null)for(x=0;x<m.length;x++){var j=m[x],G=j.callback;if(G!==null){if(j.callback=null,j=A,typeof G!="function")throw Error(n(191,G));G.call(j)}}}var Hs={},va=Dr(Hs),Nu=Dr(Hs),Ml=Dr(Hs);function ti(m){if(m===Hs)throw Error(n(174));return m}function Uh(m,x){switch(nr(Ml,x),nr(Nu,m),nr(va,Hs),m=x.nodeType,m){case 9:case 11:x=(x=x.documentElement)?x.namespaceURI:fe(null,"");break;default:m=m===8?x.parentNode:x,x=m.namespaceURI||null,m=m.tagName,x=fe(x,m)}lr(va),nr(va,x)}function kc(){lr(va),lr(Nu),lr(Ml)}function Ru(m){ti(Ml.current);var x=ti(va.current),A=fe(x,m.type);x!==A&&(nr(Nu,m),nr(va,A))}function Jd(m){Nu.current===m&&(lr(va),lr(Nu))}var hr=Dr(0);function fs(m){for(var x=m;x!==null;){if(x.tag===13){var A=x.memoizedState;if(A!==null&&(A=A.dehydrated,A===null||A.data==="$?"||A.data==="$!"))return x}else if(x.tag===19&&x.memoizedProps.revealOrder!==void 0){if((x.flags&128)!==0)return x}else if(x.child!==null){x.child.return=x,x=x.child;continue}if(x===m)break;for(;x.sibling===null;){if(x.return===null||x.return===m)return null;x=x.return}x.sibling.return=x.return,x=x.sibling}return null}var Zd=[];function Vs(){for(var m=0;m<Zd.length;m++)Zd[m]._workInProgressVersionPrimary=null;Zd.length=0}var ju=C.ReactCurrentDispatcher,Iu=C.ReactCurrentBatchConfig,Pl=0,cr=null,zr=null,zn=null,hs=!1,ho=!1,Nc=0,Ko=0;function Ki(){throw Error(n(321))}function Bh(m,x){if(x===null)return!1;for(var A=0;A<x.length&&A<m.length;A++)if(!pa(m[A],x[A]))return!1;return!0}function $h(m,x,A,j,G,X){if(Pl=X,cr=x,x.memoizedState=null,x.updateQueue=null,x.lanes=0,ju.current=m===null||m.memoizedState===null?HS:VS,m=A(j,G),ho){X=0;do{if(ho=!1,Nc=0,25<=X)throw Error(n(301));X+=1,zn=zr=null,x.updateQueue=null,ju.current=WS,m=A(j,G)}while(ho)}if(ju.current=Tg,x=zr!==null&&zr.next!==null,Pl=0,zn=zr=cr=null,hs=!1,x)throw Error(n(300));return m}function _x(){var m=Nc!==0;return Nc=0,m}function Ji(){var m={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zn===null?cr.memoizedState=zn=m:zn=zn.next=m,zn}function xa(){if(zr===null){var m=cr.alternate;m=m!==null?m.memoizedState:null}else m=zr.next;var x=zn===null?cr.memoizedState:zn.next;if(x!==null)zn=x,zr=m;else{if(m===null)throw Error(n(310));zr=m,m={memoizedState:zr.memoizedState,baseState:zr.baseState,baseQueue:zr.baseQueue,queue:zr.queue,next:null},zn===null?cr.memoizedState=zn=m:zn=zn.next=m}return zn}function Qd(m,x){return typeof x=="function"?x(m):x}function Hh(m){var x=xa(),A=x.queue;if(A===null)throw Error(n(311));A.lastRenderedReducer=m;var j=zr,G=j.baseQueue,X=A.pending;if(X!==null){if(G!==null){var ue=G.next;G.next=X.next,X.next=ue}j.baseQueue=G=X,A.pending=null}if(G!==null){X=G.next,j=j.baseState;var Te=ue=null,je=null,Ye=X;do{var lt=Ye.lane;if((Pl&lt)===lt)je!==null&&(je=je.next={lane:0,action:Ye.action,hasEagerState:Ye.hasEagerState,eagerState:Ye.eagerState,next:null}),j=Ye.hasEagerState?Ye.eagerState:m(j,Ye.action);else{var ht={lane:lt,action:Ye.action,hasEagerState:Ye.hasEagerState,eagerState:Ye.eagerState,next:null};je===null?(Te=je=ht,ue=j):je=je.next=ht,cr.lanes|=lt,Yh|=lt}Ye=Ye.next}while(Ye!==null&&Ye!==X);je===null?ue=j:je.next=Te,pa(j,x.memoizedState)||(pn=!0),x.memoizedState=j,x.baseState=ue,x.baseQueue=je,A.lastRenderedState=j}if(m=A.interleaved,m!==null){G=m;do X=G.lane,cr.lanes|=X,Yh|=X,G=G.next;while(G!==m)}else G===null&&(A.lanes=0);return[x.memoizedState,A.dispatch]}function kl(m){var x=xa(),A=x.queue;if(A===null)throw Error(n(311));A.lastRenderedReducer=m;var j=A.dispatch,G=A.pending,X=x.memoizedState;if(G!==null){A.pending=null;var ue=G=G.next;do X=m(X,ue.action),ue=ue.next;while(ue!==G);pa(X,x.memoizedState)||(pn=!0),x.memoizedState=X,x.baseQueue===null&&(x.baseState=X),A.lastRenderedState=X}return[X,j]}function Tx(){}function Cx(m,x){var A=cr,j=xa(),G=x(),X=!pa(j.memoizedState,G);if(X&&(j.memoizedState=G,pn=!0),j=j.queue,Px(DS.bind(null,A,j,m),[m]),j.getSnapshot!==x||X||zn!==null&&zn.memoizedState.tag&1){if(A.flags|=2048,ps(9,Vh.bind(null,A,j,G,x),void 0,null),po===null)throw Error(n(349));(Pl&30)!==0||xg(A,x,G)}return G}function xg(m,x,A){m.flags|=16384,m={getSnapshot:x,value:A},x=cr.updateQueue,x===null?(x={lastEffect:null,stores:null},cr.updateQueue=x,x.stores=[m]):(A=x.stores,A===null?x.stores=[m]:A.push(m))}function Vh(m,x,A,j){x.value=A,x.getSnapshot=j,FS(x)&&Ax(m)}function DS(m,x,A){return A(function(){FS(x)&&Ax(m)})}function FS(m){var x=m.getSnapshot;m=m.value;try{var A=x();return!pa(m,A)}catch{return!0}}function Ax(m){var x=ds(m,1);x!==null&&Ol(x,m,1,-1)}function Mx(m){var x=Ji();return typeof m=="function"&&(m=m()),x.memoizedState=x.baseState=m,m={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Qd,lastRenderedState:m},x.queue=m,m=m.dispatch=Ou.bind(null,cr,m),[x.memoizedState,m]}function ps(m,x,A,j){return m={tag:m,create:x,destroy:A,deps:j,next:null},x=cr.updateQueue,x===null?(x={lastEffect:null,stores:null},cr.updateQueue=x,x.lastEffect=m.next=m):(A=x.lastEffect,A===null?x.lastEffect=m.next=m:(j=A.next,A.next=m,m.next=j,x.lastEffect=m)),m}function zS(){return xa().memoizedState}function Ws(m,x,A,j){var G=Ji();cr.flags|=m,G.memoizedState=ps(1|x,A,void 0,j===void 0?null:j)}function Wh(m,x,A,j){var G=xa();j=j===void 0?null:j;var X=void 0;if(zr!==null){var ue=zr.memoizedState;if(X=ue.destroy,j!==null&&Bh(j,ue.deps)){G.memoizedState=ps(x,A,X,j);return}}cr.flags|=m,G.memoizedState=ps(1|x,A,X,j)}function Ro(m,x){return Ws(8390656,8,m,x)}function Px(m,x){return Wh(2048,8,m,x)}function kx(m,x){return Wh(4,2,m,x)}function US(m,x){return Wh(4,4,m,x)}function BS(m,x){if(typeof x=="function")return m=m(),x(m),function(){x(null)};if(x!=null)return m=m(),x.current=m,function(){x.current=null}}function Nx(m,x,A){return A=A!=null?A.concat([m]):null,Wh(4,4,BS.bind(null,x,m),A)}function wg(){}function $S(m,x){var A=xa();x=x===void 0?null:x;var j=A.memoizedState;return j!==null&&x!==null&&Bh(x,j[1])?j[0]:(A.memoizedState=[m,x],m)}function wa(m,x){var A=xa();x=x===void 0?null:x;var j=A.memoizedState;return j!==null&&x!==null&&Bh(x,j[1])?j[0]:(m=m(),A.memoizedState=[m,x],m)}function bg(m,x,A){return(Pl&21)===0?(m.baseState&&(m.baseState=!1,pn=!0),m.memoizedState=A):(pa(A,x)||(A=Wo(),cr.lanes|=A,Yh|=A,m.baseState=!0),x)}function Y2(m,x){var A=En;En=A!==0&&4>A?A:4,m(!0);var j=Iu.transition;Iu.transition={};try{m(!1),x()}finally{En=A,Iu.transition=j}}function Nl(){return xa().memoizedState}function Sg(m,x,A){var j=rf(m);if(A={lane:j,action:A,hasEagerState:!1,eagerState:null,next:null},Gh(m))Eg(x,A);else if(A=zh(m,x,A,j),A!==null){var G=Sa();Ol(A,m,j,G),_g(A,x,j)}}function Ou(m,x,A){var j=rf(m),G={lane:j,action:A,hasEagerState:!1,eagerState:null,next:null};if(Gh(m))Eg(x,G);else{var X=m.alternate;if(m.lanes===0&&(X===null||X.lanes===0)&&(X=x.lastRenderedReducer,X!==null))try{var ue=x.lastRenderedState,Te=X(ue,A);if(G.hasEagerState=!0,G.eagerState=Te,pa(Te,ue)){var je=x.interleaved;je===null?(G.next=G,Ex(x)):(G.next=je.next,je.next=G),x.interleaved=G;return}}catch{}finally{}A=zh(m,x,G,j),A!==null&&(G=Sa(),Ol(A,m,j,G),_g(A,x,j))}}function Gh(m){var x=m.alternate;return m===cr||x!==null&&x===cr}function Eg(m,x){ho=hs=!0;var A=m.pending;A===null?x.next=x:(x.next=A.next,A.next=x),m.pending=x}function _g(m,x,A){if((A&4194240)!==0){var j=x.lanes;j&=m.pendingLanes,A|=j,x.lanes=A,is(m,A)}}var Tg={readContext:ya,useCallback:Ki,useContext:Ki,useEffect:Ki,useImperativeHandle:Ki,useInsertionEffect:Ki,useLayoutEffect:Ki,useMemo:Ki,useReducer:Ki,useRef:Ki,useState:Ki,useDebugValue:Ki,useDeferredValue:Ki,useTransition:Ki,useMutableSource:Ki,useSyncExternalStore:Ki,useId:Ki,unstable_isNewReconciler:!1},HS={readContext:ya,useCallback:function(m,x){return Ji().memoizedState=[m,x===void 0?null:x],m},useContext:ya,useEffect:Ro,useImperativeHandle:function(m,x,A){return A=A!=null?A.concat([m]):null,Ws(4194308,4,BS.bind(null,x,m),A)},useLayoutEffect:function(m,x){return Ws(4194308,4,m,x)},useInsertionEffect:function(m,x){return Ws(4,2,m,x)},useMemo:function(m,x){var A=Ji();return x=x===void 0?null:x,m=m(),A.memoizedState=[m,x],m},useReducer:function(m,x,A){var j=Ji();return x=A!==void 0?A(x):x,j.memoizedState=j.baseState=x,m={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:m,lastRenderedState:x},j.queue=m,m=m.dispatch=Sg.bind(null,cr,m),[j.memoizedState,m]},useRef:function(m){var x=Ji();return m={current:m},x.memoizedState=m},useState:Mx,useDebugValue:wg,useDeferredValue:function(m){return Ji().memoizedState=m},useTransition:function(){var m=Mx(!1),x=m[0];return m=Y2.bind(null,m[1]),Ji().memoizedState=m,[x,m]},useMutableSource:function(){},useSyncExternalStore:function(m,x,A){var j=cr,G=Ji();if(fr){if(A===void 0)throw Error(n(407));A=A()}else{if(A=x(),po===null)throw Error(n(349));(Pl&30)!==0||xg(j,x,A)}G.memoizedState=A;var X={value:A,getSnapshot:x};return G.queue=X,Ro(DS.bind(null,j,X,m),[m]),j.flags|=2048,ps(9,Vh.bind(null,j,X,A,x),void 0,null),A},useId:function(){var m=Ji(),x=po.identifierPrefix;if(fr){var A=za,j=xt;A=(j&~(1<<32-Pr(j)-1)).toString(32)+A,x=":"+x+"R"+A,A=Nc++,0<A&&(x+="H"+A.toString(32)),x+=":"}else A=Ko++,x=":"+x+"r"+A.toString(32)+":";return m.memoizedState=x},unstable_isNewReconciler:!1},VS={readContext:ya,useCallback:$S,useContext:ya,useEffect:Px,useImperativeHandle:Nx,useInsertionEffect:kx,useLayoutEffect:US,useMemo:wa,useReducer:Hh,useRef:zS,useState:function(){return Hh(Qd)},useDebugValue:wg,useDeferredValue:function(m){var x=xa();return bg(x,zr.memoizedState,m)},useTransition:function(){var m=Hh(Qd)[0],x=xa().memoizedState;return[m,x]},useMutableSource:Tx,useSyncExternalStore:Cx,useId:Nl,unstable_isNewReconciler:!1},WS={readContext:ya,useCallback:$S,useContext:ya,useEffect:Px,useImperativeHandle:Nx,useInsertionEffect:kx,useLayoutEffect:US,useMemo:wa,useReducer:kl,useRef:zS,useState:function(){return kl(Qd)},useDebugValue:wg,useDeferredValue:function(m){var x=xa();return zr===null?x.memoizedState=m:bg(x,zr.memoizedState,m)},useTransition:function(){var m=kl(Qd)[0],x=xa().memoizedState;return[m,x]},useMutableSource:Tx,useSyncExternalStore:Cx,useId:Nl,unstable_isNewReconciler:!1};function Ba(m,x){if(m&&m.defaultProps){x=L({},x),m=m.defaultProps;for(var A in m)x[A]===void 0&&(x[A]=m[A]);return x}return x}function qh(m,x,A,j){x=m.memoizedState,A=A(j,x),A=A==null?x:L({},x,A),m.memoizedState=A,m.lanes===0&&(m.updateQueue.baseState=A)}var Cg={isMounted:function(m){return(m=m._reactInternals)?pt(m)===m:!1},enqueueSetState:function(m,x,A){m=m._reactInternals;var j=Sa(),G=rf(m),X=Qn(j,G);X.payload=x,A!=null&&(X.callback=A),x=xr(m,X,G),x!==null&&(Ol(x,m,G,j),fo(x,m,G))},enqueueReplaceState:function(m,x,A){m=m._reactInternals;var j=Sa(),G=rf(m),X=Qn(j,G);X.tag=1,X.payload=x,A!=null&&(X.callback=A),x=xr(m,X,G),x!==null&&(Ol(x,m,G,j),fo(x,m,G))},enqueueForceUpdate:function(m,x){m=m._reactInternals;var A=Sa(),j=rf(m),G=Qn(A,j);G.tag=2,x!=null&&(G.callback=x),x=xr(m,G,j),x!==null&&(Ol(x,m,j,A),fo(x,m,j))}};function GS(m,x,A,j,G,X,ue){return m=m.stateNode,typeof m.shouldComponentUpdate=="function"?m.shouldComponentUpdate(j,X,ue):x.prototype&&x.prototype.isPureReactComponent?!gu(A,j)||!gu(G,X):!0}function S(m,x,A){var j=!1,G=Sl,X=x.contextType;return typeof X=="object"&&X!==null?X=ya(X):(G=uo(x)?El:Yi.current,j=x.contextTypes,X=(j=j!=null)?Su(m,G):Sl),x=new x(A,X),m.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,x.updater=Cg,m.stateNode=x,x._reactInternals=m,j&&(m=m.stateNode,m.__reactInternalMemoizedUnmaskedChildContext=G,m.__reactInternalMemoizedMaskedChildContext=X),x}function E(m,x,A,j){m=x.state,typeof x.componentWillReceiveProps=="function"&&x.componentWillReceiveProps(A,j),typeof x.UNSAFE_componentWillReceiveProps=="function"&&x.UNSAFE_componentWillReceiveProps(A,j),x.state!==m&&Cg.enqueueReplaceState(x,x.state,null)}function R(m,x,A,j){var G=m.stateNode;G.props=A,G.state=m.memoizedState,G.refs={},hn(m);var X=x.contextType;typeof X=="object"&&X!==null?G.context=ya(X):(X=uo(x)?El:Yi.current,G.context=Su(m,X)),G.state=m.memoizedState,X=x.getDerivedStateFromProps,typeof X=="function"&&(qh(m,x,X,A),G.state=m.memoizedState),typeof x.getDerivedStateFromProps=="function"||typeof G.getSnapshotBeforeUpdate=="function"||typeof G.UNSAFE_componentWillMount!="function"&&typeof G.componentWillMount!="function"||(x=G.state,typeof G.componentWillMount=="function"&&G.componentWillMount(),typeof G.UNSAFE_componentWillMount=="function"&&G.UNSAFE_componentWillMount(),x!==G.state&&Cg.enqueueReplaceState(G,G.state,null),Fr(m,A,G,j),G.state=m.memoizedState),typeof G.componentDidMount=="function"&&(m.flags|=4194308)}function D(m,x){try{var A="",j=x;do A+=se(j),j=j.return;while(j);var G=A}catch(X){G=`
Error generating stack: `+X.message+`
`+X.stack}return{value:m,source:x,stack:G,digest:null}}function q(m,x,A){return{value:m,source:null,stack:A??null,digest:x??null}}function re(m,x){try{console.error(x.value)}catch(A){setTimeout(function(){throw A})}}var _e=typeof WeakMap=="function"?WeakMap:Map;function Le(m,x,A){A=Qn(-1,A),A.tag=3,A.payload={element:null};var j=x.value;return A.callback=function(){QS||(QS=!0,iM=j),re(m,x)},A}function Qe(m,x,A){A=Qn(-1,A),A.tag=3;var j=m.type.getDerivedStateFromError;if(typeof j=="function"){var G=x.value;A.payload=function(){return j(G)},A.callback=function(){re(m,x)}}var X=m.stateNode;return X!==null&&typeof X.componentDidCatch=="function"&&(A.callback=function(){re(m,x),typeof j!="function"&&(tf===null?tf=new Set([this]):tf.add(this));var ue=x.stack;this.componentDidCatch(x.value,{componentStack:ue!==null?ue:""})}),A}function mt(m,x,A){var j=m.pingCache;if(j===null){j=m.pingCache=new _e;var G=new Set;j.set(x,G)}else G=j.get(x),G===void 0&&(G=new Set,j.set(x,G));G.has(A)||(G.add(A),m=Uhe.bind(null,m,x,A),x.then(m,m))}function Nt(m){do{var x;if((x=m.tag===13)&&(x=m.memoizedState,x=x!==null?x.dehydrated!==null:!0),x)return m;m=m.return}while(m!==null);return null}function an(m,x,A,j,G){return(m.mode&1)===0?(m===x?m.flags|=65536:(m.flags|=128,A.flags|=131072,A.flags&=-52805,A.tag===1&&(A.alternate===null?A.tag=17:(x=Qn(-1,1),x.tag=2,xr(A,x,1))),A.lanes|=1),m):(m.flags|=65536,m.lanes=G,m)}var Vt=C.ReactCurrentOwner,pn=!1;function Pt(m,x,A,j){x.child=m===null?Lh(x,null,A,j):Cu(x,m.child,A,j)}function Zi(m,x,A,j,G){A=A.render;var X=x.ref;return Pc(x,G),j=$h(m,x,A,j,X,G),A=_x(),m!==null&&!pn?(x.updateQueue=m.updateQueue,x.flags&=-2053,m.lanes&=~G,Lu(m,x,G)):(fr&&A&&yx(x),x.flags|=1,Pt(m,x,j,G),x.child)}function ba(m,x,A,j,G){if(m===null){var X=A.type;return typeof X=="function"&&!dM(X)&&X.defaultProps===void 0&&A.compare===null&&A.defaultProps===void 0?(x.tag=15,x.type=X,Ge(m,x,X,j,G)):(m=oE(A.type,null,j,x,x.mode,G),m.ref=x.ref,m.return=x,x.child=m)}if(X=m.child,(m.lanes&G)===0){var ue=X.memoizedProps;if(A=A.compare,A=A!==null?A:gu,A(ue,j)&&m.ref===x.ref)return Lu(m,x,G)}return x.flags|=1,m=af(X,j),m.ref=x.ref,m.return=x,x.child=m}function Ge(m,x,A,j,G){if(m!==null){var X=m.memoizedProps;if(gu(X,j)&&m.ref===x.ref)if(pn=!1,x.pendingProps=j=X,(m.lanes&G)!==0)(m.flags&131072)!==0&&(pn=!0);else return x.lanes=m.lanes,Lu(m,x,G)}return Tt(m,x,A,j,G)}function Fe(m,x,A){var j=x.pendingProps,G=j.children,X=m!==null?m.memoizedState:null;if(j.mode==="hidden")if((x.mode&1)===0)x.memoizedState={baseLanes:0,cachePool:null,transitions:null},nr(Mg,ms),ms|=A;else{if((A&1073741824)===0)return m=X!==null?X.baseLanes|A:A,x.lanes=x.childLanes=1073741824,x.memoizedState={baseLanes:m,cachePool:null,transitions:null},x.updateQueue=null,nr(Mg,ms),ms|=m,null;x.memoizedState={baseLanes:0,cachePool:null,transitions:null},j=X!==null?X.baseLanes:A,nr(Mg,ms),ms|=j}else X!==null?(j=X.baseLanes|A,x.memoizedState=null):j=A,nr(Mg,ms),ms|=j;return Pt(m,x,G,A),x.child}function Je(m,x){var A=x.ref;(m===null&&A!==null||m!==null&&m.ref!==A)&&(x.flags|=512,x.flags|=2097152)}function Tt(m,x,A,j,G){var X=uo(A)?El:Yi.current;return X=Su(x,X),Pc(x,G),A=$h(m,x,A,j,X,G),j=_x(),m!==null&&!pn?(x.updateQueue=m.updateQueue,x.flags&=-2053,m.lanes&=~G,Lu(m,x,G)):(fr&&j&&yx(x),x.flags|=1,Pt(m,x,A,G),x.child)}function Ft(m,x,A,j,G){if(uo(A)){var X=!0;Eu(x)}else X=!1;if(Pc(x,G),x.stateNode===null)YS(m,x),S(x,A,j),R(x,A,j,G),j=!0;else if(m===null){var ue=x.stateNode,Te=x.memoizedProps;ue.props=Te;var je=ue.context,Ye=A.contextType;typeof Ye=="object"&&Ye!==null?Ye=ya(Ye):(Ye=uo(A)?El:Yi.current,Ye=Su(x,Ye));var lt=A.getDerivedStateFromProps,ht=typeof lt=="function"||typeof ue.getSnapshotBeforeUpdate=="function";ht||typeof ue.UNSAFE_componentWillReceiveProps!="function"&&typeof ue.componentWillReceiveProps!="function"||(Te!==j||je!==Ye)&&E(x,ue,j,Ye),Zn=!1;var st=x.memoizedState;ue.state=st,Fr(x,j,ue,G),je=x.memoizedState,Te!==j||st!==je||Po.current||Zn?(typeof lt=="function"&&(qh(x,A,lt,j),je=x.memoizedState),(Te=Zn||GS(x,A,Te,j,st,je,Ye))?(ht||typeof ue.UNSAFE_componentWillMount!="function"&&typeof ue.componentWillMount!="function"||(typeof ue.componentWillMount=="function"&&ue.componentWillMount(),typeof ue.UNSAFE_componentWillMount=="function"&&ue.UNSAFE_componentWillMount()),typeof ue.componentDidMount=="function"&&(x.flags|=4194308)):(typeof ue.componentDidMount=="function"&&(x.flags|=4194308),x.memoizedProps=j,x.memoizedState=je),ue.props=j,ue.state=je,ue.context=Ye,j=Te):(typeof ue.componentDidMount=="function"&&(x.flags|=4194308),j=!1)}else{ue=x.stateNode,Gr(m,x),Te=x.memoizedProps,Ye=x.type===x.elementType?Te:Ba(x.type,Te),ue.props=Ye,ht=x.pendingProps,st=ue.context,je=A.contextType,typeof je=="object"&&je!==null?je=ya(je):(je=uo(A)?El:Yi.current,je=Su(x,je));var kt=A.getDerivedStateFromProps;(lt=typeof kt=="function"||typeof ue.getSnapshotBeforeUpdate=="function")||typeof ue.UNSAFE_componentWillReceiveProps!="function"&&typeof ue.componentWillReceiveProps!="function"||(Te!==ht||st!==je)&&E(x,ue,j,je),Zn=!1,st=x.memoizedState,ue.state=st,Fr(x,j,ue,G);var Ot=x.memoizedState;Te!==ht||st!==Ot||Po.current||Zn?(typeof kt=="function"&&(qh(x,A,kt,j),Ot=x.memoizedState),(Ye=Zn||GS(x,A,Ye,j,st,Ot,je)||!1)?(lt||typeof ue.UNSAFE_componentWillUpdate!="function"&&typeof ue.componentWillUpdate!="function"||(typeof ue.componentWillUpdate=="function"&&ue.componentWillUpdate(j,Ot,je),typeof ue.UNSAFE_componentWillUpdate=="function"&&ue.UNSAFE_componentWillUpdate(j,Ot,je)),typeof ue.componentDidUpdate=="function"&&(x.flags|=4),typeof ue.getSnapshotBeforeUpdate=="function"&&(x.flags|=1024)):(typeof ue.componentDidUpdate!="function"||Te===m.memoizedProps&&st===m.memoizedState||(x.flags|=4),typeof ue.getSnapshotBeforeUpdate!="function"||Te===m.memoizedProps&&st===m.memoizedState||(x.flags|=1024),x.memoizedProps=j,x.memoizedState=Ot),ue.props=j,ue.state=Ot,ue.context=je,j=Ye):(typeof ue.componentDidUpdate!="function"||Te===m.memoizedProps&&st===m.memoizedState||(x.flags|=4),typeof ue.getSnapshotBeforeUpdate!="function"||Te===m.memoizedProps&&st===m.memoizedState||(x.flags|=1024),j=!1)}return dn(m,x,A,j,X,G)}function dn(m,x,A,j,G,X){Je(m,x);var ue=(x.flags&128)!==0;if(!j&&!ue)return G&&mx(x,A,!1),Lu(m,x,X);j=x.stateNode,Vt.current=x;var Te=ue&&typeof A.getDerivedStateFromError!="function"?null:j.render();return x.flags|=1,m!==null&&ue?(x.child=Cu(x,m.child,null,X),x.child=Cu(x,null,Te,X)):Pt(m,x,Te,X),x.memoizedState=j.state,G&&mx(x,A,!0),x.child}function sn(m){var x=m.stateNode;x.pendingContext?px(m,x.pendingContext,x.pendingContext!==x.context):x.context&&px(m,x.context,!1),Uh(m,x.containerInfo)}function On(m,x,A,j,G){return Mc(),Yd(G),x.flags|=256,Pt(m,x,A,j),x.child}var ni={dehydrated:null,treeContext:null,retryLane:0};function Rn(m){return{baseLanes:m,cachePool:null,transitions:null}}function Rl(m,x,A){var j=x.pendingProps,G=hr.current,X=!1,ue=(x.flags&128)!==0,Te;if((Te=ue)||(Te=m!==null&&m.memoizedState===null?!1:(G&2)!==0),Te?(X=!0,x.flags&=-129):(m===null||m.memoizedState!==null)&&(G|=1),nr(hr,G&1),m===null)return yg(x),m=x.memoizedState,m!==null&&(m=m.dehydrated,m!==null)?((x.mode&1)===0?x.lanes=1:m.data==="$!"?x.lanes=8:x.lanes=1073741824,null):(ue=j.children,m=j.fallback,X?(j=x.mode,X=x.child,ue={mode:"hidden",children:ue},(j&1)===0&&X!==null?(X.childLanes=0,X.pendingProps=ue):X=aE(ue,j,0,null),m=Zh(m,j,A,null),X.return=x,m.return=x,X.sibling=m,x.child=X,x.child.memoizedState=Rn(A),x.memoizedState=ni,m):Rx(x,ue));if(G=m.memoizedState,G!==null&&(Te=G.dehydrated,Te!==null))return Mhe(m,x,ue,j,Te,G,A);if(X){X=j.fallback,ue=x.mode,G=m.child,Te=G.sibling;var je={mode:"hidden",children:j.children};return(ue&1)===0&&x.child!==G?(j=x.child,j.childLanes=0,j.pendingProps=je,x.deletions=null):(j=af(G,je),j.subtreeFlags=G.subtreeFlags&14680064),Te!==null?X=af(Te,X):(X=Zh(X,ue,A,null),X.flags|=2),X.return=x,j.return=x,j.sibling=X,x.child=j,j=X,X=x.child,ue=m.child.memoizedState,ue=ue===null?Rn(A):{baseLanes:ue.baseLanes|A,cachePool:null,transitions:ue.transitions},X.memoizedState=ue,X.childLanes=m.childLanes&~A,x.memoizedState=ni,j}return X=m.child,m=X.sibling,j=af(X,{mode:"visible",children:j.children}),(x.mode&1)===0&&(j.lanes=A),j.return=x,j.sibling=null,m!==null&&(A=x.deletions,A===null?(x.deletions=[m],x.flags|=16):A.push(m)),x.child=j,x.memoizedState=null,j}function Rx(m,x){return x=aE({mode:"visible",children:x},m.mode,0,null),x.return=m,m.child=x}function qS(m,x,A,j){return j!==null&&Yd(j),Cu(x,m.child,null,A),m=Rx(x,x.pendingProps.children),m.flags|=2,x.memoizedState=null,m}function Mhe(m,x,A,j,G,X,ue){if(A)return x.flags&256?(x.flags&=-257,j=q(Error(n(422))),qS(m,x,ue,j)):x.memoizedState!==null?(x.child=m.child,x.flags|=128,null):(X=j.fallback,G=x.mode,j=aE({mode:"visible",children:j.children},G,0,null),X=Zh(X,G,ue,null),X.flags|=2,j.return=x,X.return=x,j.sibling=X,x.child=j,(x.mode&1)!==0&&Cu(x,m.child,null,ue),x.child.memoizedState=Rn(ue),x.memoizedState=ni,X);if((x.mode&1)===0)return qS(m,x,ue,null);if(G.data==="$!"){if(j=G.nextSibling&&G.nextSibling.dataset,j)var Te=j.dgst;return j=Te,X=Error(n(419)),j=q(X,j,void 0),qS(m,x,ue,j)}if(Te=(ue&m.childLanes)!==0,pn||Te){if(j=po,j!==null){switch(ue&-ue){case 4:G=2;break;case 16:G=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:G=32;break;case 536870912:G=268435456;break;default:G=0}G=(G&(j.suspendedLanes|ue))!==0?0:G,G!==0&&G!==X.retryLane&&(X.retryLane=G,ds(m,G),Ol(j,m,G,-1))}return uM(),j=q(Error(n(421))),qS(m,x,ue,j)}return G.data==="$?"?(x.flags|=128,x.child=m.child,x=Bhe.bind(null,m),G._reactRetry=x,null):(m=X.treeContext,No=wl(G.nextSibling),Xi=x,fr=!0,Ua=null,m!==null&&(ko[ji++]=xt,ko[ji++]=za,ko[ji++]=Tu,xt=m.id,za=m.overflow,Tu=x),x=Rx(x,j.children),x.flags|=4096,x)}function mU(m,x,A){m.lanes|=x;var j=m.alternate;j!==null&&(j.lanes|=x),Fh(m.return,x,A)}function X2(m,x,A,j,G){var X=m.memoizedState;X===null?m.memoizedState={isBackwards:x,rendering:null,renderingStartTime:0,last:j,tail:A,tailMode:G}:(X.isBackwards=x,X.rendering=null,X.renderingStartTime=0,X.last=j,X.tail=A,X.tailMode=G)}function gU(m,x,A){var j=x.pendingProps,G=j.revealOrder,X=j.tail;if(Pt(m,x,j.children,A),j=hr.current,(j&2)!==0)j=j&1|2,x.flags|=128;else{if(m!==null&&(m.flags&128)!==0)e:for(m=x.child;m!==null;){if(m.tag===13)m.memoizedState!==null&&mU(m,A,x);else if(m.tag===19)mU(m,A,x);else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===x)break e;for(;m.sibling===null;){if(m.return===null||m.return===x)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}j&=1}if(nr(hr,j),(x.mode&1)===0)x.memoizedState=null;else switch(G){case"forwards":for(A=x.child,G=null;A!==null;)m=A.alternate,m!==null&&fs(m)===null&&(G=A),A=A.sibling;A=G,A===null?(G=x.child,x.child=null):(G=A.sibling,A.sibling=null),X2(x,!1,G,A,X);break;case"backwards":for(A=null,G=x.child,x.child=null;G!==null;){if(m=G.alternate,m!==null&&fs(m)===null){x.child=G;break}m=G.sibling,G.sibling=A,A=G,G=m}X2(x,!0,A,null,X);break;case"together":X2(x,!1,null,null,void 0);break;default:x.memoizedState=null}return x.child}function YS(m,x){(x.mode&1)===0&&m!==null&&(m.alternate=null,x.alternate=null,x.flags|=2)}function Lu(m,x,A){if(m!==null&&(x.dependencies=m.dependencies),Yh|=x.lanes,(A&x.childLanes)===0)return null;if(m!==null&&x.child!==m.child)throw Error(n(153));if(x.child!==null){for(m=x.child,A=af(m,m.pendingProps),x.child=A,A.return=x;m.sibling!==null;)m=m.sibling,A=A.sibling=af(m,m.pendingProps),A.return=x;A.sibling=null}return x.child}function Phe(m,x,A){switch(x.tag){case 3:sn(x),Mc();break;case 5:Ru(x);break;case 1:uo(x.type)&&Eu(x);break;case 4:Uh(x,x.stateNode.containerInfo);break;case 10:var j=x.type._context,G=x.memoizedProps.value;nr(Au,j._currentValue),j._currentValue=G;break;case 13:if(j=x.memoizedState,j!==null)return j.dehydrated!==null?(nr(hr,hr.current&1),x.flags|=128,null):(A&x.child.childLanes)!==0?Rl(m,x,A):(nr(hr,hr.current&1),m=Lu(m,x,A),m!==null?m.sibling:null);nr(hr,hr.current&1);break;case 19:if(j=(A&x.childLanes)!==0,(m.flags&128)!==0){if(j)return gU(m,x,A);x.flags|=128}if(G=x.memoizedState,G!==null&&(G.rendering=null,G.tail=null,G.lastEffect=null),nr(hr,hr.current),j)break;return null;case 22:case 23:return x.lanes=0,Fe(m,x,A)}return Lu(m,x,A)}var yU,K2,vU,xU;yU=function(m,x){for(var A=x.child;A!==null;){if(A.tag===5||A.tag===6)m.appendChild(A.stateNode);else if(A.tag!==4&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===x)break;for(;A.sibling===null;){if(A.return===null||A.return===x)return;A=A.return}A.sibling.return=A.return,A=A.sibling}},K2=function(){},vU=function(m,x,A,j){var G=m.memoizedProps;if(G!==j){m=x.stateNode,ti(va.current);var X=null;switch(A){case"input":G=be(m,G),j=be(m,j),X=[];break;case"select":G=L({},G,{value:void 0}),j=L({},j,{value:void 0}),X=[];break;case"textarea":G=Ie(m,G),j=Ie(m,j),X=[];break;default:typeof G.onClick!="function"&&typeof j.onClick=="function"&&(m.onclick=Ph)}Ee(A,j);var ue;A=null;for(Ye in G)if(!j.hasOwnProperty(Ye)&&G.hasOwnProperty(Ye)&&G[Ye]!=null)if(Ye==="style"){var Te=G[Ye];for(ue in Te)Te.hasOwnProperty(ue)&&(A||(A={}),A[ue]="")}else Ye!=="dangerouslySetInnerHTML"&&Ye!=="children"&&Ye!=="suppressContentEditableWarning"&&Ye!=="suppressHydrationWarning"&&Ye!=="autoFocus"&&(i.hasOwnProperty(Ye)?X||(X=[]):(X=X||[]).push(Ye,null));for(Ye in j){var je=j[Ye];if(Te=G!=null?G[Ye]:void 0,j.hasOwnProperty(Ye)&&je!==Te&&(je!=null||Te!=null))if(Ye==="style")if(Te){for(ue in Te)!Te.hasOwnProperty(ue)||je&&je.hasOwnProperty(ue)||(A||(A={}),A[ue]="");for(ue in je)je.hasOwnProperty(ue)&&Te[ue]!==je[ue]&&(A||(A={}),A[ue]=je[ue])}else A||(X||(X=[]),X.push(Ye,A)),A=je;else Ye==="dangerouslySetInnerHTML"?(je=je?je.__html:void 0,Te=Te?Te.__html:void 0,je!=null&&Te!==je&&(X=X||[]).push(Ye,je)):Ye==="children"?typeof je!="string"&&typeof je!="number"||(X=X||[]).push(Ye,""+je):Ye!=="suppressContentEditableWarning"&&Ye!=="suppressHydrationWarning"&&(i.hasOwnProperty(Ye)?(je!=null&&Ye==="onScroll"&&sr("scroll",m),X||Te===je||(X=[])):(X=X||[]).push(Ye,je))}A&&(X=X||[]).push("style",A);var Ye=X;(x.updateQueue=Ye)&&(x.flags|=4)}},xU=function(m,x,A,j){A!==j&&(x.flags|=4)};function jx(m,x){if(!fr)switch(m.tailMode){case"hidden":x=m.tail;for(var A=null;x!==null;)x.alternate!==null&&(A=x),x=x.sibling;A===null?m.tail=null:A.sibling=null;break;case"collapsed":A=m.tail;for(var j=null;A!==null;)A.alternate!==null&&(j=A),A=A.sibling;j===null?x||m.tail===null?m.tail=null:m.tail.sibling=null:j.sibling=null}}function Jo(m){var x=m.alternate!==null&&m.alternate.child===m.child,A=0,j=0;if(x)for(var G=m.child;G!==null;)A|=G.lanes|G.childLanes,j|=G.subtreeFlags&14680064,j|=G.flags&14680064,G.return=m,G=G.sibling;else for(G=m.child;G!==null;)A|=G.lanes|G.childLanes,j|=G.subtreeFlags,j|=G.flags,G.return=m,G=G.sibling;return m.subtreeFlags|=j,m.childLanes=A,x}function khe(m,x,A){var j=x.pendingProps;switch(Tl(x),x.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Jo(x),null;case 1:return uo(x.type)&&kh(),Jo(x),null;case 3:return j=x.stateNode,kc(),lr(Po),lr(Yi),Vs(),j.pendingContext&&(j.context=j.pendingContext,j.pendingContext=null),(m===null||m.child===null)&&(qd(x)?x.flags|=4:m===null||m.memoizedState.isDehydrated&&(x.flags&256)===0||(x.flags|=1024,Ua!==null&&(sM(Ua),Ua=null))),K2(m,x),Jo(x),null;case 5:Jd(x);var G=ti(Ml.current);if(A=x.type,m!==null&&x.stateNode!=null)vU(m,x,A,j,G),m.ref!==x.ref&&(x.flags|=512,x.flags|=2097152);else{if(!j){if(x.stateNode===null)throw Error(n(166));return Jo(x),null}if(m=ti(va.current),qd(x)){j=x.stateNode,A=x.type;var X=x.memoizedProps;switch(j[mi]=x,j[Gd]=X,m=(x.mode&1)!==0,A){case"dialog":sr("cancel",j),sr("close",j);break;case"iframe":case"object":case"embed":sr("load",j);break;case"video":case"audio":for(G=0;G<Cc.length;G++)sr(Cc[G],j);break;case"source":sr("error",j);break;case"img":case"image":case"link":sr("error",j),sr("load",j);break;case"details":sr("toggle",j);break;case"input":Ae(j,X),sr("invalid",j);break;case"select":j._wrapperState={wasMultiple:!!X.multiple},sr("invalid",j);break;case"textarea":De(j,X),sr("invalid",j)}Ee(A,X),G=null;for(var ue in X)if(X.hasOwnProperty(ue)){var Te=X[ue];ue==="children"?typeof Te=="string"?j.textContent!==Te&&(X.suppressHydrationWarning!==!0&&Mh(j.textContent,Te,m),G=["children",Te]):typeof Te=="number"&&j.textContent!==""+Te&&(X.suppressHydrationWarning!==!0&&Mh(j.textContent,Te,m),G=["children",""+Te]):i.hasOwnProperty(ue)&&Te!=null&&ue==="onScroll"&&sr("scroll",j)}switch(A){case"input":he(j),ae(j,X,!0);break;case"textarea":he(j),$e(j);break;case"select":case"option":break;default:typeof X.onClick=="function"&&(j.onclick=Ph)}j=G,x.updateQueue=j,j!==null&&(x.flags|=4)}else{ue=G.nodeType===9?G:G.ownerDocument,m==="http://www.w3.org/1999/xhtml"&&(m=we(A)),m==="http://www.w3.org/1999/xhtml"?A==="script"?(m=ue.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild)):typeof j.is=="string"?m=ue.createElement(A,{is:j.is}):(m=ue.createElement(A),A==="select"&&(ue=m,j.multiple?ue.multiple=!0:j.size&&(ue.size=j.size))):m=ue.createElementNS(m,A),m[mi]=x,m[Gd]=j,yU(m,x,!1,!1),x.stateNode=m;e:{switch(ue=Ve(A,j),A){case"dialog":sr("cancel",m),sr("close",m),G=j;break;case"iframe":case"object":case"embed":sr("load",m),G=j;break;case"video":case"audio":for(G=0;G<Cc.length;G++)sr(Cc[G],m);G=j;break;case"source":sr("error",m),G=j;break;case"img":case"image":case"link":sr("error",m),sr("load",m),G=j;break;case"details":sr("toggle",m),G=j;break;case"input":Ae(m,j),G=be(m,j),sr("invalid",m);break;case"option":G=j;break;case"select":m._wrapperState={wasMultiple:!!j.multiple},G=L({},j,{value:void 0}),sr("invalid",m);break;case"textarea":De(m,j),G=Ie(m,j),sr("invalid",m);break;default:G=j}Ee(A,G),Te=G;for(X in Te)if(Te.hasOwnProperty(X)){var je=Te[X];X==="style"?dt(m,je):X==="dangerouslySetInnerHTML"?(je=je?je.__html:void 0,je!=null&&Ne(m,je)):X==="children"?typeof je=="string"?(A!=="textarea"||je!=="")&&qe(m,je):typeof je=="number"&&qe(m,""+je):X!=="suppressContentEditableWarning"&&X!=="suppressHydrationWarning"&&X!=="autoFocus"&&(i.hasOwnProperty(X)?je!=null&&X==="onScroll"&&sr("scroll",m):je!=null&&T(m,X,je,ue))}switch(A){case"input":he(m),ae(m,j,!1);break;case"textarea":he(m),$e(m);break;case"option":j.value!=null&&m.setAttribute("value",""+pe(j.value));break;case"select":m.multiple=!!j.multiple,X=j.value,X!=null?ye(m,!!j.multiple,X,!1):j.defaultValue!=null&&ye(m,!!j.multiple,j.defaultValue,!0);break;default:typeof G.onClick=="function"&&(m.onclick=Ph)}switch(A){case"button":case"input":case"select":case"textarea":j=!!j.autoFocus;break e;case"img":j=!0;break e;default:j=!1}}j&&(x.flags|=4)}x.ref!==null&&(x.flags|=512,x.flags|=2097152)}return Jo(x),null;case 6:if(m&&x.stateNode!=null)xU(m,x,m.memoizedProps,j);else{if(typeof j!="string"&&x.stateNode===null)throw Error(n(166));if(A=ti(Ml.current),ti(va.current),qd(x)){if(j=x.stateNode,A=x.memoizedProps,j[mi]=x,(X=j.nodeValue!==A)&&(m=Xi,m!==null))switch(m.tag){case 3:Mh(j.nodeValue,A,(m.mode&1)!==0);break;case 5:m.memoizedProps.suppressHydrationWarning!==!0&&Mh(j.nodeValue,A,(m.mode&1)!==0)}X&&(x.flags|=4)}else j=(A.nodeType===9?A:A.ownerDocument).createTextNode(j),j[mi]=x,x.stateNode=j}return Jo(x),null;case 13:if(lr(hr),j=x.memoizedState,m===null||m.memoizedState!==null&&m.memoizedState.dehydrated!==null){if(fr&&No!==null&&(x.mode&1)!==0&&(x.flags&128)===0)wx(),Mc(),x.flags|=98560,X=!1;else if(X=qd(x),j!==null&&j.dehydrated!==null){if(m===null){if(!X)throw Error(n(318));if(X=x.memoizedState,X=X!==null?X.dehydrated:null,!X)throw Error(n(317));X[mi]=x}else Mc(),(x.flags&128)===0&&(x.memoizedState=null),x.flags|=4;Jo(x),X=!1}else Ua!==null&&(sM(Ua),Ua=null),X=!0;if(!X)return x.flags&65536?x:null}return(x.flags&128)!==0?(x.lanes=A,x):(j=j!==null,j!==(m!==null&&m.memoizedState!==null)&&j&&(x.child.flags|=8192,(x.mode&1)!==0&&(m===null||(hr.current&1)!==0?Qi===0&&(Qi=3):uM())),x.updateQueue!==null&&(x.flags|=4),Jo(x),null);case 4:return kc(),K2(m,x),m===null&&Hd(x.stateNode.containerInfo),Jo(x),null;case 10:return Dh(x.type._context),Jo(x),null;case 17:return uo(x.type)&&kh(),Jo(x),null;case 19:if(lr(hr),X=x.memoizedState,X===null)return Jo(x),null;if(j=(x.flags&128)!==0,ue=X.rendering,ue===null)if(j)jx(X,!1);else{if(Qi!==0||m!==null&&(m.flags&128)!==0)for(m=x.child;m!==null;){if(ue=fs(m),ue!==null){for(x.flags|=128,jx(X,!1),j=ue.updateQueue,j!==null&&(x.updateQueue=j,x.flags|=4),x.subtreeFlags=0,j=A,A=x.child;A!==null;)X=A,m=j,X.flags&=14680066,ue=X.alternate,ue===null?(X.childLanes=0,X.lanes=m,X.child=null,X.subtreeFlags=0,X.memoizedProps=null,X.memoizedState=null,X.updateQueue=null,X.dependencies=null,X.stateNode=null):(X.childLanes=ue.childLanes,X.lanes=ue.lanes,X.child=ue.child,X.subtreeFlags=0,X.deletions=null,X.memoizedProps=ue.memoizedProps,X.memoizedState=ue.memoizedState,X.updateQueue=ue.updateQueue,X.type=ue.type,m=ue.dependencies,X.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext}),A=A.sibling;return nr(hr,hr.current&1|2),x.child}m=m.sibling}X.tail!==null&&yt()>Pg&&(x.flags|=128,j=!0,jx(X,!1),x.lanes=4194304)}else{if(!j)if(m=fs(ue),m!==null){if(x.flags|=128,j=!0,A=m.updateQueue,A!==null&&(x.updateQueue=A,x.flags|=4),jx(X,!0),X.tail===null&&X.tailMode==="hidden"&&!ue.alternate&&!fr)return Jo(x),null}else 2*yt()-X.renderingStartTime>Pg&&A!==1073741824&&(x.flags|=128,j=!0,jx(X,!1),x.lanes=4194304);X.isBackwards?(ue.sibling=x.child,x.child=ue):(A=X.last,A!==null?A.sibling=ue:x.child=ue,X.last=ue)}return X.tail!==null?(x=X.tail,X.rendering=x,X.tail=x.sibling,X.renderingStartTime=yt(),x.sibling=null,A=hr.current,nr(hr,j?A&1|2:A&1),x):(Jo(x),null);case 22:case 23:return cM(),j=x.memoizedState!==null,m!==null&&m.memoizedState!==null!==j&&(x.flags|=8192),j&&(x.mode&1)!==0?(ms&1073741824)!==0&&(Jo(x),x.subtreeFlags&6&&(x.flags|=8192)):Jo(x),null;case 24:return null;case 25:return null}throw Error(n(156,x.tag))}function Nhe(m,x){switch(Tl(x),x.tag){case 1:return uo(x.type)&&kh(),m=x.flags,m&65536?(x.flags=m&-65537|128,x):null;case 3:return kc(),lr(Po),lr(Yi),Vs(),m=x.flags,(m&65536)!==0&&(m&128)===0?(x.flags=m&-65537|128,x):null;case 5:return Jd(x),null;case 13:if(lr(hr),m=x.memoizedState,m!==null&&m.dehydrated!==null){if(x.alternate===null)throw Error(n(340));Mc()}return m=x.flags,m&65536?(x.flags=m&-65537|128,x):null;case 19:return lr(hr),null;case 4:return kc(),null;case 10:return Dh(x.type._context),null;case 22:case 23:return cM(),null;case 24:return null;default:return null}}var XS=!1,Zo=!1,Rhe=typeof WeakSet=="function"?WeakSet:Set,Rt=null;function Ag(m,x){var A=m.ref;if(A!==null)if(typeof A=="function")try{A(null)}catch(j){ri(m,x,j)}else A.current=null}function J2(m,x,A){try{A()}catch(j){ri(m,x,j)}}var wU=!1;function jhe(m,x){if(Wd=Ci,m=Rr(),Pi(m)){if("selectionStart"in m)var A={start:m.selectionStart,end:m.selectionEnd};else e:{A=(A=m.ownerDocument)&&A.defaultView||window;var j=A.getSelection&&A.getSelection();if(j&&j.rangeCount!==0){A=j.anchorNode;var G=j.anchorOffset,X=j.focusNode;j=j.focusOffset;try{A.nodeType,X.nodeType}catch{A=null;break e}var ue=0,Te=-1,je=-1,Ye=0,lt=0,ht=m,st=null;t:for(;;){for(var kt;ht!==A||G!==0&&ht.nodeType!==3||(Te=ue+G),ht!==X||j!==0&&ht.nodeType!==3||(je=ue+j),ht.nodeType===3&&(ue+=ht.nodeValue.length),(kt=ht.firstChild)!==null;)st=ht,ht=kt;for(;;){if(ht===m)break t;if(st===A&&++Ye===G&&(Te=ue),st===X&&++lt===j&&(je=ue),(kt=ht.nextSibling)!==null)break;ht=st,st=ht.parentNode}ht=kt}A=Te===-1||je===-1?null:{start:Te,end:je}}else A=null}A=A||{start:0,end:0}}else A=null;for(lx={focusedElem:m,selectionRange:A},Ci=!1,Rt=x;Rt!==null;)if(x=Rt,m=x.child,(x.subtreeFlags&1028)!==0&&m!==null)m.return=x,Rt=m;else for(;Rt!==null;){x=Rt;try{var Ot=x.alternate;if((x.flags&1024)!==0)switch(x.tag){case 0:case 11:case 15:break;case 1:if(Ot!==null){var Lt=Ot.memoizedProps,gi=Ot.memoizedState,Be=x.stateNode,Oe=Be.getSnapshotBeforeUpdate(x.elementType===x.type?Lt:Ba(x.type,Lt),gi);Be.__reactInternalSnapshotBeforeUpdate=Oe}break;case 3:var We=x.stateNode.containerInfo;We.nodeType===1?We.textContent="":We.nodeType===9&&We.documentElement&&We.removeChild(We.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(vt){ri(x,x.return,vt)}if(m=x.sibling,m!==null){m.return=x.return,Rt=m;break}Rt=x.return}return Ot=wU,wU=!1,Ot}function Ix(m,x,A){var j=x.updateQueue;if(j=j!==null?j.lastEffect:null,j!==null){var G=j=j.next;do{if((G.tag&m)===m){var X=G.destroy;G.destroy=void 0,X!==void 0&&J2(x,A,X)}G=G.next}while(G!==j)}}function KS(m,x){if(x=x.updateQueue,x=x!==null?x.lastEffect:null,x!==null){var A=x=x.next;do{if((A.tag&m)===m){var j=A.create;A.destroy=j()}A=A.next}while(A!==x)}}function Z2(m){var x=m.ref;if(x!==null){var A=m.stateNode;switch(m.tag){case 5:m=A;break;default:m=A}typeof x=="function"?x(m):x.current=m}}function bU(m){var x=m.alternate;x!==null&&(m.alternate=null,bU(x)),m.child=null,m.deletions=null,m.sibling=null,m.tag===5&&(x=m.stateNode,x!==null&&(delete x[mi],delete x[Gd],delete x[bu],delete x[ug],delete x[dg])),m.stateNode=null,m.return=null,m.dependencies=null,m.memoizedProps=null,m.memoizedState=null,m.pendingProps=null,m.stateNode=null,m.updateQueue=null}function SU(m){return m.tag===5||m.tag===3||m.tag===4}function EU(m){e:for(;;){for(;m.sibling===null;){if(m.return===null||SU(m.return))return null;m=m.return}for(m.sibling.return=m.return,m=m.sibling;m.tag!==5&&m.tag!==6&&m.tag!==18;){if(m.flags&2||m.child===null||m.tag===4)continue e;m.child.return=m,m=m.child}if(!(m.flags&2))return m.stateNode}}function Q2(m,x,A){var j=m.tag;if(j===5||j===6)m=m.stateNode,x?A.nodeType===8?A.parentNode.insertBefore(m,x):A.insertBefore(m,x):(A.nodeType===8?(x=A.parentNode,x.insertBefore(m,A)):(x=A,x.appendChild(m)),A=A._reactRootContainer,A!=null||x.onclick!==null||(x.onclick=Ph));else if(j!==4&&(m=m.child,m!==null))for(Q2(m,x,A),m=m.sibling;m!==null;)Q2(m,x,A),m=m.sibling}function eM(m,x,A){var j=m.tag;if(j===5||j===6)m=m.stateNode,x?A.insertBefore(m,x):A.appendChild(m);else if(j!==4&&(m=m.child,m!==null))for(eM(m,x,A),m=m.sibling;m!==null;)eM(m,x,A),m=m.sibling}var jo=null,jl=!1;function ef(m,x,A){for(A=A.child;A!==null;)_U(m,x,A),A=A.sibling}function _U(m,x,A){if(xn&&typeof xn.onCommitFiberUnmount=="function")try{xn.onCommitFiberUnmount(so,A)}catch{}switch(A.tag){case 5:Zo||Ag(A,x);case 6:var j=jo,G=jl;jo=null,ef(m,x,A),jo=j,jl=G,jo!==null&&(jl?(m=jo,A=A.stateNode,m.nodeType===8?m.parentNode.removeChild(A):m.removeChild(A)):jo.removeChild(A.stateNode));break;case 18:jo!==null&&(jl?(m=jo,A=A.stateNode,m.nodeType===8?cg(m.parentNode,A):m.nodeType===1&&cg(m,A),vc(m)):cg(jo,A.stateNode));break;case 4:j=jo,G=jl,jo=A.stateNode.containerInfo,jl=!0,ef(m,x,A),jo=j,jl=G;break;case 0:case 11:case 14:case 15:if(!Zo&&(j=A.updateQueue,j!==null&&(j=j.lastEffect,j!==null))){G=j=j.next;do{var X=G,ue=X.destroy;X=X.tag,ue!==void 0&&((X&2)!==0||(X&4)!==0)&&J2(A,x,ue),G=G.next}while(G!==j)}ef(m,x,A);break;case 1:if(!Zo&&(Ag(A,x),j=A.stateNode,typeof j.componentWillUnmount=="function"))try{j.props=A.memoizedProps,j.state=A.memoizedState,j.componentWillUnmount()}catch(Te){ri(A,x,Te)}ef(m,x,A);break;case 21:ef(m,x,A);break;case 22:A.mode&1?(Zo=(j=Zo)||A.memoizedState!==null,ef(m,x,A),Zo=j):ef(m,x,A);break;default:ef(m,x,A)}}function TU(m){var x=m.updateQueue;if(x!==null){m.updateQueue=null;var A=m.stateNode;A===null&&(A=m.stateNode=new Rhe),x.forEach(function(j){var G=$he.bind(null,m,j);A.has(j)||(A.add(j),j.then(G,G))})}}function Il(m,x){var A=x.deletions;if(A!==null)for(var j=0;j<A.length;j++){var G=A[j];try{var X=m,ue=x,Te=ue;e:for(;Te!==null;){switch(Te.tag){case 5:jo=Te.stateNode,jl=!1;break e;case 3:jo=Te.stateNode.containerInfo,jl=!0;break e;case 4:jo=Te.stateNode.containerInfo,jl=!0;break e}Te=Te.return}if(jo===null)throw Error(n(160));_U(X,ue,G),jo=null,jl=!1;var je=G.alternate;je!==null&&(je.return=null),G.return=null}catch(Ye){ri(G,x,Ye)}}if(x.subtreeFlags&12854)for(x=x.child;x!==null;)CU(x,m),x=x.sibling}function CU(m,x){var A=m.alternate,j=m.flags;switch(m.tag){case 0:case 11:case 14:case 15:if(Il(x,m),Rc(m),j&4){try{Ix(3,m,m.return),KS(3,m)}catch(Lt){ri(m,m.return,Lt)}try{Ix(5,m,m.return)}catch(Lt){ri(m,m.return,Lt)}}break;case 1:Il(x,m),Rc(m),j&512&&A!==null&&Ag(A,A.return);break;case 5:if(Il(x,m),Rc(m),j&512&&A!==null&&Ag(A,A.return),m.flags&32){var G=m.stateNode;try{qe(G,"")}catch(Lt){ri(m,m.return,Lt)}}if(j&4&&(G=m.stateNode,G!=null)){var X=m.memoizedProps,ue=A!==null?A.memoizedProps:X,Te=m.type,je=m.updateQueue;if(m.updateQueue=null,je!==null)try{Te==="input"&&X.type==="radio"&&X.name!=null&&Ce(G,X),Ve(Te,ue);var Ye=Ve(Te,X);for(ue=0;ue<je.length;ue+=2){var lt=je[ue],ht=je[ue+1];lt==="style"?dt(G,ht):lt==="dangerouslySetInnerHTML"?Ne(G,ht):lt==="children"?qe(G,ht):T(G,lt,ht,Ye)}switch(Te){case"input":oe(G,X);break;case"textarea":Ue(G,X);break;case"select":var st=G._wrapperState.wasMultiple;G._wrapperState.wasMultiple=!!X.multiple;var kt=X.value;kt!=null?ye(G,!!X.multiple,kt,!1):st!==!!X.multiple&&(X.defaultValue!=null?ye(G,!!X.multiple,X.defaultValue,!0):ye(G,!!X.multiple,X.multiple?[]:"",!1))}G[Gd]=X}catch(Lt){ri(m,m.return,Lt)}}break;case 6:if(Il(x,m),Rc(m),j&4){if(m.stateNode===null)throw Error(n(162));G=m.stateNode,X=m.memoizedProps;try{G.nodeValue=X}catch(Lt){ri(m,m.return,Lt)}}break;case 3:if(Il(x,m),Rc(m),j&4&&A!==null&&A.memoizedState.isDehydrated)try{vc(x.containerInfo)}catch(Lt){ri(m,m.return,Lt)}break;case 4:Il(x,m),Rc(m);break;case 13:Il(x,m),Rc(m),G=m.child,G.flags&8192&&(X=G.memoizedState!==null,G.stateNode.isHidden=X,!X||G.alternate!==null&&G.alternate.memoizedState!==null||(rM=yt())),j&4&&TU(m);break;case 22:if(lt=A!==null&&A.memoizedState!==null,m.mode&1?(Zo=(Ye=Zo)||lt,Il(x,m),Zo=Ye):Il(x,m),Rc(m),j&8192){if(Ye=m.memoizedState!==null,(m.stateNode.isHidden=Ye)&&!lt&&(m.mode&1)!==0)for(Rt=m,lt=m.child;lt!==null;){for(ht=Rt=lt;Rt!==null;){switch(st=Rt,kt=st.child,st.tag){case 0:case 11:case 14:case 15:Ix(4,st,st.return);break;case 1:Ag(st,st.return);var Ot=st.stateNode;if(typeof Ot.componentWillUnmount=="function"){j=st,A=st.return;try{x=j,Ot.props=x.memoizedProps,Ot.state=x.memoizedState,Ot.componentWillUnmount()}catch(Lt){ri(j,A,Lt)}}break;case 5:Ag(st,st.return);break;case 22:if(st.memoizedState!==null){PU(ht);continue}}kt!==null?(kt.return=st,Rt=kt):PU(ht)}lt=lt.sibling}e:for(lt=null,ht=m;;){if(ht.tag===5){if(lt===null){lt=ht;try{G=ht.stateNode,Ye?(X=G.style,typeof X.setProperty=="function"?X.setProperty("display","none","important"):X.display="none"):(Te=ht.stateNode,je=ht.memoizedProps.style,ue=je!=null&&je.hasOwnProperty("display")?je.display:null,Te.style.display=St("display",ue))}catch(Lt){ri(m,m.return,Lt)}}}else if(ht.tag===6){if(lt===null)try{ht.stateNode.nodeValue=Ye?"":ht.memoizedProps}catch(Lt){ri(m,m.return,Lt)}}else if((ht.tag!==22&&ht.tag!==23||ht.memoizedState===null||ht===m)&&ht.child!==null){ht.child.return=ht,ht=ht.child;continue}if(ht===m)break e;for(;ht.sibling===null;){if(ht.return===null||ht.return===m)break e;lt===ht&&(lt=null),ht=ht.return}lt===ht&&(lt=null),ht.sibling.return=ht.return,ht=ht.sibling}}break;case 19:Il(x,m),Rc(m),j&4&&TU(m);break;case 21:break;default:Il(x,m),Rc(m)}}function Rc(m){var x=m.flags;if(x&2){try{e:{for(var A=m.return;A!==null;){if(SU(A)){var j=A;break e}A=A.return}throw Error(n(160))}switch(j.tag){case 5:var G=j.stateNode;j.flags&32&&(qe(G,""),j.flags&=-33);var X=EU(m);eM(m,X,G);break;case 3:case 4:var ue=j.stateNode.containerInfo,Te=EU(m);Q2(m,Te,ue);break;default:throw Error(n(161))}}catch(je){ri(m,m.return,je)}m.flags&=-3}x&4096&&(m.flags&=-4097)}function Ihe(m,x,A){Rt=m,AU(m)}function AU(m,x,A){for(var j=(m.mode&1)!==0;Rt!==null;){var G=Rt,X=G.child;if(G.tag===22&&j){var ue=G.memoizedState!==null||XS;if(!ue){var Te=G.alternate,je=Te!==null&&Te.memoizedState!==null||Zo;Te=XS;var Ye=Zo;if(XS=ue,(Zo=je)&&!Ye)for(Rt=G;Rt!==null;)ue=Rt,je=ue.child,ue.tag===22&&ue.memoizedState!==null?kU(G):je!==null?(je.return=ue,Rt=je):kU(G);for(;X!==null;)Rt=X,AU(X),X=X.sibling;Rt=G,XS=Te,Zo=Ye}MU(m)}else(G.subtreeFlags&8772)!==0&&X!==null?(X.return=G,Rt=X):MU(m)}}function MU(m){for(;Rt!==null;){var x=Rt;if((x.flags&8772)!==0){var A=x.alternate;try{if((x.flags&8772)!==0)switch(x.tag){case 0:case 11:case 15:Zo||KS(5,x);break;case 1:var j=x.stateNode;if(x.flags&4&&!Zo)if(A===null)j.componentDidMount();else{var G=x.elementType===x.type?A.memoizedProps:Ba(x.type,A.memoizedProps);j.componentDidUpdate(G,A.memoizedState,j.__reactInternalSnapshotBeforeUpdate)}var X=x.updateQueue;X!==null&&Kd(x,X,j);break;case 3:var ue=x.updateQueue;if(ue!==null){if(A=null,x.child!==null)switch(x.child.tag){case 5:A=x.child.stateNode;break;case 1:A=x.child.stateNode}Kd(x,ue,A)}break;case 5:var Te=x.stateNode;if(A===null&&x.flags&4){A=Te;var je=x.memoizedProps;switch(x.type){case"button":case"input":case"select":case"textarea":je.autoFocus&&A.focus();break;case"img":je.src&&(A.src=je.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(x.memoizedState===null){var Ye=x.alternate;if(Ye!==null){var lt=Ye.memoizedState;if(lt!==null){var ht=lt.dehydrated;ht!==null&&vc(ht)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Zo||x.flags&512&&Z2(x)}catch(st){ri(x,x.return,st)}}if(x===m){Rt=null;break}if(A=x.sibling,A!==null){A.return=x.return,Rt=A;break}Rt=x.return}}function PU(m){for(;Rt!==null;){var x=Rt;if(x===m){Rt=null;break}var A=x.sibling;if(A!==null){A.return=x.return,Rt=A;break}Rt=x.return}}function kU(m){for(;Rt!==null;){var x=Rt;try{switch(x.tag){case 0:case 11:case 15:var A=x.return;try{KS(4,x)}catch(je){ri(x,A,je)}break;case 1:var j=x.stateNode;if(typeof j.componentDidMount=="function"){var G=x.return;try{j.componentDidMount()}catch(je){ri(x,G,je)}}var X=x.return;try{Z2(x)}catch(je){ri(x,X,je)}break;case 5:var ue=x.return;try{Z2(x)}catch(je){ri(x,ue,je)}}}catch(je){ri(x,x.return,je)}if(x===m){Rt=null;break}var Te=x.sibling;if(Te!==null){Te.return=x.return,Rt=Te;break}Rt=x.return}}var Ohe=Math.ceil,JS=C.ReactCurrentDispatcher,tM=C.ReactCurrentOwner,Gs=C.ReactCurrentBatchConfig,Wn=0,po=null,Ii=null,Io=0,ms=0,Mg=Dr(0),Qi=0,Ox=null,Yh=0,ZS=0,nM=0,Lx=null,$a=null,rM=0,Pg=1/0,Du=null,QS=!1,iM=null,tf=null,eE=!1,nf=null,tE=0,Dx=0,oM=null,nE=-1,rE=0;function Sa(){return(Wn&6)!==0?yt():nE!==-1?nE:nE=yt()}function rf(m){return(m.mode&1)===0?1:(Wn&2)!==0&&Io!==0?Io&-Io:q2.transition!==null?(rE===0&&(rE=Wo()),rE):(m=En,m!==0||(m=window.event,m=m===void 0?16:wc(m.type)),m)}function Ol(m,x,A,j){if(50<Dx)throw Dx=0,oM=null,Error(n(185));rs(m,A,j),((Wn&2)===0||m!==po)&&(m===po&&((Wn&2)===0&&(ZS|=A),Qi===4&&of(m,Io)),Ha(m,j),A===1&&Wn===0&&(x.mode&1)===0&&(Pg=yt()+500,Rh&&$s()))}function Ha(m,x){var A=m.callbackNode;hc(m,x);var j=cl(m,m===po?Io:0);if(j===0)A!==null&&vn(A),m.callbackNode=null,m.callbackPriority=0;else if(x=j&-j,m.callbackPriority!==x){if(A!=null&&vn(A),x===1)m.tag===0?LS(RU.bind(null,m)):jh(RU.bind(null,m)),G2(function(){(Wn&6)===0&&$s()}),A=null;else{switch(Ls(j)){case 1:A=Eo;break;case 4:A=Qr;break;case 16:A=Fn;break;case 536870912:A=Mr;break;default:A=Fn}A=UU(A,NU.bind(null,m))}m.callbackPriority=x,m.callbackNode=A}}function NU(m,x){if(nE=-1,rE=0,(Wn&6)!==0)throw Error(n(327));var A=m.callbackNode;if(kg()&&m.callbackNode!==A)return null;var j=cl(m,m===po?Io:0);if(j===0)return null;if((j&30)!==0||(j&m.expiredLanes)!==0||x)x=iE(m,j);else{x=j;var G=Wn;Wn|=2;var X=IU();(po!==m||Io!==x)&&(Du=null,Pg=yt()+500,Kh(m,x));do try{Fhe();break}catch(Te){jU(m,Te)}while(!0);Pu(),JS.current=X,Wn=G,Ii!==null?x=0:(po=null,Io=0,x=Qi)}if(x!==0){if(x===2&&(G=Co(m),G!==0&&(j=G,x=aM(m,G))),x===1)throw A=Ox,Kh(m,0),of(m,j),Ha(m,yt()),A;if(x===6)of(m,j);else{if(G=m.current.alternate,(j&30)===0&&!Lhe(G)&&(x=iE(m,j),x===2&&(X=Co(m),X!==0&&(j=X,x=aM(m,X))),x===1))throw A=Ox,Kh(m,0),of(m,j),Ha(m,yt()),A;switch(m.finishedWork=G,m.finishedLanes=j,x){case 0:case 1:throw Error(n(345));case 2:Jh(m,$a,Du);break;case 3:if(of(m,j),(j&130023424)===j&&(x=rM+500-yt(),10<x)){if(cl(m,0)!==0)break;if(G=m.suspendedLanes,(G&j)!==j){Sa(),m.pingedLanes|=m.suspendedLanes&G;break}m.timeoutHandle=ux(Jh.bind(null,m,$a,Du),x);break}Jh(m,$a,Du);break;case 4:if(of(m,j),(j&4194240)===j)break;for(x=m.eventTimes,G=-1;0<j;){var ue=31-Pr(j);X=1<<ue,ue=x[ue],ue>G&&(G=ue),j&=~X}if(j=G,j=yt()-j,j=(120>j?120:480>j?480:1080>j?1080:1920>j?1920:3e3>j?3e3:4320>j?4320:1960*Ohe(j/1960))-j,10<j){m.timeoutHandle=ux(Jh.bind(null,m,$a,Du),j);break}Jh(m,$a,Du);break;case 5:Jh(m,$a,Du);break;default:throw Error(n(329))}}}return Ha(m,yt()),m.callbackNode===A?NU.bind(null,m):null}function aM(m,x){var A=Lx;return m.current.memoizedState.isDehydrated&&(Kh(m,x).flags|=256),m=iE(m,x),m!==2&&(x=$a,$a=A,x!==null&&sM(x)),m}function sM(m){$a===null?$a=m:$a.push.apply($a,m)}function Lhe(m){for(var x=m;;){if(x.flags&16384){var A=x.updateQueue;if(A!==null&&(A=A.stores,A!==null))for(var j=0;j<A.length;j++){var G=A[j],X=G.getSnapshot;G=G.value;try{if(!pa(X(),G))return!1}catch{return!1}}}if(A=x.child,x.subtreeFlags&16384&&A!==null)A.return=x,x=A;else{if(x===m)break;for(;x.sibling===null;){if(x.return===null||x.return===m)return!0;x=x.return}x.sibling.return=x.return,x=x.sibling}}return!0}function of(m,x){for(x&=~nM,x&=~ZS,m.suspendedLanes|=x,m.pingedLanes&=~x,m=m.expirationTimes;0<x;){var A=31-Pr(x),j=1<<A;m[A]=-1,x&=~j}}function RU(m){if((Wn&6)!==0)throw Error(n(327));kg();var x=cl(m,0);if((x&1)===0)return Ha(m,yt()),null;var A=iE(m,x);if(m.tag!==0&&A===2){var j=Co(m);j!==0&&(x=j,A=aM(m,j))}if(A===1)throw A=Ox,Kh(m,0),of(m,x),Ha(m,yt()),A;if(A===6)throw Error(n(345));return m.finishedWork=m.current.alternate,m.finishedLanes=x,Jh(m,$a,Du),Ha(m,yt()),null}function lM(m,x){var A=Wn;Wn|=1;try{return m(x)}finally{Wn=A,Wn===0&&(Pg=yt()+500,Rh&&$s())}}function Xh(m){nf!==null&&nf.tag===0&&(Wn&6)===0&&kg();var x=Wn;Wn|=1;var A=Gs.transition,j=En;try{if(Gs.transition=null,En=1,m)return m()}finally{En=j,Gs.transition=A,Wn=x,(Wn&6)===0&&$s()}}function cM(){ms=Mg.current,lr(Mg)}function Kh(m,x){m.finishedWork=null,m.finishedLanes=0;var A=m.timeoutHandle;if(A!==-1&&(m.timeoutHandle=-1,dx(A)),Ii!==null)for(A=Ii.return;A!==null;){var j=A;switch(Tl(j),j.tag){case 1:j=j.type.childContextTypes,j!=null&&kh();break;case 3:kc(),lr(Po),lr(Yi),Vs();break;case 5:Jd(j);break;case 4:kc();break;case 13:lr(hr);break;case 19:lr(hr);break;case 10:Dh(j.type._context);break;case 22:case 23:cM()}A=A.return}if(po=m,Ii=m=af(m.current,null),Io=ms=x,Qi=0,Ox=null,nM=ZS=Yh=0,$a=Lx=null,Al!==null){for(x=0;x<Al.length;x++)if(A=Al[x],j=A.interleaved,j!==null){A.interleaved=null;var G=j.next,X=A.pending;if(X!==null){var ue=X.next;X.next=G,j.next=ue}A.pending=j}Al=null}return m}function jU(m,x){do{var A=Ii;try{if(Pu(),ju.current=Tg,hs){for(var j=cr.memoizedState;j!==null;){var G=j.queue;G!==null&&(G.pending=null),j=j.next}hs=!1}if(Pl=0,zn=zr=cr=null,ho=!1,Nc=0,tM.current=null,A===null||A.return===null){Qi=1,Ox=x,Ii=null;break}e:{var X=m,ue=A.return,Te=A,je=x;if(x=Io,Te.flags|=32768,je!==null&&typeof je=="object"&&typeof je.then=="function"){var Ye=je,lt=Te,ht=lt.tag;if((lt.mode&1)===0&&(ht===0||ht===11||ht===15)){var st=lt.alternate;st?(lt.updateQueue=st.updateQueue,lt.memoizedState=st.memoizedState,lt.lanes=st.lanes):(lt.updateQueue=null,lt.memoizedState=null)}var kt=Nt(ue);if(kt!==null){kt.flags&=-257,an(kt,ue,Te,X,x),kt.mode&1&&mt(X,Ye,x),x=kt,je=Ye;var Ot=x.updateQueue;if(Ot===null){var Lt=new Set;Lt.add(je),x.updateQueue=Lt}else Ot.add(je);break e}else{if((x&1)===0){mt(X,Ye,x),uM();break e}je=Error(n(426))}}else if(fr&&Te.mode&1){var gi=Nt(ue);if(gi!==null){(gi.flags&65536)===0&&(gi.flags|=256),an(gi,ue,Te,X,x),Yd(D(je,Te));break e}}X=je=D(je,Te),Qi!==4&&(Qi=2),Lx===null?Lx=[X]:Lx.push(X),X=ue;do{switch(X.tag){case 3:X.flags|=65536,x&=-x,X.lanes|=x;var Be=Le(X,je,x);ku(X,Be);break e;case 1:Te=je;var Oe=X.type,We=X.stateNode;if((X.flags&128)===0&&(typeof Oe.getDerivedStateFromError=="function"||We!==null&&typeof We.componentDidCatch=="function"&&(tf===null||!tf.has(We)))){X.flags|=65536,x&=-x,X.lanes|=x;var vt=Qe(X,Te,x);ku(X,vt);break e}}X=X.return}while(X!==null)}LU(A)}catch(zt){x=zt,Ii===A&&A!==null&&(Ii=A=A.return);continue}break}while(!0)}function IU(){var m=JS.current;return JS.current=Tg,m===null?Tg:m}function uM(){(Qi===0||Qi===3||Qi===2)&&(Qi=4),po===null||(Yh&268435455)===0&&(ZS&268435455)===0||of(po,Io)}function iE(m,x){var A=Wn;Wn|=2;var j=IU();(po!==m||Io!==x)&&(Du=null,Kh(m,x));do try{Dhe();break}catch(G){jU(m,G)}while(!0);if(Pu(),Wn=A,JS.current=j,Ii!==null)throw Error(n(261));return po=null,Io=0,Qi}function Dhe(){for(;Ii!==null;)OU(Ii)}function Fhe(){for(;Ii!==null&&!ns();)OU(Ii)}function OU(m){var x=zU(m.alternate,m,ms);m.memoizedProps=m.pendingProps,x===null?LU(m):Ii=x,tM.current=null}function LU(m){var x=m;do{var A=x.alternate;if(m=x.return,(x.flags&32768)===0){if(A=khe(A,x,ms),A!==null){Ii=A;return}}else{if(A=Nhe(A,x),A!==null){A.flags&=32767,Ii=A;return}if(m!==null)m.flags|=32768,m.subtreeFlags=0,m.deletions=null;else{Qi=6,Ii=null;return}}if(x=x.sibling,x!==null){Ii=x;return}Ii=x=m}while(x!==null);Qi===0&&(Qi=5)}function Jh(m,x,A){var j=En,G=Gs.transition;try{Gs.transition=null,En=1,zhe(m,x,A,j)}finally{Gs.transition=G,En=j}return null}function zhe(m,x,A,j){do kg();while(nf!==null);if((Wn&6)!==0)throw Error(n(327));A=m.finishedWork;var G=m.finishedLanes;if(A===null)return null;if(m.finishedWork=null,m.finishedLanes=0,A===m.current)throw Error(n(177));m.callbackNode=null,m.callbackPriority=0;var X=A.lanes|A.childLanes;if(Um(m,X),m===po&&(Ii=po=null,Io=0),(A.subtreeFlags&2064)===0&&(A.flags&2064)===0||eE||(eE=!0,UU(Fn,function(){return kg(),null})),X=(A.flags&15990)!==0,(A.subtreeFlags&15990)!==0||X){X=Gs.transition,Gs.transition=null;var ue=En;En=1;var Te=Wn;Wn|=4,tM.current=null,jhe(m,A),CU(A,m),ki(lx),Ci=!!Wd,lx=Wd=null,m.current=A,Ihe(A),Vn(),Wn=Te,En=ue,Gs.transition=X}else m.current=A;if(eE&&(eE=!1,nf=m,tE=G),X=m.pendingLanes,X===0&&(tf=null),Xn(A.stateNode),Ha(m,yt()),x!==null)for(j=m.onRecoverableError,A=0;A<x.length;A++)G=x[A],j(G.value,{componentStack:G.stack,digest:G.digest});if(QS)throw QS=!1,m=iM,iM=null,m;return(tE&1)!==0&&m.tag!==0&&kg(),X=m.pendingLanes,(X&1)!==0?m===oM?Dx++:(Dx=0,oM=m):Dx=0,$s(),null}function kg(){if(nf!==null){var m=Ls(tE),x=Gs.transition,A=En;try{if(Gs.transition=null,En=16>m?16:m,nf===null)var j=!1;else{if(m=nf,nf=null,tE=0,(Wn&6)!==0)throw Error(n(331));var G=Wn;for(Wn|=4,Rt=m.current;Rt!==null;){var X=Rt,ue=X.child;if((Rt.flags&16)!==0){var Te=X.deletions;if(Te!==null){for(var je=0;je<Te.length;je++){var Ye=Te[je];for(Rt=Ye;Rt!==null;){var lt=Rt;switch(lt.tag){case 0:case 11:case 15:Ix(8,lt,X)}var ht=lt.child;if(ht!==null)ht.return=lt,Rt=ht;else for(;Rt!==null;){lt=Rt;var st=lt.sibling,kt=lt.return;if(bU(lt),lt===Ye){Rt=null;break}if(st!==null){st.return=kt,Rt=st;break}Rt=kt}}}var Ot=X.alternate;if(Ot!==null){var Lt=Ot.child;if(Lt!==null){Ot.child=null;do{var gi=Lt.sibling;Lt.sibling=null,Lt=gi}while(Lt!==null)}}Rt=X}}if((X.subtreeFlags&2064)!==0&&ue!==null)ue.return=X,Rt=ue;else e:for(;Rt!==null;){if(X=Rt,(X.flags&2048)!==0)switch(X.tag){case 0:case 11:case 15:Ix(9,X,X.return)}var Be=X.sibling;if(Be!==null){Be.return=X.return,Rt=Be;break e}Rt=X.return}}var Oe=m.current;for(Rt=Oe;Rt!==null;){ue=Rt;var We=ue.child;if((ue.subtreeFlags&2064)!==0&&We!==null)We.return=ue,Rt=We;else e:for(ue=Oe;Rt!==null;){if(Te=Rt,(Te.flags&2048)!==0)try{switch(Te.tag){case 0:case 11:case 15:KS(9,Te)}}catch(zt){ri(Te,Te.return,zt)}if(Te===ue){Rt=null;break e}var vt=Te.sibling;if(vt!==null){vt.return=Te.return,Rt=vt;break e}Rt=Te.return}}if(Wn=G,$s(),xn&&typeof xn.onPostCommitFiberRoot=="function")try{xn.onPostCommitFiberRoot(so,m)}catch{}j=!0}return j}finally{En=A,Gs.transition=x}}return!1}function DU(m,x,A){x=D(A,x),x=Le(m,x,1),m=xr(m,x,1),x=Sa(),m!==null&&(rs(m,1,x),Ha(m,x))}function ri(m,x,A){if(m.tag===3)DU(m,m,A);else for(;x!==null;){if(x.tag===3){DU(x,m,A);break}else if(x.tag===1){var j=x.stateNode;if(typeof x.type.getDerivedStateFromError=="function"||typeof j.componentDidCatch=="function"&&(tf===null||!tf.has(j))){m=D(A,m),m=Qe(x,m,1),x=xr(x,m,1),m=Sa(),x!==null&&(rs(x,1,m),Ha(x,m));break}}x=x.return}}function Uhe(m,x,A){var j=m.pingCache;j!==null&&j.delete(x),x=Sa(),m.pingedLanes|=m.suspendedLanes&A,po===m&&(Io&A)===A&&(Qi===4||Qi===3&&(Io&130023424)===Io&&500>yt()-rM?Kh(m,0):nM|=A),Ha(m,x)}function FU(m,x){x===0&&((m.mode&1)===0?x=1:(x=Hr,Hr<<=1,(Hr&130023424)===0&&(Hr=4194304)));var A=Sa();m=ds(m,x),m!==null&&(rs(m,x,A),Ha(m,A))}function Bhe(m){var x=m.memoizedState,A=0;x!==null&&(A=x.retryLane),FU(m,A)}function $he(m,x){var A=0;switch(m.tag){case 13:var j=m.stateNode,G=m.memoizedState;G!==null&&(A=G.retryLane);break;case 19:j=m.stateNode;break;default:throw Error(n(314))}j!==null&&j.delete(x),FU(m,A)}var zU;zU=function(m,x,A){if(m!==null)if(m.memoizedProps!==x.pendingProps||Po.current)pn=!0;else{if((m.lanes&A)===0&&(x.flags&128)===0)return pn=!1,Phe(m,x,A);pn=(m.flags&131072)!==0}else pn=!1,fr&&(x.flags&1048576)!==0&&gx(x,mg,x.index);switch(x.lanes=0,x.tag){case 2:var j=x.type;YS(m,x),m=x.pendingProps;var G=Su(x,Yi.current);Pc(x,A),G=$h(null,x,j,m,G,A);var X=_x();return x.flags|=1,typeof G=="object"&&G!==null&&typeof G.render=="function"&&G.$$typeof===void 0?(x.tag=1,x.memoizedState=null,x.updateQueue=null,uo(j)?(X=!0,Eu(x)):X=!1,x.memoizedState=G.state!==null&&G.state!==void 0?G.state:null,hn(x),G.updater=Cg,x.stateNode=G,G._reactInternals=x,R(x,j,m,A),x=dn(null,x,j,!0,X,A)):(x.tag=0,fr&&X&&yx(x),Pt(null,x,G,A),x=x.child),x;case 16:j=x.elementType;e:{switch(YS(m,x),m=x.pendingProps,G=j._init,j=G(j._payload),x.type=j,G=x.tag=Vhe(j),m=Ba(j,m),G){case 0:x=Tt(null,x,j,m,A);break e;case 1:x=Ft(null,x,j,m,A);break e;case 11:x=Zi(null,x,j,m,A);break e;case 14:x=ba(null,x,j,Ba(j.type,m),A);break e}throw Error(n(306,j,""))}return x;case 0:return j=x.type,G=x.pendingProps,G=x.elementType===j?G:Ba(j,G),Tt(m,x,j,G,A);case 1:return j=x.type,G=x.pendingProps,G=x.elementType===j?G:Ba(j,G),Ft(m,x,j,G,A);case 3:e:{if(sn(x),m===null)throw Error(n(387));j=x.pendingProps,X=x.memoizedState,G=X.element,Gr(m,x),Fr(x,j,null,A);var ue=x.memoizedState;if(j=ue.element,X.isDehydrated)if(X={element:j,isDehydrated:!1,cache:ue.cache,pendingSuspenseBoundaries:ue.pendingSuspenseBoundaries,transitions:ue.transitions},x.updateQueue.baseState=X,x.memoizedState=X,x.flags&256){G=D(Error(n(423)),x),x=On(m,x,j,A,G);break e}else if(j!==G){G=D(Error(n(424)),x),x=On(m,x,j,A,G);break e}else for(No=wl(x.stateNode.containerInfo.firstChild),Xi=x,fr=!0,Ua=null,A=Lh(x,null,j,A),x.child=A;A;)A.flags=A.flags&-3|4096,A=A.sibling;else{if(Mc(),j===G){x=Lu(m,x,A);break e}Pt(m,x,j,A)}x=x.child}return x;case 5:return Ru(x),m===null&&yg(x),j=x.type,G=x.pendingProps,X=m!==null?m.memoizedProps:null,ue=G.children,cx(j,G)?ue=null:X!==null&&cx(j,X)&&(x.flags|=32),Je(m,x),Pt(m,x,ue,A),x.child;case 6:return m===null&&yg(x),null;case 13:return Rl(m,x,A);case 4:return Uh(x,x.stateNode.containerInfo),j=x.pendingProps,m===null?x.child=Cu(x,null,j,A):Pt(m,x,j,A),x.child;case 11:return j=x.type,G=x.pendingProps,G=x.elementType===j?G:Ba(j,G),Zi(m,x,j,G,A);case 7:return Pt(m,x,x.pendingProps,A),x.child;case 8:return Pt(m,x,x.pendingProps.children,A),x.child;case 12:return Pt(m,x,x.pendingProps.children,A),x.child;case 10:e:{if(j=x.type._context,G=x.pendingProps,X=x.memoizedProps,ue=G.value,nr(Au,j._currentValue),j._currentValue=ue,X!==null)if(pa(X.value,ue)){if(X.children===G.children&&!Po.current){x=Lu(m,x,A);break e}}else for(X=x.child,X!==null&&(X.return=x);X!==null;){var Te=X.dependencies;if(Te!==null){ue=X.child;for(var je=Te.firstContext;je!==null;){if(je.context===j){if(X.tag===1){je=Qn(-1,A&-A),je.tag=2;var Ye=X.updateQueue;if(Ye!==null){Ye=Ye.shared;var lt=Ye.pending;lt===null?je.next=je:(je.next=lt.next,lt.next=je),Ye.pending=je}}X.lanes|=A,je=X.alternate,je!==null&&(je.lanes|=A),Fh(X.return,A,x),Te.lanes|=A;break}je=je.next}}else if(X.tag===10)ue=X.type===x.type?null:X.child;else if(X.tag===18){if(ue=X.return,ue===null)throw Error(n(341));ue.lanes|=A,Te=ue.alternate,Te!==null&&(Te.lanes|=A),Fh(ue,A,x),ue=X.sibling}else ue=X.child;if(ue!==null)ue.return=X;else for(ue=X;ue!==null;){if(ue===x){ue=null;break}if(X=ue.sibling,X!==null){X.return=ue.return,ue=X;break}ue=ue.return}X=ue}Pt(m,x,G.children,A),x=x.child}return x;case 9:return G=x.type,j=x.pendingProps.children,Pc(x,A),G=ya(G),j=j(G),x.flags|=1,Pt(m,x,j,A),x.child;case 14:return j=x.type,G=Ba(j,x.pendingProps),G=Ba(j.type,G),ba(m,x,j,G,A);case 15:return Ge(m,x,x.type,x.pendingProps,A);case 17:return j=x.type,G=x.pendingProps,G=x.elementType===j?G:Ba(j,G),YS(m,x),x.tag=1,uo(j)?(m=!0,Eu(x)):m=!1,Pc(x,A),S(x,j,G),R(x,j,G,A),dn(null,x,j,!0,m,A);case 19:return gU(m,x,A);case 22:return Fe(m,x,A)}throw Error(n(156,x.tag))};function UU(m,x){return ua(m,x)}function Hhe(m,x,A,j){this.tag=m,this.key=A,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=x,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=j,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qs(m,x,A,j){return new Hhe(m,x,A,j)}function dM(m){return m=m.prototype,!(!m||!m.isReactComponent)}function Vhe(m){if(typeof m=="function")return dM(m)?1:0;if(m!=null){if(m=m.$$typeof,m===B)return 11;if(m===J)return 14}return 2}function af(m,x){var A=m.alternate;return A===null?(A=qs(m.tag,x,m.key,m.mode),A.elementType=m.elementType,A.type=m.type,A.stateNode=m.stateNode,A.alternate=m,m.alternate=A):(A.pendingProps=x,A.type=m.type,A.flags=0,A.subtreeFlags=0,A.deletions=null),A.flags=m.flags&14680064,A.childLanes=m.childLanes,A.lanes=m.lanes,A.child=m.child,A.memoizedProps=m.memoizedProps,A.memoizedState=m.memoizedState,A.updateQueue=m.updateQueue,x=m.dependencies,A.dependencies=x===null?null:{lanes:x.lanes,firstContext:x.firstContext},A.sibling=m.sibling,A.index=m.index,A.ref=m.ref,A}function oE(m,x,A,j,G,X){var ue=2;if(j=m,typeof m=="function")dM(m)&&(ue=1);else if(typeof m=="string")ue=5;else e:switch(m){case k:return Zh(A.children,G,X,x);case I:ue=8,G|=8;break;case U:return m=qs(12,A,x,G|2),m.elementType=U,m.lanes=X,m;case $:return m=qs(13,A,x,G),m.elementType=$,m.lanes=X,m;case F:return m=qs(19,A,x,G),m.elementType=F,m.lanes=X,m;case Z:return aE(A,G,X,x);default:if(typeof m=="object"&&m!==null)switch(m.$$typeof){case z:ue=10;break e;case O:ue=9;break e;case B:ue=11;break e;case J:ue=14;break e;case K:ue=16,j=null;break e}throw Error(n(130,m==null?m:typeof m,""))}return x=qs(ue,A,x,G),x.elementType=m,x.type=j,x.lanes=X,x}function Zh(m,x,A,j){return m=qs(7,m,j,x),m.lanes=A,m}function aE(m,x,A,j){return m=qs(22,m,j,x),m.elementType=Z,m.lanes=A,m.stateNode={isHidden:!1},m}function fM(m,x,A){return m=qs(6,m,null,x),m.lanes=A,m}function hM(m,x,A){return x=qs(4,m.children!==null?m.children:[],m.key,x),x.lanes=A,x.stateNode={containerInfo:m.containerInfo,pendingChildren:null,implementation:m.implementation},x}function Whe(m,x,A,j,G){this.tag=x,this.containerInfo=m,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=pc(0),this.expirationTimes=pc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pc(0),this.identifierPrefix=j,this.onRecoverableError=G,this.mutableSourceEagerHydrationData=null}function pM(m,x,A,j,G,X,ue,Te,je){return m=new Whe(m,x,A,Te,je),x===1?(x=1,X===!0&&(x|=8)):x=0,X=qs(3,null,null,x),m.current=X,X.stateNode=m,X.memoizedState={element:j,isDehydrated:A,cache:null,transitions:null,pendingSuspenseBoundaries:null},hn(X),m}function Ghe(m,x,A){var j=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:M,key:j==null?null:""+j,children:m,containerInfo:x,implementation:A}}function BU(m){if(!m)return Sl;m=m._reactInternals;e:{if(pt(m)!==m||m.tag!==1)throw Error(n(170));var x=m;do{switch(x.tag){case 3:x=x.stateNode.context;break e;case 1:if(uo(x.type)){x=x.stateNode.__reactInternalMemoizedMergedChildContext;break e}}x=x.return}while(x!==null);throw Error(n(171))}if(m.tag===1){var A=m.type;if(uo(A))return Nh(m,A,x)}return x}function $U(m,x,A,j,G,X,ue,Te,je){return m=pM(A,j,!0,m,G,X,ue,Te,je),m.context=BU(null),A=m.current,j=Sa(),G=rf(A),X=Qn(j,G),X.callback=x??null,xr(A,X,G),m.current.lanes=G,rs(m,G,j),Ha(m,j),m}function sE(m,x,A,j){var G=x.current,X=Sa(),ue=rf(G);return A=BU(A),x.context===null?x.context=A:x.pendingContext=A,x=Qn(X,ue),x.payload={element:m},j=j===void 0?null:j,j!==null&&(x.callback=j),m=xr(G,x,ue),m!==null&&(Ol(m,G,ue,X),fo(m,G,ue)),ue}function lE(m){if(m=m.current,!m.child)return null;switch(m.child.tag){case 5:return m.child.stateNode;default:return m.child.stateNode}}function HU(m,x){if(m=m.memoizedState,m!==null&&m.dehydrated!==null){var A=m.retryLane;m.retryLane=A!==0&&A<x?A:x}}function mM(m,x){HU(m,x),(m=m.alternate)&&HU(m,x)}function qhe(){return null}var VU=typeof reportError=="function"?reportError:function(m){console.error(m)};function gM(m){this._internalRoot=m}cE.prototype.render=gM.prototype.render=function(m){var x=this._internalRoot;if(x===null)throw Error(n(409));sE(m,x,null,null)},cE.prototype.unmount=gM.prototype.unmount=function(){var m=this._internalRoot;if(m!==null){this._internalRoot=null;var x=m.containerInfo;Xh(function(){sE(null,m,null,null)}),x[ga]=null}};function cE(m){this._internalRoot=m}cE.prototype.unstable_scheduleHydration=function(m){if(m){var x=Ds();m={blockedOn:null,target:m,priority:x};for(var A=0;A<Ia.length&&x!==0&&x<Ia[A].priority;A++);Ia.splice(A,0,m),A===0&&lo(m)}};function yM(m){return!(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)}function uE(m){return!(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11&&(m.nodeType!==8||m.nodeValue!==" react-mount-point-unstable "))}function WU(){}function Yhe(m,x,A,j,G){if(G){if(typeof j=="function"){var X=j;j=function(){var Ye=lE(ue);X.call(Ye)}}var ue=$U(x,j,m,0,null,!1,!1,"",WU);return m._reactRootContainer=ue,m[ga]=ue.current,Hd(m.nodeType===8?m.parentNode:m),Xh(),ue}for(;G=m.lastChild;)m.removeChild(G);if(typeof j=="function"){var Te=j;j=function(){var Ye=lE(je);Te.call(Ye)}}var je=pM(m,0,!1,null,null,!1,!1,"",WU);return m._reactRootContainer=je,m[ga]=je.current,Hd(m.nodeType===8?m.parentNode:m),Xh(function(){sE(x,je,A,j)}),je}function dE(m,x,A,j,G){var X=A._reactRootContainer;if(X){var ue=X;if(typeof G=="function"){var Te=G;G=function(){var je=lE(ue);Te.call(je)}}sE(x,ue,m,G)}else ue=Yhe(A,x,m,G,j);return lE(ue)}mc=function(m){switch(m.tag){case 3:var x=m.stateNode;if(x.current.memoizedState.isDehydrated){var A=To(x.pendingLanes);A!==0&&(is(x,A|1),Ha(x,yt()),(Wn&6)===0&&(Pg=yt()+500,$s()))}break;case 13:Xh(function(){var j=ds(m,1);if(j!==null){var G=Sa();Ol(j,m,1,G)}}),mM(m,1)}},Nd=function(m){if(m.tag===13){var x=ds(m,134217728);if(x!==null){var A=Sa();Ol(x,m,134217728,A)}mM(m,134217728)}},Rd=function(m){if(m.tag===13){var x=rf(m),A=ds(m,x);if(A!==null){var j=Sa();Ol(A,m,x,j)}mM(m,x)}},Ds=function(){return En},uu=function(m,x){var A=En;try{return En=m,x()}finally{En=A}},wt=function(m,x,A){switch(x){case"input":if(oe(m,A),x=A.name,A.type==="radio"&&x!=null){for(A=m;A.parentNode;)A=A.parentNode;for(A=A.querySelectorAll("input[name="+JSON.stringify(""+x)+'][type="radio"]'),x=0;x<A.length;x++){var j=A[x];if(j!==m&&j.form===m.form){var G=fg(j);if(!G)throw Error(n(90));ee(j),oe(j,G)}}}break;case"textarea":Ue(m,A);break;case"select":x=A.value,x!=null&&ye(m,!!A.multiple,x,!1)}},Jt=lM,fn=Xh;var Xhe={usingClientEntryPoint:!1,Events:[bl,Wr,fg,gr,Mn,lM]},Fx={findFiberByHostInstance:Ac,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Khe={bundleType:Fx.bundleType,version:Fx.version,rendererPackageName:Fx.rendererPackageName,rendererConfig:Fx.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:C.ReactCurrentDispatcher,findHostInstanceByFiber:function(m){return m=yn(m),m===null?null:m.stateNode},findFiberByHostInstance:Fx.findFiberByHostInstance||qhe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fE=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fE.isDisabled&&fE.supportsFiber)try{so=fE.inject(Khe),xn=fE}catch{}}return Va.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Xhe,Va.createPortal=function(m,x){var A=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!yM(x))throw Error(n(200));return Ghe(m,x,null,A)},Va.createRoot=function(m,x){if(!yM(m))throw Error(n(299));var A=!1,j="",G=VU;return x!=null&&(x.unstable_strictMode===!0&&(A=!0),x.identifierPrefix!==void 0&&(j=x.identifierPrefix),x.onRecoverableError!==void 0&&(G=x.onRecoverableError)),x=pM(m,1,!1,null,null,A,!1,j,G),m[ga]=x.current,Hd(m.nodeType===8?m.parentNode:m),new gM(x)},Va.findDOMNode=function(m){if(m==null)return null;if(m.nodeType===1)return m;var x=m._reactInternals;if(x===void 0)throw typeof m.render=="function"?Error(n(188)):(m=Object.keys(m).join(","),Error(n(268,m)));return m=yn(x),m=m===null?null:m.stateNode,m},Va.flushSync=function(m){return Xh(m)},Va.hydrate=function(m,x,A){if(!uE(x))throw Error(n(200));return dE(null,m,x,!0,A)},Va.hydrateRoot=function(m,x,A){if(!yM(m))throw Error(n(405));var j=A!=null&&A.hydratedSources||null,G=!1,X="",ue=VU;if(A!=null&&(A.unstable_strictMode===!0&&(G=!0),A.identifierPrefix!==void 0&&(X=A.identifierPrefix),A.onRecoverableError!==void 0&&(ue=A.onRecoverableError)),x=$U(x,null,m,1,A??null,G,!1,X,ue),m[ga]=x.current,Hd(m),j)for(m=0;m<j.length;m++)A=j[m],G=A._getVersion,G=G(A._source),x.mutableSourceEagerHydrationData==null?x.mutableSourceEagerHydrationData=[A,G]:x.mutableSourceEagerHydrationData.push(A,G);return new cE(x)},Va.render=function(m,x,A){if(!uE(x))throw Error(n(200));return dE(null,m,x,!1,A)},Va.unmountComponentAtNode=function(m){if(!uE(m))throw Error(n(40));return m._reactRootContainer?(Xh(function(){dE(null,null,m,!1,function(){m._reactRootContainer=null,m[ga]=null})}),!0):!1},Va.unstable_batchedUpdates=lM,Va.unstable_renderSubtreeIntoContainer=function(m,x,A,j){if(!uE(A))throw Error(n(200));if(m==null||m._reactInternals===void 0)throw Error(n(38));return dE(m,x,A,!1,j)},Va.version="18.3.1-next-f1338f8080-20240426",Va}var QU;function TK(){if(QU)return wM.exports;QU=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),wM.exports=spe(),wM.exports}var eB;function lpe(){if(eB)return hE;eB=1;var t=TK();return hE.createRoot=t.createRoot,hE.hydrateRoot=t.hydrateRoot,hE}var cpe=lpe();const upe=$n(cpe);var a0=TK();const CK=$n(a0);/**
 * @remix-run/router v1.20.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function tb(){return tb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},tb.apply(this,arguments)}var Nf;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Nf||(Nf={}));const tB="popstate";function dpe(t){t===void 0&&(t={});function e(r,i){let{pathname:o,search:a,hash:s}=r.location;return UI("",{pathname:o,search:a,hash:s},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:fT(i)}return hpe(e,n,null,t)}function Ei(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function AK(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function fpe(){return Math.random().toString(36).substr(2,8)}function nB(t,e){return{usr:t.state,key:t.key,idx:e}}function UI(t,e,n,r){return n===void 0&&(n=null),tb({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?s0(e):e,{state:n,key:e&&e.key||r||fpe()})}function fT(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function s0(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function hpe(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,a=i.history,s=Nf.Pop,l=null,c=u();c==null&&(c=0,a.replaceState(tb({},a.state,{idx:c}),""));function u(){return(a.state||{idx:null}).idx}function f(){s=Nf.Pop;let v=u(),b=v==null?null:v-c;c=v,l&&l({action:s,location:g.location,delta:b})}function h(v,b){s=Nf.Push;let w=UI(g.location,v,b);c=u()+1;let T=nB(w,c),C=g.createHref(w);try{a.pushState(T,"",C)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;i.location.assign(C)}o&&l&&l({action:s,location:g.location,delta:1})}function p(v,b){s=Nf.Replace;let w=UI(g.location,v,b);c=u();let T=nB(w,c),C=g.createHref(w);a.replaceState(T,"",C),o&&l&&l({action:s,location:g.location,delta:0})}function y(v){let b=i.location.origin!=="null"?i.location.origin:i.location.href,w=typeof v=="string"?v:fT(v);return w=w.replace(/ $/,"%20"),Ei(b,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,b)}let g={get action(){return s},get location(){return t(i,a)},listen(v){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(tB,f),l=v,()=>{i.removeEventListener(tB,f),l=null}},createHref(v){return e(i,v)},createURL:y,encodeLocation(v){let b=y(v);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:h,replace:p,go(v){return a.go(v)}};return g}var rB;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(rB||(rB={}));function ppe(t,e,n){return n===void 0&&(n="/"),mpe(t,e,n)}function mpe(t,e,n,r){let i=typeof e=="string"?s0(e):e,o=E3(i.pathname||"/",n);if(o==null)return null;let a=MK(t);gpe(a);let s=null;for(let l=0;s==null&&l<a.length;++l){let c=Mpe(o);s=Tpe(a[l],c)}return s}function MK(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(o,a,s)=>{let l={relativePath:s===void 0?o.path||"":s,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};l.relativePath.startsWith("/")&&(Ei(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Lf([r,l.relativePath]),u=n.concat(l);o.children&&o.children.length>0&&(Ei(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),MK(o.children,e,u,c)),!(o.path==null&&!o.index)&&e.push({path:c,score:Epe(c,o.index),routesMeta:u})};return t.forEach((o,a)=>{var s;if(o.path===""||!((s=o.path)!=null&&s.includes("?")))i(o,a);else for(let l of PK(o.path))i(o,a,l)}),e}function PK(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let a=PK(r.join("/")),s=[];return s.push(...a.map(l=>l===""?o:[o,l].join("/"))),i&&s.push(...a),s.map(l=>t.startsWith("/")&&l===""?"/":l)}function gpe(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:_pe(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const ype=/^:[\w-]+$/,vpe=3,xpe=2,wpe=1,bpe=10,Spe=-2,iB=t=>t==="*";function Epe(t,e){let n=t.split("/"),r=n.length;return n.some(iB)&&(r+=Spe),e&&(r+=xpe),n.filter(i=>!iB(i)).reduce((i,o)=>i+(ype.test(o)?vpe:o===""?wpe:bpe),r)}function _pe(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function Tpe(t,e,n){let{routesMeta:r}=t,i={},o="/",a=[];for(let s=0;s<r.length;++s){let l=r[s],c=s===r.length-1,u=o==="/"?e:e.slice(o.length)||"/",f=Cpe({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),h=l.route;if(!f)return null;Object.assign(i,f.params),a.push({params:i,pathname:Lf([o,f.pathname]),pathnameBase:Rpe(Lf([o,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(o=Lf([o,f.pathnameBase]))}return a}function Cpe(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=Ape(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let o=i[0],a=o.replace(/(.)\/+$/,"$1"),s=i.slice(1);return{params:r.reduce((c,u,f)=>{let{paramName:h,isOptional:p}=u;if(h==="*"){let g=s[f]||"";a=o.slice(0,o.length-g.length).replace(/(.)\/+$/,"$1")}const y=s[f];return p&&!y?c[h]=void 0:c[h]=(y||"").replace(/%2F/g,"/"),c},{}),pathname:o,pathnameBase:a,pattern:t}}function Ape(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),AK(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,s,l)=>(r.push({paramName:s,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function Mpe(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return AK(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function E3(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function Ppe(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?s0(t):t;return{pathname:n?n.startsWith("/")?n:kpe(n,e):e,search:jpe(r),hash:Ipe(i)}}function kpe(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function EM(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Npe(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function _3(t,e){let n=Npe(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function T3(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=s0(t):(i=tb({},t),Ei(!i.pathname||!i.pathname.includes("?"),EM("?","pathname","search",i)),Ei(!i.pathname||!i.pathname.includes("#"),EM("#","pathname","hash",i)),Ei(!i.search||!i.search.includes("#"),EM("#","search","hash",i)));let o=t===""||i.pathname==="",a=o?"/":i.pathname,s;if(a==null)s=n;else{let f=e.length-1;if(!r&&a.startsWith("..")){let h=a.split("/");for(;h[0]==="..";)h.shift(),f-=1;i.pathname=h.join("/")}s=f>=0?e[f]:"/"}let l=Ppe(i,s),c=a&&a!=="/"&&a.endsWith("/"),u=(o||a===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const Lf=t=>t.join("/").replace(/\/\/+/g,"/"),Rpe=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),jpe=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Ipe=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Ope(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const kK=["post","put","patch","delete"];new Set(kK);const Lpe=["get",...kK];new Set(Lpe);/**
 * React Router v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function nb(){return nb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},nb.apply(this,arguments)}const C3=_.createContext(null),Dpe=_.createContext(null),rh=_.createContext(null),qC=_.createContext(null),iu=_.createContext({outlet:null,matches:[],isDataRoute:!1}),NK=_.createContext(null);function Fpe(t,e){let{relative:n}=e===void 0?{}:e;l0()||Ei(!1);let{basename:r,navigator:i}=_.useContext(rh),{hash:o,pathname:a,search:s}=jK(t,{relative:n}),l=a;return r!=="/"&&(l=a==="/"?r:Lf([r,a])),i.createHref({pathname:l,search:s,hash:o})}function l0(){return _.useContext(qC)!=null}function Wi(){return l0()||Ei(!1),_.useContext(qC).location}function RK(t){_.useContext(rh).static||_.useLayoutEffect(t)}function Za(){let{isDataRoute:t}=_.useContext(iu);return t?eme():zpe()}function zpe(){l0()||Ei(!1);let t=_.useContext(C3),{basename:e,future:n,navigator:r}=_.useContext(rh),{matches:i}=_.useContext(iu),{pathname:o}=Wi(),a=JSON.stringify(_3(i,n.v7_relativeSplatPath)),s=_.useRef(!1);return RK(()=>{s.current=!0}),_.useCallback(function(c,u){if(u===void 0&&(u={}),!s.current)return;if(typeof c=="number"){r.go(c);return}let f=T3(c,JSON.parse(a),o,u.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Lf([e,f.pathname])),(u.replace?r.replace:r.push)(f,u.state,u)},[e,r,a,o,t])}const Upe=_.createContext(null);function Bpe(t){let e=_.useContext(iu).outlet;return e&&_.createElement(Upe.Provider,{value:t},e)}function $pe(){let{matches:t}=_.useContext(iu),e=t[t.length-1];return e?e.params:{}}function jK(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=_.useContext(rh),{matches:i}=_.useContext(iu),{pathname:o}=Wi(),a=JSON.stringify(_3(i,r.v7_relativeSplatPath));return _.useMemo(()=>T3(t,JSON.parse(a),o,n==="path"),[t,a,o,n])}function Hpe(t,e){return Vpe(t,e)}function Vpe(t,e,n,r){l0()||Ei(!1);let{navigator:i}=_.useContext(rh),{matches:o}=_.useContext(iu),a=o[o.length-1],s=a?a.params:{};a&&a.pathname;let l=a?a.pathnameBase:"/";a&&a.route;let c=Wi(),u;if(e){var f;let v=typeof e=="string"?s0(e):e;l==="/"||(f=v.pathname)!=null&&f.startsWith(l)||Ei(!1),u=v}else u=c;let h=u.pathname||"/",p=h;if(l!=="/"){let v=l.replace(/^\//,"").split("/");p="/"+h.replace(/^\//,"").split("/").slice(v.length).join("/")}let y=ppe(t,{pathname:p}),g=Xpe(y&&y.map(v=>Object.assign({},v,{params:Object.assign({},s,v.params),pathname:Lf([l,i.encodeLocation?i.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?l:Lf([l,i.encodeLocation?i.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),o,n,r);return e&&g?_.createElement(qC.Provider,{value:{location:nb({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Nf.Pop}},g):g}function Wpe(){let t=Qpe(),e=Ope(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return _.createElement(_.Fragment,null,_.createElement("h2",null,"Unexpected Application Error!"),_.createElement("h3",{style:{fontStyle:"italic"}},e),n?_.createElement("pre",{style:i},n):null,null)}const Gpe=_.createElement(Wpe,null);class qpe extends _.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?_.createElement(iu.Provider,{value:this.props.routeContext},_.createElement(NK.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Ype(t){let{routeContext:e,match:n,children:r}=t,i=_.useContext(C3);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),_.createElement(iu.Provider,{value:e},r)}function Xpe(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var o;if(!n)return null;if(n.errors)t=n.matches;else if((o=r)!=null&&o.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,s=(i=n)==null?void 0:i.errors;if(s!=null){let u=a.findIndex(f=>f.route.id&&(s==null?void 0:s[f.route.id])!==void 0);u>=0||Ei(!1),a=a.slice(0,Math.min(a.length,u+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<a.length;u++){let f=a[u];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=u),f.route.id){let{loaderData:h,errors:p}=n,y=f.route.loader&&h[f.route.id]===void 0&&(!p||p[f.route.id]===void 0);if(f.route.lazy||y){l=!0,c>=0?a=a.slice(0,c+1):a=[a[0]];break}}}return a.reduceRight((u,f,h)=>{let p,y=!1,g=null,v=null;n&&(p=s&&f.route.id?s[f.route.id]:void 0,g=f.route.errorElement||Gpe,l&&(c<0&&h===0?(tme("route-fallback"),y=!0,v=null):c===h&&(y=!0,v=f.route.hydrateFallbackElement||null)));let b=e.concat(a.slice(0,h+1)),w=()=>{let T;return p?T=g:y?T=v:f.route.Component?T=_.createElement(f.route.Component,null):f.route.element?T=f.route.element:T=u,_.createElement(Ype,{match:f,routeContext:{outlet:u,matches:b,isDataRoute:n!=null},children:T})};return n&&(f.route.ErrorBoundary||f.route.errorElement||h===0)?_.createElement(qpe,{location:n.location,revalidation:n.revalidation,component:g,error:p,children:w(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):w()},null)}var IK=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(IK||{}),OK=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(OK||{});function Kpe(t){let e=_.useContext(C3);return e||Ei(!1),e}function Jpe(t){let e=_.useContext(Dpe);return e||Ei(!1),e}function Zpe(t){let e=_.useContext(iu);return e||Ei(!1),e}function LK(t){let e=Zpe(),n=e.matches[e.matches.length-1];return n.route.id||Ei(!1),n.route.id}function Qpe(){var t;let e=_.useContext(NK),n=Jpe(),r=LK();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function eme(){let{router:t}=Kpe(IK.UseNavigateStable),e=LK(OK.UseNavigateStable),n=_.useRef(!1);return RK(()=>{n.current=!0}),_.useCallback(function(i,o){o===void 0&&(o={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,nb({fromRouteId:e},o)))},[t,e])}const oB={};function tme(t,e,n){oB[t]||(oB[t]=!0)}function ws(t){let{to:e,replace:n,state:r,relative:i}=t;l0()||Ei(!1);let{future:o,static:a}=_.useContext(rh),{matches:s}=_.useContext(iu),{pathname:l}=Wi(),c=Za(),u=T3(e,_3(s,o.v7_relativeSplatPath),l,i==="path"),f=JSON.stringify(u);return _.useEffect(()=>c(JSON.parse(f),{replace:n,state:r,relative:i}),[c,f,i,n,r]),null}function DK(t){return Bpe(t.context)}function pr(t){Ei(!1)}function nme(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Nf.Pop,navigator:o,static:a=!1,future:s}=t;l0()&&Ei(!1);let l=e.replace(/^\/*/,"/"),c=_.useMemo(()=>({basename:l,navigator:o,static:a,future:nb({v7_relativeSplatPath:!1},s)}),[l,s,o,a]);typeof r=="string"&&(r=s0(r));let{pathname:u="/",search:f="",hash:h="",state:p=null,key:y="default"}=r,g=_.useMemo(()=>{let v=E3(u,l);return v==null?null:{location:{pathname:v,search:f,hash:h,state:p,key:y},navigationType:i}},[l,u,f,h,p,y,i]);return g==null?null:_.createElement(rh.Provider,{value:c},_.createElement(qC.Provider,{children:n,value:g}))}function rme(t){let{children:e,location:n}=t;return Hpe(BI(e),n)}new Promise(()=>{});function BI(t,e){e===void 0&&(e=[]);let n=[];return _.Children.forEach(t,(r,i)=>{if(!_.isValidElement(r))return;let o=[...e,i];if(r.type===_.Fragment){n.push.apply(n,BI(r.props.children,o));return}r.type!==pr&&Ei(!1),!r.props.index||!r.props.children||Ei(!1);let a={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=BI(r.props.children,o)),n.push(a)}),n}/**
 * React Router DOM v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $I(){return $I=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$I.apply(this,arguments)}function ime(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function ome(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function ame(t,e){return t.button===0&&(!e||e==="_self")&&!ome(t)}function HI(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function sme(t,e){let n=HI(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(o=>{n.append(i,o)})}),n}const lme=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],cme="6";try{window.__reactRouterVersion=cme}catch{}const ume="startTransition",aB=_K[ume];function dme(t){let{basename:e,children:n,future:r,window:i}=t,o=_.useRef();o.current==null&&(o.current=dpe({window:i,v5Compat:!0}));let a=o.current,[s,l]=_.useState({action:a.action,location:a.location}),{v7_startTransition:c}=r||{},u=_.useCallback(f=>{c&&aB?aB(()=>l(f)):l(f)},[l,c]);return _.useLayoutEffect(()=>a.listen(u),[a,u]),_.createElement(nme,{basename:e,children:n,location:s.location,navigationType:s.action,navigator:a,future:r})}const fme=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",hme=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,li=_.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:o,replace:a,state:s,target:l,to:c,preventScrollReset:u,viewTransition:f}=e,h=ime(e,lme),{basename:p}=_.useContext(rh),y,g=!1;if(typeof c=="string"&&hme.test(c)&&(y=c,fme))try{let T=new URL(window.location.href),C=c.startsWith("//")?new URL(T.protocol+c):new URL(c),P=E3(C.pathname,p);C.origin===T.origin&&P!=null?c=P+C.search+C.hash:g=!0}catch{}let v=Fpe(c,{relative:i}),b=pme(c,{replace:a,state:s,target:l,preventScrollReset:u,relative:i,viewTransition:f});function w(T){r&&r(T),T.defaultPrevented||b(T)}return _.createElement("a",$I({},h,{href:y||v,onClick:g||o?r:w,ref:n,target:l}))});var sB;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(sB||(sB={}));var lB;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(lB||(lB={}));function pme(t,e){let{target:n,replace:r,state:i,preventScrollReset:o,relative:a,viewTransition:s}=e===void 0?{}:e,l=Za(),c=Wi(),u=jK(t,{relative:a});return _.useCallback(f=>{if(ame(f,n)){f.preventDefault();let h=r!==void 0?r:fT(c)===fT(u);l(t,{replace:h,state:i,preventScrollReset:o,relative:a,viewTransition:s})}},[c,l,u,r,i,n,t,o,a,s])}function mme(t){let e=_.useRef(HI(t)),n=_.useRef(!1),r=Wi(),i=_.useMemo(()=>sme(r.search,n.current?null:e.current),[r.search]),o=Za(),a=_.useCallback((s,l)=>{const c=HI(typeof s=="function"?s(i):s);n.current=!0,o("?"+c,l)},[o,i]);return[i,a]}const gme="modulepreload",yme=function(t){return"/"+t},cB={},cd=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){let a=function(c){return Promise.all(c.map(u=>Promise.resolve(u).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),l=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));i=a(n.map(c=>{if(c=yme(c),c in cB)return;cB[c]=!0;const u=c.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${f}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":gme,u||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),u)return new Promise((p,y)=>{h.addEventListener("load",p),h.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${c}`)))})}))}function o(a){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=a,window.dispatchEvent(s),!s.defaultPrevented)throw a}return i.then(a=>{for(const s of a||[])s.status==="rejected"&&o(s.reason);return e().catch(o)})},vme=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>cd(async()=>{const{default:r}=await Promise.resolve().then(()=>c0);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class A3 extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class xme extends A3{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class wme extends A3{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class bme extends A3{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var VI;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(VI||(VI={}));var Sme=function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function s(u){try{c(r.next(u))}catch(f){a(f)}}function l(u){try{c(r.throw(u))}catch(f){a(f)}}function c(u){u.done?o(u.value):i(u.value).then(s,l)}c((r=r.apply(t,e||[])).next())})};class Eme{constructor(e,{headers:n={},customFetch:r,region:i=VI.Any}={}){this.url=e,this.headers=n,this.region=i,this.fetch=vme(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return Sme(this,void 0,void 0,function*(){try{const{headers:i,method:o,body:a}=n;let s={},{region:l}=n;l||(l=this.region),l&&l!=="any"&&(s["x-region"]=l);let c;a&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(s["Content-Type"]="application/octet-stream",c=a):typeof a=="string"?(s["Content-Type"]="text/plain",c=a):typeof FormData<"u"&&a instanceof FormData?c=a:(s["Content-Type"]="application/json",c=JSON.stringify(a)));const u=yield this.fetch(`${this.url}/${e}`,{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},s),this.headers),i),body:c}).catch(y=>{throw new xme(y)}),f=u.headers.get("x-relay-error");if(f&&f==="true")throw new wme(u);if(!u.ok)throw new bme(u);let h=((r=u.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),p;return h==="application/json"?p=yield u.json():h==="application/octet-stream"?p=yield u.blob():h==="text/event-stream"?p=u:h==="multipart/form-data"?p=yield u.formData():p=yield u.text(),{data:p,error:null}}catch(i){return{data:null,error:i}}})}}var go={},Ng={},Rg={},jg={},Ig={},Og={},_me=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},cv=_me();const Tme=cv.fetch,FK=cv.fetch.bind(cv),zK=cv.Headers,Cme=cv.Request,Ame=cv.Response,c0=Object.freeze(Object.defineProperty({__proto__:null,Headers:zK,Request:Cme,Response:Ame,default:FK,fetch:Tme},Symbol.toStringTag,{value:"Module"})),Mme=tpe(c0);var pE={},uB;function UK(){if(uB)return pE;uB=1,Object.defineProperty(pE,"__esModule",{value:!0});class t extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return pE.default=t,pE}var dB;function BK(){if(dB)return Og;dB=1;var t=Og&&Og.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Og,"__esModule",{value:!0});const e=t(Mme),n=t(UK());class r{constructor(o){this.shouldThrowOnError=!1,this.method=o.method,this.url=o.url,this.headers=o.headers,this.schema=o.schema,this.body=o.body,this.shouldThrowOnError=o.shouldThrowOnError,this.signal=o.signal,this.isMaybeSingle=o.isMaybeSingle,o.fetch?this.fetch=o.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(o,a){return this.headers=Object.assign({},this.headers),this.headers[o]=a,this}then(o,a){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const s=this.fetch;let l=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{var u,f,h;let p=null,y=null,g=null,v=c.status,b=c.statusText;if(c.ok){if(this.method!=="HEAD"){const P=await c.text();P===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?y=P:y=JSON.parse(P))}const T=(u=this.headers.Prefer)===null||u===void 0?void 0:u.match(/count=(exact|planned|estimated)/),C=(f=c.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");T&&C&&C.length>1&&(g=parseInt(C[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(y)&&(y.length>1?(p={code:"PGRST116",details:`Results contain ${y.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},y=null,g=null,v=406,b="Not Acceptable"):y.length===1?y=y[0]:y=null)}else{const T=await c.text();try{p=JSON.parse(T),Array.isArray(p)&&c.status===404&&(y=[],p=null,v=200,b="OK")}catch{c.status===404&&T===""?(v=204,b="No Content"):p={message:T}}if(p&&this.isMaybeSingle&&(!((h=p==null?void 0:p.details)===null||h===void 0)&&h.includes("0 rows"))&&(p=null,v=200,b="OK"),p&&this.shouldThrowOnError)throw new n.default(p)}return{error:p,data:y,count:g,status:v,statusText:b}});return this.shouldThrowOnError||(l=l.catch(c=>{var u,f,h;return{error:{message:`${(u=c==null?void 0:c.name)!==null&&u!==void 0?u:"FetchError"}: ${c==null?void 0:c.message}`,details:`${(f=c==null?void 0:c.stack)!==null&&f!==void 0?f:""}`,hint:"",code:`${(h=c==null?void 0:c.code)!==null&&h!==void 0?h:""}`},data:null,count:null,status:0,statusText:""}})),l.then(o,a)}returns(){return this}overrideTypes(){return this}}return Og.default=r,Og}var fB;function $K(){if(fB)return Ig;fB=1;var t=Ig&&Ig.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ig,"__esModule",{value:!0});const e=t(BK());class n extends e.default{select(i){let o=!1;const a=(i??"*").split("").map(s=>/\s/.test(s)&&!o?"":(s==='"'&&(o=!o),s)).join("");return this.url.searchParams.set("select",a),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(i,{ascending:o=!0,nullsFirst:a,foreignTable:s,referencedTable:l=s}={}){const c=l?`${l}.order`:"order",u=this.url.searchParams.get(c);return this.url.searchParams.set(c,`${u?`${u},`:""}${i}.${o?"asc":"desc"}${a===void 0?"":a?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:o,referencedTable:a=o}={}){const s=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(s,`${i}`),this}range(i,o,{foreignTable:a,referencedTable:s=a}={}){const l=typeof s>"u"?"offset":`${s}.offset`,c=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(l,`${i}`),this.url.searchParams.set(c,`${o-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:i=!1,verbose:o=!1,settings:a=!1,buffers:s=!1,wal:l=!1,format:c="text"}={}){var u;const f=[i?"analyze":null,o?"verbose":null,a?"settings":null,s?"buffers":null,l?"wal":null].filter(Boolean).join("|"),h=(u=this.headers.Accept)!==null&&u!==void 0?u:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${c}; for="${h}"; options=${f};`,c==="json"?this:this}rollback(){var i;return((i=this.headers.Prefer)!==null&&i!==void 0?i:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return Ig.default=n,Ig}var hB;function M3(){if(hB)return jg;hB=1;var t=jg&&jg.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(jg,"__esModule",{value:!0});const e=t($K());class n extends e.default{eq(i,o){return this.url.searchParams.append(i,`eq.${o}`),this}neq(i,o){return this.url.searchParams.append(i,`neq.${o}`),this}gt(i,o){return this.url.searchParams.append(i,`gt.${o}`),this}gte(i,o){return this.url.searchParams.append(i,`gte.${o}`),this}lt(i,o){return this.url.searchParams.append(i,`lt.${o}`),this}lte(i,o){return this.url.searchParams.append(i,`lte.${o}`),this}like(i,o){return this.url.searchParams.append(i,`like.${o}`),this}likeAllOf(i,o){return this.url.searchParams.append(i,`like(all).{${o.join(",")}}`),this}likeAnyOf(i,o){return this.url.searchParams.append(i,`like(any).{${o.join(",")}}`),this}ilike(i,o){return this.url.searchParams.append(i,`ilike.${o}`),this}ilikeAllOf(i,o){return this.url.searchParams.append(i,`ilike(all).{${o.join(",")}}`),this}ilikeAnyOf(i,o){return this.url.searchParams.append(i,`ilike(any).{${o.join(",")}}`),this}is(i,o){return this.url.searchParams.append(i,`is.${o}`),this}in(i,o){const a=Array.from(new Set(o)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(i,`in.(${a})`),this}contains(i,o){return typeof o=="string"?this.url.searchParams.append(i,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(i,`cs.{${o.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(o)}`),this}containedBy(i,o){return typeof o=="string"?this.url.searchParams.append(i,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(i,`cd.{${o.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(o)}`),this}rangeGt(i,o){return this.url.searchParams.append(i,`sr.${o}`),this}rangeGte(i,o){return this.url.searchParams.append(i,`nxl.${o}`),this}rangeLt(i,o){return this.url.searchParams.append(i,`sl.${o}`),this}rangeLte(i,o){return this.url.searchParams.append(i,`nxr.${o}`),this}rangeAdjacent(i,o){return this.url.searchParams.append(i,`adj.${o}`),this}overlaps(i,o){return typeof o=="string"?this.url.searchParams.append(i,`ov.${o}`):this.url.searchParams.append(i,`ov.{${o.join(",")}}`),this}textSearch(i,o,{config:a,type:s}={}){let l="";s==="plain"?l="pl":s==="phrase"?l="ph":s==="websearch"&&(l="w");const c=a===void 0?"":`(${a})`;return this.url.searchParams.append(i,`${l}fts${c}.${o}`),this}match(i){return Object.entries(i).forEach(([o,a])=>{this.url.searchParams.append(o,`eq.${a}`)}),this}not(i,o,a){return this.url.searchParams.append(i,`not.${o}.${a}`),this}or(i,{foreignTable:o,referencedTable:a=o}={}){const s=a?`${a}.or`:"or";return this.url.searchParams.append(s,`(${i})`),this}filter(i,o,a){return this.url.searchParams.append(i,`${o}.${a}`),this}}return jg.default=n,jg}var pB;function HK(){if(pB)return Rg;pB=1;var t=Rg&&Rg.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Rg,"__esModule",{value:!0});const e=t(M3());class n{constructor(i,{headers:o={},schema:a,fetch:s}){this.url=i,this.headers=o,this.schema=a,this.fetch=s}select(i,{head:o=!1,count:a}={}){const s=o?"HEAD":"GET";let l=!1;const c=(i??"*").split("").map(u=>/\s/.test(u)&&!l?"":(u==='"'&&(l=!l),u)).join("");return this.url.searchParams.set("select",c),a&&(this.headers.Prefer=`count=${a}`),new e.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(i,{count:o,defaultToNull:a=!0}={}){const s="POST",l=[];if(this.headers.Prefer&&l.push(this.headers.Prefer),o&&l.push(`count=${o}`),a||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(i)){const c=i.reduce((u,f)=>u.concat(Object.keys(f)),[]);if(c.length>0){const u=[...new Set(c)].map(f=>`"${f}"`);this.url.searchParams.set("columns",u.join(","))}}return new e.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}upsert(i,{onConflict:o,ignoreDuplicates:a=!1,count:s,defaultToNull:l=!0}={}){const c="POST",u=[`resolution=${a?"ignore":"merge"}-duplicates`];if(o!==void 0&&this.url.searchParams.set("on_conflict",o),this.headers.Prefer&&u.push(this.headers.Prefer),s&&u.push(`count=${s}`),l||u.push("missing=default"),this.headers.Prefer=u.join(","),Array.isArray(i)){const f=i.reduce((h,p)=>h.concat(Object.keys(p)),[]);if(f.length>0){const h=[...new Set(f)].map(p=>`"${p}"`);this.url.searchParams.set("columns",h.join(","))}}return new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}update(i,{count:o}={}){const a="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),o&&s.push(`count=${o}`),this.headers.Prefer=s.join(","),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}delete({count:i}={}){const o="DELETE",a=[];return i&&a.push(`count=${i}`),this.headers.Prefer&&a.unshift(this.headers.Prefer),this.headers.Prefer=a.join(","),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return Rg.default=n,Rg}var Ux={},Bx={},mB;function Pme(){return mB||(mB=1,Object.defineProperty(Bx,"__esModule",{value:!0}),Bx.version=void 0,Bx.version="0.0.0-automated"),Bx}var gB;function kme(){if(gB)return Ux;gB=1,Object.defineProperty(Ux,"__esModule",{value:!0}),Ux.DEFAULT_HEADERS=void 0;const t=Pme();return Ux.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${t.version}`},Ux}var yB;function Nme(){if(yB)return Ng;yB=1;var t=Ng&&Ng.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Ng,"__esModule",{value:!0});const e=t(HK()),n=t(M3()),r=kme();class i{constructor(a,{headers:s={},schema:l,fetch:c}={}){this.url=a,this.headers=Object.assign(Object.assign({},r.DEFAULT_HEADERS),s),this.schemaName=l,this.fetch=c}from(a){const s=new URL(`${this.url}/${a}`);return new e.default(s,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(a){return new i(this.url,{headers:this.headers,schema:a,fetch:this.fetch})}rpc(a,s={},{head:l=!1,get:c=!1,count:u}={}){let f;const h=new URL(`${this.url}/rpc/${a}`);let p;l||c?(f=l?"HEAD":"GET",Object.entries(s).filter(([g,v])=>v!==void 0).map(([g,v])=>[g,Array.isArray(v)?`{${v.join(",")}}`:`${v}`]).forEach(([g,v])=>{h.searchParams.append(g,v)})):(f="POST",p=s);const y=Object.assign({},this.headers);return u&&(y.Prefer=`count=${u}`),new n.default({method:f,url:h,headers:y,schema:this.schemaName,body:p,fetch:this.fetch,allowEmpty:!1})}}return Ng.default=i,Ng}var vB;function Rme(){if(vB)return go;vB=1;var t=go&&go.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(go,"__esModule",{value:!0}),go.PostgrestError=go.PostgrestBuilder=go.PostgrestTransformBuilder=go.PostgrestFilterBuilder=go.PostgrestQueryBuilder=go.PostgrestClient=void 0;const e=t(Nme());go.PostgrestClient=e.default;const n=t(HK());go.PostgrestQueryBuilder=n.default;const r=t(M3());go.PostgrestFilterBuilder=r.default;const i=t($K());go.PostgrestTransformBuilder=i.default;const o=t(BK());go.PostgrestBuilder=o.default;const a=t(UK());return go.PostgrestError=a.default,go.default={PostgrestClient:e.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:i.default,PostgrestBuilder:o.default,PostgrestError:a.default},go}var jme=Rme();const Ime=$n(jme),{PostgrestClient:Ome,PostgrestQueryBuilder:uot,PostgrestFilterBuilder:dot,PostgrestTransformBuilder:fot,PostgrestBuilder:hot,PostgrestError:pot}=Ime,Lme="2.11.2",Dme={"X-Client-Info":`realtime-js/${Lme}`},Fme="1.0.0",VK=1e4,zme=1e3;var Hy;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Hy||(Hy={}));var bs;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(bs||(bs={}));var Wl;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Wl||(Wl={}));var WI;(function(t){t.websocket="websocket"})(WI||(WI={}));var vp;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(vp||(vp={}));class Ume{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const i=n.getUint8(1),o=n.getUint8(2);let a=this.HEADER_LENGTH+2;const s=r.decode(e.slice(a,a+i));a=a+i;const l=r.decode(e.slice(a,a+o));a=a+o;const c=JSON.parse(r.decode(e.slice(a,e.byteLength)));return{ref:null,topic:s,event:l,payload:c}}}class WK{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var br;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(br||(br={}));const xB=(t,e,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((o,a)=>(o[a]=Bme(a,t,e,i),o),{})},Bme=(t,e,n,r)=>{const i=e.find(s=>s.name===t),o=i==null?void 0:i.type,a=n[t];return o&&!r.includes(o)?GK(o,a):GI(a)},GK=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return Wme(e,n)}switch(t){case br.bool:return $me(e);case br.float4:case br.float8:case br.int2:case br.int4:case br.int8:case br.numeric:case br.oid:return Hme(e);case br.json:case br.jsonb:return Vme(e);case br.timestamp:return Gme(e);case br.abstime:case br.date:case br.daterange:case br.int4range:case br.int8range:case br.money:case br.reltime:case br.text:case br.time:case br.timestamptz:case br.timetz:case br.tsrange:case br.tstzrange:return GI(e);default:return GI(e)}},GI=t=>t,$me=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},Hme=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},Vme=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},Wme=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let o;const a=t.slice(1,n);try{o=JSON.parse("["+a+"]")}catch{o=a?a.split(","):[]}return o.map(s=>GK(e,s))}return t},Gme=t=>typeof t=="string"?t.replace(" ","T"):t,qK=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class _M{constructor(e,n,r={},i=VK){this.channel=e,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var wB;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(wB||(wB={}));class kw{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:o,onLeave:a,onSync:s}=this.caller;this.joinRef=this.channel._joinRef(),this.state=kw.syncState(this.state,i,o,a),this.pendingDiffs.forEach(l=>{this.state=kw.syncDiff(this.state,l,o,a)}),this.pendingDiffs=[],s()}),this.channel._on(r.diff,{},i=>{const{onJoin:o,onLeave:a,onSync:s}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=kw.syncDiff(this.state,i,o,a),s())}),this.onJoin((i,o,a)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:o,newPresences:a})}),this.onLeave((i,o,a)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:o,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,i){const o=this.cloneDeep(e),a=this.transformState(n),s={},l={};return this.map(o,(c,u)=>{a[c]||(l[c]=u)}),this.map(a,(c,u)=>{const f=o[c];if(f){const h=u.map(v=>v.presence_ref),p=f.map(v=>v.presence_ref),y=u.filter(v=>p.indexOf(v.presence_ref)<0),g=f.filter(v=>h.indexOf(v.presence_ref)<0);y.length>0&&(s[c]=y),g.length>0&&(l[c]=g)}else s[c]=u}),this.syncDiff(o,{joins:s,leaves:l},r,i)}static syncDiff(e,n,r,i){const{joins:o,leaves:a}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(o,(s,l)=>{var c;const u=(c=e[s])!==null&&c!==void 0?c:[];if(e[s]=this.cloneDeep(l),u.length>0){const f=e[s].map(p=>p.presence_ref),h=u.filter(p=>f.indexOf(p.presence_ref)<0);e[s].unshift(...h)}r(s,u,l)}),this.map(a,(s,l)=>{let c=e[s];if(!c)return;const u=l.map(f=>f.presence_ref);c=c.filter(f=>u.indexOf(f.presence_ref)<0),e[s]=c,i(s,c,l),c.length===0&&delete e[s]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const i=e[r];return"metas"in i?n[r]=i.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):n[r]=i,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var bB;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(bB||(bB={}));var SB;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(SB||(SB={}));var qu;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(qu||(qu={}));class P3{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=bs.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new _M(this,Wl.join,this.params,this.timeout),this.rejoinTimer=new WK(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=bs.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=bs.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=bs.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=bs.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Wl.reply,{},(i,o)=>{this._trigger(this._replyEventName(o),i)}),this.presence=new kw(this),this.broadcastEndpointURL=qK(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,i;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:o,presence:a,private:s}}=this.params;this._onError(u=>e==null?void 0:e(qu.CHANNEL_ERROR,u)),this._onClose(()=>e==null?void 0:e(qu.CLOSED));const l={},c={broadcast:o,presence:a,postgres_changes:(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(u=>u.filter))!==null&&i!==void 0?i:[],private:s};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:c},l)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:u})=>{var f;if(this.socket.setAuth(),u===void 0){e==null||e(qu.SUBSCRIBED);return}else{const h=this.bindings.postgres_changes,p=(f=h==null?void 0:h.length)!==null&&f!==void 0?f:0,y=[];for(let g=0;g<p;g++){const v=h[g],{filter:{event:b,schema:w,table:T,filter:C}}=v,P=u&&u[g];if(P&&P.event===b&&P.schema===w&&P.table===T&&P.filter===C)y.push(Object.assign(Object.assign({},v),{id:P.id}));else{this.unsubscribe(),e==null||e(qu.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,e&&e(qu.SUBSCRIBED);return}}).receive("error",u=>{e==null||e(qu.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(qu.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this._on(e,n,r)}async send(e,n={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){const{event:o,payload:a}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:a,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=c.body)===null||i===void 0?void 0:i.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var a,s,l;const c=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(s=(a=this.params)===null||a===void 0?void 0:a.config)===null||s===void 0?void 0:s.broadcast)===null||l===void 0)&&l.ack)&&o("ok"),c.receive("ok",()=>o("ok")),c.receive("error",()=>o("error")),c.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=bs.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Wl.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const i=new _M(this,Wl.leave,{},e);i.receive("ok",()=>{n(),r("ok")}).receive("timeout",()=>{n(),r("timed out")}).receive("error",()=>{r("error")}),i.send(),this._canPush()||i.trigger("ok",{})})}async _fetchWithTimeout(e,n,r){const i=new AbortController,o=setTimeout(()=>i.abort(),r),a=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(o),a}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new _M(this,e,n,r);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var i,o;const a=e.toLocaleLowerCase(),{close:s,error:l,leave:c,join:u}=Wl;if(r&&[s,l,c,u].indexOf(a)>=0&&r!==this._joinRef())return;let h=this._onMessage(a,n,r);if(n&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(p=>{var y,g,v;return((y=p.filter)===null||y===void 0?void 0:y.event)==="*"||((v=(g=p.filter)===null||g===void 0?void 0:g.event)===null||v===void 0?void 0:v.toLocaleLowerCase())===a}).map(p=>p.callback(h,r)):(o=this.bindings[a])===null||o===void 0||o.filter(p=>{var y,g,v,b,w,T;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in p){const C=p.id,P=(y=p.filter)===null||y===void 0?void 0:y.event;return C&&((g=n.ids)===null||g===void 0?void 0:g.includes(C))&&(P==="*"||(P==null?void 0:P.toLocaleLowerCase())===((v=n.data)===null||v===void 0?void 0:v.type.toLocaleLowerCase()))}else{const C=(w=(b=p==null?void 0:p.filter)===null||b===void 0?void 0:b.event)===null||w===void 0?void 0:w.toLocaleLowerCase();return C==="*"||C===((T=n==null?void 0:n.event)===null||T===void 0?void 0:T.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===a}).map(p=>{if(typeof h=="object"&&"ids"in h){const y=h.data,{schema:g,table:v,commit_timestamp:b,type:w,errors:T}=y;h=Object.assign(Object.assign({},{schema:g,table:v,commit_timestamp:b,eventType:w,new:{},old:{},errors:T}),this._getPayloadRecords(y))}p.callback(h,r)})}_isClosed(){return this.state===bs.closed}_isJoined(){return this.state===bs.joined}_isJoining(){return this.state===bs.joining}_isLeaving(){return this.state===bs.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const i=e.toLocaleLowerCase(),o={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(o):this.bindings[i]=[o],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(i=>{var o;return!(((o=i.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&P3.isEqual(i.filter,n))}),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Wl.close,{},e)}_onError(e){this._on(Wl.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=bs.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=xB(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=xB(e.columns,e.old_record)),n}}const qme=()=>{},Yme=typeof WebSocket<"u",Xme=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Kme{constructor(e,n){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=Dme,this.params={},this.timeout=VK,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=qme,this.conn=null,this.sendBuffer=[],this.serializer=new Ume,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=o=>{let a;return o?a=o:typeof fetch>"u"?a=(...s)=>cd(async()=>{const{default:l}=await Promise.resolve().then(()=>c0);return{default:l}},void 0).then(({default:l})=>l(...s)):a=fetch,(...s)=>a(...s)},this.endPoint=`${e}/${WI.websocket}`,this.httpEndpoint=qK(e),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.headers&&(this.headers=Object.assign(Object.assign({},this.headers),n.headers)),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const i=(r=n==null?void 0:n.params)===null||r===void 0?void 0:r.apikey;if(i&&(this.accessTokenValue=i,this.apiKey=i),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:o=>[1e3,2e3,5e3,1e4][o-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(o,a)=>a(JSON.stringify(o)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new WK(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}this.accessToken=(n==null?void 0:n.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(Yme){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new Jme(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),cd(async()=>{const{default:e}=await import("./browser-CW8NEg4b.js").then(n=>n.b);return{default:e}},[]).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Fme}))}disconnect(e,n){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Hy.connecting:return vp.Connecting;case Hy.open:return vp.Open;case Hy.closing:return vp.Closing;default:return vp.Closed}}isConnected(){return this.connectionState()===vp.Open}channel(e,n={config:{}}){const r=new P3(`realtime:${e}`,n,this);return this.channels.push(r),r}push(e){const{topic:n,event:r,payload:i,ref:o}=e,a=()=>{this.encode(e,s=>{var l;(l=this.conn)===null||l===void 0||l.send(s)})};this.log("push",`${n} ${r} (${o})`,i),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){let n=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(n){let r=null;try{r=JSON.parse(atob(n.split(".")[1]))}catch{}if(r&&r.exp&&!(Math.floor(Date.now()/1e3)-r.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`);this.accessTokenValue=n,this.channels.forEach(i=>{n&&i.updateJoinPayload({access_token:n}),i.joinedOnce&&i._isJoined()&&i._push(Wl.access_token,{access_token:n})})}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(zme,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,n=>{let{topic:r,event:i,payload:o,ref:a}=n;a&&a===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${o.status||""} ${r} ${i} ${a&&"("+a+")"||""}`,o),this.channels.filter(s=>s._isMember(r)).forEach(s=>s._trigger(i,o,a)),this.stateChangeCallbacks.message.forEach(s=>s(n))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Wl.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${e}${r}${i}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([Xme],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}}class Jme{constructor(e,n,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Hy.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}class k3 extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function vo(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class Zme extends k3{constructor(e,n){super(e),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class qI extends k3{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var Qme=function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function s(u){try{c(r.next(u))}catch(f){a(f)}}function l(u){try{c(r.throw(u))}catch(f){a(f)}}function c(u){u.done?o(u.value):i(u.value).then(s,l)}c((r=r.apply(t,e||[])).next())})};const YK=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>cd(async()=>{const{default:r}=await Promise.resolve().then(()=>c0);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},ege=()=>Qme(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield cd(()=>Promise.resolve().then(()=>c0),void 0)).Response:Response}),YI=t=>{if(Array.isArray(t))return t.map(n=>YI(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[i]=YI(r)}),e};var hm=function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function s(u){try{c(r.next(u))}catch(f){a(f)}}function l(u){try{c(r.throw(u))}catch(f){a(f)}}function c(u){u.done?o(u.value):i(u.value).then(s,l)}c((r=r.apply(t,e||[])).next())})};const TM=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),tge=(t,e,n)=>hm(void 0,void 0,void 0,function*(){const r=yield ege();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(i=>{e(new Zme(TM(i),t.status||500))}).catch(i=>{e(new qI(TM(i),i))}):e(new qI(TM(t),t))}),nge=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(i.body=JSON.stringify(r)),Object.assign(Object.assign({},i),n))};function x1(t,e,n,r,i,o){return hm(this,void 0,void 0,function*(){return new Promise((a,s)=>{t(n,nge(e,r,i,o)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>a(l)).catch(l=>tge(l,s,r))})})}function hT(t,e,n,r){return hm(this,void 0,void 0,function*(){return x1(t,"GET",e,n,r)})}function Cf(t,e,n,r,i){return hm(this,void 0,void 0,function*(){return x1(t,"POST",e,r,i,n)})}function rge(t,e,n,r,i){return hm(this,void 0,void 0,function*(){return x1(t,"PUT",e,r,i,n)})}function ige(t,e,n,r){return hm(this,void 0,void 0,function*(){return x1(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function XK(t,e,n,r,i){return hm(this,void 0,void 0,function*(){return x1(t,"DELETE",e,r,i,n)})}var Wa=function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function s(u){try{c(r.next(u))}catch(f){a(f)}}function l(u){try{c(r.throw(u))}catch(f){a(f)}}function c(u){u.done?o(u.value):i(u.value).then(s,l)}c((r=r.apply(t,e||[])).next())})};const oge={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},EB={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class age{constructor(e,n={},r,i){this.url=e,this.headers=n,this.bucketId=r,this.fetch=YK(i)}uploadOrUpdate(e,n,r,i){return Wa(this,void 0,void 0,function*(){try{let o;const a=Object.assign(Object.assign({},EB),i);let s=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const l=a.metadata;typeof Blob<"u"&&r instanceof Blob?(o=new FormData,o.append("cacheControl",a.cacheControl),l&&o.append("metadata",this.encodeMetadata(l)),o.append("",r)):typeof FormData<"u"&&r instanceof FormData?(o=r,o.append("cacheControl",a.cacheControl),l&&o.append("metadata",this.encodeMetadata(l))):(o=r,s["cache-control"]=`max-age=${a.cacheControl}`,s["content-type"]=a.contentType,l&&(s["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),i!=null&&i.headers&&(s=Object.assign(Object.assign({},s),i.headers));const c=this._removeEmptyFolders(n),u=this._getFinalPath(c),f=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:e,body:o,headers:s},a!=null&&a.duplex?{duplex:a.duplex}:{})),h=yield f.json();return f.ok?{data:{path:c,id:h.Id,fullPath:h.Key},error:null}:{data:null,error:h}}catch(o){if(vo(o))return{data:null,error:o};throw o}})}upload(e,n,r){return Wa(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,i){return Wa(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(e),a=this._getFinalPath(o),s=new URL(this.url+`/object/upload/sign/${a}`);s.searchParams.set("token",n);try{let l;const c=Object.assign({upsert:EB.upsert},i),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",c.cacheControl)):(l=r,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const f=yield this.fetch(s.toString(),{method:"PUT",body:l,headers:u}),h=yield f.json();return f.ok?{data:{path:o,fullPath:h.Key},error:null}:{data:null,error:h}}catch(l){if(vo(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,n){return Wa(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const i=Object.assign({},this.headers);n!=null&&n.upsert&&(i["x-upsert"]="true");const o=yield Cf(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),a=new URL(this.url+o.url),s=a.searchParams.get("token");if(!s)throw new k3("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:s},error:null}}catch(r){if(vo(r))return{data:null,error:r};throw r}})}update(e,n,r){return Wa(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return Wa(this,void 0,void 0,function*(){try{return{data:yield Cf(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(vo(i))return{data:null,error:i};throw i}})}copy(e,n,r){return Wa(this,void 0,void 0,function*(){try{return{data:{path:(yield Cf(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(vo(i))return{data:null,error:i};throw i}})}createSignedUrl(e,n,r){return Wa(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),o=yield Cf(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${a}`)},{data:o,error:null}}catch(i){if(vo(i))return{data:null,error:i};throw i}})}createSignedUrls(e,n,r){return Wa(this,void 0,void 0,function*(){try{const i=yield Cf(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${o}`):null})),error:null}}catch(i){if(vo(i))return{data:null,error:i};throw i}})}download(e,n){return Wa(this,void 0,void 0,function*(){const i=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),a=o?`?${o}`:"";try{const s=this._getFinalPath(e);return{data:yield(yield hT(this.fetch,`${this.url}/${i}/${s}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(s){if(vo(s))return{data:null,error:s};throw s}})}info(e){return Wa(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield hT(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:YI(r),error:null}}catch(r){if(vo(r))return{data:null,error:r};throw r}})}exists(e){return Wa(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield ige(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(vo(r)&&r instanceof qI){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),i=[],o=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";o!==""&&i.push(o);const s=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});l!==""&&i.push(l);let c=i.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${s}/public/${r}${c}`)}}}remove(e){return Wa(this,void 0,void 0,function*(){try{return{data:yield XK(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(vo(n))return{data:null,error:n};throw n}})}list(e,n,r){return Wa(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},oge),n),{prefix:e||""});return{data:yield Cf(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(vo(i))return{data:null,error:i};throw i}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const sge="2.7.1",lge={"X-Client-Info":`storage-js/${sge}`};var Lg=function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function s(u){try{c(r.next(u))}catch(f){a(f)}}function l(u){try{c(r.throw(u))}catch(f){a(f)}}function c(u){u.done?o(u.value):i(u.value).then(s,l)}c((r=r.apply(t,e||[])).next())})};class cge{constructor(e,n={},r){this.url=e,this.headers=Object.assign(Object.assign({},lge),n),this.fetch=YK(r)}listBuckets(){return Lg(this,void 0,void 0,function*(){try{return{data:yield hT(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(vo(e))return{data:null,error:e};throw e}})}getBucket(e){return Lg(this,void 0,void 0,function*(){try{return{data:yield hT(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(vo(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return Lg(this,void 0,void 0,function*(){try{return{data:yield Cf(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(vo(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return Lg(this,void 0,void 0,function*(){try{return{data:yield rge(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(vo(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Lg(this,void 0,void 0,function*(){try{return{data:yield Cf(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(vo(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Lg(this,void 0,void 0,function*(){try{return{data:yield XK(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(vo(n))return{data:null,error:n};throw n}})}}class uge extends cge{constructor(e,n={},r){super(e,n,r)}from(e){return new age(this.url,this.headers,e,this.fetch)}}const dge="2.49.1";let xw="";typeof Deno<"u"?xw="deno":typeof document<"u"?xw="web":typeof navigator<"u"&&navigator.product==="ReactNative"?xw="react-native":xw="node";const fge={"X-Client-Info":`supabase-js-${xw}/${dge}`},hge={headers:fge},pge={schema:"public"},mge={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},gge={};var yge=function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function s(u){try{c(r.next(u))}catch(f){a(f)}}function l(u){try{c(r.throw(u))}catch(f){a(f)}}function c(u){u.done?o(u.value):i(u.value).then(s,l)}c((r=r.apply(t,e||[])).next())})};const vge=t=>{let e;return t?e=t:typeof fetch>"u"?e=FK:e=fetch,(...n)=>e(...n)},xge=()=>typeof Headers>"u"?zK:Headers,wge=(t,e,n)=>{const r=vge(n),i=xge();return(o,a)=>yge(void 0,void 0,void 0,function*(){var s;const l=(s=yield e())!==null&&s!==void 0?s:t;let c=new i(a==null?void 0:a.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),r(o,Object.assign(Object.assign({},a),{headers:c}))})};var bge=function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function s(u){try{c(r.next(u))}catch(f){a(f)}}function l(u){try{c(r.throw(u))}catch(f){a(f)}}function c(u){u.done?o(u.value):i(u.value).then(s,l)}c((r=r.apply(t,e||[])).next())})};function Sge(t){return t.replace(/\/$/,"")}function Ege(t,e){const{db:n,auth:r,realtime:i,global:o}=t,{db:a,auth:s,realtime:l,global:c}=e,u={db:Object.assign(Object.assign({},a),n),auth:Object.assign(Object.assign({},s),r),realtime:Object.assign(Object.assign({},l),i),global:Object.assign(Object.assign({},c),o),accessToken:()=>bge(this,void 0,void 0,function*(){return""})};return t.accessToken?u.accessToken=t.accessToken:delete u.accessToken,u}const KK="2.68.0",by=30*1e3,XI=3,CM=XI*by,_ge="http://localhost:9999",Tge="supabase.auth.token",Cge={"X-Client-Info":`gotrue-js/${KK}`},KI="X-Supabase-Api-Version",JK={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function Age(t){return Math.round(Date.now()/1e3)+t}function Mge(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const jc=()=>typeof window<"u"&&typeof document<"u",Qh={tested:!1,writable:!1},Nw=()=>{if(!jc())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Qh.tested)return Qh.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Qh.tested=!0,Qh.writable=!0}catch{Qh.tested=!0,Qh.writable=!1}return Qh.writable};function Pge(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,o)=>{e[o]=i})}catch{}return n.searchParams.forEach((r,i)=>{e[i]=r}),e}const ZK=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>cd(async()=>{const{default:r}=await Promise.resolve().then(()=>c0);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},kge=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",QK=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},mE=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},gE=async(t,e)=>{await t.removeItem(e)};function Nge(t){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let n="",r,i,o,a,s,l,c,u=0;for(t=t.replace("-","+").replace("_","/");u<t.length;)a=e.indexOf(t.charAt(u++)),s=e.indexOf(t.charAt(u++)),l=e.indexOf(t.charAt(u++)),c=e.indexOf(t.charAt(u++)),r=a<<2|s>>4,i=(s&15)<<4|l>>2,o=(l&3)<<6|c,n=n+String.fromCharCode(r),l!=64&&i!=0&&(n=n+String.fromCharCode(i)),c!=64&&o!=0&&(n=n+String.fromCharCode(o));return n}class YC{constructor(){this.promise=new YC.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}YC.promiseConstructor=Promise;function _B(t){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,n=t.split(".");if(n.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(n[1]))throw new Error("JWT is not valid: payload is not in base64url format");const r=n[1];return JSON.parse(Nge(r))}async function Rge(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function jge(t,e){return new Promise((r,i)=>{(async()=>{for(let o=0;o<1/0;o++)try{const a=await t(o);if(!e(o,null,a)){r(a);return}}catch(a){if(!e(o,a)){i(a);return}}})()})}function Ige(t){return("0"+t.toString(16)).substr(-2)}function Oge(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let o=0;o<56;o++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,Ige).join("")}async function Lge(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(o=>String.fromCharCode(o)).join("")}function Dge(t){return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Fge(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await Lge(t);return Dge(n)}async function Dg(t,e,n=!1){const r=Oge();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await QK(t,`${e}-code-verifier`,i);const o=await Fge(r);return[o,r===o?"plain":"s256"]}const zge=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Uge(t){const e=t.headers.get(KI);if(!e||!e.match(zge))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}class N3 extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Sn(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class Bge extends N3{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function $ge(t){return Sn(t)&&t.name==="AuthApiError"}class eJ extends N3{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class pm extends N3{constructor(e,n,r,i){super(e,r,i),this.name=n,this.status=r}}class Sf extends pm{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Hge(t){return Sn(t)&&t.name==="AuthSessionMissingError"}class AM extends pm{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class yE extends pm{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class vE extends pm{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Vge(t){return Sn(t)&&t.name==="AuthImplicitGrantRedirectError"}class TB extends pm{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class JI extends pm{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function MM(t){return Sn(t)&&t.name==="AuthRetryableFetchError"}class CB extends pm{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}var Wge=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const up=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Gge=[502,503,504];async function AB(t){var e;if(!kge(t))throw new JI(up(t),0);if(Gge.includes(t.status))throw new JI(up(t),t.status);let n;try{n=await t.json()}catch(o){throw new eJ(up(o),o)}let r;const i=Uge(t);if(i&&i.getTime()>=JK["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new CB(up(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Sf}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((o,a)=>o&&typeof a=="string",!0))throw new CB(up(n),t.status,n.weak_password.reasons);throw new Bge(up(n),t.status||500,r)}const qge=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function Ln(t,e,n,r){var i;const o=Object.assign({},r==null?void 0:r.headers);o[KI]||(o[KI]=JK["2024-01-01"].name),r!=null&&r.jwt&&(o.Authorization=`Bearer ${r.jwt}`);const a=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(a.redirect_to=r.redirectTo);const s=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",l=await Yge(t,e,n+s,{headers:o,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function Yge(t,e,n,r,i,o){const a=qge(e,r,i,o);let s;try{s=await t(n,Object.assign({},a))}catch(l){throw console.error(l),new JI(up(l),0)}if(s.ok||await AB(s),r!=null&&r.noResolveJson)return s;try{return await s.json()}catch(l){await AB(l)}}function Ef(t){var e;let n=null;Zge(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=Age(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function MB(t){const e=Ef(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Pf(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function Xge(t){return{data:t,error:null}}function Kge(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:o}=t,a=Wge(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),s={action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:o},l=Object.assign({},a);return{data:{properties:s,user:l},error:null}}function Jge(t){return t}function Zge(t){return t.access_token&&t.refresh_token&&t.expires_in}var Qge=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};class eye{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=ZK(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n="global"){try{return await Ln(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Sn(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await Ln(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Pf})}catch(r){if(Sn(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=Qge(e,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await Ln(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:Kge,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Sn(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await Ln(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Pf})}catch(n){if(Sn(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,i,o,a,s,l;try{const c={nextPage:null,lastPage:0,total:0},u=await Ln(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:Jge});if(u.error)throw u.error;const f=await u.json(),h=(a=u.headers.get("x-total-count"))!==null&&a!==void 0?a:0,p=(l=(s=u.headers.get("link"))===null||s===void 0?void 0:s.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(y=>{const g=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(y.split(";")[1].split("=")[1]);c[`${v}Page`]=g}),c.total=parseInt(h)),{data:Object.assign(Object.assign({},f),c),error:null}}catch(c){if(Sn(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){try{return await Ln(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Pf})}catch(n){if(Sn(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){try{return await Ln(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Pf})}catch(r){if(Sn(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){try{return await Ln(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Pf})}catch(r){if(Sn(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){try{const{data:n,error:r}=await Ln(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(Sn(n))return{data:null,error:n};throw n}}async _deleteFactor(e){try{return{data:await Ln(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(Sn(n))return{data:null,error:n};throw n}}}const tye={getItem:t=>Nw()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{Nw()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{Nw()&&globalThis.localStorage.removeItem(t)}};function PB(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function nye(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Fg={debug:!!(globalThis&&Nw()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class tJ extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class rye extends tJ{}async function iye(t,e,n){Fg.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Fg.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){Fg.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await n()}finally{Fg.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw Fg.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new rye(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Fg.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}nye();const oye={url:_ge,storageKey:Tge,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Cge,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function kB(t,e,n){return await n()}class rb{constructor(e){var n,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=rb.nextInstanceID,rb.nextInstanceID+=1,this.instanceID>0&&jc()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},oye),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new eye({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=ZK(i.fetch),this.lock=i.lock||kB,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:jc()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=iye:this.lock=kB,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?i.storage?this.storage=i.storage:Nw()?this.storage=tye:(this.memoryStorage={},this.storage=PB(this.memoryStorage)):(this.memoryStorage={},this.storage=PB(this.memoryStorage)),jc()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${KK}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=Pge(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),jc()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:o}=await this._getSessionFromURL(n,r);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),Vge(o)){const l=(e=o.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:a,redirectType:s}=i;return this._debug("#_initialize()","detected session in URL",a,"redirect type",s),await this._saveSession(a),setTimeout(async()=>{s==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Sn(n)?{error:n}:{error:new eJ("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,i;try{const o=await Ln(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:Ef}),{data:a,error:s}=o;if(s||!a)return{data:{user:null,session:null},error:s};const l=a.session,c=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(o){if(Sn(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(e){var n,r,i;try{let o;if("email"in e){const{email:u,password:f,options:h}=e;let p=null,y=null;this.flowType==="pkce"&&([p,y]=await Dg(this.storage,this.storageKey)),o=await Ln(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:u,password:f,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:p,code_challenge_method:y},xform:Ef})}else if("phone"in e){const{phone:u,password:f,options:h}=e;o=await Ln(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:f,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},channel:(i=h==null?void 0:h.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:Ef})}else throw new yE("You must provide either an email or phone number and a password");const{data:a,error:s}=o;if(s||!a)return{data:{user:null,session:null},error:s};const l=a.session,c=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(o){if(Sn(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(e){try{let n;if("email"in e){const{email:o,password:a,options:s}=e;n=await Ln(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:a,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:MB})}else if("phone"in e){const{phone:o,password:a,options:s}=e;n=await Ln(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:a,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:MB})}else throw new yE("You must provide either an email or phone number and a password");const{data:r,error:i}=n;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new AM}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(Sn(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,i,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const n=await mE(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{const{data:o,error:a}=await Ln(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Ef});if(await gE(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new AM}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:i??null}),error:a})}catch(o){if(Sn(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(e){try{const{options:n,provider:r,token:i,access_token:o,nonce:a}=e,s=await Ln(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:o,nonce:a,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Ef}),{data:l,error:c}=s;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new AM}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(n){if(Sn(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,i,o,a;try{if("email"in e){const{email:s,options:l}=e;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await Dg(this.storage,this.storageKey));const{error:f}=await Ln(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:s,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in e){const{phone:s,options:l}=e,{data:c,error:u}=await Ln(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:s,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(o=l==null?void 0:l.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(a=l==null?void 0:l.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u}}throw new yE("You must provide either an email or phone number.")}catch(s){if(Sn(s))return{data:{user:null,session:null},error:s};throw s}}async verifyOtp(e){var n,r;try{let i,o;"options"in e&&(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo,o=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:s}=await Ln(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:i,xform:Ef});if(s)throw s;if(!a)throw new Error("An error occurred on token verification.");const l=a.session,c=a.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(Sn(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var n,r,i;try{let o=null,a=null;return this.flowType==="pkce"&&([o,a]=await Dg(this.storage,this.storageKey)),await Ln(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:a}),headers:this.headers,xform:Xge})}catch(o){if(Sn(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Sf;const{error:i}=await Ln(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(Sn(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:o}=e,{error:a}=await Ln(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){const{phone:r,type:i,options:o}=e,{data:a,error:s}=await Ln(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:s}}throw new yE("You must provide either an email or phone number and a type")}catch(n){if(Sn(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await mE(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<CM:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let a=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,c,u)=>(!a&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,c,u))})}return{data:{session:e},error:null}}const{session:i,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{session:null},error:o}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Ln(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Pf}):await this._useSession(async n=>{var r,i,o;const{data:a,error:s}=n;if(s)throw s;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Sf}:await Ln(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(i=a.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0,xform:Pf})})}catch(n){if(Sn(n))return Hge(n)&&(await this._removeSession(),await gE(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:i,error:o}=r;if(o)throw o;if(!i.session)throw new Sf;const a=i.session;let s=null,l=null;this.flowType==="pkce"&&e.email!=null&&([s,l]=await Dg(this.storage,this.storageKey));const{data:c,error:u}=await Ln(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:s,code_challenge_method:l}),jwt:a.access_token,xform:Pf});if(u)throw u;return a.user=c.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(r){if(Sn(r))return{data:{user:null},error:r};throw r}}_decodeJWT(e){return _B(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Sf;const n=Date.now()/1e3;let r=n,i=!0,o=null;const a=_B(e.access_token);if(a.exp&&(r=a.exp,i=r<=n),i){const{session:s,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!s)return{data:{user:null,session:null},error:null};o=s}else{const{data:s,error:l}=await this._getUser(e.access_token);if(l)throw l;o={access_token:e.access_token,refresh_token:e.refresh_token,user:s.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(n){if(Sn(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:a,error:s}=n;if(s)throw s;e=(r=a.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Sf;const{session:i,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{user:null,session:null},error:o}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(Sn(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!jc())throw new vE("No browser detected.");if(e.error||e.error_description||e.error_code)throw new vE(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new TB("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new vE("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new TB("No code detected.");const{data:w,error:T}=await this._exchangeCodeForSession(e.code);if(T)throw T;const C=new URL(window.location.href);return C.searchParams.delete("code"),window.history.replaceState(window.history.state,"",C.toString()),{data:{session:w.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:o,refresh_token:a,expires_in:s,expires_at:l,token_type:c}=e;if(!o||!s||!a||!c)throw new vE("No session defined in URL");const u=Math.round(Date.now()/1e3),f=parseInt(s);let h=u+f;l&&(h=parseInt(l));const p=h-u;p*1e3<=by&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${f}s`);const y=h-f;u-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,h,u):u-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,h,u);const{data:g,error:v}=await this._getUser(o);if(v)throw v;const b={provider_token:r,provider_refresh_token:i,access_token:o,expires_in:f,expires_at:h,refresh_token:a,token_type:c,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:b,redirectType:e.type},error:null}}catch(r){if(Sn(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await mE(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:o}=n;if(o)return{error:o};const a=(r=i.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:s}=await this.admin.signOut(a,e);if(s&&!($ge(s)&&(s.status===404||s.status===401||s.status===403)))return{error:s}}return e!=="others"&&(await this._removeSession(),await gE(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=Mge(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,i;try{const{data:{session:o},error:a}=n;if(a)throw a;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await Dg(this.storage,this.storageKey,!0));try{return await Ln(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(o){if(Sn(o))return{data:null,error:o};throw o}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(Sn(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:i}=await this._useSession(async o=>{var a,s,l,c,u;const{data:f,error:h}=o;if(h)throw h;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await Ln(this.fetch,"GET",p,{headers:this.headers,jwt:(u=(c=f.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(i)throw i;return jc()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(Sn(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,i;const{data:o,error:a}=n;if(a)throw a;return await Ln(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(Sn(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await jge(async i=>(i>0&&await Rge(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await Ln(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Ef})),(i,o)=>{const a=200*Math.pow(2,i);return o&&MM(o)&&Date.now()+a-r<by})}catch(r){if(this._debug(n,"error",r),Sn(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),jc()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await mE(this.storage,this.storageKey);if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const i=((e=r.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<CM;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${CM}s`),i){if(this.autoRefreshToken&&r.refresh_token){const{error:o}=await this._callRefreshToken(r.refresh_token);o&&(console.error(o),MM(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Sf;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new YC;const{data:o,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!o.session)throw new Sf;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const s={session:o.session,error:null};return this.refreshingDeferred.resolve(s),s}catch(o){if(this._debug(i,"error",o),Sn(o)){const a={session:null,error:o};return MM(o)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(o),o}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,n,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const o=[],a=Array.from(this.stateChangeEmitters.values()).map(async s=>{try{await s.callback(e,n)}catch(l){o.push(l)}});if(await Promise.all(a),o.length>0){for(let s=0;s<o.length;s+=1)console.error(o[s]);throw o[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await QK(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await gE(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&jc()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),by);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/by);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${by}ms, refresh threshold is ${XI} ticks`),i<=XI&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof tJ)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!jc()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[o,a]=await Dg(this.storage,this.storageKey),s=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(a)}`});i.push(s.toString())}if(r!=null&&r.queryParams){const o=new URLSearchParams(r.queryParams);i.push(o.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:i,error:o}=n;return o?{data:null,error:o}:await Ln(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Sn(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,i;const{data:o,error:a}=n;if(a)return{data:null,error:a};const s=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:c}=await Ln(this.fetch,"POST",`${this.url}/factors`,{body:s,headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(e.factorType==="totp"&&(!((i=l==null?void 0:l.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(n){if(Sn(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:o}=n;if(o)return{data:null,error:o};const{data:a,error:s}=await Ln(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return s?{data:null,error:s}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:s})})}catch(n){if(Sn(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:o}=n;return o?{data:null,error:o}:await Ln(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Sn(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(e==null?void 0:e.factors)||[],i=r.filter(a=>a.factor_type==="totp"&&a.status==="verified"),o=r.filter(a=>a.factor_type==="phone"&&a.status==="verified");return{data:{all:r,totp:i,phone:o},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:i},error:o}=e;if(o)return{data:null,error:o};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const a=this._decodeJWT(i.access_token);let s=null;a.aal&&(s=a.aal);let l=s;((r=(n=i.user.factors)===null||n===void 0?void 0:n.filter(f=>f.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const u=a.amr||[];return{data:{currentLevel:s,nextLevel:l,currentAuthenticationMethods:u},error:null}}))}}rb.nextInstanceID=0;const aye=rb;class sye extends aye{constructor(e){super(e)}}var lye=function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function s(u){try{c(r.next(u))}catch(f){a(f)}}function l(u){try{c(r.throw(u))}catch(f){a(f)}}function c(u){u.done?o(u.value):i(u.value).then(s,l)}c((r=r.apply(t,e||[])).next())})};class cye{constructor(e,n,r){var i,o,a;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const s=Sge(e);this.realtimeUrl=`${s}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${s}/auth/v1`,this.storageUrl=`${s}/storage/v1`,this.functionsUrl=`${s}/functions/v1`;const l=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,c={db:pge,realtime:gge,auth:Object.assign(Object.assign({},mge),{storageKey:l}),global:hge},u=Ege(r??{},c);this.storageKey=(i=u.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(o=u.global.headers)!==null&&o!==void 0?o:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(f,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=u.auth)!==null&&a!==void 0?a:{},this.headers,u.global.fetch),this.fetch=wge(n,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.rest=new Ome(`${s}/rest/v1`,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),u.accessToken||this._listenForAuthEvents()}get functions(){return new Eme(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new uge(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return lye(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:i,storageKey:o,flowType:a,lock:s,debug:l},c,u){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new sye({url:this.authUrl,headers:Object.assign(Object.assign({},f),c),storageKey:o,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:i,flowType:a,lock:s,debug:l,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new Kme(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const uye=(t,e,n)=>new cye(t,e,n),dye="https://kwnwhgucnzqxndzjayyq.supabase.co",fye="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imt3bndoZ3VjbnpxeG5kempheXlxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDIzMzk4ODMsImV4cCI6MjA1NzkxNTg4M30.UAB3e5b44iJa9kKT391xyJKoQmlUOtsAi-yp4UEqZrc",Ze=uye(dye,fye,{global:{fetch:(t,e)=>fetch(t,{...e||{}})}});var hye=t=>{switch(t){case"success":return gye;case"info":return vye;case"warning":return yye;case"error":return xye;default:return null}},pye=Array(12).fill(0),mye=({visible:t})=>ve.createElement("div",{className:"sonner-loading-wrapper","data-visible":t},ve.createElement("div",{className:"sonner-spinner"},pye.map((e,n)=>ve.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),gye=ve.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ve.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),yye=ve.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},ve.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),vye=ve.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ve.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),xye=ve.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ve.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),wye=()=>{let[t,e]=ve.useState(document.hidden);return ve.useEffect(()=>{let n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t},ZI=1,bye=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let e=this.subscribers.indexOf(t);this.subscribers.splice(e,1)}),this.publish=t=>{this.subscribers.forEach(e=>e(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var e;let{message:n,...r}=t,i=typeof(t==null?void 0:t.id)=="number"||((e=t.id)==null?void 0:e.length)>0?t.id:ZI++,o=this.toasts.find(s=>s.id===i),a=t.dismissible===void 0?!0:t.dismissible;return o?this.toasts=this.toasts.map(s=>s.id===i?(this.publish({...s,...t,id:i,title:n}),{...s,...t,id:i,dismissible:a,title:n}):s):this.addToast({title:n,...r,dismissible:a,id:i}),i},this.dismiss=t=>(t||this.toasts.forEach(e=>{this.subscribers.forEach(n=>n({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:t,dismiss:!0})),t),this.message=(t,e)=>this.create({...e,message:t}),this.error=(t,e)=>this.create({...e,message:t,type:"error"}),this.success=(t,e)=>this.create({...e,type:"success",message:t}),this.info=(t,e)=>this.create({...e,type:"info",message:t}),this.warning=(t,e)=>this.create({...e,type:"warning",message:t}),this.loading=(t,e)=>this.create({...e,type:"loading",message:t}),this.promise=(t,e)=>{if(!e)return;let n;e.loading!==void 0&&(n=this.create({...e,promise:t,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let r=t instanceof Promise?t:t(),i=n!==void 0;return r.then(async o=>{if(Eye(o)&&!o.ok){i=!1;let a=typeof e.error=="function"?await e.error(`HTTP error! status: ${o.status}`):e.error,s=typeof e.description=="function"?await e.description(`HTTP error! status: ${o.status}`):e.description;this.create({id:n,type:"error",message:a,description:s})}else if(e.success!==void 0){i=!1;let a=typeof e.success=="function"?await e.success(o):e.success,s=typeof e.description=="function"?await e.description(o):e.description;this.create({id:n,type:"success",message:a,description:s})}}).catch(async o=>{if(e.error!==void 0){i=!1;let a=typeof e.error=="function"?await e.error(o):e.error,s=typeof e.description=="function"?await e.description(o):e.description;this.create({id:n,type:"error",message:a,description:s})}}).finally(()=>{var o;i&&(this.dismiss(n),n=void 0),(o=e.finally)==null||o.call(e)}),n},this.custom=(t,e)=>{let n=(e==null?void 0:e.id)||ZI++;return this.create({jsx:t(n),id:n,...e}),n},this.subscribers=[],this.toasts=[]}},Es=new bye,Sye=(t,e)=>{let n=(e==null?void 0:e.id)||ZI++;return Es.addToast({title:t,...e,id:n}),n},Eye=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",_ye=Sye,Tye=()=>Es.toasts,It=Object.assign(_ye,{success:Es.success,info:Es.info,warning:Es.warning,error:Es.error,custom:Es.custom,message:Es.message,promise:Es.promise,dismiss:Es.dismiss,loading:Es.loading},{getHistory:Tye});function Cye(t,{insertAt:e}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}Cye(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999}:where([data-sonner-toaster][data-x-position="right"]){right:max(var(--offset),env(safe-area-inset-right))}:where([data-sonner-toaster][data-x-position="left"]){left:max(var(--offset),env(safe-area-inset-left))}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:max(var(--offset),env(safe-area-inset-top))}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:max(var(--offset),env(safe-area-inset-bottom))}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;background:var(--gray1);color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:0;right:0;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function xE(t){return t.label!==void 0}var Aye=3,Mye="32px",Pye=4e3,kye=356,Nye=14,Rye=20,jye=200;function Iye(...t){return t.filter(Boolean).join(" ")}var Oye=t=>{var e,n,r,i,o,a,s,l,c,u;let{invert:f,toast:h,unstyled:p,interacting:y,setHeights:g,visibleToasts:v,heights:b,index:w,toasts:T,expanded:C,removeToast:P,defaultRichColors:M,closeButton:k,style:I,cancelButtonStyle:U,actionButtonStyle:z,className:O="",descriptionClassName:B="",duration:$,position:F,gap:J,loadingIcon:K,expandByDefault:Z,classNames:H,icons:Y,closeButtonAriaLabel:L="Close toast",pauseWhenPageIsHidden:N,cn:V}=t,[W,ne]=ve.useState(!1),[se,te]=ve.useState(!1),[ie,pe]=ve.useState(!1),[de,ce]=ve.useState(!1),[he,ee]=ve.useState(0),[xe,be]=ve.useState(0),Ae=ve.useRef(null),Ce=ve.useRef(null),oe=w===0,ae=w+1<=v,Se=h.type,me=h.dismissible!==!1,ye=h.className||"",Ie=h.descriptionClassName||"",De=ve.useMemo(()=>b.findIndex(Xe=>Xe.toastId===h.id)||0,[b,h.id]),Ue=ve.useMemo(()=>{var Xe;return(Xe=h.closeButton)!=null?Xe:k},[h.closeButton,k]),$e=ve.useMemo(()=>h.duration||$||Pye,[h.duration,$]),we=ve.useRef(0),fe=ve.useRef(0),ke=ve.useRef(0),Ne=ve.useRef(null),[qe,tt]=F.split("-"),ot=ve.useMemo(()=>b.reduce((Xe,et,wt)=>wt>=De?Xe:Xe+et.height,0),[b,De]),St=wye(),dt=h.invert||f,ft=Se==="loading";fe.current=ve.useMemo(()=>De*J+ot,[De,ot]),ve.useEffect(()=>{ne(!0)},[]),ve.useLayoutEffect(()=>{if(!W)return;let Xe=Ce.current,et=Xe.style.height;Xe.style.height="auto";let wt=Xe.getBoundingClientRect().height;Xe.style.height=et,be(wt),g(Bt=>Bt.find(en=>en.toastId===h.id)?Bt.map(en=>en.toastId===h.id?{...en,height:wt}:en):[{toastId:h.id,height:wt,position:h.position},...Bt])},[W,h.title,h.description,g,h.id]);let Ee=ve.useCallback(()=>{te(!0),ee(fe.current),g(Xe=>Xe.filter(et=>et.toastId!==h.id)),setTimeout(()=>{P(h)},jye)},[h,P,g,fe]);ve.useEffect(()=>{if(h.promise&&Se==="loading"||h.duration===1/0||h.type==="loading")return;let Xe,et=$e;return C||y||N&&St?(()=>{if(ke.current<we.current){let wt=new Date().getTime()-we.current;et=et-wt}ke.current=new Date().getTime()})():et!==1/0&&(we.current=new Date().getTime(),Xe=setTimeout(()=>{var wt;(wt=h.onAutoClose)==null||wt.call(h,h),Ee()},et)),()=>clearTimeout(Xe)},[C,y,Z,h,$e,Ee,h.promise,Se,N,St]),ve.useEffect(()=>{let Xe=Ce.current;if(Xe){let et=Xe.getBoundingClientRect().height;return be(et),g(wt=>[{toastId:h.id,height:et,position:h.position},...wt]),()=>g(wt=>wt.filter(Bt=>Bt.toastId!==h.id))}},[g,h.id]),ve.useEffect(()=>{h.delete&&Ee()},[Ee,h.delete]);function Ve(){return Y!=null&&Y.loading?ve.createElement("div",{className:"sonner-loader","data-visible":Se==="loading"},Y.loading):K?ve.createElement("div",{className:"sonner-loader","data-visible":Se==="loading"},K):ve.createElement(mye,{visible:Se==="loading"})}return ve.createElement("li",{"aria-live":h.important?"assertive":"polite","aria-atomic":"true",role:"status",tabIndex:0,ref:Ce,className:V(O,ye,H==null?void 0:H.toast,(e=h==null?void 0:h.classNames)==null?void 0:e.toast,H==null?void 0:H.default,H==null?void 0:H[Se],(n=h==null?void 0:h.classNames)==null?void 0:n[Se]),"data-sonner-toast":"","data-rich-colors":(r=h.richColors)!=null?r:M,"data-styled":!(h.jsx||h.unstyled||p),"data-mounted":W,"data-promise":!!h.promise,"data-removed":se,"data-visible":ae,"data-y-position":qe,"data-x-position":tt,"data-index":w,"data-front":oe,"data-swiping":ie,"data-dismissible":me,"data-type":Se,"data-invert":dt,"data-swipe-out":de,"data-expanded":!!(C||Z&&W),style:{"--index":w,"--toasts-before":w,"--z-index":T.length-w,"--offset":`${se?he:fe.current}px`,"--initial-height":Z?"auto":`${xe}px`,...I,...h.style},onPointerDown:Xe=>{ft||!me||(Ae.current=new Date,ee(fe.current),Xe.target.setPointerCapture(Xe.pointerId),Xe.target.tagName!=="BUTTON"&&(pe(!0),Ne.current={x:Xe.clientX,y:Xe.clientY}))},onPointerUp:()=>{var Xe,et,wt,Bt;if(de||!me)return;Ne.current=null;let en=Number(((Xe=Ce.current)==null?void 0:Xe.style.getPropertyValue("--swipe-amount").replace("px",""))||0),Hn=new Date().getTime()-((et=Ae.current)==null?void 0:et.getTime()),gr=Math.abs(en)/Hn;if(Math.abs(en)>=Rye||gr>.11){ee(fe.current),(wt=h.onDismiss)==null||wt.call(h,h),Ee(),ce(!0);return}(Bt=Ce.current)==null||Bt.style.setProperty("--swipe-amount","0px"),pe(!1)},onPointerMove:Xe=>{var et;if(!Ne.current||!me)return;let wt=Xe.clientY-Ne.current.y,Bt=Xe.clientX-Ne.current.x,en=(qe==="top"?Math.min:Math.max)(0,wt),Hn=Xe.pointerType==="touch"?10:2;Math.abs(en)>Hn?(et=Ce.current)==null||et.style.setProperty("--swipe-amount",`${wt}px`):Math.abs(Bt)>Hn&&(Ne.current=null)}},Ue&&!h.jsx?ve.createElement("button",{"aria-label":L,"data-disabled":ft,"data-close-button":!0,onClick:ft||!me?()=>{}:()=>{var Xe;Ee(),(Xe=h.onDismiss)==null||Xe.call(h,h)},className:V(H==null?void 0:H.closeButton,(i=h==null?void 0:h.classNames)==null?void 0:i.closeButton)},ve.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},ve.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),ve.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))):null,h.jsx||ve.isValidElement(h.title)?h.jsx||h.title:ve.createElement(ve.Fragment,null,Se||h.icon||h.promise?ve.createElement("div",{"data-icon":"",className:V(H==null?void 0:H.icon,(o=h==null?void 0:h.classNames)==null?void 0:o.icon)},h.promise||h.type==="loading"&&!h.icon?h.icon||Ve():null,h.type!=="loading"?h.icon||(Y==null?void 0:Y[Se])||hye(Se):null):null,ve.createElement("div",{"data-content":"",className:V(H==null?void 0:H.content,(a=h==null?void 0:h.classNames)==null?void 0:a.content)},ve.createElement("div",{"data-title":"",className:V(H==null?void 0:H.title,(s=h==null?void 0:h.classNames)==null?void 0:s.title)},h.title),h.description?ve.createElement("div",{"data-description":"",className:V(B,Ie,H==null?void 0:H.description,(l=h==null?void 0:h.classNames)==null?void 0:l.description)},h.description):null),ve.isValidElement(h.cancel)?h.cancel:h.cancel&&xE(h.cancel)?ve.createElement("button",{"data-button":!0,"data-cancel":!0,style:h.cancelButtonStyle||U,onClick:Xe=>{var et,wt;xE(h.cancel)&&me&&((wt=(et=h.cancel).onClick)==null||wt.call(et,Xe),Ee())},className:V(H==null?void 0:H.cancelButton,(c=h==null?void 0:h.classNames)==null?void 0:c.cancelButton)},h.cancel.label):null,ve.isValidElement(h.action)?h.action:h.action&&xE(h.action)?ve.createElement("button",{"data-button":!0,"data-action":!0,style:h.actionButtonStyle||z,onClick:Xe=>{var et,wt;xE(h.action)&&(Xe.defaultPrevented||((wt=(et=h.action).onClick)==null||wt.call(et,Xe),Ee()))},className:V(H==null?void 0:H.actionButton,(u=h==null?void 0:h.classNames)==null?void 0:u.actionButton)},h.action.label):null))};function NB(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}var Lye=t=>{let{invert:e,position:n="bottom-right",hotkey:r=["altKey","KeyT"],expand:i,closeButton:o,className:a,offset:s,theme:l="light",richColors:c,duration:u,style:f,visibleToasts:h=Aye,toastOptions:p,dir:y=NB(),gap:g=Nye,loadingIcon:v,icons:b,containerAriaLabel:w="Notifications",pauseWhenPageIsHidden:T,cn:C=Iye}=t,[P,M]=ve.useState([]),k=ve.useMemo(()=>Array.from(new Set([n].concat(P.filter(N=>N.position).map(N=>N.position)))),[P,n]),[I,U]=ve.useState([]),[z,O]=ve.useState(!1),[B,$]=ve.useState(!1),[F,J]=ve.useState(l!=="system"?l:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),K=ve.useRef(null),Z=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),H=ve.useRef(null),Y=ve.useRef(!1),L=ve.useCallback(N=>{var V;(V=P.find(W=>W.id===N.id))!=null&&V.delete||Es.dismiss(N.id),M(W=>W.filter(({id:ne})=>ne!==N.id))},[P]);return ve.useEffect(()=>Es.subscribe(N=>{if(N.dismiss){M(V=>V.map(W=>W.id===N.id?{...W,delete:!0}:W));return}setTimeout(()=>{CK.flushSync(()=>{M(V=>{let W=V.findIndex(ne=>ne.id===N.id);return W!==-1?[...V.slice(0,W),{...V[W],...N},...V.slice(W+1)]:[N,...V]})})})}),[]),ve.useEffect(()=>{if(l!=="system"){J(l);return}l==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?J("dark"):J("light")),typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:N})=>{J(N?"dark":"light")})},[l]),ve.useEffect(()=>{P.length<=1&&O(!1)},[P]),ve.useEffect(()=>{let N=V=>{var W,ne;r.every(se=>V[se]||V.code===se)&&(O(!0),(W=K.current)==null||W.focus()),V.code==="Escape"&&(document.activeElement===K.current||(ne=K.current)!=null&&ne.contains(document.activeElement))&&O(!1)};return document.addEventListener("keydown",N),()=>document.removeEventListener("keydown",N)},[r]),ve.useEffect(()=>{if(K.current)return()=>{H.current&&(H.current.focus({preventScroll:!0}),H.current=null,Y.current=!1)}},[K.current]),P.length?ve.createElement("section",{"aria-label":`${w} ${Z}`,tabIndex:-1},k.map((N,V)=>{var W;let[ne,se]=N.split("-");return ve.createElement("ol",{key:N,dir:y==="auto"?NB():y,tabIndex:-1,ref:K,className:a,"data-sonner-toaster":!0,"data-theme":F,"data-y-position":ne,"data-x-position":se,style:{"--front-toast-height":`${((W=I[0])==null?void 0:W.height)||0}px`,"--offset":typeof s=="number"?`${s}px`:s||Mye,"--width":`${kye}px`,"--gap":`${g}px`,...f},onBlur:te=>{Y.current&&!te.currentTarget.contains(te.relatedTarget)&&(Y.current=!1,H.current&&(H.current.focus({preventScroll:!0}),H.current=null))},onFocus:te=>{te.target instanceof HTMLElement&&te.target.dataset.dismissible==="false"||Y.current||(Y.current=!0,H.current=te.relatedTarget)},onMouseEnter:()=>O(!0),onMouseMove:()=>O(!0),onMouseLeave:()=>{B||O(!1)},onPointerDown:te=>{te.target instanceof HTMLElement&&te.target.dataset.dismissible==="false"||$(!0)},onPointerUp:()=>$(!1)},P.filter(te=>!te.position&&V===0||te.position===N).map((te,ie)=>{var pe,de;return ve.createElement(Oye,{key:te.id,icons:b,index:ie,toast:te,defaultRichColors:c,duration:(pe=p==null?void 0:p.duration)!=null?pe:u,className:p==null?void 0:p.className,descriptionClassName:p==null?void 0:p.descriptionClassName,invert:e,visibleToasts:h,closeButton:(de=p==null?void 0:p.closeButton)!=null?de:o,interacting:B,position:N,style:p==null?void 0:p.style,unstyled:p==null?void 0:p.unstyled,classNames:p==null?void 0:p.classNames,cancelButtonStyle:p==null?void 0:p.cancelButtonStyle,actionButtonStyle:p==null?void 0:p.actionButtonStyle,removeToast:L,toasts:P.filter(ce=>ce.position==te.position),heights:I.filter(ce=>ce.position==te.position),setHeights:U,expandByDefault:i,gap:g,loadingIcon:v,expanded:z,pauseWhenPageIsHidden:T,cn:C})}))})):null};const lf={log:(...t)=>{},logInfo:(...t)=>{},logError:(...t)=>{},logWarning:(...t)=>{},setLastProfileError:(...t)=>{}},ep=(...t)=>{},Df=(...t)=>{},Ys=(...t)=>{},Or=(...t)=>{},wE=3,XC=()=>{try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch(t){return console.error("Error detecting timezone:",t),"UTC"}},X_=async t=>{var e,n,r;if(!t)return!1;try{Or(`Checking if profile exists for user: ${t.id}`,"ProfileService",{userEmail:t.email,authProvider:(e=t.app_metadata)==null?void 0:e.provider,hasMetadata:!!t.user_metadata});const{data:i,error:o}=await Ze.from("profiles").select("id, full_name, avatar_url, timezone, subscription_status, subscription_tier, is_premium, trial_ends_at").eq("id",t.id).maybeSingle();return o&&o.code!=="PGRST116"?(Df(`Error checking if profile exists: ${o.message}`,"ProfileService",o),!1):i?(Or(`Profile exists: ${i.id}`,"ProfileService"),(!i.timezone&&XC()!=="UTC"||!i.full_name&&((n=t.user_metadata)==null?void 0:n.full_name)||!i.avatar_url&&((r=t.user_metadata)==null?void 0:r.avatar_url))&&(Or("Profile exists but needs updates","ProfileService"),await Dye(t.id,t)),!0):(Or("Profile not found, creating manually as fallback","ProfileService"),await Fye(t))}catch(i){return console.error("[ProfileService] Error in ensureProfileExists:",i),!1}},Dye=async(t,e)=>{var n,r,i,o;try{const a=XC(),s={updated_at:new Date().toISOString()};a!=="UTC"&&(s.timezone=a),(n=e.user_metadata)!=null&&n.full_name?s.full_name=e.user_metadata.full_name:(r=e.user_metadata)!=null&&r.name&&(s.full_name=e.user_metadata.name),(i=e.user_metadata)!=null&&i.avatar_url?s.avatar_url=e.user_metadata.avatar_url:(o=e.user_metadata)!=null&&o.picture&&(s.avatar_url=e.user_metadata.picture);const{error:l}=await Ze.from("profiles").update(s).eq("id",t);return l?(Df(`Error updating profile fields: ${l.message}`,"ProfileService",l),!1):(Or("Profile fields updated successfully","ProfileService",s),!0)}catch(a){return Df(`Error in updateMissingProfileFields: ${a.message}`,"ProfileService",a),!1}},Fye=async t=>{var e,n,r,i,o,a,s,l,c,u,f,h,p;for(let y=1;y<=wE;y++)try{Or(`Manual profile creation attempt ${y}/${wE}`,"ProfileService");let g="",v="";const b=t.email||"",w=XC();((e=t.app_metadata)==null?void 0:e.provider)==="google"?(g=((n=t.user_metadata)==null?void 0:n.name)||((r=t.user_metadata)==null?void 0:r.full_name)||`${((i=t.user_metadata)==null?void 0:i.given_name)||""} ${((o=t.user_metadata)==null?void 0:o.family_name)||""}`.trim(),v=((a=t.user_metadata)==null?void 0:a.picture)||((s=t.user_metadata)==null?void 0:s.avatar_url)||""):(g=((l=t.user_metadata)==null?void 0:l.full_name)||((c=t.user_metadata)==null?void 0:c.name)||`${((u=t.user_metadata)==null?void 0:u.given_name)||""} ${((f=t.user_metadata)==null?void 0:f.family_name)||""}`.trim(),v=((h=t.user_metadata)==null?void 0:h.avatar_url)||((p=t.user_metadata)==null?void 0:p.picture)||"");const T={id:t.id,email:b,full_name:g||null,avatar_url:v||null,timezone:w,onboarding_completed:!1,updated_at:new Date().toISOString()};Or(`Creating profile manually with data (attempt ${y})`,"ProfileService",T);const{error:C}=await Ze.from("profiles").upsert([T],{onConflict:"id",ignoreDuplicates:!1});if(C){if(Df(`Error upserting profile (attempt ${y}): ${C.message}`,"ProfileService",C),C.code==="23505")return Or("Profile already exists (detected via constraint error)","ProfileService"),!0;if(y<wE){Or(`Waiting before retry ${y+1}...`,"ProfileService"),await new Promise(P=>setTimeout(P,500*y));continue}return!1}return Or("Profile created successfully","ProfileService"),!0}catch(g){if(Df(`Error in manual profile creation (attempt ${y}): ${g.message}`,"ProfileService",g),y<wE){await new Promise(v=>setTimeout(v,500*y));continue}return!1}return!1},zye=async(t,e)=>{if(!t)return!1;try{Or("Updating user metadata","ProfileService",{userId:t.id,metadataKeys:Object.keys(e)}),e.timezone||(e.timezone=XC(),Or(`Adding detected timezone to metadata: ${e.timezone}`,"ProfileService"));const{data:n,error:r}=await Ze.auth.updateUser({data:e});if(r)throw Df(`Error updating user metadata: ${r.message}`,"ProfileService",r),r;if(t.id){Or("Updating profile table with new metadata","ProfileService");const i={updated_at:new Date().toISOString()};e.avatar_url&&(i.avatar_url=e.avatar_url),e.timezone&&(i.timezone=e.timezone),e.display_name&&(i.display_name=e.display_name);const{error:o}=await Ze.from("profiles").update(i).eq("id",t.id);o&&Df(`Error updating profile table: ${o.message}`,"ProfileService",o)}return Or("User profile updated successfully","ProfileService"),!0}catch(n){return Df(`Error updating profile: ${n.message}`,"ProfileService",n),!1}},wp=class wp{constructor(){Mt(this,"errorQueue",[]);Mt(this,"isOnline",navigator.onLine);Mt(this,"crashDetectionActive",!1);this.setupGlobalErrorHandlers(),this.setupNetworkListeners(),this.setupAndroidSpecificHandlers(),this.startCrashDetection()}static getInstance(){return wp.instance||(wp.instance=new wp),wp.instance}setupGlobalErrorHandlers(){window.addEventListener("error",e=>{var n,r,i;console.error("[MobileErrorHandler] Global error:",e),this.handleError({type:this.classifyError(e.message||((n=e.error)==null?void 0:n.message)||"Unknown error"),message:e.message||((r=e.error)==null?void 0:r.message)||"Unknown error occurred",stack:(i=e.error)==null?void 0:i.stack,timestamp:Date.now(),platform:Di.getPlatform(),url:window.location.href,userAgent:navigator.userAgent})}),window.addEventListener("unhandledrejection",e=>{var n,r;console.error("[MobileErrorHandler] Unhandled promise rejection:",e),this.handleError({type:this.classifyError(((n=e.reason)==null?void 0:n.toString())||"Promise rejection"),message:`Unhandled promise rejection: ${e.reason}`,stack:(r=e.reason)==null?void 0:r.stack,timestamp:Date.now(),platform:Di.getPlatform(),url:window.location.href,userAgent:navigator.userAgent})}),window.Capacitor&&(console.log("[MobileErrorHandler] Capacitor detected, setting up native error handlers"),this.setupCapacitorErrorHandlers())}setupCapacitorErrorHandlers(){var e,n;if(document.addEventListener("capacitorPluginError",r=>{console.error("[MobileErrorHandler] Capacitor plugin error:",r.detail),this.handleError({type:"capacitor",message:`Capacitor plugin error: ${r.detail.message||"Unknown plugin error"}`,stack:r.detail.stack,timestamp:Date.now(),platform:Di.getPlatform()})}),(n=(e=window.Capacitor)==null?void 0:e.Plugins)!=null&&n.App){const{App:r}=window.Capacitor.Plugins;r.addListener("appStateChange",i=>{console.log("[MobileErrorHandler] App state changed:",i),!i.isActive&&this.crashDetectionActive&&localStorage.setItem("app_last_background",Date.now().toString())})}}setupAndroidSpecificHandlers(){if(navigator.userAgent.includes("Android")){console.log("[MobileErrorHandler] Android detected, setting up Android-specific handlers");let e=0;const n=console.error;console.error=(...r)=>{n.apply(console,r);const i=r.join(" ");this.isWebViewError(i)&&(e++,e>3&&this.handleError({type:"android_webview",message:"Multiple WebView errors detected, possible crash imminent",timestamp:Date.now(),platform:"android"}))},setInterval(()=>{e=0},1e4)}}startCrashDetection(){this.crashDetectionActive=!0;const e=localStorage.getItem("app_last_background"),n=localStorage.getItem("app_last_foreground");if(e&&!n){const r=parseInt(e);Date.now()-r>3e4&&this.handleError({type:"crash",message:"Potential app crash detected on previous session",timestamp:Date.now(),platform:Di.getPlatform()})}localStorage.setItem("app_last_foreground",Date.now().toString()),localStorage.removeItem("app_last_background")}classifyError(e){const n=e.toLowerCase();return n.includes("webview")||n.includes("chromium")?"android_webview":n.includes("capacitor")||n.includes("plugin")?"capacitor":n.includes("permission")||n.includes("denied")?"permission":n.includes("network")||n.includes("fetch")||n.includes("cors")?"network":n.includes("audio")||n.includes("microphone")||n.includes("recording")?"audio":n.includes("storage")||n.includes("quota")||n.includes("disk")?"storage":n.includes("crash")||n.includes("segmentation fault")||n.includes("null pointer")?"crash":"unknown"}isWebViewError(e){const n=["webview","chromium","renderer","gpu process","out of memory","segmentation fault"],r=e.toLowerCase();return n.some(i=>r.includes(i))}setupNetworkListeners(){window.addEventListener("online",()=>{this.isOnline=!0,console.log("[MobileErrorHandler] Network connection restored"),It.success("Connection restored"),this.processErrorQueue()}),window.addEventListener("offline",()=>{this.isOnline=!1,console.log("[MobileErrorHandler] Network connection lost"),It.error("Connection lost - working offline"),this.handleError({type:"network",message:"Device went offline",timestamp:Date.now(),platform:Di.getPlatform()})})}handleError(e){const n={type:e.type||"unknown",message:e.message||"An error occurred",stack:e.stack,timestamp:e.timestamp||Date.now(),platform:e.platform||Di.getPlatform(),appVersion:"1.0.0",url:e.url||window.location.href,userAgent:e.userAgent||navigator.userAgent};console.error("[MobileErrorHandler] Error captured:",n),this.errorQueue.push(n),this.showUserFriendlyError(n),this.isOnline&&this.processErrorQueue(),(n.type==="crash"||n.type==="android_webview")&&this.attemptRecovery(n)}showUserFriendlyError(e){let n="";switch(e.type){case"crash":n="The app encountered an unexpected error. Attempting to recover...";break;case"android_webview":n="Display issue detected. The app will try to refresh automatically.";break;case"capacitor":n="Native feature error. Some functions may be temporarily unavailable.";break;case"network":n="Network connection issue. Some features may be limited.";break;case"permission":n="Permission required to access this feature.";break;case"storage":n="Storage error occurred. Please check available space.";break;case"audio":n="Audio recording error. Please check microphone permissions.";break;default:n="Something went wrong. The app will try to recover."}It.error(n)}attemptRecovery(e){console.log("[MobileErrorHandler] Attempting recovery for:",e.type),setTimeout(()=>{try{e.type==="android_webview"&&(window.location.hash="#recovery",setTimeout(()=>{window.location.hash=""},1e3));const n=["userId","auth_token","user_preferences"];Object.keys(localStorage).forEach(i=>{!n.includes(i)&&i.includes("cache")&&localStorage.removeItem(i)}),console.log("[MobileErrorHandler] Recovery attempt completed")}catch(n){console.error("[MobileErrorHandler] Recovery failed:",n)}},2e3)}async processErrorQueue(){if(!(this.errorQueue.length===0||!this.isOnline))try{console.log("[MobileErrorHandler] Processing error queue:",this.errorQueue),this.errorQueue=[]}catch(e){console.error("[MobileErrorHandler] Failed to process error queue:",e)}}handlePermissionError(e){this.handleError({type:"permission",message:`Permission denied: ${e}`,timestamp:Date.now()})}handleAudioError(e){this.handleError({type:"audio",message:`Audio error: ${e}`,timestamp:Date.now()})}handleStorageError(e){this.handleError({type:"storage",message:`Storage error: ${e}`,timestamp:Date.now()})}handleNetworkError(e){this.handleError({type:"network",message:`Network error: ${e}`,timestamp:Date.now()})}handleCapacitorError(e,n){this.handleError({type:"capacitor",message:`Capacitor ${e} error: ${n}`,timestamp:Date.now()})}};Mt(wp,"instance");let QI=wp;const Ur=QI.getInstance(),bp=class bp{constructor(){Mt(this,"isCapacitorReady",!1);Mt(this,"isActuallyNative",!1);Mt(this,"plugins",{});Mt(this,"deviceInfo",null)}static getInstance(){return bp.instance||(bp.instance=new bp),bp.instance}async initialize(){console.log("[NativeIntegration] Initializing native integration service");try{this.isCapacitorAvailable()?(console.log("[NativeIntegration] Capacitor detected"),await this.initializeCapacitor(),await this.detectNativeEnvironment()):console.log("[NativeIntegration] Running in web environment"),await this.initializeDeviceInfo(),this.isActuallyNative&&this.setupPluginErrorHandlers(),console.log("[NativeIntegration] Native integration service initialized",{capacitorReady:this.isCapacitorReady,actuallyNative:this.isActuallyNative,platform:this.getPlatform()})}catch(e){console.error("[NativeIntegration] Failed to initialize:",e),Ur.handleError({type:"unknown",message:`Native integration initialization failed: ${e}`})}}isCapacitorAvailable(){return typeof window<"u"&&!!window.Capacitor}async detectNativeEnvironment(){var e;try{const{Capacitor:n}=window;if(n){const r=n.getPlatform();if(console.log("[NativeIntegration] Capacitor platform:",r),this.isActuallyNative=r==="ios"||r==="android",console.log("[NativeIntegration] Actually native environment:",this.isActuallyNative),this.isActuallyNative)try{if((e=n.Plugins)!=null&&e.Device){const i=await n.Plugins.Device.getInfo();console.log("[NativeIntegration] Native device info available:",!!i)}}catch(i){console.warn("[NativeIntegration] Failed to access native device info:",i),this.isActuallyNative=!1}}}catch(n){console.error("[NativeIntegration] Error detecting native environment:",n),this.isActuallyNative=!1}}async initializeCapacitor(){try{const{Capacitor:e}=window;e&&e.Plugins&&(this.plugins=e.Plugins,this.isCapacitorReady=!0,console.log("[NativeIntegration] Available Capacitor plugins:",Object.keys(this.plugins)),this.isActuallyNative?await this.initializeCorePlugins():console.log("[NativeIntegration] Skipping native plugin initialization - running in web environment"))}catch(e){console.error("[NativeIntegration] Capacitor initialization failed:",e),Ur.handleCapacitorError("Core",e.toString())}}async initializeCorePlugins(){if(this.plugins.App)try{this.plugins.App.addListener("appStateChange",e=>{console.log("[NativeIntegration] App state changed:",e)}),this.plugins.App.addListener("appUrlOpen",e=>{console.log("[NativeIntegration] App URL opened:",e)}),console.log("[NativeIntegration] App plugin initialized")}catch(e){console.error("[NativeIntegration] App plugin initialization failed:",e),Ur.handleCapacitorError("App",e.toString())}if(this.plugins.StatusBar)try{await this.plugins.StatusBar.setStyle({style:"dark"}),await this.plugins.StatusBar.setBackgroundColor({color:"#FFFFFF"}),console.log("[NativeIntegration] StatusBar plugin initialized")}catch(e){console.error("[NativeIntegration] StatusBar plugin initialization failed:",e),Ur.handleCapacitorError("StatusBar",e.toString())}if(this.plugins.Keyboard)try{this.plugins.Keyboard.addListener("keyboardWillShow",e=>{console.log("[NativeIntegration] Keyboard will show:",e),document.body.classList.add("keyboard-visible")}),this.plugins.Keyboard.addListener("keyboardWillHide",()=>{console.log("[NativeIntegration] Keyboard will hide"),document.body.classList.remove("keyboard-visible")}),console.log("[NativeIntegration] Keyboard plugin initialized")}catch(e){console.error("[NativeIntegration] Keyboard plugin initialization failed:",e),Ur.handleCapacitorError("Keyboard",e.toString())}if(this.plugins.SplashScreen)try{setTimeout(async()=>{await this.plugins.SplashScreen.hide(),console.log("[NativeIntegration] Splash screen hidden")},3e3)}catch(e){console.error("[NativeIntegration] SplashScreen plugin error:",e),Ur.handleCapacitorError("SplashScreen",e.toString())}if(this.plugins.GoogleAuth)try{console.log("[NativeIntegration] GoogleAuth plugin detected and available")}catch(e){console.error("[NativeIntegration] GoogleAuth plugin initialization failed:",e),Ur.handleCapacitorError("GoogleAuth",e.toString())}}async initializeDeviceInfo(){if(this.plugins.Device)try{const e=await this.plugins.Device.getInfo();this.deviceInfo={platform:e.platform||"unknown",model:e.model||"unknown",osVersion:e.osVersion||"unknown",manufacturer:e.manufacturer||"unknown",isVirtual:e.isVirtual||!1},console.log("[NativeIntegration] Device info:",this.deviceInfo)}catch(e){console.error("[NativeIntegration] Failed to get device info:",e),this.deviceInfo=this.getDeviceInfoFromUserAgent()}else this.deviceInfo=this.getDeviceInfoFromUserAgent()}getDeviceInfoFromUserAgent(){const e=navigator.userAgent;let n="web";return e.includes("Android")?n="android":(e.includes("iPhone")||e.includes("iPad"))&&(n="ios"),{platform:n,model:"unknown",osVersion:"unknown",manufacturer:"unknown",isVirtual:!1}}setupPluginErrorHandlers(){if(this.isCapacitorReady){const e=console.error;console.error=(...n)=>{e.apply(console,n);const r=n.join(" ");(r.includes("Capacitor")||r.includes("Plugin"))&&Ur.handleCapacitorError("Unknown",r)}}}isRunningNatively(){return this.isActuallyNative}getPlatform(){var e;if(this.isActuallyNative&&this.isCapacitorReady)try{const{Capacitor:n}=window;return n.getPlatform()}catch(n){console.error("[NativeIntegration] Error getting platform:",n)}return((e=this.deviceInfo)==null?void 0:e.platform)||"web"}getDeviceInfo(){return this.deviceInfo}async requestPermissions(e){const n={};if(!this.isActuallyNative)return console.log("[NativeIntegration] Permission requests not available in web environment"),e.forEach(r=>{n[r]="granted"}),n;for(const r of e)try{if(r==="microphone"&&this.plugins.Microphone){const i=await this.plugins.Microphone.requestPermissions();n[r]=i.microphone||"denied"}else if(r==="notifications"&&this.plugins.LocalNotifications){const i=await this.plugins.LocalNotifications.requestPermissions();n[r]=i.display||"denied"}else if(r==="push-notifications"&&this.plugins.PushNotifications){const i=await this.plugins.PushNotifications.requestPermissions();n[r]=i.receive||"denied"}}catch(i){console.error(`[NativeIntegration] Failed to request ${r} permission:`,i),n[r]="denied",Ur.handlePermissionError(r)}return n}async hideStatusBar(){if(this.plugins.StatusBar)try{await this.plugins.StatusBar.hide()}catch(e){console.error("[NativeIntegration] Failed to hide status bar:",e),Ur.handleCapacitorError("StatusBar",e.toString())}}async showStatusBar(){if(this.plugins.StatusBar)try{await this.plugins.StatusBar.show()}catch(e){console.error("[NativeIntegration] Failed to show status bar:",e),Ur.handleCapacitorError("StatusBar",e.toString())}}async vibrate(e=100){if(this.plugins.Haptics)try{await this.plugins.Haptics.vibrate({duration:e})}catch(n){console.error("[NativeIntegration] Failed to vibrate:",n),Ur.handleCapacitorError("Haptics",n.toString())}else"vibrate"in navigator&&navigator.vibrate(e)}async exitApp(){if(this.plugins.App)try{await this.plugins.App.exitApp()}catch(e){console.error("[NativeIntegration] Failed to exit app:",e),Ur.handleCapacitorError("App",e.toString())}}async getNetworkStatus(){if(this.plugins.Network)try{const e=await this.plugins.Network.getStatus();return{connected:e.connected,connectionType:e.connectionType}}catch(e){console.error("[NativeIntegration] Failed to get network status:",e),Ur.handleCapacitorError("Network",e.toString())}return{connected:navigator.onLine,connectionType:"unknown"}}isGoogleAuthAvailable(){return this.isActuallyNative&&this.isCapacitorReady&&!!this.plugins.GoogleAuth}getPlugin(e){return this.isActuallyNative&&this.isCapacitorReady&&this.plugins[e]?this.plugins[e]:null}isPluginAvailable(e){return this.isActuallyNative&&this.isCapacitorReady&&!!this.plugins[e]}};Mt(bp,"instance");let eO=bp;const Di=eO.getInstance();/*! Capacitor: https://capacitorjs.com/ - MIT License */var uv;(function(t){t.Unimplemented="UNIMPLEMENTED",t.Unavailable="UNAVAILABLE"})(uv||(uv={}));class PM extends Error{constructor(e,n,r){super(e),this.message=e,this.code=n,this.data=r}}const Uye=t=>{var e,n;return t!=null&&t.androidBridge?"android":!((n=(e=t==null?void 0:t.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},Bye=t=>{const e=t.CapacitorCustomPlatform||null,n=t.Capacitor||{},r=n.Plugins=n.Plugins||{},i=()=>e!==null?e.name:Uye(t),o=()=>i()!=="web",a=f=>{const h=c.get(f);return!!(h!=null&&h.platforms.has(i())||s(f))},s=f=>{var h;return(h=n.PluginHeaders)===null||h===void 0?void 0:h.find(p=>p.name===f)},l=f=>t.console.error(f),c=new Map,u=(f,h={})=>{const p=c.get(f);if(p)return console.warn(`Capacitor plugin "${f}" already registered. Cannot register plugins twice.`),p.proxy;const y=i(),g=s(f);let v;const b=async()=>(!v&&y in h?v=typeof h[y]=="function"?v=await h[y]():v=h[y]:e!==null&&!v&&"web"in h&&(v=typeof h.web=="function"?v=await h.web():v=h.web),v),w=(I,U)=>{var z,O;if(g){const B=g==null?void 0:g.methods.find($=>U===$.name);if(B)return B.rtype==="promise"?$=>n.nativePromise(f,U.toString(),$):($,F)=>n.nativeCallback(f,U.toString(),$,F);if(I)return(z=I[U])===null||z===void 0?void 0:z.bind(I)}else{if(I)return(O=I[U])===null||O===void 0?void 0:O.bind(I);throw new PM(`"${f}" plugin is not implemented on ${y}`,uv.Unimplemented)}},T=I=>{let U;const z=(...O)=>{const B=b().then($=>{const F=w($,I);if(F){const J=F(...O);return U=J==null?void 0:J.remove,J}else throw new PM(`"${f}.${I}()" is not implemented on ${y}`,uv.Unimplemented)});return I==="addListener"&&(B.remove=async()=>U()),B};return z.toString=()=>`${I.toString()}() { [capacitor code] }`,Object.defineProperty(z,"name",{value:I,writable:!1,configurable:!1}),z},C=T("addListener"),P=T("removeListener"),M=(I,U)=>{const z=C({eventName:I},U),O=async()=>{const $=await z;P({eventName:I,callbackId:$},U)},B=new Promise($=>z.then(()=>$({remove:O})));return B.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await O()},B},k=new Proxy({},{get(I,U){switch(U){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return g?M:C;case"removeListener":return P;default:return T(U)}}});return r[f]=k,c.set(f,{name:f,proxy:k,platforms:new Set([...Object.keys(h),...g?[y]:[]])}),k};return n.convertFileSrc||(n.convertFileSrc=f=>f),n.getPlatform=i,n.handleError=l,n.isNativePlatform=o,n.isPluginAvailable=a,n.registerPlugin=u,n.Exception=PM,n.DEBUG=!!n.DEBUG,n.isLoggingEnabled=!!n.isLoggingEnabled,n},$ye=t=>t.Capacitor=Bye(t),tO=$ye(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),R3=tO.registerPlugin;class nJ{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,n){let r=!1;this.listeners[e]||(this.listeners[e]=[],r=!0),this.listeners[e].push(n);const o=this.windowListeners[e];o&&!o.registered&&this.addWindowListener(o),r&&this.sendRetainedArgumentsForEvent(e);const a=async()=>this.removeListener(e,n);return Promise.resolve({remove:a})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,n,r){const i=this.listeners[e];if(!i){if(r){let o=this.retainedEventArguments[e];o||(o=[]),o.push(n),this.retainedEventArguments[e]=o}return}i.forEach(o=>o(n))}hasListeners(e){return!!this.listeners[e].length}registerWindowListener(e,n){this.windowListeners[n]={registered:!1,windowEventName:e,pluginEventName:n,handler:r=>{this.notifyListeners(n,r)}}}unimplemented(e="not implemented"){return new tO.Exception(e,uv.Unimplemented)}unavailable(e="not available"){return new tO.Exception(e,uv.Unavailable)}async removeListener(e,n){const r=this.listeners[e];if(!r)return;const i=r.indexOf(n);this.listeners[e].splice(i,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const n=this.retainedEventArguments[e];n&&(delete this.retainedEventArguments[e],n.forEach(r=>{this.notifyListeners(e,r)}))}}const RB=t=>encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),jB=t=>t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class Hye extends nJ{async getCookies(){const e=document.cookie,n={};return e.split(";").forEach(r=>{if(r.length<=0)return;let[i,o]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");i=jB(i).trim(),o=jB(o).trim(),n[i]=o}),n}async setCookie(e){try{const n=RB(e.key),r=RB(e.value),i=`; expires=${(e.expires||"").replace("expires=","")}`,o=(e.path||"/").replace("path=",""),a=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${n}=${r||""}${i}; path=${o}; ${a};`}catch(n){return Promise.reject(n)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const n of e)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}R3("CapacitorCookies",{web:()=>new Hye});const Vye=async t=>new Promise((e,n)=>{const r=new FileReader;r.onload=()=>{const i=r.result;e(i.indexOf(",")>=0?i.split(",")[1]:i)},r.onerror=i=>n(i),r.readAsDataURL(t)}),Wye=(t={})=>{const e=Object.keys(t);return Object.keys(t).map(i=>i.toLocaleLowerCase()).reduce((i,o,a)=>(i[o]=t[e[a]],i),{})},Gye=(t,e=!0)=>t?Object.entries(t).reduce((r,i)=>{const[o,a]=i;let s,l;return Array.isArray(a)?(l="",a.forEach(c=>{s=e?encodeURIComponent(c):c,l+=`${o}=${s}&`}),l.slice(0,-1)):(s=e?encodeURIComponent(a):a,l=`${o}=${s}`),`${r}&${l}`},"").substr(1):null,qye=(t,e={})=>{const n=Object.assign({method:t.method||"GET",headers:t.headers},e),i=Wye(t.headers)["content-type"]||"";if(typeof t.data=="string")n.body=t.data;else if(i.includes("application/x-www-form-urlencoded")){const o=new URLSearchParams;for(const[a,s]of Object.entries(t.data||{}))o.set(a,s);n.body=o.toString()}else if(i.includes("multipart/form-data")||t.data instanceof FormData){const o=new FormData;if(t.data instanceof FormData)t.data.forEach((s,l)=>{o.append(l,s)});else for(const s of Object.keys(t.data))o.append(s,t.data[s]);n.body=o;const a=new Headers(n.headers);a.delete("content-type"),n.headers=a}else(i.includes("application/json")||typeof t.data=="object")&&(n.body=JSON.stringify(t.data));return n};class Yye extends nJ{async request(e){const n=qye(e,e.webFetchExtra),r=Gye(e.params,e.shouldEncodeUrlParams),i=r?`${e.url}?${r}`:e.url,o=await fetch(i,n),a=o.headers.get("content-type")||"";let{responseType:s="text"}=o.ok?e:{};a.includes("application/json")&&(s="json");let l,c;switch(s){case"arraybuffer":case"blob":c=await o.blob(),l=await Vye(c);break;case"json":l=await o.json();break;case"document":case"text":default:l=await o.text()}const u={};return o.headers.forEach((f,h)=>{u[h]=f}),{data:l,headers:u,status:o.status,url:o.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}R3("CapacitorHttp",{web:()=>new Yye});const kM=R3("GoogleAuth",{web:()=>cd(()=>import("./web-Dsvc8Goz.js"),[]).then(t=>new t.GoogleAuthWeb)}),Sp=class Sp{constructor(){Mt(this,"isInitialized",!1);Mt(this,"initializationError",null)}static getInstance(){return Sp.instance||(Sp.instance=new Sp),Sp.instance}async initialize(){if(!this.isInitialized)try{if(console.log("[NativeAuth] Initializing native auth service"),!Di.isRunningNatively()){console.log("[NativeAuth] Not running natively - skipping GoogleAuth initialization"),this.isInitialized=!0;return}if(!Di.isGoogleAuthAvailable()){console.warn("[NativeAuth] GoogleAuth plugin not available"),this.initializationError="GoogleAuth plugin not available",this.isInitialized=!0;return}console.log("[NativeAuth] Initializing GoogleAuth plugin"),await kM.initialize({clientId:"",scopes:["profile","email"]}),this.isInitialized=!0,console.log("[NativeAuth] Native auth service initialized successfully")}catch(e){console.error("[NativeAuth] Failed to initialize:",e),this.initializationError=e.toString(),this.isInitialized=!0}}async signInWithGoogle(){var e,n,r;try{if(console.log("[NativeAuth] Starting Google sign-in"),this.shouldUseNativeAuth()){if(console.log("[NativeAuth] Using native Google Sign-In"),this.initializationError)throw new Error(`Native auth not available: ${this.initializationError}`);const i=await kM.signIn();if(console.log("[NativeAuth] Native Google sign-in result:",{hasIdToken:!!((e=i.authentication)!=null&&e.idToken),email:i.email}),!((n=i.authentication)!=null&&n.idToken))throw new Error("No ID token received from Google");const{data:o,error:a}=await Ze.auth.signInWithIdToken({provider:"google",token:i.authentication.idToken});if(a)throw console.error("[NativeAuth] Supabase sign-in error:",a),a;console.log("[NativeAuth] Successfully signed in with Google natively"),It.success("Signed in successfully")}else console.log("[NativeAuth] Using web OAuth Google Sign-In"),await this.signInWithGoogleWeb()}catch(i){if(console.error("[NativeAuth] Google sign-in failed:",i),this.shouldUseNativeAuth()&&!((r=i.message)!=null&&r.includes("popup_closed_by_user"))){console.log("[NativeAuth] Native auth failed, trying web fallback");try{await this.signInWithGoogleWeb();return}catch(o){console.error("[NativeAuth] Web fallback also failed:",o)}}throw this.handleAuthError(i),i}}async signInWithGoogleWeb(){const e=`${window.location.origin}/app/auth`,{data:n,error:r}=await Ze.auth.signInWithOAuth({provider:"google",options:{redirectTo:e}});if(r)throw console.error("[NativeAuth] OAuth sign-in error:",r),r;n!=null&&n.url&&(console.log("[NativeAuth] Redirecting to OAuth URL:",n.url),setTimeout(()=>{window.location.href=n.url},100))}async signInWithApple(){try{console.log("[NativeAuth] Starting Apple sign-in");const e=`${window.location.origin}/app/auth`,{data:n,error:r}=await Ze.auth.signInWithOAuth({provider:"apple",options:{redirectTo:e}});if(r)throw console.error("[NativeAuth] Apple OAuth error:",r),r;n!=null&&n.url&&(console.log("[NativeAuth] Redirecting to Apple OAuth URL:",n.url),setTimeout(()=>{window.location.href=n.url},100))}catch(e){throw console.error("[NativeAuth] Apple sign-in failed:",e),this.handleAuthError(e,"Apple"),e}}async signOut(){try{if(console.log("[NativeAuth] Starting sign out"),this.shouldUseNativeAuth()&&!this.initializationError)try{await kM.signOut(),console.log("[NativeAuth] Signed out from Google natively")}catch(n){console.warn("[NativeAuth] Failed to sign out from Google natively:",n)}const{error:e}=await Ze.auth.signOut();if(e)throw console.error("[NativeAuth] Supabase sign-out error:",e),e;console.log("[NativeAuth] Successfully signed out"),It.info("Signed out")}catch(e){throw console.error("[NativeAuth] Sign out failed:",e),It.error(`Sign out failed: ${e.message}`),e}}shouldUseNativeAuth(){return Di.isRunningNatively()&&Di.isGoogleAuthAvailable()&&this.isInitialized}handleAuthError(e,n="Google"){var i,o,a,s;let r=`${n} sign-in failed`;(i=e.message)!=null&&i.includes("redirect_uri_mismatch")?r=`${n} sign-in configuration error. Please check your redirect URLs.`:(o=e.message)!=null&&o.includes("popup_closed_by_user")?r="Sign-in was cancelled":(a=e.message)!=null&&a.includes("network")?r="Network error. Please check your connection and try again.":(s=e.message)!=null&&s.includes("not available")?r=`${n} sign-in is not available. Please try again later.`:e.message&&(r=`${n} sign-in failed: ${e.message}`),It.error(r)}isRunningNatively(){return Di.isRunningNatively()}getInitializationError(){return this.initializationError}};Mt(Sp,"instance");let nO=Sp;const w1=nO.getInstance(),rJ=()=>`${window.location.origin}/app/auth`,iJ=async()=>{var t,e,n,r;try{if(console.log("[AuthService] Starting Google sign-in"),Di.isRunningNatively()){console.log("[AuthService] Attempting native Google sign-in");try{await w1.signInWithGoogle();return}catch(s){if(console.warn("[AuthService] Native Google sign-in failed, falling back to web:",s),(t=s.message)!=null&&t.includes("popup_closed_by_user"))return}}console.log("[AuthService] Using web OAuth Google sign-in");const i=rJ(),{data:o,error:a}=await Ze.auth.signInWithOAuth({provider:"google",options:{redirectTo:i}});if(a)throw console.error("[AuthService] OAuth sign-in error:",a),a;o!=null&&o.url&&(console.log("[AuthService] Redirecting to OAuth URL:",o.url),setTimeout(()=>{window.location.href=o.url},100))}catch(i){if(console.error("[AuthService] Google sign-in error:",i),(e=i.message)!=null&&e.includes("redirect_uri_mismatch"))console.error("[AuthService] Redirect URI mismatch - check Google OAuth configuration"),It.error("Google sign-in configuration error. Please contact support.");else if((n=i.message)!=null&&n.includes("popup_closed_by_user")){console.log("[AuthService] User cancelled sign-in");return}else if((r=i.message)!=null&&r.includes("Cannot read properties of null"))console.error("[AuthService] Google Auth initialization error - likely running in unsupported environment"),It.error("Google sign-in is not available in this environment. Please try refreshing the page.");else throw i}},oJ=async()=>{try{if(console.log("[AuthService] Starting Apple sign-in"),Di.isRunningNatively()){console.log("[AuthService] Attempting native Apple sign-in");try{await w1.signInWithApple();return}catch(r){console.warn("[AuthService] Native Apple sign-in failed, falling back to web:",r)}}console.log("[AuthService] Using web OAuth Apple sign-in");const t=rJ(),{data:e,error:n}=await Ze.auth.signInWithOAuth({provider:"apple",options:{redirectTo:t}});if(n)throw console.error("[AuthService] Apple OAuth error:",n),n;e!=null&&e.url&&(console.log("[AuthService] Redirecting to Apple OAuth URL:",e.url),setTimeout(()=>{window.location.href=e.url},100))}catch(t){throw console.error("[AuthService] Apple sign-in error:",t),t}},Xye=async(t,e)=>{try{const{error:n}=await Ze.auth.signInWithPassword({email:t,password:e});if(n)throw n}catch(n){throw console.error("Error signing in with email:",n.message),It.error(`Error signing in with email: ${n.message}`),n}},Kye=async(t,e)=>{try{const{error:n}=await Ze.auth.signUp({email:t,password:e});if(n)throw n}catch(n){throw console.error("Error signing up:",n.message),It.error(`Error signing up: ${n.message}`),n}},Jye=async t=>{try{const{error:e}=await Ze.auth.resetPasswordForEmail(t);if(e)throw e}catch(e){throw console.error("Error resetting password:",e.message),It.error(`Error resetting password: ${e.message}`),e}},Zye=async t=>{try{if(console.log("[AuthService] Starting sign out"),Di.isRunningNatively()){console.log("[AuthService] Attempting native sign out");try{await w1.signOut()}catch(e){console.warn("[AuthService] Native sign out failed, using web fallback:",e);const{error:n}=await Ze.auth.signOut();if(n)throw console.error("[AuthService] Supabase sign-out error:",n),n}}else{console.log("[AuthService] Using web sign out");const{error:e}=await Ze.auth.signOut();if(e)throw console.error("[AuthService] Supabase sign-out error:",e),e}localStorage.removeItem("authRedirectTo"),t&&t("/app/onboarding")}catch(e){throw console.error("[AuthService] Sign out error:",e),t&&t("/app/onboarding"),localStorage.removeItem("authRedirectTo"),e}},Qye=async()=>{try{const{data:{session:t},error:e}=await Ze.auth.getSession();if(e)throw e;return t}catch(t){throw console.error("Error refreshing session:",t.message),t}},IB=()=>/native/i.test(window.navigator.userAgent),nc=t=>{const e=t.startsWith("/app/")||t==="/app";return console.log(`isAppRoute check for ${t}: ${e}`),e},ib=t=>{if(nc(t))return console.log(`${t} is an app route, so not a website route`),!1;if(t==="/")return console.log(`${t} is root, treating as website route`),!0;const n=["/","/about","/pricing","/terms","/privacy","/blog","/contact","/faq","/download"].some(r=>t===r||t.startsWith(`${r}/`));return console.log(`isWebsiteRoute check for ${t}: ${n}`),n};class Cp{static async detectLocation(){if(this.locationCache)return this.locationCache;if(this.locationPromise)return this.locationPromise;this.locationPromise=this.performLocationDetection();const e=await this.locationPromise;return e&&(this.locationCache=e),this.locationPromise=null,e}static async performLocationDetection(){try{try{const r=await fetch("https://ipapi.co/json/",{method:"GET",headers:{Accept:"application/json"}});if(r.ok){const i=await r.json();if(i.country_code&&i.currency)return console.log("Location detected via ipapi.co:",i.country_code,i.currency),{country:i.country_code,currency:i.currency,timezone:i.timezone||Intl.DateTimeFormat().resolvedOptions().timeZone}}}catch(r){console.warn("ipapi.co failed:",r)}try{const r=await fetch("http://ip-api.com/json/",{method:"GET"});if(r.ok){const i=await r.json();if(i.status==="success"&&i.countryCode)return console.log("Location detected via ip-api.com:",i.countryCode),{country:i.countryCode,currency:this.getCurrencyFromCountry(i.countryCode),timezone:i.timezone||Intl.DateTimeFormat().resolvedOptions().timeZone}}}catch(r){console.warn("ip-api.com failed:",r)}const e=Intl.DateTimeFormat().resolvedOptions().timeZone,n=this.getCountryFromTimezone(e);if(n)return console.log("Location estimated from timezone:",n),{country:n,currency:this.getCurrencyFromCountry(n),timezone:e}}catch(e){console.error("Location detection failed:",e)}return null}static getCurrencyFromCountry(e){return{US:"USD",CA:"CAD",GB:"GBP",AU:"AUD",NZ:"NZD",JP:"JPY",KR:"KRW",CN:"CNY",IN:"INR",SG:"SGD",HK:"HKD",TW:"TWD",TH:"THB",VN:"VND",MY:"MYR",ID:"IDR",PH:"PHP",BD:"BDT",PK:"PKR",LK:"LKR",AT:"EUR",BE:"EUR",CY:"EUR",EE:"EUR",FI:"EUR",FR:"EUR",DE:"EUR",GR:"EUR",IE:"EUR",IT:"EUR",LV:"EUR",LT:"EUR",LU:"EUR",MT:"EUR",NL:"EUR",PT:"EUR",SK:"EUR",SI:"EUR",ES:"EUR",CH:"CHF",NO:"NOK",SE:"SEK",DK:"DKK",PL:"PLN",CZ:"CZK",HU:"HUF",RO:"RON",BG:"BGN",HR:"HRK",RU:"RUB",UA:"UAH",TR:"TRY",IL:"ILS",SA:"SAR",AE:"AED",EG:"EGP",ZA:"ZAR",NG:"NGN",KE:"KES",GH:"GHS",BR:"BRL",AR:"ARS",CL:"CLP",CO:"COP",PE:"PEN",MX:"MXN",CR:"CRC",GT:"GTQ",PA:"PAB",UY:"UYU"}[e]||"USD"}static getCountryFromTimezone(e){return{"America/New_York":"US","America/Chicago":"US","America/Denver":"US","America/Los_Angeles":"US","America/Toronto":"CA","America/Vancouver":"CA","America/Montreal":"CA","Europe/London":"GB","Europe/Dublin":"IE","Europe/Paris":"FR","Europe/Berlin":"DE","Europe/Rome":"IT","Europe/Madrid":"ES","Europe/Amsterdam":"NL","Europe/Stockholm":"SE","Europe/Oslo":"NO","Europe/Copenhagen":"DK","Europe/Helsinki":"FI","Europe/Warsaw":"PL","Europe/Prague":"CZ","Europe/Vienna":"AT","Europe/Zurich":"CH","Europe/Budapest":"HU","Asia/Tokyo":"JP","Asia/Seoul":"KR","Asia/Shanghai":"CN","Asia/Hong_Kong":"HK","Asia/Singapore":"SG","Asia/Bangkok":"TH","Asia/Manila":"PH","Asia/Jakarta":"ID","Asia/Kuala_Lumpur":"MY","Asia/Kolkata":"IN","Asia/Dhaka":"BD","Asia/Karachi":"PK","Australia/Sydney":"AU","Australia/Melbourne":"AU","Australia/Perth":"AU","Pacific/Auckland":"NZ","Africa/Johannesburg":"ZA","Africa/Cairo":"EG","America/Sao_Paulo":"BR","America/Mexico_City":"MX","America/Argentina/Buenos_Aires":"AR"}[e]||null}static extractUtmParameters(e=window.location.href){const n=new URLSearchParams(new URL(e).search),r={};return["utm_source","utm_medium","utm_campaign","utm_term","utm_content","gclid","fbclid"].forEach(o=>{const a=n.get(o);a&&(r[o]=a)}),r}static async createUserSession(e){try{console.log("Creating enhanced user session with tracking data:",{userId:e.userId,deviceType:e.deviceType,countryCode:e.countryCode,currency:e.currency,utmSource:e.utmSource,language:e.language});const{data:n,error:r}=await Ze.rpc("enhanced_manage_user_session",{p_user_id:e.userId,p_device_type:e.deviceType,p_user_agent:e.userAgent,p_entry_page:e.entryPage,p_last_active_page:e.lastActivePage,p_language:e.language,p_referrer:e.referrer,p_ip_address:e.ipAddress,p_country_code:e.countryCode,p_currency:e.currency,p_utm_source:e.utmSource,p_utm_medium:e.utmMedium,p_utm_campaign:e.utmCampaign,p_utm_term:e.utmTerm,p_utm_content:e.utmContent,p_gclid:e.gclid,p_fbclid:e.fbclid,p_attribution_data:e.attributionData||{}});return r?(console.error("Error creating enhanced user session:",r),null):(console.log("Enhanced user session created successfully with ID:",n),n)}catch(n){return console.error("Exception creating enhanced user session:",n),null}}static async trackConversion(e,n,r={}){try{const{error:i}=await Ze.rpc("track_conversion_event",{p_session_id:e,p_event_type:n,p_event_data:r});i?console.error("Error tracking conversion event:",i):console.log("Conversion event tracked:",n,r)}catch(i){console.error("Exception tracking conversion event:",i)}}static async getAttributionAnalytics(e,n){try{const{data:r,error:i}=await Ze.rpc("get_attribution_analytics",{p_start_date:e,p_end_date:n});return i?(console.error("Error getting attribution analytics:",i),null):r}catch(r){return console.error("Exception getting attribution analytics:",r),null}}}Mt(Cp,"locationCache",null),Mt(Cp,"locationPromise",null);const aJ=_.createContext(void 0),OB={country:"DEFAULT",currency:"USD",timezone:"UTC"};function eve({children:t}){const[e,n]=_.useState(null),[r,i]=_.useState(!0),[o,a]=_.useState(null),s=async()=>{try{i(!0),a(null),console.log("[LocationContext] Starting location detection");const u=await Cp.detectLocation();u?(console.log("[LocationContext] Location detected:",u),n(u)):(console.log("[LocationContext] Using default location"),n(OB))}catch(u){console.error("[LocationContext] Location detection failed:",u),a(u instanceof Error?u.message:"Location detection failed"),n(OB)}finally{i(!1)}},l=async()=>{await s()};_.useEffect(()=>{s()},[]);const c={locationData:e,isLoading:r,error:o,refreshLocation:l};return d.jsx(aJ.Provider,{value:c,children:t})}function tve(){const t=_.useContext(aJ);if(t===void 0)throw new Error("useLocation must be used within a LocationProvider");return t}const ih=()=>{const t=navigator.userAgent.toLowerCase(),e=/android/i.test(t),n=window.matchMedia("(display-mode: standalone)").matches||t.includes("wv")||e&&t.includes("chrome")&&!t.includes("mobile safari"),r=window.matchMedia("(display-mode: standalone)").matches;return{isTWA:n,isAndroidTWA:n&&e,isStandalone:r,canExit:n||r}},nve=()=>{if(ih().canExit)try{window.close&&window.close(),setTimeout(()=>{window.location.href="about:blank"},100)}catch(e){console.warn("Could not exit TWA app:",e),window.location.href="https://google.com"}else console.warn("App exit not supported in current environment")},NM=t=>{const e=ih();return!e.isTWA&&!e.isStandalone?!1:t.startsWith("/app/")&&t!=="/app/onboarding"&&t!=="/app/auth"},LB=()=>window.history.length>1,sJ=_.createContext(void 0),DB=2,FB=2e3;function rve({children:t}){const[e,n]=_.useState(null),[r,i]=_.useState(null),[o,a]=_.useState(!0),[s,l]=_.useState(!1),[c,u]=_.useState(0),[f,h]=_.useState(0),[p,y]=_.useState(!1),[g,v]=_.useState(null),[b,w]=_.useState(!1),[T,C]=_.useState(null),[P,M]=_.useState(!1),[k,I]=_.useState(null),[U,z]=_.useState(!1),[O,B]=_.useState(!1),$=Wi(),F=ih();_.useEffect(()=>{(async()=>{try{console.log("[AuthContext] Initializing native services"),await Di.initialize(),await w1.initialize(),console.log("[AuthContext] Native services initialized")}catch(he){console.error("[AuthContext] Failed to initialize native services:",he)}})()},[]);const J=()=>{var xe;const he=(navigator.language||((xe=navigator.languages)==null?void 0:xe[0])||"en").split("-")[0].toLowerCase();return["en","es","fr","de","it","pt","ru","zh","ja","ko","ar","hi","bn"].includes(he)?he:"en"},K=()=>{const ce=document.referrer;if(!ce)return null;try{const he=new URL(ce),ee=new URL(window.location.href);if(he.hostname!==ee.hostname)return ce}catch(he){console.warn("Error parsing referrer URL:",he)}return null},Z=async ce=>{var he,ee;try{if(console.log("Creating enhanced user session for user:",ce),k)return console.log("Session already exists for user, skipping creation"),!0;const xe=/mobile|android|iphone|ipad|ipod/i.test(navigator.userAgent)?"mobile":"desktop",be=J(),Ae=K(),Ce=Cp.extractUtmParameters();let oe=null;try{oe=await Cp.detectLocation(),console.log("Location detected:",oe)}catch(me){console.warn("Location detection failed:",me)}const ae={userId:ce,deviceType:xe,userAgent:navigator.userAgent,entryPage:window.location.pathname,lastActivePage:window.location.pathname,language:be,referrer:Ae,countryCode:oe==null?void 0:oe.country,currency:oe==null?void 0:oe.currency,utmSource:Ce.utm_source,utmMedium:Ce.utm_medium,utmCampaign:Ce.utm_campaign,utmTerm:Ce.utm_term,utmContent:Ce.utm_content,gclid:Ce.gclid,fbclid:Ce.fbclid,attributionData:{detectedAt:new Date().toISOString(),userAgent:navigator.userAgent.substring(0,200),screen:{width:(he=window.screen)==null?void 0:he.width,height:(ee=window.screen)==null?void 0:ee.height},viewport:{width:window.innerWidth,height:window.innerHeight}}};console.log("Creating session with enhanced tracking data:",{deviceType:ae.deviceType,language:ae.language,countryCode:ae.countryCode,currency:ae.currency,utmSource:ae.utmSource,hasLocation:!!oe});const Se=await Cp.createUserSession(ae);return Se?(I(Se),console.log("Enhanced user session created successfully with ID:",Se),!0):(console.error("Failed to create enhanced user session"),!1)}catch(xe){return console.error("Exception creating enhanced user session:",xe),!1}},H=async(ce,he={})=>{k&&await Cp.trackConversion(k,ce,he)};_.useEffect(()=>((()=>{const he=navigator.userAgent||navigator.vendor||window.opera,ee=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(he.toLowerCase());y(ee)})(),()=>{T&&clearTimeout(T)}),[T]);const Y=async(ce=!1)=>{var ee;if(!r||s&&!ce)return!1;if(g===!0||b)return!0;const he=Date.now();if(!ce&&he-f<5e3)return g||!1;try{l(!0),h(he),u(be=>be+1),Or(`Attempt #${c+1} to ensure profile exists for user: ${r.id}`,"AuthContext",{userEmail:r.email,provider:(ee=r.app_metadata)==null?void 0:ee.provider,hasUserMetadata:!!r.user_metadata,userMetadataKeys:r.user_metadata?Object.keys(r.user_metadata):[]});const xe=await X_(r);if(xe)return Or("Profile created or verified successfully","AuthContext"),u(0),v(!0),w(!0),lf.setLastProfileError(null),P||await Z(r.id)&&M(!0),!0;{const be=`Profile creation failed on attempt #${c+1}`;if(Ys(be,"AuthContext"),lf.setLastProfileError(be),v(!1),c<DB){const Ce=FB*Math.pow(1.5,c);Or(`Scheduling automatic retry in ${Ce}ms`,"AuthContext"),T&&clearTimeout(T);const oe=setTimeout(()=>{Or(`Executing automatic retry #${c+1}`,"AuthContext"),C(null),Y(!0).catch(ae=>{Ys(`Auto-retry failed: ${ae.message}`,"AuthContext",ae)})},Ce);C(oe)}}return xe}catch(xe){const be=`Error in ensureProfileExists: ${xe.message}`;return lf.setLastProfileError(be),v(!1),!1}finally{l(!1)}},L=async ce=>{if(!ce.timezone)try{ce.timezone=Intl.DateTimeFormat().resolvedOptions().timeZone,Or(`Adding detected timezone to metadata: ${ce.timezone}`,"AuthContext")}catch{}const he=await zye(r,ce);if(he){const{data:ee}=await Ze.auth.getUser();ee.user&&(i(ee.user),await H("profile_updated",{updatedFields:Object.keys(ce),timestamp:new Date().toISOString()}))}return he},N=async()=>{a(!0);try{await iJ(),ep("Google sign-in initiated","AuthContext"),await H("sign_in_attempt",{method:"google",timestamp:new Date().toISOString()})}catch(ce){Ys(`Google sign-in failed: ${ce.message}`,"AuthContext",ce),a(!1)}},V=async()=>{a(!0);try{await oJ(),ep("Apple ID sign-in initiated","AuthContext"),await H("sign_in_attempt",{method:"apple",timestamp:new Date().toISOString()})}catch(ce){Ys(`Apple ID sign-in failed: ${ce.message}`,"AuthContext",ce),a(!1)}},W=async(ce,he)=>{a(!0);try{await Xye(ce,he),ep("Email sign-in initiated","AuthContext"),await H("sign_in_attempt",{method:"email",timestamp:new Date().toISOString()})}catch(ee){Ys(`Email sign-in failed: ${ee.message}`,"AuthContext",ee),a(!1)}},ne=async(ce,he)=>{a(!0);try{await Kye(ce,he),ep("Sign-up initiated","AuthContext"),await H("sign_up_attempt",{method:"email",timestamp:new Date().toISOString()})}catch(ee){Ys(`Sign-up failed: ${ee.message}`,"AuthContext",ee),a(!1)}},se=async ce=>{a(!0);try{await Jye(ce),ep("Password reset initiated","AuthContext")}catch(he){Ys(`Password reset failed: ${he.message}`,"AuthContext",he),a(!1)}},te=async()=>{try{console.log("[AuthContext] Attempting to sign out user"),await H("sign_out",{timestamp:new Date().toISOString()}),n(null),i(null),v(null),w(!1),I(null),B(!1),await Zye(ce=>{console.log(`[AuthContext] Redirecting to ${ce} after signout`),window.location.href="/app/onboarding"})}catch(ce){console.error("[AuthContext] Error during sign out:",ce),It.error(`Error signing out: ${ce.message}`),window.location.href="/app/onboarding"}},ie=async()=>{try{const ce=await Qye();n(ce),i((ce==null?void 0:ce.user)??null)}catch{}},pe=async ce=>{var he;if(s||b)return g||!1;if(g===!0)return!0;try{if(l(!0),u(xe=>xe+1),Or(`Attempt #${c+1} to create profile for user: ${ce.email}`,"AuthContext",{userProvider:(he=ce.app_metadata)==null?void 0:he.provider,userMetadataKeys:ce.user_metadata?Object.keys(ce.user_metadata):[]}),(p||F.isTWA||F.isStandalone)&&(Or("Mobile/TWA device detected, adding stabilization delay","AuthContext"),await new Promise(xe=>setTimeout(xe,2e3))),await X_(ce))return Or(`Profile created or verified for user: ${ce.email}`,"AuthContext"),u(0),v(!0),w(!0),lf.setLastProfileError(null),P||await Z(ce.id)&&M(!0),!0;{if(Ys("First attempt to create profile failed, retrying once...","AuthContext"),await new Promise(Ce=>setTimeout(Ce,2500)),await X_(ce))return Or(`Profile created or verified on retry for user: ${ce.email}`,"AuthContext"),u(0),v(!0),w(!0),lf.setLastProfileError(null),P||await Z(ce.id)&&M(!0),!0;const be=`Failed to create profile after retry for user: ${ce.email}`;if(Ys(be,"AuthContext"),lf.setLastProfileError(be),v(!1),c<DB){const Ce=FB*Math.pow(1.5,c);Or(`Scheduling automatic retry in ${Ce}ms`,"AuthContext"),T&&clearTimeout(T);const oe=setTimeout(()=>{Or(`Executing automatic retry #${c+1}`,"AuthContext"),C(null),Y(!0).catch(ae=>{Ys(`Auto-retry failed: ${ae.message}`,"AuthContext",ae)})},Ce);C(oe)}return!1}}catch(ee){const xe=`Error in profile creation: ${ee.message}`;return lf.setLastProfileError(xe),v(!1),!1}finally{l(!1)}};_.useEffect(()=>{if(U)return;const{data:{subscription:ce}}=Ze.auth.onAuthStateChange(async(he,ee)=>{var be,Ae;if(ep(`Auth state changed: ${he}, user: ${(be=ee==null?void 0:ee.user)==null?void 0:be.email}`,"AuthContext"),(ee==null?void 0:ee.access_token)===(e==null?void 0:e.access_token)&&he!=="SIGNED_OUT")return;if(n(ee),i((ee==null?void 0:ee.user)??null),O||setTimeout(()=>{B(!0)},1e3),he==="SIGNED_IN"&&(ee!=null&&ee.user)){M(!1),I(null);const Ce=p||F.isTWA||F.isStandalone?3e3:2e3;setTimeout(()=>{pe(ee.user).catch(oe=>{Ys(`Error in initial profile creation: ${oe.message}`,"AuthContext",oe)})},Ce),await H("sign_in_success",{method:((Ae=ee.user.app_metadata)==null?void 0:Ae.provider)||"unknown",timestamp:new Date().toISOString()})}const xe=F.isTWA||F.isStandalone?1500:800;setTimeout(()=>{a(!1)},xe),he==="SIGNED_IN"?nc($.pathname)&&It.success("Signed in successfully"):he==="SIGNED_OUT"&&(v(null),w(!1),M(!1),I(null),B(!1),lf.setLastProfileError(null),T&&(clearTimeout(T),C(null)),nc($.pathname)&&It.info("Signed out"))});return Ze.auth.getSession().then(async({data:{session:he}})=>{var xe;if(ep(`Initial session check: ${((xe=he==null?void 0:he.user)==null?void 0:xe.email)||"No session"}`,"AuthContext"),n(he),i((he==null?void 0:he.user)??null),he!=null&&he.user){M(!1),I(null);const be=p||F.isTWA||F.isStandalone?3e3:2e3;setTimeout(()=>{pe(he.user).catch(Ae=>{Ys(`Error in initial profile creation: ${Ae.message}`,"AuthContext",Ae)})},be)}const ee=F.isTWA||F.isStandalone?2e3:1e3;setTimeout(()=>{a(!1),z(!0),B(!0)},ee)}),()=>{ce.unsubscribe(),T&&clearTimeout(T)}},[U,p,$.pathname,F.isTWA,F.isStandalone]);const de={session:e,user:r,isLoading:o,signInWithGoogle:N,signInWithApple:V,signOut:te,refreshSession:ie,signInWithEmail:W,signUp:ne,resetPassword:se,updateUserProfile:L,ensureProfileExists:Y};return d.jsx(sJ.Provider,{value:de,children:t})}function ive({children:t}){return d.jsx(eve,{children:d.jsx(rve,{children:t})})}function or(){const t=_.useContext(sJ);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}const lJ=_.createContext(void 0),RM=(t,e)=>{try{return localStorage.getItem(t)||e}catch{return e}},jM=(t,e)=>{try{localStorage.setItem(t,e)}catch{}},ove=()=>{try{return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}catch{return"light"}};function ave({children:t}){const[e,n]=_.useState(()=>RM("feelosophy-theme","system")||"system"),[r,i]=_.useState(()=>ove()),[o,a]=_.useState(()=>RM("feelosophy-color-theme","Calm")||"Calm"),[s,l]=_.useState(()=>RM("feelosophy-custom-color","#3b82f6"));_.useEffect(()=>{try{const h=window.matchMedia("(prefers-color-scheme: dark)"),p=y=>{const g=y.matches?"dark":"light";if(i(g),e==="system"){const v=window.document.documentElement;v.classList.remove("light","dark"),v.classList.add(g)}};if(i(h.matches?"dark":"light"),e==="system"){const y=window.document.documentElement;y.classList.remove("light","dark"),y.classList.add(h.matches?"dark":"light")}return h.addEventListener("change",p),()=>{h.removeEventListener("change",p)}}catch(h){console.warn("Theme system theme detection error:",h)}},[e]),_.useEffect(()=>{try{const h=window.document.documentElement;h.classList.remove("light","dark"),e==="system"?h.classList.add(r):h.classList.add(e),jM("feelosophy-theme",e)}catch(h){console.warn("Theme application error:",h)}},[e,r]);const c=h=>{switch(h){case"Default":return"#3b82f6";case"Calm":return"#8b5cf6";case"Soothing":return"#FFDEE2";case"Energy":return"#f59e0b";case"Focus":return"#10b981";case"Custom":return s;default:return"#3b82f6"}},u=h=>{const p=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(h);return p?{r:parseInt(p[1],16),g:parseInt(p[2],16),b:parseInt(p[3],16)}:null},f=(h,p,y)=>{h/=255,p/=255,y/=255;const g=Math.max(h,p,y),v=Math.min(h,p,y);let b=0,w=0;const T=(g+v)/2;if(g!==v){const C=g-v;switch(w=T>.5?C/(2-g-v):C/(g+v),g){case h:b=(p-y)/C+(p<y?6:0);break;case p:b=(y-h)/C+2;break;case y:b=(h-p)/C+4;break}b/=6}return[Math.round(b*360),Math.round(w*100),Math.round(T*100)]};return _.useEffect(()=>{try{jM("feelosophy-color-theme",o);const h=window.document.documentElement,p=c(o);h.style.setProperty("--color-theme",p);const y=u(p);if(y){const[g,v,b]=f(y.r,y.g,y.b);h.style.setProperty("--primary",`${g} ${v}% ${b}%`),h.style.setProperty("--ring",`${g} ${v}% ${b}%`),h.style.setProperty("--primary-h",`${g}`),h.style.setProperty("--primary-s",`${v}%`),h.style.setProperty("--primary-l",`${b}%`);const w=document.getElementById("theme-colors-style")||document.createElement("style");w.id="theme-colors-style",w.textContent=`
          :root {
            --theme-color: ${p};
            --theme-color-rgb: ${y.r}, ${y.g}, ${y.b};
            --theme-light: color-mix(in srgb, ${p} 30%, white);
            --theme-lighter: color-mix(in srgb, ${p} 15%, white);
            --theme-dark: color-mix(in srgb, ${p} 30%, black);
            --theme-darker: color-mix(in srgb, ${p} 50%, black);
          }
          .text-theme { color: ${p} !important; }
          .text-theme-light { color: var(--theme-light) !important; }
          .text-theme-dark { color: var(--theme-dark) !important; }
          
          .bg-theme { background-color: ${p} !important; }
          .bg-theme-light { background-color: var(--theme-light) !important; }
          .bg-theme-lighter { background-color: var(--theme-lighter) !important; }
          .bg-theme-dark { background-color: var(--theme-dark) !important; }
          
          .border-theme { border-color: ${p} !important; }
          .ring-theme { --tw-ring-color: ${p} !important; }
          
          .stroke-theme { stroke: ${p} !important; }
          .fill-theme { fill: ${p} !important; }
          
          .hover\\:bg-theme:hover { background-color: ${p} !important; }
          .hover\\:text-theme:hover { color: ${p} !important; }
          .hover\\:border-theme:hover { border-color: ${p} !important; }
          
          .text-theme-color, .theme-text { color: ${p} !important; }
          .bg-theme-color, .theme-bg { background-color: ${p} !important; }
          .border-theme-color, .theme-border { border-color: ${p} !important; }
          
          button.theme-button, 
          .theme-button {
            background-color: ${p} !important;
            color: white !important;
          }
          
          button.theme-button-outline, 
          .theme-button-outline {
            background-color: transparent !important;
            border-color: ${p} !important;
            color: ${p} !important;
          }
          
          .theme-shadow {
            box-shadow: 0 4px 14px rgba(${y.r}, ${y.g}, ${y.b}, 0.25) !important;
          }
        `,document.getElementById("theme-colors-style")||document.head.appendChild(w)}}catch(h){console.warn("Color theme application error:",h)}},[o,s]),_.useEffect(()=>{try{if(jM("feelosophy-custom-color",s),o==="Custom"){const h=window.document.documentElement;h.style.setProperty("--color-theme",s);const p=u(s);if(p){const[y,g,v]=f(p.r,p.g,p.b);h.style.setProperty("--primary",`${y} ${g}% ${v}%`),h.style.setProperty("--ring",`${y} ${g}% ${v}%`),h.style.setProperty("--primary-h",`${y}`),h.style.setProperty("--primary-s",`${g}%`),h.style.setProperty("--primary-l",`${v}%`)}}}catch(h){console.warn("Custom color application error:",h)}},[s,o]),d.jsx(lJ.Provider,{value:{theme:e,setTheme:n,colorTheme:o,setColorTheme:a,customColor:s,setCustomColor:l,systemTheme:r},children:t})}function Zr(){const t=_.useContext(lJ);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t}const zB=768;function ui(){const[t,e]=_.useState(!1),[n,r]=_.useState(!1),[i,o]=_.useState(!1),[a,s]=_.useState(!1);_.useEffect(()=>{const c=()=>{if(new URLSearchParams(window.location.search).get("mobileDemo")==="true")return!0;if(typeof window.__forceMobileView<"u")return window.__forceMobileView;const P=window.innerWidth<zB,M=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),k="ontouchstart"in window||navigator.maxTouchPoints>0;return P||M&&k},u=()=>/iPhone|iPad|iPod/i.test(navigator.userAgent)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1,f=()=>/Android/i.test(navigator.userAgent),h=c(),p=u(),y=f();e(h),o(p),s(y),r(!0),console.log("Mobile detection initialized:",{isMobile:h,isIOS:p,isAndroid:y,width:window.innerWidth,userAgent:navigator.userAgent,touch:"ontouchstart"in window||navigator.maxTouchPoints>0});const g=()=>{const T=c();T!==t&&(console.log("Mobile state changed:",T,"width:",window.innerWidth),e(T))},v=()=>{console.log("Orientation change detected"),p?setTimeout(()=>{g()},100):g()};window.addEventListener("resize",g),window.addEventListener("orientationchange",v),p&&document.body.classList.add("ios-device"),y&&document.body.classList.add("android-device");const b=window.matchMedia(`(max-width: ${zB-1}px)`),w=()=>{e(c())};try{b.addEventListener("change",w)}catch{b.addListener&&b.addListener(w)}return setTimeout(()=>{const T=c();T!==t&&(console.log("Delayed mobile check different:",T,"width:",window.innerWidth),e(T))},500),()=>{window.removeEventListener("resize",g),window.removeEventListener("orientationchange",v);try{b.removeEventListener("change",w)}catch{b.removeListener&&b.removeListener(w)}p&&document.body.classList.remove("ios-device"),y&&document.body.classList.remove("android-device")}},[t]),_.useEffect(()=>(window.toggleMobileView=()=>{window.__forceMobileView=!window.__forceMobileView,console.log("Mobile view manually toggled:",window.__forceMobileView),e(window.__forceMobileView)},()=>{delete window.toggleMobileView}),[]);const l={isMobile:n?t:!1,isIOS:n?i:!1,isAndroid:n?a:!1};return Object.defineProperty(l,"valueOf",{value:function(){return this.isMobile}}),Object.defineProperty(l,"toString",{value:function(){return String(this.isMobile)}}),l}function KC(){const[t,e]=_.useState(null),[n,r]=_.useState(!0),[i,o]=_.useState(null),a=()=>{const u=localStorage.getItem("onboardingComplete")==="true";e(u);const f=localStorage.getItem("user_display_name");f&&o(f),r(!1)};return _.useEffect(()=>{a()},[]),{onboardingComplete:t,loading:n,displayName:i,completeOnboarding:()=>{localStorage.setItem("onboardingComplete","true"),e(!0)},resetOnboarding:()=>{localStorage.removeItem("onboardingComplete"),e(!1)},saveNameToProfile:async(u,f)=>{if(!(!u||!f))try{const{error:h}=await Ze.from("profiles").update({display_name:f,updated_at:new Date().toISOString()}).eq("id",u);h?console.error("Error saving display name to profile:",h):localStorage.removeItem("user_display_name")}catch(h){console.error("Error in saving display name:",h)}},checkOnboardingStatus:a}}function UB(){const t={online:navigator.onLine,speed:"medium",saveData:!1};if(!navigator.onLine)return{...t,online:!1,speed:"offline"};if("connection"in navigator){const e=navigator.connection;if(e){const n=e.downlink;let r="medium";return n&&(n<.5?r="slow":n<2?r="medium":r="fast"),{online:!0,speed:r,downlink:e.downlink,rtt:e.rtt,saveData:e.saveData||!1}}}return t}function cJ(){const[t,e]=_.useState(UB());return _.useEffect(()=>{const n=()=>{e(o=>({...o,online:!0}))},r=()=>{e(o=>({...o,online:!1,speed:"offline"}))},i=()=>{e(UB())};if(window.addEventListener("online",n),window.addEventListener("offline",r),"connection"in navigator){const o=navigator.connection;o&&o.addEventListener("change",i)}return()=>{if(window.removeEventListener("online",n),window.removeEventListener("offline",r),"connection"in navigator){const o=navigator.connection;o&&o.removeEventListener("change",i)}}},[]),t}function uJ(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=uJ(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Un(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=uJ(t))&&(r&&(r+=" "),r+=e);return r}const j3="-",sve=t=>{const e=cve(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:a=>{const s=a.split(j3);return s[0]===""&&s.length!==1&&s.shift(),dJ(s,e)||lve(a)},getConflictingClassGroupIds:(a,s)=>{const l=n[a]||[];return s&&r[a]?[...l,...r[a]]:l}}},dJ=(t,e)=>{var a;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),i=r?dJ(t.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const o=t.join(j3);return(a=e.validators.find(({validator:s})=>s(o)))==null?void 0:a.classGroupId},BB=/^\[(.+)\]$/,lve=t=>{if(BB.test(t)){const e=BB.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},cve=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return dve(Object.entries(t.classGroups),n).forEach(([o,a])=>{rO(a,r,o,e)}),r},rO=(t,e,n,r)=>{t.forEach(i=>{if(typeof i=="string"){const o=i===""?e:$B(e,i);o.classGroupId=n;return}if(typeof i=="function"){if(uve(i)){rO(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([o,a])=>{rO(a,$B(e,o),n,r)})})},$B=(t,e)=>{let n=t;return e.split(j3).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},uve=t=>t.isThemeGetter,dve=(t,e)=>e?t.map(([n,r])=>{const i=r.map(o=>typeof o=="string"?e+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([a,s])=>[e+a,s])):o);return[n,i]}):t,fve=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const i=(o,a)=>{n.set(o,a),e++,e>t&&(e=0,r=n,n=new Map)};return{get(o){let a=n.get(o);if(a!==void 0)return a;if((a=r.get(o))!==void 0)return i(o,a),a},set(o,a){n.has(o)?n.set(o,a):i(o,a)}}},fJ="!",hve=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,i=e[0],o=e.length,a=s=>{const l=[];let c=0,u=0,f;for(let v=0;v<s.length;v++){let b=s[v];if(c===0){if(b===i&&(r||s.slice(v,v+o)===e)){l.push(s.slice(u,v)),u=v+o;continue}if(b==="/"){f=v;continue}}b==="["?c++:b==="]"&&c--}const h=l.length===0?s:s.substring(u),p=h.startsWith(fJ),y=p?h.substring(1):h,g=f&&f>u?f-u:void 0;return{modifiers:l,hasImportantModifier:p,baseClassName:y,maybePostfixModifierPosition:g}};return n?s=>n({className:s,parseClassName:a}):a},pve=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},mve=t=>({cache:fve(t.cacheSize),parseClassName:hve(t),...sve(t)}),gve=/\s+/,yve=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i}=e,o=[],a=t.trim().split(gve);let s="";for(let l=a.length-1;l>=0;l-=1){const c=a[l],{modifiers:u,hasImportantModifier:f,baseClassName:h,maybePostfixModifierPosition:p}=n(c);let y=!!p,g=r(y?h.substring(0,p):h);if(!g){if(!y){s=c+(s.length>0?" "+s:s);continue}if(g=r(h),!g){s=c+(s.length>0?" "+s:s);continue}y=!1}const v=pve(u).join(":"),b=f?v+fJ:v,w=b+g;if(o.includes(w))continue;o.push(w);const T=i(g,y);for(let C=0;C<T.length;++C){const P=T[C];o.push(b+P)}s=c+(s.length>0?" "+s:s)}return s};function vve(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=hJ(e))&&(r&&(r+=" "),r+=n);return r}const hJ=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=hJ(t[r]))&&(n&&(n+=" "),n+=e);return n};function xve(t,...e){let n,r,i,o=a;function a(l){const c=e.reduce((u,f)=>f(u),t());return n=mve(c),r=n.cache.get,i=n.cache.set,o=s,s(l)}function s(l){const c=r(l);if(c)return c;const u=yve(l,n);return i(l,u),u}return function(){return o(vve.apply(null,arguments))}}const jr=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},pJ=/^\[(?:([a-z-]+):)?(.+)\]$/i,wve=/^\d+\/\d+$/,bve=new Set(["px","full","screen"]),Sve=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Eve=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,_ve=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Tve=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Cve=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Fu=t=>Vy(t)||bve.has(t)||wve.test(t),cf=t=>u0(t,"length",Ive),Vy=t=>!!t&&!Number.isNaN(Number(t)),IM=t=>u0(t,"number",Vy),$x=t=>!!t&&Number.isInteger(Number(t)),Ave=t=>t.endsWith("%")&&Vy(t.slice(0,-1)),wn=t=>pJ.test(t),uf=t=>Sve.test(t),Mve=new Set(["length","size","percentage"]),Pve=t=>u0(t,Mve,mJ),kve=t=>u0(t,"position",mJ),Nve=new Set(["image","url"]),Rve=t=>u0(t,Nve,Lve),jve=t=>u0(t,"",Ove),Hx=()=>!0,u0=(t,e,n)=>{const r=pJ.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},Ive=t=>Eve.test(t)&&!_ve.test(t),mJ=()=>!1,Ove=t=>Tve.test(t),Lve=t=>Cve.test(t),Dve=()=>{const t=jr("colors"),e=jr("spacing"),n=jr("blur"),r=jr("brightness"),i=jr("borderColor"),o=jr("borderRadius"),a=jr("borderSpacing"),s=jr("borderWidth"),l=jr("contrast"),c=jr("grayscale"),u=jr("hueRotate"),f=jr("invert"),h=jr("gap"),p=jr("gradientColorStops"),y=jr("gradientColorStopPositions"),g=jr("inset"),v=jr("margin"),b=jr("opacity"),w=jr("padding"),T=jr("saturate"),C=jr("scale"),P=jr("sepia"),M=jr("skew"),k=jr("space"),I=jr("translate"),U=()=>["auto","contain","none"],z=()=>["auto","hidden","clip","visible","scroll"],O=()=>["auto",wn,e],B=()=>[wn,e],$=()=>["",Fu,cf],F=()=>["auto",Vy,wn],J=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],K=()=>["solid","dashed","dotted","double","none"],Z=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],H=()=>["start","end","center","between","around","evenly","stretch"],Y=()=>["","0",wn],L=()=>["auto","avoid","all","avoid-page","page","left","right","column"],N=()=>[Vy,wn];return{cacheSize:500,separator:":",theme:{colors:[Hx],spacing:[Fu,cf],blur:["none","",uf,wn],brightness:N(),borderColor:[t],borderRadius:["none","","full",uf,wn],borderSpacing:B(),borderWidth:$(),contrast:N(),grayscale:Y(),hueRotate:N(),invert:Y(),gap:B(),gradientColorStops:[t],gradientColorStopPositions:[Ave,cf],inset:O(),margin:O(),opacity:N(),padding:B(),saturate:N(),scale:N(),sepia:Y(),skew:N(),space:B(),translate:B()},classGroups:{aspect:[{aspect:["auto","square","video",wn]}],container:["container"],columns:[{columns:[uf]}],"break-after":[{"break-after":L()}],"break-before":[{"break-before":L()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...J(),wn]}],overflow:[{overflow:z()}],"overflow-x":[{"overflow-x":z()}],"overflow-y":[{"overflow-y":z()}],overscroll:[{overscroll:U()}],"overscroll-x":[{"overscroll-x":U()}],"overscroll-y":[{"overscroll-y":U()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",$x,wn]}],basis:[{basis:O()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",wn]}],grow:[{grow:Y()}],shrink:[{shrink:Y()}],order:[{order:["first","last","none",$x,wn]}],"grid-cols":[{"grid-cols":[Hx]}],"col-start-end":[{col:["auto",{span:["full",$x,wn]},wn]}],"col-start":[{"col-start":F()}],"col-end":[{"col-end":F()}],"grid-rows":[{"grid-rows":[Hx]}],"row-start-end":[{row:["auto",{span:[$x,wn]},wn]}],"row-start":[{"row-start":F()}],"row-end":[{"row-end":F()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",wn]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",wn]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...H()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...H(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...H(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[w]}],px:[{px:[w]}],py:[{py:[w]}],ps:[{ps:[w]}],pe:[{pe:[w]}],pt:[{pt:[w]}],pr:[{pr:[w]}],pb:[{pb:[w]}],pl:[{pl:[w]}],m:[{m:[v]}],mx:[{mx:[v]}],my:[{my:[v]}],ms:[{ms:[v]}],me:[{me:[v]}],mt:[{mt:[v]}],mr:[{mr:[v]}],mb:[{mb:[v]}],ml:[{ml:[v]}],"space-x":[{"space-x":[k]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[k]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",wn,e]}],"min-w":[{"min-w":[wn,e,"min","max","fit"]}],"max-w":[{"max-w":[wn,e,"none","full","min","max","fit","prose",{screen:[uf]},uf]}],h:[{h:[wn,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[wn,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[wn,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[wn,e,"auto","min","max","fit"]}],"font-size":[{text:["base",uf,cf]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",IM]}],"font-family":[{font:[Hx]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",wn]}],"line-clamp":[{"line-clamp":["none",Vy,IM]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Fu,wn]}],"list-image":[{"list-image":["none",wn]}],"list-style-type":[{list:["none","disc","decimal",wn]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[b]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[b]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...K(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Fu,cf]}],"underline-offset":[{"underline-offset":["auto",Fu,wn]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:B()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",wn]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",wn]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[b]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...J(),kve]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Pve]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Rve]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[y]}],"gradient-via-pos":[{via:[y]}],"gradient-to-pos":[{to:[y]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[s]}],"border-w-x":[{"border-x":[s]}],"border-w-y":[{"border-y":[s]}],"border-w-s":[{"border-s":[s]}],"border-w-e":[{"border-e":[s]}],"border-w-t":[{"border-t":[s]}],"border-w-r":[{"border-r":[s]}],"border-w-b":[{"border-b":[s]}],"border-w-l":[{"border-l":[s]}],"border-opacity":[{"border-opacity":[b]}],"border-style":[{border:[...K(),"hidden"]}],"divide-x":[{"divide-x":[s]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[s]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[b]}],"divide-style":[{divide:K()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...K()]}],"outline-offset":[{"outline-offset":[Fu,wn]}],"outline-w":[{outline:[Fu,cf]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:$()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[b]}],"ring-offset-w":[{"ring-offset":[Fu,cf]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",uf,jve]}],"shadow-color":[{shadow:[Hx]}],opacity:[{opacity:[b]}],"mix-blend":[{"mix-blend":[...Z(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Z()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",uf,wn]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[f]}],saturate:[{saturate:[T]}],sepia:[{sepia:[P]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[b]}],"backdrop-saturate":[{"backdrop-saturate":[T]}],"backdrop-sepia":[{"backdrop-sepia":[P]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",wn]}],duration:[{duration:N()}],ease:[{ease:["linear","in","out","in-out",wn]}],delay:[{delay:N()}],animate:[{animate:["none","spin","ping","pulse","bounce",wn]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[C]}],"scale-x":[{"scale-x":[C]}],"scale-y":[{"scale-y":[C]}],rotate:[{rotate:[$x,wn]}],"translate-x":[{"translate-x":[I]}],"translate-y":[{"translate-y":[I]}],"skew-x":[{"skew-x":[M]}],"skew-y":[{"skew-y":[M]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",wn]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",wn]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":B()}],"scroll-mx":[{"scroll-mx":B()}],"scroll-my":[{"scroll-my":B()}],"scroll-ms":[{"scroll-ms":B()}],"scroll-me":[{"scroll-me":B()}],"scroll-mt":[{"scroll-mt":B()}],"scroll-mr":[{"scroll-mr":B()}],"scroll-mb":[{"scroll-mb":B()}],"scroll-ml":[{"scroll-ml":B()}],"scroll-p":[{"scroll-p":B()}],"scroll-px":[{"scroll-px":B()}],"scroll-py":[{"scroll-py":B()}],"scroll-ps":[{"scroll-ps":B()}],"scroll-pe":[{"scroll-pe":B()}],"scroll-pt":[{"scroll-pt":B()}],"scroll-pr":[{"scroll-pr":B()}],"scroll-pb":[{"scroll-pb":B()}],"scroll-pl":[{"scroll-pl":B()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",wn]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Fu,cf,IM]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},Fve=xve(Dve);function He(...t){return Fve(Un(t))}function xi({className:t,...e}){return d.jsx("div",{className:He("animate-pulse rounded-md bg-muted",t),...e})}function zg({className:t,shimmerWidth:e="w-2/3",...n}){return d.jsx("div",{className:He("relative overflow-hidden rounded-md bg-muted before:absolute before:inset-0 before:-translate-x-full before:animate-[shimmer_1.5s_infinite] before:bg-gradient-to-r before:from-transparent before:via-white/10 before:to-transparent",t),...n})}const zve=5,Uve=1e3,Yu={ADD_TOAST:"ADD_TOAST",UPDATE_TOAST:"UPDATE_TOAST",DISMISS_TOAST:"DISMISS_TOAST",REMOVE_TOAST:"REMOVE_TOAST"};let OM=0;function Bve(){return OM=(OM+1)%Number.MAX_SAFE_INTEGER,OM.toString()}const LM=new Map,HB=t=>{if(LM.has(t))return;const e=setTimeout(()=>{LM.delete(t),Rw({type:Yu.REMOVE_TOAST,toastId:t})},Uve);LM.set(t,e)},$ve=(t,e)=>{switch(e.type){case Yu.ADD_TOAST:return{...t,toasts:[e.toast,...t.toasts].slice(0,zve)};case Yu.UPDATE_TOAST:return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case Yu.DISMISS_TOAST:{const{toastId:n}=e;return n?HB(n):t.toasts.forEach(r=>{HB(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case Yu.REMOVE_TOAST:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},K_=[];let J_={toasts:[]};function Rw(t){J_=$ve(J_,t),K_.forEach(e=>{e(J_)})}function I3(t){const e=t.id??Bve(),n=i=>Rw({type:Yu.UPDATE_TOAST,toast:{...i,id:e}}),r=()=>Rw({type:Yu.DISMISS_TOAST,toastId:e});return Rw({type:Yu.ADD_TOAST,toast:{...t,id:e,open:!0,onOpenChange:i=>{i||r()}}}),{id:e,dismiss:r,update:n}}function oh(){const[t,e]=_.useState(J_);return _.useEffect(()=>(K_.push(e),()=>{const n=K_.indexOf(e);n>-1&&K_.splice(n,1)}),[t]),{...t,toast:I3,dismiss:n=>Rw({type:Yu.DISMISS_TOAST,toastId:n})}}let Hve=class{constructor(){Mt(this,"cache",new Map);Mt(this,"storageKey","soulo-translation-cache");this.loadFromLocalStorage(),console.log("[TranslationCache] GOOGLE TRANSLATE ONLY - Initialized cache with size:",this.getCacheSize())}loadFromLocalStorage(){try{const e=localStorage.getItem(this.storageKey);if(e){const n=JSON.parse(e);Object.entries(n).forEach(([r,i])=>{const o=new Map;Object.entries(i).forEach(([a,s])=>{o.set(a,s)}),this.cache.set(r,o)}),console.log(`[TranslationCache] Loaded ${this.getCacheSize()} translations from local storage`)}}catch(e){console.error("[TranslationCache] Error loading from localStorage:",e)}}saveToLocalStorage(){try{const e={};this.cache.forEach((n,r)=>{e[r]=Object.fromEntries(n)}),localStorage.setItem(this.storageKey,JSON.stringify(e))}catch(e){console.error("[TranslationCache] Error saving to localStorage:",e)}}get(e,n){if(!n||e==="en")return n;const r=this.cache.get(e);return r&&r.has(n)?(console.log(`[TranslationCache] Cache hit for ${e}:"${n.substring(0,20)}..."`),r.get(n)||null):(console.log(`[TranslationCache] Cache miss for ${e}:"${n.substring(0,20)}..."`),null)}set(e,n,r){if(e==="en"||!n||!r||n===r)return;console.log(`[TranslationCache] Caching translation for ${e}:"${n.substring(0,20)}..."`);let i=this.cache.get(e);i||(i=new Map,this.cache.set(e,i)),i.set(n,r),this.saveToLocalStorage()}clearLanguage(e){console.log(`[TranslationCache] Clearing cache for language: ${e}`),this.cache.delete(e),this.saveToLocalStorage()}clearAll(){console.log("[TranslationCache] Clearing entire cache"),this.cache.clear(),localStorage.removeItem(this.storageKey)}getCacheSize(){let e=0;return this.cache.forEach(n=>{e+=n.size}),e}getAllForLanguage(e){const n=this.cache.get(e);return n?Object.fromEntries(n):{}}};const Sy=new Hve,iO=(t,e)=>e.some(n=>t instanceof n);let VB,WB;function Vve(){return VB||(VB=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Wve(){return WB||(WB=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const oO=new WeakMap,DM=new WeakMap,JC=new WeakMap;function Gve(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",a)},o=()=>{n(Up(t.result)),i()},a=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",a)});return JC.set(e,t),e}function qve(t){if(oO.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",a),t.removeEventListener("abort",a)},o=()=>{n(),i()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",a),t.addEventListener("abort",a)});oO.set(t,e)}let aO={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return oO.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Up(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function gJ(t){aO=t(aO)}function Yve(t){return Wve().includes(t)?function(...e){return t.apply(sO(this),e),Up(this.request)}:function(...e){return Up(t.apply(sO(this),e))}}function Xve(t){return typeof t=="function"?Yve(t):(t instanceof IDBTransaction&&qve(t),iO(t,Vve())?new Proxy(t,aO):t)}function Up(t){if(t instanceof IDBRequest)return Gve(t);if(DM.has(t))return DM.get(t);const e=Xve(t);return e!==t&&(DM.set(t,e),JC.set(e,t)),e}const sO=t=>JC.get(t);function Kve(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const a=indexedDB.open(t,e),s=Up(a);return r&&a.addEventListener("upgradeneeded",l=>{r(Up(a.result),l.oldVersion,l.newVersion,Up(a.transaction),l)}),n&&a.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),s.then(l=>{o&&l.addEventListener("close",()=>o()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),s}const Jve=["get","getKey","getAll","getAllKeys","count"],Zve=["put","add","delete","clear"],FM=new Map;function GB(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(FM.get(e))return FM.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=Zve.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Jve.includes(n)))return;const o=async function(a,...s){const l=this.transaction(a,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(s.shift())),(await Promise.all([c[n](...s),i&&l.done]))[0]};return FM.set(e,o),o}gJ(t=>({...t,get:(e,n,r)=>GB(e,n)||t.get(e,n,r),has:(e,n)=>!!GB(e,n)||t.has(e,n)}));const Qve=["continue","continuePrimaryKey","advance"],qB={},lO=new WeakMap,yJ=new WeakMap,e0e={get(t,e){if(!Qve.includes(e))return t[e];let n=qB[e];return n||(n=qB[e]=function(...r){lO.set(this,yJ.get(this)[e](...r))}),n}};async function*t0e(...t){let e=this;if(e instanceof IDBCursor||(e=await e.openCursor(...t)),!e)return;e=e;const n=new Proxy(e,e0e);for(yJ.set(n,e),JC.set(n,sO(e));e;)yield n,e=await(lO.get(n)||e.continue()),lO.delete(n)}function YB(t,e){return e===Symbol.asyncIterator&&iO(t,[IDBIndex,IDBObjectStore,IDBCursor])||e==="iterate"&&iO(t,[IDBIndex,IDBObjectStore])}gJ(t=>({...t,get(e,n,r){return YB(e,n)?t0e:t.get(e,n,r)},has(e,n){return YB(e,n)||t.has(e,n)}}));class n0e{constructor(){Mt(this,"dbPromise");Mt(this,"DB_NAME","translation-cache");Mt(this,"STORE_NAME","translations");Mt(this,"DB_VERSION",1);this.dbPromise=this.initDatabase()}async initDatabase(){return Kve(this.DB_NAME,this.DB_VERSION,{upgrade(e){e.objectStoreNames.contains("translations")||(e.createObjectStore("translations",{keyPath:"id"}).createIndex("language","language",{unique:!1}),console.log("TranslationCache: Created translations store"))}})}generateId(e,n){return`${n}-${e.substring(0,50)}`}async getTranslation(e,n){try{const r=await this.dbPromise,i=this.generateId(e,n);return r.get(this.STORE_NAME,i)}catch(r){console.error("TranslationCache: Error getting translation:",r);return}}async setTranslation(e){try{const n=await this.dbPromise,r=this.generateId(e.originalText,e.language);await n.put(this.STORE_NAME,{...e,id:r})}catch(n){console.error("TranslationCache: Error setting translation:",n)}}async clearCache(e){try{console.log(`TranslationCache: Clearing cache for language ${e}`);const r=(await this.dbPromise).transaction(this.STORE_NAME,"readwrite");let a=await r.objectStore(this.STORE_NAME).index("language").openCursor(e);for(;a;)await a.delete(),a=await a.continue();await r.done,console.log(`TranslationCache: Successfully cleared cache for ${e}`)}catch(n){console.error(`TranslationCache: Error clearing cache for ${e}:`,n)}}async getAllTranslations(){try{return(await this.dbPromise).getAll(this.STORE_NAME)}catch(e){return console.error("TranslationCache: Error getting all translations:",e),[]}}}const Ey=new n0e,r0e=Object.freeze(Object.defineProperty({__proto__:null,translationCache:Ey},Symbol.toStringTag,{value:"Module"}));class i0e{constructor(){Mt(this,"apiKey",null);Mt(this,"batchOperations",new Map)}async setApiKey(e){this.apiKey=e}hasApiKey(){return!!this.apiKey}async translate(e,n="en",r){if(!r)return console.warn("[TranslationService] No target language provided, skipping translation"),e;if(n===r)return e;const i=await Ey.getTranslation(e,r);if(i)return console.log(`[TranslationService] Cache hit for: ${e}`),i.translatedText;console.log("[TranslationService] Using Supabase edge function for translation");try{const{data:o,error:a}=await Ze.functions.invoke("translate-text",{body:{text:e,sourceLanguage:n==="auto"?"en":n,targetLanguage:r,cleanResult:!0}});if(a)return console.error("[TranslationService] Edge function error:",a),e;if(o&&o.translatedText){const s=o.translatedText;return await Ey.setTranslation({originalText:e,translatedText:s,language:r,timestamp:Date.now(),version:1}),console.log(`[TranslationService] Translated: "${e}" -> "${s}"`),s}return e}catch(o){return console.error("[TranslationService] Translation error:",o),e}}async batchTranslate(e){const{texts:n,targetLanguage:r,sourceLanguage:i="en"}=e,o=`${n.join("|")}-${i}-${r}`,a=this.batchOperations.get(o);if(a)return console.log("[TranslationService] APP-LEVEL: Reusing existing batch operation"),a;const s=this.performBatchTranslation(n,i,r);this.batchOperations.set(o,s);try{return await s}finally{this.batchOperations.delete(o)}}async performBatchTranslation(e,n,r){const i=new Map;if(n===r)return e.forEach(s=>i.set(s,s)),i;console.log(`[TranslationService] APP-LEVEL: Starting atomic batch translation for ${e.length} texts`);const o=[],a=new Map;for(const s of e){const l=await Ey.getTranslation(s,r);l?a.set(s,l.translatedText):o.push(s)}if(console.log(`[TranslationService] APP-LEVEL: Cache hits: ${a.size}, need translation: ${o.length}`),a.forEach((s,l)=>{i.set(l,s)}),o.length>0)try{const{data:s,error:l}=await Ze.functions.invoke("translate-text",{body:{texts:o,sourceLanguage:n==="auto"?"en":n,targetLanguage:r,cleanResult:!0}});if(l)console.error("[TranslationService] APP-LEVEL: Batch translation error:",l),o.forEach(c=>i.set(c,c));else if(s&&s.translatedTexts){const c=s.translatedTexts;for(let u=0;u<o.length;u++){const f=o[u],h=c[u]||f;i.set(f,h),await Ey.setTranslation({originalText:f,translatedText:h,language:r,timestamp:Date.now(),version:1})}console.log(`[TranslationService] APP-LEVEL: Batch translation complete: ${c.length} texts translated`)}}catch(s){console.error("[TranslationService] APP-LEVEL: Error in batch translation:",s),o.forEach(l=>i.set(l,l))}return console.log(`[TranslationService] APP-LEVEL: Atomic batch translation complete: ${i.size}/${e.length} texts processed`),i}async getCachedTranslation(e,n="en",r){if(!r||n===r)return e;const i=await Ey.getTranslation(e,r);return i?i.translatedText:null}}const ZC=new i0e;class jw{static async preloadSoulNetData(e,n,r){console.log(`[SoulNetPreloadService] Preloading data for user ${e}, range ${n}, language ${r}`);const i=`${e}-${n}-${r}`,o=this.getCachedData(i);if(o)return console.log(`[SoulNetPreloadService] Using cached data for ${i}`),o.data;try{const a=this.getStartDate(n),{data:s,error:l}=await Ze.from("Journal Entries").select('id, themeemotion, "refined text", "transcription text"').eq("user_id",e).gte("created_at",a.toISOString()).order("created_at",{ascending:!1});if(l)return console.error("[SoulNetPreloadService] Error fetching journal entries:",l),null;if(!s||s.length===0)return console.log("[SoulNetPreloadService] No entries found"),{nodes:[],links:[],translations:new Map,connectionPercentages:new Map};console.log(`[SoulNetPreloadService] Found ${s.length} entries for processing`);const c=this.processEntities(s),u=new Map,f=new Map;if(r!=="en"&&c.nodes.length>0){const p=[...new Set(c.nodes.map(y=>y.id))];console.log(`[SoulNetPreloadService] Pre-translating ${p.length} unique node names for ${n} range`);try{const y=await ZC.batchTranslate({texts:p,targetLanguage:r});console.log(`[SoulNetPreloadService] Successfully translated ${y.size}/${p.length} nodes`),y.forEach((g,v)=>{u.set(v,g),Sy.set(r,v,g)}),p.forEach(g=>{u.has(g)||(console.warn(`[SoulNetPreloadService] No translation found for node: ${g}, using original`),u.set(g,g))})}catch(y){console.error("[SoulNetPreloadService] Error during batch translation:",y),p.forEach(g=>{u.set(g,g)})}}this.calculateConnectionPercentages(c,f);const h={nodes:c.nodes,links:c.links,translations:u,connectionPercentages:f};return this.setCachedData(i,{data:h,timestamp:Date.now(),userId:e,timeRange:n,language:r}),console.log(`[SoulNetPreloadService] Successfully preloaded and cached data for ${i} with ${h.nodes.length} nodes and ${h.translations.size} translations`),h}catch(a){return console.error("[SoulNetPreloadService] Error preloading data:",a),null}}static getCachedDataSync(e){const n=this.cache.get(e);if(n&&Date.now()-n.timestamp<this.CACHE_DURATION)return console.log(`[SoulNetPreloadService] Found valid cache for ${e}`),n.data;try{const r=localStorage.getItem(`${this.CACHE_KEY}-${e}`);if(r){const i=JSON.parse(r);if(Date.now()-i.timestamp<this.CACHE_DURATION)return i.data.translations=new Map(Object.entries(i.data.translations||{})),i.data.connectionPercentages=new Map(Object.entries(i.data.connectionPercentages||{})),this.cache.set(e,i),console.log(`[SoulNetPreloadService] Found valid localStorage cache for ${e}`),i.data}}catch(r){console.error("[SoulNetPreloadService] Error loading from localStorage:",r)}return console.log(`[SoulNetPreloadService] No valid cache found for ${e}`),null}static getCachedData(e){return this.getCachedDataSync(e)&&this.cache.get(e)||null}static setCachedData(e,n){this.cache.set(e,n);try{const r={...n,data:{...n.data,translations:Object.fromEntries(n.data.translations),connectionPercentages:Object.fromEntries(n.data.connectionPercentages)}};localStorage.setItem(`${this.CACHE_KEY}-${e}`,JSON.stringify(r))}catch(r){console.error("[SoulNetPreloadService] Error saving to localStorage:",r)}}static calculateConnectionPercentages(e,n){console.log("[SoulNetPreloadService] Pre-calculating connection percentages");const r=new Map;e.links.forEach(i=>{const o=r.get(i.source)||0,a=r.get(i.target)||0;r.set(i.source,o+i.value),r.set(i.target,a+i.value)}),e.links.forEach(i=>{const o=r.get(i.source)||1,a=r.get(i.target)||1,s=Math.round(i.value/o*100);n.set(`${i.source}-${i.target}`,s);const l=Math.round(i.value/a*100);n.set(`${i.target}-${i.source}`,l)}),console.log(`[SoulNetPreloadService] Pre-calculated ${n.size} connection percentages`)}static getStartDate(e){const n=new Date;switch(e){case"today":return new Date(n.setHours(0,0,0,0));case"week":const r=new Date(n);return r.setDate(r.getDate()-7),r;case"month":const i=new Date(n);return i.setMonth(i.getMonth()-1),i;case"year":const o=new Date(n);return o.setFullYear(o.getFullYear()-1),o;default:const a=new Date(n);return a.setDate(a.getDate()-7),a}}static processEntities(e){console.log("[SoulNetPreloadService] Processing entities for",e.length,"entries");const n={};return e.forEach(r=>{r.themeemotion&&Object.entries(r.themeemotion).forEach(([i,o])=>{typeof o=="object"&&(n[i]||(n[i]={}),Object.entries(o).forEach(([a,s])=>{typeof s=="number"&&(n[i][a]?n[i][a]+=s:n[i][a]=s)}))})}),this.generateGraph(n)}static generateGraph(e){const n=[],r=[],i=new Set,o=new Set,a=Object.keys(e),s=11,l=6,c=6,u=3;return console.log("[SoulNetPreloadService] Generating graph with",a.length,"entities"),a.forEach((f,h)=>{i.add(f);const p=h/a.length*Math.PI*2,y=l,g=Math.cos(p)*y,v=(h%2===0?-1:1)*.7*(Math.random()-.5)*u,b=Math.sin(p)*y;n.push({id:f,type:"entity",value:1,color:"#fff",position:[g,v,b]}),Object.entries(e[f]).forEach(([w,T])=>{o.add(w),r.push({source:f,target:w,value:T})})}),Array.from(o).forEach((f,h)=>{const p=h/o.size*Math.PI*2,y=s,g=Math.cos(p)*y,v=(h%2===0?-1:1)*.7*(Math.random()-.5)*c,b=Math.sin(p)*y;n.push({id:f,type:"emotion",value:.8,color:"#fff",position:[g,v,b]})}),console.log("[SoulNetPreloadService] Generated graph with",n.length,"nodes and",r.length,"links"),{nodes:n,links:r}}static clearCache(e){e?(Array.from(this.cache.keys()).filter(r=>r.startsWith(e)).forEach(r=>{this.cache.delete(r),localStorage.removeItem(`${this.CACHE_KEY}-${r}`)}),console.log(`[SoulNetPreloadService] Cleared cache for user ${e}`)):(this.cache.clear(),Object.keys(localStorage).forEach(n=>{n.startsWith(this.CACHE_KEY)&&localStorage.removeItem(n)}),console.log("[SoulNetPreloadService] Cleared all cache"))}}Mt(jw,"CACHE_KEY","soulnet-preloaded-data"),Mt(jw,"CACHE_DURATION",10*60*1e3),Mt(jw,"cache",new Map);class Uo{static setAppLevelTranslationService(e){console.log("[EnhancedSoulNetPreloadService] Setting app-level translation service"),this.appTranslationService=e}static clearTimeRangeCache(e,n,r){const i=this.generateCacheKey(e,n,r);console.log(`[EnhancedSoulNetPreloadService] COMPREHENSIVE CACHE CLEAR: userId=${e}, keeping=${i}`);let o=0,a=0;Array.from(this.cache.keys()).filter(l=>{const c=l===i;return l.startsWith(`${e}-`)&&!c}).forEach(l=>{console.log(`[EnhancedSoulNetPreloadService] CLEARING MEMORY: ${l}`),this.cache.delete(l),this.translationStates.delete(l),this.translationCoordinator.delete(l),o++});try{const l=`${this.CACHE_KEY}-${e}-`,c=`${this.CACHE_KEY}-${i}`;Object.keys(localStorage).filter(h=>h.startsWith(l)&&!(h===c)).forEach(h=>{console.log(`[EnhancedSoulNetPreloadService] CLEARING STORAGE: ${h}`),localStorage.removeItem(h),a++})}catch(l){console.error("[EnhancedSoulNetPreloadService] STORAGE CLEAR ERROR:",l)}console.log(`[EnhancedSoulNetPreloadService] CACHE CLEAR COMPLETE: Memory cleared: ${o}, Storage cleared: ${a}`)}static forceInvalidateCache(e,n,r){const i=this.generateCacheKey(e,n,r);console.log(`[EnhancedSoulNetPreloadService] FORCE INVALIDATING: ${i}`),this.cache.delete(i),this.translationStates.delete(i),this.translationCoordinator.delete(i);try{const o=`${this.CACHE_KEY}-${i}`;localStorage.removeItem(o),console.log(`[EnhancedSoulNetPreloadService] FORCE INVALIDATED: ${i}`)}catch(o){console.error("[EnhancedSoulNetPreloadService] FORCE INVALIDATION ERROR:",o)}}static getTranslationState(e){return this.translationStates.get(e)||{isTranslating:!1,progress:100,totalNodes:0,translatedNodes:0}}static async preloadInstantData(e,n,r){console.log(`[EnhancedSoulNetPreloadService] PRELOAD START: userId=${e}, timeRange=${n}, language=${r}`);const i=this.generateCacheKey(e,n,r),o=this.getInstantData(i);if(o&&o.data.translationComplete)return console.log(`[EnhancedSoulNetPreloadService] USING VALID CACHE: ${i}`),o.data;o&&console.log(`[EnhancedSoulNetPreloadService] CACHE INCOMPLETE: ${i}, translation: ${o.data.translationComplete}`);try{const a=this.getStartDate(n);console.log(`[EnhancedSoulNetPreloadService] DATE CALCULATION: timeRange=${n}, startDate=${a.toISOString()}`);const{data:s,error:l}=await Ze.from("Journal Entries").select('id, themeemotion, "refined text", "transcription text"').eq("user_id",e).gte("created_at",a.toISOString()).order("created_at",{ascending:!1});if(l)return console.error("[EnhancedSoulNetPreloadService] DATABASE ERROR:",l),null;if(console.log(`[EnhancedSoulNetPreloadService] FRESH DATA FETCHED: ${(s==null?void 0:s.length)||0} entries for ${n}`),!s||s.length===0){console.log(`[EnhancedSoulNetPreloadService] NO ENTRIES: Creating empty data for ${n}`);const b={nodes:[],links:[],translations:new Map,connectionPercentages:new Map,nodeConnectionData:new Map,translationComplete:!0,translationProgress:100};return this.setCachedData(i,{data:b,timestamp:Date.now(),userId:e,timeRange:n,language:r,version:this.CACHE_VERSION}),b}const c=this.processEntities(s);console.log(`[EnhancedSoulNetPreloadService] DATA PROCESSED: ${c.nodes.length} nodes, ${c.links.length} links`);const u=[...new Set(c.nodes.map(b=>b.id))];this.translationStates.set(i,{isTranslating:r!=="en"&&u.length>0,progress:r==="en"?100:0,totalNodes:u.length,translatedNodes:r==="en"?u.length:0});const f=await this.getAppLevelCoordinatedTranslations(c.nodes,r,i),h=new Map,p=new Map;this.calculateConnectionPercentages(c,h),this.calculateNodeConnections(c,p);const y=r==="en"||f.size===u.length,g=r==="en"?100:Math.round(f.size/u.length*100);this.translationStates.set(i,{isTranslating:!1,progress:g,totalNodes:u.length,translatedNodes:f.size});const v={nodes:c.nodes,links:c.links,translations:f,connectionPercentages:h,nodeConnectionData:p,translationComplete:y,translationProgress:g};return y&&(this.setCachedData(i,{data:v,timestamp:Date.now(),userId:e,timeRange:n,language:r,version:this.CACHE_VERSION}),console.log(`[EnhancedSoulNetPreloadService] DATA CACHED: ${i}`)),v}catch(a){return console.error("[EnhancedSoulNetPreloadService] PRELOAD ERROR:",a),this.translationStates.delete(i),null}}static getInstantData(e){if(!e)return console.log("[EnhancedSoulNetPreloadService] INVALID CACHE KEY"),null;const n=this.cache.get(e);if(n&&this.isCacheValid(n))return console.log(`[EnhancedSoulNetPreloadService] MEMORY CACHE HIT: ${e}`),n;n&&(console.log(`[EnhancedSoulNetPreloadService] MEMORY CACHE INVALID: ${e}`),this.cache.delete(e));try{const r=`${this.CACHE_KEY}-${e}`,i=localStorage.getItem(r);if(i){const o=JSON.parse(i);if(this.isCacheValid(o))return o.data.translations=new Map(Object.entries(o.data.translations||{})),o.data.connectionPercentages=new Map(Object.entries(o.data.connectionPercentages||{})),o.data.nodeConnectionData=new Map(Object.entries(o.data.nodeConnectionData||{}).map(([a,s])=>[a,s])),o.data.translationComplete=o.data.translationComplete??!0,o.data.translationProgress=o.data.translationProgress??100,this.cache.set(e,o),console.log(`[EnhancedSoulNetPreloadService] STORAGE CACHE HIT: ${e}`),o;console.log(`[EnhancedSoulNetPreloadService] STORAGE CACHE INVALID: ${e}`),localStorage.removeItem(r)}}catch(r){console.error("[EnhancedSoulNetPreloadService] CACHE RETRIEVAL ERROR:",r)}return console.log(`[EnhancedSoulNetPreloadService] CACHE MISS: ${e}`),null}static async getAppLevelCoordinatedTranslations(e,n,r){if(n==="en"){const a=new Map;return e.forEach(s=>a.set(s.id,s.id)),a}const i=this.translationCoordinator.get(r);if(i)return i;const o=this.performAppLevelBatchTranslation(e,n,r);this.translationCoordinator.set(r,o);try{return await o}finally{this.translationCoordinator.delete(r)}}static async performAppLevelBatchTranslation(e,n,r){const i=new Map,o=[...new Set(e.map(a=>a.id))];this.translationStates.set(r,{isTranslating:!0,progress:0,totalNodes:o.length,translatedNodes:0});try{if(!this.appTranslationService)return o.forEach(s=>{i.set(s,s)}),this.translationStates.set(r,{isTranslating:!1,progress:100,totalNodes:o.length,translatedNodes:o.length}),i;(await this.appTranslationService.batchTranslate({texts:o,targetLanguage:n,sourceLanguage:"en"})).forEach((s,l)=>{s&&s.trim()!==""?i.set(l,s):i.set(l,l)}),o.forEach(s=>{i.has(s)||i.set(s,s)}),this.translationStates.set(r,{isTranslating:!1,progress:100,totalNodes:o.length,translatedNodes:i.size})}catch(a){console.error("[EnhancedSoulNetPreloadService] Translation error:",a),o.forEach(s=>{i.set(s,s)}),this.translationStates.set(r,{isTranslating:!1,progress:100,totalNodes:o.length,translatedNodes:o.length})}return i}static calculateNodeConnections(e,n){e.nodes.forEach(r=>{const i=[];let o=0;e.links.forEach(s=>{s.source===r.id?(i.push(s.target),o+=s.value):s.target===r.id&&(i.push(s.source),o+=s.value)});const a=i.length>0?o/i.length:0;n.set(r.id,{connectedNodes:i,totalStrength:o,averageStrength:a})})}static calculateConnectionPercentages(e,n){const r=new Map;e.links.forEach(i=>{const o=r.get(i.source)||0,a=r.get(i.target)||0;r.set(i.source,o+i.value),r.set(i.target,a+i.value)}),e.links.forEach(i=>{const o=r.get(i.source)||1,a=r.get(i.target)||1,s=Math.round(i.value/o*100);n.set(`${i.source}-${i.target}`,s);const l=Math.round(i.value/a*100);n.set(`${i.target}-${i.source}`,l)})}static isCacheValid(e){const r=Date.now()-e.timestamp,i=r<this.CACHE_DURATION,o=e.version===this.CACHE_VERSION,a=e.data&&Array.isArray(e.data.nodes)&&Array.isArray(e.data.links);return console.log(`[EnhancedSoulNetPreloadService] CACHE VALIDATION: age=${r}ms, version=${e.version}/${this.CACHE_VERSION}, hasData=${a}, withinDuration=${i}`),i&&o&&a}static generateCacheKey(e,n,r){const i=`${e}-${n}-${r}-v${this.CACHE_VERSION}`;return console.log(`[EnhancedSoulNetPreloadService] CACHE KEY GENERATED: ${i}`),i}static setCachedData(e,n){this.cache.set(e,n);try{const r={...n,data:{...n.data,translations:Object.fromEntries(n.data.translations),connectionPercentages:Object.fromEntries(n.data.connectionPercentages),nodeConnectionData:Object.fromEntries(Array.from(n.data.nodeConnectionData.entries()).map(([i,o])=>[i,o]))}};localStorage.setItem(`${this.CACHE_KEY}-${e}`,JSON.stringify(r)),console.log(`[EnhancedSoulNetPreloadService] CACHED TO STORAGE: ${e}`)}catch(r){console.error("[EnhancedSoulNetPreloadService] STORAGE SAVE ERROR:",r)}}static getStartDate(e){const n=new Date;switch(console.log(`[EnhancedSoulNetPreloadService] DATE CALCULATION START: ${e} at ${n.toISOString()}`),e){case"today":const r=new Date(n);return r.setHours(0,0,0,0),console.log(`[EnhancedSoulNetPreloadService] TODAY START: ${r.toISOString()}`),r;case"week":const i=new Date(n),o=i.getDay(),a=o===0?6:o-1;return i.setDate(i.getDate()-a),i.setHours(0,0,0,0),console.log(`[EnhancedSoulNetPreloadService] WEEK START: dayOfWeek=${o}, subtract=${a}, result=${i.toISOString()}`),i;case"month":const s=new Date(n);return s.setMonth(s.getMonth()-1),console.log(`[EnhancedSoulNetPreloadService] MONTH START: ${s.toISOString()}`),s;case"year":const l=new Date(n);return l.setFullYear(l.getFullYear()-1),console.log(`[EnhancedSoulNetPreloadService] YEAR START: ${l.toISOString()}`),l;default:const c=new Date(n);return c.setDate(c.getDate()-7),console.log(`[EnhancedSoulNetPreloadService] DEFAULT START: ${c.toISOString()}`),c}}static processEntities(e){const n={};return e.forEach(r=>{r.themeemotion&&Object.entries(r.themeemotion).forEach(([i,o])=>{typeof o=="object"&&(n[i]||(n[i]={}),Object.entries(o).forEach(([a,s])=>{typeof s=="number"&&(n[i][a]?n[i][a]+=s:n[i][a]=s)}))})}),this.generateGraph(n)}static generateGraph(e){const n=[],r=[],i=new Set,o=new Set,a=Object.keys(e),s=11,l=6,c=[3,-3,6,-6,2.5,-2.5,3,-3,6];return a.forEach((u,f)=>{i.add(u);const h=f/a.length*Math.PI*2,p=l,y=Math.cos(h)*p,g=f%c.length,v=c[g],b=Math.sin(h)*p;console.log(`[EnhancedSoulNetPreloadService] Entity ${f}: ${u}, Y-position: ${v} (pattern index: ${g})`),n.push({id:u,type:"entity",value:1,color:"#22c55e",position:[y,v,b]}),Object.entries(e[u]).forEach(([w,T])=>{o.add(w),r.push({source:u,target:w,value:T})})}),Array.from(o).forEach((u,f)=>{const h=f/o.size*Math.PI*2,p=s,y=Math.cos(h)*p,v=(w=>{const T=[7,9,11],C=w%6;return C<3?T[C]:-T[C-3]})(f),b=Math.sin(h)*p;n.push({id:u,type:"emotion",value:.8,color:"#f59e0b",position:[y,v,b]})}),console.log(`[EnhancedSoulNetPreloadService] Generated graph with custom entity Y-pattern: ${n.filter(u=>u.type==="entity").length} entities, ${n.filter(u=>u.type==="emotion").length} emotions`),{nodes:n,links:r}}static clearInstantCache(e){e?(Array.from(this.cache.keys()).filter(i=>i.startsWith(e)).forEach(i=>{this.cache.delete(i),localStorage.removeItem(`${this.CACHE_KEY}-${i}`),this.translationStates.delete(i)}),Array.from(this.translationCoordinator.keys()).filter(i=>i.startsWith(e)).forEach(i=>{this.translationCoordinator.delete(i)})):(this.cache.clear(),this.translationCoordinator.clear(),this.translationStates.clear(),Object.keys(localStorage).forEach(n=>{n.startsWith(this.CACHE_KEY)&&localStorage.removeItem(n)}))}}Mt(Uo,"CACHE_KEY","enhanced-soulnet-data"),Mt(Uo,"CACHE_DURATION",15*60*1e3),Mt(Uo,"CACHE_VERSION",10),Mt(Uo,"cache",new Map),Mt(Uo,"translationCoordinator",new Map),Mt(Uo,"translationStates",new Map),Mt(Uo,"appTranslationService",null);const vJ=_.createContext(void 0),xJ=({children:t})=>{const[e,n]=_.useState("en"),[r,i]=_.useState(!1),[o,a]=_.useState(!1),[s,l]=_.useState({});_.useEffect(()=>{console.log("[TranslationContext] APP-LEVEL: Setting up translation service integration"),Uo.setAppLevelTranslationService(ZC),console.log("[TranslationContext] APP-LEVEL: Translation service integration complete")},[]),_.useEffect(()=>{try{const b=localStorage.getItem("soulo-language");if(b){console.log("[TranslationContext] Loading saved language:",b),n(b);return}}catch(b){console.error("[TranslationContext] Error loading saved language:",b)}const g=navigator.language.split("-")[0],v=["en","es","fr","de","it","pt","ru","ja","ko","zh","hi","ar","bn","gu","kn","ml","mr","or","pa","ta","te"];v.includes(g)&&n(g),console.log("[TranslationContext] Initialized with language:",g,"supported:",v.includes(g))},[]);const c=_.useCallback(async(g,v)=>{if(e==="en"){console.log("[TranslationContext] Skipping SoulNet pre-translation for English");return}console.log(`[TranslationContext] APP-LEVEL: Pre-translating SoulNet data for ${g}, ${v}, ${e}`);try{a(!0),await Uo.preloadInstantData(g,v,e),console.log("[TranslationContext] APP-LEVEL: SoulNet pre-translation completed successfully")}catch(b){console.error("[TranslationContext] APP-LEVEL: Error pre-translating SoulNet data:",b)}finally{a(!1)}},[e]),u=_.useCallback(async g=>{console.log("[TranslationContext] APP-LEVEL: Changing language to:",g),g!=="en"&&a(!0),n(g);try{localStorage.setItem("soulo-language",g),console.log("[TranslationContext] APP-LEVEL: Saved language to localStorage:",g)}catch(b){console.error("[TranslationContext] APP-LEVEL: Error saving language to localStorage:",b)}Uo.clearInstantCache(),jw.clearCache(),console.log("[TranslationContext] APP-LEVEL: Cleared all SoulNet caches for language change");const v=new CustomEvent("languageChange",{detail:{language:g,isSoulNetTranslating:g!=="en"}});window.dispatchEvent(v),g==="en"&&a(!1)},[]),f=_.useCallback(async(g,v="en",b)=>{if(!g||typeof g!="string")return console.warn("[TranslationContext] Invalid text provided for translation:",g),g||"";if(e===v)return console.log("[TranslationContext] Text already in target language, skipping translation:",{text:g,currentLanguage:e}),g;console.log("[TranslationContext] SUPABASE EDGE FUNCTION - Attempting to translate:",{text:g.substring(0,30)+(g.length>30?"...":""),from:v,to:e,entryId:b});const w=`${g}_${v}_${e}`;if(s[w])return console.log("[TranslationContext] Using local cache for:",g.substring(0,30)),s[w];const T=Sy.get(e,g);if(T)return console.log("[TranslationContext] Using on-demand cache for:",g.substring(0,30)),l(C=>({...C,[w]:T})),T;try{i(!0),console.log("[TranslationContext] Using Supabase edge function for translation");const{data:C,error:P}=await Ze.functions.invoke("translate-text",{body:{text:g,sourceLanguage:v==="auto"?"en":v,targetLanguage:e,entryId:b,cleanResult:!0}});if(P)return console.error("[TranslationContext] Edge function error:",P),g;if(C&&C.translatedText&&C.translatedText!==g){const M=C.translatedText;return console.log("[TranslationContext] Translation successful:",{original:g.substring(0,30),translated:M.substring(0,30)}),l(k=>({...k,[w]:M})),Sy.set(e,g,M),M}return console.log("[TranslationContext] Translation returned same text, using original"),g}catch(C){return console.error("[TranslationContext] Translation failed:",C),g}finally{i(!1)}},[e,s]),h=_.useCallback(g=>{const v=`${g}_en_${e}`,b=s[v],w=Sy.get(e,g);return console.log("[TranslationContext] Checking cache for:",g.substring(0,30),{localCache:!!b,onDemandCache:!!w}),b||w||null},[e,s]),p=_.useCallback(async g=>{console.log(`[TranslationContext] Prefetching translations for route: ${g}`);const b={"/":["Home","Download on App Store","Your Voice, Your Journey"],"/insights":["Insights","Discover patterns","Soul-Net Visualization","Dominant Mood"],"/journal":["Journal","New Entry","Search","Recent Entries"]}[g]||[];if(b.length>0&&e!=="en")try{const{data:w,error:T}=await Ze.functions.invoke("translate-text",{body:{texts:b,sourceLanguage:"en",targetLanguage:e,cleanResult:!0}});!T&&w&&w.translatedTexts&&(console.log(`[TranslationContext] Prefetched ${w.translatedTexts.length} translations for route ${g}`),b.forEach((C,P)=>{const M=w.translatedTexts[P];if(M){const k=`${C}_en_${e}`;l(I=>({...I,[k]:M})),Sy.set(e,C,M)}}))}catch(w){console.error("[TranslationContext] Error prefetching translations:",w)}},[e]),y={currentLanguage:e,setCurrentLanguage:u,setLanguage:u,translate:f,isTranslating:r,clearCache:_.useCallback(()=>{console.log("[TranslationContext] APP-LEVEL: Clearing all translation caches"),l({}),Sy.clearAll(),Uo.clearInstantCache(),jw.clearCache()},[]),getCachedTranslation:h,translationProgress:r?50:100,prefetchTranslationsForRoute:p,prefetchSoulNetTranslations:c,isSoulNetTranslating:o};return d.jsx(vJ.Provider,{value:y,children:t})},In=()=>{const t=_.useContext(vJ);if(t===void 0)throw new Error("useTranslation must be used within a TranslationProvider");return t};function o0e({children:t,fallback:e=d.jsx(xi,{className:"h-40 w-full"}),lowBandwidthFallback:n,offlineFallback:r,retryOnReconnect:i=!0}){const o=cJ(),{toast:a}=oh(),{translate:s}=In(),[l,c]=_.useState(!0),[u,f]=_.useState(!1),[h,p]=_.useState("Back online"),[y,g]=_.useState("Your connection has been restored."),[v,b]=_.useState("You're offline"),[w,T]=_.useState("Some content may not be available."),[C,P]=_.useState("Slow connection detected"),[M,k]=_.useState("Loading optimized content for your connection speed.");return _.useEffect(()=>{(async()=>{if(s)try{console.log("NetworkAwareContent: Pre-translating toast messages...");const U=await s("Back online","en");U&&p(U);const z=await s("Your connection has been restored.","en");z&&g(z);const O=await s("You're offline","en");O&&b(O);const B=await s("Some content may not be available.","en");B&&T(B);const $=await s("Slow connection detected","en");$&&P($);const F=await s("Loading optimized content for your connection speed.","en");F&&k(F),console.log("NetworkAwareContent: Pre-translation complete")}catch(U){console.error("Error pre-translating network messages:",U)}})(),o.online&&!l&&i&&(c(!0),f(!0),a({title:h,description:y,duration:3e3})),!o.online&&l&&(c(!1),a({title:v,description:w,variant:"destructive",duration:5e3})),o.online&&o.speed==="slow"&&!u&&a({title:C,description:M,duration:3e3})},[o.online,o.speed,l,i,u,a,s]),_.useEffect(()=>{const I=async()=>{if(s)try{const U=await s("Back online","en");U&&p(U);const z=await s("Your connection has been restored.","en");z&&g(z);const O=await s("You're offline","en");O&&b(O);const B=await s("Some content may not be available.","en");B&&T(B);const $=await s("Slow connection detected","en");$&&P($);const F=await s("Loading optimized content for your connection speed.","en");F&&k(F)}catch(U){console.error("Error updating translated network messages:",U)}};return window.addEventListener("languageChange",I),()=>{window.removeEventListener("languageChange",I)}},[s]),!o.online&&r?d.jsx(d.Fragment,{children:r}):o.online&&o.speed==="slow"&&n?d.jsx(d.Fragment,{children:n}):d.jsx(_.Suspense,{fallback:e,children:l?t:e})}/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a0e=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),wJ=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var s0e={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l0e=_.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:o,iconNode:a,...s},l)=>_.createElement("svg",{ref:l,...s0e,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:wJ("lucide",i),...s},[...a.map(([c,u])=>_.createElement(c,u)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _t=(t,e)=>{const n=_.forwardRef(({className:r,...i},o)=>_.createElement(l0e,{ref:o,iconNode:e,className:wJ(`lucide-${a0e(t)}`,r),...i}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c0e=_t("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O3=_t("Apple",[["path",{d:"M12 20.94c1.5 0 2.75 1.06 4 1.06 3 0 6-8 6-12.22A4.91 4.91 0 0 0 17 5c-2.22 0-4 1.44-5 2-1-.56-2.78-2-5-2a4.9 4.9 0 0 0-5 4.78C2 14 5 22 8 22c1.25 0 2.5-1.06 4-1.06Z",key:"3s7exb"}],["path",{d:"M10 2c1 .5 2 2 2 5",key:"fcco2y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u0e=_t("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L3=_t("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d0=_t("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d0e=_t("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f0e=_t("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h0e=_t("BellOff",[["path",{d:"M8.7 3A6 6 0 0 1 18 8a21.3 21.3 0 0 0 .6 5",key:"o7mx20"}],["path",{d:"M17 17H3s3-2 3-9a4.67 4.67 0 0 1 .3-1.7",key:"16f1lm"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bJ=_t("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p0e=_t("BookMarked",[["path",{d:"M10 2v8l3-3 3 3V2",key:"sqw3rj"}],["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m0e=_t("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g0e=_t("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y0e=_t("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qp=_t("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QC=_t("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ff=_t("ChartLine",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SJ=_t("ChartNoAxesColumn",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sd=_t("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b1=_t("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eA=_t("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S1=_t("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D3=_t("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zM=_t("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v0e=_t("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x0e=_t("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zu=_t("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rc=_t("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EJ=_t("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _J=_t("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w0e=_t("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b0e=_t("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S0e=_t("HeartHandshake",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}],["path",{d:"M12 5 9.04 7.96a2.17 2.17 0 0 0 0 3.08c.82.82 2.13.85 3 .07l2.07-1.9a2.82 2.82 0 0 1 3.79 0l2.96 2.66",key:"4oyue0"}],["path",{d:"m18 15-2-2",key:"60u0ii"}],["path",{d:"m15 18-2-2",key:"6p76be"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TJ=_t("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E0e=_t("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _0e=_t("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T0e=_t("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aa=_t("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C0e=_t("LockOpen",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A0e=_t("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M0e=_t("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CJ=_t("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P0e=_t("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AJ=_t("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k0e=_t("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tA=_t("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N0e=_t("MessagesSquare",[["path",{d:"M14 9a2 2 0 0 1-2 2H6l-4 4V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2z",key:"p1xzt8"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v11l-4-4h-6a2 2 0 0 1-2-2v-1",key:"1cx29u"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vf=_t("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R0e=_t("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j0e=_t("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I0e=_t("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O0e=_t("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MJ=_t("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nA=_t("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F3=_t("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PJ=_t("Quote",[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qu=_t("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L0e=_t("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D0e=_t("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z3=_t("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kJ=_t("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U3=_t("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B3=_t("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NJ=_t("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F0e=_t("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RJ=_t("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $3=_t("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z0e=_t("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U0e=_t("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B0e=_t("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pT=_t("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jJ=_t("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IJ=_t("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dv=_t("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $0e=_t("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fv=_t("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H0e=_t("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V0e=_t("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cc=_t("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function W0e(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function rA(...t){return e=>t.forEach(n=>W0e(n,e))}function Kt(...t){return _.useCallback(rA(...t),t)}var ud=_.forwardRef((t,e)=>{const{children:n,...r}=t,i=_.Children.toArray(n),o=i.find(G0e);if(o){const a=o.props.children,s=i.map(l=>l===o?_.Children.count(a)>1?_.Children.only(null):_.isValidElement(a)?a.props.children:null:l);return d.jsx(cO,{...r,ref:e,children:_.isValidElement(a)?_.cloneElement(a,void 0,s):null})}return d.jsx(cO,{...r,ref:e,children:n})});ud.displayName="Slot";var cO=_.forwardRef((t,e)=>{const{children:n,...r}=t;if(_.isValidElement(n)){const i=Y0e(n);return _.cloneElement(n,{...q0e(r,n.props),ref:e?rA(e,i):i})}return _.Children.count(n)>1?_.Children.only(null):null});cO.displayName="SlotClone";var H3=({children:t})=>d.jsx(d.Fragment,{children:t});function G0e(t){return _.isValidElement(t)&&t.type===H3}function q0e(t,e){const n={...e};for(const r in e){const i=t[r],o=e[r];/^on[A-Z]/.test(r)?i&&o?n[r]=(...s)=>{o(...s),i(...s)}:i&&(n[r]=i):r==="style"?n[r]={...i,...o}:r==="className"&&(n[r]=[i,o].filter(Boolean).join(" "))}return{...t,...n}}function Y0e(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}const XB=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,KB=Un,mm=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return KB(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:o}=e,a=Object.keys(i).map(c=>{const u=n==null?void 0:n[c],f=o==null?void 0:o[c];if(u===null)return null;const h=XB(u)||XB(f);return i[c][h]}),s=n&&Object.entries(n).reduce((c,u)=>{let[f,h]=u;return h===void 0||(c[f]=h),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,u)=>{let{class:f,className:h,...p}=u;return Object.entries(p).every(y=>{let[g,v]=y;return Array.isArray(v)?v.includes({...o,...s}[g]):{...o,...s}[g]===v})?[...c,f,h]:c},[]);return KB(t,a,l,n==null?void 0:n.class,n==null?void 0:n.className)},V3=mm("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),ct=_.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...i},o)=>{const a=r?ud:"button";return d.jsx(a,{className:He(V3({variant:e,size:n,className:t})),ref:o,...i})});ct.displayName="Button";const Yc=({className:t="",size:e="normal",textClassName:n="",smileyClassName:r="",useColorTheme:i=!0,animate:o=!1,utteringWords:a=!1})=>{const{colorTheme:s}=Zr(),[l,c]=_.useState("full"),[u,f]=_.useState(1),h={small:"w-4 h-4 mx-0.5",normal:"w-5 h-5 mx-0.5",large:"w-6 h-6 mx-0.5",medium:"w-5.5 h-5.5 mx-0.5"},p=i?"text-primary":"";return _.useEffect(()=>{if(!o)return;const y=setInterval(()=>{c(g=>g==="full"?"soul":g==="soul"?"none":"full")},800);return()=>clearInterval(y)},[o]),_.useEffect(()=>{if(!a)return;const y=setInterval(()=>{f(g=>g===1?1.2:1)},500);return()=>clearInterval(y)},[a]),d.jsxs("span",{className:He("font-bold inline-flex items-center",p,n,t),children:[d.jsx("span",{className:l==="none"?"opacity-0":"opacity-100 transition-opacity duration-300",children:"S"}),d.jsx("span",{className:l==="none"?"opacity-0":"opacity-100 transition-opacity duration-300",children:"O"}),d.jsx("span",{className:He("relative inline-block",h[e],r),children:d.jsx("span",{className:"absolute inset-0 flex items-center justify-center",children:d.jsx("span",{className:"relative w-full h-full flex items-center justify-center",children:d.jsxs("div",{className:"w-full h-3/4 border-2 border-current rounded-b-full border-t-0 flex items-end pb-[2px]",children:[d.jsx("span",{className:"absolute top-[25%] left-[25%] w-[15%] h-[15%] rounded-full bg-current"}),d.jsx("span",{className:"absolute top-[25%] right-[25%] w-[15%] h-[15%] rounded-full bg-current"})]})})})}),d.jsx("span",{className:l==="none"?"opacity-0":"opacity-100 transition-opacity duration-300",children:"L"}),d.jsx("span",{className:l==="none"?"opacity-0":"opacity-100 transition-opacity duration-300",children:"O"})]})},JB={en:{scale:1},de:{scale:.88,letterSpacingAdjustment:-.2},fr:{scale:.92,letterSpacingAdjustment:-.1},es:{scale:.94},it:{scale:.93},pt:{scale:.94},ru:{scale:.9,letterSpacingAdjustment:-.1},zh:{scale:.96,lineHeightAdjustment:.1},ja:{scale:.94,lineHeightAdjustment:.1},ko:{scale:.95,lineHeightAdjustment:.1},hi:{scale:.92,lineHeightAdjustment:.1},bn:{scale:.9,lineHeightAdjustment:.1},ta:{scale:.89,lineHeightAdjustment:.1},te:{scale:.88,lineHeightAdjustment:.1},kn:{scale:.89,lineHeightAdjustment:.1},ml:{scale:.87,lineHeightAdjustment:.1},gu:{scale:.91,lineHeightAdjustment:.1},mr:{scale:.9,lineHeightAdjustment:.1},pa:{scale:.91,lineHeightAdjustment:.1},or:{scale:.89,lineHeightAdjustment:.1},ar:{scale:.93,lineHeightAdjustment:.1,letterSpacingAdjustment:.1}};function E1(t){return JB[t]||JB.en}function X0e(t,e){const n=E1(e);return t*n.scale}function OJ(t){const e=E1(t),n={transform:`scale(${e.scale})`,transformOrigin:"left center"};return e.lineHeightAdjustment&&(n.lineHeight=`calc(1em + ${e.lineHeightAdjustment}em)`),e.letterSpacingAdjustment&&(n.letterSpacing=`${e.letterSpacingAdjustment}px`),n}function K0e(t){return`${`scale-[${E1(t).scale}]`} origin-left`}function W3(t){return{config:E1(t),scaledSize:e=>X0e(e,t),cssProps:OJ(t),classes:K0e(t)}}function G3(t,e=""){const n=E1(t),r=[e,"transition-all duration-200"];return n.scale<.9&&r.push("text-xs"),n.letterSpacingAdjustment&&n.letterSpacingAdjustment<0&&r.push("tracking-tight"),n.lineHeightAdjustment&&n.lineHeightAdjustment>0&&r.push("leading-relaxed"),r.filter(Boolean).join(" ")}function q3(t,e={}){return{...OJ(t),...e}}function Q({text:t,className:e="",as:n="span",sourceLanguage:r="en",entryId:i,forceTranslate:o=!1,onTranslationStart:a,onTranslationEnd:s,style:l,enableFontScaling:c=!1,scalingContext:u="general"}){const[f,h]=_.useState(t),[p,y]=_.useState(!1),{translate:g,currentLanguage:v,getCachedTranslation:b}=In(),w=Wi(),T=_.useRef(v),C=_.useRef(!1),P=_.useRef(t),M=_.useRef(!0),k=_.useRef(0);W3(v);const I=w.pathname,U=ib(I),z=Z=>{if(!Z)return"";const H=/\s*[\(\[]([a-z]{2})[\)\]]\s*$/i;return Z.replace(H,"").trim()},O=async()=>{if(!(t!=null&&t.trim())){h("");return}if(v===r){console.log(`TranslatableText: Text already in ${v}, skipping translation`),h(t);return}console.log(`TranslatableText: Translation check for "${t.substring(0,30)}" - forceTranslate: ${o}, isOnWebsite: ${U}, currentLanguage: ${v}`);const Z=b(t);if(Z){console.log(`TranslatableText: Using cached translation for "${t.substring(0,30)}": "${Z.substring(0,30)}"`),h(Z);return}k.current+=1;const H=k.current;console.log(`TranslatableText: Starting translation attempt #${H} for "${t.substring(0,30)}" to ${v}`),p||(y(!0),a&&a());try{console.log(`TranslatableText: Calling translate service for "${t.substring(0,30)}..." to ${v}`);const Y=await g(t,r,i);if(console.log(`TranslatableText: Translation service returned for "${t.substring(0,30)}...": "${(Y==null?void 0:Y.substring(0,30))||"null"}..."`),M.current&&T.current===v&&P.current===t)if(Y){const L=z(Y);console.log(`TranslatableText: Setting translated text for "${t.substring(0,30)}...": "${L.substring(0,30)}..."`),h(L||t)}else console.log(`TranslatableText: Empty translation result for "${t.substring(0,30)}...", using original`),h(t)}catch(Y){console.error(`TranslatableText: Translation error for "${t.substring(0,30)}..."`,Y),M.current&&T.current===v&&P.current===t&&h(t)}finally{M.current&&(y(!1),s&&s())}};_.useEffect(()=>(M.current=!0,T.current=v,P.current=t,k.current=0,(async()=>{M.current&&(await O(),M.current&&(C.current=!0))})(),()=>{M.current=!1}),[t,v,r,i,o]),_.useEffect(()=>{const Z=()=>{console.log(`TranslatableText: Language change event detected - new language: ${v}`),T.current=v,P.current=t,k.current=0,O()};return window.addEventListener("languageChange",Z),()=>{window.removeEventListener("languageChange",Z)}},[t,r,i,v,o]);const B=c?G3(v,e):e,$=c?q3(v,l):l;let F={};c&&u==="mobile-nav"&&(F={...F,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"100%"});const J={...$,...F},K=`${B} ${p?"opacity-70":""}`.trim();return ve.createElement(n,{className:K,"data-translating":p?"true":"false","data-translated":f!==t?"true":"false","data-lang":v,"data-font-scaled":c?"true":"false","data-scaling-context":u,style:J},f||t)}function ut(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t==null||t(i),n===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function J0e(t,e){const n=_.createContext(e),r=o=>{const{children:a,...s}=o,l=_.useMemo(()=>s,Object.values(s));return d.jsx(n.Provider,{value:l,children:a})};r.displayName=t+"Provider";function i(o){const a=_.useContext(n);if(a)return a;if(e!==void 0)return e;throw new Error(`\`${o}\` must be used within \`${t}\``)}return[r,i]}function sa(t,e=[]){let n=[];function r(o,a){const s=_.createContext(a),l=n.length;n=[...n,a];const c=f=>{var b;const{scope:h,children:p,...y}=f,g=((b=h==null?void 0:h[t])==null?void 0:b[l])||s,v=_.useMemo(()=>y,Object.values(y));return d.jsx(g.Provider,{value:v,children:p})};c.displayName=o+"Provider";function u(f,h){var g;const p=((g=h==null?void 0:h[t])==null?void 0:g[l])||s,y=_.useContext(p);if(y)return y;if(a!==void 0)return a;throw new Error(`\`${f}\` must be used within \`${o}\``)}return[c,u]}const i=()=>{const o=n.map(a=>_.createContext(a));return function(s){const l=(s==null?void 0:s[t])||o;return _.useMemo(()=>({[`__scope${t}`]:{...s,[t]:l}}),[s,l])}};return i.scopeName=t,[r,Z0e(i,...e)]}function Z0e(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(o){const a=r.reduce((s,{useScope:l,scopeName:c})=>{const f=l(o)[`__scope${c}`];return{...s,...f}},{});return _.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return n.scopeName=e.scopeName,n}function Br(t){const e=_.useRef(t);return _.useEffect(()=>{e.current=t}),_.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function wo({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,i]=Q0e({defaultProp:e,onChange:n}),o=t!==void 0,a=o?t:r,s=Br(n),l=_.useCallback(c=>{if(o){const f=typeof c=="function"?c(t):c;f!==t&&s(f)}else i(c)},[o,t,i,s]);return[a,l]}function Q0e({defaultProp:t,onChange:e}){const n=_.useState(t),[r]=n,i=_.useRef(r),o=Br(e);return _.useEffect(()=>{i.current!==r&&(o(r),i.current=r)},[r,i,o]),n}var exe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],At=exe.reduce((t,e)=>{const n=_.forwardRef((r,i)=>{const{asChild:o,...a}=r,s=o?ud:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),d.jsx(s,{...a,ref:i})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function Y3(t,e){t&&a0.flushSync(()=>t.dispatchEvent(e))}function txe(t,e=[]){let n=[];function r(o,a){const s=_.createContext(a),l=n.length;n=[...n,a];function c(f){const{scope:h,children:p,...y}=f,g=(h==null?void 0:h[t][l])||s,v=_.useMemo(()=>y,Object.values(y));return d.jsx(g.Provider,{value:v,children:p})}function u(f,h){const p=(h==null?void 0:h[t][l])||s,y=_.useContext(p);if(y)return y;if(a!==void 0)return a;throw new Error(`\`${f}\` must be used within \`${o}\``)}return c.displayName=o+"Provider",[c,u]}const i=()=>{const o=n.map(a=>_.createContext(a));return function(s){const l=(s==null?void 0:s[t])||o;return _.useMemo(()=>({[`__scope${t}`]:{...s,[t]:l}}),[s,l])}};return i.scopeName=t,[r,nxe(i,...e)]}function nxe(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(o){const a=r.reduce((s,{useScope:l,scopeName:c})=>{const f=l(o)[`__scope${c}`];return{...s,...f}},{});return _.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return n.scopeName=e.scopeName,n}function f0(t){const e=t+"CollectionProvider",[n,r]=txe(e),[i,o]=n(e,{collectionRef:{current:null},itemMap:new Map}),a=p=>{const{scope:y,children:g}=p,v=ve.useRef(null),b=ve.useRef(new Map).current;return d.jsx(i,{scope:y,itemMap:b,collectionRef:v,children:g})};a.displayName=e;const s=t+"CollectionSlot",l=ve.forwardRef((p,y)=>{const{scope:g,children:v}=p,b=o(s,g),w=Kt(y,b.collectionRef);return d.jsx(ud,{ref:w,children:v})});l.displayName=s;const c=t+"CollectionItemSlot",u="data-radix-collection-item",f=ve.forwardRef((p,y)=>{const{scope:g,children:v,...b}=p,w=ve.useRef(null),T=Kt(y,w),C=o(c,g);return ve.useEffect(()=>(C.itemMap.set(w,{ref:w,...b}),()=>void C.itemMap.delete(w))),d.jsx(ud,{[u]:"",ref:T,children:v})});f.displayName=c;function h(p){const y=o(t+"CollectionConsumer",p);return ve.useCallback(()=>{const v=y.collectionRef.current;if(!v)return[];const b=Array.from(v.querySelectorAll(`[${u}]`));return Array.from(y.itemMap.values()).sort((C,P)=>b.indexOf(C.ref.current)-b.indexOf(P.ref.current))},[y.collectionRef,y.itemMap])}return[{Provider:a,Slot:l,ItemSlot:f},h,r]}var rxe=_.createContext(void 0);function ah(t){const e=_.useContext(rxe);return t||e||"ltr"}function ixe(t,e=globalThis==null?void 0:globalThis.document){const n=Br(t);_.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var oxe="DismissableLayer",uO="dismissableLayer.update",axe="dismissableLayer.pointerDownOutside",sxe="dismissableLayer.focusOutside",ZB,LJ=_.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),gm=_.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:o,onInteractOutside:a,onDismiss:s,...l}=t,c=_.useContext(LJ),[u,f]=_.useState(null),h=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=_.useState({}),y=Kt(e,k=>f(k)),g=Array.from(c.layers),[v]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),b=g.indexOf(v),w=u?g.indexOf(u):-1,T=c.layersWithOutsidePointerEventsDisabled.size>0,C=w>=b,P=cxe(k=>{const I=k.target,U=[...c.branches].some(z=>z.contains(I));!C||U||(i==null||i(k),a==null||a(k),k.defaultPrevented||s==null||s())},h),M=uxe(k=>{const I=k.target;[...c.branches].some(z=>z.contains(I))||(o==null||o(k),a==null||a(k),k.defaultPrevented||s==null||s())},h);return ixe(k=>{w===c.layers.size-1&&(r==null||r(k),!k.defaultPrevented&&s&&(k.preventDefault(),s()))},h),_.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(ZB=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),QB(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=ZB)}},[u,h,n,c]),_.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),QB())},[u,c]),_.useEffect(()=>{const k=()=>p({});return document.addEventListener(uO,k),()=>document.removeEventListener(uO,k)},[]),d.jsx(At.div,{...l,ref:y,style:{pointerEvents:T?C?"auto":"none":void 0,...t.style},onFocusCapture:ut(t.onFocusCapture,M.onFocusCapture),onBlurCapture:ut(t.onBlurCapture,M.onBlurCapture),onPointerDownCapture:ut(t.onPointerDownCapture,P.onPointerDownCapture)})});gm.displayName=oxe;var lxe="DismissableLayerBranch",DJ=_.forwardRef((t,e)=>{const n=_.useContext(LJ),r=_.useRef(null),i=Kt(e,r);return _.useEffect(()=>{const o=r.current;if(o)return n.branches.add(o),()=>{n.branches.delete(o)}},[n.branches]),d.jsx(At.div,{...t,ref:i})});DJ.displayName=lxe;function cxe(t,e=globalThis==null?void 0:globalThis.document){const n=Br(t),r=_.useRef(!1),i=_.useRef(()=>{});return _.useEffect(()=>{const o=s=>{if(s.target&&!r.current){let l=function(){FJ(axe,n,c,{discrete:!0})};const c={originalEvent:s};s.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=l,e.addEventListener("click",i.current,{once:!0})):l()}else e.removeEventListener("click",i.current);r.current=!1},a=window.setTimeout(()=>{e.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(a),e.removeEventListener("pointerdown",o),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function uxe(t,e=globalThis==null?void 0:globalThis.document){const n=Br(t),r=_.useRef(!1);return _.useEffect(()=>{const i=o=>{o.target&&!r.current&&FJ(sxe,n,{originalEvent:o},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function QB(){const t=new CustomEvent(uO);document.dispatchEvent(t)}function FJ(t,e,n,{discrete:r}){const i=n.originalEvent.target,o=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?Y3(i,o):i.dispatchEvent(o)}var dxe=gm,fxe=DJ,UM=0;function iA(){_.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??e$()),document.body.insertAdjacentElement("beforeend",t[1]??e$()),UM++,()=>{UM===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),UM--}},[])}function e$(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var BM="focusScope.autoFocusOnMount",$M="focusScope.autoFocusOnUnmount",t$={bubbles:!1,cancelable:!0},hxe="FocusScope",_1=_.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:o,...a}=t,[s,l]=_.useState(null),c=Br(i),u=Br(o),f=_.useRef(null),h=Kt(e,g=>l(g)),p=_.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;_.useEffect(()=>{if(r){let g=function(T){if(p.paused||!s)return;const C=T.target;s.contains(C)?f.current=C:_f(f.current,{select:!0})},v=function(T){if(p.paused||!s)return;const C=T.relatedTarget;C!==null&&(s.contains(C)||_f(f.current,{select:!0}))},b=function(T){if(document.activeElement===document.body)for(const P of T)P.removedNodes.length>0&&_f(s)};document.addEventListener("focusin",g),document.addEventListener("focusout",v);const w=new MutationObserver(b);return s&&w.observe(s,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",v),w.disconnect()}}},[r,s,p.paused]),_.useEffect(()=>{if(s){r$.add(p);const g=document.activeElement;if(!s.contains(g)){const b=new CustomEvent(BM,t$);s.addEventListener(BM,c),s.dispatchEvent(b),b.defaultPrevented||(pxe(xxe(zJ(s)),{select:!0}),document.activeElement===g&&_f(s))}return()=>{s.removeEventListener(BM,c),setTimeout(()=>{const b=new CustomEvent($M,t$);s.addEventListener($M,u),s.dispatchEvent(b),b.defaultPrevented||_f(g??document.body,{select:!0}),s.removeEventListener($M,u),r$.remove(p)},0)}}},[s,c,u,p]);const y=_.useCallback(g=>{if(!n&&!r||p.paused)return;const v=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,b=document.activeElement;if(v&&b){const w=g.currentTarget,[T,C]=mxe(w);T&&C?!g.shiftKey&&b===C?(g.preventDefault(),n&&_f(T,{select:!0})):g.shiftKey&&b===T&&(g.preventDefault(),n&&_f(C,{select:!0})):b===w&&g.preventDefault()}},[n,r,p.paused]);return d.jsx(At.div,{tabIndex:-1,...a,ref:h,onKeyDown:y})});_1.displayName=hxe;function pxe(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(_f(r,{select:e}),document.activeElement!==n)return}function mxe(t){const e=zJ(t),n=n$(e,t),r=n$(e.reverse(),t);return[n,r]}function zJ(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function n$(t,e){for(const n of t)if(!gxe(n,{upTo:e}))return n}function gxe(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function yxe(t){return t instanceof HTMLInputElement&&"select"in t}function _f(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&yxe(t)&&e&&t.select()}}var r$=vxe();function vxe(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=i$(t,e),t.unshift(e)},remove(e){var n;t=i$(t,e),(n=t[0])==null||n.resume()}}}function i$(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function xxe(t){return t.filter(e=>e.tagName!=="A")}var $i=globalThis!=null&&globalThis.document?_.useLayoutEffect:()=>{},wxe=_K.useId||(()=>{}),bxe=0;function Xa(t){const[e,n]=_.useState(wxe());return $i(()=>{n(r=>r??String(bxe++))},[t]),e?`radix-${e}`:""}const Sxe=["top","right","bottom","left"],Wf=Math.min,Cs=Math.max,mT=Math.round,bE=Math.floor,Gf=t=>({x:t,y:t}),Exe={left:"right",right:"left",bottom:"top",top:"bottom"},_xe={start:"end",end:"start"};function dO(t,e,n){return Cs(t,Wf(e,n))}function dd(t,e){return typeof t=="function"?t(e):t}function fd(t){return t.split("-")[0]}function h0(t){return t.split("-")[1]}function X3(t){return t==="x"?"y":"x"}function K3(t){return t==="y"?"height":"width"}function qf(t){return["top","bottom"].includes(fd(t))?"y":"x"}function J3(t){return X3(qf(t))}function Txe(t,e,n){n===void 0&&(n=!1);const r=h0(t),i=J3(t),o=K3(i);let a=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(a=gT(a)),[a,gT(a)]}function Cxe(t){const e=gT(t);return[fO(t),e,fO(e)]}function fO(t){return t.replace(/start|end/g,e=>_xe[e])}function Axe(t,e,n){const r=["left","right"],i=["right","left"],o=["top","bottom"],a=["bottom","top"];switch(t){case"top":case"bottom":return n?e?i:r:e?r:i;case"left":case"right":return e?o:a;default:return[]}}function Mxe(t,e,n,r){const i=h0(t);let o=Axe(fd(t),n==="start",r);return i&&(o=o.map(a=>a+"-"+i),e&&(o=o.concat(o.map(fO)))),o}function gT(t){return t.replace(/left|right|bottom|top/g,e=>Exe[e])}function Pxe(t){return{top:0,right:0,bottom:0,left:0,...t}}function UJ(t){return typeof t!="number"?Pxe(t):{top:t,right:t,bottom:t,left:t}}function yT(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function o$(t,e,n){let{reference:r,floating:i}=t;const o=qf(e),a=J3(e),s=K3(a),l=fd(e),c=o==="y",u=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,h=r[s]/2-i[s]/2;let p;switch(l){case"top":p={x:u,y:r.y-i.height};break;case"bottom":p={x:u,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:f};break;case"left":p={x:r.x-i.width,y:f};break;default:p={x:r.x,y:r.y}}switch(h0(e)){case"start":p[a]-=h*(n&&c?-1:1);break;case"end":p[a]+=h*(n&&c?-1:1);break}return p}const kxe=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:a}=n,s=o.filter(Boolean),l=await(a.isRTL==null?void 0:a.isRTL(e));let c=await a.getElementRects({reference:t,floating:e,strategy:i}),{x:u,y:f}=o$(c,r,l),h=r,p={},y=0;for(let g=0;g<s.length;g++){const{name:v,fn:b}=s[g],{x:w,y:T,data:C,reset:P}=await b({x:u,y:f,initialPlacement:r,placement:h,strategy:i,middlewareData:p,rects:c,platform:a,elements:{reference:t,floating:e}});u=w??u,f=T??f,p={...p,[v]:{...p[v],...C}},P&&y<=50&&(y++,typeof P=="object"&&(P.placement&&(h=P.placement),P.rects&&(c=P.rects===!0?await a.getElementRects({reference:t,floating:e,strategy:i}):P.rects),{x:u,y:f}=o$(c,h,l)),g=-1)}return{x:u,y:f,placement:h,strategy:i,middlewareData:p}};async function ob(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:o,rects:a,elements:s,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:f="floating",altBoundary:h=!1,padding:p=0}=dd(e,t),y=UJ(p),v=s[h?f==="floating"?"reference":"floating":f],b=yT(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(v)))==null||n?v:v.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(s.floating)),boundary:c,rootBoundary:u,strategy:l})),w=f==="floating"?{x:r,y:i,width:a.floating.width,height:a.floating.height}:a.reference,T=await(o.getOffsetParent==null?void 0:o.getOffsetParent(s.floating)),C=await(o.isElement==null?void 0:o.isElement(T))?await(o.getScale==null?void 0:o.getScale(T))||{x:1,y:1}:{x:1,y:1},P=yT(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:s,rect:w,offsetParent:T,strategy:l}):w);return{top:(b.top-P.top+y.top)/C.y,bottom:(P.bottom-b.bottom+y.bottom)/C.y,left:(b.left-P.left+y.left)/C.x,right:(P.right-b.right+y.right)/C.x}}const Nxe=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:i,rects:o,platform:a,elements:s,middlewareData:l}=e,{element:c,padding:u=0}=dd(t,e)||{};if(c==null)return{};const f=UJ(u),h={x:n,y:r},p=J3(i),y=K3(p),g=await a.getDimensions(c),v=p==="y",b=v?"top":"left",w=v?"bottom":"right",T=v?"clientHeight":"clientWidth",C=o.reference[y]+o.reference[p]-h[p]-o.floating[y],P=h[p]-o.reference[p],M=await(a.getOffsetParent==null?void 0:a.getOffsetParent(c));let k=M?M[T]:0;(!k||!await(a.isElement==null?void 0:a.isElement(M)))&&(k=s.floating[T]||o.floating[y]);const I=C/2-P/2,U=k/2-g[y]/2-1,z=Wf(f[b],U),O=Wf(f[w],U),B=z,$=k-g[y]-O,F=k/2-g[y]/2+I,J=dO(B,F,$),K=!l.arrow&&h0(i)!=null&&F!==J&&o.reference[y]/2-(F<B?z:O)-g[y]/2<0,Z=K?F<B?F-B:F-$:0;return{[p]:h[p]+Z,data:{[p]:J,centerOffset:F-J-Z,...K&&{alignmentOffset:Z}},reset:K}}}),Rxe=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:o,rects:a,initialPlacement:s,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:f=!0,fallbackPlacements:h,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:g=!0,...v}=dd(t,e);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const b=fd(i),w=qf(s),T=fd(s)===s,C=await(l.isRTL==null?void 0:l.isRTL(c.floating)),P=h||(T||!g?[gT(s)]:Cxe(s)),M=y!=="none";!h&&M&&P.push(...Mxe(s,g,y,C));const k=[s,...P],I=await ob(e,v),U=[];let z=((r=o.flip)==null?void 0:r.overflows)||[];if(u&&U.push(I[b]),f){const F=Txe(i,a,C);U.push(I[F[0]],I[F[1]])}if(z=[...z,{placement:i,overflows:U}],!U.every(F=>F<=0)){var O,B;const F=(((O=o.flip)==null?void 0:O.index)||0)+1,J=k[F];if(J)return{data:{index:F,overflows:z},reset:{placement:J}};let K=(B=z.filter(Z=>Z.overflows[0]<=0).sort((Z,H)=>Z.overflows[1]-H.overflows[1])[0])==null?void 0:B.placement;if(!K)switch(p){case"bestFit":{var $;const Z=($=z.filter(H=>{if(M){const Y=qf(H.placement);return Y===w||Y==="y"}return!0}).map(H=>[H.placement,H.overflows.filter(Y=>Y>0).reduce((Y,L)=>Y+L,0)]).sort((H,Y)=>H[1]-Y[1])[0])==null?void 0:$[0];Z&&(K=Z);break}case"initialPlacement":K=s;break}if(i!==K)return{reset:{placement:K}}}return{}}}};function a$(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function s$(t){return Sxe.some(e=>t[e]>=0)}const jxe=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...i}=dd(t,e);switch(r){case"referenceHidden":{const o=await ob(e,{...i,elementContext:"reference"}),a=a$(o,n.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:s$(a)}}}case"escaped":{const o=await ob(e,{...i,altBoundary:!0}),a=a$(o,n.floating);return{data:{escapedOffsets:a,escaped:s$(a)}}}default:return{}}}}};async function Ixe(t,e){const{placement:n,platform:r,elements:i}=t,o=await(r.isRTL==null?void 0:r.isRTL(i.floating)),a=fd(n),s=h0(n),l=qf(n)==="y",c=["left","top"].includes(a)?-1:1,u=o&&l?-1:1,f=dd(e,t);let{mainAxis:h,crossAxis:p,alignmentAxis:y}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return s&&typeof y=="number"&&(p=s==="end"?y*-1:y),l?{x:p*u,y:h*c}:{x:h*c,y:p*u}}const Oxe=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:o,placement:a,middlewareData:s}=e,l=await Ixe(e,t);return a===((n=s.offset)==null?void 0:n.placement)&&(r=s.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:o+l.y,data:{...l,placement:a}}}}},Lxe=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:o=!0,crossAxis:a=!1,limiter:s={fn:v=>{let{x:b,y:w}=v;return{x:b,y:w}}},...l}=dd(t,e),c={x:n,y:r},u=await ob(e,l),f=qf(fd(i)),h=X3(f);let p=c[h],y=c[f];if(o){const v=h==="y"?"top":"left",b=h==="y"?"bottom":"right",w=p+u[v],T=p-u[b];p=dO(w,p,T)}if(a){const v=f==="y"?"top":"left",b=f==="y"?"bottom":"right",w=y+u[v],T=y-u[b];y=dO(w,y,T)}const g=s.fn({...e,[h]:p,[f]:y});return{...g,data:{x:g.x-n,y:g.y-r,enabled:{[h]:o,[f]:a}}}}}},Dxe=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:i,rects:o,middlewareData:a}=e,{offset:s=0,mainAxis:l=!0,crossAxis:c=!0}=dd(t,e),u={x:n,y:r},f=qf(i),h=X3(f);let p=u[h],y=u[f];const g=dd(s,e),v=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(l){const T=h==="y"?"height":"width",C=o.reference[h]-o.floating[T]+v.mainAxis,P=o.reference[h]+o.reference[T]-v.mainAxis;p<C?p=C:p>P&&(p=P)}if(c){var b,w;const T=h==="y"?"width":"height",C=["top","left"].includes(fd(i)),P=o.reference[f]-o.floating[T]+(C&&((b=a.offset)==null?void 0:b[f])||0)+(C?0:v.crossAxis),M=o.reference[f]+o.reference[T]+(C?0:((w=a.offset)==null?void 0:w[f])||0)-(C?v.crossAxis:0);y<P?y=P:y>M&&(y=M)}return{[h]:p,[f]:y}}}},Fxe=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:i,rects:o,platform:a,elements:s}=e,{apply:l=()=>{},...c}=dd(t,e),u=await ob(e,c),f=fd(i),h=h0(i),p=qf(i)==="y",{width:y,height:g}=o.floating;let v,b;f==="top"||f==="bottom"?(v=f,b=h===(await(a.isRTL==null?void 0:a.isRTL(s.floating))?"start":"end")?"left":"right"):(b=f,v=h==="end"?"top":"bottom");const w=g-u.top-u.bottom,T=y-u.left-u.right,C=Wf(g-u[v],w),P=Wf(y-u[b],T),M=!e.middlewareData.shift;let k=C,I=P;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(I=T),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(k=w),M&&!h){const z=Cs(u.left,0),O=Cs(u.right,0),B=Cs(u.top,0),$=Cs(u.bottom,0);p?I=y-2*(z!==0||O!==0?z+O:Cs(u.left,u.right)):k=g-2*(B!==0||$!==0?B+$:Cs(u.top,u.bottom))}await l({...e,availableWidth:I,availableHeight:k});const U=await a.getDimensions(s.floating);return y!==U.width||g!==U.height?{reset:{rects:!0}}:{}}}};function oA(){return typeof window<"u"}function p0(t){return BJ(t)?(t.nodeName||"").toLowerCase():"#document"}function Ps(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function ou(t){var e;return(e=(BJ(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function BJ(t){return oA()?t instanceof Node||t instanceof Ps(t).Node:!1}function oc(t){return oA()?t instanceof Element||t instanceof Ps(t).Element:!1}function Xc(t){return oA()?t instanceof HTMLElement||t instanceof Ps(t).HTMLElement:!1}function l$(t){return!oA()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Ps(t).ShadowRoot}function T1(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=ac(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(i)}function zxe(t){return["table","td","th"].includes(p0(t))}function aA(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function Z3(t){const e=Q3(),n=oc(t)?ac(t):t;return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function Uxe(t){let e=Yf(t);for(;Xc(e)&&!hv(e);){if(Z3(e))return e;if(aA(e))return null;e=Yf(e)}return null}function Q3(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function hv(t){return["html","body","#document"].includes(p0(t))}function ac(t){return Ps(t).getComputedStyle(t)}function sA(t){return oc(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Yf(t){if(p0(t)==="html")return t;const e=t.assignedSlot||t.parentNode||l$(t)&&t.host||ou(t);return l$(e)?e.host:e}function $J(t){const e=Yf(t);return hv(e)?t.ownerDocument?t.ownerDocument.body:t.body:Xc(e)&&T1(e)?e:$J(e)}function ab(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=$J(t),o=i===((r=t.ownerDocument)==null?void 0:r.body),a=Ps(i);if(o){const s=hO(a);return e.concat(a,a.visualViewport||[],T1(i)?i:[],s&&n?ab(s):[])}return e.concat(i,ab(i,[],n))}function hO(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function HJ(t){const e=ac(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=Xc(t),o=i?t.offsetWidth:n,a=i?t.offsetHeight:r,s=mT(n)!==o||mT(r)!==a;return s&&(n=o,r=a),{width:n,height:r,$:s}}function e4(t){return oc(t)?t:t.contextElement}function Wy(t){const e=e4(t);if(!Xc(e))return Gf(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:o}=HJ(e);let a=(o?mT(n.width):n.width)/r,s=(o?mT(n.height):n.height)/i;return(!a||!Number.isFinite(a))&&(a=1),(!s||!Number.isFinite(s))&&(s=1),{x:a,y:s}}const Bxe=Gf(0);function VJ(t){const e=Ps(t);return!Q3()||!e.visualViewport?Bxe:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function $xe(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Ps(t)?!1:e}function em(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),o=e4(t);let a=Gf(1);e&&(r?oc(r)&&(a=Wy(r)):a=Wy(t));const s=$xe(o,n,r)?VJ(o):Gf(0);let l=(i.left+s.x)/a.x,c=(i.top+s.y)/a.y,u=i.width/a.x,f=i.height/a.y;if(o){const h=Ps(o),p=r&&oc(r)?Ps(r):r;let y=h,g=hO(y);for(;g&&r&&p!==y;){const v=Wy(g),b=g.getBoundingClientRect(),w=ac(g),T=b.left+(g.clientLeft+parseFloat(w.paddingLeft))*v.x,C=b.top+(g.clientTop+parseFloat(w.paddingTop))*v.y;l*=v.x,c*=v.y,u*=v.x,f*=v.y,l+=T,c+=C,y=Ps(g),g=hO(y)}}return yT({width:u,height:f,x:l,y:c})}function Hxe(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const o=i==="fixed",a=ou(r),s=e?aA(e.floating):!1;if(r===a||s&&o)return n;let l={scrollLeft:0,scrollTop:0},c=Gf(1);const u=Gf(0),f=Xc(r);if((f||!f&&!o)&&((p0(r)!=="body"||T1(a))&&(l=sA(r)),Xc(r))){const h=em(r);c=Wy(r),u.x=h.x+r.clientLeft,u.y=h.y+r.clientTop}return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x,y:n.y*c.y-l.scrollTop*c.y+u.y}}function Vxe(t){return Array.from(t.getClientRects())}function pO(t,e){const n=sA(t).scrollLeft;return e?e.left+n:em(ou(t)).left+n}function Wxe(t){const e=ou(t),n=sA(t),r=t.ownerDocument.body,i=Cs(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),o=Cs(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let a=-n.scrollLeft+pO(t);const s=-n.scrollTop;return ac(r).direction==="rtl"&&(a+=Cs(e.clientWidth,r.clientWidth)-i),{width:i,height:o,x:a,y:s}}function Gxe(t,e){const n=Ps(t),r=ou(t),i=n.visualViewport;let o=r.clientWidth,a=r.clientHeight,s=0,l=0;if(i){o=i.width,a=i.height;const c=Q3();(!c||c&&e==="fixed")&&(s=i.offsetLeft,l=i.offsetTop)}return{width:o,height:a,x:s,y:l}}function qxe(t,e){const n=em(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,o=Xc(t)?Wy(t):Gf(1),a=t.clientWidth*o.x,s=t.clientHeight*o.y,l=i*o.x,c=r*o.y;return{width:a,height:s,x:l,y:c}}function c$(t,e,n){let r;if(e==="viewport")r=Gxe(t,n);else if(e==="document")r=Wxe(ou(t));else if(oc(e))r=qxe(e,n);else{const i=VJ(t);r={...e,x:e.x-i.x,y:e.y-i.y}}return yT(r)}function WJ(t,e){const n=Yf(t);return n===e||!oc(n)||hv(n)?!1:ac(n).position==="fixed"||WJ(n,e)}function Yxe(t,e){const n=e.get(t);if(n)return n;let r=ab(t,[],!1).filter(s=>oc(s)&&p0(s)!=="body"),i=null;const o=ac(t).position==="fixed";let a=o?Yf(t):t;for(;oc(a)&&!hv(a);){const s=ac(a),l=Z3(a);!l&&s.position==="fixed"&&(i=null),(o?!l&&!i:!l&&s.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||T1(a)&&!l&&WJ(t,a))?r=r.filter(u=>u!==a):i=s,a=Yf(a)}return e.set(t,r),r}function Xxe(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const a=[...n==="clippingAncestors"?aA(e)?[]:Yxe(e,this._c):[].concat(n),r],s=a[0],l=a.reduce((c,u)=>{const f=c$(e,u,i);return c.top=Cs(f.top,c.top),c.right=Wf(f.right,c.right),c.bottom=Wf(f.bottom,c.bottom),c.left=Cs(f.left,c.left),c},c$(e,s,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function Kxe(t){const{width:e,height:n}=HJ(t);return{width:e,height:n}}function Jxe(t,e,n){const r=Xc(e),i=ou(e),o=n==="fixed",a=em(t,!0,o,e);let s={scrollLeft:0,scrollTop:0};const l=Gf(0);if(r||!r&&!o)if((p0(e)!=="body"||T1(i))&&(s=sA(e)),r){const p=em(e,!0,o,e);l.x=p.x+e.clientLeft,l.y=p.y+e.clientTop}else i&&(l.x=pO(i));let c=0,u=0;if(i&&!r&&!o){const p=i.getBoundingClientRect();u=p.top+s.scrollTop,c=p.left+s.scrollLeft-pO(i,p)}const f=a.left+s.scrollLeft-l.x-c,h=a.top+s.scrollTop-l.y-u;return{x:f,y:h,width:a.width,height:a.height}}function HM(t){return ac(t).position==="static"}function u$(t,e){if(!Xc(t)||ac(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return ou(t)===n&&(n=n.ownerDocument.body),n}function GJ(t,e){const n=Ps(t);if(aA(t))return n;if(!Xc(t)){let i=Yf(t);for(;i&&!hv(i);){if(oc(i)&&!HM(i))return i;i=Yf(i)}return n}let r=u$(t,e);for(;r&&zxe(r)&&HM(r);)r=u$(r,e);return r&&hv(r)&&HM(r)&&!Z3(r)?n:r||Uxe(t)||n}const Zxe=async function(t){const e=this.getOffsetParent||GJ,n=this.getDimensions,r=await n(t.floating);return{reference:Jxe(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function Qxe(t){return ac(t).direction==="rtl"}const ewe={convertOffsetParentRelativeRectToViewportRelativeRect:Hxe,getDocumentElement:ou,getClippingRect:Xxe,getOffsetParent:GJ,getElementRects:Zxe,getClientRects:Vxe,getDimensions:Kxe,getScale:Wy,isElement:oc,isRTL:Qxe};function twe(t,e){let n=null,r;const i=ou(t);function o(){var s;clearTimeout(r),(s=n)==null||s.disconnect(),n=null}function a(s,l){s===void 0&&(s=!1),l===void 0&&(l=1),o();const{left:c,top:u,width:f,height:h}=t.getBoundingClientRect();if(s||e(),!f||!h)return;const p=bE(u),y=bE(i.clientWidth-(c+f)),g=bE(i.clientHeight-(u+h)),v=bE(c),w={rootMargin:-p+"px "+-y+"px "+-g+"px "+-v+"px",threshold:Cs(0,Wf(1,l))||1};let T=!0;function C(P){const M=P[0].intersectionRatio;if(M!==l){if(!T)return a();M?a(!1,M):r=setTimeout(()=>{a(!1,1e-7)},1e3)}T=!1}try{n=new IntersectionObserver(C,{...w,root:i.ownerDocument})}catch{n=new IntersectionObserver(C,w)}n.observe(t)}return a(!0),o}function nwe(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:s=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=e4(t),u=i||o?[...c?ab(c):[],...ab(e)]:[];u.forEach(b=>{i&&b.addEventListener("scroll",n,{passive:!0}),o&&b.addEventListener("resize",n)});const f=c&&s?twe(c,n):null;let h=-1,p=null;a&&(p=new ResizeObserver(b=>{let[w]=b;w&&w.target===c&&p&&(p.unobserve(e),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var T;(T=p)==null||T.observe(e)})),n()}),c&&!l&&p.observe(c),p.observe(e));let y,g=l?em(t):null;l&&v();function v(){const b=em(t);g&&(b.x!==g.x||b.y!==g.y||b.width!==g.width||b.height!==g.height)&&n(),g=b,y=requestAnimationFrame(v)}return n(),()=>{var b;u.forEach(w=>{i&&w.removeEventListener("scroll",n),o&&w.removeEventListener("resize",n)}),f==null||f(),(b=p)==null||b.disconnect(),p=null,l&&cancelAnimationFrame(y)}}const rwe=Oxe,iwe=Lxe,owe=Rxe,awe=Fxe,swe=jxe,d$=Nxe,lwe=Dxe,cwe=(t,e,n)=>{const r=new Map,i={platform:ewe,...n},o={...i.platform,_c:r};return kxe(t,e,{...i,platform:o})};var Z_=typeof document<"u"?_.useLayoutEffect:_.useEffect;function vT(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!vT(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const o=i[r];if(!(o==="_owner"&&t.$$typeof)&&!vT(t[o],e[o]))return!1}return!0}return t!==t&&e!==e}function qJ(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function f$(t,e){const n=qJ(t);return Math.round(e*n)/n}function VM(t){const e=_.useRef(t);return Z_(()=>{e.current=t}),e}function uwe(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:o,floating:a}={},transform:s=!0,whileElementsMounted:l,open:c}=t,[u,f]=_.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[h,p]=_.useState(r);vT(h,r)||p(r);const[y,g]=_.useState(null),[v,b]=_.useState(null),w=_.useCallback(H=>{H!==M.current&&(M.current=H,g(H))},[]),T=_.useCallback(H=>{H!==k.current&&(k.current=H,b(H))},[]),C=o||y,P=a||v,M=_.useRef(null),k=_.useRef(null),I=_.useRef(u),U=l!=null,z=VM(l),O=VM(i),B=VM(c),$=_.useCallback(()=>{if(!M.current||!k.current)return;const H={placement:e,strategy:n,middleware:h};O.current&&(H.platform=O.current),cwe(M.current,k.current,H).then(Y=>{const L={...Y,isPositioned:B.current!==!1};F.current&&!vT(I.current,L)&&(I.current=L,a0.flushSync(()=>{f(L)}))})},[h,e,n,O,B]);Z_(()=>{c===!1&&I.current.isPositioned&&(I.current.isPositioned=!1,f(H=>({...H,isPositioned:!1})))},[c]);const F=_.useRef(!1);Z_(()=>(F.current=!0,()=>{F.current=!1}),[]),Z_(()=>{if(C&&(M.current=C),P&&(k.current=P),C&&P){if(z.current)return z.current(C,P,$);$()}},[C,P,$,z,U]);const J=_.useMemo(()=>({reference:M,floating:k,setReference:w,setFloating:T}),[w,T]),K=_.useMemo(()=>({reference:C,floating:P}),[C,P]),Z=_.useMemo(()=>{const H={position:n,left:0,top:0};if(!K.floating)return H;const Y=f$(K.floating,u.x),L=f$(K.floating,u.y);return s?{...H,transform:"translate("+Y+"px, "+L+"px)",...qJ(K.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:Y,top:L}},[n,s,K.floating,u.x,u.y]);return _.useMemo(()=>({...u,update:$,refs:J,elements:K,floatingStyles:Z}),[u,$,J,K,Z])}const dwe=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:i}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?d$({element:r.current,padding:i}).fn(n):{}:r?d$({element:r,padding:i}).fn(n):{}}}},fwe=(t,e)=>({...rwe(t),options:[t,e]}),hwe=(t,e)=>({...iwe(t),options:[t,e]}),pwe=(t,e)=>({...lwe(t),options:[t,e]}),mwe=(t,e)=>({...owe(t),options:[t,e]}),gwe=(t,e)=>({...awe(t),options:[t,e]}),ywe=(t,e)=>({...swe(t),options:[t,e]}),vwe=(t,e)=>({...dwe(t),options:[t,e]});var xwe="Arrow",YJ=_.forwardRef((t,e)=>{const{children:n,width:r=10,height:i=5,...o}=t;return d.jsx(At.svg,{...o,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:d.jsx("polygon",{points:"0,0 30,0 15,10"})})});YJ.displayName=xwe;var wwe=YJ;function bwe(t,e=[]){let n=[];function r(o,a){const s=_.createContext(a),l=n.length;n=[...n,a];function c(f){const{scope:h,children:p,...y}=f,g=(h==null?void 0:h[t][l])||s,v=_.useMemo(()=>y,Object.values(y));return d.jsx(g.Provider,{value:v,children:p})}function u(f,h){const p=(h==null?void 0:h[t][l])||s,y=_.useContext(p);if(y)return y;if(a!==void 0)return a;throw new Error(`\`${f}\` must be used within \`${o}\``)}return c.displayName=o+"Provider",[c,u]}const i=()=>{const o=n.map(a=>_.createContext(a));return function(s){const l=(s==null?void 0:s[t])||o;return _.useMemo(()=>({[`__scope${t}`]:{...s,[t]:l}}),[s,l])}};return i.scopeName=t,[r,Swe(i,...e)]}function Swe(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(o){const a=r.reduce((s,{useScope:l,scopeName:c})=>{const f=l(o)[`__scope${c}`];return{...s,...f}},{});return _.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return n.scopeName=e.scopeName,n}function lA(t){const[e,n]=_.useState(void 0);return $i(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const o=i[0];let a,s;if("borderBoxSize"in o){const l=o.borderBoxSize,c=Array.isArray(l)?l[0]:l;a=c.inlineSize,s=c.blockSize}else a=t.offsetWidth,s=t.offsetHeight;n({width:a,height:s})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var t4="Popper",[XJ,sh]=bwe(t4),[Ewe,KJ]=XJ(t4),JJ=t=>{const{__scopePopper:e,children:n}=t,[r,i]=_.useState(null);return d.jsx(Ewe,{scope:e,anchor:r,onAnchorChange:i,children:n})};JJ.displayName=t4;var ZJ="PopperAnchor",QJ=_.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...i}=t,o=KJ(ZJ,n),a=_.useRef(null),s=Kt(e,a);return _.useEffect(()=>{o.onAnchorChange((r==null?void 0:r.current)||a.current)}),r?null:d.jsx(At.div,{...i,ref:s})});QJ.displayName=ZJ;var n4="PopperContent",[_we,Twe]=XJ(n4),eZ=_.forwardRef((t,e)=>{var ie,pe,de,ce,he,ee;const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:o="center",alignOffset:a=0,arrowPadding:s=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:f="partial",hideWhenDetached:h=!1,updatePositionStrategy:p="optimized",onPlaced:y,...g}=t,v=KJ(n4,n),[b,w]=_.useState(null),T=Kt(e,xe=>w(xe)),[C,P]=_.useState(null),M=lA(C),k=(M==null?void 0:M.width)??0,I=(M==null?void 0:M.height)??0,U=r+(o!=="center"?"-"+o:""),z=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},O=Array.isArray(c)?c:[c],B=O.length>0,$={padding:z,boundary:O.filter(Awe),altBoundary:B},{refs:F,floatingStyles:J,placement:K,isPositioned:Z,middlewareData:H}=uwe({strategy:"fixed",placement:U,whileElementsMounted:(...xe)=>nwe(...xe,{animationFrame:p==="always"}),elements:{reference:v.anchor},middleware:[fwe({mainAxis:i+I,alignmentAxis:a}),l&&hwe({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?pwe():void 0,...$}),l&&mwe({...$}),gwe({...$,apply:({elements:xe,rects:be,availableWidth:Ae,availableHeight:Ce})=>{const{width:oe,height:ae}=be.reference,Se=xe.floating.style;Se.setProperty("--radix-popper-available-width",`${Ae}px`),Se.setProperty("--radix-popper-available-height",`${Ce}px`),Se.setProperty("--radix-popper-anchor-width",`${oe}px`),Se.setProperty("--radix-popper-anchor-height",`${ae}px`)}}),C&&vwe({element:C,padding:s}),Mwe({arrowWidth:k,arrowHeight:I}),h&&ywe({strategy:"referenceHidden",...$})]}),[Y,L]=rZ(K),N=Br(y);$i(()=>{Z&&(N==null||N())},[Z,N]);const V=(ie=H.arrow)==null?void 0:ie.x,W=(pe=H.arrow)==null?void 0:pe.y,ne=((de=H.arrow)==null?void 0:de.centerOffset)!==0,[se,te]=_.useState();return $i(()=>{b&&te(window.getComputedStyle(b).zIndex)},[b]),d.jsx("div",{ref:F.setFloating,"data-radix-popper-content-wrapper":"",style:{...J,transform:Z?J.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:se,"--radix-popper-transform-origin":[(ce=H.transformOrigin)==null?void 0:ce.x,(he=H.transformOrigin)==null?void 0:he.y].join(" "),...((ee=H.hide)==null?void 0:ee.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:d.jsx(_we,{scope:n,placedSide:Y,onArrowChange:P,arrowX:V,arrowY:W,shouldHideArrow:ne,children:d.jsx(At.div,{"data-side":Y,"data-align":L,...g,ref:T,style:{...g.style,animation:Z?void 0:"none"}})})})});eZ.displayName=n4;var tZ="PopperArrow",Cwe={top:"bottom",right:"left",bottom:"top",left:"right"},nZ=_.forwardRef(function(e,n){const{__scopePopper:r,...i}=e,o=Twe(tZ,r),a=Cwe[o.placedSide];return d.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:d.jsx(wwe,{...i,ref:n,style:{...i.style,display:"block"}})})});nZ.displayName=tZ;function Awe(t){return t!==null}var Mwe=t=>({name:"transformOrigin",options:t,fn(e){var v,b,w;const{placement:n,rects:r,middlewareData:i}=e,a=((v=i.arrow)==null?void 0:v.centerOffset)!==0,s=a?0:t.arrowWidth,l=a?0:t.arrowHeight,[c,u]=rZ(n),f={start:"0%",center:"50%",end:"100%"}[u],h=(((b=i.arrow)==null?void 0:b.x)??0)+s/2,p=(((w=i.arrow)==null?void 0:w.y)??0)+l/2;let y="",g="";return c==="bottom"?(y=a?f:`${h}px`,g=`${-l}px`):c==="top"?(y=a?f:`${h}px`,g=`${r.floating.height+l}px`):c==="right"?(y=`${-l}px`,g=a?f:`${p}px`):c==="left"&&(y=`${r.floating.width+l}px`,g=a?f:`${p}px`),{data:{x:y,y:g}}}});function rZ(t){const[e,n="center"]=t.split("-");return[e,n]}var cA=JJ,C1=QJ,uA=eZ,dA=nZ,Pwe="Portal",m0=_.forwardRef((t,e)=>{var s;const{container:n,...r}=t,[i,o]=_.useState(!1);$i(()=>o(!0),[]);const a=n||i&&((s=globalThis==null?void 0:globalThis.document)==null?void 0:s.body);return a?CK.createPortal(d.jsx(At.div,{...r,ref:e}),a):null});m0.displayName=Pwe;function kwe(t,e){return _.useReducer((n,r)=>e[n][r]??n,t)}var oo=t=>{const{present:e,children:n}=t,r=Nwe(e),i=typeof n=="function"?n({present:r.isPresent}):_.Children.only(n),o=Kt(r.ref,Rwe(i));return typeof n=="function"||r.isPresent?_.cloneElement(i,{ref:o}):null};oo.displayName="Presence";function Nwe(t){const[e,n]=_.useState(),r=_.useRef({}),i=_.useRef(t),o=_.useRef("none"),a=t?"mounted":"unmounted",[s,l]=kwe(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return _.useEffect(()=>{const c=SE(r.current);o.current=s==="mounted"?c:"none"},[s]),$i(()=>{const c=r.current,u=i.current;if(u!==t){const h=o.current,p=SE(c);t?l("MOUNT"):p==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&h!==p?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,l]),$i(()=>{if(e){let c;const u=e.ownerDocument.defaultView??window,f=p=>{const g=SE(r.current).includes(p.animationName);if(p.target===e&&g&&(l("ANIMATION_END"),!i.current)){const v=e.style.animationFillMode;e.style.animationFillMode="forwards",c=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=v)})}},h=p=>{p.target===e&&(o.current=SE(r.current))};return e.addEventListener("animationstart",h),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{u.clearTimeout(c),e.removeEventListener("animationstart",h),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(s),ref:_.useCallback(c=>{c&&(r.current=getComputedStyle(c)),n(c)},[])}}function SE(t){return(t==null?void 0:t.animationName)||"none"}function Rwe(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function jwe(t,e=[]){let n=[];function r(o,a){const s=_.createContext(a),l=n.length;n=[...n,a];function c(f){const{scope:h,children:p,...y}=f,g=(h==null?void 0:h[t][l])||s,v=_.useMemo(()=>y,Object.values(y));return d.jsx(g.Provider,{value:v,children:p})}function u(f,h){const p=(h==null?void 0:h[t][l])||s,y=_.useContext(p);if(y)return y;if(a!==void 0)return a;throw new Error(`\`${f}\` must be used within \`${o}\``)}return c.displayName=o+"Provider",[c,u]}const i=()=>{const o=n.map(a=>_.createContext(a));return function(s){const l=(s==null?void 0:s[t])||o;return _.useMemo(()=>({[`__scope${t}`]:{...s,[t]:l}}),[s,l])}};return i.scopeName=t,[r,Iwe(i,...e)]}function Iwe(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(o){const a=r.reduce((s,{useScope:l,scopeName:c})=>{const f=l(o)[`__scope${c}`];return{...s,...f}},{});return _.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return n.scopeName=e.scopeName,n}var WM="rovingFocusGroup.onEntryFocus",Owe={bubbles:!1,cancelable:!0},fA="RovingFocusGroup",[mO,iZ,Lwe]=f0(fA),[Dwe,g0]=jwe(fA,[Lwe]),[Fwe,zwe]=Dwe(fA),oZ=_.forwardRef((t,e)=>d.jsx(mO.Provider,{scope:t.__scopeRovingFocusGroup,children:d.jsx(mO.Slot,{scope:t.__scopeRovingFocusGroup,children:d.jsx(Uwe,{...t,ref:e})})}));oZ.displayName=fA;var Uwe=_.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:o,currentTabStopId:a,defaultCurrentTabStopId:s,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...f}=t,h=_.useRef(null),p=Kt(e,h),y=ah(o),[g=null,v]=wo({prop:a,defaultProp:s,onChange:l}),[b,w]=_.useState(!1),T=Br(c),C=iZ(n),P=_.useRef(!1),[M,k]=_.useState(0);return _.useEffect(()=>{const I=h.current;if(I)return I.addEventListener(WM,T),()=>I.removeEventListener(WM,T)},[T]),d.jsx(Fwe,{scope:n,orientation:r,dir:y,loop:i,currentTabStopId:g,onItemFocus:_.useCallback(I=>v(I),[v]),onItemShiftTab:_.useCallback(()=>w(!0),[]),onFocusableItemAdd:_.useCallback(()=>k(I=>I+1),[]),onFocusableItemRemove:_.useCallback(()=>k(I=>I-1),[]),children:d.jsx(At.div,{tabIndex:b||M===0?-1:0,"data-orientation":r,...f,ref:p,style:{outline:"none",...t.style},onMouseDown:ut(t.onMouseDown,()=>{P.current=!0}),onFocus:ut(t.onFocus,I=>{const U=!P.current;if(I.target===I.currentTarget&&U&&!b){const z=new CustomEvent(WM,Owe);if(I.currentTarget.dispatchEvent(z),!z.defaultPrevented){const O=C().filter(K=>K.focusable),B=O.find(K=>K.active),$=O.find(K=>K.id===g),J=[B,$,...O].filter(Boolean).map(K=>K.ref.current);lZ(J,u)}}P.current=!1}),onBlur:ut(t.onBlur,()=>w(!1))})})}),aZ="RovingFocusGroupItem",sZ=_.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:o,...a}=t,s=Xa(),l=o||s,c=zwe(aZ,n),u=c.currentTabStopId===l,f=iZ(n),{onFocusableItemAdd:h,onFocusableItemRemove:p}=c;return _.useEffect(()=>{if(r)return h(),()=>p()},[r,h,p]),d.jsx(mO.ItemSlot,{scope:n,id:l,focusable:r,active:i,children:d.jsx(At.span,{tabIndex:u?0:-1,"data-orientation":c.orientation,...a,ref:e,onMouseDown:ut(t.onMouseDown,y=>{r?c.onItemFocus(l):y.preventDefault()}),onFocus:ut(t.onFocus,()=>c.onItemFocus(l)),onKeyDown:ut(t.onKeyDown,y=>{if(y.key==="Tab"&&y.shiftKey){c.onItemShiftTab();return}if(y.target!==y.currentTarget)return;const g=Hwe(y,c.orientation,c.dir);if(g!==void 0){if(y.metaKey||y.ctrlKey||y.altKey||y.shiftKey)return;y.preventDefault();let b=f().filter(w=>w.focusable).map(w=>w.ref.current);if(g==="last")b.reverse();else if(g==="prev"||g==="next"){g==="prev"&&b.reverse();const w=b.indexOf(y.currentTarget);b=c.loop?Vwe(b,w+1):b.slice(w+1)}setTimeout(()=>lZ(b))}})})})});sZ.displayName=aZ;var Bwe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function $we(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function Hwe(t,e,n){const r=$we(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return Bwe[r]}function lZ(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function Vwe(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var r4=oZ,i4=sZ,Wwe=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Ug=new WeakMap,EE=new WeakMap,_E={},GM=0,cZ=function(t){return t&&(t.host||cZ(t.parentNode))},Gwe=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=cZ(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},qwe=function(t,e,n,r){var i=Gwe(e,Array.isArray(t)?t:[t]);_E[n]||(_E[n]=new WeakMap);var o=_E[n],a=[],s=new Set,l=new Set(i),c=function(f){!f||s.has(f)||(s.add(f),c(f.parentNode))};i.forEach(c);var u=function(f){!f||l.has(f)||Array.prototype.forEach.call(f.children,function(h){if(s.has(h))u(h);else try{var p=h.getAttribute(r),y=p!==null&&p!=="false",g=(Ug.get(h)||0)+1,v=(o.get(h)||0)+1;Ug.set(h,g),o.set(h,v),a.push(h),g===1&&y&&EE.set(h,!0),v===1&&h.setAttribute(n,"true"),y||h.setAttribute(r,"true")}catch(b){console.error("aria-hidden: cannot operate on ",h,b)}})};return u(e),s.clear(),GM++,function(){a.forEach(function(f){var h=Ug.get(f)-1,p=o.get(f)-1;Ug.set(f,h),o.set(f,p),h||(EE.has(f)||f.removeAttribute(r),EE.delete(f)),p||f.removeAttribute(n)}),GM--,GM||(Ug=new WeakMap,Ug=new WeakMap,EE=new WeakMap,_E={})}},hA=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),i=Wwe(t);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live]"))),qwe(r,i,n,"aria-hidden")):function(){return null}},gO=function(t,e){return gO=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},gO(t,e)};function A1(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");gO(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Fc=function(){return Fc=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Fc.apply(this,arguments)};function uZ(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function yO(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function vO(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o}function xT(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))}var Q_="right-scroll-bar-position",eT="width-before-scroll-bar",Ywe="with-scroll-bars-hidden",Xwe="--removed-body-scroll-bar-size";function qM(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function Kwe(t,e){var n=_.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=e,n.facade}var Jwe=typeof window<"u"?_.useLayoutEffect:_.useEffect,h$=new WeakMap;function Zwe(t,e){var n=Kwe(null,function(r){return t.forEach(function(i){return qM(i,r)})});return Jwe(function(){var r=h$.get(n);if(r){var i=new Set(r),o=new Set(t),a=n.current;i.forEach(function(s){o.has(s)||qM(s,null)}),o.forEach(function(s){i.has(s)||qM(s,a)})}h$.set(n,t)},[t]),n}function Qwe(t){return t}function ebe(t,e){e===void 0&&(e=Qwe);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(o){var a=e(o,r);return n.push(a),function(){n=n.filter(function(s){return s!==a})}},assignSyncMedium:function(o){for(r=!0;n.length;){var a=n;n=[],a.forEach(o)}n={push:function(s){return o(s)},filter:function(){return n}}},assignMedium:function(o){r=!0;var a=[];if(n.length){var s=n;n=[],s.forEach(o),a=n}var l=function(){var u=a;a=[],u.forEach(o)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(u){a.push(u),c()},filter:function(u){return a=a.filter(u),n}}}};return i}function tbe(t){t===void 0&&(t={});var e=ebe(null);return e.options=Fc({async:!0,ssr:!1},t),e}var dZ=function(t){var e=t.sideCar,n=uZ(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return _.createElement(r,Fc({},n))};dZ.isSideCarExport=!0;function nbe(t,e){return t.useMedium(e),dZ}var fZ=tbe(),YM=function(){},pA=_.forwardRef(function(t,e){var n=_.useRef(null),r=_.useState({onScrollCapture:YM,onWheelCapture:YM,onTouchMoveCapture:YM}),i=r[0],o=r[1],a=t.forwardProps,s=t.children,l=t.className,c=t.removeScrollBar,u=t.enabled,f=t.shards,h=t.sideCar,p=t.noIsolation,y=t.inert,g=t.allowPinchZoom,v=t.as,b=v===void 0?"div":v,w=t.gapMode,T=uZ(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),C=h,P=Zwe([n,e]),M=Fc(Fc({},T),i);return _.createElement(_.Fragment,null,u&&_.createElement(C,{sideCar:fZ,removeScrollBar:c,shards:f,noIsolation:p,inert:y,setCallbacks:o,allowPinchZoom:!!g,lockRef:n,gapMode:w}),a?_.cloneElement(_.Children.only(s),Fc(Fc({},M),{ref:P})):_.createElement(b,Fc({},M,{className:l,ref:P}),s))});pA.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};pA.classNames={fullWidth:eT,zeroRight:Q_};var rbe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function ibe(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=rbe();return e&&t.setAttribute("nonce",e),t}function obe(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function abe(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var sbe=function(){var t=0,e=null;return{add:function(n){t==0&&(e=ibe())&&(obe(e,n),abe(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},lbe=function(){var t=sbe();return function(e,n){_.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},hZ=function(){var t=lbe(),e=function(n){var r=n.styles,i=n.dynamic;return t(r,i),null};return e},cbe={left:0,top:0,right:0,gap:0},XM=function(t){return parseInt(t||"",10)||0},ube=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[XM(n),XM(r),XM(i)]},dbe=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return cbe;var e=ube(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},fbe=hZ(),Gy="data-scroll-locked",hbe=function(t,e,n,r){var i=t.left,o=t.top,a=t.right,s=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(Ywe,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(s,"px ").concat(r,`;
  }
  body[`).concat(Gy,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(s,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(s,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Q_,` {
    right: `).concat(s,"px ").concat(r,`;
  }
  
  .`).concat(eT,` {
    margin-right: `).concat(s,"px ").concat(r,`;
  }
  
  .`).concat(Q_," .").concat(Q_,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(eT," .").concat(eT,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Gy,`] {
    `).concat(Xwe,": ").concat(s,`px;
  }
`)},p$=function(){var t=parseInt(document.body.getAttribute(Gy)||"0",10);return isFinite(t)?t:0},pbe=function(){_.useEffect(function(){return document.body.setAttribute(Gy,(p$()+1).toString()),function(){var t=p$()-1;t<=0?document.body.removeAttribute(Gy):document.body.setAttribute(Gy,t.toString())}},[])},mbe=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,i=r===void 0?"margin":r;pbe();var o=_.useMemo(function(){return dbe(i)},[i]);return _.createElement(fbe,{styles:hbe(o,!e,i,n?"":"!important")})},xO=!1;if(typeof window<"u")try{var TE=Object.defineProperty({},"passive",{get:function(){return xO=!0,!0}});window.addEventListener("test",TE,TE),window.removeEventListener("test",TE,TE)}catch{xO=!1}var Bg=xO?{passive:!1}:!1,gbe=function(t){return t.tagName==="TEXTAREA"},pZ=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!gbe(t)&&n[e]==="visible")},ybe=function(t){return pZ(t,"overflowY")},vbe=function(t){return pZ(t,"overflowX")},m$=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=mZ(t,r);if(i){var o=gZ(t,r),a=o[1],s=o[2];if(a>s)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},xbe=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},wbe=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},mZ=function(t,e){return t==="v"?ybe(e):vbe(e)},gZ=function(t,e){return t==="v"?xbe(e):wbe(e)},bbe=function(t,e){return t==="h"&&e==="rtl"?-1:1},Sbe=function(t,e,n,r,i){var o=bbe(t,window.getComputedStyle(e).direction),a=o*r,s=n.target,l=e.contains(s),c=!1,u=a>0,f=0,h=0;do{var p=gZ(t,s),y=p[0],g=p[1],v=p[2],b=g-v-o*y;(y||b)&&mZ(t,s)&&(f+=b,h+=y),s instanceof ShadowRoot?s=s.host:s=s.parentNode}while(!l&&s!==document.body||l&&(e.contains(s)||e===s));return(u&&Math.abs(f)<1||!u&&Math.abs(h)<1)&&(c=!0),c},CE=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},g$=function(t){return[t.deltaX,t.deltaY]},y$=function(t){return t&&"current"in t?t.current:t},Ebe=function(t,e){return t[0]===e[0]&&t[1]===e[1]},_be=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},Tbe=0,$g=[];function Cbe(t){var e=_.useRef([]),n=_.useRef([0,0]),r=_.useRef(),i=_.useState(Tbe++)[0],o=_.useState(hZ)[0],a=_.useRef(t);_.useEffect(function(){a.current=t},[t]),_.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var g=xT([t.lockRef.current],(t.shards||[]).map(y$),!0).filter(Boolean);return g.forEach(function(v){return v.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),g.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var s=_.useCallback(function(g,v){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!a.current.allowPinchZoom;var b=CE(g),w=n.current,T="deltaX"in g?g.deltaX:w[0]-b[0],C="deltaY"in g?g.deltaY:w[1]-b[1],P,M=g.target,k=Math.abs(T)>Math.abs(C)?"h":"v";if("touches"in g&&k==="h"&&M.type==="range")return!1;var I=m$(k,M);if(!I)return!0;if(I?P=k:(P=k==="v"?"h":"v",I=m$(k,M)),!I)return!1;if(!r.current&&"changedTouches"in g&&(T||C)&&(r.current=P),!P)return!0;var U=r.current||P;return Sbe(U,v,g,U==="h"?T:C)},[]),l=_.useCallback(function(g){var v=g;if(!(!$g.length||$g[$g.length-1]!==o)){var b="deltaY"in v?g$(v):CE(v),w=e.current.filter(function(P){return P.name===v.type&&(P.target===v.target||v.target===P.shadowParent)&&Ebe(P.delta,b)})[0];if(w&&w.should){v.cancelable&&v.preventDefault();return}if(!w){var T=(a.current.shards||[]).map(y$).filter(Boolean).filter(function(P){return P.contains(v.target)}),C=T.length>0?s(v,T[0]):!a.current.noIsolation;C&&v.cancelable&&v.preventDefault()}}},[]),c=_.useCallback(function(g,v,b,w){var T={name:g,delta:v,target:b,should:w,shadowParent:Abe(b)};e.current.push(T),setTimeout(function(){e.current=e.current.filter(function(C){return C!==T})},1)},[]),u=_.useCallback(function(g){n.current=CE(g),r.current=void 0},[]),f=_.useCallback(function(g){c(g.type,g$(g),g.target,s(g,t.lockRef.current))},[]),h=_.useCallback(function(g){c(g.type,CE(g),g.target,s(g,t.lockRef.current))},[]);_.useEffect(function(){return $g.push(o),t.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:h}),document.addEventListener("wheel",l,Bg),document.addEventListener("touchmove",l,Bg),document.addEventListener("touchstart",u,Bg),function(){$g=$g.filter(function(g){return g!==o}),document.removeEventListener("wheel",l,Bg),document.removeEventListener("touchmove",l,Bg),document.removeEventListener("touchstart",u,Bg)}},[]);var p=t.removeScrollBar,y=t.inert;return _.createElement(_.Fragment,null,y?_.createElement(o,{styles:_be(i)}):null,p?_.createElement(mbe,{gapMode:t.gapMode}):null)}function Abe(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const Mbe=nbe(fZ,Cbe);var M1=_.forwardRef(function(t,e){return _.createElement(pA,Fc({},t,{ref:e,sideCar:Mbe}))});M1.classNames=pA.classNames;var wO=["Enter"," "],Pbe=["ArrowDown","PageUp","Home"],yZ=["ArrowUp","PageDown","End"],kbe=[...Pbe,...yZ],Nbe={ltr:[...wO,"ArrowRight"],rtl:[...wO,"ArrowLeft"]},Rbe={ltr:["ArrowLeft"],rtl:["ArrowRight"]},P1="Menu",[sb,jbe,Ibe]=f0(P1),[ym,vZ]=sa(P1,[Ibe,sh,g0]),mA=sh(),xZ=g0(),[Obe,vm]=ym(P1),[Lbe,k1]=ym(P1),wZ=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:i,onOpenChange:o,modal:a=!0}=t,s=mA(e),[l,c]=_.useState(null),u=_.useRef(!1),f=Br(o),h=ah(i);return _.useEffect(()=>{const p=()=>{u.current=!0,document.addEventListener("pointerdown",y,{capture:!0,once:!0}),document.addEventListener("pointermove",y,{capture:!0,once:!0})},y=()=>u.current=!1;return document.addEventListener("keydown",p,{capture:!0}),()=>{document.removeEventListener("keydown",p,{capture:!0}),document.removeEventListener("pointerdown",y,{capture:!0}),document.removeEventListener("pointermove",y,{capture:!0})}},[]),d.jsx(cA,{...s,children:d.jsx(Obe,{scope:e,open:n,onOpenChange:f,content:l,onContentChange:c,children:d.jsx(Lbe,{scope:e,onClose:_.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:u,dir:h,modal:a,children:r})})})};wZ.displayName=P1;var Dbe="MenuAnchor",o4=_.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,i=mA(n);return d.jsx(C1,{...i,...r,ref:e})});o4.displayName=Dbe;var a4="MenuPortal",[Fbe,bZ]=ym(a4,{forceMount:void 0}),SZ=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:i}=t,o=vm(a4,e);return d.jsx(Fbe,{scope:e,forceMount:n,children:d.jsx(oo,{present:n||o.open,children:d.jsx(m0,{asChild:!0,container:i,children:r})})})};SZ.displayName=a4;var nl="MenuContent",[zbe,s4]=ym(nl),EZ=_.forwardRef((t,e)=>{const n=bZ(nl,t.__scopeMenu),{forceMount:r=n.forceMount,...i}=t,o=vm(nl,t.__scopeMenu),a=k1(nl,t.__scopeMenu);return d.jsx(sb.Provider,{scope:t.__scopeMenu,children:d.jsx(oo,{present:r||o.open,children:d.jsx(sb.Slot,{scope:t.__scopeMenu,children:a.modal?d.jsx(Ube,{...i,ref:e}):d.jsx(Bbe,{...i,ref:e})})})})}),Ube=_.forwardRef((t,e)=>{const n=vm(nl,t.__scopeMenu),r=_.useRef(null),i=Kt(e,r);return _.useEffect(()=>{const o=r.current;if(o)return hA(o)},[]),d.jsx(l4,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:ut(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),Bbe=_.forwardRef((t,e)=>{const n=vm(nl,t.__scopeMenu);return d.jsx(l4,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),l4=_.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:i,onOpenAutoFocus:o,onCloseAutoFocus:a,disableOutsidePointerEvents:s,onEntryFocus:l,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:f,onInteractOutside:h,onDismiss:p,disableOutsideScroll:y,...g}=t,v=vm(nl,n),b=k1(nl,n),w=mA(n),T=xZ(n),C=jbe(n),[P,M]=_.useState(null),k=_.useRef(null),I=Kt(e,k,v.onContentChange),U=_.useRef(0),z=_.useRef(""),O=_.useRef(0),B=_.useRef(null),$=_.useRef("right"),F=_.useRef(0),J=y?M1:_.Fragment,K=y?{as:ud,allowPinchZoom:!0}:void 0,Z=Y=>{var ie,pe;const L=z.current+Y,N=C().filter(de=>!de.disabled),V=document.activeElement,W=(ie=N.find(de=>de.ref.current===V))==null?void 0:ie.textValue,ne=N.map(de=>de.textValue),se=Qbe(ne,L,W),te=(pe=N.find(de=>de.textValue===se))==null?void 0:pe.ref.current;(function de(ce){z.current=ce,window.clearTimeout(U.current),ce!==""&&(U.current=window.setTimeout(()=>de(""),1e3))})(L),te&&setTimeout(()=>te.focus())};_.useEffect(()=>()=>window.clearTimeout(U.current),[]),iA();const H=_.useCallback(Y=>{var N,V;return $.current===((N=B.current)==null?void 0:N.side)&&t1e(Y,(V=B.current)==null?void 0:V.area)},[]);return d.jsx(zbe,{scope:n,searchRef:z,onItemEnter:_.useCallback(Y=>{H(Y)&&Y.preventDefault()},[H]),onItemLeave:_.useCallback(Y=>{var L;H(Y)||((L=k.current)==null||L.focus(),M(null))},[H]),onTriggerLeave:_.useCallback(Y=>{H(Y)&&Y.preventDefault()},[H]),pointerGraceTimerRef:O,onPointerGraceIntentChange:_.useCallback(Y=>{B.current=Y},[]),children:d.jsx(J,{...K,children:d.jsx(_1,{asChild:!0,trapped:i,onMountAutoFocus:ut(o,Y=>{var L;Y.preventDefault(),(L=k.current)==null||L.focus({preventScroll:!0})}),onUnmountAutoFocus:a,children:d.jsx(gm,{asChild:!0,disableOutsidePointerEvents:s,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:f,onInteractOutside:h,onDismiss:p,children:d.jsx(r4,{asChild:!0,...T,dir:b.dir,orientation:"vertical",loop:r,currentTabStopId:P,onCurrentTabStopIdChange:M,onEntryFocus:ut(l,Y=>{b.isUsingKeyboardRef.current||Y.preventDefault()}),preventScrollOnEntryFocus:!0,children:d.jsx(uA,{role:"menu","aria-orientation":"vertical","data-state":zZ(v.open),"data-radix-menu-content":"",dir:b.dir,...w,...g,ref:I,style:{outline:"none",...g.style},onKeyDown:ut(g.onKeyDown,Y=>{const N=Y.target.closest("[data-radix-menu-content]")===Y.currentTarget,V=Y.ctrlKey||Y.altKey||Y.metaKey,W=Y.key.length===1;N&&(Y.key==="Tab"&&Y.preventDefault(),!V&&W&&Z(Y.key));const ne=k.current;if(Y.target!==ne||!kbe.includes(Y.key))return;Y.preventDefault();const te=C().filter(ie=>!ie.disabled).map(ie=>ie.ref.current);yZ.includes(Y.key)&&te.reverse(),Jbe(te)}),onBlur:ut(t.onBlur,Y=>{Y.currentTarget.contains(Y.target)||(window.clearTimeout(U.current),z.current="")}),onPointerMove:ut(t.onPointerMove,lb(Y=>{const L=Y.target,N=F.current!==Y.clientX;if(Y.currentTarget.contains(L)&&N){const V=Y.clientX>F.current?"right":"left";$.current=V,F.current=Y.clientX}}))})})})})})})});EZ.displayName=nl;var $be="MenuGroup",c4=_.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return d.jsx(At.div,{role:"group",...r,ref:e})});c4.displayName=$be;var Hbe="MenuLabel",_Z=_.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return d.jsx(At.div,{...r,ref:e})});_Z.displayName=Hbe;var wT="MenuItem",v$="menu.itemSelect",gA=_.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...i}=t,o=_.useRef(null),a=k1(wT,t.__scopeMenu),s=s4(wT,t.__scopeMenu),l=Kt(e,o),c=_.useRef(!1),u=()=>{const f=o.current;if(!n&&f){const h=new CustomEvent(v$,{bubbles:!0,cancelable:!0});f.addEventListener(v$,p=>r==null?void 0:r(p),{once:!0}),Y3(f,h),h.defaultPrevented?c.current=!1:a.onClose()}};return d.jsx(TZ,{...i,ref:l,disabled:n,onClick:ut(t.onClick,u),onPointerDown:f=>{var h;(h=t.onPointerDown)==null||h.call(t,f),c.current=!0},onPointerUp:ut(t.onPointerUp,f=>{var h;c.current||(h=f.currentTarget)==null||h.click()}),onKeyDown:ut(t.onKeyDown,f=>{const h=s.searchRef.current!=="";n||h&&f.key===" "||wO.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});gA.displayName=wT;var TZ=_.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:i,...o}=t,a=s4(wT,n),s=xZ(n),l=_.useRef(null),c=Kt(e,l),[u,f]=_.useState(!1),[h,p]=_.useState("");return _.useEffect(()=>{const y=l.current;y&&p((y.textContent??"").trim())},[o.children]),d.jsx(sb.ItemSlot,{scope:n,disabled:r,textValue:i??h,children:d.jsx(i4,{asChild:!0,...s,focusable:!r,children:d.jsx(At.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...o,ref:c,onPointerMove:ut(t.onPointerMove,lb(y=>{r?a.onItemLeave(y):(a.onItemEnter(y),y.defaultPrevented||y.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:ut(t.onPointerLeave,lb(y=>a.onItemLeave(y))),onFocus:ut(t.onFocus,()=>f(!0)),onBlur:ut(t.onBlur,()=>f(!1))})})})}),Vbe="MenuCheckboxItem",CZ=_.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...i}=t;return d.jsx(NZ,{scope:t.__scopeMenu,checked:n,children:d.jsx(gA,{role:"menuitemcheckbox","aria-checked":bT(n)?"mixed":n,...i,ref:e,"data-state":d4(n),onSelect:ut(i.onSelect,()=>r==null?void 0:r(bT(n)?!0:!n),{checkForDefaultPrevented:!1})})})});CZ.displayName=Vbe;var AZ="MenuRadioGroup",[Wbe,Gbe]=ym(AZ,{value:void 0,onValueChange:()=>{}}),MZ=_.forwardRef((t,e)=>{const{value:n,onValueChange:r,...i}=t,o=Br(r);return d.jsx(Wbe,{scope:t.__scopeMenu,value:n,onValueChange:o,children:d.jsx(c4,{...i,ref:e})})});MZ.displayName=AZ;var PZ="MenuRadioItem",kZ=_.forwardRef((t,e)=>{const{value:n,...r}=t,i=Gbe(PZ,t.__scopeMenu),o=n===i.value;return d.jsx(NZ,{scope:t.__scopeMenu,checked:o,children:d.jsx(gA,{role:"menuitemradio","aria-checked":o,...r,ref:e,"data-state":d4(o),onSelect:ut(r.onSelect,()=>{var a;return(a=i.onValueChange)==null?void 0:a.call(i,n)},{checkForDefaultPrevented:!1})})})});kZ.displayName=PZ;var u4="MenuItemIndicator",[NZ,qbe]=ym(u4,{checked:!1}),RZ=_.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...i}=t,o=qbe(u4,n);return d.jsx(oo,{present:r||bT(o.checked)||o.checked===!0,children:d.jsx(At.span,{...i,ref:e,"data-state":d4(o.checked)})})});RZ.displayName=u4;var Ybe="MenuSeparator",jZ=_.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return d.jsx(At.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});jZ.displayName=Ybe;var Xbe="MenuArrow",IZ=_.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,i=mA(n);return d.jsx(dA,{...i,...r,ref:e})});IZ.displayName=Xbe;var Kbe="MenuSub",[got,OZ]=ym(Kbe),ww="MenuSubTrigger",LZ=_.forwardRef((t,e)=>{const n=vm(ww,t.__scopeMenu),r=k1(ww,t.__scopeMenu),i=OZ(ww,t.__scopeMenu),o=s4(ww,t.__scopeMenu),a=_.useRef(null),{pointerGraceTimerRef:s,onPointerGraceIntentChange:l}=o,c={__scopeMenu:t.__scopeMenu},u=_.useCallback(()=>{a.current&&window.clearTimeout(a.current),a.current=null},[]);return _.useEffect(()=>u,[u]),_.useEffect(()=>{const f=s.current;return()=>{window.clearTimeout(f),l(null)}},[s,l]),d.jsx(o4,{asChild:!0,...c,children:d.jsx(TZ,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":i.contentId,"data-state":zZ(n.open),...t,ref:rA(e,i.onTriggerChange),onClick:f=>{var h;(h=t.onClick)==null||h.call(t,f),!(t.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:ut(t.onPointerMove,lb(f=>{o.onItemEnter(f),!f.defaultPrevented&&!t.disabled&&!n.open&&!a.current&&(o.onPointerGraceIntentChange(null),a.current=window.setTimeout(()=>{n.onOpenChange(!0),u()},100))})),onPointerLeave:ut(t.onPointerLeave,lb(f=>{var p,y;u();const h=(p=n.content)==null?void 0:p.getBoundingClientRect();if(h){const g=(y=n.content)==null?void 0:y.dataset.side,v=g==="right",b=v?-5:5,w=h[v?"left":"right"],T=h[v?"right":"left"];o.onPointerGraceIntentChange({area:[{x:f.clientX+b,y:f.clientY},{x:w,y:h.top},{x:T,y:h.top},{x:T,y:h.bottom},{x:w,y:h.bottom}],side:g}),window.clearTimeout(s.current),s.current=window.setTimeout(()=>o.onPointerGraceIntentChange(null),300)}else{if(o.onTriggerLeave(f),f.defaultPrevented)return;o.onPointerGraceIntentChange(null)}})),onKeyDown:ut(t.onKeyDown,f=>{var p;const h=o.searchRef.current!=="";t.disabled||h&&f.key===" "||Nbe[r.dir].includes(f.key)&&(n.onOpenChange(!0),(p=n.content)==null||p.focus(),f.preventDefault())})})})});LZ.displayName=ww;var DZ="MenuSubContent",FZ=_.forwardRef((t,e)=>{const n=bZ(nl,t.__scopeMenu),{forceMount:r=n.forceMount,...i}=t,o=vm(nl,t.__scopeMenu),a=k1(nl,t.__scopeMenu),s=OZ(DZ,t.__scopeMenu),l=_.useRef(null),c=Kt(e,l);return d.jsx(sb.Provider,{scope:t.__scopeMenu,children:d.jsx(oo,{present:r||o.open,children:d.jsx(sb.Slot,{scope:t.__scopeMenu,children:d.jsx(l4,{id:s.contentId,"aria-labelledby":s.triggerId,...i,ref:c,align:"start",side:a.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var f;a.isUsingKeyboardRef.current&&((f=l.current)==null||f.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:ut(t.onFocusOutside,u=>{u.target!==s.trigger&&o.onOpenChange(!1)}),onEscapeKeyDown:ut(t.onEscapeKeyDown,u=>{a.onClose(),u.preventDefault()}),onKeyDown:ut(t.onKeyDown,u=>{var p;const f=u.currentTarget.contains(u.target),h=Rbe[a.dir].includes(u.key);f&&h&&(o.onOpenChange(!1),(p=s.trigger)==null||p.focus(),u.preventDefault())})})})})})});FZ.displayName=DZ;function zZ(t){return t?"open":"closed"}function bT(t){return t==="indeterminate"}function d4(t){return bT(t)?"indeterminate":t?"checked":"unchecked"}function Jbe(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function Zbe(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function Qbe(t,e,n){const i=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,o=n?t.indexOf(n):-1;let a=Zbe(t,Math.max(o,0));i.length===1&&(a=a.filter(c=>c!==n));const l=a.find(c=>c.toLowerCase().startsWith(i.toLowerCase()));return l!==n?l:void 0}function e1e(t,e){const{x:n,y:r}=t;let i=!1;for(let o=0,a=e.length-1;o<e.length;a=o++){const s=e[o].x,l=e[o].y,c=e[a].x,u=e[a].y;l>r!=u>r&&n<(c-s)*(r-l)/(u-l)+s&&(i=!i)}return i}function t1e(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return e1e(n,e)}function lb(t){return e=>e.pointerType==="mouse"?t(e):void 0}var n1e=wZ,r1e=o4,i1e=SZ,o1e=EZ,a1e=c4,s1e=_Z,l1e=gA,c1e=CZ,u1e=MZ,d1e=kZ,f1e=RZ,h1e=jZ,p1e=IZ,m1e=LZ,g1e=FZ,f4="DropdownMenu",[y1e,yot]=sa(f4,[vZ]),Pa=vZ(),[v1e,UZ]=y1e(f4),BZ=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:i,defaultOpen:o,onOpenChange:a,modal:s=!0}=t,l=Pa(e),c=_.useRef(null),[u=!1,f]=wo({prop:i,defaultProp:o,onChange:a});return d.jsx(v1e,{scope:e,triggerId:Xa(),triggerRef:c,contentId:Xa(),open:u,onOpenChange:f,onOpenToggle:_.useCallback(()=>f(h=>!h),[f]),modal:s,children:d.jsx(n1e,{...l,open:u,onOpenChange:f,dir:r,modal:s,children:n})})};BZ.displayName=f4;var $Z="DropdownMenuTrigger",HZ=_.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...i}=t,o=UZ($Z,n),a=Pa(n);return d.jsx(r1e,{asChild:!0,...a,children:d.jsx(At.button,{type:"button",id:o.triggerId,"aria-haspopup":"menu","aria-expanded":o.open,"aria-controls":o.open?o.contentId:void 0,"data-state":o.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...i,ref:rA(e,o.triggerRef),onPointerDown:ut(t.onPointerDown,s=>{!r&&s.button===0&&s.ctrlKey===!1&&(o.onOpenToggle(),o.open||s.preventDefault())}),onKeyDown:ut(t.onKeyDown,s=>{r||(["Enter"," "].includes(s.key)&&o.onOpenToggle(),s.key==="ArrowDown"&&o.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(s.key)&&s.preventDefault())})})})});HZ.displayName=$Z;var x1e="DropdownMenuPortal",VZ=t=>{const{__scopeDropdownMenu:e,...n}=t,r=Pa(e);return d.jsx(i1e,{...r,...n})};VZ.displayName=x1e;var WZ="DropdownMenuContent",GZ=_.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=UZ(WZ,n),o=Pa(n),a=_.useRef(!1);return d.jsx(o1e,{id:i.contentId,"aria-labelledby":i.triggerId,...o,...r,ref:e,onCloseAutoFocus:ut(t.onCloseAutoFocus,s=>{var l;a.current||(l=i.triggerRef.current)==null||l.focus(),a.current=!1,s.preventDefault()}),onInteractOutside:ut(t.onInteractOutside,s=>{const l=s.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;(!i.modal||u)&&(a.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});GZ.displayName=WZ;var w1e="DropdownMenuGroup",qZ=_.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Pa(n);return d.jsx(a1e,{...i,...r,ref:e})});qZ.displayName=w1e;var b1e="DropdownMenuLabel",YZ=_.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Pa(n);return d.jsx(s1e,{...i,...r,ref:e})});YZ.displayName=b1e;var S1e="DropdownMenuItem",XZ=_.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Pa(n);return d.jsx(l1e,{...i,...r,ref:e})});XZ.displayName=S1e;var E1e="DropdownMenuCheckboxItem",KZ=_.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Pa(n);return d.jsx(c1e,{...i,...r,ref:e})});KZ.displayName=E1e;var _1e="DropdownMenuRadioGroup",T1e=_.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Pa(n);return d.jsx(u1e,{...i,...r,ref:e})});T1e.displayName=_1e;var C1e="DropdownMenuRadioItem",JZ=_.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Pa(n);return d.jsx(d1e,{...i,...r,ref:e})});JZ.displayName=C1e;var A1e="DropdownMenuItemIndicator",ZZ=_.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Pa(n);return d.jsx(f1e,{...i,...r,ref:e})});ZZ.displayName=A1e;var M1e="DropdownMenuSeparator",QZ=_.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Pa(n);return d.jsx(h1e,{...i,...r,ref:e})});QZ.displayName=M1e;var P1e="DropdownMenuArrow",k1e=_.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Pa(n);return d.jsx(p1e,{...i,...r,ref:e})});k1e.displayName=P1e;var N1e="DropdownMenuSubTrigger",eQ=_.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Pa(n);return d.jsx(m1e,{...i,...r,ref:e})});eQ.displayName=N1e;var R1e="DropdownMenuSubContent",tQ=_.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Pa(n);return d.jsx(g1e,{...i,...r,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});tQ.displayName=R1e;var j1e=BZ,I1e=HZ,O1e=VZ,nQ=GZ,L1e=qZ,rQ=YZ,iQ=XZ,oQ=KZ,aQ=JZ,sQ=ZZ,lQ=QZ,cQ=eQ,uQ=tQ;const dQ=j1e,fQ=I1e,hQ=L1e,D1e=_.forwardRef(({className:t,inset:e,children:n,...r},i)=>d.jsxs(cQ,{ref:i,className:He("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",e&&"pl-8",t),...r,children:[n,d.jsx(S1,{className:"ml-auto h-4 w-4"})]}));D1e.displayName=cQ.displayName;const F1e=_.forwardRef(({className:t,...e},n)=>d.jsx(uQ,{ref:n,className:He("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...e}));F1e.displayName=uQ.displayName;const h4=_.forwardRef(({className:t,sideOffset:e=4,...n},r)=>d.jsx(O1e,{children:d.jsx(nQ,{ref:r,sideOffset:e,className:He("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})}));h4.displayName=nQ.displayName;const qy=_.forwardRef(({className:t,inset:e,...n},r)=>d.jsx(iQ,{ref:r,className:He("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",t),...n}));qy.displayName=iQ.displayName;const z1e=_.forwardRef(({className:t,children:e,checked:n,...r},i)=>d.jsxs(oQ,{ref:i,className:He("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...r,children:[d.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:d.jsx(sQ,{children:d.jsx(Sd,{className:"h-4 w-4"})})}),e]}));z1e.displayName=oQ.displayName;const U1e=_.forwardRef(({className:t,children:e,...n},r)=>d.jsxs(aQ,{ref:r,className:He("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[d.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:d.jsx(sQ,{children:d.jsx(x0e,{className:"h-2 w-2 fill-current"})})}),e]}));U1e.displayName=aQ.displayName;const cb=_.forwardRef(({className:t,inset:e,...n},r)=>d.jsx(rQ,{ref:r,className:He("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...n}));cb.displayName=rQ.displayName;const ub=_.forwardRef(({className:t,...e},n)=>d.jsx(lQ,{ref:n,className:He("-mx-1 my-1 h-px bg-muted",t),...e}));ub.displayName=lQ.displayName;const xm=_.forwardRef(({className:t,type:e,...n},r)=>d.jsx("input",{type:e,className:He("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));xm.displayName="Input";function x$(){var y;const{currentLanguage:t,setLanguage:e,isTranslating:n}=In(),[r,i]=_.useState(""),[o,a]=_.useState(!1),s=[{code:"en",label:"English",region:"European"},{code:"es",label:"Espaol",region:"European"},{code:"fr",label:"Franais",region:"European"},{code:"de",label:"Deutsch",region:"European"},{code:"hi",label:"",region:"Indian"},{code:"zh",label:"",region:"Asian"},{code:"ja",label:"",region:"Asian"},{code:"ru",label:"",region:"European"},{code:"ar",label:"",region:"Middle Eastern"},{code:"pt",label:"Portugus",region:"European"},{code:"bn",label:"",region:"Indian"},{code:"ta",label:"",region:"Indian"},{code:"te",label:"",region:"Indian"},{code:"mr",label:"",region:"Indian"},{code:"gu",label:"",region:"Indian"},{code:"kn",label:"",region:"Indian"},{code:"ml",label:"",region:"Indian"},{code:"pa",label:"",region:"Indian"},{code:"as",label:"",region:"Indian"},{code:"or",label:"",region:"Indian"},{code:"ur",label:"",region:"Indian"},{code:"sd",label:"",region:"Indian"},{code:"ks",label:"",region:"Indian"},{code:"kok",label:"",region:"Indian"},{code:"mai",label:"",region:"Indian"},{code:"it",label:"Italiano",region:"European"},{code:"ko",label:"",region:"Asian"},{code:"tr",label:"Trke",region:"European"},{code:"nl",label:"Nederlands",region:"European"},{code:"pl",label:"Polski",region:"European"},{code:"sv",label:"Svenska",region:"European"},{code:"th",label:"",region:"Asian"},{code:"vi",label:"Ting Vit",region:"Asian"},{code:"id",label:"Bahasa Indonesia",region:"Asian"},{code:"uk",label:"",region:"European"},{code:"el",label:"",region:"European"},{code:"ro",label:"Romn",region:"European"},{code:"hu",label:"Magyar",region:"European"},{code:"cs",label:"etina",region:"European"},{code:"he",label:"",region:"Middle Eastern"}],l=((y=s.find(g=>g.code===t))==null?void 0:y.label)||"Language",c=g=>{console.log(`LanguageSelector: Language selected: ${g}`),e(g),a(!1);try{const v=localStorage.getItem("recentLanguages"),b=v?JSON.parse(v):[],w=[g,...b.filter(T=>T!==g)].slice(0,3);localStorage.setItem("recentLanguages",JSON.stringify(w))}catch(v){console.error("Failed to store recent language:",v)}},u=_.useCallback(()=>r?s.filter(g=>g.label.toLowerCase().includes(r.toLowerCase())||g.code.toLowerCase().includes(r.toLowerCase())||g.region.toLowerCase().includes(r.toLowerCase())):s,[r,s]),h=(()=>{try{const g=localStorage.getItem("recentLanguages");return g?JSON.parse(g):[]}catch{return[]}})().slice(0,3).map(g=>s.find(v=>v.code===g)).filter(Boolean),p=()=>{const g={};return u().forEach(b=>{g[b.region]||(g[b.region]=[]),g[b.region].push(b)}),g};return d.jsxs(dQ,{open:o,onOpenChange:a,children:[d.jsx(fQ,{asChild:!0,children:d.jsxs(ct,{variant:"ghost",size:"sm",className:"flex items-center gap-2",disabled:n,children:[d.jsx(_J,{className:`h-4 w-4 ${n?"animate-pulse":""}`}),d.jsx("span",{className:"text-foreground",children:l})]})}),d.jsxs(h4,{align:"end",className:"bg-background border border-border w-64 max-h-[400px] overflow-y-auto",children:[d.jsx("div",{className:"p-2 sticky top-0 bg-background z-10 border-b border-border",children:d.jsxs("div",{className:"relative",children:[d.jsx(z3,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),d.jsx(xm,{placeholder:"Find language...",value:r,onChange:g=>i(g.target.value),className:"pl-9 h-9",autoComplete:"off"}),r&&d.jsx(cc,{className:"absolute right-2.5 top-2.5 h-4 w-4 text-muted-foreground cursor-pointer hover:text-foreground",onClick:()=>i("")})]})}),h.length>0&&!r&&d.jsxs(d.Fragment,{children:[d.jsx(cb,{children:"Recent"}),h.map(g=>d.jsx(qy,{onClick:()=>c(g.code),className:`cursor-pointer ${t===g.code?"bg-primary/10 text-primary font-medium":""}`,disabled:n,children:g.label},`recent-${g.code}`)),d.jsx(ub,{})]}),r?u().map(g=>d.jsx(qy,{onClick:()=>c(g.code),className:`cursor-pointer ${t===g.code?"bg-primary/10 text-primary font-medium":""}`,disabled:n,children:g.label},g.code)):Object.entries(p()).map(([g,v])=>d.jsxs(hQ,{children:[d.jsx(cb,{children:g}),v.map(b=>d.jsx(qy,{onClick:()=>c(b.code),className:`cursor-pointer ${t===b.code?"bg-primary/10 text-primary font-medium":""}`,disabled:n,children:b.label},b.code)),g!==Object.keys(p()).slice(-1)[0]&&d.jsx(ub,{})]},g))]})]})}const Yy=()=>{const[t,e]=_.useState(!1),n=Wi(),{prefetchTranslationsForRoute:r}=In(),i=()=>{e(!t)};return _.useEffect(()=>{const o=n.pathname;r&&r(o)},[n.pathname,r]),d.jsxs("nav",{className:"fixed top-0 left-0 right-0 z-50 bg-white/90 backdrop-blur-md border-b border-gray-100 px-4 py-3 shadow-sm",children:[d.jsxs("div",{className:"container mx-auto flex justify-between items-center",children:[d.jsx(li,{to:"/",className:"flex items-center",children:d.jsx(Yc,{size:"normal",useColorTheme:!0})}),d.jsxs("div",{className:"hidden md:flex items-center space-x-6",children:[d.jsx(li,{to:"/",className:"text-gray-600 hover:text-primary text-sm",children:d.jsx(Q,{text:"Home"})}),d.jsx(li,{to:"/blog",className:"text-gray-600 hover:text-primary text-sm",children:d.jsx(Q,{text:"Blog"})}),d.jsx(li,{to:"/faq",className:"text-gray-600 hover:text-primary text-sm",children:d.jsx(Q,{text:"FAQ"})}),d.jsx(ct,{size:"sm",asChild:!0,children:d.jsx("a",{href:"https://apps.apple.com/app/soulo",target:"_blank",rel:"noopener noreferrer",children:d.jsx(Q,{text:"Download on App Store"})})}),d.jsx(x$,{})]}),d.jsx("div",{className:"md:hidden flex items-center",children:d.jsx(ct,{size:"icon",className:`
              ml-2 rounded-full bg-primary/80 text-white shadow-lg 
              hover:bg-primary/95 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary/60 
              transition-colors duration-200
            `,"aria-label":t?"Close menu":"Open menu",onClick:i,children:t?d.jsx(cc,{size:24}):d.jsx(AJ,{size:24})})})]}),t&&d.jsx("div",{className:"md:hidden bg-white border-t border-gray-100 py-4",children:d.jsxs("div",{className:"container mx-auto flex flex-col space-y-4 px-4",children:[d.jsx(li,{to:"/",className:"text-gray-600 hover:text-primary",onClick:i,children:d.jsx(Q,{text:"Home"})}),d.jsx(li,{to:"/blog",className:"text-gray-600 hover:text-primary",onClick:i,children:d.jsx(Q,{text:"Blog"})}),d.jsx(li,{to:"/faq",className:"text-gray-600 hover:text-primary",onClick:i,children:d.jsx(Q,{text:"FAQ"})}),d.jsx(ct,{size:"sm",className:"w-full",asChild:!0,children:d.jsx("a",{href:"https://apps.apple.com/app/soulo",target:"_blank",rel:"noopener noreferrer",children:d.jsx(Q,{text:"Download on App Store"})})}),d.jsx(x$,{})]})})]})},pv=()=>{const t=()=>{const i=/iPad|iPhone|iPod/.test(navigator.userAgent),o="https://apps.apple.com/app/soulo";i?(window.location.href="itms-apps://itunes.apple.com/app/soulo",setTimeout(()=>{window.location.href=o},500)):window.open(o,"_blank")},e=()=>{const i=/Android/.test(navigator.userAgent),o="https://play.google.com/store/apps/details?id=com.soulo.app";i?(window.location.href="market://details?id=com.soulo.app",setTimeout(()=>{window.location.href=o},500)):window.open(o,"_blank")},n=[{title:"Product",links:[{name:"Features",href:"#features"},{name:"How it Works",href:"#how-it-works"},{name:"Pricing",href:"#pricing"},{name:"Download",href:"#download"}]},{title:"Support",links:[{name:"FAQ",href:"/faq"},{name:"Help Center",href:"/help"},{name:"Contact Us",href:"mailto:support@soulo.online"},{name:"Bug Report",href:"mailto:bugs@soulo.online"}]},{title:"Company",links:[{name:"About Us",href:"/about"},{name:"Blog",href:"/blog"},{name:"Careers",href:"/careers"},{name:"Press Kit",href:"/press"}]},{title:"Legal",links:[{name:"Privacy Policy",href:"/privacy-policy"},{name:"Terms of Service",href:"/terms"},{name:"Cookie Policy",href:"/cookies"},{name:"Data Protection",href:"/data-protection"}]}],r=[{icon:$0e,href:"https://twitter.com/souloapp",label:"Twitter"},{icon:E0e,href:"https://instagram.com/souloapp",label:"Instagram"},{icon:T0e,href:"https://linkedin.com/company/soulo",label:"LinkedIn"},{icon:CJ,href:"mailto:hello@soulo.online",label:"Email"}];return d.jsxs("footer",{className:"bg-gray-900 text-white",children:[d.jsx("div",{className:"container mx-auto px-4 py-16",children:d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-8",children:[d.jsxs("div",{className:"lg:col-span-2",children:[d.jsx("div",{className:"mb-6",children:d.jsx(Yc,{size:"large",useColorTheme:!1,className:"mb-4"})}),d.jsx("p",{className:"text-gray-300 mb-6 leading-relaxed max-w-md",children:d.jsx(Q,{text:"Transform your mental wellness with AI-powered voice journaling. Speak your thoughts, understand your emotions, and grow every day."})}),d.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mb-6",children:[d.jsxs(ct,{className:"gap-2 bg-white text-gray-900 hover:bg-gray-100 justify-start",onClick:t,children:[d.jsx(O3,{className:"h-5 w-5"}),d.jsxs("div",{className:"text-left",children:[d.jsx("div",{className:"text-xs",children:"Download on the"}),d.jsx("div",{className:"font-semibold",children:"App Store"})]})]}),d.jsxs(ct,{className:"gap-2 bg-white text-gray-900 hover:bg-gray-100 justify-start",onClick:e,children:[d.jsx(nA,{className:"h-5 w-5"}),d.jsxs("div",{className:"text-left",children:[d.jsx("div",{className:"text-xs",children:"Get it on"}),d.jsx("div",{className:"font-semibold",children:"Google Play"})]})]})]}),d.jsx("div",{className:"flex gap-4",children:r.map((i,o)=>d.jsx("a",{href:i.href,target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 bg-gray-800 rounded-lg flex items-center justify-center hover:bg-primary transition-colors","aria-label":i.label,children:d.jsx(i.icon,{className:"h-5 w-5"})},o))})]}),n.map((i,o)=>d.jsxs("div",{children:[d.jsx("h3",{className:"font-semibold text-white mb-4",children:d.jsx(Q,{text:i.title})}),d.jsx("ul",{className:"space-y-3",children:i.links.map((a,s)=>d.jsx("li",{children:a.href.startsWith("mailto:")?d.jsx("a",{href:a.href,className:"text-gray-300 hover:text-white transition-colors",children:d.jsx(Q,{text:a.name})}):a.href.startsWith("#")?d.jsx("a",{href:a.href,className:"text-gray-300 hover:text-white transition-colors",onClick:l=>{l.preventDefault();const c=document.querySelector(a.href);c==null||c.scrollIntoView({behavior:"smooth"})},children:d.jsx(Q,{text:a.name})}):d.jsx(li,{to:a.href,className:"text-gray-300 hover:text-white transition-colors",children:d.jsx(Q,{text:a.name})})},s))})]},o))]})}),d.jsx("div",{className:"border-t border-gray-800",children:d.jsx("div",{className:"container mx-auto px-4 py-6",children:d.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4",children:[d.jsxs("p",{className:"text-gray-400 text-sm",children:[" ",new Date().getFullYear()," SOULo. ",d.jsx(Q,{text:"All rights reserved."})]}),d.jsxs("div",{className:"flex items-center gap-6 text-sm text-gray-400",children:[d.jsx(li,{to:"/privacy-policy",className:"hover:text-white transition-colors",children:d.jsx(Q,{text:"Privacy"})}),d.jsx(li,{to:"/terms",className:"hover:text-white transition-colors",children:d.jsx(Q,{text:"Terms"})}),d.jsx(li,{to:"/cookies",className:"hover:text-white transition-colors",children:d.jsx(Q,{text:"Cookies"})})]})]})})})]})},p4=_.createContext({});function m4(t){const e=_.useRef(null);return e.current===null&&(e.current=t()),e.current}const g4=typeof window<"u",pQ=g4?_.useLayoutEffect:_.useEffect,yA=_.createContext(null),y4=_.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class B1e extends _.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,i=r instanceof HTMLElement&&r.offsetWidth||0,o=this.props.sizeRef.current;o.height=n.offsetHeight||0,o.width=n.offsetWidth||0,o.top=n.offsetTop,o.left=n.offsetLeft,o.right=i-o.width-o.left}return null}componentDidUpdate(){}render(){return this.props.children}}function $1e({children:t,isPresent:e,anchorX:n}){const r=_.useId(),i=_.useRef(null),o=_.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:a}=_.useContext(y4);return _.useInsertionEffect(()=>{const{width:s,height:l,top:c,left:u,right:f}=o.current;if(e||!i.current||!s||!l)return;const h=n==="left"?`left: ${u}`:`right: ${f}`;i.current.dataset.motionPopId=r;const p=document.createElement("style");return a&&(p.nonce=a),document.head.appendChild(p),p.sheet&&p.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${s}px !important;
            height: ${l}px !important;
            ${h}px !important;
            top: ${c}px !important;
          }
        `),()=>{document.head.removeChild(p)}},[e]),d.jsx(B1e,{isPresent:e,childRef:i,sizeRef:o,children:_.cloneElement(t,{ref:i})})}const H1e=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:o,mode:a,anchorX:s})=>{const l=m4(V1e),c=_.useId(),u=_.useCallback(h=>{l.set(h,!0);for(const p of l.values())if(!p)return;r&&r()},[l,r]),f=_.useMemo(()=>({id:c,initial:e,isPresent:n,custom:i,onExitComplete:u,register:h=>(l.set(h,!1),()=>l.delete(h))}),o?[Math.random(),u]:[n,u]);return _.useMemo(()=>{l.forEach((h,p)=>l.set(p,!1))},[n]),_.useEffect(()=>{!n&&!l.size&&r&&r()},[n]),a==="popLayout"&&(t=d.jsx($1e,{isPresent:n,anchorX:s,children:t})),d.jsx(yA.Provider,{value:f,children:t})};function V1e(){return new Map}function mQ(t=!0){const e=_.useContext(yA);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,o=_.useId();_.useEffect(()=>{if(t)return i(o)},[t]);const a=_.useCallback(()=>t&&r&&r(o),[o,r,t]);return!n&&r?[!1,a]:[!0]}const AE=t=>t.key||"";function w$(t){const e=[];return _.Children.forEach(t,n=>{_.isValidElement(n)&&e.push(n)}),e}const Kc=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:o="sync",propagate:a=!1,anchorX:s="left"})=>{const[l,c]=mQ(a),u=_.useMemo(()=>w$(t),[t]),f=a&&!l?[]:u.map(AE),h=_.useRef(!0),p=_.useRef(u),y=m4(()=>new Map),[g,v]=_.useState(u),[b,w]=_.useState(u);pQ(()=>{h.current=!1,p.current=u;for(let P=0;P<b.length;P++){const M=AE(b[P]);f.includes(M)?y.delete(M):y.get(M)!==!0&&y.set(M,!1)}},[b,f.length,f.join("-")]);const T=[];if(u!==g){let P=[...u];for(let M=0;M<b.length;M++){const k=b[M],I=AE(k);f.includes(I)||(P.splice(M,0,k),T.push(k))}return o==="wait"&&T.length&&(P=T),w(w$(P)),v(u),null}const{forceRender:C}=_.useContext(p4);return d.jsx(d.Fragment,{children:b.map(P=>{const M=AE(P),k=a&&!l?!1:u===b||f.includes(M),I=()=>{if(y.has(M))y.set(M,!0);else return;let U=!0;y.forEach(z=>{z||(U=!1)}),U&&(C==null||C(),w(p.current),a&&(c==null||c()),r&&r())};return d.jsx(H1e,{isPresent:k,initial:!h.current||n?void 0:!1,custom:e,presenceAffectsLayout:i,mode:o,onExitComplete:k?void 0:I,anchorX:s,children:P},M)})})};function v4(t,e){t.indexOf(e)===-1&&t.push(e)}function x4(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const ks=t=>t;let gQ=ks;const W1e={useManualTiming:!1};function w4(t){let e;return()=>(e===void 0&&(e=t()),e)}const mv=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class b4{constructor(){this.subscriptions=[]}add(e){return v4(this.subscriptions,e),()=>x4(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let o=0;o<i;o++){const a=this.subscriptions[o];a&&a(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ed=t=>t*1e3,td=t=>t/1e3;function yQ(t,e){return e?t*(1e3/e):0}const G1e=w4(()=>window.ScrollTimeline!==void 0);class q1e{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(i=>{if(G1e()&&i.attachTimeline)return i.attachTimeline(e);if(typeof n=="function")return n(i)});return()=>{r.forEach((i,o)=>{i&&i(),this.animations[o].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class Y1e extends q1e{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function S4(t,e){return t?t[e]||t.default||t:void 0}const bO=2e4;function vQ(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<bO;)e+=n,r=t.next(e);return e>=bO?1/0:e}function E4(t){return typeof t=="function"}function b$(t,e){t.timeline=e,t.onfinish=null}const _4=t=>Array.isArray(t)&&typeof t[0]=="number",X1e={linearEasing:void 0};function K1e(t,e){const n=w4(t);return()=>{var r;return(r=X1e[e])!==null&&r!==void 0?r:n()}}const ST=K1e(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),xQ=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let o=0;o<i;o++)r+=t(mv(0,i-1,o))+", ";return`linear(${r.substring(0,r.length-2)})`};function wQ(t){return!!(typeof t=="function"&&ST()||!t||typeof t=="string"&&(t in SO||ST())||_4(t)||Array.isArray(t)&&t.every(wQ))}const bw=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,SO={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:bw([0,.65,.55,1]),circOut:bw([.55,0,1,.45]),backIn:bw([.31,.01,.66,-.59]),backOut:bw([.33,1.53,.69,.99])};function bQ(t,e){if(t)return typeof t=="function"&&ST()?xQ(t,e):_4(t)?bw(t):Array.isArray(t)?t.map(n=>bQ(n,e)||SO.easeOut):SO[t]}const ME=["read","resolveKeyframes","update","preRender","render","postRender"],S$={value:null};function J1e(t,e){let n=new Set,r=new Set,i=!1,o=!1;const a=new WeakSet;let s={delta:0,timestamp:0,isProcessing:!1},l=0;function c(f){a.has(f)&&(u.schedule(f),t()),l++,f(s)}const u={schedule:(f,h=!1,p=!1)=>{const g=p&&i?n:r;return h&&a.add(f),g.has(f)||g.add(f),f},cancel:f=>{r.delete(f),a.delete(f)},process:f=>{if(s=f,i){o=!0;return}i=!0,[n,r]=[r,n],n.forEach(c),e&&S$.value&&S$.value.frameloop[e].push(l),l=0,n.clear(),i=!1,o&&(o=!1,u.process(f))}};return u}const Z1e=40;function SQ(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},o=()=>n=!0,a=ME.reduce((b,w)=>(b[w]=J1e(o,e?w:void 0),b),{}),{read:s,resolveKeyframes:l,update:c,preRender:u,render:f,postRender:h}=a,p=()=>{const b=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(b-i.timestamp,Z1e),1),i.timestamp=b,i.isProcessing=!0,s.process(i),l.process(i),c.process(i),u.process(i),f.process(i),h.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(p))},y=()=>{n=!0,r=!0,i.isProcessing||t(p)};return{schedule:ME.reduce((b,w)=>{const T=a[w];return b[w]=(C,P=!1,M=!1)=>(n||y(),T.schedule(C,P,M)),b},{}),cancel:b=>{for(let w=0;w<ME.length;w++)a[ME[w]].cancel(b)},state:i,steps:a}}const{schedule:Cr,cancel:Xf,state:zo,steps:KM}=SQ(typeof requestAnimationFrame<"u"?requestAnimationFrame:ks,!0),{schedule:T4}=SQ(queueMicrotask,!1);let tT;function Q1e(){tT=void 0}const $c={now:()=>(tT===void 0&&$c.set(zo.isProcessing||W1e.useManualTiming?zo.timestamp:performance.now()),tT),set:t=>{tT=t,queueMicrotask(Q1e)}},$l={x:!1,y:!1};function EQ(){return $l.x||$l.y}function eSe(t){return t==="x"||t==="y"?$l[t]?null:($l[t]=!0,()=>{$l[t]=!1}):$l.x||$l.y?null:($l.x=$l.y=!0,()=>{$l.x=$l.y=!1})}function tSe(t,e,n){var r;if(t instanceof EventTarget)return[t];if(typeof t=="string"){let i=document;const o=(r=void 0)!==null&&r!==void 0?r:i.querySelectorAll(t);return o?Array.from(o):[]}return Array.from(t)}function _Q(t,e){const n=tSe(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function E$(t){return!(t.pointerType==="touch"||EQ())}function nSe(t,e,n={}){const[r,i,o]=_Q(t,n),a=s=>{if(!E$(s))return;const{target:l}=s,c=e(l,s);if(typeof c!="function"||!l)return;const u=f=>{E$(f)&&(c(f),l.removeEventListener("pointerleave",u))};l.addEventListener("pointerleave",u,i)};return r.forEach(s=>{s.addEventListener("pointerenter",a,i)}),o}function _$(t,e){const n=`${e}PointerCapture`;if(t.target instanceof Element&&n in t.target&&t.pointerId!==void 0)try{t.target[n](t.pointerId)}catch{}}const TQ=(t,e)=>e?t===e?!0:TQ(t,e.parentElement):!1,C4=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,rSe=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function iSe(t){return rSe.has(t.tagName)||t.tabIndex!==-1}const Sw=new WeakSet;function T$(t){return e=>{e.key==="Enter"&&t(e)}}function JM(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const oSe=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=T$(()=>{if(Sw.has(n))return;JM(n,"down");const i=T$(()=>{JM(n,"up")}),o=()=>JM(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",o,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function C$(t){return C4(t)&&!EQ()}function aSe(t,e,n={}){const[r,i,o]=_Q(t,n),a=s=>{const l=s.currentTarget;if(!l||!C$(s)||Sw.has(l))return;Sw.add(l),_$(s,"set");const c=e(l,s),u=(p,y)=>{l.removeEventListener("pointerup",f),l.removeEventListener("pointercancel",h),_$(p,"release"),!(!C$(p)||!Sw.has(l))&&(Sw.delete(l),typeof c=="function"&&c(p,{success:y}))},f=p=>{(p.isTrusted?sSe(p,l instanceof Element?l.getBoundingClientRect():{left:0,top:0,right:window.innerWidth,bottom:window.innerHeight}):!1)?u(p,!1):u(p,!(l instanceof Element)||TQ(l,p.target))},h=p=>{u(p,!1)};l.addEventListener("pointerup",f,i),l.addEventListener("pointercancel",h,i),l.addEventListener("lostpointercapture",h,i)};return r.forEach(s=>{s=n.useGlobalTarget?window:s;let l=!1;s instanceof HTMLElement&&(l=!0,!iSe(s)&&s.getAttribute("tabindex")===null&&(s.tabIndex=0)),s.addEventListener("pointerdown",a,i),l&&s.addEventListener("focus",c=>oSe(c,i),i)}),o}function sSe(t,e){return t.clientX<e.left||t.clientX>e.right||t.clientY<e.top||t.clientY>e.bottom}const A$=30,lSe=t=>!isNaN(parseFloat(t));class cSe{constructor(e,n={}){this.version="12.5.0",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const o=$c.now();this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=$c.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=lSe(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new b4);const r=this.events[e].add(n);return e==="change"?()=>{r(),Cr.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=$c.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>A$)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,A$);return yQ(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function db(t,e){return new cSe(t,e)}const CQ=_.createContext({strict:!1}),M$={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},gv={};for(const t in M$)gv[t]={isEnabled:e=>M$[t].some(n=>!!e[n])};function uSe(t){for(const e in t)gv[e]={...gv[e],...t[e]}}const dSe=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function ET(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||dSe.has(t)}let AQ=t=>!ET(t);function fSe(t){t&&(AQ=e=>e.startsWith("on")?!ET(e):t(e))}try{fSe(require("@emotion/is-prop-valid").default)}catch{}function hSe(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(AQ(i)||n===!0&&ET(i)||!e&&!ET(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function pSe(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}const vA=_.createContext({});function xA(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function fb(t){return typeof t=="string"||Array.isArray(t)}const A4=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],M4=["initial",...A4];function wA(t){return xA(t.animate)||M4.some(e=>fb(t[e]))}function MQ(t){return!!(wA(t)||t.variants)}function mSe(t,e){if(wA(t)){const{initial:n,animate:r}=t;return{initial:n===!1||fb(n)?n:void 0,animate:fb(r)?r:void 0}}return t.inherit!==!1?e:{}}function gSe(t){const{initial:e,animate:n}=mSe(t,_.useContext(vA));return _.useMemo(()=>({initial:e,animate:n}),[P$(e),P$(n)])}function P$(t){return Array.isArray(t)?t.join(" "):t}const ySe=Symbol.for("motionComponentSymbol");function Py(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function vSe(t,e,n){return _.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Py(n)&&(n.current=r))},[e])}const P4=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),xSe="framerAppearId",PQ="data-"+P4(xSe),kQ=_.createContext({});function wSe(t,e,n,r,i){var o,a;const{visualElement:s}=_.useContext(vA),l=_.useContext(CQ),c=_.useContext(yA),u=_.useContext(y4).reducedMotion,f=_.useRef(null);r=r||l.renderer,!f.current&&r&&(f.current=r(t,{visualState:e,parent:s,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:u}));const h=f.current,p=_.useContext(kQ);h&&!h.projection&&i&&(h.type==="html"||h.type==="svg")&&bSe(f.current,n,i,p);const y=_.useRef(!1);_.useInsertionEffect(()=>{h&&y.current&&h.update(n,c)});const g=n[PQ],v=_.useRef(!!g&&!(!((o=window.MotionHandoffIsComplete)===null||o===void 0)&&o.call(window,g))&&((a=window.MotionHasOptimisedAnimation)===null||a===void 0?void 0:a.call(window,g)));return pQ(()=>{h&&(y.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),T4.render(h.render),v.current&&h.animationState&&h.animationState.animateChanges())}),_.useEffect(()=>{h&&(!v.current&&h.animationState&&h.animationState.animateChanges(),v.current&&(queueMicrotask(()=>{var b;(b=window.MotionHandoffMarkAsComplete)===null||b===void 0||b.call(window,g)}),v.current=!1))}),h}function bSe(t,e,n,r){const{layoutId:i,layout:o,drag:a,dragConstraints:s,layoutScroll:l,layoutRoot:c}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:NQ(t.parent)),t.projection.setOptions({layoutId:i,layout:o,alwaysMeasureLayout:!!a||s&&Py(s),visualElement:t,animationType:typeof o=="string"?o:"both",initialPromotionConfig:r,layoutScroll:l,layoutRoot:c})}function NQ(t){if(t)return t.options.allowProjection!==!1?t.projection:NQ(t.parent)}function SSe({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){var o,a;t&&uSe(t);function s(c,u){let f;const h={..._.useContext(y4),...c,layoutId:ESe(c)},{isStatic:p}=h,y=gSe(c),g=r(c,p);if(!p&&g4){_Se();const v=TSe(h);f=v.MeasureLayout,y.visualElement=wSe(i,g,h,e,v.ProjectionNode)}return d.jsxs(vA.Provider,{value:y,children:[f&&y.visualElement?d.jsx(f,{visualElement:y.visualElement,...h}):null,n(i,c,vSe(g,y.visualElement,u),g,p,y.visualElement)]})}s.displayName=`motion.${typeof i=="string"?i:`create(${(a=(o=i.displayName)!==null&&o!==void 0?o:i.name)!==null&&a!==void 0?a:""})`}`;const l=_.forwardRef(s);return l[ySe]=i,l}function ESe({layoutId:t}){const e=_.useContext(p4).id;return e&&t!==void 0?e+"-"+t:t}function _Se(t,e){_.useContext(CQ).strict}function TSe(t){const{drag:e,layout:n}=gv;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const RQ=t=>e=>typeof e=="string"&&e.startsWith(t),k4=RQ("--"),CSe=RQ("var(--"),N4=t=>CSe(t)?ASe.test(t.split("/*")[0].trim()):!1,ASe=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,hb={};function MSe(t){for(const e in t)hb[e]=t[e],k4(e)&&(hb[e].isCSSVariable=!0)}const y0=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],wm=new Set(y0);function jQ(t,{layout:e,layoutId:n}){return wm.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!hb[t]||t==="opacity")}const ia=t=>!!(t&&t.getVelocity),IQ=(t,e)=>e&&typeof t=="number"?e.transform(t):t,hd=(t,e,n)=>n>e?e:n<t?t:n,v0={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},pb={...v0,transform:t=>hd(0,1,t)},PE={...v0,default:1},N1=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Tf=N1("deg"),Hc=N1("%"),Xt=N1("px"),PSe=N1("vh"),kSe=N1("vw"),k$={...Hc,parse:t=>Hc.parse(t)/100,transform:t=>Hc.transform(t*100)},NSe={borderWidth:Xt,borderTopWidth:Xt,borderRightWidth:Xt,borderBottomWidth:Xt,borderLeftWidth:Xt,borderRadius:Xt,radius:Xt,borderTopLeftRadius:Xt,borderTopRightRadius:Xt,borderBottomRightRadius:Xt,borderBottomLeftRadius:Xt,width:Xt,maxWidth:Xt,height:Xt,maxHeight:Xt,top:Xt,right:Xt,bottom:Xt,left:Xt,padding:Xt,paddingTop:Xt,paddingRight:Xt,paddingBottom:Xt,paddingLeft:Xt,margin:Xt,marginTop:Xt,marginRight:Xt,marginBottom:Xt,marginLeft:Xt,backgroundPositionX:Xt,backgroundPositionY:Xt},RSe={rotate:Tf,rotateX:Tf,rotateY:Tf,rotateZ:Tf,scale:PE,scaleX:PE,scaleY:PE,scaleZ:PE,skew:Tf,skewX:Tf,skewY:Tf,distance:Xt,translateX:Xt,translateY:Xt,translateZ:Xt,x:Xt,y:Xt,z:Xt,perspective:Xt,transformPerspective:Xt,opacity:pb,originX:k$,originY:k$,originZ:Xt},N$={...v0,transform:Math.round},R4={...NSe,...RSe,zIndex:N$,size:Xt,fillOpacity:pb,strokeOpacity:pb,numOctaves:N$},jSe={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},ISe=y0.length;function OSe(t,e,n){let r="",i=!0;for(let o=0;o<ISe;o++){const a=y0[o],s=t[a];if(s===void 0)continue;let l=!0;if(typeof s=="number"?l=s===(a.startsWith("scale")?1:0):l=parseFloat(s)===0,!l||n){const c=IQ(s,R4[a]);if(!l){i=!1;const u=jSe[a]||a;r+=`${u}(${c}) `}n&&(e[a]=c)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function j4(t,e,n){const{style:r,vars:i,transformOrigin:o}=t;let a=!1,s=!1;for(const l in e){const c=e[l];if(wm.has(l)){a=!0;continue}else if(k4(l)){i[l]=c;continue}else{const u=IQ(c,R4[l]);l.startsWith("origin")?(s=!0,o[l]=u):r[l]=u}}if(e.transform||(a||n?r.transform=OSe(e,t.transform,n):r.transform&&(r.transform="none")),s){const{originX:l="50%",originY:c="50%",originZ:u=0}=o;r.transformOrigin=`${l} ${c} ${u}`}}const I4=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function OQ(t,e,n){for(const r in e)!ia(e[r])&&!jQ(r,n)&&(t[r]=e[r])}function LSe({transformTemplate:t},e){return _.useMemo(()=>{const n=I4();return j4(n,e,t),Object.assign({},n.vars,n.style)},[e])}function DSe(t,e){const n=t.style||{},r={};return OQ(r,n,t),Object.assign(r,LSe(t,e)),r}function FSe(t,e){const n={},r=DSe(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const zSe=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function O4(t){return typeof t!="string"||t.includes("-")?!1:!!(zSe.indexOf(t)>-1||/[A-Z]/u.test(t))}const USe={offset:"stroke-dashoffset",array:"stroke-dasharray"},BSe={offset:"strokeDashoffset",array:"strokeDasharray"};function $Se(t,e,n=1,r=0,i=!0){t.pathLength=1;const o=i?USe:BSe;t[o.offset]=Xt.transform(-r);const a=Xt.transform(e),s=Xt.transform(n);t[o.array]=`${a} ${s}`}function R$(t,e,n){return typeof t=="string"?t:Xt.transform(e+n*t)}function HSe(t,e,n){const r=R$(e,t.x,t.width),i=R$(n,t.y,t.height);return`${r} ${i}`}function L4(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:o,pathLength:a,pathSpacing:s=1,pathOffset:l=0,...c},u,f){if(j4(t,c,f),u){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:h,style:p,dimensions:y}=t;h.transform&&(y&&(p.transform=h.transform),delete h.transform),y&&(i!==void 0||o!==void 0||p.transform)&&(p.transformOrigin=HSe(y,i!==void 0?i:.5,o!==void 0?o:.5)),e!==void 0&&(h.x=e),n!==void 0&&(h.y=n),r!==void 0&&(h.scale=r),a!==void 0&&$Se(h,a,s,l,!1)}const LQ=()=>({...I4(),attrs:{}}),D4=t=>typeof t=="string"&&t.toLowerCase()==="svg";function VSe(t,e,n,r){const i=_.useMemo(()=>{const o=LQ();return L4(o,e,D4(r),t.transformTemplate),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};OQ(o,t.style,t),i.style={...o,...i.style}}return i}function WSe(t=!1){return(n,r,i,{latestValues:o},a)=>{const l=(O4(n)?VSe:FSe)(r,o,a,n),c=hSe(r,typeof n=="string",t),u=n!==_.Fragment?{...c,...l,ref:i}:{},{children:f}=r,h=_.useMemo(()=>ia(f)?f.get():f,[f]);return _.createElement(n,{...u,children:h})}}function j$(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function F4(t,e,n,r){if(typeof e=="function"){const[i,o]=j$(r);e=e(n!==void 0?n:t.custom,i,o)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,o]=j$(r);e=e(n!==void 0?n:t.custom,i,o)}return e}const EO=t=>Array.isArray(t),GSe=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),qSe=t=>EO(t)?t[t.length-1]||0:t;function nT(t){const e=ia(t)?t.get():t;return GSe(e)?e.toValue():e}function YSe({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},r,i,o){const a={latestValues:XSe(r,i,o,t),renderState:e()};return n&&(a.onMount=s=>n({props:r,current:s,...a}),a.onUpdate=s=>n(s)),a}const DQ=t=>(e,n)=>{const r=_.useContext(vA),i=_.useContext(yA),o=()=>YSe(t,e,r,i);return n?o():m4(o)};function XSe(t,e,n,r){const i={},o=r(t,{});for(const h in o)i[h]=nT(o[h]);let{initial:a,animate:s}=t;const l=wA(t),c=MQ(t);e&&c&&!l&&t.inherit!==!1&&(a===void 0&&(a=e.initial),s===void 0&&(s=e.animate));let u=n?n.initial===!1:!1;u=u||a===!1;const f=u?s:a;if(f&&typeof f!="boolean"&&!xA(f)){const h=Array.isArray(f)?f:[f];for(let p=0;p<h.length;p++){const y=F4(t,h[p]);if(y){const{transitionEnd:g,transition:v,...b}=y;for(const w in b){let T=b[w];if(Array.isArray(T)){const C=u?T.length-1:0;T=T[C]}T!==null&&(i[w]=T)}for(const w in g)i[w]=g[w]}}}return i}function z4(t,e,n){var r;const{style:i}=t,o={};for(const a in i)(ia(i[a])||e.style&&ia(e.style[a])||jQ(a,t)||((r=n==null?void 0:n.getValue(a))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(o[a]=i[a]);return o}const KSe={useVisualState:DQ({scrapeMotionValuesFromProps:z4,createRenderState:I4})};function FQ(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}function zQ(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const o in n)t.style.setProperty(o,n[o])}const UQ=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function BQ(t,e,n,r){zQ(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(UQ.has(i)?i:P4(i),e.attrs[i])}function $Q(t,e,n){const r=z4(t,e,n);for(const i in t)if(ia(t[i])||ia(e[i])){const o=y0.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[o]=t[i]}return r}const I$=["x","y","width","height","cx","cy","r"],JSe={useVisualState:DQ({scrapeMotionValuesFromProps:$Q,createRenderState:LQ,onUpdate:({props:t,prevProps:e,current:n,renderState:r,latestValues:i})=>{if(!n)return;let o=!!t.drag;if(!o){for(const s in i)if(wm.has(s)){o=!0;break}}if(!o)return;let a=!e;if(e)for(let s=0;s<I$.length;s++){const l=I$[s];t[l]!==e[l]&&(a=!0)}a&&Cr.read(()=>{FQ(n,r),Cr.render(()=>{L4(r,i,D4(n.tagName),t.transformTemplate),BQ(n,r)})})}})};function ZSe(t,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const a={...O4(r)?JSe:KSe,preloadedFeatures:t,useRender:WSe(i),createVisualElement:e,Component:r};return SSe(a)}}function mb(t,e,n){const r=t.getProps();return F4(r,e,n!==void 0?n:r.custom,t)}const HQ=new Set(["width","height","top","left","right","bottom",...y0]);function QSe(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,db(n))}function eEe(t,e){const n=mb(t,e);let{transitionEnd:r={},transition:i={},...o}=n||{};o={...o,...r};for(const a in o){const s=qSe(o[a]);QSe(t,a,s)}}function tEe(t){return!!(ia(t)&&t.add)}function _O(t,e){const n=t.getValue("willChange");if(tEe(n))return n.add(e)}function VQ(t){return t.props[PQ]}const WQ=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,nEe=1e-7,rEe=12;function iEe(t,e,n,r,i){let o,a,s=0;do a=e+(n-e)/2,o=WQ(a,r,i)-t,o>0?n=a:e=a;while(Math.abs(o)>nEe&&++s<rEe);return a}function R1(t,e,n,r){if(t===e&&n===r)return ks;const i=o=>iEe(o,0,1,t,n);return o=>o===0||o===1?o:WQ(i(o),e,r)}const GQ=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,qQ=t=>e=>1-t(1-e),YQ=R1(.33,1.53,.69,.99),U4=qQ(YQ),XQ=GQ(U4),KQ=t=>(t*=2)<1?.5*U4(t):.5*(2-Math.pow(2,-10*(t-1))),B4=t=>1-Math.sin(Math.acos(t)),JQ=qQ(B4),ZQ=GQ(B4),QQ=t=>/^0[^.\s]+$/u.test(t);function oEe(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||QQ(t):!0}const Iw=t=>Math.round(t*1e5)/1e5,$4=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function aEe(t){return t==null}const sEe=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,H4=(t,e)=>n=>!!(typeof n=="string"&&sEe.test(n)&&n.startsWith(t)||e&&!aEe(n)&&Object.prototype.hasOwnProperty.call(n,e)),eee=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,o,a,s]=r.match($4);return{[t]:parseFloat(i),[e]:parseFloat(o),[n]:parseFloat(a),alpha:s!==void 0?parseFloat(s):1}},lEe=t=>hd(0,255,t),ZM={...v0,transform:t=>Math.round(lEe(t))},Ap={test:H4("rgb","red"),parse:eee("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+ZM.transform(t)+", "+ZM.transform(e)+", "+ZM.transform(n)+", "+Iw(pb.transform(r))+")"};function cEe(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const TO={test:H4("#"),parse:cEe,transform:Ap.transform},ky={test:H4("hsl","hue"),parse:eee("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Hc.transform(Iw(e))+", "+Hc.transform(Iw(n))+", "+Iw(pb.transform(r))+")"},ea={test:t=>Ap.test(t)||TO.test(t)||ky.test(t),parse:t=>Ap.test(t)?Ap.parse(t):ky.test(t)?ky.parse(t):TO.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Ap.transform(t):ky.transform(t)},uEe=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function dEe(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match($4))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(uEe))===null||n===void 0?void 0:n.length)||0)>0}const tee="number",nee="color",fEe="var",hEe="var(",O$="${}",pEe=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function gb(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let o=0;const s=e.replace(pEe,l=>(ea.test(l)?(r.color.push(o),i.push(nee),n.push(ea.parse(l))):l.startsWith(hEe)?(r.var.push(o),i.push(fEe),n.push(l)):(r.number.push(o),i.push(tee),n.push(parseFloat(l))),++o,O$)).split(O$);return{values:n,split:s,indexes:r,types:i}}function ree(t){return gb(t).values}function iee(t){const{split:e,types:n}=gb(t),r=e.length;return i=>{let o="";for(let a=0;a<r;a++)if(o+=e[a],i[a]!==void 0){const s=n[a];s===tee?o+=Iw(i[a]):s===nee?o+=ea.transform(i[a]):o+=i[a]}return o}}const mEe=t=>typeof t=="number"?0:t;function gEe(t){const e=ree(t);return iee(t)(e.map(mEe))}const Kf={test:dEe,parse:ree,createTransformer:iee,getAnimatableNone:gEe},yEe=new Set(["brightness","contrast","saturate","opacity"]);function vEe(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match($4)||[];if(!r)return t;const i=n.replace(r,"");let o=yEe.has(e)?1:0;return r!==n&&(o*=100),e+"("+o+i+")"}const xEe=/\b([a-z-]*)\(.*?\)/gu,CO={...Kf,getAnimatableNone:t=>{const e=t.match(xEe);return e?e.map(vEe).join(" "):t}},wEe={...R4,color:ea,backgroundColor:ea,outlineColor:ea,fill:ea,stroke:ea,borderColor:ea,borderTopColor:ea,borderRightColor:ea,borderBottomColor:ea,borderLeftColor:ea,filter:CO,WebkitFilter:CO},oee=t=>wEe[t];function aee(t,e){let n=oee(t);return n!==CO&&(n=Kf),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const bEe=new Set(["auto","none","0"]);function SEe(t,e,n){let r=0,i;for(;r<t.length&&!i;){const o=t[r];typeof o=="string"&&!bEe.has(o)&&gb(o).values.length&&(i=t[r]),r++}if(i&&n)for(const o of e)t[o]=aee(n,i)}const Mp=t=>t*180/Math.PI,AO=t=>{const e=Mp(Math.atan2(t[1],t[0]));return MO(e)},EEe={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:AO,rotateZ:AO,skewX:t=>Mp(Math.atan(t[1])),skewY:t=>Mp(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},MO=t=>(t=t%360,t<0&&(t+=360),t),L$=AO,D$=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),F$=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),_Ee={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:D$,scaleY:F$,scale:t=>(D$(t)+F$(t))/2,rotateX:t=>MO(Mp(Math.atan2(t[6],t[5]))),rotateY:t=>MO(Mp(Math.atan2(-t[2],t[0]))),rotateZ:L$,rotate:L$,skewX:t=>Mp(Math.atan(t[4])),skewY:t=>Mp(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function z$(t){return t.includes("scale")?1:0}function PO(t,e){if(!t||t==="none")return z$(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=_Ee,i=n;else{const s=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=EEe,i=s}if(!i)return z$(e);const o=r[e],a=i[1].split(",").map(CEe);return typeof o=="function"?o(a):a[o]}const TEe=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return PO(n,e)};function CEe(t){return parseFloat(t.trim())}const U$=t=>t===v0||t===Xt,AEe=new Set(["x","y","z"]),MEe=y0.filter(t=>!AEe.has(t));function PEe(t){const e=[];return MEe.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const yv={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>PO(e,"x"),y:(t,{transform:e})=>PO(e,"y")};yv.translateX=yv.x;yv.translateY=yv.y;const Bp=new Set;let kO=!1,NO=!1;function see(){if(NO){const t=Array.from(Bp).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=PEe(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([o,a])=>{var s;(s=r.getValue(o))===null||s===void 0||s.set(a)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}NO=!1,kO=!1,Bp.forEach(t=>t.complete()),Bp.clear()}function lee(){Bp.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(NO=!0)})}function kEe(){lee(),see()}class V4{constructor(e,n,r,i,o,a=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=o,this.isAsync=a}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Bp.add(this),kO||(kO=!0,Cr.read(lee),Cr.resolveKeyframes(see))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;for(let o=0;o<e.length;o++)if(e[o]===null)if(o===0){const a=i==null?void 0:i.get(),s=e[e.length-1];if(a!==void 0)e[0]=a;else if(r&&n){const l=r.readValue(n,s);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=s),i&&a===void 0&&i.set(e[0])}else e[o]=e[o-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Bp.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Bp.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const cee=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),NEe=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function REe(t){const e=NEe.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function uee(t,e,n=1){const[r,i]=REe(t);if(!r)return;const o=window.getComputedStyle(e).getPropertyValue(r);if(o){const a=o.trim();return cee(a)?parseFloat(a):a}return N4(i)?uee(i,e,n+1):i}const dee=t=>e=>e.test(t),jEe={test:t=>t==="auto",parse:t=>t},fee=[v0,Xt,Hc,Tf,kSe,PSe,jEe],B$=t=>fee.find(dee(t));class hee extends V4{constructor(e,n,r,i,o){super(e,n,r,i,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),N4(c))){const u=uee(c,n.current);u!==void 0&&(e[l]=u),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!HQ.has(r)||e.length!==2)return;const[i,o]=e,a=B$(i),s=B$(o);if(a!==s)if(U$(a)&&U$(s))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)oEe(e[i])&&r.push(i);r.length&&SEe(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=yv[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:i}=this;if(!n||!n.current)return;const o=n.getValue(r);o&&o.jump(this.measuredOrigin,!1);const a=i.length-1,s=i[a];i[a]=yv[r](n.measureViewportBox(),window.getComputedStyle(n.current)),s!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=s),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,c])=>{n.getValue(l).set(c)}),this.resolveNoneKeyframes()}}const $$=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Kf.test(t)||t==="0")&&!t.startsWith("url("));function IEe(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function OEe(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const o=t[t.length-1],a=$$(i,e),s=$$(o,e);return!a||!s?!1:IEe(t)||(n==="spring"||E4(n))&&r}const LEe=t=>t!==null;function bA(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(LEe),o=e&&n!=="loop"&&e%2===1?0:i.length-1;return!o||r===void 0?i[o]:r}const DEe=40;class pee{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:a="loop",...s}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=$c.now(),this.options={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:o,repeatType:a,...s},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>DEe?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&kEe(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=$c.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:o,delay:a,onComplete:s,onUpdate:l,isGenerator:c}=this.options;if(!c&&!OEe(e,r,i,o))if(a)this.options.duration=0;else{l&&l(bA(e,this.options,n)),s&&s(),this.resolveFinishedPromise();return}const u=this.initPlayback(e,n);u!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...u},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear")}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const qr=(t,e,n)=>t+(e-t)*n;function QM(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function FEe({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,o=0,a=0;if(!e)i=o=a=n;else{const s=n<.5?n*(1+e):n+e-n*e,l=2*n-s;i=QM(l,s,t+1/3),o=QM(l,s,t),a=QM(l,s,t-1/3)}return{red:Math.round(i*255),green:Math.round(o*255),blue:Math.round(a*255),alpha:r}}function _T(t,e){return n=>n>0?e:t}const eP=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},zEe=[TO,Ap,ky],UEe=t=>zEe.find(e=>e.test(t));function H$(t){const e=UEe(t);if(!e)return!1;let n=e.parse(t);return e===ky&&(n=FEe(n)),n}const V$=(t,e)=>{const n=H$(t),r=H$(e);if(!n||!r)return _T(t,e);const i={...n};return o=>(i.red=eP(n.red,r.red,o),i.green=eP(n.green,r.green,o),i.blue=eP(n.blue,r.blue,o),i.alpha=qr(n.alpha,r.alpha,o),Ap.transform(i))},BEe=(t,e)=>n=>e(t(n)),j1=(...t)=>t.reduce(BEe),RO=new Set(["none","hidden"]);function $Ee(t,e){return RO.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function HEe(t,e){return n=>qr(t,e,n)}function W4(t){return typeof t=="number"?HEe:typeof t=="string"?N4(t)?_T:ea.test(t)?V$:GEe:Array.isArray(t)?mee:typeof t=="object"?ea.test(t)?V$:VEe:_T}function mee(t,e){const n=[...t],r=n.length,i=t.map((o,a)=>W4(o)(o,e[a]));return o=>{for(let a=0;a<r;a++)n[a]=i[a](o);return n}}function VEe(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=W4(t[i])(t[i],e[i]));return i=>{for(const o in r)n[o]=r[o](i);return n}}function WEe(t,e){var n;const r=[],i={color:0,var:0,number:0};for(let o=0;o<e.values.length;o++){const a=e.types[o],s=t.indexes[a][i[a]],l=(n=t.values[s])!==null&&n!==void 0?n:0;r[o]=l,i[a]++}return r}const GEe=(t,e)=>{const n=Kf.createTransformer(e),r=gb(t),i=gb(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?RO.has(t)&&!i.values.length||RO.has(e)&&!r.values.length?$Ee(t,e):j1(mee(WEe(r,i),i.values),n):_T(t,e)};function gee(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?qr(t,e,n):W4(t)(t,e)}const qEe=5;function yee(t,e,n){const r=Math.max(e-qEe,0);return yQ(n-t(r),e-r)}const ai={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},W$=.001;function YEe({duration:t=ai.duration,bounce:e=ai.bounce,velocity:n=ai.velocity,mass:r=ai.mass}){let i,o,a=1-e;a=hd(ai.minDamping,ai.maxDamping,a),t=hd(ai.minDuration,ai.maxDuration,td(t)),a<1?(i=c=>{const u=c*a,f=u*t,h=u-n,p=jO(c,a),y=Math.exp(-f);return W$-h/p*y},o=c=>{const f=c*a*t,h=f*n+n,p=Math.pow(a,2)*Math.pow(c,2)*t,y=Math.exp(-f),g=jO(Math.pow(c,2),a);return(-i(c)+W$>0?-1:1)*((h-p)*y)/g}):(i=c=>{const u=Math.exp(-c*t),f=(c-n)*t+1;return-.001+u*f},o=c=>{const u=Math.exp(-c*t),f=(n-c)*(t*t);return u*f});const s=5/t,l=KEe(i,o,s);if(t=ed(t),isNaN(l))return{stiffness:ai.stiffness,damping:ai.damping,duration:t};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:a*2*Math.sqrt(r*c),duration:t}}}const XEe=12;function KEe(t,e,n){let r=n;for(let i=1;i<XEe;i++)r=r-t(r)/e(r);return r}function jO(t,e){return t*Math.sqrt(1-e*e)}const JEe=["duration","bounce"],ZEe=["stiffness","damping","mass"];function G$(t,e){return e.some(n=>t[n]!==void 0)}function QEe(t){let e={velocity:ai.velocity,stiffness:ai.stiffness,damping:ai.damping,mass:ai.mass,isResolvedFromDuration:!1,...t};if(!G$(t,ZEe)&&G$(t,JEe))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,o=2*hd(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:ai.mass,stiffness:i,damping:o}}else{const n=YEe(t);e={...e,...n,mass:ai.mass},e.isResolvedFromDuration=!0}return e}function vee(t=ai.visualDuration,e=ai.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const o=n.keyframes[0],a=n.keyframes[n.keyframes.length-1],s={done:!1,value:o},{stiffness:l,damping:c,mass:u,duration:f,velocity:h,isResolvedFromDuration:p}=QEe({...n,velocity:-td(n.velocity||0)}),y=h||0,g=c/(2*Math.sqrt(l*u)),v=a-o,b=td(Math.sqrt(l/u)),w=Math.abs(v)<5;r||(r=w?ai.restSpeed.granular:ai.restSpeed.default),i||(i=w?ai.restDelta.granular:ai.restDelta.default);let T;if(g<1){const P=jO(b,g);T=M=>{const k=Math.exp(-g*b*M);return a-k*((y+g*b*v)/P*Math.sin(P*M)+v*Math.cos(P*M))}}else if(g===1)T=P=>a-Math.exp(-b*P)*(v+(y+b*v)*P);else{const P=b*Math.sqrt(g*g-1);T=M=>{const k=Math.exp(-g*b*M),I=Math.min(P*M,300);return a-k*((y+g*b*v)*Math.sinh(I)+P*v*Math.cosh(I))/P}}const C={calculatedDuration:p&&f||null,next:P=>{const M=T(P);if(p)s.done=P>=f;else{let k=0;g<1&&(k=P===0?ed(y):yee(T,P,M));const I=Math.abs(k)<=r,U=Math.abs(a-M)<=i;s.done=I&&U}return s.value=s.done?a:M,s},toString:()=>{const P=Math.min(vQ(C),bO),M=xQ(k=>C.next(P*k).value,P,30);return P+"ms "+M}};return C}function q$({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:o=500,modifyTarget:a,min:s,max:l,restDelta:c=.5,restSpeed:u}){const f=t[0],h={done:!1,value:f},p=I=>s!==void 0&&I<s||l!==void 0&&I>l,y=I=>s===void 0?l:l===void 0||Math.abs(s-I)<Math.abs(l-I)?s:l;let g=n*e;const v=f+g,b=a===void 0?v:a(v);b!==v&&(g=b-f);const w=I=>-g*Math.exp(-I/r),T=I=>b+w(I),C=I=>{const U=w(I),z=T(I);h.done=Math.abs(U)<=c,h.value=h.done?b:z};let P,M;const k=I=>{p(h.value)&&(P=I,M=vee({keyframes:[h.value,y(h.value)],velocity:yee(T,I,h.value),damping:i,stiffness:o,restDelta:c,restSpeed:u}))};return k(0),{calculatedDuration:null,next:I=>{let U=!1;return!M&&P===void 0&&(U=!0,C(I),k(I)),P!==void 0&&I>=P?M.next(I-P):(!U&&C(I),h)}}}const e_e=R1(.42,0,1,1),t_e=R1(0,0,.58,1),xee=R1(.42,0,.58,1),n_e=t=>Array.isArray(t)&&typeof t[0]!="number",r_e={linear:ks,easeIn:e_e,easeInOut:xee,easeOut:t_e,circIn:B4,circInOut:ZQ,circOut:JQ,backIn:U4,backInOut:XQ,backOut:YQ,anticipate:KQ},Y$=t=>{if(_4(t)){gQ(t.length===4);const[e,n,r,i]=t;return R1(e,n,r,i)}else if(typeof t=="string")return r_e[t];return t};function i_e(t,e,n){const r=[],i=n||gee,o=t.length-1;for(let a=0;a<o;a++){let s=i(t[a],t[a+1]);if(e){const l=Array.isArray(e)?e[a]||ks:e;s=j1(l,s)}r.push(s)}return r}function o_e(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const o=t.length;if(gQ(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const a=t[0]===t[1];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const s=i_e(e,r,i),l=s.length,c=u=>{if(a&&u<t[0])return e[0];let f=0;if(l>1)for(;f<t.length-2&&!(u<t[f+1]);f++);const h=mv(t[f],t[f+1],u);return s[f](h)};return n?u=>c(hd(t[0],t[o-1],u)):c}function a_e(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=mv(0,e,r);t.push(qr(n,1,i))}}function s_e(t){const e=[0];return a_e(e,t.length-1),e}function l_e(t,e){return t.map(n=>n*e)}function c_e(t,e){return t.map(()=>e||xee).splice(0,t.length-1)}function TT({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=n_e(r)?r.map(Y$):Y$(r),o={done:!1,value:e[0]},a=l_e(n&&n.length===e.length?n:s_e(e),t),s=o_e(a,e,{ease:Array.isArray(i)?i:c_e(e,i)});return{calculatedDuration:t,next:l=>(o.value=s(l),o.done=l>=t,o)}}const u_e=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Cr.update(e,!0),stop:()=>Xf(e),now:()=>zo.isProcessing?zo.timestamp:$c.now()}},d_e={decay:q$,inertia:q$,tween:TT,keyframes:TT,spring:vee},f_e=t=>t/100;class G4 extends pee{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:n,motionValue:r,element:i,keyframes:o}=this.options,a=(i==null?void 0:i.KeyframeResolver)||V4,s=(l,c)=>this.onKeyframesResolved(l,c);this.resolver=new a(o,s,n,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:o,velocity:a=0}=this.options,s=E4(n)?n:d_e[n]||TT;let l,c;s!==TT&&typeof e[0]!="number"&&(l=j1(f_e,gee(e[0],e[1])),e=[0,100]);const u=s({...this.options,keyframes:e});o==="mirror"&&(c=s({...this.options,keyframes:[...e].reverse(),velocity:-a})),u.calculatedDuration===null&&(u.calculatedDuration=vQ(u));const{calculatedDuration:f}=u,h=f+i,p=h*(r+1)-i;return{generator:u,mirroredGenerator:c,mapPercentToKeyframes:l,calculatedDuration:f,resolvedDuration:h,totalDuration:p}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:I}=this.options;return{done:!0,value:I[I.length-1]}}const{finalKeyframe:i,generator:o,mirroredGenerator:a,mapPercentToKeyframes:s,keyframes:l,calculatedDuration:c,totalDuration:u,resolvedDuration:f}=r;if(this.startTime===null)return o.next(0);const{delay:h,repeat:p,repeatType:y,repeatDelay:g,onUpdate:v}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-u/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const b=this.currentTime-h*(this.speed>=0?1:-1),w=this.speed>=0?b<0:b>u;this.currentTime=Math.max(b,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=u);let T=this.currentTime,C=o;if(p){const I=Math.min(this.currentTime,u)/f;let U=Math.floor(I),z=I%1;!z&&I>=1&&(z=1),z===1&&U--,U=Math.min(U,p+1),!!(U%2)&&(y==="reverse"?(z=1-z,g&&(z-=g/f)):y==="mirror"&&(C=a)),T=hd(0,1,z)*f}const P=w?{done:!1,value:l[0]}:C.next(T);s&&(P.value=s(P.value));let{done:M}=P;!w&&c!==null&&(M=this.speed>=0?this.currentTime>=u:this.currentTime<=0);const k=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&M);return k&&i!==void 0&&(P.value=bA(l,this.options,i)),v&&v(P.value),k&&this.finish(),P}get duration(){const{resolved:e}=this;return e?td(e.calculatedDuration):0}get time(){return td(this.currentTime)}set time(e){e=ed(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=td(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=u_e,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),n&&n();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const h_e=new Set(["opacity","clipPath","filter","transform"]);function p_e(t,e,n,{delay:r=0,duration:i=300,repeat:o=0,repeatType:a="loop",ease:s="easeInOut",times:l}={}){const c={[e]:n};l&&(c.offset=l);const u=bQ(s,i);return Array.isArray(u)&&(c.easing=u),t.animate(c,{delay:r,duration:i,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:o+1,direction:a==="reverse"?"alternate":"normal"})}const m_e=w4(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),CT=10,g_e=2e4;function y_e(t){return E4(t.type)||t.type==="spring"||!wQ(t.ease)}function v_e(t,e){const n=new G4({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const i=[];let o=0;for(;!r.done&&o<g_e;)r=n.sample(o),i.push(r.value),o+=CT;return{times:void 0,keyframes:i,duration:o-CT,ease:"linear"}}const wee={anticipate:KQ,backInOut:XQ,circInOut:ZQ};function x_e(t){return t in wee}class X$ extends pee{constructor(e){super(e);const{name:n,motionValue:r,element:i,keyframes:o}=this.options;this.resolver=new hee(o,(a,s)=>this.onKeyframesResolved(a,s),n,r,i),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:r=300,times:i,ease:o,type:a,motionValue:s,name:l,startTime:c}=this.options;if(!s.owner||!s.owner.current)return!1;if(typeof o=="string"&&ST()&&x_e(o)&&(o=wee[o]),y_e(this.options)){const{onComplete:f,onUpdate:h,motionValue:p,element:y,...g}=this.options,v=v_e(e,g);e=v.keyframes,e.length===1&&(e[1]=e[0]),r=v.duration,i=v.times,o=v.ease,a="keyframes"}const u=p_e(s.owner.current,l,e,{...this.options,duration:r,times:i,ease:o});return u.startTime=c??this.calcStartTime(),this.pendingTimeline?(b$(u,this.pendingTimeline),this.pendingTimeline=void 0):u.onfinish=()=>{const{onComplete:f}=this.options;s.set(bA(e,this.options,n)),f&&f(),this.cancel(),this.resolveFinishedPromise()},{animation:u,duration:r,times:i,type:a,ease:o,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return td(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return td(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=ed(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return ks;const{animation:r}=n;b$(r,e)}return ks}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:i,type:o,ease:a,times:s}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:c,onUpdate:u,onComplete:f,element:h,...p}=this.options,y=new G4({...p,keyframes:r,duration:i,type:o,ease:a,times:s,isGenerator:!0}),g=ed(this.time);c.setWithVelocity(y.sample(g-CT).value,y.sample(g).value,CT)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:i,repeatType:o,damping:a,type:s}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=n.owner.getProps();return m_e()&&r&&h_e.has(r)&&!l&&!c&&!i&&o!=="mirror"&&a!==0&&s!=="inertia"}}const w_e={type:"spring",stiffness:500,damping:25,restSpeed:10},b_e=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),S_e={type:"keyframes",duration:.8},E_e={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},__e=(t,{keyframes:e})=>e.length>2?S_e:wm.has(t)?t.startsWith("scale")?b_e(e[1]):w_e:E_e;function T_e({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:o,repeatType:a,repeatDelay:s,from:l,elapsed:c,...u}){return!!Object.keys(u).length}const q4=(t,e,n,r={},i,o)=>a=>{const s=S4(r,t)||{},l=s.delay||r.delay||0;let{elapsed:c=0}=r;c=c-ed(l);let u={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...s,delay:-c,onUpdate:h=>{e.set(h),s.onUpdate&&s.onUpdate(h)},onComplete:()=>{a(),s.onComplete&&s.onComplete()},name:t,motionValue:e,element:o?void 0:i};T_e(s)||(u={...u,...__e(t,u)}),u.duration&&(u.duration=ed(u.duration)),u.repeatDelay&&(u.repeatDelay=ed(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let f=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(u.duration=0,u.delay===0&&(f=!0)),u.allowFlatten=!s.type&&!s.ease,f&&!o&&e.get()!==void 0){const h=bA(u.keyframes,s);if(h!==void 0)return Cr.update(()=>{u.onUpdate(h),u.onComplete()}),new Y1e([])}return!o&&X$.supports(u)?new X$(u):new G4(u)};function C_e({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function bee(t,e,{delay:n=0,transitionOverride:r,type:i}={}){var o;let{transition:a=t.getDefaultTransition(),transitionEnd:s,...l}=e;r&&(a=r);const c=[],u=i&&t.animationState&&t.animationState.getState()[i];for(const f in l){const h=t.getValue(f,(o=t.latestValues[f])!==null&&o!==void 0?o:null),p=l[f];if(p===void 0||u&&C_e(u,f))continue;const y={delay:n,...S4(a||{},f)};let g=!1;if(window.MotionHandoffAnimation){const b=VQ(t);if(b){const w=window.MotionHandoffAnimation(b,f,Cr);w!==null&&(y.startTime=w,g=!0)}}_O(t,f),h.start(q4(f,h,p,t.shouldReduceMotion&&HQ.has(f)?{type:!1}:y,t,g));const v=h.animation;v&&c.push(v)}return s&&Promise.all(c).then(()=>{Cr.update(()=>{s&&eEe(t,s)})}),c}function IO(t,e,n={}){var r;const i=mb(t,e,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:o=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(o=n.transitionOverride);const a=i?()=>Promise.all(bee(t,i,n)):()=>Promise.resolve(),s=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:f,staggerDirection:h}=o;return A_e(t,e,u+c,f,h,n)}:()=>Promise.resolve(),{when:l}=o;if(l){const[c,u]=l==="beforeChildren"?[a,s]:[s,a];return c().then(()=>u())}else return Promise.all([a(),s(n.delay)])}function A_e(t,e,n=0,r=0,i=1,o){const a=[],s=(t.variantChildren.size-1)*r,l=i===1?(c=0)=>c*r:(c=0)=>s-c*r;return Array.from(t.variantChildren).sort(M_e).forEach((c,u)=>{c.notify("AnimationStart",e),a.push(IO(c,e,{...o,delay:n+l(u)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(a)}function M_e(t,e){return t.sortNodePosition(e)}function P_e(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(o=>IO(t,o,n));r=Promise.all(i)}else if(typeof e=="string")r=IO(t,e,n);else{const i=typeof e=="function"?mb(t,e,n.custom):e;r=Promise.all(bee(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function See(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const k_e=M4.length;function Eee(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?Eee(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<k_e;n++){const r=M4[n],i=t.props[r];(fb(i)||i===!1)&&(e[r]=i)}return e}const N_e=[...A4].reverse(),R_e=A4.length;function j_e(t){return e=>Promise.all(e.map(({animation:n,options:r})=>P_e(t,n,r)))}function I_e(t){let e=j_e(t),n=K$(),r=!0;const i=l=>(c,u)=>{var f;const h=mb(t,u,l==="exit"?(f=t.presenceContext)===null||f===void 0?void 0:f.custom:void 0);if(h){const{transition:p,transitionEnd:y,...g}=h;c={...c,...g,...y}}return c};function o(l){e=l(t)}function a(l){const{props:c}=t,u=Eee(t.parent)||{},f=[],h=new Set;let p={},y=1/0;for(let v=0;v<R_e;v++){const b=N_e[v],w=n[b],T=c[b]!==void 0?c[b]:u[b],C=fb(T),P=b===l?w.isActive:null;P===!1&&(y=v);let M=T===u[b]&&T!==c[b]&&C;if(M&&r&&t.manuallyAnimateOnMount&&(M=!1),w.protectedKeys={...p},!w.isActive&&P===null||!T&&!w.prevProp||xA(T)||typeof T=="boolean")continue;const k=O_e(w.prevProp,T);let I=k||b===l&&w.isActive&&!M&&C||v>y&&C,U=!1;const z=Array.isArray(T)?T:[T];let O=z.reduce(i(b),{});P===!1&&(O={});const{prevResolvedValues:B={}}=w,$={...B,...O},F=Z=>{I=!0,h.has(Z)&&(U=!0,h.delete(Z)),w.needsAnimating[Z]=!0;const H=t.getValue(Z);H&&(H.liveStyle=!1)};for(const Z in $){const H=O[Z],Y=B[Z];if(p.hasOwnProperty(Z))continue;let L=!1;EO(H)&&EO(Y)?L=!See(H,Y):L=H!==Y,L?H!=null?F(Z):h.add(Z):H!==void 0&&h.has(Z)?F(Z):w.protectedKeys[Z]=!0}w.prevProp=T,w.prevResolvedValues=O,w.isActive&&(p={...p,...O}),r&&t.blockInitialAnimation&&(I=!1),I&&(!(M&&k)||U)&&f.push(...z.map(Z=>({animation:Z,options:{type:b}})))}if(h.size){const v={};if(typeof c.initial!="boolean"){const b=mb(t,Array.isArray(c.initial)?c.initial[0]:c.initial);b&&b.transition&&(v.transition=b.transition)}h.forEach(b=>{const w=t.getBaseTarget(b),T=t.getValue(b);T&&(T.liveStyle=!0),v[b]=w??null}),f.push({animation:v})}let g=!!f.length;return r&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(g=!1),r=!1,g?e(f):Promise.resolve()}function s(l,c){var u;if(n[l].isActive===c)return Promise.resolve();(u=t.variantChildren)===null||u===void 0||u.forEach(h=>{var p;return(p=h.animationState)===null||p===void 0?void 0:p.setActive(l,c)}),n[l].isActive=c;const f=a(l);for(const h in n)n[h].protectedKeys={};return f}return{animateChanges:a,setActive:s,setAnimateFunction:o,getState:()=>n,reset:()=>{n=K$(),r=!0}}}function O_e(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!See(e,t):!1}function tp(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function K$(){return{animate:tp(!0),whileInView:tp(),whileHover:tp(),whileTap:tp(),whileDrag:tp(),whileFocus:tp(),exit:tp()}}class lh{constructor(e){this.isMounted=!1,this.node=e}update(){}}class L_e extends lh{constructor(e){super(e),e.animationState||(e.animationState=I_e(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();xA(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let D_e=0;class F_e extends lh{constructor(){super(...arguments),this.id=D_e++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const z_e={animation:{Feature:L_e},exit:{Feature:F_e}};function yb(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function I1(t){return{point:{x:t.pageX,y:t.pageY}}}const U_e=t=>e=>C4(e)&&t(e,I1(e));function Ow(t,e,n,r){return yb(t,e,U_e(n),r)}function _ee({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function B_e({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function $_e(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}const Tee=1e-4,H_e=1-Tee,V_e=1+Tee,Cee=.01,W_e=0-Cee,G_e=0+Cee;function Ta(t){return t.max-t.min}function q_e(t,e,n){return Math.abs(t-e)<=n}function J$(t,e,n,r=.5){t.origin=r,t.originPoint=qr(e.min,e.max,t.origin),t.scale=Ta(n)/Ta(e),t.translate=qr(n.min,n.max,t.origin)-t.originPoint,(t.scale>=H_e&&t.scale<=V_e||isNaN(t.scale))&&(t.scale=1),(t.translate>=W_e&&t.translate<=G_e||isNaN(t.translate))&&(t.translate=0)}function Lw(t,e,n,r){J$(t.x,e.x,n.x,r?r.originX:void 0),J$(t.y,e.y,n.y,r?r.originY:void 0)}function Z$(t,e,n){t.min=n.min+e.min,t.max=t.min+Ta(e)}function Y_e(t,e,n){Z$(t.x,e.x,n.x),Z$(t.y,e.y,n.y)}function Q$(t,e,n){t.min=e.min-n.min,t.max=t.min+Ta(e)}function Dw(t,e,n){Q$(t.x,e.x,n.x),Q$(t.y,e.y,n.y)}const e6=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ny=()=>({x:e6(),y:e6()}),t6=()=>({min:0,max:0}),wi=()=>({x:t6(),y:t6()});function Qs(t){return[t("x"),t("y")]}function tP(t){return t===void 0||t===1}function OO({scale:t,scaleX:e,scaleY:n}){return!tP(t)||!tP(e)||!tP(n)}function dp(t){return OO(t)||Aee(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function Aee(t){return n6(t.x)||n6(t.y)}function n6(t){return t&&t!=="0%"}function AT(t,e,n){const r=t-n,i=e*r;return n+i}function r6(t,e,n,r,i){return i!==void 0&&(t=AT(t,i,r)),AT(t,n,r)+e}function LO(t,e=0,n=1,r,i){t.min=r6(t.min,e,n,r,i),t.max=r6(t.max,e,n,r,i)}function Mee(t,{x:e,y:n}){LO(t.x,e.translate,e.scale,e.originPoint),LO(t.y,n.translate,n.scale,n.originPoint)}const i6=.999999999999,o6=1.0000000000001;function X_e(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let o,a;for(let s=0;s<i;s++){o=n[s],a=o.projectionDelta;const{visualElement:l}=o.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&jy(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,Mee(t,a)),r&&dp(o.latestValues)&&jy(t,o.latestValues))}e.x<o6&&e.x>i6&&(e.x=1),e.y<o6&&e.y>i6&&(e.y=1)}function Ry(t,e){t.min=t.min+e,t.max=t.max+e}function a6(t,e,n,r,i=.5){const o=qr(t.min,t.max,i);LO(t,e,n,o,r)}function jy(t,e){a6(t.x,e.x,e.scaleX,e.scale,e.originX),a6(t.y,e.y,e.scaleY,e.scale,e.originY)}function Pee(t,e){return _ee($_e(t.getBoundingClientRect(),e))}function K_e(t,e,n){const r=Pee(t,n),{scroll:i}=e;return i&&(Ry(r.x,i.offset.x),Ry(r.y,i.offset.y)),r}const kee=({current:t})=>t?t.ownerDocument.defaultView:null,s6=(t,e)=>Math.abs(t-e);function J_e(t,e){const n=s6(t.x,e.x),r=s6(t.y,e.y);return Math.sqrt(n**2+r**2)}class Nee{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=rP(this.lastMoveEventInfo,this.history),h=this.startEvent!==null,p=J_e(f.offset,{x:0,y:0})>=3;if(!h&&!p)return;const{point:y}=f,{timestamp:g}=zo;this.history.push({...y,timestamp:g});const{onStart:v,onMove:b}=this.handlers;h||(v&&v(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),b&&b(this.lastMoveEvent,f)},this.handlePointerMove=(f,h)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=nP(h,this.transformPagePoint),Cr.update(this.updatePoint,!0)},this.handlePointerUp=(f,h)=>{this.end();const{onEnd:p,onSessionEnd:y,resumeAnimation:g}=this.handlers;if(this.dragSnapToOrigin&&g&&g(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=rP(f.type==="pointercancel"?this.lastMoveEventInfo:nP(h,this.transformPagePoint),this.history);this.startEvent&&p&&p(f,v),y&&y(f,v)},!C4(e))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const a=I1(e),s=nP(a,this.transformPagePoint),{point:l}=s,{timestamp:c}=zo;this.history=[{...l,timestamp:c}];const{onSessionStart:u}=n;u&&u(e,rP(s,this.history)),this.removeListeners=j1(Ow(this.contextWindow,"pointermove",this.handlePointerMove),Ow(this.contextWindow,"pointerup",this.handlePointerUp),Ow(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Xf(this.updatePoint)}}function nP(t,e){return e?{point:e(t.point)}:t}function l6(t,e){return{x:t.x-e.x,y:t.y-e.y}}function rP({point:t},e){return{point:t,delta:l6(t,Ree(e)),offset:l6(t,Z_e(e)),velocity:Q_e(e,.1)}}function Z_e(t){return t[0]}function Ree(t){return t[t.length-1]}function Q_e(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=Ree(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>ed(e)));)n--;if(!r)return{x:0,y:0};const o=td(i.timestamp-r.timestamp);if(o===0)return{x:0,y:0};const a={x:(i.x-r.x)/o,y:(i.y-r.y)/o};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function eTe(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?qr(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?qr(n,t,r.max):Math.min(t,n)),t}function c6(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function tTe(t,{top:e,left:n,bottom:r,right:i}){return{x:c6(t.x,n,i),y:c6(t.y,e,r)}}function u6(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function nTe(t,e){return{x:u6(t.x,e.x),y:u6(t.y,e.y)}}function rTe(t,e){let n=.5;const r=Ta(t),i=Ta(e);return i>r?n=mv(e.min,e.max-r,t.min):r>i&&(n=mv(t.min,t.max-i,e.min)),hd(0,1,n)}function iTe(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const DO=.35;function oTe(t=DO){return t===!1?t=0:t===!0&&(t=DO),{x:d6(t,"left","right"),y:d6(t,"top","bottom")}}function d6(t,e,n){return{min:f6(t,e),max:f6(t,n)}}function f6(t,e){return typeof t=="number"?t:t[e]||0}const aTe=new WeakMap;class sTe{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=wi(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=u=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(I1(u).point)},o=(u,f)=>{const{drag:h,dragPropagation:p,onDragStart:y}=this.getProps();if(h&&!p&&(this.openDragLock&&this.openDragLock(),this.openDragLock=eSe(h),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Qs(v=>{let b=this.getAxisMotionValue(v).get()||0;if(Hc.test(b)){const{projection:w}=this.visualElement;if(w&&w.layout){const T=w.layout.layoutBox[v];T&&(b=Ta(T)*(parseFloat(b)/100))}}this.originPoint[v]=b}),y&&Cr.postRender(()=>y(u,f)),_O(this.visualElement,"transform");const{animationState:g}=this.visualElement;g&&g.setActive("whileDrag",!0)},a=(u,f)=>{const{dragPropagation:h,dragDirectionLock:p,onDirectionLock:y,onDrag:g}=this.getProps();if(!h&&!this.openDragLock)return;const{offset:v}=f;if(p&&this.currentDirection===null){this.currentDirection=lTe(v),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",f.point,v),this.updateAxis("y",f.point,v),this.visualElement.render(),g&&g(u,f)},s=(u,f)=>this.stop(u,f),l=()=>Qs(u=>{var f;return this.getAnimationState(u)==="paused"&&((f=this.getAxisMotionValue(u).animation)===null||f===void 0?void 0:f.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new Nee(e,{onSessionStart:i,onStart:o,onMove:a,onSessionEnd:s,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:kee(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:o}=this.getProps();o&&Cr.postRender(()=>o(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!kE(e,i,this.currentDirection))return;const o=this.getAxisMotionValue(e);let a=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(a=eTe(a,this.constraints[e],this.elastic[e])),o.set(a)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,o=this.constraints;n&&Py(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=tTe(i.layoutBox,n):this.constraints=!1,this.elastic=oTe(r),o!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Qs(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=iTe(i.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Py(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const o=K_e(r,i.root,this.visualElement.getTransformPagePoint());let a=nTe(i.layout.layoutBox,o);if(n){const s=n(B_e(a));this.hasMutatedConstraints=!!s,s&&(a=_ee(s))}return a}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:o,dragSnapToOrigin:a,onDragTransitionEnd:s}=this.getProps(),l=this.constraints||{},c=Qs(u=>{if(!kE(u,n,this.currentDirection))return;let f=l&&l[u]||{};a&&(f={min:0,max:0});const h=i?200:1e6,p=i?40:1e7,y={type:"inertia",velocity:r?e[u]:0,bounceStiffness:h,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...o,...f};return this.startAxisValueAnimation(u,y)});return Promise.all(c).then(s)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return _O(this.visualElement,e),r.start(q4(e,r,0,n,this.visualElement,!1))}stopAnimation(){Qs(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Qs(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Qs(n=>{const{drag:r}=this.getProps();if(!kE(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,o=this.getAxisMotionValue(n);if(i&&i.layout){const{min:a,max:s}=i.layout.layoutBox[n];o.set(e[n]-qr(a,s,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Py(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Qs(a=>{const s=this.getAxisMotionValue(a);if(s&&this.constraints!==!1){const l=s.get();i[a]=rTe({min:l,max:l},this.constraints[a])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Qs(a=>{if(!kE(a,e,null))return;const s=this.getAxisMotionValue(a),{min:l,max:c}=this.constraints[a];s.set(qr(l,c,i[a]))})}addListeners(){if(!this.visualElement.current)return;aTe.set(this.visualElement,this);const e=this.visualElement.current,n=Ow(e,"pointerdown",l=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Py(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,o=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Cr.read(r);const a=yb(window,"resize",()=>this.scalePositionWithinConstraints()),s=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(Qs(u=>{const f=this.getAxisMotionValue(u);f&&(this.originPoint[u]+=l[u].translate,f.set(f.get()+l[u].translate))}),this.visualElement.render())});return()=>{a(),n(),o(),s&&s()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:o=!1,dragElastic:a=DO,dragMomentum:s=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:o,dragElastic:a,dragMomentum:s}}}function kE(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function lTe(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class cTe extends lh{constructor(e){super(e),this.removeGroupControls=ks,this.removeListeners=ks,this.controls=new sTe(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ks}unmount(){this.removeGroupControls(),this.removeListeners()}}const h6=t=>(e,n)=>{t&&Cr.postRender(()=>t(e,n))};class uTe extends lh{constructor(){super(...arguments),this.removePointerDownListener=ks}onPointerDown(e){this.session=new Nee(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:kee(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:h6(e),onStart:h6(n),onMove:r,onEnd:(o,a)=>{delete this.session,i&&Cr.postRender(()=>i(o,a))}}}mount(){this.removePointerDownListener=Ow(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const rT={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function p6(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Vx={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Xt.test(t))t=parseFloat(t);else return t;const n=p6(t,e.target.x),r=p6(t,e.target.y);return`${n}% ${r}%`}},dTe={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=Kf.parse(t);if(i.length>5)return r;const o=Kf.createTransformer(t),a=typeof i[0]!="number"?1:0,s=n.x.scale*e.x,l=n.y.scale*e.y;i[0+a]/=s,i[1+a]/=l;const c=qr(s,l,.5);return typeof i[2+a]=="number"&&(i[2+a]/=c),typeof i[3+a]=="number"&&(i[3+a]/=c),o(i)}};class fTe extends _.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:o}=e;MSe(hTe),o&&(n.group&&n.group.add(o),r&&r.register&&i&&r.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),rT.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:o}=this.props,a=r.projection;return a&&(a.isPresent=o,i||e.layoutDependency!==n||n===void 0||e.isPresent!==o?a.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?a.promote():a.relegate()||Cr.postRender(()=>{const s=a.getStack();(!s||!s.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),T4.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function jee(t){const[e,n]=mQ(),r=_.useContext(p4);return d.jsx(fTe,{...t,layoutGroup:r,switchLayoutGroup:_.useContext(kQ),isPresent:e,safeToRemove:n})}const hTe={borderRadius:{...Vx,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Vx,borderTopRightRadius:Vx,borderBottomLeftRadius:Vx,borderBottomRightRadius:Vx,boxShadow:dTe};function pTe(t,e,n){const r=ia(t)?t:db(t);return r.start(q4("",r,e,n)),r.animation}function mTe(t){return t instanceof SVGElement&&t.tagName!=="svg"}const gTe=(t,e)=>t.depth-e.depth;class yTe{constructor(){this.children=[],this.isDirty=!1}add(e){v4(this.children,e),this.isDirty=!0}remove(e){x4(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(gTe),this.isDirty=!1,this.children.forEach(e)}}function vTe(t,e){const n=$c.now(),r=({timestamp:i})=>{const o=i-n;o>=e&&(Xf(r),t(o-e))};return Cr.read(r,!0),()=>Xf(r)}const Iee=["TopLeft","TopRight","BottomLeft","BottomRight"],xTe=Iee.length,m6=t=>typeof t=="string"?parseFloat(t):t,g6=t=>typeof t=="number"||Xt.test(t);function wTe(t,e,n,r,i,o){i?(t.opacity=qr(0,n.opacity!==void 0?n.opacity:1,bTe(r)),t.opacityExit=qr(e.opacity!==void 0?e.opacity:1,0,STe(r))):o&&(t.opacity=qr(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let a=0;a<xTe;a++){const s=`border${Iee[a]}Radius`;let l=y6(e,s),c=y6(n,s);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||g6(l)===g6(c)?(t[s]=Math.max(qr(m6(l),m6(c),r),0),(Hc.test(c)||Hc.test(l))&&(t[s]+="%")):t[s]=c}(e.rotate||n.rotate)&&(t.rotate=qr(e.rotate||0,n.rotate||0,r))}function y6(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const bTe=Oee(0,.5,JQ),STe=Oee(.5,.95,ks);function Oee(t,e,n){return r=>r<t?0:r>e?1:n(mv(t,e,r))}function v6(t,e){t.min=e.min,t.max=e.max}function Xs(t,e){v6(t.x,e.x),v6(t.y,e.y)}function x6(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function w6(t,e,n,r,i){return t-=e,t=AT(t,1/n,r),i!==void 0&&(t=AT(t,1/i,r)),t}function ETe(t,e=0,n=1,r=.5,i,o=t,a=t){if(Hc.test(e)&&(e=parseFloat(e),e=qr(a.min,a.max,e/100)-a.min),typeof e!="number")return;let s=qr(o.min,o.max,r);t===o&&(s-=e),t.min=w6(t.min,e,n,s,i),t.max=w6(t.max,e,n,s,i)}function b6(t,e,[n,r,i],o,a){ETe(t,e[n],e[r],e[i],e.scale,o,a)}const _Te=["x","scaleX","originX"],TTe=["y","scaleY","originY"];function S6(t,e,n,r){b6(t.x,e,_Te,n?n.x:void 0,r?r.x:void 0),b6(t.y,e,TTe,n?n.y:void 0,r?r.y:void 0)}function E6(t){return t.translate===0&&t.scale===1}function Lee(t){return E6(t.x)&&E6(t.y)}function _6(t,e){return t.min===e.min&&t.max===e.max}function CTe(t,e){return _6(t.x,e.x)&&_6(t.y,e.y)}function T6(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function Dee(t,e){return T6(t.x,e.x)&&T6(t.y,e.y)}function C6(t){return Ta(t.x)/Ta(t.y)}function A6(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class ATe{constructor(){this.members=[]}add(e){v4(this.members,e),e.scheduleRender()}remove(e){if(x4(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const o=this.members[i];if(o.isPresent!==!1){r=o;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function MTe(t,e,n){let r="";const i=t.x.translate/e.x,o=t.y.translate/e.y,a=(n==null?void 0:n.z)||0;if((i||o||a)&&(r=`translate3d(${i}px, ${o}px, ${a}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:u,rotateX:f,rotateY:h,skewX:p,skewY:y}=n;c&&(r=`perspective(${c}px) ${r}`),u&&(r+=`rotate(${u}deg) `),f&&(r+=`rotateX(${f}deg) `),h&&(r+=`rotateY(${h}deg) `),p&&(r+=`skewX(${p}deg) `),y&&(r+=`skewY(${y}deg) `)}const s=t.x.scale*e.x,l=t.y.scale*e.y;return(s!==1||l!==1)&&(r+=`scale(${s}, ${l})`),r||"none"}const iP=["","X","Y","Z"],PTe={visibility:"hidden"},M6=1e3;let kTe=0;function oP(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function Fee(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=VQ(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:o}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Cr,!(i||o))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&Fee(r)}function zee({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(a={},s=e==null?void 0:e()){this.id=kTe++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(jTe),this.nodes.forEach(FTe),this.nodes.forEach(zTe),this.nodes.forEach(ITe)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=s?s.root||s:this,this.path=s?[...s.path,s]:[],this.parent=s,this.depth=s?s.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new yTe)}addEventListener(a,s){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new b4),this.eventHandlers.get(a).add(s)}notifyListeners(a,...s){const l=this.eventHandlers.get(a);l&&l.notify(...s)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,s=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=mTe(a),this.instance=a;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),s&&(c||l)&&(this.isLayoutDirty=!0),t){let f;const h=()=>this.root.updateBlockedByResize=!1;t(a,()=>{this.root.updateBlockedByResize=!0,f&&f(),f=vTe(h,250),rT.hasAnimatedSinceResize&&(rT.hasAnimatedSinceResize=!1,this.nodes.forEach(k6))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:h,hasRelativeLayoutChanged:p,layout:y})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||u.getDefaultTransition()||VTe,{onLayoutAnimationStart:v,onLayoutAnimationComplete:b}=u.getProps(),w=!this.targetLayout||!Dee(this.targetLayout,y),T=!h&&p;if(this.options.layoutRoot||this.resumeFrom||T||h&&(w||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(f,T);const C={...S4(g,"layout"),onPlay:v,onComplete:b};(u.shouldReduceMotion||this.options.layoutRoot)&&(C.delay=0,C.type=!1),this.startAnimation(C)}else h||k6(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=y})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Xf(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(UTe),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Fee(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const f=this.path[u];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:s,layout:l}=this.options;if(s===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(P6);return}this.isUpdating||this.nodes.forEach(LTe),this.isUpdating=!1,this.nodes.forEach(DTe),this.nodes.forEach(NTe),this.nodes.forEach(RTe),this.clearAllSnapshots();const s=$c.now();zo.delta=hd(0,1e3/60,s-zo.timestamp),zo.timestamp=s,zo.isProcessing=!0,KM.update.process(zo),KM.preRender.process(zo),KM.render.process(zo),zo.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,T4.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(OTe),this.sharedNodes.forEach(BTe)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Cr.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Cr.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Ta(this.snapshot.measuredBox.x)&&!Ta(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=wi(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:s}=this.options;s&&s.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let s=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(s=!1),s){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,s=this.projectionDelta&&!Lee(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;a&&(s||dp(this.latestValues)||u)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const s=this.measurePageBox();let l=this.removeElementScroll(s);return a&&(l=this.removeTransform(l)),WTe(l),{animationId:this.root.animationId,measuredBox:s,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var a;const{visualElement:s}=this.options;if(!s)return wi();const l=s.measureViewportBox();if(!(((a=this.scroll)===null||a===void 0?void 0:a.wasRoot)||this.path.some(GTe))){const{scroll:u}=this.root;u&&(Ry(l.x,u.offset.x),Ry(l.y,u.offset.y))}return l}removeElementScroll(a){var s;const l=wi();if(Xs(l,a),!((s=this.scroll)===null||s===void 0)&&s.wasRoot)return l;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:f,options:h}=u;u!==this.root&&f&&h.layoutScroll&&(f.wasRoot&&Xs(l,a),Ry(l.x,f.offset.x),Ry(l.y,f.offset.y))}return l}applyTransform(a,s=!1){const l=wi();Xs(l,a);for(let c=0;c<this.path.length;c++){const u=this.path[c];!s&&u.options.layoutScroll&&u.scroll&&u!==u.root&&jy(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),dp(u.latestValues)&&jy(l,u.latestValues)}return dp(this.latestValues)&&jy(l,this.latestValues),l}removeTransform(a){const s=wi();Xs(s,a);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!dp(c.latestValues))continue;OO(c.latestValues)&&c.updateSnapshot();const u=wi(),f=c.measurePageBox();Xs(u,f),S6(s,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return dp(this.latestValues)&&S6(s,this.latestValues),s}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==zo.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var s;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(a||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((s=this.parent)===null||s===void 0)&&s.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:h}=this.options;if(!(!this.layout||!(f||h))){if(this.resolvedRelativeTargetAt=zo.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=wi(),this.relativeTargetOrigin=wi(),Dw(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),Xs(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=wi(),this.targetWithTransforms=wi()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Y_e(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Xs(this.target,this.layout.layoutBox),Mee(this.target,this.targetDelta)):Xs(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=wi(),this.relativeTargetOrigin=wi(),Dw(this.relativeTargetOrigin,this.target,p.target),Xs(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||OO(this.parent.latestValues)||Aee(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const s=this.getLead(),l=!!this.resumingFrom||this!==s;let c=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===zo.timestamp&&(c=!1),c)return;const{layout:u,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||f))return;Xs(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,p=this.treeScale.y;X_e(this.layoutCorrected,this.treeScale,this.path,l),s.layout&&!s.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(s.target=s.layout.layoutBox,s.targetWithTransforms=wi());const{target:y}=s;if(!y){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(x6(this.prevProjectionDelta.x,this.projectionDelta.x),x6(this.prevProjectionDelta.y,this.projectionDelta.y)),Lw(this.projectionDelta,this.layoutCorrected,y,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==p||!A6(this.projectionDelta.x,this.prevProjectionDelta.x)||!A6(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",y))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var s;if((s=this.options.visualElement)===null||s===void 0||s.scheduleRender(),a){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Ny(),this.projectionDelta=Ny(),this.projectionDeltaWithTransform=Ny()}setAnimationOrigin(a,s=!1){const l=this.snapshot,c=l?l.latestValues:{},u={...this.latestValues},f=Ny();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!s;const h=wi(),p=l?l.source:void 0,y=this.layout?this.layout.source:void 0,g=p!==y,v=this.getStack(),b=!v||v.members.length<=1,w=!!(g&&!b&&this.options.crossfade===!0&&!this.path.some(HTe));this.animationProgress=0;let T;this.mixTargetDelta=C=>{const P=C/1e3;N6(f.x,a.x,P),N6(f.y,a.y,P),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Dw(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),$Te(this.relativeTarget,this.relativeTargetOrigin,h,P),T&&CTe(this.relativeTarget,T)&&(this.isProjectionDirty=!1),T||(T=wi()),Xs(T,this.relativeTarget)),g&&(this.animationValues=u,wTe(u,c,this.latestValues,P,w,b)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=P},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Xf(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Cr.update(()=>{rT.hasAnimatedSinceResize=!0,this.currentAnimation=pTe(0,M6,{...a,onUpdate:s=>{this.mixTargetDelta(s),a.onUpdate&&a.onUpdate(s)},onStop:()=>{},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(M6),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:s,target:l,layout:c,latestValues:u}=a;if(!(!s||!l||!c)){if(this!==a&&this.layout&&c&&Uee(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||wi();const f=Ta(this.layout.layoutBox.x);l.x.min=a.target.x.min,l.x.max=l.x.min+f;const h=Ta(this.layout.layoutBox.y);l.y.min=a.target.y.min,l.y.max=l.y.min+h}Xs(s,l),jy(s,u),Lw(this.projectionDeltaWithTransform,this.layoutCorrected,s,u)}}registerSharedNode(a,s){this.sharedNodes.has(a)||this.sharedNodes.set(a,new ATe),this.sharedNodes.get(a).add(s);const c=s.options.initialPromotionConfig;s.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(s):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:s}=this.options;return s?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:s}=this.options;return s?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:s,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),a&&(this.projectionDelta=void 0,this.needsReset=!0),s&&this.setOptions({transition:s})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let s=!1;const{latestValues:l}=a;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(s=!0),!s)return;const c={};l.z&&oP("z",a,c,this.animationValues);for(let u=0;u<iP.length;u++)oP(`rotate${iP[u]}`,a,c,this.animationValues),oP(`skew${iP[u]}`,a,c,this.animationValues);a.render();for(const u in c)a.setStaticValue(u,c[u]),this.animationValues&&(this.animationValues[u]=c[u]);a.scheduleRender()}getProjectionStyles(a){var s,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return PTe;const c={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=nT(a==null?void 0:a.pointerEvents)||"",c.transform=u?u(this.latestValues,""):"none",c;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const g={};return this.options.layoutId&&(g.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,g.pointerEvents=nT(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!dp(this.latestValues)&&(g.transform=u?u({},""):"none",this.hasProjected=!1),g}const h=f.animationValues||f.latestValues;this.applyTransformsToTarget(),c.transform=MTe(this.projectionDeltaWithTransform,this.treeScale,h),u&&(c.transform=u(h,c.transform));const{x:p,y}=this.projectionDelta;c.transformOrigin=`${p.origin*100}% ${y.origin*100}% 0`,f.animationValues?c.opacity=f===this?(l=(s=h.opacity)!==null&&s!==void 0?s:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:c.opacity=f===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const g in hb){if(h[g]===void 0)continue;const{correct:v,applyTo:b,isCSSVariable:w}=hb[g],T=c.transform==="none"?h[g]:v(h[g],f);if(b){const C=b.length;for(let P=0;P<C;P++)c[b[P]]=T}else w?this.options.visualElement.renderState.vars[g]=T:c[g]=T}return this.options.layoutId&&(c.pointerEvents=f===this?nT(a==null?void 0:a.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var s;return(s=a.currentAnimation)===null||s===void 0?void 0:s.stop()}),this.root.nodes.forEach(P6),this.root.sharedNodes.clear()}}}function NTe(t){t.updateLayout()}function RTe(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:o}=t.options,a=n.source!==t.layout.source;o==="size"?Qs(f=>{const h=a?n.measuredBox[f]:n.layoutBox[f],p=Ta(h);h.min=r[f].min,h.max=h.min+p}):Uee(o,n.layoutBox,r)&&Qs(f=>{const h=a?n.measuredBox[f]:n.layoutBox[f],p=Ta(r[f]);h.max=h.min+p,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[f].max=t.relativeTarget[f].min+p)});const s=Ny();Lw(s,r,n.layoutBox);const l=Ny();a?Lw(l,t.applyTransform(i,!0),n.measuredBox):Lw(l,r,n.layoutBox);const c=!Lee(s);let u=!1;if(!t.resumeFrom){const f=t.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:h,layout:p}=f;if(h&&p){const y=wi();Dw(y,n.layoutBox,h.layoutBox);const g=wi();Dw(g,r,p.layoutBox),Dee(y,g)||(u=!0),f.options.layoutRoot&&(t.relativeTarget=g,t.relativeTargetOrigin=y,t.relativeParent=f)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:s,hasLayoutChanged:c,hasRelativeLayoutChanged:u})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function jTe(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function ITe(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function OTe(t){t.clearSnapshot()}function P6(t){t.clearMeasurements()}function LTe(t){t.isLayoutDirty=!1}function DTe(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function k6(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function FTe(t){t.resolveTargetDelta()}function zTe(t){t.calcProjection()}function UTe(t){t.resetSkewAndRotation()}function BTe(t){t.removeLeadSnapshot()}function N6(t,e,n){t.translate=qr(e.translate,0,n),t.scale=qr(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function R6(t,e,n,r){t.min=qr(e.min,n.min,r),t.max=qr(e.max,n.max,r)}function $Te(t,e,n,r){R6(t.x,e.x,n.x,r),R6(t.y,e.y,n.y,r)}function HTe(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const VTe={duration:.45,ease:[.4,0,.1,1]},j6=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),I6=j6("applewebkit/")&&!j6("chrome/")?Math.round:ks;function O6(t){t.min=I6(t.min),t.max=I6(t.max)}function WTe(t){O6(t.x),O6(t.y)}function Uee(t,e,n){return t==="position"||t==="preserve-aspect"&&!q_e(C6(e),C6(n),.2)}function GTe(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const qTe=zee({attachResizeListener:(t,e)=>yb(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),aP={current:void 0},Bee=zee({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!aP.current){const t=new qTe({});t.mount(window),t.setOptions({layoutScroll:!0}),aP.current=t}return aP.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),YTe={pan:{Feature:uTe},drag:{Feature:cTe,ProjectionNode:Bee,MeasureLayout:jee}};function L6(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,o=r[i];o&&Cr.postRender(()=>o(e,I1(e)))}class XTe extends lh{mount(){const{current:e}=this.node;e&&(this.unmount=nSe(e,(n,r)=>(L6(this.node,r,"Start"),i=>L6(this.node,i,"End"))))}unmount(){}}class KTe extends lh{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=j1(yb(this.node.current,"focus",()=>this.onFocus()),yb(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function D6(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),o=r[i];o&&Cr.postRender(()=>o(e,I1(e)))}class JTe extends lh{mount(){const{current:e}=this.node;e&&(this.unmount=aSe(e,(n,r)=>(D6(this.node,r,"Start"),(i,{success:o})=>D6(this.node,i,o?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const FO=new WeakMap,sP=new WeakMap,ZTe=t=>{const e=FO.get(t.target);e&&e(t)},QTe=t=>{t.forEach(ZTe)};function eCe({root:t,...e}){const n=t||document;sP.has(n)||sP.set(n,{});const r=sP.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(QTe,{root:t,...e})),r[i]}function tCe(t,e,n){const r=eCe(e);return FO.set(t,n),r.observe(t),()=>{FO.delete(t),r.unobserve(t)}}const nCe={some:0,all:1};class rCe extends lh{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:o}=e,a={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:nCe[i]},s=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,o&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:f}=this.node.getProps(),h=c?u:f;h&&h(l)};return tCe(this.node.current,a,s)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(iCe(e,n))&&this.startObserver()}unmount(){}}function iCe({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const oCe={inView:{Feature:rCe},tap:{Feature:JTe},focus:{Feature:KTe},hover:{Feature:XTe}},aCe={layout:{ProjectionNode:Bee,MeasureLayout:jee}},zO={current:null},$ee={current:!1};function sCe(){if($ee.current=!0,!!g4)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>zO.current=t.matches;t.addListener(e),e()}else zO.current=!1}const lCe=[...fee,ea,Kf],cCe=t=>lCe.find(dee(t)),uCe=new WeakMap;function dCe(t,e,n){for(const r in e){const i=e[r],o=n[r];if(ia(i))t.addValue(r,i);else if(ia(o))t.addValue(r,db(i,{owner:t}));else if(o!==i)if(t.hasValue(r)){const a=t.getValue(r);a.liveStyle===!0?a.jump(i):a.hasAnimated||a.set(i)}else{const a=t.getStaticValue(r);t.addValue(r,db(a!==void 0?a:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const F6=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class fCe{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:o,visualState:a},s={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=V4,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=$c.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,Cr.render(this.render,!1,!0))};const{latestValues:l,renderState:c,onUpdate:u}=a;this.onUpdate=u,this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=s,this.blockInitialAnimation=!!o,this.isControllingVariants=wA(n),this.isVariantNode=MQ(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:f,...h}=this.scrapeMotionValuesFromProps(n,{},this);for(const p in h){const y=h[p];l[p]!==void 0&&ia(y)&&y.set(l[p],!1)}}mount(e){this.current=e,uCe.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),$ee.current||sCe(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:zO.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Xf(this.notifyUpdate),Xf(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=wm.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",s=>{this.latestValues[e]=s,this.props.onUpdate&&Cr.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),o=n.on("renderRequest",this.scheduleRender);let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),o(),a&&a(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in gv){const n=gv[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):wi()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<F6.length;r++){const i=F6[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const o="on"+i,a=e[o];a&&(this.propEventSubscriptions[i]=this.on(i,a))}this.prevMotionValues=dCe(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=db(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(cee(i)||QQ(i))?i=parseFloat(i):!cCe(i)&&Kf.test(n)&&(i=aee(e,n)),this.setBaseTarget(e,ia(i)?i.get():i)),ia(i)?i.get():i}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const a=F4(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);a&&(i=a[e])}if(r&&i!==void 0)return i;const o=this.getBaseTargetFromProps(this.props,e);return o!==void 0&&!ia(o)?o:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new b4),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class Hee extends fCe{constructor(){super(...arguments),this.KeyframeResolver=hee}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;ia(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function hCe(t){return window.getComputedStyle(t)}class pCe extends Hee{constructor(){super(...arguments),this.type="html",this.renderInstance=zQ}readValueFromInstance(e,n){if(wm.has(n))return TEe(e,n);{const r=hCe(e),i=(k4(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return Pee(e,n)}build(e,n,r){j4(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return z4(e,n,r)}}class mCe extends Hee{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=wi,this.updateDimensions=()=>{this.current&&!this.renderState.dimensions&&FQ(this.current,this.renderState)}}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(wm.has(n)){const r=oee(n);return r&&r.default||0}return n=UQ.has(n)?n:P4(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return $Q(e,n,r)}onBindTransform(){this.current&&!this.renderState.dimensions&&Cr.postRender(this.updateDimensions)}build(e,n,r){L4(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,i){BQ(e,n,r,i)}mount(e){this.isSVGTag=D4(e.tagName),super.mount(e)}}const gCe=(t,e)=>O4(t)?new mCe(e):new pCe(e,{allowProjection:t!==_.Fragment}),yCe=ZSe({...z_e,...oCe,...YTe,...aCe},gCe),Ke=pSe(yCe),vCe=({isPhonePreview:t=!1})=>{const e=[{name:"Joy",value:.8,color:"#FFD700"},{name:"Calm",value:.6,color:"#4169E1"},{name:"Focus",value:.5,color:"#32CD32"},{name:"Stress",value:.3,color:"#FF4500"}],n=t?"h-[60px]":"h-[120px]",r=t?"text-[6px]":"text-xs";return d.jsx("div",{className:`w-full ${n} relative`,children:e.map((i,o)=>{const a=t?Math.max(15,i.value*30):Math.max(30,i.value*60),s=t?`${10+o*10%40}%`:`${20+o*15%60}%`,l=`${15+o*25%80}%`;return d.jsx(Ke.div,{className:"absolute rounded-full flex items-center justify-center",style:{width:a,height:a,backgroundColor:`${i.color}50`,border:`1px solid ${i.color}`,top:s,left:l},initial:{scale:0},animate:{scale:[.9,1,.95,1.02,.98,1]},transition:{duration:4,repeat:1/0,repeatType:"reverse",delay:o*.3},children:d.jsx("span",{className:`${r} font-medium`,children:d.jsx(Q,{text:i.name})})},i.name)})})},xCe=({isPhonePreview:t=!1})=>{const e=[{day:"Mon",value:.3},{day:"Tue",value:.2},{day:"Wed",value:.5},{day:"Thu",value:.4},{day:"Fri",value:.6},{day:"Sat",value:.8},{day:"Sun",value:.7}],n=t?50:100,r=t?"h-[50px]":"h-[100px]",i=t?"text-[6px]":"text-xs";return d.jsxs("div",{className:`relative w-full ${r} flex items-end`,children:[d.jsx("div",{className:"absolute inset-0 flex justify-between items-end pb-4",children:e.map((o,a)=>{const s=t?Math.max(4,o.value*35):Math.max(8,o.value*70);return d.jsxs("div",{className:"flex flex-col items-center justify-end h-full",children:[d.jsx(Ke.div,{className:"w-1 bg-primary rounded-t-sm",style:{height:s},initial:{height:0},animate:{height:s},transition:{duration:1,delay:a*.1}}),d.jsx("span",{className:`${i} text-foreground/70 mt-1`,children:d.jsx(Q,{text:o.day})})]},o.day)})}),d.jsx("svg",{className:"absolute bottom-4 left-0 w-full h-[70%] overflow-visible",children:d.jsx(Ke.path,{d:`M 10 ${n*(1-e[0].value*.7)} 
              ${e.map((o,a)=>{const s=10+a*(100/(e.length-1))+"%",l=n*(1-o.value*.7);return`L ${s} ${l}`}).join(" ")}`,fill:"none",stroke:"#3b82f6",strokeWidth:"1",strokeDasharray:"1000",strokeDashoffset:"1000",initial:{strokeDashoffset:1e3},animate:{strokeDashoffset:0},transition:{duration:1.5,ease:"easeInOut"}})})]})},wCe=()=>{const[t,e]=_.useState(0),[n,r]=_.useState([]),i=3;return _.useEffect(()=>{const o=()=>{const s=Array.from({length:16},()=>Math.random()*.8+.2);r(s)},a=setInterval(()=>{e(s=>(s+1)%i),t===0&&o()},3e3);return o(),()=>clearInterval(a)},[t]),d.jsx("div",{className:"relative w-full h-full flex items-center justify-center",children:d.jsxs("div",{className:"relative w-full max-w-40 h-full max-h-72 md:max-w-44 md:max-h-80 bg-gray-900 rounded-[24px] md:rounded-[28px] overflow-hidden border-3 md:border-4 border-gray-800 shadow-xl",children:[d.jsx("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2 w-16 md:w-20 h-2.5 md:h-3 bg-black rounded-b-lg z-10"}),d.jsxs("div",{className:"absolute inset-0 bg-gradient-to-br from-gray-900 to-gray-800 flex flex-col",children:[d.jsx("div",{className:"h-6 md:h-8 bg-gradient-to-r from-primary/80 to-purple-600/80 flex items-center justify-center",children:d.jsx(Yc,{size:"small",useColorTheme:!0})}),d.jsxs("div",{className:"flex-1 p-1.5 md:p-2 flex flex-col",children:[t===0&&d.jsxs(Ke.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex-1 flex flex-col items-center justify-center",children:[d.jsx("div",{className:"text-white text-center mb-2 md:mb-3",children:d.jsx("span",{className:"text-xs",children:d.jsx(Q,{text:"Recording your journal..."})})}),d.jsx("div",{className:"w-full h-10 md:h-12 flex items-center justify-center gap-0.5 mb-3 md:mb-4",children:n.map((o,a)=>d.jsx(Ke.div,{className:"w-0.5 md:w-1 bg-primary rounded-full",initial:{height:2},animate:{height:`${o*40}px`,opacity:o},transition:{duration:.2,repeat:1/0,repeatType:"reverse",delay:a*.02}},a))}),d.jsx(Ke.div,{className:"w-8 h-8 md:w-10 md:h-10 rounded-full bg-red-500 flex items-center justify-center mb-1 md:mb-2",animate:{scale:[1,1.1,1]},transition:{duration:1.5,repeat:1/0,repeatType:"reverse"},children:d.jsx(Vf,{className:"h-4 w-4 md:h-5 md:w-5 text-white"})})]}),t===1&&d.jsxs(Ke.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex-1 flex flex-col items-center justify-center",children:[d.jsx("div",{className:"text-white text-center mb-3 md:mb-4",children:d.jsx("span",{className:"text-xs",children:d.jsx(Q,{text:"Processing your entry..."})})}),d.jsx(Ke.div,{className:"w-10 h-10 md:w-12 md:h-12 rounded-full bg-purple-600/30 flex items-center justify-center",animate:{scale:[1,1.2,1],rotate:[0,360],borderRadius:["50%","40%","50%"]},transition:{duration:3,repeat:1/0,ease:"easeInOut"},children:d.jsx(Qp,{className:"h-5 w-5 md:h-6 md:w-6 text-purple-400"})}),d.jsx("div",{className:"mt-3 md:mt-4 flex gap-1",children:[0,.3,.6].map((o,a)=>d.jsx(Ke.div,{className:"w-1.5 h-1.5 rounded-full bg-primary",animate:{scale:[1,1.5,1]},transition:{duration:1,repeat:1/0,repeatType:"loop",delay:o}},a))})]}),t===2&&d.jsxs(Ke.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex-1 flex flex-col",children:[d.jsx("h3",{className:"text-white text-center mb-1.5 text-xs",children:d.jsx(Q,{text:"Your Journal Insights"})}),d.jsxs("div",{className:"space-y-1",children:[d.jsxs(Ke.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-gray-800/80 p-1 md:p-1.5 rounded-md border border-gray-700",children:[d.jsxs("div",{className:"flex items-center gap-1 md:gap-1.5 mb-0.5",children:[d.jsx("div",{className:"min-w-2.5 h-2.5 md:min-w-3 md:h-3 rounded-full bg-primary/20 flex items-center justify-center",children:d.jsx(Ff,{className:"h-1 w-1 md:h-1.5 md:w-1.5 text-primary"})}),d.jsx("p",{className:"text-white text-xs",children:d.jsx(Q,{text:"Emotional patterns"})})]}),d.jsx("div",{className:"h-[25px] md:h-[30px] mt-0.5",children:d.jsx(vCe,{isPhonePreview:!0})})]}),d.jsxs(Ke.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-gray-800/80 p-1 md:p-1.5 rounded-md border border-gray-700",children:[d.jsxs("div",{className:"flex items-center gap-1 md:gap-1.5 mb-0.5",children:[d.jsx("div",{className:"min-w-2.5 h-2.5 md:min-w-3 md:h-3 rounded-full bg-primary/20 flex items-center justify-center",children:d.jsx(IJ,{className:"h-1 w-1 md:h-1.5 md:w-1.5 text-primary"})}),d.jsx("p",{className:"text-white text-xs",children:d.jsx(Q,{text:"Sentiment trending up"})})]}),d.jsx("div",{className:"h-[25px] md:h-[30px] mt-0.5",children:d.jsx(xCe,{isPhonePreview:!0})})]}),d.jsx(Ke.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.5},className:"bg-gray-800/80 p-1 md:p-1.5 rounded-md border border-gray-700",children:d.jsxs("div",{className:"flex gap-1 md:gap-1.5",children:[d.jsx("div",{className:"min-w-2.5 h-2.5 md:min-w-3 md:h-3 rounded-full bg-primary/20 flex items-center justify-center",children:d.jsx(Ff,{className:"h-1 w-1 md:h-1.5 md:w-1.5 text-primary"})}),d.jsx("p",{className:"text-white text-xs",children:d.jsx(Q,{text:"Sleep pattern improving since last week"})})]})})]}),d.jsxs(Ke.div,{className:"mt-auto mb-1 md:mb-2 w-full bg-primary/20 p-1 md:p-1.5 rounded-md flex items-center justify-between",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8},children:[d.jsx("span",{className:"text-primary text-xs",children:d.jsx(Q,{text:"View full analysis"})}),d.jsx(d0,{className:"h-2 w-2 md:h-2.5 md:w-2.5 text-primary"})]})]})]}),d.jsxs("div",{className:"h-8 md:h-10 border-t border-gray-800 flex justify-around items-center px-1.5 md:px-2",children:[d.jsx("div",{className:"w-5 h-5 md:w-6 md:h-6 rounded-full bg-gray-800 flex items-center justify-center",children:d.jsx(Vf,{className:"h-2.5 w-2.5 md:h-3 md:w-3 text-white"})}),d.jsx("div",{className:"w-5 h-5 md:w-6 md:h-6 rounded-full bg-gray-800 flex items-center justify-center",children:d.jsx(Ff,{className:"h-2.5 w-2.5 md:h-3 md:w-3 text-white"})}),d.jsx("div",{className:"w-5 h-5 md:w-6 md:h-6 rounded-full bg-gray-800 flex items-center justify-center",children:d.jsx(tA,{className:"h-2.5 w-2.5 md:h-3 md:w-3 text-white"})})]})]})]})})};var bCe="AspectRatio",Vee=_.forwardRef((t,e)=>{const{ratio:n=1/1,style:r,...i}=t;return d.jsx("div",{style:{position:"relative",width:"100%",paddingBottom:`${100/n}%`},"data-radix-aspect-ratio-wrapper":"",children:d.jsx(At.div,{...i,ref:e,style:{...r,position:"absolute",top:0,right:0,bottom:0,left:0}})})});Vee.displayName=bCe;var SCe=Vee;const Wee=SCe;_.lazy(()=>cd(()=>import("./3DBackground-CuanDLqg.js"),[]));const ECe=({openAppStore:t,openPlayStore:e})=>{const n=ui(),i=new URLSearchParams(window.location.search).get("mobileDemo")==="true";return n.isMobile,d.jsxs("div",{className:`
        relative w-full bg-gradient-to-br from-blue-50 to-purple-50 
        pt-32 pb-2 md:pt-4 md:pb-1 
        overflow-hidden min-h-[75vh] md:min-h-[78vh] lg:min-h-[82vh] flex items-center
      `,children:[d.jsx("div",{className:"absolute inset-0 z-0 bg-cover bg-center opacity-20",style:{backgroundImage:"url('/lovable-uploads/32abc730-009c-4901-912c-a16e7c2c1ec6.png')"}}),d.jsx("div",{className:"container mx-auto px-4 relative z-10",children:d.jsxs("div",{className:"flex flex-col lg:flex-row items-center gap-2 lg:gap-4",children:[d.jsxs(Ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},className:"w-full lg:w-1/2 text-center lg:text-left",children:[d.jsxs("h1",{className:"text-2xl md:text-3xl lg:text-4xl xl:text-5xl font-bold mb-2 md:mb-3 text-primary leading-tight relative",children:[d.jsx("div",{className:"flex items-center justify-center lg:justify-start gap-3 mb-2",children:d.jsx(Ke.img,{src:"https://soulo.online/lovable-uploads/soulo-icon.png?v=2",alt:"Soulo Icon",className:"w-40 h-40 md:w-50 md:h-50 lg:w-60 lg:h-60 object-contain drop-shadow-lg",initial:{opacity:0,scale:.8,y:10},animate:{opacity:1,scale:1,y:0},transition:{duration:1,delay:.3}})}),d.jsx("span",{className:"block",children:d.jsx(Q,{text:"Express. Reflect. Grow."})})]}),d.jsx("p",{className:"text-base md:text-lg lg:text-xl text-gray-700 mb-3 md:mb-4 max-w-2xl mx-auto lg:mx-0 leading-relaxed",children:d.jsx(Q,{text:"Journaling should be as simple as talking. Use voice and leave the rest to us."})}),d.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 justify-center lg:justify-start mb-2 md:mb-3",children:[d.jsxs(ct,{size:"lg",className:"gap-2 bg-black text-white hover:bg-gray-800 text-sm md:text-base",onClick:t,children:[d.jsx(O3,{className:"h-4 w-4 md:h-5 md:w-5"}),d.jsx(Q,{text:"App Store"})]}),d.jsxs(ct,{size:"lg",className:"gap-2 bg-primary hover:bg-primary/90 text-sm md:text-base",onClick:e,children:[d.jsx(nA,{className:"h-4 w-4 md:h-5 md:w-5"}),d.jsx(Q,{text:"Google Play"})]})]}),d.jsxs("div",{className:"flex items-center justify-center lg:justify-start gap-4 md:gap-6 text-xs md:text-sm text-gray-500",children:[d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx(B3,{className:"h-3 w-3 md:h-4 md:w-4 text-primary"}),d.jsx(Q,{text:"Privacy-Focused"})]}),d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx(Sd,{className:"h-3 w-3 md:h-4 md:w-4 text-primary"}),d.jsx(Q,{text:"14-Day Free Trial"})]})]})]}),d.jsx(Ke.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:1,delay:.3},className:"w-full lg:w-1/2 flex items-center justify-center mt-1 lg:mt-0",children:d.jsx("div",{className:"w-full max-w-[260px] md:max-w-[300px] lg:max-w-sm",children:d.jsx(Wee,{ratio:9/16,className:"w-full",children:d.jsx(wCe,{})})})})]})})]})},_Ce=()=>{const t=[{icon:Vf,title:"Voice Journaling",description:"Simply speak your thoughts. Our AI transcribes and organizes your voice entries automatically."},{icon:Qp,title:"AI-Powered Insights",description:"Get personalized insights about your emotional patterns, mood trends, and personal growth."},{icon:Ff,title:"Emotion Tracking",description:"Visualize your emotional journey with interactive charts and trend analysis over time."},{icon:tA,title:"Smart Chat Assistant",description:"Chat with your journal entries and get meaningful insights from your past reflections."},{icon:B3,title:"Privacy First",description:"Your personal thoughts stay private with end-to-end encryption and secure storage."},{icon:Zu,title:"Quick & Easy",description:"Journal in seconds, not minutes. Perfect for busy lifestyles and daily reflection."}],e={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},n={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5}}};return d.jsx("section",{className:"py-16 md:py-24 bg-white",children:d.jsxs("div",{className:"container mx-auto px-4",children:[d.jsxs(Ke.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6},className:"text-center mb-16",children:[d.jsx("h2",{className:"text-3xl md:text-4xl lg:text-5xl font-bold mb-4 text-gray-900",children:d.jsx(Q,{text:"Why Choose SOULo?"})}),d.jsx("p",{className:"text-lg md:text-xl text-gray-600 max-w-3xl mx-auto",children:d.jsx(Q,{text:"Discover the powerful features that make voice journaling effortless and insightful"})})]}),d.jsx(Ke.div,{variants:e,initial:"hidden",whileInView:"visible",viewport:{once:!0},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:t.map((r,i)=>d.jsxs(Ke.div,{variants:n,className:"bg-gradient-to-br from-gray-50 to-white p-6 rounded-2xl border border-gray-100 hover:shadow-lg transition-shadow duration-300",children:[d.jsx("div",{className:"flex items-center mb-4",children:d.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-xl flex items-center justify-center",children:d.jsx(r.icon,{className:"h-6 w-6 text-primary"})})}),d.jsx("h3",{className:"text-xl font-semibold mb-3 text-gray-900",children:d.jsx(Q,{text:r.title})}),d.jsx("p",{className:"text-gray-600 leading-relaxed",children:d.jsx(Q,{text:r.description})})]},i))})]})})},TCe=()=>{const t=[{step:1,icon:Vf,title:"Speak Your Mind",description:"Just tap record and start talking. Share your thoughts, feelings, and daily experiences naturally."},{step:2,icon:Qp,title:"AI Processing",description:"Our advanced AI transcribes your voice, analyzes emotions, and extracts meaningful insights."},{step:3,icon:Ff,title:"Track & Grow",description:"View your emotional patterns, chat with your entries, and discover personal growth opportunities."}],e={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.2}}},n={hidden:{opacity:0,y:30},visible:{opacity:1,y:0,transition:{duration:.6}}};return d.jsx("section",{className:"py-16 md:py-24 bg-gradient-to-br from-blue-50 to-purple-50",children:d.jsxs("div",{className:"container mx-auto px-4",children:[d.jsxs(Ke.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6},className:"text-center mb-16",children:[d.jsx("h2",{className:"text-3xl md:text-4xl lg:text-5xl font-bold mb-4 text-gray-900",children:d.jsx(Q,{text:"How SOULo Works"})}),d.jsx("p",{className:"text-lg md:text-xl text-gray-600 max-w-3xl mx-auto",children:d.jsx(Q,{text:"Three simple steps to transform your voice into meaningful insights"})})]}),d.jsx(Ke.div,{variants:e,initial:"hidden",whileInView:"visible",viewport:{once:!0},className:"relative",children:d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 lg:gap-12",children:t.map((r,i)=>d.jsxs(Ke.div,{variants:n,className:"relative text-center",children:[i<t.length-1&&d.jsx("div",{className:"hidden md:block absolute top-16 left-1/2 w-full h-0.5 bg-gradient-to-r from-primary/60 to-primary/30 transform translate-x-6 z-0",children:d.jsx(d0,{className:"absolute right-0 top-1/2 transform -translate-y-1/2 translate-x-2 h-4 w-4 text-primary"})}),d.jsxs("div",{className:"relative z-10",children:[d.jsx("div",{className:"w-16 h-16 bg-primary rounded-full flex items-center justify-center text-white font-bold text-xl mx-auto mb-6 shadow-lg",children:r.step}),d.jsx("div",{className:"w-20 h-20 bg-white rounded-2xl flex items-center justify-center mx-auto mb-6 shadow-md border border-gray-100",children:d.jsx(r.icon,{className:"h-8 w-8 text-primary"})}),d.jsx("h3",{className:"text-xl md:text-2xl font-semibold mb-4 text-gray-900",children:d.jsx(Q,{text:r.title})}),d.jsx("p",{className:"text-gray-600 leading-relaxed max-w-sm mx-auto",children:d.jsx(Q,{text:r.description})})]})]},r.step))})})]})})},NE={IN:{countryCode:"IN",country:"India",currency:"INR",price:"99",productId:"premium_monthly_in"},US:{countryCode:"US",country:"United States",currency:"USD",price:"$4.99",productId:"premium_monthly_us"},GB:{countryCode:"GB",country:"United Kingdom",currency:"GBP",price:"3.99",productId:"premium_monthly_gb"},CA:{countryCode:"CA",country:"Canada",currency:"CAD",price:"$5.49",productId:"premium_monthly_ca"},AU:{countryCode:"AU",country:"Australia",currency:"AUD",price:"$6.49",productId:"premium_monthly_au"},DE:{countryCode:"DE",country:"Germany",currency:"EUR",price:"4.99",productId:"premium_monthly_de"},FR:{countryCode:"FR",country:"France",currency:"EUR",price:"4.99",productId:"premium_monthly_fr"},IT:{countryCode:"IT",country:"Italy",currency:"EUR",price:"4.99",productId:"premium_monthly_it"},ES:{countryCode:"ES",country:"Spain",currency:"EUR",price:"4.99",productId:"premium_monthly_es"},NL:{countryCode:"NL",country:"Netherlands",currency:"EUR",price:"4.99",productId:"premium_monthly_nl"},SE:{countryCode:"SE",country:"Sweden",currency:"EUR",price:"6.49",productId:"premium_monthly_se"},NO:{countryCode:"NO",country:"Norway",currency:"EUR",price:"6.49",productId:"premium_monthly_no"},DK:{countryCode:"DK",country:"Denmark",currency:"EUR",price:"6.49",productId:"premium_monthly_dk"},AE:{countryCode:"AE",country:"UAE",currency:"AED",price:"19.99 AED",productId:"premium_monthly_ae"},SA:{countryCode:"SA",country:"Saudi Arabia",currency:"SAR",price:"19.99 SAR",productId:"premium_monthly_sa"},JP:{countryCode:"JP",country:"Japan",currency:"JPY",price:"600",productId:"premium_monthly_jp"},KR:{countryCode:"KR",country:"South Korea",currency:"KRW",price:"5,900",productId:"premium_monthly_kr"},SG:{countryCode:"SG",country:"Singapore",currency:"USD",price:"$1.49",productId:"premium_monthly_sg"},MY:{countryCode:"MY",country:"Malaysia",currency:"USD",price:"$1.49",productId:"premium_monthly_my"},TH:{countryCode:"TH",country:"Thailand",currency:"USD",price:"$1.49",productId:"premium_monthly_th"},MX:{countryCode:"MX",country:"Mexico",currency:"MXN",price:"MX$29.99",productId:"premium_monthly_mx"},BR:{countryCode:"BR",country:"Brazil",currency:"BRL",price:"R$9.99",productId:"premium_monthly_br"},ZA:{countryCode:"ZA",country:"South Africa",currency:"USD",price:"$1.49",productId:"premium_monthly_za"},NG:{countryCode:"NG",country:"Nigeria",currency:"USD",price:"$0.99",productId:"premium_monthly_ng"},DEFAULT:{countryCode:"DEFAULT",country:"Global",currency:"USD",price:"$4.99",productId:"premium_monthly_default"}},Y4=()=>{const{locationData:t,isLoading:e,error:n}=tve(),[r,i]=_.useState(NE.DEFAULT);return _.useEffect(()=>{if(t&&t.country){const o=t.country,a=NE[o]||NE.DEFAULT;console.log("[useLocationPricing] Setting pricing based on location:",{countryCode:o,currency:t.currency,selectedPricing:a}),i(a)}else e||i(NE.DEFAULT)},[t,e]),{pricing:r,isLoading:e,error:n,refreshLocation:async()=>{}}},CCe=({openAppStore:t,openPlayStore:e})=>{const{pricing:n,isLoading:r}=Y4(),i=[{name:"Free Trial",price:"Free",period:"14 days",description:"Perfect for getting started with voice journaling",features:["Unlimited voice entries","Basic emotion analysis","7 days of history","Mobile app access"],popular:!1,cta:"Start Free Trial"},{name:"Premium",price:r?"...":n.price,period:"month",description:"Complete voice journaling experience with AI insights",features:["Everything in Free Trial","Advanced AI insights","Unlimited history","Emotion trend analysis","Smart chat with entries","Export capabilities","Priority support"],popular:!0,cta:"Get Premium"},{name:"Yearly",price:r?"...":o(n.price),period:"year",originalPrice:r?void 0:a(n.price),description:"Best value for serious journalers",features:["Everything in Premium","33% savings vs monthly","Advanced analytics","Custom themes","Data insights reports","Early access to features"],popular:!1,cta:"Save 33%"}];function o(c){if(!c||c==="Free")return c;const u=c.match(/^([^\d]+)?(\d+(?:\.\d+)?)/);if(!u)return c;const f=u[1]||"",h=parseFloat(u[2]),p=Math.round(h*12*.67*100)/100;return`${f}${p}`}function a(c){if(!c||c==="Free")return c;const u=c.match(/^([^\d]+)?(\d+(?:\.\d+)?)/);if(!u)return c;const f=u[1]||"",h=parseFloat(u[2]),p=Math.round(h*12*100)/100;return`${f}${p}`}const s={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},l={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5}}};return d.jsx("section",{className:"py-16 md:py-24 bg-white",children:d.jsxs("div",{className:"container mx-auto px-4",children:[d.jsxs(Ke.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6},className:"text-center mb-16",children:[d.jsx("h2",{className:"text-3xl md:text-4xl lg:text-5xl font-bold mb-4 text-gray-900",children:d.jsx(Q,{text:"Choose Your Plan"})}),d.jsx("p",{className:"text-lg md:text-xl text-gray-600 max-w-3xl mx-auto",children:d.jsx(Q,{text:"Start your voice journaling journey with our 14-day free trial"})})]}),d.jsx(Ke.div,{variants:s,initial:"hidden",whileInView:"visible",viewport:{once:!0},className:"grid grid-cols-1 md:grid-cols-3 gap-8 max-w-6xl mx-auto",children:i.map((c,u)=>d.jsxs(Ke.div,{variants:l,className:`relative rounded-2xl border-2 p-8 ${c.popular?"border-primary bg-gradient-to-br from-primary/5 to-purple/5 shadow-xl scale-105":"border-gray-200 bg-white hover:border-primary/50"} transition-all duration-300`,children:[c.popular&&d.jsx("div",{className:"absolute -top-4 left-1/2 transform -translate-x-1/2",children:d.jsxs("div",{className:"bg-primary text-white px-4 py-1 rounded-full text-sm font-medium flex items-center gap-1",children:[d.jsx($3,{className:"h-4 w-4"}),d.jsx(Q,{text:"Most Popular"})]})}),d.jsxs("div",{className:"text-center mb-6",children:[d.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:d.jsx(Q,{text:c.name})}),d.jsxs("div",{className:"mb-2",children:[c.originalPrice&&d.jsx("span",{className:"text-lg text-gray-400 line-through mr-2",children:c.originalPrice}),d.jsx("span",{className:"text-4xl font-bold text-gray-900",children:c.price}),c.price!=="Free"&&c.price!=="..."&&d.jsxs("span",{className:"text-gray-600",children:["/",c.period]})]}),d.jsx("p",{className:"text-gray-600",children:d.jsx(Q,{text:c.description})})]}),d.jsx("ul",{className:"space-y-3 mb-8",children:c.features.map((f,h)=>d.jsxs("li",{className:"flex items-center gap-3",children:[d.jsx(Sd,{className:"h-5 w-5 text-primary flex-shrink-0"}),d.jsx("span",{className:"text-gray-700",children:d.jsx(Q,{text:f})})]},h))}),d.jsx(ct,{className:`w-full ${c.popular?"bg-primary hover:bg-primary/90":"bg-gray-900 hover:bg-gray-800"}`,size:"lg",onClick:t,disabled:r,children:d.jsx(Q,{text:c.cta})})]},u))}),d.jsxs(Ke.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6,delay:.3},className:"text-center mt-12",children:[d.jsx("p",{className:"text-gray-600",children:d.jsx(Q,{text:"All plans include a 14-day free trial. Cancel anytime."})}),!r&&n.country!=="Global"&&d.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["Prices shown for ",n.country," in ",n.currency]})]})]})})},ACe=()=>{const t=[{name:"Sarah Chen",role:"Therapist",image:"https://images.unsplash.com/photo-1494790108755-2616b612b1-47c2-a86d-71b6.jpg?w=150",content:"SOULo has revolutionized how I track my emotional wellbeing. The AI insights help me understand patterns I never noticed before.",rating:5},{name:"Marcus Rodriguez",role:"Student",image:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=150",content:"As someone who struggles with traditional journaling, SOULo makes it so easy. Just speak and the app does the rest!",rating:5},{name:"Dr. Emily Watson",role:"Psychologist",image:"https://images.unsplash.com/photo-1559839734-2b71ea197ec2?w=150",content:"I recommend SOULo to my clients. The voice journaling approach removes barriers and the insights are genuinely helpful.",rating:5},{name:"Ahmed Hassan",role:"Executive",image:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=150",content:"The convenience is unmatched. I can journal during my commute and the AI gives me insights I can actually use.",rating:5},{name:"Lisa Park",role:"Teacher",image:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=150",content:"SOULo helped me process a difficult period in my life. The emotional tracking showed me how much I've grown.",rating:5},{name:"David Kumar",role:"Designer",image:"https://images.unsplash.com/photo-1500648767791-00dcc994a43e?w=150",content:"The chat feature is amazing. I can ask questions about my own thoughts and get meaningful insights back.",rating:5}],e={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},n={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5}}};return d.jsx("section",{className:"py-16 md:py-24 bg-gradient-to-br from-gray-50 to-white",children:d.jsxs("div",{className:"container mx-auto px-4",children:[d.jsxs(Ke.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6},className:"text-center mb-16",children:[d.jsx("h2",{className:"text-3xl md:text-4xl lg:text-5xl font-bold mb-4 text-gray-900",children:d.jsx(Q,{text:"What Our Users Say"})}),d.jsx("p",{className:"text-lg md:text-xl text-gray-600 max-w-3xl mx-auto",children:d.jsx(Q,{text:"Join thousands who have transformed their mental wellness with voice journaling"})})]}),d.jsx(Ke.div,{variants:e,initial:"hidden",whileInView:"visible",viewport:{once:!0},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:t.map((r,i)=>d.jsxs(Ke.div,{variants:n,className:"bg-white rounded-2xl p-6 shadow-lg hover:shadow-xl transition-shadow duration-300 border border-gray-100",children:[d.jsx("div",{className:"flex items-center gap-1 mb-4",children:[...Array(r.rating)].map((o,a)=>d.jsx($3,{className:"h-5 w-5 fill-yellow-400 text-yellow-400"},a))}),d.jsx(PJ,{className:"h-8 w-8 text-primary/30 mb-4"}),d.jsxs("p",{className:"text-gray-700 mb-6 leading-relaxed",children:['"',r.content,'"']}),d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("img",{src:r.image,alt:r.name,className:"w-12 h-12 rounded-full object-cover"}),d.jsxs("div",{children:[d.jsx("div",{className:"font-semibold text-gray-900",children:r.name}),d.jsx("div",{className:"text-sm text-gray-600",children:r.role})]})]})]},i))})]})})},MCe=({openAppStore:t,openPlayStore:e})=>d.jsxs("section",{className:"py-16 md:py-24 bg-gradient-to-br from-primary via-purple-600 to-blue-600 relative overflow-hidden",children:[d.jsxs("div",{className:"absolute inset-0 opacity-10",children:[d.jsx("div",{className:"absolute top-10 left-10 w-20 h-20 border border-white rounded-full"}),d.jsx("div",{className:"absolute top-32 right-20 w-32 h-32 border border-white rounded-full"}),d.jsx("div",{className:"absolute bottom-20 left-1/4 w-16 h-16 border border-white rounded-full"}),d.jsx("div",{className:"absolute bottom-32 right-10 w-24 h-24 border border-white rounded-full"})]}),d.jsx("div",{className:"container mx-auto px-4 relative z-10",children:d.jsxs(Ke.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.8},className:"text-center max-w-4xl mx-auto",children:[d.jsx("h2",{className:"text-3xl md:text-4xl lg:text-5xl font-bold mb-6 text-white",children:d.jsx(Q,{text:"Ready to Transform Your Mental Wellness?"})}),d.jsx("p",{className:"text-lg md:text-xl text-white/90 mb-8 leading-relaxed",children:d.jsx(Q,{text:"Join thousands who have discovered the power of voice journaling. Start your free trial today and experience the difference."})}),d.jsxs(Ke.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6,delay:.2},className:"flex flex-col sm:flex-row gap-4 justify-center mb-8",children:[d.jsxs(ct,{size:"lg",className:"gap-2 bg-white text-primary hover:bg-gray-100 text-lg px-8 py-4 h-auto",onClick:t,children:[d.jsx(O3,{className:"h-5 w-5"}),d.jsx(Q,{text:"Download for iOS"})]}),d.jsxs(ct,{size:"lg",className:"gap-2 bg-black text-white hover:bg-gray-800 text-lg px-8 py-4 h-auto",onClick:e,children:[d.jsx(nA,{className:"h-5 w-5"}),d.jsx(Q,{text:"Download for Android"})]})]}),d.jsxs(Ke.div,{initial:{opacity:0},whileInView:{opacity:1},viewport:{once:!0},transition:{duration:.6,delay:.4},className:"flex items-center justify-center gap-2 text-white/80",children:[d.jsx("span",{className:"text-sm",children:d.jsx(Q,{text:"Free 14-day trial  No credit card required"})}),d.jsx(d0,{className:"h-4 w-4 animate-pulse"})]})]})})]}),Gee=()=>{const{pathname:t}=window.location;t==="/app/home"||t==="/app"||(document.body.classList.remove("tutorial-active"),document.body.style.overflow="",document.body.style.position="",document.body.style.touchAction="",document.body.style.width="",document.body.style.height="",document.body.style.top="",document.body.style.left="",console.log("ScrollRestoration: Forced scroll enabling"))},PCe=()=>{ve.useEffect(()=>{console.log("HomePage: Forcing scroll enabling for website"),Gee(),document.body.style.overflow="",document.body.style.position="",document.body.style.width="",document.body.style.height="",document.body.style.top="",document.body.style.left=""},[]);const t=()=>{const n=/iPad|iPhone|iPod/.test(navigator.userAgent),r="https://apps.apple.com/app/soulo";n?(window.location.href="itms-apps://itunes.apple.com/app/soulo",setTimeout(()=>{window.location.href=r},500)):window.open(r,"_blank")},e=()=>{const n=/Android/.test(navigator.userAgent),r="https://play.google.com/store/apps/details?id=com.soulo.app";n?(window.location.href="market://details?id=com.soulo.app",setTimeout(()=>{window.location.href=r},500)):window.open(r,"_blank")};return console.log('HomePage: Rendering the website home page at route "/"'),d.jsxs("div",{className:"min-h-screen bg-white overflow-x-hidden",children:[d.jsx(Yy,{}),d.jsx(ECe,{openAppStore:t,openPlayStore:e}),d.jsx("section",{id:"features",children:d.jsx(_Ce,{})}),d.jsx("section",{id:"how-it-works",children:d.jsx(TCe,{})}),d.jsx("section",{id:"pricing",children:d.jsx(CCe,{openAppStore:t,openPlayStore:e})}),d.jsx(ACe,{}),d.jsx("section",{id:"download",children:d.jsx(MCe,{openAppStore:t,openPlayStore:e})}),d.jsx(pv,{})]})},kCe=()=>{const t=Za(),{user:e}=or(),{colorTheme:n}=Zr(),r=ui(),{onboardingComplete:i,checkOnboardingStatus:o}=KC(),a=cJ(),{translate:s}=In(),l=new URLSearchParams(window.location.search),c=l.get("mobileDemo")==="true";return r.isMobile,_.useEffect(()=>{(async()=>{if(e)try{if(console.log("[Index] Checking user status for tutorial navigation, user:",e.id),await o(),i){console.log("[Index] User completed onboarding, checking tutorial status");const{data:f,error:h}=await Ze.from("profiles").select("tutorial_completed, tutorial_step").eq("id",e.id).maybeSingle();if(h){console.error("[Index] Error checking tutorial status:",h);return}if(!f||f.tutorial_completed!=="YES"){if(console.log("[Index] User has not completed tutorial - TutorialContext will handle startup"),!f||f.tutorial_completed!=="NO"){console.log("[Index] Setting tutorial_completed to NO for proper detection");const{error:p}=await Ze.from("profiles").upsert({id:e.id,tutorial_completed:"NO",tutorial_step:(f==null?void 0:f.tutorial_step)||0});p&&console.error("[Index] Error updating tutorial status:",p)}console.log("[Index] Letting TutorialContext handle tutorial startup and navigation")}else console.log("[Index] User has completed tutorial, normal app flow")}else console.log("[Index] User has not completed onboarding yet")}catch(f){console.error("[Index] Error in handleTutorialNavigation:",f)}})()},[e,o,i]),_.useEffect(()=>{l.has("app")&&(console.log("[Index] User explicitly requested app with ?app parameter"),e?(console.log("[Index] User is logged in, redirecting to appropriate app page"),t(i?"/app/home":"/app/onboarding")):t("/app/auth")),l.has("insights")&&t("/app/insights")},[e,t,l,i]),_.useEffect(()=>{(async()=>{if(s)try{console.log("[Index] Pre-translating common strings..."),await s("Welcome to Soul Symphony","en"),await s("We've detected you're on a slow connection. We're loading a lightweight version of our site for better performance.","en"),await s("Loading optimized content...","en"),await s("You're currently offline","en"),await s("Please check your connection to access all features. Some content may still be available from cache.","en"),console.log("[Index] Pre-translation complete")}catch(f){console.error("[Index] Error pre-translating index page strings:",f)}})(),a.speed==="slow"&&console.log("[Index] Slow network detected, optimizing experience...")},[a.speed,s]),console.log("[Index] Rendering Index.tsx component, path:",window.location.pathname,{hasUser:!!e,onboardingComplete:i}),d.jsx(d.Fragment,{children:d.jsx(o0e,{lowBandwidthFallback:d.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4",children:[d.jsx("h1",{className:"text-2xl font-bold mb-4",children:d.jsx(Q,{text:"Welcome to Soul Symphony",forceTranslate:!0})}),d.jsx("p",{className:"text-center mb-6",children:d.jsx(Q,{text:"We've detected you're on a slow connection. We're loading a lightweight version of our site for better performance.",forceTranslate:!0})}),d.jsx("div",{className:"animate-pulse",children:d.jsx(Q,{text:"Loading optimized content...",forceTranslate:!0})})]}),offlineFallback:d.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4",children:[d.jsx("h1",{className:"text-2xl font-bold mb-4",children:d.jsx(Q,{text:"You're currently offline",forceTranslate:!0})}),d.jsx("p",{className:"text-center mb-6",children:d.jsx(Q,{text:"Please check your connection to access all features. Some content may still be available from cache.",forceTranslate:!0})})]}),children:d.jsx(PCe,{})})})};class NCe{constructor(){Mt(this,"state",{isNavigating:!1,targetRoute:null,currentStep:0,timeoutId:null,transitionProtection:!1,transitionTimeoutId:null});Mt(this,"listeners",[])}startNavigation(e,n){console.log(`[NavigationManager] Starting navigation to ${e} for step ${n}`),this.state.timeoutId&&clearTimeout(this.state.timeoutId),this.state.transitionTimeoutId&&clearTimeout(this.state.transitionTimeoutId),this.state={...this.state,isNavigating:!0,targetRoute:e,currentStep:n,transitionProtection:!1,timeoutId:window.setTimeout(()=>{console.warn("[NavigationManager] Navigation timeout - forcing completion"),this.completeNavigation()},5e3),transitionTimeoutId:null},this.notifyListeners()}startStepTransition(e){console.log(`[NavigationManager] Starting step transition protection for step ${e}`),this.state.transitionTimeoutId&&clearTimeout(this.state.transitionTimeoutId),this.state.transitionProtection=!0,this.state.currentStep=e,this.notifyListeners(),this.state.transitionTimeoutId=window.setTimeout(()=>{this.state.transitionProtection&&(console.log("[NavigationManager] Auto-clearing step transition protection after 3 seconds"),this.clearStepTransition())},3e3)}clearStepTransition(){console.log("[NavigationManager] Clearing step transition protection"),this.state.transitionTimeoutId&&(clearTimeout(this.state.transitionTimeoutId),this.state.transitionTimeoutId=null),this.state.transitionProtection=!1,this.notifyListeners()}completeNavigation(){console.log("[NavigationManager] Completing navigation"),this.state.timeoutId&&clearTimeout(this.state.timeoutId),this.state={isNavigating:!1,targetRoute:null,currentStep:0,timeoutId:null,transitionProtection:!1,transitionTimeoutId:null},this.notifyListeners()}isNavigating(){return this.state.isNavigating}isStepTransitionProtected(){return this.state.transitionProtection}getState(){return{...this.state}}subscribe(e){return this.listeners.push(e),()=>{const n=this.listeners.indexOf(e);n>-1&&this.listeners.splice(n,1)}}notifyListeners(){this.listeners.forEach(e=>{try{e(this.getState())}catch(n){console.error("[NavigationManager] Error notifying listener:",n)}})}forceReset(){console.warn("[NavigationManager] Force resetting navigation state"),this.state.timeoutId&&clearTimeout(this.state.timeoutId),this.state.transitionTimeoutId&&clearTimeout(this.state.transitionTimeoutId),this.state={isNavigating:!1,targetRoute:null,currentStep:0,timeoutId:null,transitionProtection:!1,transitionTimeoutId:null},this.notifyListeners()}}const to=new NCe;class RCe{constructor(){Mt(this,"state",{currentStep:0,retryCount:0,maxRetries:5,retryDelay:200,isHighlighting:!1})}async waitForDOMReady(){return new Promise(e=>{const n=()=>{const r=document.readyState==="complete",i=!!document.body,o=document.querySelectorAll("*").length>10;console.log("[HighlightingManager] DOM readiness check:",{documentReady:r,hasBody:i,hasElements:o,elementCount:document.querySelectorAll("*").length}),r&&i&&o?e(!0):setTimeout(n,50)};n(),setTimeout(()=>e(!1),2e3)})}validateElementExists(e,n){var r;console.log(`[HighlightingManager] Validating element existence for step ${n}:`,e);for(const i of e)try{const o=document.querySelector(i);if(o&&o instanceof HTMLElement){const a=((r=o.textContent)==null?void 0:r.toLowerCase().trim())||"",s=o.offsetParent!==null,l=o.offsetWidth>0&&o.offsetHeight>0;if(console.log(`[HighlightingManager] Found element with selector "${i}":`,{element:o,text:a,isVisible:s,hasSize:l,classes:Array.from(o.classList),style:o.style.cssText}),n===3&&!a.includes("new")&&!a.includes("record")&&!a.includes("entry")){console.warn(`[HighlightingManager] Step 3 element doesn't contain expected keywords: "${a}"`);continue}if(n===4&&!a.includes("past")&&!a.includes("entries")&&!a.includes("history")){console.warn(`[HighlightingManager] Step 4 element doesn't contain expected keywords: "${a}"`);continue}return o}}catch(o){console.warn(`[HighlightingManager] Error checking selector "${i}":`,o)}return console.warn(`[HighlightingManager] No valid element found for step ${n} with selectors:`,e),null}validateClassPersistence(e,n,r){const i=Array.from(e.classList),o=n.every(a=>i.includes(a));return console.log(`[HighlightingManager] Class persistence check for step ${r}:`,{element:e.tagName,expectedClasses:n,currentClasses:i,hasAllClasses:o}),o||(console.warn(`[HighlightingManager] Missing classes detected for step ${r}. Re-applying...`),n.forEach(a=>{e.classList.contains(a)||(e.classList.add(a),console.log(`[HighlightingManager] Re-added class "${a}" to element`))})),o}applyForcedVisibility(e,n){console.log(`[HighlightingManager] Applying forced visibility for step ${n}`);const r={display:"block",visibility:"visible",opacity:"1",pointerEvents:"auto",position:"relative",zIndex:"30000"};if(n===3||n===4){const i={...r,boxShadow:"0 0 50px 30px var(--color-theme)",animation:"ultra-bright-pulse 1.5s infinite alternate",outline:"3px solid white",transform:"translateZ(0) scale(1.05)",border:"3px solid white",backgroundColor:"rgba(26, 31, 44, 0.98)",backdropFilter:"brightness(1.3)",borderRadius:"8px",color:"white",textShadow:"0 0 4px rgba(0,0,0,0.8)"};Object.entries(i).forEach(([a,s])=>{try{e.style[a]=s}catch(l){console.warn(`[HighlightingManager] Could not set style ${a}:`,l)}}),e.querySelectorAll("*").forEach(a=>{a instanceof HTMLElement&&(a.style.color="white",a.style.textShadow="0 0 4px rgba(0,0,0,0.8)")})}else Object.entries(r).forEach(([i,o])=>{try{e.style[i]=o}catch(a){console.warn(`[HighlightingManager] Could not set style ${i}:`,a)}})}async applyStaggeredHighlighting(e,n,r){if(this.state.isHighlighting)return console.log("[HighlightingManager] Already highlighting, skipping duplicate request"),!1;this.state.isHighlighting=!0,this.state.currentStep=r,this.state.retryCount=0;try{for(console.log(`[HighlightingManager] Starting staggered highlighting for step ${r}`),await this.waitForDOMReady()||console.warn("[HighlightingManager] DOM not ready after timeout, proceeding anyway");this.state.retryCount<this.state.maxRetries;){console.log(`[HighlightingManager] Highlighting attempt ${this.state.retryCount+1}/${this.state.maxRetries} for step ${r}`),!to.isStepTransitionProtected()&&r===to.getState().currentStep&&(console.log("[HighlightingManager] Transition protection cleared, restarting protection"),to.startStepTransition(r));const o=this.validateElementExists(e,r);if(o){this.removeCompetingClasses(o,r);for(let a=0;a<n.length;a++){const s=n[a];o.classList.add(s),console.log(`[HighlightingManager] Applied class "${s}" to step ${r} element`),a<n.length-1&&await new Promise(l=>setTimeout(l,50))}return this.applyForcedVisibility(o,r),setTimeout(()=>{this.state.currentStep===r&&this.validateClassPersistence(o,n,r)},300),console.log(`[HighlightingManager] Successfully highlighted element for step ${r}`),this.state.isHighlighting=!1,!0}this.state.retryCount++,this.state.retryCount<this.state.maxRetries&&(console.log(`[HighlightingManager] Element not found, retrying in ${this.state.retryDelay}ms`),await new Promise(a=>setTimeout(a,this.state.retryDelay)))}return console.error(`[HighlightingManager] Failed to highlight element for step ${r} after ${this.state.maxRetries} attempts`),this.state.isHighlighting=!1,!1}catch(i){return console.error(`[HighlightingManager] Error in staggered highlighting for step ${r}:`,i),this.state.isHighlighting=!1,!1}}removeCompetingClasses(e,n){const r=["tutorial-target","tutorial-button-highlight","record-entry-tab","entries-tab","chat-question-highlight","insights-header-highlight","emotion-chart-highlight","mood-calendar-highlight","soul-net-highlight","empty-chat-suggestion","tutorial-record-entry-button"];console.log(`[HighlightingManager] Removing competing classes for step ${n}`),r.forEach(o=>{e.classList.contains(o)&&(e.classList.remove(o),console.log(`[HighlightingManager] Removed competing class "${o}"`))}),["boxShadow","animation","border","transform","outline"].forEach(o=>{try{e.style[o]=""}catch(a){console.warn(`[HighlightingManager] Could not reset style ${o}:`,a)}})}reset(){console.log("[HighlightingManager] Resetting highlighting state"),this.state={currentStep:0,retryCount:0,maxRetries:5,retryDelay:200,isHighlighting:!1}}getState(){return{...this.state}}}const _s=new RCe,qee=[".tutorial-record-entry-button",'button[data-tutorial-target="record-entry"]',"button:has(.lucide-plus)",'button[id="new-entry-button"]',".record-entry-button",'button:contains("New entry")','button:contains("Record")','button:contains("+")','[data-value="record"] button','button[role="tab"][data-value="record"]',".journal-entries-header button"],Yee=['button[role="tab"][data-value="entries"]','[data-value="entries"]','button[data-tutorial-tab="entries"]',".entries-tab",'button:contains("Past entries")','button:contains("Entries")','button:contains("History")','[role="tablist"] button:nth-child(2)',".journal-tabs button:nth-child(2)"],Xee=[".empty-chat-suggestion",".chat-suggestion-button",'button:contains("How am I feeling")','button:contains("What are my")','button:contains("Tell me about")',".chat-suggestions button",".empty-state button",".chat-questions button"],Kee=[".insights-container h1",'h1:contains("Insights")',".insights-header","main h1",'[class*="insights"] h1'],Jee=[".recharts-responsive-container",".emotion-chart",".chart-container",'[class*="chart"]','svg[class*="recharts"]'],Zee=['[class*="MoodCalendar"]',".mood-calendar",".calendar-grid",'[class*="calendar"]',".mood-visualization"],Qee=["canvas",".soul-net-container",".soulnet-visualization",'[class*="soul-net"]',".bg-background.rounded-xl.shadow-sm.border.w-full"],_y=(t,e)=>{console.log(`[ElementFinder] Finding and highlighting element with class "${e}"`);let n=0;e.includes("record-entry")?n=3:e.includes("entries")?n=4:e.includes("chat-question")?n=5:e.includes("insights-header")?n=6:e.includes("emotion-chart")?n=7:e.includes("mood-calendar")?n=8:e.includes("soul-net")&&(n=9);const r=["tutorial-target",e];return _s.applyStaggeredHighlighting(t,r,n),!0},z6=(t,e)=>{console.log(`[ElementFinder] Applying tutorial highlight with class "${e}"`);try{t.classList.add("tutorial-target",e),e.includes("record-entry")||e.includes("entries")?(Object.entries({zIndex:"30000",position:"relative",boxShadow:"0 0 50px 30px var(--color-theme)",animation:"ultra-bright-pulse 1.5s infinite alternate",outline:"3px solid white",opacity:"1",transform:"translateZ(0) scale(1.05)",border:"3px solid white",backgroundColor:"rgba(26, 31, 44, 0.98)",backdropFilter:"brightness(1.3)",borderRadius:"8px",visibility:"visible",pointerEvents:"auto",color:"white",textShadow:"0 0 4px rgba(0,0,0,0.8)"}).forEach(([i,o])=>{try{t.style[i]=o}catch(a){console.warn(`[ElementFinder] Could not set tab style ${i}:`,a)}}),t.querySelectorAll("*").forEach(i=>{i instanceof HTMLElement&&(i.style.color="white",i.style.textShadow="0 0 4px rgba(0,0,0,0.8)")})):e.includes("chat-question")?Object.entries({zIndex:"8000",position:"relative",boxShadow:"0 0 40px 25px var(--color-theme)",animation:"ultra-strong-pulse 1.5s infinite alternate",outline:"2px solid white",opacity:"1",visibility:"visible",transform:"translateZ(0) scale(1.05)",border:"2px solid white",pointerEvents:"auto",cursor:"pointer",display:"block",maxHeight:"none",overflow:"visible"}).forEach(([r,i])=>{try{t.style[r]=i}catch(o){console.warn(`[ElementFinder] Could not set chat style ${r}:`,o)}}):Object.entries({zIndex:"10000",position:"relative",boxShadow:"0 0 35px 20px var(--color-theme)",animation:"strong-tab-pulse 1.5s infinite alternate",outline:"2px solid white",opacity:"1",transform:"translateZ(0) scale(1.01)",border:"2px solid white",visibility:"visible"}).forEach(([r,i])=>{try{t.style[r]=i}catch(o){console.warn(`[ElementFinder] Could not set general style ${r}:`,o)}}),console.log(`[ElementFinder] Successfully applied highlight "${e}" to element`)}catch(n){console.error("[ElementFinder] Error applying tutorial highlight:",n)}},ete=()=>{console.group("[ElementFinder] Potential tutorial elements in DOM:");try{const t=document.querySelectorAll('button[role="tab"], [data-value], .tab');console.log("Tab elements found:",t.length),t.forEach((i,o)=>{var c;const a=((c=i.textContent)==null?void 0:c.trim())||"",s=i.getAttribute("data-value")||"",l=Array.from(i.classList);console.log(`Tab ${o+1}:`,{element:i,text:a,dataValue:s,classes:l})});const e=document.querySelectorAll("button");console.log("Button elements found:",e.length),e.forEach((i,o)=>{var a;if(o<10){const s=((a=i.textContent)==null?void 0:a.trim())||"",l=i.id||"",c=Array.from(i.classList);console.log(`Button ${o+1}:`,{element:i,text:s,id:l,classes:c})}});const n=document.querySelectorAll('[class*="chat"], [class*="suggestion"], [class*="empty"]');console.log("Chat-related elements found:",n.length),n.forEach((i,o)=>{var l;const a=((l=i.textContent)==null?void 0:l.trim().substring(0,50))||"",s=Array.from(i.classList);console.log(`Chat element ${o+1}:`,{element:i,text:a,classes:s})});const r=document.querySelectorAll('h1, .recharts-responsive-container, canvas, [class*="calendar"]');console.log("Insights-related elements found:",r.length),r.forEach((i,o)=>{var c;const a=i.tagName.toLowerCase(),s=((c=i.textContent)==null?void 0:c.trim().substring(0,30))||"",l=Array.from(i.classList);console.log(`Insights element ${o+1}:`,{tag:a,element:i,text:s,classes:l})})}catch(t){console.error("[ElementFinder] Error logging potential elements:",t)}console.groupEnd()},$p=["tutorial-target","tutorial-button-highlight","record-entry-tab","entries-tab","chat-question-highlight","insights-header-highlight","emotion-chart-highlight","mood-calendar-highlight","soul-net-highlight","empty-chat-suggestion","tutorial-record-entry-button"],Xy=["boxShadow","animation","border","transform","zIndex","position","visibility","opacity","backgroundColor","color","textShadow","top","left","right","bottom","margin","padding","display","backgroundImage","borderRadius","outline","backdropFilter","filter","cursor","pointerEvents"],RE=()=>{console.log("[TutorialCleanup] Starting comprehensive cleanup");try{const t=document.querySelectorAll($p.map(n=>`.${n}`).join(", ")+', [class*="tutorial-"], [data-tutorial-target]');console.log(`[TutorialCleanup] Found ${t.length} elements with tutorial classes`),t.forEach(n=>{n instanceof HTMLElement&&($p.forEach(i=>{n.classList.remove(i)}),Xy.forEach(i=>{try{n.style[i]=""}catch(o){console.warn(`[TutorialCleanup] Could not reset style ${i}:`,o)}}),n.querySelectorAll("*").forEach(i=>{i instanceof HTMLElement&&($p.forEach(o=>{i.classList.remove(o)}),Xy.forEach(o=>{try{i.style[o]=""}catch{}}))}))});const e=document.documentElement;e.style.removeProperty("--tutorial-highlight-color"),e.style.removeProperty("--tutorial-shadow"),e.style.removeProperty("--tutorial-animation"),ICe(),jCe()}catch(t){console.error("[TutorialCleanup] Error during comprehensive cleanup:",t)}},jCe=()=>{console.log("[TutorialCleanup] Cleaning up body element");try{document.body.classList.remove("tutorial-active"),document.body.removeAttribute("data-current-step"),["overflow","touchAction","position","width","height","top","left"].forEach(e=>{try{document.body.style[e]=""}catch(n){console.warn(`[TutorialCleanup] Could not reset body style ${e}:`,n)}})}catch(t){console.error("[TutorialCleanup] Error cleaning up body element:",t)}},ICe=()=>{console.log("[TutorialCleanup] Running specific element cleanup");try{const t=document.querySelector(".journal-arrow-button");if(t instanceof HTMLElement){console.log("[TutorialCleanup] Resetting arrow button"),Object.entries({position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:"40",margin:"0",padding:"0"}).forEach(([o,a])=>{try{t.style[o]=a}catch(s){console.warn(`[TutorialCleanup] Could not set arrow button style ${o}:`,s)}});const i=t.querySelector("button");i instanceof HTMLElement&&Xy.forEach(o=>{try{i.style[o]=""}catch{}})}['button[role="tab"]','[data-value="record"]','[data-value="entries"]',".record-entry-tab",".entries-tab",".tutorial-record-entry-button"].forEach(r=>{try{document.querySelectorAll(r).forEach(o=>{o instanceof HTMLElement&&($p.forEach(a=>{o.classList.remove(a)}),Xy.forEach(a=>{try{o.style[a]=""}catch{}}))})}catch(i){console.warn(`[TutorialCleanup] Error cleaning selector ${r}:`,i)}}),[".empty-chat-suggestion",".chat-suggestion-button",".smart-chat-container",".mobile-chat-interface",".chat-messages-container",".chat-input-container"].forEach(r=>{try{document.querySelectorAll(r).forEach(o=>{o instanceof HTMLElement&&($p.forEach(a=>{o.classList.remove(a)}),Xy.forEach(a=>{try{o.style[a]=""}catch{}}))})}catch(i){console.warn(`[TutorialCleanup] Error cleaning chat selector ${r}:`,i)}})}catch(t){console.error("[TutorialCleanup] Error in specific element cleanup:",t)}},UO=()=>{console.log("[TutorialCleanup] Starting staggered cleanup process"),RE(),setTimeout(()=>{console.log("[TutorialCleanup] Stage 2 cleanup"),RE()},50),setTimeout(()=>{console.log("[TutorialCleanup] Stage 3 cleanup"),RE()},150),setTimeout(()=>{console.log("[TutorialCleanup] Final cleanup stage"),RE()},300)},U6=t=>{console.log(`[TutorialCleanup] Performing navigation-specific cleanup, preserving step ${t}`);try{document.querySelectorAll(".tutorial-target, .tutorial-button-highlight").forEach(n=>{n instanceof HTMLElement&&(t&&(t===3&&(n.classList.contains("record-entry-tab")||n.classList.contains("tutorial-record-entry-button"))||t===4&&n.classList.contains("entries-tab"))?console.log(`[TutorialCleanup] Preserving highlighting for step ${t} element`):(["tutorial-target","tutorial-button-highlight"].forEach(a=>{n.classList.remove(a)}),["position","zIndex","transform","opacity","visibility"].forEach(a=>{try{n.style[a]=""}catch{}})))})}catch(e){console.error("[TutorialCleanup] Error during navigation cleanup:",e)}},OCe=(t=[])=>{console.log(`[TutorialCleanup] Performing selective cleanup, preserving steps: ${t.join(", ")}`);try{document.querySelectorAll($p.map(n=>`.${n}`).join(", ")).forEach(n=>{if(n instanceof HTMLElement){let r=!1;t.forEach(i=>{(i===3&&(n.classList.contains("record-entry-tab")||n.classList.contains("tutorial-record-entry-button"))||i===4&&n.classList.contains("entries-tab")||i===5&&n.classList.contains("chat-question-highlight"))&&(r=!0)}),r||($p.forEach(i=>{n.classList.remove(i)}),Xy.forEach(i=>{try{n.style[i]=""}catch{}}))}})}catch(e){console.error("[TutorialCleanup] Error during selective cleanup:",e)}},tte=_.createContext(void 0),LCe=[{id:1,title:"Welcome to SOuLO",content:"Let's take a quick tour to help you get started with your journaling journey.",targetElement:".journal-header-container",position:"center",showNextButton:!0,showSkipButton:!0,navigateTo:"/app/home"},{id:2,title:"Your Journal",content:"Press this central arrow button to start recording a journal entry instantly. This is your daily oxygen to build your emotional repository.",targetElement:".journal-arrow-button",position:"top",showNextButton:!0,showSkipButton:!0,navigateTo:"/app/home"},{id:3,title:"Multilingual Recording",content:"Speak in any language you feel comfortable with. Our AI understands and transcribes your entries, no matter which language you speak!",targetElement:".tutorial-record-entry-button",alternativeSelectors:qee,position:"bottom",showNextButton:!0,showSkipButton:!0,navigateTo:"/app/journal",waitForElement:!0},{id:4,title:"Your Journal History",content:"View and explore all your past journal entries here. You can search, filter, and reflect on your emotional journey over time.",targetElement:'[value="entries"]',alternativeSelectors:Yee,position:"bottom",showNextButton:!0,showSkipButton:!0,navigateTo:"/app/journal",waitForElement:!0},{id:5,title:"Chat with Your Journal",content:"Ask questions about your journal entries and track your wellbeing across all areas of life. Our AI can analyze patterns and provide insights from your emotional journey.",targetElement:".chat-suggestion-button",alternativeSelectors:Xee,position:"top",showNextButton:!0,showSkipButton:!0,navigateTo:"/app/chat",waitForElement:!0},{id:6,title:"Your Emotional Insights",content:"Here you'll find visual representations of your emotional journey and patterns over time.",targetElement:".insights-container h1",alternativeSelectors:Kee,position:"bottom",showNextButton:!0,showSkipButton:!0,navigateTo:"/app/insights",waitForElement:!0,infographicType:"insights-overview"},{id:7,title:"Emotion Trends",content:"See which emotions appear most frequently in your journal and how they change over time.",targetElement:".recharts-responsive-container",alternativeSelectors:Jee,position:"top",showNextButton:!0,showSkipButton:!0,navigateTo:"/app/insights",waitForElement:!0,infographicType:"emotion-trends"},{id:8,title:"Mood Calendar",content:"Visualize your daily sentiment changes and spot patterns in how your mood fluctuates throughout weeks and months.",targetElement:'[class*="MoodCalendar"]',alternativeSelectors:Zee,position:"top",showNextButton:!0,showSkipButton:!0,navigateTo:"/app/insights",waitForElement:!0,infographicType:"mood-calendar"},{id:9,title:"Soul-Net Visualization",content:"Explore neural connections between life areas and emotions to see how different aspects of your life influence your emotional state.",targetElement:"canvas",alternativeSelectors:Qee,position:"top",showNextButton:!0,showSkipButton:!0,navigateTo:"/app/insights",waitForElement:!0,infographicType:"soul-net"}],DCe=({children:t})=>{const{user:e}=or(),n=Wi(),r=Za(),[i,o]=_.useState(!1),[a,s]=_.useState(0),[l,c]=_.useState(LCe),[u,f]=_.useState(!1),[h,p]=_.useState({inProgress:!1,targetRoute:null}),[y,g]=_.useState(!1),[v,b]=_.useState(!1),[w,T]=_.useState(!1);_.useEffect(()=>{var $;console.log("[TutorialContext] Current state:",{isActive:i,currentStep:a,currentStepID:($=l[a])==null?void 0:$.id,currentPath:n.pathname,navigationState:h,pendingTutorialStart:v,tutorialChecked:u,isInitialized:w,navigationManagerState:to.getState(),highlightingManagerState:_s.getState()})},[i,a,l,n.pathname,h,v,u,w]),_.useEffect(()=>{console.log("[TutorialContext] Initializing tutorial system");const $=setTimeout(()=>{T(!0),console.log("[TutorialContext] Tutorial system initialized")},100);return()=>{clearTimeout($)}},[]),_.useEffect(()=>to.subscribe(F=>{p({inProgress:F.isNavigating,targetRoute:F.targetRoute})}),[]);const C=()=>{console.log("[TutorialContext] Starting tutorial manually"),_s.reset(),b(!0),s(0),g(!1),nc(n.pathname)?(console.log("[TutorialContext] Already on app route, activating tutorial"),o(!0),b(!1)):(console.log("[TutorialContext] Not on app route, navigating to /app/home"),to.startNavigation("/app/home",0),r("/app/home"))};_.useEffect(()=>{if(!w)return;const $=to.getState();if($.isNavigating&&$.targetRoute===n.pathname){console.log(`[TutorialContext] Navigation complete: arrived at ${n.pathname}`),to.completeNavigation(),v&&(console.log("[TutorialContext] Activating tutorial after navigation completion"),o(!0),b(!1));const F=l[a];F&&F.waitForElement&&(console.log(`[TutorialContext] Step ${F.id} is waiting for element: ${F.targetElement}`),setTimeout(()=>{P(F)},500))}},[n.pathname,v,a,l,w]),_.useEffect(()=>{if(!w)return;(async()=>{if(!(!e||u))try{console.log("[TutorialContext] Checking tutorial status for user:",e.id);const{data:F,error:J}=await Ze.from("profiles").select("tutorial_completed, tutorial_step").eq("id",e.id).single();if(J){console.error("[TutorialContext] Error fetching tutorial status:",J),f(!0);return}const K=(F==null?void 0:F.tutorial_completed)==="NO",Z=(F==null?void 0:F.tutorial_step)||0;console.log("[TutorialContext] Tutorial status check result:",{shouldActivate:K,startingStep:Z,tutorialCompleted:F==null?void 0:F.tutorial_completed,currentPath:n.pathname,isAppRoute:nc(n.pathname)}),K&&(console.log("[TutorialContext] Tutorial should be activated at step:",Z),s(Z),_s.reset(),nc(n.pathname)?(console.log("[TutorialContext] On app route, activating tutorial immediately"),o(!0)):(console.log("[TutorialContext] Not on app route, will navigate and then activate"),b(!0),to.startNavigation("/app/home",Z),r("/app/home"))),g((F==null?void 0:F.tutorial_completed)==="YES"),f(!0)}catch(F){console.error("[TutorialContext] Error in tutorial check:",F),f(!0)}})()},[e,n.pathname,u,r,w]);const P=$=>{const F=[$.targetElement,...$.alternativeSelectors||[]].filter(Boolean);$.id>=3&&ete(),$.id===3?_s.applyStaggeredHighlighting(F,["tutorial-target","record-entry-tab","tutorial-record-entry-button"],3):$.id===4?_s.applyStaggeredHighlighting(F,["tutorial-target","entries-tab"],4):_y(F,$.id===5?"chat-question-highlight":$.id===6?"insights-header-highlight":$.id===7?"emotion-chart-highlight":$.id===8?"mood-calendar-highlight":$.id===9?"soul-net-highlight":"")},M=async $=>{if(e)try{const{error:F}=await Ze.from("profiles").update({tutorial_step:$}).eq("id",e.id);F?console.error("[TutorialContext] Error updating tutorial step:",F):console.log("[TutorialContext] Tutorial step updated in database:",$)}catch(F){console.error("[TutorialContext] Error updating tutorial step:",F)}},k=async()=>{if(e)try{console.log("[TutorialContext] Starting tutorial completion cleanup process"),o(!1),b(!1),to.forceReset(),_s.reset(),UO();const{error:$}=await Ze.from("profiles").update({tutorial_completed:"YES",tutorial_step:l.length}).eq("id",e.id);if($){console.error("[TutorialContext] Error completing tutorial:",$);return}g(!0),console.log("[TutorialContext] Tutorial marked as completed"),setTimeout(()=>{console.log("[TutorialContext] Triggering UI refresh after tutorial"),window.dispatchEvent(new Event("resize")),console.log("[TutorialContext] Tutorial complete, navigating to home page"),r("/app/home",{replace:!0})},200)}catch($){console.error("[TutorialContext] Error completing tutorial:",$)}},I=()=>{if(a<l.length-1){const $=a+1,F=l[$];console.log(`[TutorialContext] Moving to tutorial step ${$} (ID: ${F.id})`),to.startStepTransition(F.id),U6(F.id),s($),M($),F.navigateTo&&n.pathname!==F.navigateTo?(console.log(`[TutorialContext] Navigation needed for step ${F.id} to ${F.navigateTo}`),to.startNavigation(F.navigateTo,$),r(F.navigateTo)):F.waitForElement&&setTimeout(()=>{P(F)},300)}else console.log("[TutorialContext] Completing tutorial - reached the end"),k()},U=()=>{if(a>0){const $=a-1,F=l[$];console.log(`[TutorialContext] Moving to previous step ${$} (ID: ${F.id})`),to.startStepTransition(F.id),U6(F.id),s($),M($),F.navigateTo&&n.pathname!==F.navigateTo?(console.log(`[TutorialContext] Navigation needed for step ${F.id} to ${F.navigateTo}`),to.startNavigation(F.navigateTo,$),r(F.navigateTo)):F.waitForElement&&setTimeout(()=>{P(F)},300)}},z=async()=>{if(e)try{const{error:$}=await Ze.from("profiles").update({tutorial_completed:"YES"}).eq("id",e.id);if($){console.error("[TutorialContext] Error skipping tutorial:",$);return}o(!1),b(!1),g(!0),to.forceReset(),_s.reset(),UO(),console.log("[TutorialContext] Tutorial skipped by user, navigating to home"),r("/app/home",{replace:!0})}catch($){console.error("[TutorialContext] Error skipping tutorial:",$)}},O=async()=>{if(e)try{const{error:$}=await Ze.from("profiles").update({tutorial_completed:"NO",tutorial_step:0}).eq("id",e.id);if($){console.error("[TutorialContext] Error resetting tutorial:",$);return}s(0),f(!1),g(!1),b(!1),to.forceReset(),_s.reset(),n.pathname!=="/app/home"?(console.log("[TutorialContext] Tutorial reset - redirecting to app home"),r("/app/home",{replace:!0})):o(!0)}catch($){console.error("[TutorialContext] Error resetting tutorial:",$)}},B={isActive:i,currentStep:a,totalSteps:l.length,steps:l,nextStep:I,prevStep:U,skipTutorial:z,completeTutorial:k,resetTutorial:O,startTutorial:C,tutorialCompleted:y,isInStep:$=>{var F;return i&&((F=l[a])==null?void 0:F.id)===$},navigationState:h,isInitialized:w};return d.jsx(tte.Provider,{value:B,children:t})},ka=()=>{const t=_.useContext(tte);return t===void 0?(console.warn("[useTutorial] Hook called before TutorialProvider is ready, returning safe defaults"),{isActive:!1,currentStep:0,totalSteps:0,steps:[],nextStep:()=>console.warn("[useTutorial] nextStep called before provider ready"),prevStep:()=>console.warn("[useTutorial] prevStep called before provider ready"),skipTutorial:()=>console.warn("[useTutorial] skipTutorial called before provider ready"),completeTutorial:()=>console.warn("[useTutorial] completeTutorial called before provider ready"),resetTutorial:()=>console.warn("[useTutorial] resetTutorial called before provider ready"),startTutorial:()=>console.warn("[useTutorial] startTutorial called before provider ready"),tutorialCompleted:!1,isInStep:()=>!1,navigationState:{inProgress:!1,targetRoute:null},isInitialized:!1}):t},nte=6048e5,FCe=864e5,B6=Symbol.for("constructDateFrom");function Rs(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&B6 in t?t[B6](e):t instanceof Date?new t.constructor(e):new Date(e)}function Ui(t,e){return Rs(e||t,t)}function qa(t,e,n){const r=Ui(t,n==null?void 0:n.in);return isNaN(e)?Rs(t,NaN):(e&&r.setDate(r.getDate()+e),r)}function tm(t,e,n){const r=Ui(t,n==null?void 0:n.in);if(isNaN(e))return Rs(t,NaN);if(!e)return r;const i=r.getDate(),o=Rs(t,r.getTime());o.setMonth(r.getMonth()+e+1,0);const a=o.getDate();return i>=a?o:(r.setFullYear(o.getFullYear(),o.getMonth(),i),r)}let zCe={};function x0(){return zCe}function oa(t,e){var s,l,c,u;const n=x0(),r=(e==null?void 0:e.weekStartsOn)??((l=(s=e==null?void 0:e.locale)==null?void 0:s.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((u=(c=n.locale)==null?void 0:c.options)==null?void 0:u.weekStartsOn)??0,i=Ui(t,e==null?void 0:e.in),o=i.getDay(),a=(o<r?7:0)+o-r;return i.setDate(i.getDate()-a),i.setHours(0,0,0,0),i}function MT(t,e){return oa(t,{...e,weekStartsOn:1})}function rte(t,e){const n=Ui(t,e==null?void 0:e.in),r=n.getFullYear(),i=Rs(n,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);const o=MT(i),a=Rs(n,0);a.setFullYear(r,0,4),a.setHours(0,0,0,0);const s=MT(a);return n.getTime()>=o.getTime()?r+1:n.getTime()>=s.getTime()?r:r-1}function $6(t){const e=Ui(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function ite(t,...e){const n=Rs.bind(null,e.find(r=>typeof r=="object"));return e.map(n)}function ol(t,e){const n=Ui(t,e==null?void 0:e.in);return n.setHours(0,0,0,0),n}function UCe(t,e,n){const[r,i]=ite(n==null?void 0:n.in,t,e),o=ol(r),a=ol(i),s=+o-$6(o),l=+a-$6(a);return Math.round((s-l)/FCe)}function BCe(t,e){const n=rte(t,e),r=Rs(t,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),MT(r)}function nm(t,e,n){return qa(t,e*7,n)}function vv(t,e,n){return tm(t,e*12,n)}function $Ce(t){return Rs(t,Date.now())}function ote(t,e,n){const[r,i]=ite(n==null?void 0:n.in,t,e);return+ol(r)==+ol(i)}function HCe(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function X4(t){return!(!HCe(t)&&typeof t!="number"||isNaN(+Ui(t)))}function VCe(t,e){const n=Ui(t,e==null?void 0:e.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function O1(t,e){const n=Ui(t,e==null?void 0:e.in);return n.setDate(1),n.setHours(0,0,0,0),n}function L1(t,e){const n=Ui(t,e==null?void 0:e.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}function PT(t,e){var s,l,c,u;const n=x0(),r=(e==null?void 0:e.weekStartsOn)??((l=(s=e==null?void 0:e.locale)==null?void 0:s.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((u=(c=n.locale)==null?void 0:c.options)==null?void 0:u.weekStartsOn)??0,i=Ui(t,e==null?void 0:e.in),o=i.getDay(),a=(o<r?-7:0)+6-(o-r);return i.setDate(i.getDate()+a),i.setHours(23,59,59,999),i}const WCe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},GCe=(t,e,n)=>{let r;const i=WCe[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function lP(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const qCe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},YCe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},XCe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},KCe={date:lP({formats:qCe,defaultWidth:"full"}),time:lP({formats:YCe,defaultWidth:"full"}),dateTime:lP({formats:XCe,defaultWidth:"full"})},JCe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},ZCe=(t,e,n,r)=>JCe[t];function Wx(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let i;if(r==="formatting"&&t.formattingValues){const a=t.defaultFormattingWidth||t.defaultWidth,s=n!=null&&n.width?String(n.width):a;i=t.formattingValues[s]||t.formattingValues[a]}else{const a=t.defaultWidth,s=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[s]||t.values[a]}const o=t.argumentCallback?t.argumentCallback(e):e;return i[o]}}const QCe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},eAe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},tAe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},nAe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},rAe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},iAe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},oAe=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},aAe={ordinalNumber:oAe,era:Wx({values:QCe,defaultWidth:"wide"}),quarter:Wx({values:eAe,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Wx({values:tAe,defaultWidth:"wide"}),day:Wx({values:nAe,defaultWidth:"wide"}),dayPeriod:Wx({values:rAe,defaultWidth:"wide",formattingValues:iAe,defaultFormattingWidth:"wide"})};function Gx(t){return(e,n={})=>{const r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],o=e.match(i);if(!o)return null;const a=o[0],s=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(s)?lAe(s,f=>f.test(a)):sAe(s,f=>f.test(a));let c;c=t.valueCallback?t.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;const u=e.slice(a.length);return{value:c,rest:u}}}function sAe(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function lAe(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function cAe(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const i=r[0],o=e.match(t.parsePattern);if(!o)return null;let a=t.valueCallback?t.valueCallback(o[0]):o[0];a=n.valueCallback?n.valueCallback(a):a;const s=e.slice(i.length);return{value:a,rest:s}}}const uAe=/^(\d+)(th|st|nd|rd)?/i,dAe=/\d+/i,fAe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},hAe={any:[/^b/i,/^(a|c)/i]},pAe={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},mAe={any:[/1/i,/2/i,/3/i,/4/i]},gAe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},yAe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},vAe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},xAe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},wAe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},bAe={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},SAe={ordinalNumber:cAe({matchPattern:uAe,parsePattern:dAe,valueCallback:t=>parseInt(t,10)}),era:Gx({matchPatterns:fAe,defaultMatchWidth:"wide",parsePatterns:hAe,defaultParseWidth:"any"}),quarter:Gx({matchPatterns:pAe,defaultMatchWidth:"wide",parsePatterns:mAe,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Gx({matchPatterns:gAe,defaultMatchWidth:"wide",parsePatterns:yAe,defaultParseWidth:"any"}),day:Gx({matchPatterns:vAe,defaultMatchWidth:"wide",parsePatterns:xAe,defaultParseWidth:"any"}),dayPeriod:Gx({matchPatterns:wAe,defaultMatchWidth:"any",parsePatterns:bAe,defaultParseWidth:"any"})},EAe={code:"en-US",formatDistance:GCe,formatLong:KCe,formatRelative:ZCe,localize:aAe,match:SAe,options:{weekStartsOn:0,firstWeekContainsDate:1}};function _Ae(t,e){const n=Ui(t,e==null?void 0:e.in);return UCe(n,L1(n))+1}function TAe(t,e){const n=Ui(t,e==null?void 0:e.in),r=+MT(n)-+BCe(n);return Math.round(r/nte)+1}function ate(t,e){var u,f,h,p;const n=Ui(t,e==null?void 0:e.in),r=n.getFullYear(),i=x0(),o=(e==null?void 0:e.firstWeekContainsDate)??((f=(u=e==null?void 0:e.locale)==null?void 0:u.options)==null?void 0:f.firstWeekContainsDate)??i.firstWeekContainsDate??((p=(h=i.locale)==null?void 0:h.options)==null?void 0:p.firstWeekContainsDate)??1,a=Rs((e==null?void 0:e.in)||t,0);a.setFullYear(r+1,0,o),a.setHours(0,0,0,0);const s=oa(a,e),l=Rs((e==null?void 0:e.in)||t,0);l.setFullYear(r,0,o),l.setHours(0,0,0,0);const c=oa(l,e);return+n>=+s?r+1:+n>=+c?r:r-1}function CAe(t,e){var s,l,c,u;const n=x0(),r=(e==null?void 0:e.firstWeekContainsDate)??((l=(s=e==null?void 0:e.locale)==null?void 0:s.options)==null?void 0:l.firstWeekContainsDate)??n.firstWeekContainsDate??((u=(c=n.locale)==null?void 0:c.options)==null?void 0:u.firstWeekContainsDate)??1,i=ate(t,e),o=Rs((e==null?void 0:e.in)||t,0);return o.setFullYear(i,0,r),o.setHours(0,0,0,0),oa(o,e)}function D1(t,e){const n=Ui(t,e==null?void 0:e.in),r=+oa(n,e)-+CAe(n,e);return Math.round(r/nte)+1}function rr(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const df={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return rr(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):rr(n+1,2)},d(t,e){return rr(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return rr(t.getHours()%12||12,e.length)},H(t,e){return rr(t.getHours(),e.length)},m(t,e){return rr(t.getMinutes(),e.length)},s(t,e){return rr(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return rr(i,e.length)}},Hg={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},H6={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return df.y(t,e)},Y:function(t,e,n,r){const i=ate(t,r),o=i>0?i:1-i;if(e==="YY"){const a=o%100;return rr(a,2)}return e==="Yo"?n.ordinalNumber(o,{unit:"year"}):rr(o,e.length)},R:function(t,e){const n=rte(t);return rr(n,e.length)},u:function(t,e){const n=t.getFullYear();return rr(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return rr(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return rr(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return df.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return rr(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const i=D1(t,r);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):rr(i,e.length)},I:function(t,e,n){const r=TAe(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):rr(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):df.d(t,e)},D:function(t,e,n){const r=_Ae(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):rr(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const i=t.getDay(),o=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(o);case"ee":return rr(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const i=t.getDay(),o=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(o);case"cc":return rr(o,e.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return rr(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let i;switch(r===12?i=Hg.noon:r===0?i=Hg.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let i;switch(r>=17?i=Hg.evening:r>=12?i=Hg.afternoon:r>=4?i=Hg.morning:i=Hg.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return df.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):df.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):rr(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):rr(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):df.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):df.s(t,e)},S:function(t,e){return df.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return W6(r);case"XXXX":case"XX":return fp(r);case"XXXXX":case"XXX":default:return fp(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return W6(r);case"xxxx":case"xx":return fp(r);case"xxxxx":case"xxx":default:return fp(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+V6(r,":");case"OOOO":default:return"GMT"+fp(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+V6(r,":");case"zzzz":default:return"GMT"+fp(r,":")}},t:function(t,e,n){const r=Math.trunc(+t/1e3);return rr(r,e.length)},T:function(t,e,n){return rr(+t,e.length)}};function V6(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Math.trunc(r/60),o=r%60;return o===0?n+String(i):n+String(i)+e+rr(o,2)}function W6(t,e){return t%60===0?(t>0?"-":"+")+rr(Math.abs(t)/60,2):fp(t,e)}function fp(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=rr(Math.trunc(r/60),2),o=rr(r%60,2);return n+i+e+o}const G6=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},ste=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},AAe=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return G6(t,e);let o;switch(r){case"P":o=e.dateTime({width:"short"});break;case"PP":o=e.dateTime({width:"medium"});break;case"PPP":o=e.dateTime({width:"long"});break;case"PPPP":default:o=e.dateTime({width:"full"});break}return o.replace("{{date}}",G6(r,e)).replace("{{time}}",ste(i,e))},MAe={p:ste,P:AAe},PAe=/^D+$/,kAe=/^Y+$/,NAe=["D","DD","YY","YYYY"];function RAe(t){return PAe.test(t)}function jAe(t){return kAe.test(t)}function IAe(t,e,n){const r=OAe(t,e,n);if(console.warn(r),NAe.includes(t))throw new RangeError(r)}function OAe(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const LAe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,DAe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,FAe=/^'([^]*?)'?$/,zAe=/''/g,UAe=/[a-zA-Z]/;function ir(t,e,n){var u,f,h,p,y,g,v,b;const r=x0(),i=(n==null?void 0:n.locale)??r.locale??EAe,o=(n==null?void 0:n.firstWeekContainsDate)??((f=(u=n==null?void 0:n.locale)==null?void 0:u.options)==null?void 0:f.firstWeekContainsDate)??r.firstWeekContainsDate??((p=(h=r.locale)==null?void 0:h.options)==null?void 0:p.firstWeekContainsDate)??1,a=(n==null?void 0:n.weekStartsOn)??((g=(y=n==null?void 0:n.locale)==null?void 0:y.options)==null?void 0:g.weekStartsOn)??r.weekStartsOn??((b=(v=r.locale)==null?void 0:v.options)==null?void 0:b.weekStartsOn)??0,s=Ui(t,n==null?void 0:n.in);if(!X4(s))throw new RangeError("Invalid time value");let l=e.match(DAe).map(w=>{const T=w[0];if(T==="p"||T==="P"){const C=MAe[T];return C(w,i.formatLong)}return w}).join("").match(LAe).map(w=>{if(w==="''")return{isToken:!1,value:"'"};const T=w[0];if(T==="'")return{isToken:!1,value:BAe(w)};if(H6[T])return{isToken:!0,value:w};if(T.match(UAe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+T+"`");return{isToken:!1,value:w}});i.localize.preprocessor&&(l=i.localize.preprocessor(s,l));const c={firstWeekContainsDate:o,weekStartsOn:a,locale:i};return l.map(w=>{if(!w.isToken)return w.value;const T=w.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&jAe(T)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&RAe(T))&&IAe(T,e,String(t));const C=H6[T[0]];return C(s,T,i.localize,c)}).join("")}function BAe(t){const e=t.match(FAe);return e?e[1].replace(zAe,"'"):t}function $Ae(){return Object.assign({},x0())}function SA(t,e){return Ui(t,e==null?void 0:e.in).getFullYear()}function cP(t,e){return ote(Rs(t,t),$Ce(t))}function HAe(t,e,n){const r=+Ui(t,n==null?void 0:n.in),[i,o]=[+Ui(e.start,n==null?void 0:n.in),+Ui(e.end,n==null?void 0:n.in)].sort((a,s)=>a-s);return r>=i&&r<=o}function kT(t,e,n){return qa(t,-e,n)}function K4(t,e,n){return tm(t,-e,n)}function BO(t,e,n){return nm(t,-1,n)}function lte(t,e,n){return vv(t,-1,n)}const VAe=t=>({log:(...e)=>{},info:(...e)=>{},error:(...e)=>{},warn:(...e)=>{},trace:(...e)=>{}}),WAe=VAe(),q6=[{code:"en",label:"English",region:"European"},{code:"es",label:"Espaol",region:"European"},{code:"fr",label:"Franais",region:"European"},{code:"de",label:"Deutsch",region:"European"},{code:"hi",label:"",region:"Indian"},{code:"zh",label:"",region:"Asian"},{code:"ja",label:"",region:"Asian"},{code:"ru",label:"",region:"European"},{code:"ar",label:"",region:"Middle Eastern"},{code:"pt",label:"Portugus",region:"European"},{code:"bn",label:"",region:"Indian"},{code:"ta",label:"",region:"Indian"},{code:"te",label:"",region:"Indian"},{code:"mr",label:"",region:"Indian"},{code:"gu",label:"",region:"Indian"},{code:"kn",label:"",region:"Indian"},{code:"ml",label:"",region:"Indian"},{code:"pa",label:"",region:"Indian"},{code:"as",label:"",region:"Indian"},{code:"or",label:"",region:"Indian"},{code:"ur",label:"",region:"Indian"},{code:"sd",label:"",region:"Indian"},{code:"ks",label:"",region:"Indian"},{code:"kok",label:"",region:"Indian"},{code:"mai",label:"",region:"Indian"},{code:"it",label:"Italiano",region:"European"},{code:"ko",label:"",region:"Asian"},{code:"tr",label:"Trke",region:"European"},{code:"nl",label:"Nederlands",region:"European"},{code:"pl",label:"Polski",region:"European"},{code:"sv",label:"Svenska",region:"European"},{code:"th",label:"",region:"Asian"},{code:"vi",label:"Ting Vit",region:"Asian"},{code:"id",label:"Bahasa Indonesia",region:"Asian"},{code:"uk",label:"",region:"European"},{code:"el",label:"",region:"European"},{code:"ro",label:"Romn",region:"European"},{code:"hu",label:"Magyar",region:"European"},{code:"cs",label:"etina",region:"European"},{code:"he",label:"",region:"Middle Eastern"}],GAe=()=>{const{currentLanguage:t,setLanguage:e,isTranslating:n,prefetchSoulNetTranslations:r}=In(),{user:i}=or(),[o,a]=_.useState(!1),s=async f=>{if(await e(f),i&&f!=="en")try{WAe.info("Pre-translating SoulNet data for new language:",f);const p=["today","week","month","year"].map(y=>r(i.id,y));await Promise.allSettled(p),console.log("[LanguageSelector] Completed pre-translation for all time ranges")}catch{}a(!1);try{const h=localStorage.getItem("recentLanguages")||"[]",p=JSON.parse(h),y=[f,...p.filter(g=>g!==f)].slice(0,3);localStorage.setItem("recentLanguages",JSON.stringify(y))}catch{}},c=(()=>{try{const f=localStorage.getItem("recentLanguages");return f?JSON.parse(f):[]}catch{return[]}})().slice(0,3).map(f=>q6.find(h=>h.code===f)).filter(Boolean),u=()=>{const f={};return q6.forEach(h=>{f[h.region]||(f[h.region]=[]),f[h.region].push(h)}),f};return d.jsxs(dQ,{open:o,onOpenChange:a,children:[d.jsx(fQ,{asChild:!0,children:d.jsx(ct,{variant:"ghost",size:"icon","aria-label":"Select language",title:"Select language",disabled:n,children:d.jsx(_J,{className:`h-5 w-5 ${n?"animate-pulse":""}`})})}),d.jsxs(h4,{align:"end",className:"max-h-[400px] overflow-y-auto bg-background border border-border w-64",children:[c.length>0&&d.jsxs(d.Fragment,{children:[d.jsx(cb,{children:"Recent"}),c.map(f=>d.jsx(qy,{onClick:()=>s(f.code),className:`cursor-pointer ${t===f.code?"bg-primary/10 text-primary font-medium":""}`,disabled:n,children:f.label},`recent-${f.code}`)),d.jsx(ub,{})]}),Object.entries(u()).map(([f,h])=>d.jsxs(hQ,{children:[d.jsx(cb,{children:f}),h.map(p=>d.jsx(qy,{onClick:()=>s(p.code),className:`cursor-pointer ${t===p.code?"bg-primary/10 text-primary font-medium":""}`,disabled:n,children:p.label},p.code)),f!==Object.keys(u()).slice(-1)[0]&&d.jsx(ub,{})]},f))]})]})},qAe=()=>{const{user:t}=or(),[e,n]=_.useState(null),[r,i]=_.useState(null);_.useEffect(()=>{(async()=>{if(t)try{if(!await X_(t)){console.error("Failed to ensure profile exists");return}const u=localStorage.getItem("user_display_name"),{data:f,error:h}=await Ze.from("profiles").select("display_name, full_name, timezone").eq("id",t.id).single();if(h&&h.code!=="PGRST116"){console.error("Error fetching profile",h);return}if(u&&(!f||!f.display_name)?(await a(u),n(u),localStorage.removeItem("user_display_name")):f&&f.display_name?n(f.display_name):f&&f.full_name&&n(f.full_name),f&&f.timezone)i(f.timezone);else{const p=o();p&&(await s(p),i(p))}}catch(c){console.error("Error in profile fetching",c)}})()},[t]);const o=()=>{try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch(l){return console.error("Error detecting timezone:",l),null}},a=async l=>{if(t)try{const{error:c}=await Ze.from("profiles").update({display_name:l,updated_at:new Date().toISOString()}).eq("id",t.id);if(c)throw c;n(l)}catch(c){console.error("Error updating display name",c)}},s=async l=>{if(t)try{const{error:c}=await Ze.from("profiles").update({timezone:l,updated_at:new Date().toISOString()}).eq("id",t.id);if(c)throw c;i(l)}catch(c){console.error("Error updating timezone",c)}};return{displayName:e,timezone:r,updateDisplayName:a,updateTimezone:s}},YAe=()=>{var v;const{user:t}=or(),{theme:e}=Zr(),{displayName:n}=qAe(),{translate:r}=In(),[i,o]=_.useState("Journal"),[a,s]=_.useState("Your Journal"),c=ir(new Date,"EEE, MMM d"),{isActive:u,currentStep:f,steps:h}=ka(),p=u&&((v=h[f])==null?void 0:v.id)===1;_.useEffect(()=>{(async()=>{r&&(o(await r("Journal","en")),s(await r("Your Journal","en")))})()},[r]),_.useEffect(()=>{const b=async()=>{r&&(o(await r("Journal","en")),s(await r("Your Journal","en")))};return window.addEventListener("languageChange",b),()=>{window.removeEventListener("languageChange",b)}},[r]);const y=()=>{if(n)return n.endsWith("s")?`${n}' ${i}`:`${n}'s ${i}`;if(t!=null&&t.email){const b=t.email.split("@")[0];return b.endsWith("s")?`${b}' ${i}`:`${b}'s ${i}`}return a},g={hidden:{x:100,opacity:0},visible:{x:0,opacity:1,transition:{duration:.5,ease:"easeOut"}}};return d.jsx("div",{className:`p-4 flex flex-col journal-header-container ${p?"tutorial-target":""}`,children:d.jsxs("div",{className:"flex justify-between items-start w-full relative",children:[d.jsx("div",{className:`relative max-w-[65%] ${p?"z-[9999]":""}`,children:d.jsx("h1",{className:`text-2xl font-bold text-theme break-words hyphens-auto ${p?"tutorial-highlight":""}`,style:{fontWeight:700,letterSpacing:"0.005em",WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",display:p?"block":"-webkit-box",WebkitLineClamp:p?"none":"2",WebkitBoxOrient:"vertical",overflow:p?"visible":"hidden",maxHeight:p?"none":"60px",visibility:"visible",opacity:1},children:d.jsx(Q,{text:y(),forceTranslate:!0})})}),d.jsxs("div",{className:`flex items-center ${p?"z-[9999]":"z-50"}`,children:[d.jsx(Ke.div,{variants:g,initial:"hidden",animate:"visible",className:`px-3 py-1 rounded-l-md whitespace-nowrap ${e==="dark"?"bg-gray-800/80":"bg-gray-100/80"} ${p?"tutorial-highlight":""}`,children:d.jsx("div",{className:`text-sm font-medium ${e==="dark"?"text-white":"text-black"}`,style:{fontWeight:500,letterSpacing:"0.01em",WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",visibility:"visible",opacity:1},children:d.jsx(Q,{text:c,forceTranslate:!0})})}),d.jsx("div",{className:"ml-2 relative z-[1000] pointer-events-auto",children:d.jsx(GAe,{})})]})]})})},J4=new Set;function XAe(t){J4.add(t)}function KAe(t){J4.delete(t)}function cte(t){return t?J4.has(t):!0}function ute(t,e){if(!cte(e))return console.log("Skipping toast for unmounted component:",e),{id:"",dismiss:()=>{},update:()=>{}};try{return I3(t)}catch(n){return console.error("Toast error:",n),{id:"",dismiss:()=>{},update:()=>{}}}}function JAe(t,e,n){return ute({title:t,description:e,duration:500},n)}async function Af(t,e,n,r,i,o){if(!cte(o)){console.log("Skipping translated toast for unmounted component:",o);return}let a=await n(t),s=await n(e);return ute({title:a,description:s,duration:r},o)}function Lc(){console.log("clearAllToasts called - using sonner toast system")}async function Ty(){return Promise.resolve()}let xv=[];const ZAe={morning:{hour:8,minute:0},afternoon:{hour:14,minute:0},evening:{hour:19,minute:0},night:{hour:22,minute:0}};async function dte(){if(!("Notification"in window))return console.log("This browser does not support notifications"),!1;if(Notification.permission==="granted")return!0;if(Notification.permission==="denied")return console.log("Notification permission denied"),!1;try{return await Notification.requestPermission()==="granted"}catch(t){return console.error("Error requesting notification permission:",t),!1}}function fte(t,e,n){if(!("Notification"in window)||Notification.permission!=="granted"){console.log("Cannot show notification - permission not granted");return}const r=new Notification(t,{body:e,icon:"/lovable-uploads/a07b91eb-274a-47b6-8180-fb4c9c0bc8a5.png",badge:"/lovable-uploads/a07b91eb-274a-47b6-8180-fb4c9c0bc8a5.png",tag:"journal-reminder",requireInteraction:!1,silent:!1,...n});return setTimeout(()=>{r.close()},5e3),r.onclick=()=>{window.focus(),r.close(),window.location.pathname!=="/app/journal"&&(window.location.href="/app/journal")},r}function QAe(t){const e=new Date,n=new Date,{hour:r,minute:i}=ZAe[t];return n.setHours(r,i,0,0),n<=e&&n.setDate(n.getDate()+1),n}function hte(t){const e=`${t}-${Date.now()}`,n=QAe(t);console.log(`Scheduling notification for ${t} at ${n.toLocaleString()}`);const r=n.getTime()-Date.now(),i=window.setTimeout(()=>{console.log(`Showing notification for ${t}`),fte("Journal Reminder ","It's time to reflect on your day. Take a moment to journal your thoughts and feelings.",{tag:`journal-reminder-${t}`,data:{time:t,scheduledFor:n.toISOString()}});const o=hte(t),a=xv.findIndex(s=>s.id===e);a!==-1&&(xv[a]=o)},r);return{id:e,time:t,scheduledFor:n,timeoutId:i}}function e2e(){xv.forEach(t=>{t.timeoutId&&clearTimeout(t.timeoutId)}),xv=[],console.log("All scheduled notifications cleared")}function $O(t,e,n){if(console.log("setupJournalReminder called:",{enabled:t,frequency:e,times:n}),e2e(),typeof window<"u"&&(localStorage.setItem("notification_enabled",t.toString()),localStorage.setItem("notification_times",JSON.stringify(n))),n.length===0){console.log("Notifications disabled or no times selected");return}dte().then(r=>{if(!r){console.log("Notification permission not granted, cannot schedule notifications");return}n.forEach(i=>{const o=hte(i);xv.push(o)}),console.log(`Scheduled ${xv.length} notifications`)})}function t2e(){console.log("initializeCapacitorNotifications called"),typeof window<"u"&&window.Capacitor?(console.log("Detected Capacitor environment, attempting to load local notifications"),new Function("specifier","return import(specifier)")("@capacitor/local-notifications").then(e=>{const{LocalNotifications:n}=e;console.log("Successfully loaded Capacitor LocalNotifications"),n.requestPermissions().then(r=>{console.log("Capacitor notification permissions:",r),r.display==="granted"&&console.log("Capacitor notifications enabled")})}).catch(e=>{console.log("Capacitor LocalNotifications not available (this is normal for web):",e.message)})):console.log("Not running in Capacitor environment, skipping mobile notifications setup")}function pte(){if(typeof window>"u")return{enabled:!1,times:[]};const t=localStorage.getItem("notification_enabled")==="true",e=localStorage.getItem("notification_times");let n=[];if(e)try{n=JSON.parse(e)}catch(r){console.error("Error parsing notification times:",r)}return{enabled:t,times:n}}function n2e(){fte("Test Notification ","This is a test notification to verify your settings are working correctly.",{tag:"test-notification"})}if(typeof window<"u"){const t=pte();t.enabled&&t.times.length>0&&setTimeout(()=>{$O(!0,"once",t.times)},1e3)}const r2e=({buttonRef:t,isInArrowTutorialStep:e})=>{const{isActive:n}=ka(),r=_.useRef(!1);return _.useEffect(()=>{if(!t.current)return;const i=t.current.querySelector("button"),o=t.current.querySelector(".bg-primary\\/30"),a=t.current,s=r.current!==e;if(r.current=e,console.log("[ButtonStateManager] State change detected:",{isInArrowTutorialStep:e,stateChanged:s,isActive:n,hasButtonElement:!!i,hasGlowDiv:!!o}),e){if(i){console.log("[ButtonStateManager] Applying tutorial styling"),i.classList.add("tutorial-button-highlight");const l=i;l.style.boxShadow="0 0 35px 20px var(--color-theme)",l.style.animation="button-pulse 1.5s infinite alternate",l.style.border="2px solid white",l.style.transform="scale(1.05)",l.style.zIndex="10000"}if(o){const l=o;l.style.filter="drop-shadow(0 0 25px var(--color-theme))",l.style.opacity="0.95"}a.style.position="fixed",a.style.top="50%",a.style.left="50%",a.style.transform="translate(-50%, -50%)",a.style.zIndex="10000"}else{if(console.log("[ButtonStateManager] Removing tutorial styling and resetting"),i){i.classList.remove("tutorial-button-highlight");const l=i;l.style.boxShadow="",l.style.animation="",l.style.border="",l.style.transform="",l.style.zIndex=""}if(o){const l=o;l.style.filter="",l.style.opacity=""}a.style.position="fixed",a.style.top="50%",a.style.left="50%",a.style.transform="translate(-50%, -50%)",a.style.zIndex="40",a.style.margin="0",a.style.padding="0"}return()=>{if(i){i.classList.remove("tutorial-button-highlight");const l=i;l.style.boxShadow="",l.style.animation="",l.style.border="",l.style.transform="",l.style.zIndex=""}if(o){const l=o;l.style.filter="",l.style.opacity=""}}},[e,n]),null},i2e=()=>{var u;const t=Za(),{isActive:e,currentStep:n,steps:r}=ka(),{translate:i}=In(),o=_.useRef(null),a=_.useRef(`journal-nav-${Date.now()}`),s=_.useRef(!0),l=e&&((u=r[n])==null?void 0:u.id)===2;_.useEffect(()=>{var f;return XAe(a.current),s.current=!0,console.log("[JournalNavigationButton] Component mounted",{isActive:e,currentStep:n,isInArrowTutorialStep:l,stepId:(f=r[n])==null?void 0:f.id}),()=>{s.current=!1,KAe(a.current),console.log("[JournalNavigationButton] Component unmounted")}},[]);const c=async()=>{if(!s.current){console.log("[JournalNavigationButton] Navigation cancelled - component unmounted");return}try{console.log("[JournalNavigationButton] Navigating to journal page"),t("/app/journal"),e?JAe("Journal","Opening your journal space",a.current):await Af("navigation.journal","toasts.openingJournalSpace",i,3e3,void 0,a.current)}catch(f){console.error("[JournalNavigationButton] Navigation error:",f),s.current&&await Af("toasts.error","toasts.navigationError",i,5e3,void 0,a.current)}};return s.current?d.jsxs(d.Fragment,{children:[d.jsx(r2e,{buttonRef:o,isInArrowTutorialStep:l}),d.jsxs("div",{className:"journal-arrow-button",style:{position:"fixed",top:"45%",left:"50%",transform:"translate(-50%, -50%)",zIndex:l?1e4:40,margin:0,padding:0,pointerEvents:"auto",visibility:"visible",opacity:1,display:"flex",justifyContent:"center",alignItems:"center",width:"auto",height:"auto"},"data-testid":"journal-arrow-button",ref:o,children:[d.jsx(Ke.div,{className:"rounded-full bg-primary/30 blur-md z-0",initial:{scale:1,opacity:.5},animate:{scale:l?[1,1.4,1]:[1,1.15,1],opacity:l?[.6,1,.6]:[.5,.8,.5]},transition:{repeat:1/0,duration:l?1:2,ease:"easeInOut"},style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"calc(100% + 20px)",height:"calc(100% + 20px)"}}),d.jsx(Ke.button,{onClick:c,className:"w-16 h-16 rounded-full bg-primary flex items-center justify-center shadow-lg relative z-20",whileHover:{scale:1.1},whileTap:{scale:.95},initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},children:d.jsx(d0,{className:"text-primary-foreground h-8 w-8"})})]})]}):null};var HO=new Map,jE=new WeakMap,Y6=0,o2e=void 0;function a2e(t){return t?(jE.has(t)||(Y6+=1,jE.set(t,Y6.toString())),jE.get(t)):"0"}function s2e(t){return Object.keys(t).sort().filter(e=>t[e]!==void 0).map(e=>`${e}_${e==="root"?a2e(t.root):t[e]}`).toString()}function l2e(t){const e=s2e(t);let n=HO.get(e);if(!n){const r=new Map;let i;const o=new IntersectionObserver(a=>{a.forEach(s=>{var l;const c=s.isIntersecting&&i.some(u=>s.intersectionRatio>=u);t.trackVisibility&&typeof s.isVisible>"u"&&(s.isVisible=c),(l=r.get(s.target))==null||l.forEach(u=>{u(c,s)})})},t);i=o.thresholds||(Array.isArray(t.threshold)?t.threshold:[t.threshold||0]),n={id:e,observer:o,elements:r},HO.set(e,n)}return n}function c2e(t,e,n={},r=o2e){if(typeof window.IntersectionObserver>"u"&&r!==void 0){const l=t.getBoundingClientRect();return e(r,{isIntersecting:r,target:t,intersectionRatio:typeof n.threshold=="number"?n.threshold:0,time:0,boundingClientRect:l,intersectionRect:l,rootBounds:l}),()=>{}}const{id:i,observer:o,elements:a}=l2e(n),s=a.get(t)||[];return a.has(t)||a.set(t,s),s.push(e),o.observe(t),function(){s.splice(s.indexOf(e),1),s.length===0&&(a.delete(t),o.unobserve(t)),a.size===0&&(o.disconnect(),HO.delete(i))}}function u2e({threshold:t,delay:e,trackVisibility:n,rootMargin:r,root:i,triggerOnce:o,skip:a,initialInView:s,fallbackInView:l,onChange:c}={}){var u;const[f,h]=_.useState(null),p=_.useRef(),[y,g]=_.useState({inView:!!s,entry:void 0});p.current=c,_.useEffect(()=>{if(a||!f)return;let T;return T=c2e(f,(C,P)=>{g({inView:C,entry:P}),p.current&&p.current(C,P),P.isIntersecting&&o&&T&&(T(),T=void 0)},{root:i,rootMargin:r,threshold:t,trackVisibility:n,delay:e},l),()=>{T&&T()}},[Array.isArray(t)?t.toString():t,f,i,r,o,a,n,l,e]);const v=(u=y.entry)==null?void 0:u.target,b=_.useRef();!f&&v&&!o&&!a&&b.current!==v&&(b.current=v,g({inView:!!s,entry:void 0}));const w=[h,y.inView,y.entry];return w.ref=w[0],w.inView=w[1],w.entry=w[2],w}const d2e=()=>{const[t,e]=_.useState(""),[n,r]=_.useState(""),[i,o]=_.useState([]),[a,s]=_.useState(0),[l,c]=_.useState(!1),[u,f]=_.useState(null),[h,p]=_.useState(!1),{ref:y,inView:g}=u2e({triggerOnce:!1,threshold:.1}),{colorTheme:v}=Zr(),{currentLanguage:b}=In(),w=_.useRef(null),T=_.useRef(!1),C=_.useRef(b),P=_.useRef(!1);_.useEffect(()=>{e("Every moment is a fresh beginning."),r("T.S. Eliot"),c(!0),console.log("InspirationalQuote component mounted, default quote set")},[]);const M=async()=>{try{f(null),console.log("Fetching inspirational quotes from edge function");const{data:z,error:O}=await Ze.functions.invoke("inspirational-quotes");if(O){console.error("Error fetching quotes:",O),f("Could not load inspirational quotes");return}if(console.log("Received response from inspirational-quotes edge function:",z),z&&z.quotes&&Array.isArray(z.quotes)){console.log("Successfully parsed quotes:",z.quotes);const B=[...z.quotes].sort(()=>Math.random()-.5);if(o(B),B.length>0){const $=B[0];e($.quote),r($.author||"Unknown"),c(!0)}}else z&&z.error?(console.error("Error from edge function:",z.error),f(z.error)):(console.error("Unexpected response format:",z),f("Received invalid response format"))}catch(z){console.error("Exception when fetching quotes:",z),f("Failed to load inspirational quotes")}},k=()=>{w.current!==null&&(clearInterval(w.current),w.current=null),i.length>0&&(w.current=window.setInterval(()=>{if(T.current||P.current){console.log("Quote rotation skipped - translation in progress or rotation paused");return}s(z=>{const O=(z+1)%i.length,B=i[O];return B&&(console.log(`Quote rotating to index ${O}: "${B.quote.substring(0,30)}..."`),e(B.quote),r(B.author||"Unknown")),O})},1e4))};_.useEffect(()=>{if(g)return console.log("Quote component in view, fetching quotes"),M(),()=>{s(0),w.current!==null&&(clearInterval(w.current),w.current=null)}},[g]),_.useEffect(()=>{const z=()=>{document.visibilityState==="visible"&&g&&(console.log("Page became visible, fetching new quotes"),M())};return document.addEventListener("visibilitychange",z),window.addEventListener("focus",z),()=>{document.removeEventListener("visibilitychange",z),window.removeEventListener("focus",z),w.current!==null&&(clearInterval(w.current),w.current=null)}},[g]),_.useEffect(()=>{C.current!==b&&(console.log(`Language changed to ${b}, pausing quote rotation`),P.current=!0,C.current=b,setTimeout(()=>{console.log("Resuming quote rotation after language change"),P.current=!1},3e3))},[b]),_.useEffect(()=>{const z=()=>{console.log("Language change event detected, pausing quote rotation"),P.current=!0,C.current!==b&&(C.current=b),setTimeout(()=>{console.log("Resuming quote rotation after language change event"),P.current=!1},3e3)};return window.addEventListener("languageChange",z),()=>{window.removeEventListener("languageChange",z)}},[b]),_.useEffect(()=>(i.length>0&&k(),()=>{w.current!==null&&(clearInterval(w.current),w.current=null)}),[i]);const I=()=>{T.current=!0,p(!0)},U=()=>{T.current=!1,p(!1)};return!l&&!u?null:d.jsx("div",{ref:y,className:"flex items-center justify-center w-full py-2",children:d.jsx(Kc,{mode:"wait",children:l&&d.jsxs(Ke.div,{className:"flex flex-col justify-center w-full max-w-2xl px-6",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:1.2},children:[d.jsx("div",{className:"flex mb-2 justify-center",children:d.jsx(PJ,{className:"h-6 w-6 text-theme opacity-100"})}),d.jsx("p",{className:"text-foreground text-center text-lg font-medium italic mb-1",children:d.jsx(Q,{text:`"${t}"`,forceTranslate:!0,onTranslationStart:I,onTranslationEnd:U})}),n&&d.jsx("p",{className:"text-theme text-center font-bold text-sm",children:d.jsx(Q,{text:` ${n}`,forceTranslate:!0,onTranslationStart:I,onTranslationEnd:U})}),h&&d.jsx("div",{className:"flex justify-center mt-2",children:d.jsx("div",{className:"w-2 h-2 bg-theme/50 rounded-full animate-pulse"})})]},`quote-${a}-${b}`)})})},f2e=({themesData:t,themeColor:e})=>{const[n,r]=_.useState([]),[i,o]=_.useState([]),{theme:a}=Zr(),[s,l]=_.useState("7-day themes"),c=a==="dark",u=_.useRef({}),f=_.useRef(0),[h,p]=_.useState(!1),[y,g]=_.useState(!0),{translate:v,currentLanguage:b}=In(),w=async M=>{console.log(`FloatingThemeStrips: GOOGLE TRANSLATE ONLY - Translating "${M}" to ${b}`);try{if(b==="en"||!M)return M||"";const k=await v(M,"en");return console.log(`FloatingThemeStrips: Google Translate result: "${k}"`),k||M}catch(k){return console.error(`FloatingThemeStrips: Google Translate error for "${M}":`,k),M}};_.useEffect(()=>{console.log("FloatingThemeStrips: Translating label");const M=async()=>{try{const I=await w("7-day themes");console.log("FloatingThemeStrips: Label translated to:",I),l(I||"7-day themes")}catch(I){console.error("FloatingThemeStrips: Error translating label:",I)}};M();const k=async()=>{console.log("FloatingThemeStrips: Language change detected"),Object.values(u.current).forEach(I=>{if(I&&typeof I.stop=="function")try{I.stop()}catch(U){console.error("FloatingThemeStrips: Error stopping animation",U)}}),u.current={},M(),p(!1),f.current+=1};return window.addEventListener("languageChange",k),()=>{window.removeEventListener("languageChange",k)}},[b]);const T=_.useMemo(()=>{if(console.log("FloatingThemeStrips: Processing theme data",{themesCount:(t==null?void 0:t.length)||0}),!(t!=null&&t.length))return[];const M=new Map;t.forEach(I=>{if(I!=null&&I.theme)if(!M.has(I.theme))M.set(I.theme,{count:1,sentiment:I.sentiment});else{const U=M.get(I.theme);M.set(I.theme,{count:U.count+1,sentiment:(U.sentiment+I.sentiment)/2})}});const k=Array.from(M.entries()).map(([I,{count:U,sentiment:z}])=>({theme:I,sentiment:z,count:U})).sort((I,U)=>U.count-I.count).slice(0,8);return console.log("FloatingThemeStrips: Theme data processed",{processedCount:k.length,samples:k.slice(0,2).map(I=>I.theme)}),k},[t]);_.useEffect(()=>{T.length>0&&(console.log("FloatingThemeStrips: Updating unique themes",{count:T.length}),r(T),f.current+=1,Object.values(u.current).forEach(M=>{if(M&&typeof M.stop=="function")try{M.stop()}catch(k){console.error("FloatingThemeStrips: Error stopping animation on data change",k)}}),u.current={})},[T]);const C=_.useCallback(async M=>{if(!M.length){console.log("FloatingThemeStrips: No themes to translate"),p(!0);return}console.log(`FloatingThemeStrips: GOOGLE TRANSLATE ONLY - Translating ${M.length} themes to ${b||"en"}`);try{const k=M.map(O=>O.theme).filter(Boolean);if(k.length===0){console.log("FloatingThemeStrips: No valid theme texts to translate"),o(M),p(!0);return}const I=await Promise.all(k.map(async O=>{try{const B=await v(O,"en");return console.log(`FloatingThemeStrips: Google Translate: "${O}"  "${B}"`),{original:O,translated:B}}catch(B){return console.error(`FloatingThemeStrips: Google Translate error for "${O}"`,B),{original:O,translated:O}}})),U=new Map;I.forEach(O=>U.set(O.original,O.translated));const z=M.map(O=>({...O,translatedTheme:U.get(O.theme)||O.theme}));console.log("FloatingThemeStrips: Google Translate completed successfully",{translatedCount:z.length,samples:z.slice(0,2).map(O=>({original:O.theme,translated:O.translatedTheme}))}),o(z),p(!0),f.current+=1}catch(k){console.error("FloatingThemeStrips: Error with Google Translate:",k),o(M),p(!0),f.current+=1}},[b,v]);if(_.useEffect(()=>{n.length>0&&(console.log(`FloatingThemeStrips: Themes updated or language changed to ${b}`),C(n))},[b,n,C]),_.useEffect(()=>{y&&n.length>0&&(console.log("FloatingThemeStrips: Initial load completed"),g(!1))},[y,n]),_.useEffect(()=>(console.log("FloatingThemeStrips: Setting up cleanup"),()=>{console.log("FloatingThemeStrips: Cleaning up animations"),Object.entries(u.current).forEach(([M,k])=>{if(k&&typeof k.stop=="function")try{console.log(`FloatingThemeStrips: Cleaning animation: ${M}`),k.stop(),delete u.current[M]}catch(I){console.error(`FloatingThemeStrips: Error cleaning animation: ${M}`,I)}})}),[]),!(t!=null&&t.length))return console.log("FloatingThemeStrips: No themes data, skipping render"),null;const P=h?i:n;return P!=null&&P.length?(console.log(`FloatingThemeStrips: Rendering with animation key ${f.current}, language: ${b}`),d.jsxs("div",{className:"relative w-full h-full overflow-hidden",children:[d.jsx("div",{className:"absolute top-[70px] right-6 z-50",children:d.jsx(Ke.div,{initial:{scale:1},animate:{scale:[1,1.05,1]},transition:{duration:2,repeat:1/0,repeatType:"reverse"},className:"px-1.5 py-0.5 text-center rounded-sm scale-75",style:{backgroundColor:`${e}50`,borderLeft:`3px solid ${e}`,borderRight:`3px solid ${e}`,boxShadow:`0 0 1px 0 ${e}40`,backdropFilter:"blur(4px)"},children:d.jsx(Q,{text:s||"7-day themes",forceTranslate:!0,className:"text-xs font-medium whitespace-nowrap",style:{color:c?"#ffffff":"#000000",fontWeight:500,letterSpacing:"0.01em",WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale"}})})}),d.jsx("div",{className:"absolute inset-x-0 top-20 bottom-80 pointer-events-none",children:P.slice(0,6).map((M,k)=>{const I=100/Math.min(6,P.length),U=Math.random()*5-2.5,z=k*I+I/2+U,O=k%2===0,B=15+Math.random()*10,$=`theme-strip-${M.theme}-${k}-${b}-${f.current}`,F=M.translatedTheme||M.theme;return d.jsx(Ke.div,{className:"absolute left-0 w-auto h-8 px-3 py-1 flex items-center rounded-sm",style:{top:`${z}%`,backgroundColor:`${e}50`,borderLeft:`3px solid ${e}`,borderRight:`3px solid ${e}`,boxShadow:`0 0 1px 0 ${e}40`,backdropFilter:"blur(4px)",zIndex:15},initial:{x:O?-300:"100vw",opacity:0},animate:{x:O?["100vw","0vw","-100vw"]:["-100vw","0vw","100vw"],opacity:[0,1,0]},transition:{duration:B,repeat:1/0,repeatType:"loop",ease:"linear",delay:k*2.5},onAnimationStart:J=>{u.current[$]=J},children:d.jsx("span",{className:"text-sm md:text-base font-medium whitespace-nowrap",style:{color:c?"#ffffff":"#000000",textShadow:"none",fontWeight:500,WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale"},children:F})},$)})})]})):(console.log("FloatingThemeStrips: No themes to show, skipping render"),null)};function X6(t,e,n){const r=$Ae(),i=m2e(t,n.timeZone,n.locale??r.locale);return"formatToParts"in i?h2e(i,e):p2e(i,e)}function h2e(t,e){const n=t.formatToParts(e);for(let r=n.length-1;r>=0;--r)if(n[r].type==="timeZoneName")return n[r].value}function p2e(t,e){const n=t.format(e).replace(/\u200E/g,""),r=/ [\w-+ ]+$/.exec(n);return r?r[0].substr(1):""}function m2e(t,e,n){return new Intl.DateTimeFormat(n?[n.code,"en-US"]:void 0,{timeZone:e,timeZoneName:t})}function g2e(t,e){const n=b2e(e);return"formatToParts"in n?v2e(n,t):x2e(n,t)}const y2e={year:0,month:1,day:2,hour:3,minute:4,second:5};function v2e(t,e){try{const n=t.formatToParts(e),r=[];for(let i=0;i<n.length;i++){const o=y2e[n[i].type];o!==void 0&&(r[o]=parseInt(n[i].value,10))}return r}catch(n){if(n instanceof RangeError)return[NaN];throw n}}function x2e(t,e){const n=t.format(e),r=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(n);return[parseInt(r[3],10),parseInt(r[1],10),parseInt(r[2],10),parseInt(r[4],10),parseInt(r[5],10),parseInt(r[6],10)]}const uP={},K6=new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:"America/New_York",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),w2e=K6==="06/25/2014, 00:00:00"||K6==="06/25/2014 00:00:00";function b2e(t){return uP[t]||(uP[t]=w2e?new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:t,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})),uP[t]}function mte(t,e,n,r,i,o,a){const s=new Date(0);return s.setUTCFullYear(t,e,n),s.setUTCHours(r,i,o,a),s}const J6=36e5,S2e=6e4,dP={timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-])(\d{2}):?(\d{2})$/};function Z4(t,e,n){if(!t)return 0;let r=dP.timezoneZ.exec(t);if(r)return 0;let i,o;if(r=dP.timezoneHH.exec(t),r)return i=parseInt(r[1],10),Z6(i)?-(i*J6):NaN;if(r=dP.timezoneHHMM.exec(t),r){i=parseInt(r[2],10);const a=parseInt(r[3],10);return Z6(i,a)?(o=Math.abs(i)*J6+a*S2e,r[1]==="+"?-o:o):NaN}if(T2e(t)){e=new Date(e||Date.now());const a=n?e:E2e(e),s=VO(a,t);return-(n?s:_2e(e,s,t))}return NaN}function E2e(t){return mte(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds())}function VO(t,e){const n=g2e(t,e),r=mte(n[0],n[1]-1,n[2],n[3]%24,n[4],n[5],0).getTime();let i=t.getTime();const o=i%1e3;return i-=o>=0?o:1e3+o,r-i}function _2e(t,e,n){let i=t.getTime()-e;const o=VO(new Date(i),n);if(e===o)return e;i-=o-e;const a=VO(new Date(i),n);return o===a?o:Math.max(o,a)}function Z6(t,e){return-23<=t&&t<=23&&(e==null||0<=e&&e<=59)}const Q6={};function T2e(t){if(Q6[t])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:t}),Q6[t]=!0,!0}catch{return!1}}const C2e=60*1e3,A2e={X:function(t,e,n){const r=fP(n.timeZone,t);if(r===0)return"Z";switch(e){case"X":return e8(r);case"XXXX":case"XX":return Cy(r);case"XXXXX":case"XXX":default:return Cy(r,":")}},x:function(t,e,n){const r=fP(n.timeZone,t);switch(e){case"x":return e8(r);case"xxxx":case"xx":return Cy(r);case"xxxxx":case"xxx":default:return Cy(r,":")}},O:function(t,e,n){const r=fP(n.timeZone,t);switch(e){case"O":case"OO":case"OOO":return"GMT"+M2e(r,":");case"OOOO":default:return"GMT"+Cy(r,":")}},z:function(t,e,n){switch(e){case"z":case"zz":case"zzz":return X6("short",t,n);case"zzzz":default:return X6("long",t,n)}}};function fP(t,e){const n=t?Z4(t,e,!0)/C2e:(e==null?void 0:e.getTimezoneOffset())??0;if(Number.isNaN(n))throw new RangeError("Invalid time zone specified: "+t);return n}function NT(t,e){const n=t<0?"-":"";let r=Math.abs(t).toString();for(;r.length<e;)r="0"+r;return n+r}function Cy(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=NT(Math.floor(r/60),2),o=NT(Math.floor(r%60),2);return n+i+e+o}function e8(t,e){return t%60===0?(t>0?"-":"+")+NT(Math.abs(t)/60,2):Cy(t,e)}function M2e(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Math.floor(r/60),o=r%60;return o===0?n+String(i):n+String(i)+e+NT(o,2)}function t8(t){const e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),+t-+e}const P2e=/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/,hP=36e5,n8=6e4,k2e=2,_a={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:P2e};function gte(t,e={}){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(t===null)return new Date(NaN);const n=e.additionalDigits==null?k2e:Number(e.additionalDigits);if(n!==2&&n!==1&&n!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]")return new Date(t.getTime());if(typeof t=="number"||Object.prototype.toString.call(t)==="[object Number]")return new Date(t);if(Object.prototype.toString.call(t)!=="[object String]")return new Date(NaN);const r=N2e(t),{year:i,restDateString:o}=R2e(r.date,n),a=j2e(o,i);if(a===null||isNaN(a.getTime()))return new Date(NaN);if(a){const s=a.getTime();let l=0,c;if(r.time&&(l=I2e(r.time),l===null||isNaN(l)))return new Date(NaN);if(r.timeZone||e.timeZone){if(c=Z4(r.timeZone||e.timeZone,new Date(s+l)),isNaN(c))return new Date(NaN)}else c=t8(new Date(s+l)),c=t8(new Date(s+l+c));return new Date(s+l+c)}else return new Date(NaN)}function N2e(t){const e={};let n=_a.dateTimePattern.exec(t),r;if(n?(e.date=n[1],r=n[3]):(n=_a.datePattern.exec(t),n?(e.date=n[1],r=n[2]):(e.date=null,r=t)),r){const i=_a.timeZone.exec(r);i?(e.time=r.replace(i[1],""),e.timeZone=i[1].trim()):e.time=r}return e}function R2e(t,e){if(t){const n=_a.YYY[e],r=_a.YYYYY[e];let i=_a.YYYY.exec(t)||r.exec(t);if(i){const o=i[1];return{year:parseInt(o,10),restDateString:t.slice(o.length)}}if(i=_a.YY.exec(t)||n.exec(t),i){const o=i[1];return{year:parseInt(o,10)*100,restDateString:t.slice(o.length)}}}return{year:null}}function j2e(t,e){if(e===null)return null;let n,r,i;if(!t||!t.length)return n=new Date(0),n.setUTCFullYear(e),n;let o=_a.MM.exec(t);if(o)return n=new Date(0),r=parseInt(o[1],10)-1,i8(e,r)?(n.setUTCFullYear(e,r),n):new Date(NaN);if(o=_a.DDD.exec(t),o){n=new Date(0);const a=parseInt(o[1],10);return D2e(e,a)?(n.setUTCFullYear(e,0,a),n):new Date(NaN)}if(o=_a.MMDD.exec(t),o){n=new Date(0),r=parseInt(o[1],10)-1;const a=parseInt(o[2],10);return i8(e,r,a)?(n.setUTCFullYear(e,r,a),n):new Date(NaN)}if(o=_a.Www.exec(t),o)return i=parseInt(o[1],10)-1,o8(i)?r8(e,i):new Date(NaN);if(o=_a.WwwD.exec(t),o){i=parseInt(o[1],10)-1;const a=parseInt(o[2],10)-1;return o8(i,a)?r8(e,i,a):new Date(NaN)}return null}function I2e(t){let e,n,r=_a.HH.exec(t);if(r)return e=parseFloat(r[1].replace(",",".")),pP(e)?e%24*hP:NaN;if(r=_a.HHMM.exec(t),r)return e=parseInt(r[1],10),n=parseFloat(r[2].replace(",",".")),pP(e,n)?e%24*hP+n*n8:NaN;if(r=_a.HHMMSS.exec(t),r){e=parseInt(r[1],10),n=parseInt(r[2],10);const i=parseFloat(r[3].replace(",","."));return pP(e,n,i)?e%24*hP+n*n8+i*1e3:NaN}return null}function r8(t,e,n){e=e||0,n=n||0;const r=new Date(0);r.setUTCFullYear(t,0,4);const i=r.getUTCDay()||7,o=e*7+n+1-i;return r.setUTCDate(r.getUTCDate()+o),r}const O2e=[31,28,31,30,31,30,31,31,30,31,30,31],L2e=[31,29,31,30,31,30,31,31,30,31,30,31];function yte(t){return t%400===0||t%4===0&&t%100!==0}function i8(t,e,n){if(e<0||e>11)return!1;if(n!=null){if(n<1)return!1;const r=yte(t);if(r&&n>L2e[e]||!r&&n>O2e[e])return!1}return!0}function D2e(t,e){if(e<1)return!1;const n=yte(t);return!(n&&e>366||!n&&e>365)}function o8(t,e){return!(t<0||t>52||e!=null&&(e<0||e>6))}function pP(t,e,n){return!(t<0||t>=25||e!=null&&(e<0||e>=60)||n!=null&&(n<0||n>=60))}const F2e=/([xXOz]+)|''|'(''|[^'])+('|$)/g;function RT(t,e,n={}){e=String(e);const r=e.match(F2e);if(r){const i=gte(n.originalDate||t,n);e=r.reduce(function(o,a){if(a[0]==="'")return o;const s=o.indexOf(a),l=o[s-1]==="'",c=o.replace(a,"'"+A2e[a[0]](i,a,n)+"'");return l?c.substring(0,s-1)+c.substring(s+1):c},e)}return ir(t,e,n)}function vte(t,e,n){t=gte(t,n);const r=Z4(e,t,!0),i=new Date(t.getTime()-r),o=new Date(0);return o.setFullYear(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate()),o.setHours(i.getUTCHours(),i.getUTCMinutes(),i.getUTCSeconds(),i.getUTCMilliseconds()),o}function z2e(){const t=new Date,e=Intl.DateTimeFormat().resolvedOptions().timeZone||"UTC";return console.log("[DateService] Getting client time info:",{timestamp:t.toISOString(),timezone:e,offset:t.getTimezoneOffset(),localString:t.toString()}),{timestamp:t.toISOString(),timezoneName:e,timezoneOffset:t.getTimezoneOffset()}}function Q4(t,e,n,r={}){const i=new Date;console.log(`[DateService] ${t}:`,{input:e,output:n,currentServerTime:i.toISOString(),currentLocalTime:i.toString(),timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,weekNumber:D1(i,{weekStartsOn:1}),year:SA(i),...r})}function xte(t=new Date,e="UTC"){const n=typeof t=="string"?new Date(t):t;if(!X4(n))return console.error(`[DateService] Invalid date provided: ${t}`),new Date;Q4("Converting date to timezone",n.toISOString(),e);try{const r=vte(n,e);return console.log(`[DateService] Date converted to ${e}:`,{original:n.toISOString(),converted:r.toISOString(),formatted:ir(r,"yyyy-MM-dd HH:mm:ss")}),r}catch(r){return console.error(`[DateService] Error converting to timezone ${e}:`,r),n}}function wte(t,e="UTC"){const n=new Date,r=e||(t==null?void 0:t.timezoneName)||"UTC";console.log(`[DateService] Calculating current week range for timezone: ${r}`);try{const i=xte(n,r),o=oa(i,{weekStartsOn:1}),a=PT(i,{weekStartsOn:1}),s=D1(i,{weekStartsOn:1}),l=SA(i),c=`${ir(o,"EEEE, MMMM d")} - ${ir(a,"EEEE, MMMM d, yyyy")}`,u={startDate:o.toISOString(),endDate:a.toISOString(),periodName:"Current Week",weekNumber:s,year:l,isCurrentWeek:!0,isLastWeek:!1};return Q4("Current week calculation",{timezone:r,now:n.toISOString()},{formattedRange:c,weekStart:o.toISOString(),weekEnd:a.toISOString(),weekNumber:s,year:l}),{formattedRange:c,rangeObj:u}}catch(i){console.error("[DateService] Error calculating current week:",i);const o=oa(n,{weekStartsOn:1}),a=PT(n,{weekStartsOn:1});return{formattedRange:`${ir(o,"EEEE, MMMM d")} - ${ir(a,"EEEE, MMMM d, yyyy")}`,rangeObj:{startDate:o.toISOString(),endDate:a.toISOString(),periodName:"Current Week",isCurrentWeek:!0,isLastWeek:!1}}}}function U2e(t,e="UTC"){const n=new Date,r=e||(t==null?void 0:t.timezoneName)||"UTC";console.log(`[DateService] Calculating last week range for timezone: ${r}`);try{const i=xte(n,r),o=kT(i,7),a=oa(o,{weekStartsOn:1}),s=PT(o,{weekStartsOn:1}),l=D1(o,{weekStartsOn:1}),c=SA(o),u=`${ir(a,"EEEE, MMMM d")} - ${ir(s,"EEEE, MMMM d, yyyy")}`,f={startDate:a.toISOString(),endDate:s.toISOString(),periodName:"Last Week",weekNumber:l,year:c,isCurrentWeek:!1,isLastWeek:!0};return Q4("Last week calculation",{timezone:r,now:n.toISOString()},{formattedRange:u,weekStart:a.toISOString(),weekEnd:s.toISOString(),weekNumber:l,year:c}),{formattedRange:u,rangeObj:f}}catch(i){console.error("[DateService] Error calculating last week:",i);const o=kT(n,7),a=oa(o,{weekStartsOn:1}),s=PT(o,{weekStartsOn:1});return{formattedRange:`${ir(a,"EEEE, MMMM d")} - ${ir(s,"EEEE, MMMM d, yyyy")}`,rangeObj:{startDate:a.toISOString(),endDate:s.toISOString(),periodName:"Last Week",isCurrentWeek:!1,isLastWeek:!0}}}}function B2e(){const t=new Date,e=Intl.DateTimeFormat().resolvedOptions().timeZone;console.log("[DateService] === TIMEZONE DEBUG INFO ==="),console.log("Current date and time details:"),console.log(`- Date object: ${t}`),console.log(`- ISO string: ${t.toISOString()}`),console.log(`- Local string: ${t.toString()}`),console.log(`- Timezone: ${e}`),console.log(`- Timezone offset: ${t.getTimezoneOffset()} minutes`),console.log(`- Formatted: ${ir(t,"yyyy-MM-dd HH:mm:ss EEEE")}`),console.log(`- Week number: ${D1(t,{weekStartsOn:1})}`),console.log(`- Year: ${SA(t)}`),console.log(`- Day of week: ${t.getDay()} (0=Sunday, 1=Monday, ..., 6=Saturday)`),console.log(`
--- Week Calculations ---`);const n=wte(),r=U2e();console.log(`Current week: ${n.formattedRange}`),console.log(`Last week: ${r.formattedRange}`),console.log("=== END TIMEZONE DEBUG ===")}const $2e=()=>{const{user:t}=or(),{colorTheme:e,customColor:n}=Zr(),[r,i]=_.useState(null),[o,a]=_.useState(!0),[s,l]=_.useState(null),[c,u]=_.useState([]),[f,h]=_.useState(!1),[p,y]=_.useState(0),g=3,v=2e3,b=()=>{switch(e){case"Default":return"#3b82f6";case"Calm":return"#8b5cf6";case"Soothing":return"#FFDEE2";case"Energy":return"#f59e0b";case"Focus":return"#10b981";case"Custom":return n;default:return"#3b82f6"}};_.useEffect(()=>{const P=async()=>{if(t!=null&&t.id)try{a(!0),l(null);const M=z2e();console.log("JournalSummaryCard: Client timezone info",M);let k;try{const{data:U,error:z}=await Ze.functions.invoke("journal-summary",{body:{userId:t.id,days:7,clientTimeInfo:M}});z?(console.error("Error fetching journal summary:",z),l("Failed to load your journal summary")):k=U}catch(U){console.error("Exception in journal summary fetch:",U),l("Failed to connect to the journal summary service")}const I=new Date;I.setDate(I.getDate()-7);try{const{data:U,error:z}=await Ze.from("Journal Entries").select("master_themes, sentiment").eq("user_id",t.id).gte("created_at",I.toISOString()).not("master_themes","is",null);if(console.log("JournalSummaryCard: Fetched journal entries",{entriesCount:(U==null?void 0:U.length)||0,error:z==null?void 0:z.message,dateFilter:I.toISOString()}),z)console.error("Error fetching master themes:",z);else if(U&&U.length>0){const O=[];U.forEach(B=>{if(B.master_themes&&Array.isArray(B.master_themes)){const $=B.sentiment?parseFloat(B.sentiment):0;B.master_themes.forEach(F=>{F&&typeof F=="string"&&O.push({theme:F,sentiment:$})})}}),console.log("JournalSummaryCard: Processed theme data",{count:O.length,samples:O.slice(0,3).map(B=>B.theme)}),O.length>0?u(O):(console.log("JournalSummaryCard: No valid theme data after processing"),u(w()))}else console.log("JournalSummaryCard: No journal entries with themes found"),u(w())}catch(U){console.error("Error fetching or processing journal entries:",U),u(w())}k&&i(k)}catch(M){if(console.error("Exception in journal summary fetch:",M),l("Unexpected error loading your journal summary"),u(w()),p<g){console.log(`JournalSummaryCard: Retry attempt ${p+1} of ${g} in ${v}ms`),y(k=>k+1),setTimeout(()=>P(),v);return}}finally{a(!1),h(!0)}};P()},[t==null?void 0:t.id,p]);const w=()=>[{theme:"Journal",sentiment:.5},{theme:"Writing",sentiment:.7},{theme:"Reflection",sentiment:.6}];if(!f)return null;s&&console.error("JournalSummaryCard error:",s);const T=c||[],C=b();return d.jsx("div",{className:"h-full w-full",children:f&&!o&&d.jsx(f2e,{themesData:T,themeColor:C})})},H2e=()=>{const t={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},e={hidden:{opacity:0,y:20},show:{opacity:1,y:0}};return d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"flex-1 px-0 absolute inset-0 z-30 pointer-events-none",children:d.jsx(Ke.div,{variants:t,initial:"hidden",animate:"show",className:"h-full w-full",children:d.jsx(Ke.div,{variants:e,className:"h-full w-full",children:d.jsx("div",{className:"w-full h-full",children:d.jsx($2e,{})})})})}),d.jsx("div",{className:"fixed inset-x-0 bottom-16 pb-5 z-25",children:d.jsx(d2e,{})})]})},V2e=({className:t,fullScreen:e=!1,bottomNavOffset:n=!1})=>{const r=_.useRef(null),{colorTheme:i,customColor:o}=Zr(),s=(()=>{switch(i){case"Calm":return{main:"rgba(139,92,246,0.6)",secondary:"rgba(124,58,237,0.4)",tertiary:"rgba(109,40,217,0.2)",pulse:"rgba(139,92,246,0.8)",light:"rgba(186,230,253,0.5)"};case"Energy":return{main:"rgba(245,158,11,0.6)",secondary:"rgba(234,88,12,0.4)",tertiary:"rgba(194,65,12,0.2)",pulse:"rgba(245,158,11,0.8)",light:"rgba(254,240,138,0.5)"};case"Soothing":return{main:"rgba(255,222,226,0.6)",secondary:"rgba(248,180,184,0.4)",tertiary:"rgba(244,114,182,0.2)",pulse:"rgba(244,114,182,0.8)",light:"rgba(253,242,248,0.5)"};case"Focus":return{main:"rgba(16,185,129,0.6)",secondary:"rgba(5,150,105,0.4)",tertiary:"rgba(6,95,70,0.2)",pulse:"rgba(16,185,129,0.8)",light:"rgba(209,250,229,0.5)"};case"Custom":const l=(c,u)=>{const f=parseInt(c.slice(1,3),16),h=parseInt(c.slice(3,5),16),p=parseInt(c.slice(5,7),16);return`rgba(${f},${h},${p},${u})`};return{main:l(o,.6),secondary:l(o,.4),tertiary:l(o,.2),pulse:l(o,.8),light:"rgba(255,255,255,0.5)"};default:return{main:"rgba(59,130,246,0.6)",secondary:"rgba(37,99,235,0.4)",tertiary:"rgba(29,78,216,0.2)",pulse:"rgba(59,130,246,0.8)",light:"rgba(219,234,254,0.5)"}}})();return d.jsxs("div",{ref:r,className:`absolute ${e?"fixed inset-0":"w-full h-full"} 
                 ${n?"bottom-16":"bottom-0"} 
                 left-0 right-0 top-0 overflow-hidden opacity-70 z-0 ${t}`,style:{pointerEvents:"none"},children:[d.jsxs("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-10",children:[d.jsx("div",{className:"w-32 h-32 rounded-full blur-3xl opacity-70",style:{backgroundColor:s.pulse}}),d.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-20 h-20 rounded-full bg-white blur-md opacity-80"})]}),[...Array(15)].map((l,c)=>d.jsx(Ke.div,{className:"absolute top-1/2 left-1/2 rounded-full",initial:{width:40,height:40,x:-20,y:-20,opacity:.8},animate:{width:1e3,height:1e3,x:-500,y:-500,opacity:0},style:{background:`radial-gradient(circle, ${s.main} 0%, ${s.secondary} 50%, ${s.tertiary} 100%)`},transition:{repeat:1/0,duration:6+c%3*.5,ease:"easeOut",delay:c*.6,repeatDelay:.1}},c)),d.jsx("div",{className:"absolute inset-0",style:{background:`linear-gradient(to bottom right, ${s.main}10, ${s.secondary}10, ${s.tertiary}10)`}}),d.jsx("div",{className:"absolute inset-0",style:{background:`linear-gradient(to top right, ${s.secondary}10, ${s.main}10, ${s.tertiary}10)`}}),[...Array(24)].map((l,c)=>d.jsx(Ke.div,{className:"absolute top-1/2 left-1/2 rounded-full",initial:{width:20,height:20,x:-10,y:-10,opacity:.7},animate:{width:700,height:700,x:-350,y:-350,opacity:0},style:{background:`radial-gradient(circle, rgba(255,255,255,0.8) 0%, ${s.light} 50%, ${s.tertiary} 100%)`},transition:{repeat:1/0,duration:4+c%5*.3,ease:"easeOut",delay:c*.4,repeatDelay:.05}},`small-${c}`)),[...Array(40)].map((l,c)=>d.jsx(Ke.div,{className:"absolute top-1/2 left-1/2 rounded-full bg-white/80",initial:{width:3,height:3,x:-1.5,y:-1.5,opacity:.9},animate:{x:-1.5+(Math.random()*800-400),y:-1.5+(Math.random()*800-400),opacity:0},transition:{repeat:1/0,duration:4+Math.random()*3,delay:c*.2,ease:"easeOut"}},`particle-${c}`))]})},W2e=()=>(_.useEffect(()=>{const t=new Image;t.src="/lovable-uploads/3f275134-f471-4af9-a7cd-700ccd855fe3.png"},[]),d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"absolute inset-0 z-0",children:d.jsx(V2e,{fullScreen:!0,bottomNavOffset:!0})}),d.jsx("div",{className:"hidden",children:d.jsx("img",{src:"/lovable-uploads/3f275134-f471-4af9-a7cd-700ccd855fe3.png",alt:"Preload Ruh's avatar",width:"1",height:"1"})})]})),G2e=()=>{var s,l;const{isActive:t,currentStep:e,steps:n,navigationState:r,startTutorial:i}=ka(),{user:o}=or(),a=t&&((s=n[e])==null?void 0:s.id)===1;return t&&((l=n[e])==null||l.id),_.useEffect(()=>{const c=async()=>{if(o)try{console.log("[Home] Checking if tutorial should be started for user:",o.id);const{data:u,error:f}=await Ze.from("profiles").select("tutorial_completed, tutorial_step").eq("id",o.id).maybeSingle();if(f){console.error("[Home] Error checking tutorial status:",f);return}if(u&&u.tutorial_completed==="NO"&&!t&&!r.inProgress)console.log("[Home] Tutorial needed but not active, requesting startup"),setTimeout(()=>{!t&&!r.inProgress&&(console.log("[Home] Starting tutorial as backup measure"),i())},200);else if(u)console.log("[Home] Tutorial status check complete:",{tutorialCompleted:u.tutorial_completed,isActive:t,navigationInProgress:r.inProgress});else{console.log("[Home] New user detected, setting up tutorial");const{error:h}=await Ze.from("profiles").upsert({id:o.id,tutorial_completed:"NO",tutorial_step:0});h||setTimeout(()=>{console.log("[Home] Starting tutorial for new user"),i()},200)}}catch(u){console.error("[Home] Error in tutorial initialization logic:",u)}};!t&&!r.inProgress&&c()},[o,i,t,r.inProgress]),_.useEffect(()=>{var c;return console.log("[Home] Component mounted, tutorial state:",{isActive:t,currentStep:e,stepId:(c=n[e])==null?void 0:c.id,navigationInProgress:r.inProgress}),document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.width="100%",document.body.style.height="100%",document.body.style.top="0",document.body.style.left="0",()=>{document.body.style.overflow="",document.body.style.position="",document.body.style.width="",document.body.style.height="",document.body.style.top="",document.body.style.left=""}},[t,e,n,r]),d.jsxs("div",{className:"min-h-screen bg-background text-foreground relative overflow-hidden",style:{touchAction:"none",overflow:"hidden",position:"fixed",top:0,left:0,right:0,bottom:0,width:"100%",height:"100%"},children:[d.jsx(W2e,{}),d.jsx(i2e,{}),d.jsx(H2e,{}),d.jsx("div",{className:`relative ${a?"z-[9999]":"z-20"} flex flex-col`,children:d.jsx(YAe,{})})]})},q2e=async t=>{try{console.log("[JournalService] Attempting to delete all journal entries for user:",t);const{data:e,error:n}=await Ze.rpc("delete_all_user_journal_entries",{p_user_id:t});if(n)throw console.error("[JournalService] Error deleting all entries:",n),new Error(`Failed to delete entries: ${n.message}`);const r=e;if(!r.success)throw console.error("[JournalService] Function returned error:",r.error),new Error(r.error||"Failed to delete entries");return console.log("[JournalService] Successfully deleted entries:",r),{success:!0,deletedEntries:r.deleted_entries,deletedEmbeddings:r.deleted_embeddings}}catch(e){throw console.error("[JournalService] Exception in deleteAllUserJournalEntries:",e),e}},Y2e=async t=>{try{console.log("[JournalService] Checking user profile for:",t);const{data:e,error:n}=await Ze.from("profiles").select("id").eq("id",t).maybeSingle();return n?(console.error("[JournalService] Error checking user profile:",n),!1):!!e}catch(e){return console.error("[JournalService] Exception in checkUserProfile:",e),!1}},a8=async t=>{try{console.log("[JournalService] Creating user profile for:",t);const{error:e}=await Ze.from("profiles").insert({id:t});return e?(console.error("[JournalService] Error creating user profile:",e),!1):!0}catch(e){return console.error("[JournalService] Exception in createUserProfile:",e),!1}},X2e=async(t,e)=>{try{console.log("[JournalService] Fetching journal entries for user:",t);const{data:n,error:r}=await Ze.from("Journal Entries").select("*").eq("user_id",t).order("created_at",{ascending:!1});if(e!=null&&e.current&&(clearTimeout(e.current),e.current=null),r)throw console.error("[JournalService] Error fetching journal entries:",r),new Error(`Failed to fetch entries: ${r.message}`);return(n||[]).map(o=>({...o,content:o["refined text"]||o["transcription text"]||"",entities:Array.isArray(o.entities)?o.entities.map(a=>({type:a.type||"",name:a.name||"",text:a.text})):[],languages:Array.isArray(o.languages)?o.languages.filter(a=>typeof a=="string"):o.languages&&typeof o.languages=="object"&&!Array.isArray(o.languages)?[]:[]}))}catch(n){throw console.error("[JournalService] Exception in fetchJournalEntries:",n),n}},K2e=async(t,e)=>{try{console.log("[JournalService] Reprocessing journal entry:",t);const{error:n}=await Ze.from("Journal Entries").update({"refined text":e,"transcription text":e,Edit_Status:1}).eq("id",t);if(n)throw console.error("[JournalService] Error reprocessing journal entry:",n),new Error(`Failed to reprocess entry: ${n.message}`);return console.log("[JournalService] Successfully reprocessed entry:",t),!0}catch(n){throw console.error("[JournalService] Exception in reprocessJournalEntry:",n),n}},$t={entries:[],lastFetchTime:null,entryIds:new Set,cacheExpiryTime:0,lastDeletedEntryId:null,deletedEntryIds:new Set,lastUpdatedEntryId:null};function eF(t,e,n=!1){const[r,i]=_.useState(()=>{if($t.userId===t&&$t.entries.length>0&&(!$t.lastRefreshKey||$t.lastRefreshKey===e)&&Date.now()<$t.cacheExpiryTime){const Y=$t.entries.filter(L=>!$t.deletedEntryIds.has(L.id));return console.log("[useJournalEntries] Initializing from global cache:",Y.length),Y}return[]}),[o,a]=_.useState(!0),[s,l]=_.useState(()=>$t.lastFetchTime),[c,u]=_.useState(0),[f,h]=_.useState(e),[p,y]=_.useState(null),[g,v]=_.useState(null),b=_.useRef(!1),w=_.useRef(!1),T=_.useRef(null),C=_.useRef(0),P=_.useRef([]),M=_.useRef([]),k=_.useRef(!1),I=_.useRef(null),U=_.useRef([]),z=_.useRef({refreshKey:e}),O=_.useRef(new Set),B=_.useRef(null),$=_.useRef(null),F=_.useRef(new Set),J=_.useRef(null),K=_.useRef(null);_.useEffect(()=>{if(P.current=r,r.length>0&&t){const Y=[],L=new Set;for(const N of r)F.current.has(N.id)||$t.deletedEntryIds.has(N.id)||L.has(N.id)||(L.add(N.id),Y.push(N));J.current&&($t.lastDeletedEntryId=J.current,J.current=null),$t.entries=Y,$t.userId=t,$t.lastRefreshKey=e,$t.lastFetchTime=new Date,$t.entryIds=L,$t.cacheExpiryTime=Date.now()+6e4,I.current&&clearTimeout(I.current),I.current=setTimeout(()=>{console.log("[useJournalEntries] Cache validity expired, will refresh on next fetch"),$t.cacheExpiryTime=0},6e4)}},[r,t,e]),_.useEffect(()=>{const Y=N=>{if(N.detail&&N.detail.entryId){const V=Number(N.detail.entryId);console.log(`[useJournalEntries] Detected entry deleted event: ${V}`),F.current.add(V),$t.deletedEntryIds.add(V),$t.lastDeletedEntryId=V,J.current=V,$t.cacheExpiryTime=0,i(W=>W.filter(ne=>ne.id!==V))}},L=N=>{if(N.detail&&N.detail.entryId){const V=Number(N.detail.entryId),W=N.detail.newContent,ne=N.detail.displayContent,se=N.detail.isProcessing;console.log(`[useJournalEntries] Detected entry updated event: ${V}`,{newContent:(W==null?void 0:W.substring(0,50))+"...",displayContent:(ne==null?void 0:ne.substring(0,50))+"...",isProcessing:se}),K.current=V,$t.lastUpdatedEntryId=V,i(te=>te.map(ie=>ie.id===V?{...ie,content:ne||W||ie.content,"refined text":W||ie["refined text"],"transcription text":W||ie["transcription text"],Edit_Status:1,sentiment:se?null:ie.sentiment,emotions:se?null:ie.emotions,master_themes:se?[]:ie.master_themes,entities:se?[]:ie.entities}:ie)),$t.cacheExpiryTime=0,setTimeout(()=>{b.current||(console.log(`[useJournalEntries] Fetching updated analysis for entry: ${V}`),H())},2e3)}};return window.addEventListener("journalEntryDeleted",Y),window.addEventListener("journalEntryUpdated",L),()=>{window.removeEventListener("journalEntryDeleted",Y),window.removeEventListener("journalEntryUpdated",L)}},[]);const Z=_.useCallback(async Y=>{try{console.log("[useJournalEntries] Verifying user profile:",Y);const L=await Y2e(Y);if(v(L),!L){console.log("[useJournalEntries] Profile does not exist, creating one");const N=await a8(Y);return v(N),N}return L}catch(L){return console.error("[useJournalEntries] Error verifying user profile:",L),!1}},[]),H=_.useCallback(async()=>{if(!t){console.log("[useJournalEntries] No user ID provided for fetching entries"),a(!1),i([]),w.current=!0;return}console.log("[useJournalEntries] Starting fetch, currently fetching:",b.current,"cached entries:",$t.entries.length,"refreshKey:",e);const Y=$t.lastDeletedEntryId!==null||J.current!==null,L=$t.lastUpdatedEntryId!==null||K.current!==null;if((Y||L)&&(console.log("[useJournalEntries] Cache invalidated due to deletion or update"),$t.cacheExpiryTime=0),b.current&&z.current.userId===t&&z.current.refreshKey===e&&$t.userId===t&&$t.entries.length>0&&$t.lastRefreshKey===e&&Date.now()<$t.cacheExpiryTime&&!Y&&!L){console.log("[useJournalEntries] Skipping duplicate fetch with same parameters");return}if(z.current={userId:t,refreshKey:e},$t.userId===t&&$t.entries.length>0&&!Y){const V=$t.entries.filter(W=>!F.current.has(W.id)&&!$t.deletedEntryIds.has(W.id));console.log("[useJournalEntries] Using filtered cached entries while fetching fresh data:",V.length),i(V),k.current||(a(!1),k.current=!0)}if(g===!1){if(!await a8(t)){a(!1),y("Failed to create user profile");return}}else if(g===null&&!n&&!await Z(t)){a(!1),y("Failed to create user profile");return}y(null);try{b.current=!0,($t.entries.length===0||$t.userId!==t||Y||L)&&a(!0),console.log(`[useJournalEntries] Fetching entries for user ID: ${t} (fetch #${c+1})`),T.current&&clearTimeout(T.current),T.current=setTimeout(()=>{b.current&&(console.log("[useJournalEntries] Fetch is taking too long, setting loading to false"),a(!1),w.current=!0,b.current=!1)},8e3);const V=await X2e(t,T),W=V.filter(te=>!F.current.has(te.id)&&!$t.deletedEntryIds.has(te.id));if(console.log(`[useJournalEntries] Fetched ${V.length} entries, filtered to ${W.length} after removing deleted entries`),V.length===0?(C.current+=1,C.current>=2&&(B.current&&clearTimeout(B.current),B.current=setTimeout(()=>{console.log("[useJournalEntries] Retrying fetch after multiple empty responses"),H()},1500))):C.current=0,$.current){const te=$.current;if(console.log(`[useJournalEntries] Post-deletion check for ID: ${te}`),V.some(pe=>pe.id===te)){console.log(`[useJournalEntries] Deleted entry ${te} still found in results, will filter it out`);const pe=V.filter(de=>de.id!==te);$t.lastDeletedEntryId=te,i(pe),l(new Date),u(de=>de+1),$.current=null,setTimeout(()=>{console.log("[useJournalEntries] Scheduling follow-up fetch after deletion"),H()},2e3);return}else console.log(`[useJournalEntries] Confirmed entry ${te} is no longer in results`),$.current=null,$t.lastDeletedEntryId=null}if(K.current){const te=K.current;console.log(`[useJournalEntries] Post-update refresh for ID: ${te}`);const ie=V.find(pe=>pe.id===te);ie&&(console.log(`[useJournalEntries] Found updated entry ${te} with fresh analysis data`),i(pe=>pe.map(de=>de.id===te?{...de,...ie,content:de.content}:de)),K.current=null,$t.lastUpdatedEntryId=null)}const ne=[],se=new Set;for(const te of V)se.has(te.id)||(se.add(te.id),ne.push(te));M.current=ne,$t.entries=ne,$t.userId=t,$t.lastFetchTime=new Date,$t.lastRefreshKey=e,$t.entryIds=se,$t.cacheExpiryTime=Date.now()+6e4,ne.length>0||P.current.length===0?(console.log("[useJournalEntries] Setting entries:",ne.length),i(ne),O.current=se):ne.length===0&&P.current.length>0&&(($t.lastFetchTime?Date.now()-$t.lastFetchTime.getTime():0)<5e3?console.log("[useJournalEntries] Fetch returned empty during likely race condition, keeping existing entries"):console.log("[useJournalEntries] Fetch returned empty but keeping existing entries")),l(new Date),u(te=>te+1),w.current=!0}catch(V){console.error("[useJournalEntries] Error fetching entries:",V),y("Failed to load entries: "+V.message),M.current.length>0?(console.log("[useJournalEntries] Using last successful fetch:",M.current.length),i(M.current)):P.current.length===0&&i([]),w.current=!0}finally{a(!1),b.current=!1}},[t,c,g,Z,n,e]);return _.useEffect(()=>{const Y=L=>{if(!L.detail||!Array.isArray(L.detail.entries))return;const N=L.detail.entries,V=U.current;if((L.detail.forceUpdate===!0||N.length!==V.length)&&(console.log("[useJournalEntries] Processing entries changed, scheduling fetch"),U.current=N,N.length>V.length&&setTimeout(()=>{H()},1e3),N.length<V.length)){$t.cacheExpiryTime=0;for(let ne=0;ne<2;ne++)setTimeout(()=>{b.current||H()},300+ne*800)}};return window.addEventListener("processingEntriesChanged",Y),()=>{window.removeEventListener("processingEntriesChanged",Y)}},[H]),_.useEffect(()=>{const Y=L=>{!t||!L.detail||(console.log("[useJournalEntries] Detected refresh request, will fetch new data:",L.detail),L.detail.action==="delete"&&L.detail.entryId&&(console.log(`[useJournalEntries] Tracking deleted entry ID: ${L.detail.entryId}`),$.current=L.detail.entryId),L.detail.action==="delete"&&L.detail.entryId&&i(N=>N.filter(V=>V.id!==L.detail.entryId)),$t.cacheExpiryTime=0,b.current||setTimeout(()=>{H()},300))};return window.addEventListener("journalEntriesNeedRefresh",Y),()=>{window.removeEventListener("journalEntriesNeedRefresh",Y)}},[t,H]),_.useEffect(()=>{const Y=N=>{!N.detail||!N.detail.entryId||(console.log("[useJournalEntries] Detected entry mapping, will fetch new data:",N.detail.entryId),$t.cacheExpiryTime=0,t&&!b.current&&setTimeout(()=>{H()},300))},L=N=>{if(!(!N.detail||!N.detail.tempId)&&(console.log("[useJournalEntries] Detected entry completion, will fetch new data:",N.detail.tempId),$t.cacheExpiryTime=0,t&&!b.current))for(let V=0;V<2;V++)setTimeout(()=>{b.current||H()},500+V*1e3)};return window.addEventListener("processingEntryMapped",Y),window.addEventListener("processingEntryCompleted",L),()=>{window.removeEventListener("processingEntryMapped",Y),window.removeEventListener("processingEntryCompleted",L)}},[t,H]),_.useEffect(()=>{if(t){const Y=!w.current,L=e!==f,N=$t.lastDeletedEntryId!==null||$.current!==null;Y||L||Date.now()>=$t.cacheExpiryTime||N?(console.log(`[useJournalEntries] Effect triggered: initial=${Y}, refreshKey changed=${L}, forceCacheRefresh=${N}`),H(),h(e)):(console.log("[useJournalEntries] Skipping unnecessary fetch"),$t.userId===t&&$t.entries.length>0&&a(!1))}else console.log(`[useJournalEntries] Waiting for prerequisites: userId=${!!t}`),w.current?a(!1):a(t!==void 0);return()=>{T.current&&clearTimeout(T.current),B.current&&clearTimeout(B.current)}},[t,e,H,f]),{entries:r.filter(Y=>!F.current.has(Y.id)&&!$t.deletedEntryIds.has(Y.id)),loading:o,fetchEntries:H,lastFetchTime:s,fetchCount:c,error:p,profileExists:g}}async function tF(t){return new Promise((e,n)=>{try{const r=new FileReader;r.onloadend=()=>{const i=r.result,o=i.indexOf("base64,")!==-1?i.split("base64,")[1]:i;e(o)},r.onerror=n,r.readAsDataURL(t)}catch(r){n(r)}})}function J2e(t){return t?t.size===0?{isValid:!1,errorMessage:"Audio file is empty"}:t.size>25*1024*1024?{isValid:!1,errorMessage:"Audio file is too large (> 25MB)"}:(["audio/webm","audio/mp4","audio/mp3","audio/mpeg","audio/wav","audio/wave","audio/x-wav","audio/ogg","video/webm","video/mp4"].includes(t.type)||console.warn(`[Validation] Unusual audio MIME type: ${t.type}`),{isValid:!0}):{isValid:!1,errorMessage:"No audio data provided"}}async function Z2e(t){if(t.type==="audio/wav"||t.type==="audio/webm")return console.log("[BlobUtils] Audio blob already in supported format:",t.type),t;let e=t.type||"audio/webm";try{const r=await t.arrayBuffer(),i=new Uint8Array(r.slice(0,4));i[0]===26&&i[1]===69&&i[2]===223&&i[3]===163?e="audio/webm":i[0]===82&&i[1]===73&&i[2]===70&&i[3]===70&&(e="audio/wav")}catch(r){console.warn("[BlobUtils] Failed to detect file type from header bytes:",r)}console.log("[BlobUtils] Normalizing audio blob to type:",e);const n=new Blob([await t.arrayBuffer()],{type:e});return"duration"in t&&Object.defineProperty(n,"duration",{value:t.duration,writable:!1}),n}function nd(t){return typeof t=="function"}function bte(t){var e=function(r){Error.call(r),r.stack=new Error().stack},n=t(e);return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var mP=bte(function(t){return function(n){t(this),this.message=n?n.length+` errors occurred during unsubscription:
`+n.map(function(r,i){return i+1+") "+r.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=n}});function WO(t,e){if(t){var n=t.indexOf(e);0<=n&&t.splice(n,1)}}var EA=function(){function t(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){var e,n,r,i,o;if(!this.closed){this.closed=!0;var a=this._parentage;if(a)if(this._parentage=null,Array.isArray(a))try{for(var s=yO(a),l=s.next();!l.done;l=s.next()){var c=l.value;c.remove(this)}}catch(g){e={error:g}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}else a.remove(this);var u=this.initialTeardown;if(nd(u))try{u()}catch(g){o=g instanceof mP?g.errors:[g]}var f=this._finalizers;if(f){this._finalizers=null;try{for(var h=yO(f),p=h.next();!p.done;p=h.next()){var y=p.value;try{s8(y)}catch(g){o=o??[],g instanceof mP?o=xT(xT([],vO(o)),vO(g.errors)):o.push(g)}}}catch(g){r={error:g}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}}if(o)throw new mP(o)}},t.prototype.add=function(e){var n;if(e&&e!==this)if(this.closed)s8(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}},t.prototype._hasParent=function(e){var n=this._parentage;return n===e||Array.isArray(n)&&n.includes(e)},t.prototype._addParent=function(e){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e},t.prototype._removeParent=function(e){var n=this._parentage;n===e?this._parentage=null:Array.isArray(n)&&WO(n,e)},t.prototype.remove=function(e){var n=this._finalizers;n&&WO(n,e),e instanceof t&&e._removeParent(this)},t.EMPTY=function(){var e=new t;return e.closed=!0,e}(),t}(),Ste=EA.EMPTY;function Ete(t){return t instanceof EA||t&&"closed"in t&&nd(t.remove)&&nd(t.add)&&nd(t.unsubscribe)}function s8(t){nd(t)?t():t.unsubscribe()}var Q2e={Promise:void 0},eMe={setTimeout:function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setTimeout.apply(void 0,xT([t,e],vO(n)))},clearTimeout:function(t){return clearTimeout(t)},delegate:void 0};function tMe(t){eMe.setTimeout(function(){throw t})}function l8(){}function iT(t){t()}var _te=function(t){A1(e,t);function e(n){var r=t.call(this)||this;return r.isStopped=!1,n?(r.destination=n,Ete(n)&&n.add(r)):r.destination=iMe,r}return e.create=function(n,r,i){return new GO(n,r,i)},e.prototype.next=function(n){this.isStopped||this._next(n)},e.prototype.error=function(n){this.isStopped||(this.isStopped=!0,this._error(n))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(n){this.destination.next(n)},e.prototype._error=function(n){try{this.destination.error(n)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(EA),nMe=function(){function t(e){this.partialObserver=e}return t.prototype.next=function(e){var n=this.partialObserver;if(n.next)try{n.next(e)}catch(r){IE(r)}},t.prototype.error=function(e){var n=this.partialObserver;if(n.error)try{n.error(e)}catch(r){IE(r)}else IE(e)},t.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(n){IE(n)}},t}(),GO=function(t){A1(e,t);function e(n,r,i){var o=t.call(this)||this,a;return nd(n)||!n?a={next:n??void 0,error:r??void 0,complete:i??void 0}:a=n,o.destination=new nMe(a),o}return e}(_te);function IE(t){tMe(t)}function rMe(t){throw t}var iMe={closed:!0,next:l8,error:rMe,complete:l8},oMe=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function aMe(t){return t}function sMe(t){return t.length===0?aMe:t.length===1?t[0]:function(n){return t.reduce(function(r,i){return i(r)},n)}}var c8=function(){function t(e){e&&(this._subscribe=e)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(e,n,r){var i=this,o=cMe(e)?e:new GO(e,n,r);return iT(function(){var a=i,s=a.operator,l=a.source;o.add(s?s.call(o,l):l?i._subscribe(o):i._trySubscribe(o))}),o},t.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(n){e.error(n)}},t.prototype.forEach=function(e,n){var r=this;return n=u8(n),new n(function(i,o){var a=new GO({next:function(s){try{e(s)}catch(l){o(l),a.unsubscribe()}},error:o,complete:i});r.subscribe(a)})},t.prototype._subscribe=function(e){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(e)},t.prototype[oMe]=function(){return this},t.prototype.pipe=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return sMe(e)(this)},t.prototype.toPromise=function(e){var n=this;return e=u8(e),new e(function(r,i){var o;n.subscribe(function(a){return o=a},function(a){return i(a)},function(){return r(o)})})},t.create=function(e){return new t(e)},t}();function u8(t){var e;return(e=t??Q2e.Promise)!==null&&e!==void 0?e:Promise}function lMe(t){return t&&nd(t.next)&&nd(t.error)&&nd(t.complete)}function cMe(t){return t&&t instanceof _te||lMe(t)&&Ete(t)}var uMe=bte(function(t){return function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),Tte=function(t){A1(e,t);function e(){var n=t.call(this)||this;return n.closed=!1,n.currentObservers=null,n.observers=[],n.isStopped=!1,n.hasError=!1,n.thrownError=null,n}return e.prototype.lift=function(n){var r=new d8(this,this);return r.operator=n,r},e.prototype._throwIfClosed=function(){if(this.closed)throw new uMe},e.prototype.next=function(n){var r=this;iT(function(){var i,o;if(r._throwIfClosed(),!r.isStopped){r.currentObservers||(r.currentObservers=Array.from(r.observers));try{for(var a=yO(r.currentObservers),s=a.next();!s.done;s=a.next()){var l=s.value;l.next(n)}}catch(c){i={error:c}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}}})},e.prototype.error=function(n){var r=this;iT(function(){if(r._throwIfClosed(),!r.isStopped){r.hasError=r.isStopped=!0,r.thrownError=n;for(var i=r.observers;i.length;)i.shift().error(n)}})},e.prototype.complete=function(){var n=this;iT(function(){if(n._throwIfClosed(),!n.isStopped){n.isStopped=!0;for(var r=n.observers;r.length;)r.shift().complete()}})},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(n){return this._throwIfClosed(),t.prototype._trySubscribe.call(this,n)},e.prototype._subscribe=function(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)},e.prototype._innerSubscribe=function(n){var r=this,i=this,o=i.hasError,a=i.isStopped,s=i.observers;return o||a?Ste:(this.currentObservers=null,s.push(n),new EA(function(){r.currentObservers=null,WO(s,n)}))},e.prototype._checkFinalizedStatuses=function(n){var r=this,i=r.hasError,o=r.thrownError,a=r.isStopped;i?n.error(o):a&&n.complete()},e.prototype.asObservable=function(){var n=new c8;return n.source=this,n},e.create=function(n,r){return new d8(n,r)},e}(c8),d8=function(t){A1(e,t);function e(n,r){var i=t.call(this)||this;return i.destination=n,i.source=r,i}return e.prototype.next=function(n){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.next)===null||i===void 0||i.call(r,n)},e.prototype.error=function(n){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.error)===null||i===void 0||i.call(r,n)},e.prototype.complete=function(){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||r===void 0||r.call(n)},e.prototype._subscribe=function(n){var r,i;return(i=(r=this.source)===null||r===void 0?void 0:r.subscribe(n))!==null&&i!==void 0?i:Ste},e}(Tte),dMe=function(t){A1(e,t);function e(n){var r=t.call(this)||this;return r._value=n,r}return Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),e.prototype._subscribe=function(n){var r=t.prototype._subscribe.call(this,n);return!r.closed&&n.next(this._value),r},e.prototype.getValue=function(){var n=this,r=n.hasError,i=n.thrownError,o=n._value;if(r)throw i;return this._throwIfClosed(),o},e.prototype.next=function(n){t.prototype.next.call(this,this._value=n)},e}(Tte);function gP(t,e,n){I3({title:t,description:e,duration:n})}var Ql=(t=>(t.PROCESSING="processing",t.COMPLETED="completed",t.ERROR="error",t))(Ql||{});class fMe{constructor(){Mt(this,"processingEntries",[]);Mt(this,"entriesSubject",new dMe([]));Mt(this,"activeStartProcessingCalls",new Set);Mt(this,"immediateProcessingState",new Set);Mt(this,"processingIntentFlag",!1);console.log("[ProcessingStateManager] Initialized with immediate cleanup")}setProcessingIntent(e){this.processingIntentFlag=e,console.log(`[ProcessingStateManager] Processing intent set to ${e}`),e&&setTimeout(()=>{this.processingIntentFlag&&this.processingEntries.length===0&&(this.processingIntentFlag=!1,console.log("[ProcessingStateManager] Auto-cleared processing intent flag"))},1e3)}hasProcessingIntent(){return this.processingIntentFlag}hasAnyImmediateProcessing(){return this.processingIntentFlag||this.immediateProcessingState.size>0||this.getVisibleProcessingEntries().length>0}startProcessing(e){if(console.log(`[ProcessingStateManager] Starting processing for ${e}`),this.processingIntentFlag=!1,this.activeStartProcessingCalls.has(e)){console.log(`[ProcessingStateManager] StartProcessing already in progress for ${e}, ignoring`);return}const n=this.processingEntries.find(i=>i.tempId===e);if(n){console.log(`[ProcessingStateManager] Entry ${e} already exists, making visible instead`),n.isVisible=!0,this.immediateProcessingState.add(e),this.notifySubscribers();return}this.activeStartProcessingCalls.add(e),this.immediateProcessingState.add(e);const r={tempId:e,startTime:Date.now(),state:"processing",isVisible:!0};this.processingEntries.push(r),console.log(`[ProcessingStateManager] Added entry ${e}. Total entries: ${this.processingEntries.length}`),this.notifySubscribers(),window.dispatchEvent(new CustomEvent("processingStarted",{detail:{tempId:e,timestamp:Date.now(),immediate:!0}})),window.dispatchEvent(new CustomEvent("immediateProcessingStarted",{detail:{tempId:e,timestamp:Date.now()}})),setTimeout(()=>{this.activeStartProcessingCalls.delete(e)},500)}isImmediatelyProcessing(e){return this.immediateProcessingState.has(e)||this.isProcessing(e)}getImmediateProcessingCount(){return this.immediateProcessingState.size+this.getVisibleProcessingEntries().length}hasAnyProcessing(){return this.immediateProcessingState.size>0||this.getVisibleProcessingEntries().length>0}updateEntryState(e,n,r){const i=this.processingEntries.find(o=>o.tempId===e);if(!i){console.log(`[ProcessingStateManager] Entry ${e} not found for state update`);return}i.state=n,r&&(i.errorMessage=r),n==="completed"&&(this.immediateProcessingState.delete(e),console.log(`[ProcessingStateManager] Entry ${e} completed, checking for real entry`),this.checkAndHideEntry(e)),this.notifySubscribers(),console.log(`[ProcessingStateManager] Updated state for ${e} to ${n}`)}checkAndHideEntry(e){this.hasRealEntryInDOM(e)?(console.log(`[ProcessingStateManager] Real entry found for ${e}, hiding immediately`),this.hideEntry(e),this.removeEntry(e)):setTimeout(()=>{this.hasRealEntryInDOM(e)?(console.log(`[ProcessingStateManager] Real entry found on retry for ${e}`),this.hideEntry(e),this.removeEntry(e)):(console.log(`[ProcessingStateManager] Force cleanup for ${e} - no real entry detected`),this.removeEntry(e))},100)}hasRealEntryInDOM(e){var r;const n=[`[data-temp-id="${e}"][data-processing="false"]`,`[data-temp-id="${e}"].journal-entry-card:not(.processing-card)`,`[data-entry-id]:not([data-loading-skeleton="true"])[data-temp-id="${e}"]`];for(const i of n){const o=document.querySelector(i);if(o&&(o.querySelector(".journal-entry-content")||((r=o.textContent)==null?void 0:r.trim().length)>20))return!0}return!1}hideEntry(e){const n=this.processingEntries.find(r=>r.tempId===e);n&&(n.isVisible=!1,this.immediateProcessingState.delete(e),this.notifySubscribers(),console.log(`[ProcessingStateManager] Hidden entry ${e}`),window.dispatchEvent(new CustomEvent("processingEntryHidden",{detail:{tempId:e,timestamp:Date.now()}})))}setEntryId(e,n){const r=this.processingEntries.find(i=>i.tempId===e);r&&(r.entryId=n,this.immediateProcessingState.delete(e),this.notifySubscribers(),console.log(`[ProcessingStateManager] Set entry ID for ${e} to ${n}`),this.hideEntry(e),this.removeEntry(e))}removeEntry(e){const n=this.processingEntries.length;this.processingEntries=this.processingEntries.filter(r=>r.tempId!==e),n!==this.processingEntries.length&&(this.immediateProcessingState.delete(e),this.notifySubscribers(),console.log(`[ProcessingStateManager] Removed entry ${e}. Remaining entries: ${this.processingEntries.length}`),this.activeStartProcessingCalls.delete(e))}getEntryById(e){return this.processingEntries.find(n=>n.tempId===e)}isProcessing(e){const n=this.processingEntries.find(r=>r.tempId===e);return n?n.state==="processing":!1}isVisible(e){const n=this.processingEntries.find(r=>r.tempId===e);return n?n.isVisible:!1}hasError(e){const n=this.processingEntries.find(r=>r.tempId===e);return n?n.state==="error":!1}getEntryId(e){const n=this.processingEntries.find(r=>r.tempId===e);return n==null?void 0:n.entryId}entriesChanges(){return this.entriesSubject.asObservable()}getProcessingEntries(){return[...this.processingEntries]}getVisibleProcessingEntries(){return this.processingEntries.filter(e=>e.isVisible)}retryProcessing(e){const n=this.processingEntries.find(r=>r.tempId===e);n&&n.state==="error"&&(n.state="processing",n.errorMessage=void 0,n.isVisible=!0,this.immediateProcessingState.add(e),this.notifySubscribers(),console.log(`[ProcessingStateManager] Retrying processing for ${e}`))}restoreFromLocalStorage(){try{const e=localStorage.getItem("processingEntries");if(e){const n=JSON.parse(e),r=Date.now();this.processingEntries=n.filter(i=>r-i.startTime<1e4).map(i=>({...i,isVisible:i.isVisible!==void 0?i.isVisible:!0})),this.notifySubscribers(),console.log(`[ProcessingStateManager] Restored ${this.processingEntries.length} entries from localStorage`)}}catch(e){console.error("[ProcessingStateManager] Error restoring from localStorage:",e),gP("Error","Failed to restore processing state")}}saveToLocalStorage(){try{localStorage.setItem("processingEntries",JSON.stringify(this.processingEntries))}catch(e){console.error("[ProcessingStateManager] Error saving to localStorage:",e),gP("Error","Failed to save processing state")}}dispose(){this.processingEntries=[],this.activeStartProcessingCalls.clear(),this.immediateProcessingState.clear(),this.processingIntentFlag=!1,this.notifySubscribers(),console.log("[ProcessingStateManager] Disposed state manager")}clearAll(){this.processingEntries=[],this.activeStartProcessingCalls.clear(),this.immediateProcessingState.clear(),this.processingIntentFlag=!1,this.notifySubscribers(),console.log("[ProcessingStateManager] Cleared all processing entries");try{localStorage.removeItem("processingEntries")}catch(e){console.error("[ProcessingStateManager] Error clearing localStorage:",e)}}notifySubscribers(){console.log(`[ProcessingStateManager] Notifying subscribers with ${this.processingEntries.length} entries`),this.entriesSubject.next([...this.processingEntries]),this.saveToLocalStorage(),window.dispatchEvent(new CustomEvent("processingEntriesChanged",{detail:{entries:[...this.processingEntries],timestamp:Date.now()}}))}handleError(e,n){const r=this.processingEntries.find(i=>i.tempId===e);r&&(r.state="error",r.errorMessage=n,r.isVisible=!0,this.immediateProcessingState.delete(e),this.notifySubscribers(),gP("Error",`Processing failed: ${n}`),console.log(`[ProcessingStateManager] Error for ${e}: ${n}`))}forceHideAll(){this.processingEntries.forEach(e=>{e.isVisible=!1}),this.immediateProcessingState.clear(),this.processingIntentFlag=!1,this.notifySubscribers(),console.log("[ProcessingStateManager] Force hid all processing entries")}}const Ht=new fMe;let Ew=!1,Iy=null;const Ky=new Map;function hMe(t){return t?((!("duration"in t)||t.duration<=0)&&console.warn("[AudioProcessing] Audio blob has no duration property or duration is 0"),!0):(console.error("[AudioProcessing] No audio data to process"),!1)}function pMe(){return Iy&&clearTimeout(Iy),setTimeout(()=>{console.log("[AudioProcessing] Processing timeout triggered"),Ew=!1},6e4)}async function mMe(t,e){if(console.log("[AudioProcessing] Starting processing with blob:",t==null?void 0:t.size,t==null?void 0:t.type),await Ty(),!hMe(t))return{success:!1,error:"No audio data to process"};try{const i=await tF(t);if(console.log("[AudioProcessing] Base64 test conversion successful, length:",i.length),i.length<50)return{success:!1,error:"Audio data appears too short or invalid"}}catch(i){return console.error("[AudioProcessing] Base64 test conversion failed:",i),{success:!1,error:"Error preparing audio data for processing"}}const r=`entry-${Date.now()}-${Math.floor(Math.random()*1e3)}`;try{return Ew=!0,console.log("[AudioProcessing] Set processing lock"),Iy=pMe(),console.log("[AudioProcessing] Setup processing timeout"),Ht.startProcessing(r),console.log("[AudioProcessing] Processing audio:",{size:(t==null?void 0:t.size)||0,type:(t==null?void 0:t.type)||"unknown",userId:e||"anonymous",audioDuration:t.duration||"unknown"}),console.log("[AudioProcessing] Launching background processing"),gMe(t,e,r).then(i=>{console.log("[AudioProcessing] Background processing completed:",i),i.entryId&&(Ht.setEntryId(r,i.entryId),Ht.updateEntryState(r,Ql.COMPLETED),console.log(`[AudioProcessing] Mapped tempId ${r} to entryId ${i.entryId}`),Cte(r,i.entryId))}).catch(i=>{console.error("[AudioProcessing] Background processing error:",i),Ew=!1,Ht.updateEntryState(r,Ql.ERROR,i.message),window.dispatchEvent(new CustomEvent("processingEntryFailed",{detail:{tempId:r,error:i.message,timestamp:Date.now()}}))}).finally(()=>{Ew=!1,Iy&&(clearTimeout(Iy),Iy=null)}),console.log("[AudioProcessing] Returning success with tempId:",r),{success:!0,tempId:r}}catch(i){return console.error("[AudioProcessing] Error initiating recording process:",i),Ew=!1,{success:!1,error:i.message||"Unknown error"}}}async function gMe(t,e,n){try{console.log(`[AudioProcessing] Background processing started for ${n}`);const r=await tF(t);let i=0;"duration"in t&&(i=Math.round(t.duration*1e3));const o={audio:r,userId:e,recordingTime:i,highQuality:!0};console.log(`[AudioProcessing] Calling transcribe-audio Edge Function for ${n}`);const{data:a,error:s}=await Ze.functions.invoke("transcribe-audio",{body:o});return s?(console.error(`[AudioProcessing] Edge function error for ${n}:`,s),Ht.updateEntryState(n,Ql.ERROR,`Server error: ${s.message||"Unknown error"}`),{success:!1,error:s.message}):a?(console.log(`[AudioProcessing] Edge function success for ${n}:`,a),a.entryId&&(Ht.setEntryId(n,a.entryId),Ht.updateEntryState(n,Ql.COMPLETED),Cte(n,a.entryId)),window.dispatchEvent(new CustomEvent("processingEntryCompleted",{detail:{tempId:n,entryId:a.entryId,timestamp:Date.now()}})),window.dispatchEvent(new CustomEvent("entryContentReady",{detail:{tempId:n,entryId:a.entryId,content:a.refinedText||a.transcription,timestamp:Date.now()}})),window.dispatchEvent(new CustomEvent("journalEntriesNeedRefresh",{detail:{tempId:n,entryId:a.entryId,timestamp:Date.now()}})),{success:!0,entryId:a.entryId}):(console.error(`[AudioProcessing] No data returned from edge function for ${n}`),Ht.updateEntryState(n,Ql.ERROR,"No data returned from server"),{success:!1,error:"No data returned from server"})}catch(r){return console.error(`[AudioProcessing] Error in background processing for ${n}:`,r),Ht.updateEntryState(n,Ql.ERROR,r.message||"Unknown error"),{success:!1,error:r.message||"Unknown error"}}}function Cte(t,e){Ky.set(t,e),Ht.setEntryId(t,e),Ht.updateEntryState(t,Ql.COMPLETED);try{const n=localStorage.getItem("processingToEntryMap")||"{}",r=JSON.parse(n);r[t]=e,localStorage.setItem("processingToEntryMap",JSON.stringify(r)),console.log(`[AudioProcessing] Stored tempId -> entryId mapping in localStorage: ${t} -> ${e}`),window.dispatchEvent(new CustomEvent("processingEntryMapped",{detail:{tempId:t,entryId:e,timestamp:Date.now(),forceNotify:!0}}))}catch(n){console.error("[AudioProcessing] Error storing mapping in localStorage:",n)}}function OE(t){const e=Ht.getEntryId(t);if(e)return e;if(Ky.has(t))return Ky.get(t);try{const n=localStorage.getItem("processingToEntryMap")||"{}",i=JSON.parse(n)[t];if(i)return Ky.set(t,Number(i)),Ht.setEntryId(t,Number(i)),Number(i)}catch(n){console.error("[AudioProcessing] Error getting mapping from localStorage:",n)}}function yMe(t){const e=t.toString();if(Ht.removeEntry(e),typeof t=="number"){for(const[n,r]of Ky.entries())r===t&&(Ky.delete(n),console.log(`[AudioProcessing] Removed mapping for tempId ${n} -> entryId ${t}`));try{const n=localStorage.getItem("processingToEntryMap")||"{}",r=JSON.parse(n);let i=!1;Object.entries(r).forEach(([o,a])=>{Number(a)===t&&(delete r[o],i=!0)}),i&&(localStorage.setItem("processingToEntryMap",JSON.stringify(r)),console.log(`[AudioProcessing] Cleaned up localStorage mappings for entryId ${t}`))}catch(n){console.error("[AudioProcessing] Error cleaning up localStorage mappings:",n)}}window.dispatchEvent(new CustomEvent("processingEntryRemoved",{detail:{id:t,timestamp:Date.now()}}))}const Jr=_.forwardRef(({className:t,...e},n)=>d.jsx("div",{ref:n,className:He("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));Jr.displayName="Card";const w0=_.forwardRef(({className:t,...e},n)=>d.jsx("div",{ref:n,className:He("flex flex-col space-y-1.5 p-6",t),...e}));w0.displayName="CardHeader";const b0=_.forwardRef(({className:t,...e},n)=>d.jsx("h3",{ref:n,className:He("text-2xl font-semibold leading-none tracking-tight",t),...e}));b0.displayName="CardTitle";const nF=_.forwardRef(({className:t,...e},n)=>d.jsx("p",{ref:n,className:He("text-sm text-muted-foreground",t),...e}));nF.displayName="CardDescription";const au=_.forwardRef(({className:t,...e},n)=>d.jsx("div",{ref:n,className:He("p-6 pt-0",t),...e}));au.displayName="CardContent";const Ate=_.forwardRef(({className:t,...e},n)=>d.jsx("div",{ref:n,className:He("flex items-center p-6 pt-0",t),...e}));Ate.displayName="CardFooter";function Mte(t){const e=Math.floor(t/60),n=Math.floor(t%60);return`${e}:${n.toString().padStart(2,"0")}`}function Pte(t){try{const e=typeof t=="string"?new Date(t):t;if(!e||isNaN(e.getTime()))return console.error("[formatShortDate] Invalid date:",t),{type:"translatable",text:"Recently"};const n=new Date,r=Math.floor((n.getTime()-e.getTime())/(1e3*60*60*24));return r===0?{type:"translatable",text:"Today"}:r===1?{type:"translatable",text:"Yesterday"}:r<7?{type:"translatable",text:ir(e,"EEEE")}:e.getFullYear()===n.getFullYear()?{type:"formatted",text:ir(e,"MMM d"),formatPattern:"MMM d"}:{type:"formatted",text:ir(e,"MMM d, yyyy"),formatPattern:"MMM d, yyyy"}}catch(e){return console.error("[formatShortDate] Error formatting date:",e),{type:"translatable",text:"Recently"}}}function vMe({onClick:t,isExpanded:e}){const n=()=>{console.log("[FloatingDotsToggle] Toggle clicked, current state:",e),t()};return d.jsx(Ke.div,{className:"relative w-8 h-8 cursor-pointer flex items-center justify-center",onClick:n,whileHover:{scale:1.1},whileTap:{scale:.95},"aria-label":e?"Hide themes":"Show themes",children:e?[0,1,2].map(r=>{const i=["bg-gradient-to-r from-blue-500 to-purple-500","bg-gradient-to-r from-pink-500 to-orange-400","bg-gradient-to-r from-green-400 to-cyan-500"],a=r*2*Math.PI/3;return d.jsx(Ke.div,{className:`absolute w-3 h-3 rounded-full ${i[r]}`,style:{left:"50%",top:"50%",x:Math.cos(a)*10-1.5,y:Math.sin(a)*10-1.5},animate:{x:[Math.cos(a)*10-1.5,Math.cos(a+Math.PI/2)*10-1.5,Math.cos(a+Math.PI)*10-1.5,Math.cos(a+1.5*Math.PI)*10-1.5,Math.cos(a)*10-1.5],y:[Math.sin(a)*10-1.5,Math.sin(a+Math.PI/2)*10-1.5,Math.sin(a+Math.PI)*10-1.5,Math.sin(a+1.5*Math.PI)*10-1.5,Math.sin(a)*10-1.5],boxShadow:["0 0 2px rgba(255, 255, 255, 0.5)","0 0 4px rgba(255, 255, 255, 0.7)","0 0 2px rgba(255, 255, 255, 0.5)"],scale:[1,1.1,1]},transition:{x:{duration:4,repeat:1/0,ease:"linear",delay:r*.3},y:{duration:4,repeat:1/0,ease:"linear",delay:r*.3},boxShadow:{duration:2,repeat:1/0,ease:"easeInOut",delay:r*.3},scale:{duration:1,repeat:1/0,ease:"easeInOut"}}},r)}):d.jsx("div",{className:"flex space-x-1 items-center justify-center h-full",children:[0,1,2].map(r=>{const i=["bg-gradient-to-b from-blue-500 to-purple-500","bg-gradient-to-b from-pink-500 to-orange-400","bg-gradient-to-b from-green-400 to-cyan-500"];return d.jsx(Ke.div,{className:`h-5 w-1 rounded-full ${i[r]}`,initial:{opacity:.8},whileHover:{opacity:1},animate:{height:[18,20,18],opacity:[.8,1,.8]},transition:{height:{duration:1.5,repeat:1/0,ease:"easeInOut",delay:r*.2},opacity:{duration:1.5,repeat:1/0,ease:"easeInOut",delay:r*.2}}},r)})})})}const xMe=mm("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function ec({className:t,variant:e,...n}){return d.jsx("div",{className:He(xMe({variant:e}),t),...n})}const f8=["bg-[#E5DEFF] text-[#6E59A5] hover:bg-[#D3CAFF] border-[#9b87f5]","bg-[#FDE1D3] text-[#F97316] hover:bg-[#FFCBB0] border-[#FEC6A1]","bg-[#F2FCE2] text-[#4ADE80] hover:bg-[#E3F8CD] border-[#B6F09C]","bg-[#D3E4FD] text-[#0EA5E9] hover:bg-[#BFDBFF] border-[#93C5FD]","bg-[#FEF7CD] text-[#EAB308] hover:bg-[#FFF0A3] border-[#FDE68A]","bg-[#FFDEE2] text-[#EC4899] hover:bg-[#FFCCD3] border-[#F9A8D4]"],wMe={family:d.jsx(U0e,{size:12,className:"mr-1"}),work:d.jsx(p0e,{size:12,className:"mr-1"}),love:d.jsx($3,{size:12,className:"mr-1"}),health:d.jsx(NJ,{size:12,className:"mr-1"}),travel:d.jsx(y0e,{size:12,className:"mr-1"})},bMe=t=>{const n=t.split("").reduce((r,i)=>r+i.charCodeAt(0),0)%f8.length;return f8[n]},SMe=t=>{const e=t.toLowerCase();for(const[n,r]of Object.entries(wMe))if(e.includes(n))return r;return d.jsx(b0e,{size:12,className:"mr-1"})};function EMe({themes:t=[],entryId:e,sourceLanguage:n}){const r=t.filter(i=>i&&typeof i=="string"&&i.trim()!=="").slice(0,8);return d.jsx("div",{className:"flex flex-wrap gap-1.5",children:r.map((i,o)=>{const a=bMe(i),s=SMe(i);return d.jsxs(ec,{variant:"outline",className:`text-xs font-medium border px-2 py-1 rounded-lg transition-all 
                      hover:scale-105 duration-200 animate-fade-in flex items-center
                      ${a}`,children:[s,d.jsx(Q,{text:i,sourceLanguage:n,entryId:e})]},`${i}-${o}`)})})}function _Me({entryId:t,initialThemes:e=[],content:n,isProcessing:r=!1,isNew:i=!1}){const[o,a]=_.useState(e||[]),[s,l]=_.useState(r||e.length===0),[c,u]=_.useState(null),[f,h]=_.useState(void 0),{currentLanguage:p}=In();return _.useEffect(()=>{if(!t||i)return;(async()=>{try{l(!0),u(null);const{data:g,error:v}=await Ze.from("Journal Entries").select("*").eq("id",t).single();if(v){console.error("Error fetching themes:",v),u("Couldn't load themes");return}if(g){const b=g;b.original_language&&h(b.original_language);let w=[];Array.isArray(b.themes)&&b.themes.length>0?(w=b.themes.filter(T=>T&&typeof T=="string"&&T.trim()!==""&&T!==""),console.log("[ThemeLoader] Using specific themes from themes column:",w)):Array.isArray(b.master_themes)&&b.master_themes.length>0&&(w=b.master_themes.filter(T=>T&&typeof T=="string"&&T.trim()!==""&&T!==""),console.log("[ThemeLoader] Fallback to master_themes:",w)),a(w)}}catch(g){console.error("Exception in theme loading:",g),u("Error loading themes")}finally{l(!1)}})()},[t,i]),d.jsxs("div",{className:"mt-2",children:[d.jsx("h3",{className:"text-sm font-medium mb-1 text-primary",children:d.jsx(Q,{text:"Themes",sourceLanguage:f||"en",entryId:t})}),s&&d.jsxs("div",{className:"flex gap-2 flex-wrap",children:[d.jsx("div",{className:"h-6 w-16 bg-muted animate-pulse rounded"}),d.jsx("div",{className:"h-6 w-20 bg-muted animate-pulse rounded"}),d.jsx("div",{className:"h-6 w-14 bg-muted animate-pulse rounded"})]}),c&&d.jsx("p",{className:"text-xs text-red-500",children:c}),!s&&!c&&o.length===0&&d.jsx("p",{className:"text-xs text-muted-foreground",children:d.jsx(Q,{text:r||i?"Analyzing themes...":"No themes detected",sourceLanguage:f||"en",entryId:t})}),!s&&!c&&o.length>0&&d.jsx(EMe,{themes:o,entryId:t,sourceLanguage:f||"en"})]})}var rF="Dialog",[kte,Nte]=sa(rF),[TMe,uc]=kte(rF),Rte=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:i,onOpenChange:o,modal:a=!0}=t,s=_.useRef(null),l=_.useRef(null),[c=!1,u]=wo({prop:r,defaultProp:i,onChange:o});return d.jsx(TMe,{scope:e,triggerRef:s,contentRef:l,contentId:Xa(),titleId:Xa(),descriptionId:Xa(),open:c,onOpenChange:u,onOpenToggle:_.useCallback(()=>u(f=>!f),[u]),modal:a,children:n})};Rte.displayName=rF;var jte="DialogTrigger",Ite=_.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=uc(jte,n),o=Kt(e,i.triggerRef);return d.jsx(At.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":aF(i.open),...r,ref:o,onClick:ut(t.onClick,i.onOpenToggle)})});Ite.displayName=jte;var iF="DialogPortal",[CMe,Ote]=kte(iF,{forceMount:void 0}),Lte=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:i}=t,o=uc(iF,e);return d.jsx(CMe,{scope:e,forceMount:n,children:_.Children.map(r,a=>d.jsx(oo,{present:n||o.open,children:d.jsx(m0,{asChild:!0,container:i,children:a})}))})};Lte.displayName=iF;var jT="DialogOverlay",Dte=_.forwardRef((t,e)=>{const n=Ote(jT,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,o=uc(jT,t.__scopeDialog);return o.modal?d.jsx(oo,{present:r||o.open,children:d.jsx(AMe,{...i,ref:e})}):null});Dte.displayName=jT;var AMe=_.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=uc(jT,n);return d.jsx(M1,{as:ud,allowPinchZoom:!0,shards:[i.contentRef],children:d.jsx(At.div,{"data-state":aF(i.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),rm="DialogContent",Fte=_.forwardRef((t,e)=>{const n=Ote(rm,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,o=uc(rm,t.__scopeDialog);return d.jsx(oo,{present:r||o.open,children:o.modal?d.jsx(MMe,{...i,ref:e}):d.jsx(PMe,{...i,ref:e})})});Fte.displayName=rm;var MMe=_.forwardRef((t,e)=>{const n=uc(rm,t.__scopeDialog),r=_.useRef(null),i=Kt(e,n.contentRef,r);return _.useEffect(()=>{const o=r.current;if(o)return hA(o)},[]),d.jsx(zte,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ut(t.onCloseAutoFocus,o=>{var a;o.preventDefault(),(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:ut(t.onPointerDownOutside,o=>{const a=o.detail.originalEvent,s=a.button===0&&a.ctrlKey===!0;(a.button===2||s)&&o.preventDefault()}),onFocusOutside:ut(t.onFocusOutside,o=>o.preventDefault())})}),PMe=_.forwardRef((t,e)=>{const n=uc(rm,t.__scopeDialog),r=_.useRef(!1),i=_.useRef(!1);return d.jsx(zte,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var a,s;(a=t.onCloseAutoFocus)==null||a.call(t,o),o.defaultPrevented||(r.current||(s=n.triggerRef.current)==null||s.focus(),o.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:o=>{var l,c;(l=t.onInteractOutside)==null||l.call(t,o),o.defaultPrevented||(r.current=!0,o.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const a=o.target;((c=n.triggerRef.current)==null?void 0:c.contains(a))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&i.current&&o.preventDefault()}})}),zte=_.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:o,...a}=t,s=uc(rm,n),l=_.useRef(null),c=Kt(e,l);return iA(),d.jsxs(d.Fragment,{children:[d.jsx(_1,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:o,children:d.jsx(gm,{role:"dialog",id:s.contentId,"aria-describedby":s.descriptionId,"aria-labelledby":s.titleId,"data-state":aF(s.open),...a,ref:c,onDismiss:()=>s.onOpenChange(!1)})}),d.jsxs(d.Fragment,{children:[d.jsx(NMe,{titleId:s.titleId}),d.jsx(jMe,{contentRef:l,descriptionId:s.descriptionId})]})]})}),oF="DialogTitle",Ute=_.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=uc(oF,n);return d.jsx(At.h2,{id:i.titleId,...r,ref:e})});Ute.displayName=oF;var Bte="DialogDescription",$te=_.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=uc(Bte,n);return d.jsx(At.p,{id:i.descriptionId,...r,ref:e})});$te.displayName=Bte;var Hte="DialogClose",Vte=_.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=uc(Hte,n);return d.jsx(At.button,{type:"button",...r,ref:e,onClick:ut(t.onClick,()=>i.onOpenChange(!1))})});Vte.displayName=Hte;function aF(t){return t?"open":"closed"}var Wte="DialogTitleWarning",[kMe,Gte]=J0e(Wte,{contentName:rm,titleName:oF,docsSlug:"dialog"}),NMe=({titleId:t})=>{const e=Gte(Wte),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return _.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},RMe="DialogDescriptionWarning",jMe=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Gte(RMe).contentName}}.`;return _.useEffect(()=>{var o;const i=(o=t.current)==null?void 0:o.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},sF=Rte,qte=Ite,lF=Lte,F1=Dte,z1=Fte,U1=Ute,B1=$te,_A=Vte,Yte="AlertDialog",[IMe,xot]=sa(Yte,[Nte]),Ed=Nte(),Xte=t=>{const{__scopeAlertDialog:e,...n}=t,r=Ed(e);return d.jsx(sF,{...r,...n,modal:!0})};Xte.displayName=Yte;var OMe="AlertDialogTrigger",Kte=_.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,i=Ed(n);return d.jsx(qte,{...i,...r,ref:e})});Kte.displayName=OMe;var LMe="AlertDialogPortal",Jte=t=>{const{__scopeAlertDialog:e,...n}=t,r=Ed(e);return d.jsx(lF,{...r,...n})};Jte.displayName=LMe;var DMe="AlertDialogOverlay",Zte=_.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,i=Ed(n);return d.jsx(F1,{...i,...r,ref:e})});Zte.displayName=DMe;var Jy="AlertDialogContent",[FMe,zMe]=IMe(Jy),Qte=_.forwardRef((t,e)=>{const{__scopeAlertDialog:n,children:r,...i}=t,o=Ed(n),a=_.useRef(null),s=Kt(e,a),l=_.useRef(null);return d.jsx(kMe,{contentName:Jy,titleName:ene,docsSlug:"alert-dialog",children:d.jsx(FMe,{scope:n,cancelRef:l,children:d.jsxs(z1,{role:"alertdialog",...o,...i,ref:s,onOpenAutoFocus:ut(i.onOpenAutoFocus,c=>{var u;c.preventDefault(),(u=l.current)==null||u.focus({preventScroll:!0})}),onPointerDownOutside:c=>c.preventDefault(),onInteractOutside:c=>c.preventDefault(),children:[d.jsx(H3,{children:r}),d.jsx(BMe,{contentRef:a})]})})})});Qte.displayName=Jy;var ene="AlertDialogTitle",tne=_.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,i=Ed(n);return d.jsx(U1,{...i,...r,ref:e})});tne.displayName=ene;var nne="AlertDialogDescription",rne=_.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,i=Ed(n);return d.jsx(B1,{...i,...r,ref:e})});rne.displayName=nne;var UMe="AlertDialogAction",ine=_.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,i=Ed(n);return d.jsx(_A,{...i,...r,ref:e})});ine.displayName=UMe;var one="AlertDialogCancel",ane=_.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,{cancelRef:i}=zMe(one,n),o=Ed(n),a=Kt(e,i);return d.jsx(_A,{...o,...r,ref:a})});ane.displayName=one;var BMe=({contentRef:t})=>{const e=`\`${Jy}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Jy}\` by passing a \`${nne}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Jy}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return _.useEffect(()=>{var r;document.getElementById((r=t.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(e)},[e,t]),null},$Me=Xte,HMe=Kte,VMe=Jte,sne=Zte,lne=Qte,cne=ine,une=ane,dne=tne,fne=rne;const S0=$Me,hne=HMe,WMe=VMe,pne=_.forwardRef(({className:t,...e},n)=>d.jsx(sne,{className:He("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));pne.displayName=sne.displayName;const bm=_.forwardRef(({className:t,...e},n)=>d.jsxs(WMe,{children:[d.jsx(pne,{}),d.jsx(lne,{ref:n,className:He("fixed z-50 grid w-full max-w-lg gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg","left-[50%] top-[50%] translate-x-[-50%] translate-y-[-50%]","w-[90%] mx-auto overflow-y-auto max-h-[85vh]","break-words overflow-wrap-anywhere",t),...e})]}));bm.displayName=lne.displayName;const Sm=({className:t,...e})=>d.jsx("div",{className:He("flex flex-col space-y-2 text-center sm:text-left","break-words overflow-wrap-anywhere",t),...e});Sm.displayName="AlertDialogHeader";const Em=({className:t,...e})=>d.jsx("div",{className:He("flex flex-col space-y-2 sm:flex-row sm:space-y-0 sm:justify-end sm:space-x-2","w-full overflow-hidden",t),...e});Em.displayName="AlertDialogFooter";const _m=_.forwardRef(({className:t,...e},n)=>d.jsx(dne,{ref:n,className:He("text-lg font-semibold","break-words overflow-wrap-anywhere hyphens-auto",t),...e}));_m.displayName=dne.displayName;const Tm=_.forwardRef(({className:t,...e},n)=>d.jsx(fne,{ref:n,className:He("text-sm text-muted-foreground","break-words overflow-wrap-anywhere",t),...e}));Tm.displayName=fne.displayName;const Cm=_.forwardRef(({className:t,...e},n)=>d.jsx(cne,{ref:n,className:He(V3(),t),...e}));Cm.displayName=cne.displayName;const Am=_.forwardRef(({className:t,...e},n)=>d.jsx(une,{ref:n,className:He(V3({variant:"outline"}),"mt-0 sm:mt-0",t),...e}));Am.displayName=une.displayName;function GMe({onDelete:t,isDeleting:e=!1}){const[n,r]=_.useState(!1),[i,o]=_.useState(!1),[a,s]=_.useState(null),l=async()=>{if(!i)try{s(null),o(!0),console.log("[DeleteEntryDialog] Starting delete operation"),await t(),console.log("[DeleteEntryDialog] Delete operation completed successfully"),It.success("Entry deleted successfully",{duration:3e3,closeButton:!1}),window.dispatchEvent(new CustomEvent("journalEntriesNeedRefresh",{detail:{action:"delete"}})),window.dispatchEvent(new CustomEvent("journalUIForceRefresh",{detail:{action:"delete",timestamp:Date.now()}})),setTimeout(()=>{o(!1),r(!1)},100)}catch(c){console.error("[DeleteEntryDialog] Error deleting entry:",c);const u=c instanceof Error?c.message:"Failed to delete entry";s(u),It.error(`Error: ${u}`),o(!1)}};return d.jsxs(S0,{open:n,onOpenChange:r,children:[d.jsx(hne,{asChild:!0,children:d.jsx("button",{className:"hover:text-red-500 text-gray-500",disabled:e,children:e?d.jsx(Aa,{size:16,className:"animate-spin"}):d.jsx(jJ,{size:16})})}),d.jsxs(bm,{children:[d.jsxs(Sm,{children:[d.jsx(_m,{children:d.jsx(Q,{text:"Delete entry"})}),d.jsx(Tm,{children:d.jsx(Q,{text:"This action cannot be undone. This will permanently delete your journal entry."})}),a&&d.jsx("div",{className:"mt-2 p-2 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded text-red-800 dark:text-red-200 text-sm",children:a})]}),d.jsxs(Em,{children:[d.jsx(Am,{disabled:i,children:d.jsx(Q,{text:"Cancel"})}),d.jsx(Cm,{onClick:c=>{c.preventDefault(),l()},className:"bg-red-500 hover:bg-red-600",disabled:i,children:i?d.jsxs(d.Fragment,{children:[d.jsx(Aa,{size:16,className:"mr-2 animate-spin"}),d.jsx(Q,{text:"Deleting..."})]}):d.jsx(Q,{text:"Delete"})})]})]})]})}const h8=[{id:"transcribing",text:"Transcribing your entry...",icon:N0e},{id:"analyzing",text:"Analyzing the sentiments...",icon:B0e},{id:"understanding",text:"Understanding your emotions...",icon:S0e},{id:"extracting",text:"Extracting key themes...",icon:Qp},{id:"generating",text:"Generating insights...",icon:NJ},{id:"finalizing",text:"Finalizing your entry...",icon:EJ}];function cF({error:t}){const[e,n]=_.useState(0),[r,i]=_.useState(!1),o=_.useRef(`loading-${Date.now()}-${Math.random().toString(36).substring(2,9)}`),a=_.useRef(null),s=_.useRef(null);_.useRef(Date.now());const[l,c]=_.useState(!0);if(_.useEffect(()=>{console.log("[LoadingEntryContent] Component mounted:",o.current);const f=setInterval(()=>{l&&n(y=>(y+1)%h8.length)},1200);a.current=f;const h=setTimeout(()=>{l&&i(!0)},1e4);s.current=h;const p=()=>{console.log("[LoadingEntryContent] Hide event received, immediate transition"),c(!1)};return window.addEventListener("processingEntryHidden",p),window.addEventListener("entryContentReady",p),()=>{a.current&&clearInterval(a.current),s.current&&clearTimeout(s.current),window.removeEventListener("processingEntryHidden",p),window.removeEventListener("entryContentReady",p)}},[l]),!l)return null;const u=h8[e];return d.jsxs(Ke.div,{className:"space-y-2",initial:{opacity:1},animate:{opacity:l?1:0},exit:{opacity:0,transition:{duration:.1}},transition:{duration:.1},"data-component-id":o.current,style:{opacity:l?1:0,transition:"opacity 0.1s ease-out"},children:[d.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[d.jsx(zg,{className:"h-4 w-4 rounded-full"}),d.jsx(zg,{className:"h-4 w-32"})]}),d.jsx(zg,{className:"h-4 w-full"}),d.jsx(zg,{className:"h-4 w-3/4"}),d.jsx(zg,{className:"h-4 w-5/6"}),d.jsx(zg,{className:"h-4 w-1/2"}),d.jsx("div",{className:"flex flex-col items-center mt-6 justify-center space-y-2 bg-primary/5 p-3 rounded-lg processing-indicator",children:t?d.jsxs("div",{className:"flex flex-col items-center",children:[d.jsx(dv,{className:"h-8 w-8 text-red-500 mb-2"}),d.jsx("p",{className:"text-red-500 font-medium text-sm text-center",children:t}),d.jsx("p",{className:"text-muted-foreground text-xs text-center mt-2",children:"Try refreshing the page or recording again"})]}):d.jsxs(d.Fragment,{children:[d.jsxs(Ke.div,{className:"relative h-10 w-10",animate:{rotate:360},transition:{rotate:{duration:2,repeat:1/0,ease:"linear"}},children:[d.jsx(Aa,{className:"h-10 w-10 text-primary absolute inset-0"}),d.jsx(Kc,{mode:"wait",children:d.jsx(Ke.div,{initial:{scale:0,opacity:.7},animate:{scale:1,opacity:1},exit:{scale:0,opacity:.7},transition:{duration:.15},className:"absolute inset-0 flex items-center justify-center",children:ve.createElement(u.icon,{className:"h-5 w-5 text-primary/70"})},u.id)})]}),d.jsx(Kc,{mode:"wait",children:d.jsx(Ke.div,{initial:{y:10,opacity:.7},animate:{y:0,opacity:1},exit:{y:-10,opacity:.7},transition:{duration:.15},className:"text-sm text-center text-primary font-medium",children:d.jsx(Q,{text:u.text,forceTranslate:!0})},u.id)}),r&&d.jsx(Ke.p,{initial:{opacity:0},animate:{opacity:1},className:"text-xs text-muted-foreground text-center mt-2",children:d.jsx(Q,{text:"This is taking longer than usual. Please wait a moment...",forceTranslate:!0})})]})})]})}function qMe({content:t,isExpanded:e,language:n,entryId:r}){const[i,o]=_.useState(""),[a,s]=_.useState(!0),{currentLanguage:l,translate:c}=In(),u=h=>{if(!h)return"";const p=/\s*[\(\[]([a-z]{2})[\)\]]\s*$/i;return h.replace(p,"").trim()},f=async()=>{s(!0);try{if(l==="en")o(t);else{o(t);const h=await c(t,"en",r);if(h){const p=u(h);o(p||t)}}}catch(h){console.error("Translation error:",h),o(t)}finally{s(!1)}};return _.useEffect(()=>{f()},[t,l,r]),_.useEffect(()=>{const h=()=>{o(t),f()};return window.addEventListener("languageChange",h),()=>{window.removeEventListener("languageChange",h)}},[t,r]),d.jsx("div",{children:e?d.jsxs("div",{className:"relative",children:[d.jsx("p",{className:"text-xs md:text-sm text-foreground",children:i||t}),a&&d.jsx("div",{className:"absolute top-0 right-0 w-2 h-2 bg-primary/50 rounded-full animate-pulse"})]}):d.jsxs("div",{className:"relative",children:[d.jsx("p",{className:"text-xs md:text-sm text-foreground",children:i||t}),a&&d.jsx("div",{className:"absolute top-0 right-0 w-2 h-2 bg-primary/50 rounded-full animate-pulse"})]})})}function YMe({content:t,isExpanded:e,isProcessing:n=!1,entryId:r,onOverflowChange:i}){const[o,a]=_.useState(n),s=ve.useRef(null);return _.useEffect(()=>{const c=setTimeout(()=>{if(!s.current)return;const u=t.length>280||t.split(`
`).length>2;i==null||i(u)},100);return()=>clearTimeout(c)},[t,i]),o||n?d.jsx(cF,{}):d.jsx("div",{ref:s,className:"w-full",children:d.jsx(qMe,{content:t,isExpanded:e,entryId:r})})}const Pp=sF,XMe=lF,mne=_.forwardRef(({className:t,...e},n)=>d.jsx(F1,{ref:n,className:He("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));mne.displayName=F1.displayName;const Rf=_.forwardRef(({className:t,children:e,...n},r)=>d.jsxs(XMe,{children:[d.jsx(mne,{}),d.jsxs(z1,{ref:r,className:He("fixed z-50 grid w-full max-w-lg gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg md:w-full","max-h-[85vh] overflow-y-auto rounded-lg","left-[50%] top-[50%] translate-x-[-50%] translate-y-[-50%]","mx-2 sm:mx-auto","break-words overflow-wrap-anywhere",t),...n,children:[e,d.jsxs(_A,{className:"absolute right-4 top-4 rounded-full opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[d.jsx(cc,{className:"h-4 w-4"}),d.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Rf.displayName=z1.displayName;const jf=({className:t,...e})=>d.jsx("div",{className:He("flex flex-col space-y-1.5 text-center sm:text-left","break-words overflow-wrap-anywhere",t),...e});jf.displayName="DialogHeader";const gne=({className:t,...e})=>d.jsx("div",{className:He("flex flex-col space-y-2 sm:flex-row sm:space-y-0 sm:justify-end sm:space-x-2","w-full overflow-hidden",t),...e});gne.displayName="DialogFooter";const If=_.forwardRef(({className:t,...e},n)=>d.jsx(U1,{ref:n,className:He("text-lg font-semibold leading-none tracking-tight","break-words overflow-wrap-anywhere hyphens-auto",t),...e}));If.displayName=U1.displayName;const Oy=_.forwardRef(({className:t,...e},n)=>d.jsx(B1,{ref:n,className:He("text-sm text-muted-foreground","break-words overflow-wrap-anywhere",t),...e}));Oy.displayName=B1.displayName;const uF=_.forwardRef(({className:t,...e},n)=>d.jsx("textarea",{className:He("flex min-h-[60px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...e}));uF.displayName="Textarea";const KMe=({pageTexts:t,route:e,enabled:n=!0})=>{const{currentLanguage:r,getCachedTranslation:i}=In(),[o,a]=_.useState({isTranslating:!1,progress:0,totalTexts:0,translatedTexts:0,error:null}),s=_.useRef(new Map),l=_.useRef(null),c=_.useCallback(async()=>{if(!n||r==="en"||t.length===0){a(f=>({...f,isTranslating:!1,progress:100}));return}l.current&&l.current.abort(),l.current=new AbortController,a({isTranslating:!0,progress:0,totalTexts:t.length,translatedTexts:0,error:null});try{console.log(`[PageTranslation] Starting batch translation for ${t.length} texts`);const f=[],h=new Map;t.forEach(p=>{const y=i(p);y?(h.set(p,y),s.current.set(p,y)):p.trim()&&f.push(p)}),a(p=>({...p,translatedTexts:h.size,progress:h.size/t.length*100})),f.length>0?((await ZC.batchTranslate({texts:f,targetLanguage:r})).forEach((y,g)=>{s.current.set(g,y)}),a(y=>({...y,isTranslating:!1,progress:100,translatedTexts:t.length}))):a(p=>({...p,isTranslating:!1,progress:100})),console.log(`[PageTranslation] Completed translation for ${t.length} texts`)}catch(f){f.name!=="AbortError"&&(console.error("[PageTranslation] Translation error:",f),a(h=>({...h,isTranslating:!1,error:"Translation failed"})))}},[t,r,n,i]);_.useEffect(()=>(c(),()=>{l.current&&l.current.abort()}),[c]);const u=_.useCallback(f=>s.current.get(f)||null,[]);return{...o,getTranslation:u,retryTranslation:c}},yne=_.createContext(void 0),JMe=["Insights","Discover patterns in your emotional journey","View:","Day","Week","Month","Year","Dominant Mood","This week","This month","This year","Today","Appeared in most entries","Not enough data","Add more journal entries","Biggest Change","Increased significantly","Decreased significantly","Need more entries to compare","Journal Activity","entries","days","TOP","Emotions","Life Areas","Positive","Neutral","Negative","Mood Trends","Your sentiment changes over time","Previous period","Next period","Chart view","Calendar view","No data available for this timeframe","No journal data available","Start recording journal entries to see your emotional insights.","Go to Journal","No emotional data found","* Click on a legend item to focus on that emotion","Soul-Net Visualization","Explore the connections in your emotional landscape","Sun","Mon","Tue","Wed","Thu","Fri","Sat","J","F","M","A","M","J","J","A","S","O","N","D"],ZMe=({children:t})=>{const e=KMe({pageTexts:JMe,route:"/insights",enabled:!0}),n={isTranslating:e.isTranslating,progress:e.progress,getTranslation:e.getTranslation,retryTranslation:e.retryTranslation};return d.jsx(yne.Provider,{value:n,children:t})},vne=()=>{const t=_.useContext(yne);if(t===void 0)throw new Error("useInsightsTranslation must be used within an InsightsTranslationProvider");return t};function Tn({text:t,className:e="",as:n="span",sourceLanguage:r="en",entryId:i,forceTranslate:o=!1,onTranslationStart:a,onTranslationEnd:s,style:l,enableFontScaling:c=!1,scalingContext:u="general",usePageTranslation:f=!1}){const[h,p]=_.useState(t),[y,g]=_.useState(!1),{translate:v,currentLanguage:b,getCachedTranslation:w}=In(),T=Wi(),C=_.useRef(b),P=_.useRef(t),M=_.useRef(!0),k=T.pathname==="/insights",I=k?vne():null;W3(b);const U=T.pathname;ib(U);const z=Z=>{if(!Z)return"";const H=/\s*[\(\[]([a-z]{2})[\)\]]\s*$/i;return Z.replace(H,"").trim()},O=async()=>{if(!(t!=null&&t.trim())){p("");return}if(b===r){p(t);return}if(f&&k&&I){const H=I.getTranslation(t);if(H){console.log(`[EnhancedTranslatableText] Using page-level translation for: "${t.substring(0,30)}"`),p(H);return}}const Z=w(t);if(Z){p(Z);return}console.log(`[EnhancedTranslatableText] Starting individual translation for: "${t.substring(0,30)}"`),y||(g(!0),a&&a());try{const H=await v(t,r,i);if(M.current&&C.current===b&&P.current===t)if(H){const Y=z(H);p(Y||t)}else p(t)}catch(H){console.error(`[EnhancedTranslatableText] Translation error for "${t.substring(0,30)}"`,H),M.current&&C.current===b&&P.current===t&&p(t)}finally{M.current&&(g(!1),s&&s())}};_.useEffect(()=>(M.current=!0,C.current=b,P.current=t,(async()=>{M.current&&await O()})(),()=>{M.current=!1}),[t,b,r,i,o]),_.useEffect(()=>{const Z=()=>{C.current=b,P.current=t,O()};return window.addEventListener("languageChange",Z),()=>{window.removeEventListener("languageChange",Z)}},[t,r,i,b,o]);const B=c?G3(b,e):e,$=c?q3(b,l):l;let F={};c&&u==="mobile-nav"&&(F={...F,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"100%"});const J={...$,...F},K=`${B} ${y?"opacity-70":""}`.trim();return ve.createElement(n,{className:K,"data-translating":y?"true":"false","data-translated":h!==t?"true":"false","data-lang":b,"data-font-scaled":c?"true":"false","data-scaling-context":u,style:J},h||t)}function QMe({entryId:t,content:e,onEntryUpdated:n}){const[r,i]=_.useState(!1),[o,a]=_.useState(e),[s,l]=_.useState(!1),[c,u]=_.useState(!1),[f,h]=_.useState(!1),[p,y]=_.useState(!1),[g,v]=_.useState(!1),b=ui(),{currentLanguage:w,translate:T,getCachedTranslation:C}=In(),P=async B=>{if(w==="en")return B;const $=C(B);if($)return console.log("[EditEntryButton] Using cached translation for editing"),$;try{return y(!0),console.log("[EditEntryButton] Translating content for editing to",w),await T(B,"en",t)||B}catch(F){return console.error("[EditEntryButton] Error translating content for editing:",F),B}finally{y(!1)}},M=async B=>{if(w==="en")return B;try{v(!0),console.log("[EditEntryButton] Translating edited content back to English for database storage");const{data:$,error:F}=await Ze.functions.invoke("translate-text",{body:{text:B,sourceLanguage:w,targetLanguage:"en",cleanResult:!0}});if(F)throw console.error("[EditEntryButton] Error translating to English:",F),new Error("Translation to English failed");if($&&$.translatedText)return console.log("[EditEntryButton] Successfully translated to English for storage"),$.translatedText;throw new Error("No translated text returned")}catch($){throw console.error("[EditEntryButton] Error in translateToEnglishForSave:",$),$}finally{v(!1)}},k=async()=>{i(!0),h(!1);const B=await P(e);a(B)},I=()=>{s||i(!1)},U=async()=>{if(!o.trim()){I();return}try{l(!0);let B=o;if(w!=="en"){try{B=await M(o),console.log("[EditEntryButton] Translated content for database storage:",{original:o.substring(0,50)+"...",translated:B.substring(0,50)+"..."})}catch(J){console.error("[EditEntryButton] Failed to translate to English, using original content:",J),await Af("toasts.error","toasts.translationFailed",T),l(!1);return}const{translationCache:F}=await cd(async()=>{const{translationCache:J}=await Promise.resolve().then(()=>r0e);return{translationCache:J}},void 0);await F.setTranslation({originalText:B,translatedText:o,language:w,timestamp:Date.now(),version:1}),console.log("[EditEntryButton] Cached edited translation for UI consistency")}n(o,!0),u(!0);const{error:$}=await Ze.from("Journal Entries").update({"refined text":B,Edit_Status:1}).eq("id",t);if($){console.error("Error updating entry:",$),await Af("toasts.error","toasts.entryUpdateFailed",T),n(e,!1),u(!1),l(!1);return}h(!0),console.log("[EditEntryButton] Triggering entry update event"),window.dispatchEvent(new CustomEvent("journalEntryUpdated",{detail:{entryId:t,newContent:B,displayContent:o,isProcessing:!0}}));try{await K2e(t,B)||(console.error("Reprocessing failed for entry:",t),await Af("toasts.error","toasts.processingError",T));const J=1e3;await new Promise(K=>setTimeout(K,J)),console.log("[EditEntryButton] Triggering final refresh for updated entry"),window.dispatchEvent(new CustomEvent("journalEntriesNeedRefresh",{detail:{action:"update",entryId:t,force:!0}})),i(!1),l(!1),u(!1),await Af("toasts.success","toasts.entryUpdated",T)}catch(F){console.error("Processing failed:",F),await Af("toasts.error","toasts.processingError",T),i(!1),l(!1),u(!1)}}catch(B){console.error("Error updating journal entry:",B),await Af("toasts.error","toasts.entryUpdateFailed",T),l(!1),u(!1)}},z=ve.useMemo(()=>{if(w==="en")return o!==e;{const B=C(e);return o!==(B||e)}},[o,e,w,C]),O=p||g;return d.jsxs(d.Fragment,{children:[d.jsx(ct,{variant:"ghost",size:b?"sm":"icon",className:b?"h-8 w-8 p-0 rounded-full":"rounded-full",onClick:k,"aria-label":"Edit entry",disabled:c,children:d.jsx(F0e,{className:"h-4 w-4"})}),d.jsx(Pp,{open:r,onOpenChange:i,children:d.jsxs(Rf,{className:He("w-[95vw] max-w-[95vw] sm:max-w-sm md:max-w-lg mx-auto","max-h-[90vh] overflow-y-auto p-4 sm:p-6","break-words"),children:[d.jsx(jf,{className:"space-y-2",children:d.jsx(If,{className:He("text-base sm:text-lg font-semibold leading-tight","whitespace-normal break-words hyphens-auto",w!=="en"&&"text-sm sm:text-base"),children:d.jsx(Tn,{text:"Edit Journal Entry",forceTranslate:!0,enableFontScaling:!0,scalingContext:"compact"})})}),O?d.jsx("div",{className:"flex items-center justify-center min-h-[200px] py-8",children:d.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[d.jsx(Aa,{className:"h-6 w-6 animate-spin"}),d.jsx("span",{className:He("text-sm text-center",w!=="en"&&"text-xs"),children:d.jsx(Tn,{text:g?"Preparing to save...":"Loading translation...",forceTranslate:!0,enableFontScaling:!0,scalingContext:"compact"})})]})}):d.jsx(uF,{value:o,onChange:B=>a(B.target.value),className:He("min-h-[180px] sm:min-h-[200px] mt-2 resize-none",w!=="en"&&"text-sm leading-relaxed"),placeholder:w==="en"?"Edit your journal entry...":void 0,disabled:s}),d.jsxs(gne,{className:He("flex flex-col space-y-2 sm:flex-row sm:space-y-0 sm:space-x-2 sm:justify-end mt-4","w-full"),children:[d.jsx(ct,{variant:"outline",onClick:I,disabled:s,className:He("rounded-full w-full sm:w-auto","h-10 px-4 text-sm",w!=="en"&&"text-xs sm:text-sm px-3"),children:d.jsx("span",{className:"truncate",children:d.jsx(Tn,{text:"Cancel",forceTranslate:!0,enableFontScaling:!0,scalingContext:"compact"})})}),s?d.jsxs(ct,{disabled:!0,className:He("rounded-full w-full sm:w-auto","h-10 px-4 text-sm",w!=="en"&&"text-xs sm:text-sm px-3"),children:[d.jsx(Aa,{className:"mr-2 h-4 w-4 animate-spin flex-shrink-0"}),d.jsx("span",{className:"truncate",children:f?d.jsx(Tn,{text:"Processing...",forceTranslate:!0,enableFontScaling:!0,scalingContext:"compact"}):d.jsx(Tn,{text:"Saving...",forceTranslate:!0,enableFontScaling:!0,scalingContext:"compact"})})]}):d.jsx(ct,{onClick:U,disabled:!o.trim()||!z||O,className:He("rounded-full w-full sm:w-auto","h-10 px-4 text-sm",w!=="en"&&"text-xs sm:text-sm px-3"),children:d.jsx("span",{className:"truncate",children:d.jsx(Tn,{text:"Save Changes",forceTranslate:!0,enableFontScaling:!0,scalingContext:"compact"})})})]})]})})]})}class Ly extends _.Component{constructor(n){super(n);Mt(this,"handleRetry",()=>{this.props.onReset&&this.props.onReset(),this.setState({hasError:!1,error:void 0,errorInfo:void 0}),window.dispatchEvent(new CustomEvent("journalRetryRequested",{detail:{timestamp:Date.now()}}))});this.state={hasError:!1}}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,r){this.setState({error:n,errorInfo:r}),window.dispatchEvent(new CustomEvent("journalErrorOccurred",{detail:{error:n.message,timestamp:Date.now(),forceCleanup:!0}}))}render(){return this.state.hasError?this.props.fallback?this.props.fallback:d.jsxs(Jr,{className:"w-full max-w-md mx-auto mt-8",children:[d.jsxs(w0,{className:"text-center",children:[d.jsx(dv,{className:"h-12 w-12 text-yellow-500 mx-auto mb-2"}),d.jsx(b0,{className:"text-lg",children:"Something went wrong"})]}),d.jsxs(au,{className:"text-center space-y-4",children:[d.jsx("p",{className:"text-sm text-muted-foreground",children:"We encountered an error while processing your journal entry. This sometimes happens with the first entry."}),d.jsxs(ct,{onClick:this.handleRetry,className:"w-full",variant:"default",children:[d.jsx(Qu,{className:"h-4 w-4 mr-2"}),"Try Again"]}),!1]})]}):this.props.children}}const ePe=t=>{const e=(t.match(/\n/g)||[]).length;return t.length>280||e>0};function p8({entry:t,onDelete:e,isNew:n=!1,isProcessing:r=!1,processing:i=!1,processed:o=!1,setEntries:a}){const s={id:(t==null?void 0:t.id)||0,content:(t==null?void 0:t.content)||"Processing entry...",created_at:(t==null?void 0:t.created_at)||new Date().toISOString(),sentiment:(t==null?void 0:t.sentiment)||null,master_themes:Array.isArray(t==null?void 0:t.master_themes)?t.master_themes:[],themes:Array.isArray(t==null?void 0:t.themes)?t.themes:[],Edit_Status:(t==null?void 0:t.Edit_Status)||null,user_feedback:(t==null?void 0:t.user_feedback)||null,translation_text:t==null?void 0:t.translation_text,original_language:t==null?void 0:t.original_language,tempId:t==null?void 0:t.tempId,emotions:(t==null?void 0:t.emotions)||null},[l,c]=_.useState(!0),[u,f]=_.useState(!1),[h,p]=_.useState(n),[y,g]=_.useState(!1),[v,b]=_.useState(!1),[w,T]=_.useState(!1),[C,P]=_.useState(!1),[M,k]=_.useState(!1),[I,U]=_.useState(!1),z=_.useRef(!0);if(_.useEffect(()=>{{const N=ePe(s.content);k(N)}},[s.content]),_.useEffect(()=>{const N=V=>{V.detail&&V.detail.entryId===s.id&&(console.log(`[JournalEntryCard] Detected deletion event for this entry: ${s.id}`),U(!0))};return window.addEventListener("journalEntryDeleted",N),()=>{window.removeEventListener("journalEntryDeleted",N)}},[s.id]),I)return console.log(`[JournalEntryCard] Not rendering deleted entry: ${s.id}`),null;const O=()=>{try{const N=Array.isArray(s.themes)?s.themes:[],V=Array.isArray(s.master_themes)?s.master_themes:[],W=N.filter(se=>se&&typeof se=="string"&&se.trim()!==""&&se!=="");if(W.length>0)return console.log("[JournalEntryCard] Using specific themes for display:",W),W;const ne=V.filter(se=>se&&typeof se=="string"&&se.trim()!==""&&se!=="");return ne.length>0?(console.log("[JournalEntryCard] Fallback to master_themes for display:",ne),ne):[]}catch(N){return console.error("[JournalEntryCard] Error extracting themes:",N),[]}},B=()=>{if(!s.sentiment||r)return"";let N=0;try{typeof s.sentiment=="string"?N=parseFloat(s.sentiment):typeof s.sentiment=="object"&&s.sentiment!==null&&(N=s.sentiment.score||0)}catch(V){return console.error("[JournalEntryCard] Error parsing sentiment score:",V),""}return N>.2?"border-green-500 border-2":N>=-.1&&N<=.2?"border-yellow-400 border-2":"border-[#ea384c] border-2"};_.useEffect(()=>{var V;const N=s.content!=="Processing entry..."&&s.content!=="Loading..."&&s.content.trim()!=="";console.log(`[JournalEntryCard] Entry ${s.id} content status:`,{hasValidContent:N,contentLength:((V=s.content)==null?void 0:V.length)||0,isProcessing:r,processing:i,tempId:s.tempId}),b(N)},[s.content,r,i]),_.useEffect(()=>(console.log(`[JournalEntryCard] Mounted entry ${s.id} with tempId ${s.tempId}`),z.current=!0,()=>{console.log(`[JournalEntryCard] Unmounted entry ${s.id} with tempId ${s.tempId}`),z.current=!1}),[s.id,s.tempId]),_.useEffect(()=>{if(n){c(!0),p(!0);const N=setTimeout(()=>{z.current&&p(!1)},5e3);return()=>clearTimeout(N)}},[n]);const $=()=>{console.log(`[JournalEntryCard] Toggling themes visibility for entry ${s.id}, current state:`,u),f(!u)},F=(()=>{try{return s.created_at?Pte(s.created_at):(console.error("[JournalEntryCard] Invalid created_at:",s.created_at),{type:"translatable",text:"Recently"})}catch(N){return console.error("[JournalEntryCard] Error formatting date:",N,"Input:",s.created_at),{type:"translatable",text:"Recently"}}})(),J=O(),K=i||r||s.content==="Processing entry..."||s.content==="Loading...",Z=r&&!v&&(!s.themes||s.themes.length===0)&&(!s.master_themes||s.master_themes.length===0),H=(N,V)=>{console.log(`[JournalEntryCard] Updating entry ${t.id} with new content: "${N.substring(0,30)}..."`),a&&a(W=>W.map(ne=>ne.id===t.id?{...ne,content:N,"refined text":N,"transcription text":N,Edit_Status:1,sentiment:V?null:ne.sentiment,emotions:V?null:ne.emotions,master_themes:V?[]:ne.master_themes,entities:V?[]:ne.entities}:ne)),console.log("[JournalEntryCard] Entry update completed, refresh events will handle the rest")},Y=N=>{k(N)};if(y)return d.jsx(Jr,{className:"bg-background shadow-md border-red-300",children:d.jsxs("div",{className:"p-4",children:[d.jsx("h3",{className:"text-red-600",children:"Error displaying entry"}),d.jsx("p",{className:"text-sm mt-2",children:"There was a problem showing this entry."}),d.jsx("button",{className:"text-sm mt-2 text-blue-600 underline",onClick:()=>g(!1),children:"Try again"})]})});if(K&&(s.content==="Processing entry..."||i))return console.log(`[JournalEntryCard] Rendering processing card for ${s.tempId||"unknown"}`),d.jsx(Ly,{children:d.jsx(Ke.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"journal-entry-card","data-entry-id":s.id,"data-temp-id":s.tempId,"data-processing":"true",children:d.jsxs(Jr,{className:"bg-background shadow-md",children:[d.jsx("div",{className:"flex justify-between items-center p-3 md:p-4",children:d.jsx("div",{className:"flex items-center space-x-3",children:d.jsx("div",{className:"flex flex-col",children:d.jsx("h3",{className:"scroll-m-20 text-base md:text-lg font-semibold tracking-tight",children:d.jsx(Q,{text:F.text,forceTranslate:F.type==="translatable"})})})})}),d.jsx("div",{className:"p-3 md:p-4",children:d.jsx(cF,{})})]})})});const L=async()=>{try{if(e&&s.id)return console.log(`[JournalEntryCard] Deleting entry ${s.id}`),U(!0),await e(s.id);throw new Error("Delete handler not available or invalid entry ID")}catch(N){throw console.error("[JournalEntryCard] Error during deletion:",N),U(!1),N}};return d.jsx(Ly,{children:d.jsx(Ke.div,{initial:n?{borderColor:"rgba(var(--color-primary), 0.7)"}:{},animate:h?{borderColor:["rgba(var(--color-primary), 0.7)","rgba(var(--color-primary), 0)"],boxShadow:["0 0 15px rgba(var(--color-primary), 0.3)","0 0 0px rgba(var(--color-primary), 0)"]}:{},transition:{duration:3},className:"journal-entry-card","data-entry-id":s.id,"data-temp-id":s.tempId,"data-processing":r?"true":"false","data-expanded":l?"true":"false","data-show-themes":u?"true":"false",children:d.jsxs(Jr,{className:`bg-background shadow-md ${h?"border-primary":""} ${B()}`,children:[d.jsxs("div",{className:"flex justify-between items-center p-3 md:p-4",children:[d.jsx("div",{className:"flex items-center space-x-3",children:d.jsxs("div",{className:"flex flex-col",children:[d.jsx("h3",{className:"scroll-m-20 text-base md:text-lg font-semibold tracking-tight",children:d.jsx(Q,{text:F.text,forceTranslate:F.type==="translatable"})}),t.Edit_Status===1&&d.jsx("span",{className:"text-xs text-muted-foreground",children:d.jsx(Q,{text:"(edited)",forceTranslate:!0})})]})}),d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(vMe,{onClick:$,isExpanded:u}),d.jsx(QMe,{entryId:s.id,content:s.content,onEntryUpdated:H}),d.jsx(GMe,{onDelete:L})]})]}),d.jsxs("div",{className:"p-3 md:p-4",children:[d.jsx(Ly,{children:d.jsx(YMe,{content:s.content,isExpanded:l,isProcessing:K,entryId:s.id,onOverflowChange:Y})}),u&&d.jsx("div",{className:"mt-2",children:d.jsx(Ly,{children:d.jsx(_Me,{entryId:s.id,initialThemes:J,content:s.content,isProcessing:Z,isNew:n})})})]})]})})})}const tPe=({onStartRecording:t})=>{const{isInStep:e,tutorialCompleted:n}=ka(),r=e(3)&&!n;return d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsx("h2",{className:"text-xl font-semibold",children:d.jsx(Q,{text:"Your journal entries"})}),d.jsxs(ct,{onClick:t,size:"sm",className:`flex items-center gap-1 record-entry-button ${r?"tutorial-record-entry-button tutorial-target record-entry-tab":""}`,"data-tutorial-target":r?"record-entry":void 0,id:"new-entry-button",children:[d.jsx(F3,{className:"w-4 h-4"}),d.jsx(Q,{text:"New entry"})]})]})},nPe=({title:t,description:e,buttonText:n,onAction:r})=>{const{isActive:i,isInStep:o}=ka(),a=i&&o(5);return d.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[d.jsxs("div",{className:"mb-4",children:[d.jsx("h3",{className:"text-lg font-medium",children:t}),d.jsx("p",{className:"text-muted-foreground mt-1",children:e})]}),n&&r&&!a&&d.jsx(ct,{onClick:r,children:n})]})},rPe=({onStartRecording:t})=>d.jsx(nPe,{title:d.jsx(Q,{text:"No journal entries yet"}),description:d.jsx(Q,{text:"Start recording your thoughts and experiences"}),buttonText:d.jsx(Q,{text:"Record new entry"}),onAction:t}),xne=_.createContext({logs:[],addLog:()=>{},log:()=>{},addEvent:()=>{},clearLogs:()=>{},isEnabled:!1,toggleEnabled:()=>{},recorderSteps:[],addRecorderStep:()=>{},updateRecorderStep:()=>{},resetRecorderSteps:()=>{},showRecorderDebug:!1,toggleRecorderDebug:()=>{}}),iPe=({children:t})=>{const[e,n]=_.useState([]),[r,i]=_.useState(!1),[o,a]=_.useState([]),[s,l]=_.useState(!1),c=(...w)=>{n(T=>[...T,...w]),console.log(...w)},u=(...w)=>{c(...w)},f=(...w)=>{n(T=>[...T,{event:w}]),console.debug("Event:",...w)},h=()=>{n([])},p=()=>{i(w=>!w)},y=w=>{a(T=>[...T,{...w,timestamp:Date.now()}])},g=(w,T)=>{a(C=>C.map(P=>P.id===w?{...P,...T,duration:Date.now()-(P.timestamp||Date.now())}:P))},v=()=>{a([])},b=()=>{l(w=>!w)};return d.jsx(xne.Provider,{value:{logs:e,addLog:c,log:u,addEvent:f,clearLogs:h,isEnabled:r,toggleEnabled:p,recorderSteps:o,addRecorderStep:y,updateRecorderStep:g,resetRecorderSteps:v,showRecorderDebug:s,toggleRecorderDebug:b},children:t})},$1=()=>_.useContext(xne),m8=({count:t=1,tempId:e,isVisible:n=!0})=>{const{log:r}=$1(),i=_.useRef(null),[o,a]=ve.useState(n);return _.useEffect(()=>{e&&r(`[JournalEntryLoadingSkeleton] Component mounted for tempId: ${e}, isVisible: ${n}`)},[e,n,r]),_.useEffect(()=>{const s=c=>{var u,f;(((u=c.detail)==null?void 0:u.tempId)===e||((f=c.detail)==null?void 0:f.tempId)==="all")&&(console.log(`[JournalEntryLoadingSkeleton] Force remove event received for ${e}`),a(!1),i.current&&(i.current.style.display="none",setTimeout(()=>{var h;(h=i.current)!=null&&h.parentNode&&i.current.parentNode.removeChild(i.current)},0)))},l=c=>{var u;((u=c.detail)==null?void 0:u.tempId)===e&&(console.log(`[JournalEntryLoadingSkeleton] Processing completed event received for ${e}`),a(!1),i.current&&(i.current.style.display="none",setTimeout(()=>{var f;(f=i.current)!=null&&f.parentNode&&i.current.parentNode.removeChild(i.current)},0)))};return window.addEventListener("forceRemoveProcessingCard",s),window.addEventListener("forceRemoveLoadingContent",s),window.addEventListener("forceRemoveAllProcessingCards",s),window.addEventListener("forceRemoveAllLoadingContent",s),window.addEventListener("processingEntryCompleted",l),()=>{window.removeEventListener("forceRemoveProcessingCard",s),window.removeEventListener("forceRemoveLoadingContent",s),window.removeEventListener("forceRemoveAllProcessingCards",s),window.removeEventListener("forceRemoveAllLoadingContent",s),window.removeEventListener("processingEntryCompleted",l)}},[e]),_.useEffect(()=>{a(n),!n&&i.current&&(i.current.style.display="none")},[n]),o?d.jsx(Kc,{mode:"wait",children:d.jsx(Ke.div,{ref:i,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20,transition:{duration:.1}},transition:{duration:.2},className:"processing-card","data-temp-id":e,"data-loading-skeleton":"true",children:Array.from({length:t}).map((s,l)=>d.jsx(Jr,{className:"journal-entry-card processing-card p-6 mb-4 border border-slate-200/20 bg-gradient-to-br from-slate-50/50 to-white/50 dark:from-slate-900/50 dark:to-slate-800/50",children:d.jsx(cF,{})},l))},e||"loading-skeleton")}):null};function oPe(){const[t,e]=_.useState([]),[n,r]=_.useState([]),[i,o]=_.useState(Date.now()),[a,s]=_.useState(0),l=_.useCallback(()=>{console.log("[useProcessingEntries] Force refresh triggered");const c=Ht.getProcessingEntries(),u=Ht.getVisibleProcessingEntries(),f=Ht.getImmediateProcessingCount();console.log("[useProcessingEntries] Current entries:",c.length),console.log("[useProcessingEntries] Current visible:",u.length),console.log("[useProcessingEntries] Immediate processing count:",f),e([...c]),r([...u]),s(f),o(Date.now())},[]);return _.useEffect(()=>{console.log("[useProcessingEntries] Initializing hook"),Ht.restoreFromLocalStorage(),l();const c=Ht.entriesChanges().subscribe(p=>{console.log("[useProcessingEntries] Observable update:",p.length);const y=p.filter(v=>v.isVisible),g=Ht.getImmediateProcessingCount();e([...p]),r([...y]),s(g),o(Date.now())}),u=p=>{console.log("[useProcessingEntries] Entry hidden event received"),l()},f=p=>{console.log("[useProcessingEntries] Processing started event received:",p.detail),setTimeout(l,10)},h=p=>{console.log("[useProcessingEntries] Immediate processing started event received:",p.detail),l()};return window.addEventListener("processingEntryHidden",u),window.addEventListener("processingStarted",f),window.addEventListener("immediateProcessingStarted",h),window.addEventListener("processingEntriesChanged",l),()=>{c.unsubscribe(),window.removeEventListener("processingEntryHidden",u),window.removeEventListener("processingStarted",f),window.removeEventListener("immediateProcessingStarted",h),window.removeEventListener("processingEntriesChanged",l)}},[l]),{entries:t,visibleEntries:n,activeProcessingIds:n.map(c=>c.tempId),lastUpdate:i,immediateProcessingCount:a,forceRefresh:l,isProcessing:c=>Ht.isProcessing(c),isVisible:c=>Ht.isVisible(c),isImmediatelyProcessing:c=>Ht.isImmediatelyProcessing(c),hasAnyProcessing:()=>Ht.hasAnyProcessing(),hasError:Ht.hasError.bind(Ht),getEntryId:Ht.getEntryId.bind(Ht),removeEntry:Ht.removeEntry.bind(Ht),hideEntry:Ht.hideEntry.bind(Ht),retryProcessing:Ht.retryProcessing.bind(Ht)}}const aPe=t=>{t(),window.dispatchEvent(new CustomEvent("processingStateSynced",{detail:{timestamp:Date.now(),immediate:!0}}))},LE=t=>{console.log(`[ProcessingIntent] Setting processing intent: ${t}`),aPe(()=>{Ht.setProcessingIntent(t),t?(window.dispatchEvent(new CustomEvent("immediateProcessingStarted",{detail:{tempId:"intent-started",timestamp:Date.now(),immediate:!0}})),window.dispatchEvent(new CustomEvent("processingIntent",{detail:{intent:!0,timestamp:Date.now(),immediate:!0}}))):window.dispatchEvent(new CustomEvent("processingIntent",{detail:{intent:!1,timestamp:Date.now(),immediate:!0}}))})},DE=()=>Ht.hasProcessingIntent(),sPe=({entries:t,loading:e,processingEntries:n,processedEntryIds:r,onStartRecording:i,onDeleteEntry:o,isSavingRecording:a=!1})=>{const{visibleEntries:s,isVisible:l,forceRefresh:c,immediateProcessingCount:u,hasAnyProcessing:f}=oPe(),[h,p]=_.useState(!1),[y,g]=_.useState(!1),[v,b]=_.useState(null),[w,T]=_.useState([]),C=_.useRef(new Set),P=t&&t.length>0,M=e&&!P;_.useEffect(()=>{a?(console.log("[JournalEntriesList] isSavingRecording detected - setting immediate processing"),p(!0)):DE()||n.length>0||s.length>0||p(!1)},[a,n.length,s.length]),_.useEffect(()=>{const H=()=>{const L=DE();g(L),L&&p(!0)};H();const Y=setInterval(H,50);return()=>clearInterval(Y)},[]),_.useEffect(()=>{console.log("[JournalEntriesList] Component mounted"),b("Component Mounted");const H=V=>{console.log("[JournalEntriesList] IMMEDIATE processing started event received:",V.detail),p(!0),c()},Y=V=>{var W;console.log("[JournalEntriesList] Processing started event received:",V.detail),p(!0),(W=V.detail)!=null&&W.tempId&&T(ne=>ne.includes(V.detail.tempId)?ne:(console.log("[JournalEntriesList] Adding fallback processing ID:",V.detail.tempId),[...ne,V.detail.tempId])),c()},L=V=>{var ne;console.log("[JournalEntriesList] Processing completed event received:",V.detail),(ne=V.detail)!=null&&ne.tempId&&T(se=>se.filter(te=>te!==V.detail.tempId)),Ht.hasAnyImmediateProcessing()||DE()||a||p(!1)},N=V=>{console.log("[JournalEntriesList] Processing intent event received:",V.detail),p(!0)};return window.addEventListener("immediateProcessingStarted",H),window.addEventListener("processingStarted",Y),window.addEventListener("processingEntryCompleted",L),window.addEventListener("processingEntryHidden",L),window.addEventListener("processingIntent",N),()=>{console.log("[JournalEntriesList] Component unmounted"),window.removeEventListener("immediateProcessingStarted",H),window.removeEventListener("processingStarted",Y),window.removeEventListener("processingEntryCompleted",L),window.removeEventListener("processingEntryHidden",L),window.removeEventListener("processingIntent",N)}},[c,a]),_.useEffect(()=>{t.forEach(H=>{if(H.id&&H.tempId){const Y=Ht.getEntryById(H.tempId);Y&&Y.state!==Ql.COMPLETED&&(console.log(`[JournalEntriesList] Found entry with both id and tempId: ${H.id} / ${H.tempId} - marking as completed`),Ht.updateEntryState(H.tempId,Ql.COMPLETED),Ht.setEntryId(H.tempId,H.id),T(N=>N.filter(V=>V!==H.tempId)),Ht.hasAnyImmediateProcessing()||DE()||a||p(!1))}})},[t]);const k=async H=>{try{return console.log(`[JournalEntriesList] Handling delete for entry: ${H}`),b(`Deleting Entry ${H}`),H?(C.current.add(H),Ht.getProcessingEntries().forEach(L=>{L.entryId===H&&Ht.removeEntry(L.tempId)}),await o(H),console.log(`[JournalEntriesList] Delete handler completed for entry: ${H}`),window.dispatchEvent(new CustomEvent("journalEntryDeleted",{detail:{entryId:H,timestamp:Date.now()}})),Promise.resolve()):(console.error("[JournalEntriesList] Invalid entry ID for deletion"),Promise.reject(new Error("Invalid entry ID")))}catch(Y){return console.error(`[JournalEntriesList] Error when deleting entry ${H}:`,Y),Promise.reject(Y)}},I=t.filter(H=>!C.current.has(H.id)),U=s.map(H=>H.tempId),z=[...new Set([...U,...w])],B=Ht.getVisibleProcessingEntries().map(H=>H.tempId),$=[...new Set([...z,...B])],F=a||h||y||Ht.hasProcessingIntent()||Ht.hasAnyImmediateProcessing()||f()||u>0||$.length>0;console.log(`[JournalEntriesList] Processing detection: isSavingRecording=${a}, isCurrentlyProcessing=${F}, finalProcessingIds=${$.length}, filteredEntries=${I.length}`);const J=F,K=I.length>0,Z=!J&&!K&&!M;return console.log(`[JournalEntriesList] Display logic: shouldShowProcessing=${J}, shouldShowEntries=${K}, shouldShowEmpty=${Z}, isLoading=${M}`),d.jsxs("div",{className:"journal-entries-list",id:"journal-entries-container","data-last-action":v,children:[d.jsx(tPe,{onStartRecording:i}),M?d.jsx("div",{className:"flex items-center justify-center h-48",children:d.jsx("p",{className:"text-muted-foreground",children:d.jsx(Q,{text:"Loading journal entries..."})})}):J?d.jsxs("div",{className:"grid gap-4","data-entries-count":I.length,children:[d.jsx("div",{"data-processing-cards-container":"true",className:"processing-cards-container",children:$.length>0?$.map(H=>{const Y=Ht.getEntryById(H),L=Y?l(H):!0;return console.log(`[JournalEntriesList] Rendering processing card for: ${H}, visible: ${L}, hasEntry: ${!!Y}`),d.jsx(m8,{count:1,tempId:H,isVisible:!0},`processing-${H}`)}):d.jsx(m8,{count:1,tempId:"emergency-loading",isVisible:!0},"emergency-processing")}),K&&I.map(H=>{const Y=H.tempId?Ht.isProcessing(H.tempId):!1;return d.jsx(p8,{entry:{...H,content:H.content||H["refined text"]||H["transcription text"]||""},processing:Y,processed:r.includes(H.id),onDelete:k,setEntries:null},H.id||H.tempId||Math.random())})]}):K?d.jsx("div",{className:"grid gap-4","data-entries-count":I.length,children:I.map(H=>{const Y=H.tempId?Ht.isProcessing(H.tempId):!1;return d.jsx(p8,{entry:{...H,content:H.content||H["refined text"]||H["transcription text"]||""},processing:Y,processed:r.includes(H.id),onDelete:k,setEntries:null},H.id||H.tempId||Math.random())})}):Z?d.jsx(rPe,{onStartRecording:i}):null]})};var yP={exports:{}},g8;function lPe(){return g8||(g8=1,function(t){/**
 * {@link https://github.com/muaz-khan/RecordRTC|RecordRTC} is a WebRTC JavaScript library for audio/video as well as screen activity recording. It supports Chrome, Firefox, Opera, Android, and Microsoft Edge. Platforms: Linux, Mac and Windows. 
 * @summary Record audio, video or screen inside the browser.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef RecordRTC
 * @class
 * @example
 * var recorder = RecordRTC(mediaStream or [arrayOfMediaStream], {
 *     type: 'video', // audio or video or gif or canvas
 *     recorderType: MediaStreamRecorder || CanvasRecorder || StereoAudioRecorder || Etc
 * });
 * recorder.startRecording();
 * @see For further information:
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - Single media-stream object, array of media-streams, html-canvas-element, etc.
 * @param {object} config - {type:"video", recorderType: MediaStreamRecorder, disableLogs: true, numberOfAudioChannels: 1, bufferSize: 0, sampleRate: 0, desiredSampRate: 16000, video: HTMLVideoElement, etc.}
 */function e(L,N){if(!L)throw"First parameter is required.";N=N||{type:"video"},N=new n(L,N);var V=this;function W(oe){return N.disableLogs||console.log("RecordRTC version: ",V.version),oe&&(N=new n(L,oe)),N.disableLogs||console.log("started recording "+N.type+" stream."),be?(be.clearRecordedData(),be.record(),he("recording"),V.recordingDuration&&ce(),V):(ne(function(){V.recordingDuration&&ce()}),V)}function ne(oe){oe&&(N.initCallback=function(){oe(),oe=N.initCallback=null});var ae=new r(L,N);be=new ae(L,N),be.record(),he("recording"),N.disableLogs||console.log("Initialized recorderType:",be.constructor.name,"for output-type:",N.type)}function se(oe){if(oe=oe||function(){},!be){xe();return}if(V.state==="paused"){V.resumeRecording(),setTimeout(function(){se(oe)},1);return}V.state!=="recording"&&!N.disableLogs&&console.warn('Recording state should be: "recording", however current state is: ',V.state),N.disableLogs||console.log("Stopped recording "+N.type+" stream."),N.type!=="gif"?be.stop(ae):(be.stop(),ae()),he("stopped");function ae(Se){if(!be){typeof oe.call=="function"?oe.call(V,""):oe("");return}Object.keys(be).forEach(function(Ie){typeof be[Ie]!="function"&&(V[Ie]=be[Ie])});var me=be.blob;if(!me)if(Se)be.blob=me=Se;else throw"Recording failed.";if(me&&!N.disableLogs&&console.log(me.type,"->",b(me.size)),oe){var ye;try{ye=u.createObjectURL(me)}catch{}typeof oe.call=="function"?oe.call(V,ye):oe(ye)}N.autoWriteToDisk&&de(function(Ie){var De={};De[N.type+"Blob"]=Ie,F.Store(De)})}}function te(){if(!be){xe();return}if(V.state!=="recording"){N.disableLogs||console.warn("Unable to pause the recording. Recording state: ",V.state);return}he("paused"),be.pause(),N.disableLogs||console.log("Paused recording.")}function ie(){if(!be){xe();return}if(V.state!=="paused"){N.disableLogs||console.warn("Unable to resume the recording. Recording state: ",V.state);return}he("recording"),be.resume(),N.disableLogs||console.log("Resumed recording.")}function pe(oe){postMessage(new FileReaderSync().readAsDataURL(oe))}function de(oe,ae){if(!oe)throw"Pass a callback function over getDataURL.";var Se=ae?ae.blob:(be||{}).blob;if(!Se){N.disableLogs||console.warn("Blob encoder did not finish its job yet."),setTimeout(function(){de(oe,ae)},1e3);return}if(typeof Worker<"u"&&!navigator.mozGetUserMedia){var me=Ie(pe);me.onmessage=function(De){oe(De.data)},me.postMessage(Se)}else{var ye=new FileReader;ye.readAsDataURL(Se),ye.onload=function(De){oe(De.target.result)}}function Ie(De){try{var Ue=u.createObjectURL(new Blob([De.toString(),"this.onmessage =  function (eee) {"+De.name+"(eee.data);}"],{type:"application/javascript"})),$e=new Worker(Ue);return u.revokeObjectURL(Ue),$e}catch{}}}function ce(oe){if(oe=oe||0,V.state==="paused"){setTimeout(function(){ce(oe)},1e3);return}if(V.state!=="stopped"){if(oe>=V.recordingDuration){se(V.onRecordingStopped);return}oe+=1e3,setTimeout(function(){ce(oe)},1e3)}}function he(oe){V&&(V.state=oe,typeof V.onStateChanged.call=="function"?V.onStateChanged.call(V,oe):V.onStateChanged(oe))}var ee='It seems that recorder is destroyed or "startRecording" is not invoked for '+N.type+" recorder.";function xe(){N.disableLogs!==!0&&console.warn(ee)}var be,Ae={startRecording:W,stopRecording:se,pauseRecording:te,resumeRecording:ie,initRecorder:ne,setRecordingDuration:function(oe,ae){if(typeof oe>"u")throw"recordingDuration is required.";if(typeof oe!="number")throw"recordingDuration must be a number.";return V.recordingDuration=oe,V.onRecordingStopped=ae||function(){},{onRecordingStopped:function(Se){V.onRecordingStopped=Se}}},clearRecordedData:function(){if(!be){xe();return}be.clearRecordedData(),N.disableLogs||console.log("Cleared old recorded data.")},getBlob:function(){if(!be){xe();return}return be.blob},getDataURL:de,toURL:function(){if(!be){xe();return}return u.createObjectURL(be.blob)},getInternalRecorder:function(){return be},save:function(oe){if(!be){xe();return}w(be.blob,oe)},getFromDisk:function(oe){if(!be){xe();return}e.getFromDisk(N.type,oe)},setAdvertisementArray:function(oe){N.advertisement=[];for(var ae=oe.length,Se=0;Se<ae;Se++)N.advertisement.push({duration:Se,image:oe[Se]})},blob:null,bufferSize:0,sampleRate:0,buffer:null,reset:function(){V.state==="recording"&&!N.disableLogs&&console.warn("Stop an active recorder."),be&&typeof be.clearRecordedData=="function"&&be.clearRecordedData(),be=null,he("inactive"),V.blob=null},onStateChanged:function(oe){N.disableLogs||console.log("Recorder state changed:",oe)},state:"inactive",getState:function(){return V.state},destroy:function(){var oe=N.disableLogs;N={disableLogs:!0},V.reset(),he("destroyed"),Ae=V=null,k.AudioContextConstructor&&(k.AudioContextConstructor.close(),k.AudioContextConstructor=null),N.disableLogs=oe,N.disableLogs||console.log("RecordRTC is destroyed.")},version:"5.6.2"};if(!this)return V=Ae,Ae;for(var Ce in Ae)this[Ce]=Ae[Ce];return V=this,Ae}e.version="5.6.2",t.exports=e,e.getFromDisk=function(L,N){if(!N)throw"callback is mandatory.";console.log("Getting recorded "+(L==="all"?"blobs":L+" blob ")+" from disk!"),F.Fetch(function(V,W){L!=="all"&&W===L+"Blob"&&N&&N(V),L==="all"&&N&&N(V,W.replace("Blob",""))})},e.writeToDisk=function(L){console.log("Writing recorded blob(s) to disk!"),L=L||{},L.audio&&L.video&&L.gif?L.audio.getDataURL(function(N){L.video.getDataURL(function(V){L.gif.getDataURL(function(W){F.Store({audioBlob:N,videoBlob:V,gifBlob:W})})})}):L.audio&&L.video?L.audio.getDataURL(function(N){L.video.getDataURL(function(V){F.Store({audioBlob:N,videoBlob:V})})}):L.audio&&L.gif?L.audio.getDataURL(function(N){L.gif.getDataURL(function(V){F.Store({audioBlob:N,gifBlob:V})})}):L.video&&L.gif?L.video.getDataURL(function(N){L.gif.getDataURL(function(V){F.Store({videoBlob:N,gifBlob:V})})}):L.audio?L.audio.getDataURL(function(N){F.Store({audioBlob:N})}):L.video?L.video.getDataURL(function(N){F.Store({videoBlob:N})}):L.gif&&L.gif.getDataURL(function(N){F.Store({gifBlob:N})})};/**
 * {@link RecordRTCConfiguration} is an inner/private helper for {@link RecordRTC}.
 * @summary It configures the 2nd parameter passed over {@link RecordRTC} and returns a valid "config" object.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef RecordRTCConfiguration
 * @class
 * @example
 * var options = RecordRTCConfiguration(mediaStream, options);
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @param {object} config - {type:"video", disableLogs: true, numberOfAudioChannels: 1, bufferSize: 0, sampleRate: 0, video: HTMLVideoElement, getNativeBlob:true, etc.}
 */function n(L,N){return!N.recorderType&&!N.type&&(N.audio&&N.video?N.type="video":N.audio&&!N.video&&(N.type="audio")),N.recorderType&&!N.type&&(N.recorderType===B||N.recorderType===O||typeof Y<"u"&&N.recorderType===Y?N.type="video":N.recorderType===J?N.type="gif":N.recorderType===z?N.type="audio":N.recorderType===U&&(C(L,"audio").length&&C(L,"video").length||!C(L,"audio").length&&C(L,"video").length?N.type="video":C(L,"audio").length&&!C(L,"video").length&&(N.type="audio"))),typeof U<"u"&&typeof MediaRecorder<"u"&&"requestData"in MediaRecorder.prototype&&(N.mimeType||(N.mimeType="video/webm"),N.type||(N.type=N.mimeType.split("/")[0]),N.bitsPerSecond),N.type||(N.mimeType&&(N.type=N.mimeType.split("/")[0]),N.type||(N.type="audio")),N}/**
 * {@link GetRecorderType} is an inner/private helper for {@link RecordRTC}.
 * @summary It returns best recorder-type available for your browser.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef GetRecorderType
 * @class
 * @example
 * var RecorderType = GetRecorderType(options);
 * var recorder = new RecorderType(options);
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @param {object} config - {type:"video", disableLogs: true, numberOfAudioChannels: 1, bufferSize: 0, sampleRate: 0, video: HTMLVideoElement, etc.}
 */function r(L,N){var V;return(y||f||h)&&(V=z),typeof MediaRecorder<"u"&&"requestData"in MediaRecorder.prototype&&!y&&(V=U),N.type==="video"&&(y||h)&&(V=B,typeof Y<"u"&&typeof ReadableStream<"u"&&(V=Y)),N.type==="gif"&&(V=J),N.type==="canvas"&&(V=O),I()&&V!==O&&V!==J&&typeof MediaRecorder<"u"&&"requestData"in MediaRecorder.prototype&&(C(L,"video").length||C(L,"audio").length)&&(N.type==="audio"?typeof MediaRecorder.isTypeSupported=="function"&&MediaRecorder.isTypeSupported("audio/webm")&&(V=U):typeof MediaRecorder.isTypeSupported=="function"&&MediaRecorder.isTypeSupported("video/webm")&&(V=U)),L instanceof Array&&L.length&&(V=Z),N.recorderType&&(V=N.recorderType),!N.disableLogs&&V&&V.name&&console.log("Using recorderType:",V.name||V.constructor.name),!V&&g&&(V=U),V}/**
 * MRecordRTC runs on top of {@link RecordRTC} to bring multiple recordings in a single place, by providing simple API.
 * @summary MRecordRTC stands for "Multiple-RecordRTC".
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef MRecordRTC
 * @class
 * @example
 * var recorder = new MRecordRTC();
 * recorder.addStream(MediaStream);
 * recorder.mediaType = {
 *     audio: true, // or StereoAudioRecorder or MediaStreamRecorder
 *     video: true, // or WhammyRecorder or MediaStreamRecorder or WebAssemblyRecorder or CanvasRecorder
 *     gif: true    // or GifRecorder
 * };
 * // mimeType is optional and should be set only in advance cases.
 * recorder.mimeType = {
 *     audio: 'audio/wav',
 *     video: 'video/webm',
 *     gif:   'image/gif'
 * };
 * recorder.startRecording();
 * @see For further information:
 * @see {@link https://github.com/muaz-khan/RecordRTC/tree/master/MRecordRTC|MRecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @requires {@link RecordRTC}
 */function i(L){this.addStream=function(N){N&&(L=N)},this.mediaType={audio:!0,video:!0},this.startRecording=function(){var N=this.mediaType,V,W=this.mimeType||{audio:null,video:null,gif:null};if(typeof N.audio!="function"&&I()&&!C(L,"audio").length&&(N.audio=!1),typeof N.video!="function"&&I()&&!C(L,"video").length&&(N.video=!1),typeof N.gif!="function"&&I()&&!C(L,"video").length&&(N.gif=!1),!N.audio&&!N.video&&!N.gif)throw"MediaStream must have either audio or video tracks.";if(N.audio&&(V=null,typeof N.audio=="function"&&(V=N.audio),this.audioRecorder=new e(L,{type:"audio",bufferSize:this.bufferSize,sampleRate:this.sampleRate,numberOfAudioChannels:this.numberOfAudioChannels||2,disableLogs:this.disableLogs,recorderType:V,mimeType:W.audio,timeSlice:this.timeSlice,onTimeStamp:this.onTimeStamp}),N.video||this.audioRecorder.startRecording()),N.video){V=null,typeof N.video=="function"&&(V=N.video);var ne=L;if(I()&&N.audio&&typeof N.audio=="function"){var se=C(L,"video")[0];p?(ne=new v,ne.addTrack(se),V&&V===B&&(V=U)):(ne=new v,ne.addTrack(se))}this.videoRecorder=new e(ne,{type:"video",video:this.video,canvas:this.canvas,frameInterval:this.frameInterval||10,disableLogs:this.disableLogs,recorderType:V,mimeType:W.video,timeSlice:this.timeSlice,onTimeStamp:this.onTimeStamp,workerPath:this.workerPath,webAssemblyPath:this.webAssemblyPath,frameRate:this.frameRate,bitrate:this.bitrate}),N.audio||this.videoRecorder.startRecording()}if(N.audio&&N.video){var te=this,ie=I()===!0;(N.audio instanceof z&&N.video||N.audio!==!0&&N.video!==!0&&N.audio!==N.video)&&(ie=!1),ie===!0?(te.audioRecorder=null,te.videoRecorder.startRecording()):te.videoRecorder.initRecorder(function(){te.audioRecorder.initRecorder(function(){te.videoRecorder.startRecording(),te.audioRecorder.startRecording()})})}N.gif&&(V=null,typeof N.gif=="function"&&(V=N.gif),this.gifRecorder=new e(L,{type:"gif",frameRate:this.frameRate||200,quality:this.quality||10,disableLogs:this.disableLogs,recorderType:V,mimeType:W.gif}),this.gifRecorder.startRecording())},this.stopRecording=function(N){N=N||function(){},this.audioRecorder&&this.audioRecorder.stopRecording(function(V){N(V,"audio")}),this.videoRecorder&&this.videoRecorder.stopRecording(function(V){N(V,"video")}),this.gifRecorder&&this.gifRecorder.stopRecording(function(V){N(V,"gif")})},this.pauseRecording=function(){this.audioRecorder&&this.audioRecorder.pauseRecording(),this.videoRecorder&&this.videoRecorder.pauseRecording(),this.gifRecorder&&this.gifRecorder.pauseRecording()},this.resumeRecording=function(){this.audioRecorder&&this.audioRecorder.resumeRecording(),this.videoRecorder&&this.videoRecorder.resumeRecording(),this.gifRecorder&&this.gifRecorder.resumeRecording()},this.getBlob=function(N){var V={};return this.audioRecorder&&(V.audio=this.audioRecorder.getBlob()),this.videoRecorder&&(V.video=this.videoRecorder.getBlob()),this.gifRecorder&&(V.gif=this.gifRecorder.getBlob()),N&&N(V),V},this.destroy=function(){this.audioRecorder&&(this.audioRecorder.destroy(),this.audioRecorder=null),this.videoRecorder&&(this.videoRecorder.destroy(),this.videoRecorder=null),this.gifRecorder&&(this.gifRecorder.destroy(),this.gifRecorder=null)},this.getDataURL=function(N){this.getBlob(function(ne){ne.audio&&ne.video?V(ne.audio,function(se){V(ne.video,function(te){N({audio:se,video:te})})}):ne.audio?V(ne.audio,function(se){N({audio:se})}):ne.video&&V(ne.video,function(se){N({video:se})})});function V(ne,se){if(typeof Worker<"u"){var te=W(function(de){postMessage(new FileReaderSync().readAsDataURL(de))});te.onmessage=function(pe){se(pe.data)},te.postMessage(ne)}else{var ie=new FileReader;ie.readAsDataURL(ne),ie.onload=function(pe){se(pe.target.result)}}}function W(ne){var se=u.createObjectURL(new Blob([ne.toString(),"this.onmessage =  function (eee) {"+ne.name+"(eee.data);}"],{type:"application/javascript"})),te=new Worker(se),ie;if(typeof u<"u")ie=u;else if(typeof webkitURL<"u")ie=webkitURL;else throw"Neither URL nor webkitURL detected.";return ie.revokeObjectURL(se),te}},this.writeToDisk=function(){e.writeToDisk({audio:this.audioRecorder,video:this.videoRecorder,gif:this.gifRecorder})},this.save=function(N){N=N||{audio:!0,video:!0,gif:!0},N.audio&&this.audioRecorder&&this.audioRecorder.save(typeof N.audio=="string"?N.audio:""),N.video&&this.videoRecorder&&this.videoRecorder.save(typeof N.video=="string"?N.video:""),N.gif&&this.gifRecorder&&this.gifRecorder.save(typeof N.gif=="string"?N.gif:"")}}i.getFromDisk=e.getFromDisk,i.writeToDisk=e.writeToDisk,typeof e<"u"&&(e.MRecordRTC=i);var o="Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45";(function(L){L&&(typeof window<"u"||typeof ur>"u"||(ur.navigator={userAgent:o,getUserMedia:function(){}},ur.console||(ur.console={}),(typeof ur.console.log>"u"||typeof ur.console.error>"u")&&(ur.console.error=ur.console.log=ur.console.log||function(){console.log(arguments)}),typeof document>"u"&&(L.document={documentElement:{appendChild:function(){return""}}},document.createElement=document.captureStream=document.mozCaptureStream=function(){var N={getContext:function(){return N},play:function(){},pause:function(){},drawImage:function(){},toDataURL:function(){return""},style:{}};return N},L.HTMLVideoElement=function(){}),typeof location>"u"&&(L.location={protocol:"file:",href:"",hash:""}),typeof screen>"u"&&(L.screen={width:0,height:0}),typeof u>"u"&&(L.URL={createObjectURL:function(){return""},revokeObjectURL:function(){return""}}),L.window=ur))})(typeof ur<"u"?ur:null);var a=window.requestAnimationFrame;if(typeof a>"u"){if(typeof webkitRequestAnimationFrame<"u")a=webkitRequestAnimationFrame;else if(typeof mozRequestAnimationFrame<"u")a=mozRequestAnimationFrame;else if(typeof msRequestAnimationFrame<"u")a=msRequestAnimationFrame;else if(typeof a>"u"){var s=0;a=function(L,N){var V=new Date().getTime(),W=Math.max(0,16-(V-s)),ne=setTimeout(function(){L(V+W)},W);return s=V+W,ne}}}var l=window.cancelAnimationFrame;typeof l>"u"&&(typeof webkitCancelAnimationFrame<"u"?l=webkitCancelAnimationFrame:typeof mozCancelAnimationFrame<"u"?l=mozCancelAnimationFrame:typeof msCancelAnimationFrame<"u"?l=msCancelAnimationFrame:typeof l>"u"&&(l=function(L){clearTimeout(L)}));var c=window.AudioContext;typeof c>"u"&&(typeof webkitAudioContext<"u"&&(c=webkitAudioContext),typeof mozAudioContext<"u"&&(c=mozAudioContext));var u=window.URL;typeof u>"u"&&typeof webkitURL<"u"&&(u=webkitURL),typeof navigator<"u"&&typeof navigator.getUserMedia>"u"&&(typeof navigator.webkitGetUserMedia<"u"&&(navigator.getUserMedia=navigator.webkitGetUserMedia),typeof navigator.mozGetUserMedia<"u"&&(navigator.getUserMedia=navigator.mozGetUserMedia));var f=navigator.userAgent.indexOf("Edge")!==-1&&(!!navigator.msSaveBlob||!!navigator.msSaveOrOpenBlob),h=!!window.opera||navigator.userAgent.indexOf("OPR/")!==-1,p=navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&"netscape"in window&&/ rv:/.test(navigator.userAgent),y=!h&&!f&&!!navigator.webkitGetUserMedia||T()||navigator.userAgent.toLowerCase().indexOf("chrome/")!==-1,g=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);g&&!y&&navigator.userAgent.indexOf("CriOS")!==-1&&(g=!1,y=!0);var v=window.MediaStream;typeof v>"u"&&typeof webkitMediaStream<"u"&&(v=webkitMediaStream),typeof v<"u"&&typeof v.prototype.stop>"u"&&(v.prototype.stop=function(){this.getTracks().forEach(function(L){L.stop()})});function b(L){var N=1e3,V=["Bytes","KB","MB","GB","TB"];if(L===0)return"0 Bytes";var W=parseInt(Math.floor(Math.log(L)/Math.log(N)),10);return(L/Math.pow(N,W)).toPrecision(3)+" "+V[W]}function w(L,N){if(!L)throw"Blob object is required.";if(!L.type)try{L.type="video/webm"}catch{}var V=(L.type||"video/webm").split("/")[1];if(V.indexOf(";")!==-1&&(V=V.split(";")[0]),N&&N.indexOf(".")!==-1){var W=N.split(".");N=W[0],V=W[1]}var ne=(N||Math.round(Math.random()*9999999999)+888888888)+"."+V;if(typeof navigator.msSaveOrOpenBlob<"u")return navigator.msSaveOrOpenBlob(L,ne);if(typeof navigator.msSaveBlob<"u")return navigator.msSaveBlob(L,ne);var se=document.createElement("a");se.href=u.createObjectURL(L),se.download=ne,se.style="display:none;opacity:0;color:transparent;",(document.body||document.documentElement).appendChild(se),typeof se.click=="function"?se.click():(se.target="_blank",se.dispatchEvent(new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0}))),u.revokeObjectURL(se.href)}function T(){return!!(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron||typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Electron")>=0)}function C(L,N){return!L||!L.getTracks?[]:L.getTracks().filter(function(V){return V.kind===(N||"audio")})}function P(L,N){"srcObject"in N?N.srcObject=L:"mozSrcObject"in N?N.mozSrcObject=L:N.srcObject=L}function M(L,N){if(typeof EBML>"u")throw new Error("Please link: https://www.webrtc-experiment.com/EBML.js");var V=new EBML.Reader,W=new EBML.Decoder,ne=EBML.tools,se=new FileReader;se.onload=function(te){var ie=W.decode(this.result);ie.forEach(function(he){V.read(he)}),V.stop();var pe=ne.makeMetadataSeekable(V.metadatas,V.duration,V.cues),de=this.result.slice(V.metadataSize),ce=new Blob([pe,de],{type:"video/webm"});N(ce)},se.readAsArrayBuffer(L)}typeof e<"u"&&(e.invokeSaveAsDialog=w,e.getTracks=C,e.getSeekableBlob=M,e.bytesToSize=b,e.isElectron=T);/**
 * Storage is a standalone object used by {@link RecordRTC} to store reusable objects e.g. "new AudioContext".
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @example
 * Storage.AudioContext === webkitAudioContext
 * @property {webkitAudioContext} AudioContext - Keeps a reference to AudioContext object.
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 */var k={};typeof c<"u"?k.AudioContext=c:typeof webkitAudioContext<"u"&&(k.AudioContext=webkitAudioContext),typeof e<"u"&&(e.Storage=k);function I(){if(p||g||f)return!0;var L=navigator.userAgent,N=""+parseFloat(navigator.appVersion),V=parseInt(navigator.appVersion,10),W,ne;return(y||h)&&(W=L.indexOf("Chrome"),N=L.substring(W+7)),(ne=N.indexOf(";"))!==-1&&(N=N.substring(0,ne)),(ne=N.indexOf(" "))!==-1&&(N=N.substring(0,ne)),V=parseInt(""+N,10),isNaN(V)&&(N=""+parseFloat(navigator.appVersion),V=parseInt(navigator.appVersion,10)),V>=49}/**
 * MediaStreamRecorder is an abstraction layer for {@link https://w3c.github.io/mediacapture-record/MediaRecorder.html|MediaRecorder API}. It is used by {@link RecordRTC} to record MediaStream(s) in both Chrome and Firefox.
 * @summary Runs top over {@link https://w3c.github.io/mediacapture-record/MediaRecorder.html|MediaRecorder API}.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://github.com/muaz-khan|Muaz Khan}
 * @typedef MediaStreamRecorder
 * @class
 * @example
 * var config = {
 *     mimeType: 'video/webm', // vp8, vp9, h264, mkv, opus/vorbis
 *     audioBitsPerSecond : 256 * 8 * 1024,
 *     videoBitsPerSecond : 256 * 8 * 1024,
 *     bitsPerSecond: 256 * 8 * 1024,  // if this is provided, skip above two
 *     checkForInactiveTracks: true,
 *     timeSlice: 1000, // concatenate intervals based blobs
 *     ondataavailable: function() {} // get intervals based blobs
 * }
 * var recorder = new MediaStreamRecorder(mediaStream, config);
 * recorder.record();
 * recorder.stop(function(blob) {
 *     video.src = URL.createObjectURL(blob);
 *
 *     // or
 *     var blob = recorder.blob;
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @param {object} config - {disableLogs:true, initCallback: function, mimeType: "video/webm", timeSlice: 1000}
 * @throws Will throw an error if first argument "MediaStream" is missing. Also throws error if "MediaRecorder API" are not supported by the browser.
 */function U(L,N){var ce=this;if(typeof L>"u")throw'First argument "MediaStream" is required.';if(typeof MediaRecorder>"u")throw"Your browser does not support the Media Recorder API. Please try other modules e.g. WhammyRecorder or StereoAudioRecorder.";if(N=N||{mimeType:"video/webm"},N.type==="audio"){if(C(L,"video").length&&C(L,"audio").length){var V;navigator.mozGetUserMedia?(V=new v,V.addTrack(C(L,"audio")[0])):V=new v(C(L,"audio")),L=V}(!N.mimeType||N.mimeType.toString().toLowerCase().indexOf("audio")===-1)&&(N.mimeType=y?"audio/webm":"audio/ogg"),N.mimeType&&N.mimeType.toString().toLowerCase()!=="audio/ogg"&&navigator.mozGetUserMedia&&(N.mimeType="audio/ogg")}var W=[];this.getArrayOfBlobs=function(){return W},this.record=function(){ce.blob=null,ce.clearRecordedData(),ce.timestamps=[],de=[],W=[];var he=N;N.disableLogs||console.log("Passing following config over MediaRecorder API.",he),ie&&(ie=null),y&&!I()&&(he="video/vp8"),typeof MediaRecorder.isTypeSupported=="function"&&he.mimeType&&(MediaRecorder.isTypeSupported(he.mimeType)||(N.disableLogs||console.warn("MediaRecorder API seems unable to record mimeType:",he.mimeType),he.mimeType=N.type==="audio"?"audio/webm":"video/webm"));try{ie=new MediaRecorder(L,he),N.mimeType=he.mimeType}catch{ie=new MediaRecorder(L)}he.mimeType&&!MediaRecorder.isTypeSupported&&"canRecordMimeType"in ie&&ie.canRecordMimeType(he.mimeType)===!1&&(N.disableLogs||console.warn("MediaRecorder API seems unable to record mimeType:",he.mimeType)),ie.ondataavailable=function(ee){if(ee.data&&de.push("ondataavailable: "+b(ee.data.size)),typeof N.timeSlice=="number"){if(ee.data&&ee.data.size&&(W.push(ee.data),ne(),typeof N.ondataavailable=="function")){var xe=N.getNativeBlob?ee.data:new Blob([ee.data],{type:se(he)});N.ondataavailable(xe)}return}if(!ee.data||!ee.data.size||ee.data.size<100||ce.blob){ce.recordingCallback&&(ce.recordingCallback(new Blob([],{type:se(he)})),ce.recordingCallback=null);return}ce.blob=N.getNativeBlob?ee.data:new Blob([ee.data],{type:se(he)}),ce.recordingCallback&&(ce.recordingCallback(ce.blob),ce.recordingCallback=null)},ie.onstart=function(){de.push("started")},ie.onpause=function(){de.push("paused")},ie.onresume=function(){de.push("resumed")},ie.onstop=function(){de.push("stopped")},ie.onerror=function(ee){ee&&(ee.name||(ee.name="UnknownError"),de.push("error: "+ee),N.disableLogs||(ee.name.toString().toLowerCase().indexOf("invalidstate")!==-1?console.error("The MediaRecorder is not in a state in which the proposed operation is allowed to be executed.",ee):ee.name.toString().toLowerCase().indexOf("notsupported")!==-1?console.error("MIME type (",he.mimeType,") is not supported.",ee):ee.name.toString().toLowerCase().indexOf("security")!==-1?console.error("MediaRecorder security error",ee):ee.name==="OutOfMemory"?console.error("The UA has exhaused the available memory. User agents SHOULD provide as much additional information as possible in the message attribute.",ee):ee.name==="IllegalStreamModification"?console.error("A modification to the stream has occurred that makes it impossible to continue recording. An example would be the addition of a Track while recording is occurring. User agents SHOULD provide as much additional information as possible in the message attribute.",ee):ee.name==="OtherRecordingError"?console.error("Used for an fatal error other than those listed above. User agents SHOULD provide as much additional information as possible in the message attribute.",ee):ee.name==="GenericError"?console.error("The UA cannot provide the codec or recording option that has been requested.",ee):console.error("MediaRecorder Error",ee)),function(xe){if(!ce.manuallyStopped&&ie&&ie.state==="inactive"){delete N.timeslice,ie.start(10*60*1e3);return}setTimeout(xe,1e3)}(),ie.state!=="inactive"&&ie.state!=="stopped"&&ie.stop())},typeof N.timeSlice=="number"?(ne(),ie.start(N.timeSlice)):ie.start(36e5),N.initCallback&&N.initCallback()},this.timestamps=[];function ne(){ce.timestamps.push(new Date().getTime()),typeof N.onTimeStamp=="function"&&N.onTimeStamp(ce.timestamps[ce.timestamps.length-1],ce.timestamps)}function se(he){return ie&&ie.mimeType?ie.mimeType:he.mimeType||"video/webm"}this.stop=function(he){he=he||function(){},ce.manuallyStopped=!0,ie&&(this.recordingCallback=he,ie.state==="recording"&&ie.stop(),typeof N.timeSlice=="number"&&setTimeout(function(){ce.blob=new Blob(W,{type:se(N)}),ce.recordingCallback(ce.blob)},100))},this.pause=function(){ie&&ie.state==="recording"&&ie.pause()},this.resume=function(){ie&&ie.state==="paused"&&ie.resume()},this.clearRecordedData=function(){ie&&ie.state==="recording"&&ce.stop(te),te()};function te(){W=[],ie=null,ce.timestamps=[]}var ie;this.getInternalRecorder=function(){return ie};function pe(){if("active"in L){if(!L.active)return!1}else if("ended"in L&&L.ended)return!1;return!0}this.blob=null,this.getState=function(){return ie&&ie.state||"inactive"};var de=[];this.getAllStates=function(){return de},typeof N.checkForInactiveTracks>"u"&&(N.checkForInactiveTracks=!1);var ce=this;(function he(){if(!(!ie||N.checkForInactiveTracks===!1)){if(pe()===!1){N.disableLogs||console.log("MediaStream seems stopped."),ce.stop();return}setTimeout(he,1e3)}})(),this.name="MediaStreamRecorder",this.toString=function(){return this.name}}typeof e<"u"&&(e.MediaStreamRecorder=U);/**
 * StereoAudioRecorder is a standalone class used by {@link RecordRTC} to bring "stereo" audio-recording in chrome.
 * @summary JavaScript standalone object for stereo audio recording.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef StereoAudioRecorder
 * @class
 * @example
 * var recorder = new StereoAudioRecorder(MediaStream, {
 *     sampleRate: 44100,
 *     bufferSize: 4096
 * });
 * recorder.record();
 * recorder.stop(function(blob) {
 *     video.src = URL.createObjectURL(blob);
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @param {object} config - {sampleRate: 44100, bufferSize: 4096, numberOfAudioChannels: 1, etc.}
 */function z(L,N){if(!C(L,"audio").length)throw"Your stream has no audio tracks.";N=N||{};var V=this,W=[],ne=[],se=!1,te=0,ie,pe=2,de=N.desiredSampRate;N.leftChannel===!0&&(pe=1),N.numberOfAudioChannels===1&&(pe=1),(!pe||pe<1)&&(pe=2),N.disableLogs||console.log("StereoAudioRecorder is set to record number of channels: "+pe),typeof N.checkForInactiveTracks>"u"&&(N.checkForInactiveTracks=!0);function ce(){if(N.checkForInactiveTracks===!1)return!0;if("active"in L){if(!L.active)return!1}else if("ended"in L&&L.ended)return!1;return!0}this.record=function(){if(ce()===!1)throw"Please make sure MediaStream is active.";Se(),ye=ae=!1,se=!0,typeof N.timeSlice<"u"&&Ue()};function he($e,we){function fe(Ne,qe){var tt=Ne.numberOfAudioChannels,ot=Ne.leftBuffers.slice(0),St=Ne.rightBuffers.slice(0),dt=Ne.sampleRate,ft=Ne.internalInterleavedLength,Ee=Ne.desiredSampRate;tt===2&&(ot=et(ot,ft),St=et(St,ft),Ee&&(ot=Ve(ot,Ee,dt),St=Ve(St,Ee,dt))),tt===1&&(ot=et(ot,ft),Ee&&(ot=Ve(ot,Ee,dt))),Ee&&(dt=Ee);function Ve(ln,Nn,Zt){var le=Math.round(ln.length*(Nn/Zt)),Me=[],Pe=Number((ln.length-1)/(le-1));Me[0]=ln[0];for(var Re=1;Re<le-1;Re++){var ze=Re*Pe,at=Number(Math.floor(ze)).toFixed(),it=Number(Math.ceil(ze)).toFixed(),pt=ze-at;Me[Re]=Xe(ln[at],ln[it],pt)}return Me[le-1]=ln[ln.length-1],Me}function Xe(ln,Nn,Zt){return ln+(Nn-ln)*Zt}function et(ln,Nn){for(var Zt=new Float64Array(Nn),le=0,Me=ln.length,Pe=0;Pe<Me;Pe++){var Re=ln[Pe];Zt.set(Re,le),le+=Re.length}return Zt}function wt(ln,Nn){for(var Zt=ln.length+Nn.length,le=new Float64Array(Zt),Me=0,Pe=0;Pe<Zt;)le[Pe++]=ln[Me],le[Pe++]=Nn[Me],Me++;return le}function Bt(ln,Nn,Zt){for(var le=Zt.length,Me=0;Me<le;Me++)ln.setUint8(Nn+Me,Zt.charCodeAt(Me))}var en;tt===2&&(en=wt(ot,St)),tt===1&&(en=ot);var Hn=en.length,gr=44+Hn*2,Mn=new ArrayBuffer(gr),Jt=new DataView(Mn);Bt(Jt,0,"RIFF"),Jt.setUint32(4,36+Hn*2,!0),Bt(Jt,8,"WAVE"),Bt(Jt,12,"fmt "),Jt.setUint32(16,16,!0),Jt.setUint16(20,1,!0),Jt.setUint16(22,tt,!0),Jt.setUint32(24,dt,!0),Jt.setUint32(28,dt*tt*2,!0),Jt.setUint16(32,tt*2,!0),Jt.setUint16(34,16,!0),Bt(Jt,36,"data"),Jt.setUint32(40,Hn*2,!0);for(var fn=Hn,Ar=44,gn=1,un=0;un<fn;un++)Jt.setInt16(Ar,en[un]*(32767*gn),!0),Ar+=2;if(qe)return qe({buffer:Mn,view:Jt});postMessage({buffer:Mn,view:Jt})}if($e.noWorker){fe($e,function(Ne){we(Ne.buffer,Ne.view)});return}var ke=ee(fe);ke.onmessage=function(Ne){we(Ne.data.buffer,Ne.data.view),u.revokeObjectURL(ke.workerURL),ke.terminate()},ke.postMessage($e)}function ee($e){var we=u.createObjectURL(new Blob([$e.toString(),";this.onmessage =  function (eee) {"+$e.name+"(eee.data);}"],{type:"application/javascript"})),fe=new Worker(we);return fe.workerURL=we,fe}this.stop=function($e){$e=$e||function(){},se=!1,he({desiredSampRate:de,sampleRate:oe,numberOfAudioChannels:pe,internalInterleavedLength:te,leftBuffers:W,rightBuffers:pe===1?[]:ne,noWorker:N.noWorker},function(we,fe){V.blob=new Blob([fe],{type:"audio/wav"}),V.buffer=new ArrayBuffer(fe.buffer.byteLength),V.view=fe,V.sampleRate=de||oe,V.bufferSize=Ce,V.length=te,ye=!1,$e&&$e(V.blob)})},typeof e.Storage>"u"&&(e.Storage={AudioContextConstructor:null,AudioContext:window.AudioContext||window.webkitAudioContext}),(!e.Storage.AudioContextConstructor||e.Storage.AudioContextConstructor.state==="closed")&&(e.Storage.AudioContextConstructor=new e.Storage.AudioContext);var xe=e.Storage.AudioContextConstructor,be=xe.createMediaStreamSource(L),Ae=[0,256,512,1024,2048,4096,8192,16384],Ce=typeof N.bufferSize>"u"?4096:N.bufferSize;if(Ae.indexOf(Ce)===-1&&(N.disableLogs||console.log("Legal values for buffer-size are "+JSON.stringify(Ae,null,"	"))),xe.createJavaScriptNode)ie=xe.createJavaScriptNode(Ce,pe,pe);else if(xe.createScriptProcessor)ie=xe.createScriptProcessor(Ce,pe,pe);else throw"WebAudio API has no support on this browser.";be.connect(ie),N.bufferSize||(Ce=ie.bufferSize);var oe=typeof N.sampleRate<"u"?N.sampleRate:xe.sampleRate||44100;(oe<22050||oe>96e3)&&(N.disableLogs||console.log("sample-rate must be under range 22050 and 96000.")),N.disableLogs||N.desiredSampRate&&console.log("Desired sample-rate: "+N.desiredSampRate);var ae=!1;this.pause=function(){ae=!0},this.resume=function(){if(ce()===!1)throw"Please make sure MediaStream is active.";if(!se){N.disableLogs||console.log("Seems recording has been restarted."),this.record();return}ae=!1},this.clearRecordedData=function(){N.checkForInactiveTracks=!1,se&&this.stop(me),me()};function Se(){W=[],ne=[],te=0,ye=!1,se=!1,ae=!1,xe=null,V.leftchannel=W,V.rightchannel=ne,V.numberOfAudioChannels=pe,V.desiredSampRate=de,V.sampleRate=oe,V.recordingLength=te,De={left:[],right:[],recordingLength:0}}function me(){ie&&(ie.onaudioprocess=null,ie.disconnect(),ie=null),be&&(be.disconnect(),be=null),Se()}this.name="StereoAudioRecorder",this.toString=function(){return this.name};var ye=!1;function Ie($e){if(!ae){if(ce()===!1&&(N.disableLogs||console.log("MediaStream seems stopped."),ie.disconnect(),se=!1),!se){be&&(be.disconnect(),be=null);return}ye||(ye=!0,N.onAudioProcessStarted&&N.onAudioProcessStarted(),N.initCallback&&N.initCallback());var we=$e.inputBuffer.getChannelData(0),fe=new Float32Array(we);if(W.push(fe),pe===2){var ke=$e.inputBuffer.getChannelData(1),Ne=new Float32Array(ke);ne.push(Ne)}te+=Ce,V.recordingLength=te,typeof N.timeSlice<"u"&&(De.recordingLength+=Ce,De.left.push(fe),pe===2&&De.right.push(Ne))}}ie.onaudioprocess=Ie,xe.createMediaStreamDestination?ie.connect(xe.createMediaStreamDestination()):ie.connect(xe.destination),this.leftchannel=W,this.rightchannel=ne,this.numberOfAudioChannels=pe,this.desiredSampRate=de,this.sampleRate=oe,V.recordingLength=te;var De={left:[],right:[],recordingLength:0};function Ue(){!se||typeof N.ondataavailable!="function"||typeof N.timeSlice>"u"||(De.left.length?(he({desiredSampRate:de,sampleRate:oe,numberOfAudioChannels:pe,internalInterleavedLength:De.recordingLength,leftBuffers:De.left,rightBuffers:pe===1?[]:De.right},function($e,we){var fe=new Blob([we],{type:"audio/wav"});N.ondataavailable(fe),setTimeout(Ue,N.timeSlice)}),De={left:[],right:[],recordingLength:0}):setTimeout(Ue,N.timeSlice))}}typeof e<"u"&&(e.StereoAudioRecorder=z);/**
 * CanvasRecorder is a standalone class used by {@link RecordRTC} to bring HTML5-Canvas recording into video WebM. It uses HTML2Canvas library and runs top over {@link Whammy}.
 * @summary HTML2Canvas recording into video WebM.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef CanvasRecorder
 * @class
 * @example
 * var recorder = new CanvasRecorder(htmlElement, { disableLogs: true, useWhammyRecorder: true });
 * recorder.record();
 * recorder.stop(function(blob) {
 *     video.src = URL.createObjectURL(blob);
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {HTMLElement} htmlElement - querySelector/getElementById/getElementsByTagName[0]/etc.
 * @param {object} config - {disableLogs:true, initCallback: function}
 */function O(L,N){if(typeof html2canvas>"u")throw"Please link: https://www.webrtc-experiment.com/screenshot.js";N=N||{},N.frameInterval||(N.frameInterval=10);var V=!1;["captureStream","mozCaptureStream","webkitCaptureStream"].forEach(function(Ae){Ae in document.createElement("canvas")&&(V=!0)});var W=(!!window.webkitRTCPeerConnection||!!window.webkitGetUserMedia)&&!!window.chrome,ne=50,se=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);W&&se&&se[2]&&(ne=parseInt(se[2],10)),W&&ne<52&&(V=!1),N.useWhammyRecorder&&(V=!1);var te,ie;if(V)if(N.disableLogs||console.log("Your browser supports both MediRecorder API and canvas.captureStream!"),L instanceof HTMLCanvasElement)te=L;else if(L instanceof CanvasRenderingContext2D)te=L.canvas;else throw"Please pass either HTMLCanvasElement or CanvasRenderingContext2D.";else navigator.mozGetUserMedia&&(N.disableLogs||console.error("Canvas recording is NOT supported in Firefox."));var pe;this.record=function(){if(pe=!0,V&&!N.useWhammyRecorder){var Ae;"captureStream"in te?Ae=te.captureStream(25):"mozCaptureStream"in te?Ae=te.mozCaptureStream(25):"webkitCaptureStream"in te&&(Ae=te.webkitCaptureStream(25));try{var Ce=new v;Ce.addTrack(C(Ae,"video")[0]),Ae=Ce}catch{}if(!Ae)throw"captureStream API are NOT available.";ie=new U(Ae,{mimeType:N.mimeType||"video/webm"}),ie.record()}else be.frames=[],xe=new Date().getTime(),ee();N.initCallback&&N.initCallback()},this.getWebPImages=function(Ae){if(L.nodeName.toLowerCase()!=="canvas"){Ae();return}var Ce=be.frames.length;be.frames.forEach(function(oe,ae){var Se=Ce-ae;N.disableLogs||console.log(Se+"/"+Ce+" frames remaining"),N.onEncodingCallback&&N.onEncodingCallback(Se,Ce);var me=oe.image.toDataURL("image/webp",1);be.frames[ae].image=me}),N.disableLogs||console.log("Generating WebM"),Ae()},this.stop=function(Ae){pe=!1;var Ce=this;if(V&&ie){ie.stop(Ae);return}this.getWebPImages(function(){be.compile(function(oe){N.disableLogs||console.log("Recording finished!"),Ce.blob=oe,Ce.blob.forEach&&(Ce.blob=new Blob([],{type:"video/webm"})),Ae&&Ae(Ce.blob),be.frames=[]})})};var de=!1;this.pause=function(){if(de=!0,ie instanceof U){ie.pause();return}},this.resume=function(){if(de=!1,ie instanceof U){ie.resume();return}pe||this.record()},this.clearRecordedData=function(){pe&&this.stop(ce),ce()};function ce(){be.frames=[],pe=!1,de=!1}this.name="CanvasRecorder",this.toString=function(){return this.name};function he(){var Ae=document.createElement("canvas"),Ce=Ae.getContext("2d");return Ae.width=L.width,Ae.height=L.height,Ce.drawImage(L,0,0),Ae}function ee(){if(de)return xe=new Date().getTime(),setTimeout(ee,500);if(L.nodeName.toLowerCase()==="canvas"){var Ae=new Date().getTime()-xe;xe=new Date().getTime(),be.frames.push({image:he(),duration:Ae}),pe&&setTimeout(ee,N.frameInterval);return}html2canvas(L,{grabMouse:typeof N.showMousePointer>"u"||N.showMousePointer,onrendered:function(Ce){var oe=new Date().getTime()-xe;if(!oe)return setTimeout(ee,N.frameInterval);xe=new Date().getTime(),be.frames.push({image:Ce.toDataURL("image/webp",1),duration:oe}),pe&&setTimeout(ee,N.frameInterval)}})}var xe=new Date().getTime(),be=new $.Video(100)}typeof e<"u"&&(e.CanvasRecorder=O);/**
 * WhammyRecorder is a standalone class used by {@link RecordRTC} to bring video recording in Chrome. It runs top over {@link Whammy}.
 * @summary Video recording feature in Chrome.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef WhammyRecorder
 * @class
 * @example
 * var recorder = new WhammyRecorder(mediaStream);
 * recorder.record();
 * recorder.stop(function(blob) {
 *     video.src = URL.createObjectURL(blob);
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @param {object} config - {disableLogs: true, initCallback: function, video: HTMLVideoElement, etc.}
 */function B(L,N){N=N||{},N.frameInterval||(N.frameInterval=10),N.disableLogs||console.log("Using frames-interval:",N.frameInterval),this.record=function(){N.width||(N.width=320),N.height||(N.height=240),N.video||(N.video={width:N.width,height:N.height}),N.canvas||(N.canvas={width:N.width,height:N.height}),pe.width=N.canvas.width||320,pe.height=N.canvas.height||240,de=pe.getContext("2d"),N.video&&N.video instanceof HTMLVideoElement?(ce=N.video.cloneNode(),N.initCallback&&N.initCallback()):(ce=document.createElement("video"),P(L,ce),ce.onloadedmetadata=function(){N.initCallback&&N.initCallback()},ce.width=N.video.width,ce.height=N.video.height),ce.muted=!0,ce.play(),he=new Date().getTime(),ee=new $.Video,N.disableLogs||(console.log("canvas resolutions",pe.width,"*",pe.height),console.log("video width/height",ce.width||pe.width,"*",ce.height||pe.height)),V(N.frameInterval)};function V(xe){xe=typeof xe<"u"?xe:10;var be=new Date().getTime()-he;if(!be)return setTimeout(V,xe,xe);if(te)return he=new Date().getTime(),setTimeout(V,100);he=new Date().getTime(),ce.paused&&ce.play(),de.drawImage(ce,0,0,pe.width,pe.height),ee.frames.push({duration:be,image:pe.toDataURL("image/webp")}),se||setTimeout(V,xe,xe)}function W(xe){var be=-1,Ae=xe.length;(function Ce(){if(be++,be===Ae){xe.callback();return}setTimeout(function(){xe.functionToLoop(Ce,be)},1)})()}function ne(xe,be,Ae,Ce,oe){var ae=document.createElement("canvas");ae.width=pe.width,ae.height=pe.height;var Se=ae.getContext("2d"),me=[],ye=xe.length,Ie={r:0,g:0,b:0},De=Math.sqrt(Math.pow(255,2)+Math.pow(255,2)+Math.pow(255,2)),Ue=0,$e=0,we=!1;W({length:ye,functionToLoop:function(fe,ke){var Ne,qe,tt,ot=function(){!we&&tt-Ne<=tt*$e||(we=!0,me.push(xe[ke])),fe()};if(we)ot();else{var St=new Image;St.onload=function(){Se.drawImage(St,0,0,pe.width,pe.height);var dt=Se.getImageData(0,0,pe.width,pe.height);Ne=0,qe=dt.data.length,tt=dt.data.length/4;for(var ft=0;ft<qe;ft+=4){var Ee={r:dt.data[ft],g:dt.data[ft+1],b:dt.data[ft+2]},Ve=Math.sqrt(Math.pow(Ee.r-Ie.r,2)+Math.pow(Ee.g-Ie.g,2)+Math.pow(Ee.b-Ie.b,2));Ve<=De*Ue&&Ne++}ot()},St.src=xe[ke].image}},callback:function(){me=me.concat(xe.slice(ye)),me.length<=0&&me.push(xe[xe.length-1]),oe(me)}})}var se=!1;this.stop=function(xe){xe=xe||function(){},se=!0;var be=this;setTimeout(function(){ne(ee.frames,-1,null,null,function(Ae){ee.frames=Ae,N.advertisement&&N.advertisement.length&&(ee.frames=N.advertisement.concat(ee.frames)),ee.compile(function(Ce){be.blob=Ce,be.blob.forEach&&(be.blob=new Blob([],{type:"video/webm"})),xe&&xe(be.blob)})})},10)};var te=!1;this.pause=function(){te=!0},this.resume=function(){te=!1,se&&this.record()},this.clearRecordedData=function(){se||this.stop(ie),ie()};function ie(){ee.frames=[],se=!0,te=!1}this.name="WhammyRecorder",this.toString=function(){return this.name};var pe=document.createElement("canvas"),de=pe.getContext("2d"),ce,he,ee}typeof e<"u"&&(e.WhammyRecorder=B);/**
 * Whammy is a standalone class used by {@link RecordRTC} to bring video recording in Chrome. It is written by {@link https://github.com/antimatter15|antimatter15}
 * @summary A real time javascript webm encoder based on a canvas hack.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef Whammy
 * @class
 * @example
 * var recorder = new Whammy().Video(15);
 * recorder.add(context || canvas || dataURL);
 * var output = recorder.compile();
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 */var $=function(){function L(W){this.frames=[],this.duration=W||1,this.quality=.8}L.prototype.add=function(W,ne){if("canvas"in W&&(W=W.canvas),"toDataURL"in W&&(W=W.toDataURL("image/webp",this.quality)),!/^data:image\/webp;base64,/ig.test(W))throw"Input must be formatted properly as a base64 encoded DataURI of type image/webp";this.frames.push({image:W,duration:ne||this.duration})};function N(W){var ne=u.createObjectURL(new Blob([W.toString(),"this.onmessage =  function (eee) {"+W.name+"(eee.data);}"],{type:"application/javascript"})),se=new Worker(ne);return u.revokeObjectURL(ne),se}function V(W){function ne(oe){var ae=te(oe);if(!ae)return[];for(var Se=3e4,me=[{id:440786851,data:[{data:1,id:17030},{data:1,id:17143},{data:4,id:17138},{data:8,id:17139},{data:"webm",id:17026},{data:2,id:17031},{data:2,id:17029}]},{id:408125543,data:[{id:357149030,data:[{data:1e6,id:2807729},{data:"whammy",id:19840},{data:"whammy",id:22337},{data:Ae(ae.duration),id:17545}]},{id:374648427,data:[{id:174,data:[{data:1,id:215},{data:1,id:29637},{data:0,id:156},{data:"und",id:2274716},{data:"V_VP8",id:134},{data:"VP8",id:2459272},{data:1,id:131},{id:224,data:[{data:ae.width,id:176},{data:ae.height,id:186}]}]}]}]}],ye=0,Ie=0;ye<oe.length;){var De=[],Ue=0;do De.push(oe[ye]),Ue+=oe[ye].duration,ye++;while(ye<oe.length&&Ue<Se);var $e=0,we={id:524531317,data:se(Ie,$e,De)};me[1].data.push(we),Ie+=Ue}return ce(me)}function se(oe,ae,Se){return[{data:oe,id:231}].concat(Se.map(function(me){var ye=he({frame:me.data.slice(4),trackNum:1,timecode:Math.round(ae)});return ae+=me.duration,{data:ye,id:163}}))}function te(oe){if(!oe[0]){postMessage({error:"Something went wrong. Maybe WebP format is not supported in the current browser."});return}for(var ae=oe[0].width,Se=oe[0].height,me=oe[0].duration,ye=1;ye<oe.length;ye++)me+=oe[ye].duration;return{duration:me,width:ae,height:Se}}function ie(oe){for(var ae=[];oe>0;)ae.push(oe&255),oe=oe>>8;return new Uint8Array(ae.reverse())}function pe(oe){return new Uint8Array(oe.split("").map(function(ae){return ae.charCodeAt(0)}))}function de(oe){var ae=[],Se=oe.length%8?new Array(9-oe.length%8).join("0"):"";oe=Se+oe;for(var me=0;me<oe.length;me+=8)ae.push(parseInt(oe.substr(me,8),2));return new Uint8Array(ae)}function ce(oe){for(var ae=[],Se=0;Se<oe.length;Se++){var me=oe[Se].data;typeof me=="object"&&(me=ce(me)),typeof me=="number"&&(me=de(me.toString(2))),typeof me=="string"&&(me=pe(me));var ye=me.size||me.byteLength||me.length,Ie=Math.ceil(Math.ceil(Math.log(ye)/Math.log(2))/8),De=ye.toString(2),Ue=new Array(Ie*7+7+1-De.length).join("0")+De,$e=new Array(Ie).join("0")+"1"+Ue;ae.push(ie(oe[Se].id)),ae.push(de($e)),ae.push(me)}return new Blob(ae,{type:"video/webm"})}function he(oe){var ae=0;ae|=128;var Se=[oe.trackNum|128,oe.timecode>>8,oe.timecode&255,ae].map(function(me){return String.fromCharCode(me)}).join("")+oe.frame;return Se}function ee(oe){for(var ae=oe.RIFF[0].WEBP[0],Se=ae.indexOf("*"),me=0,ye=[];me<4;me++)ye[me]=ae.charCodeAt(Se+3+me);var Ie,De,Ue;return Ue=ye[1]<<8|ye[0],Ie=Ue&16383,Ue=ye[3]<<8|ye[2],De=Ue&16383,{width:Ie,height:De,data:ae,riff:oe}}function xe(oe,ae){return parseInt(oe.substr(ae+4,4).split("").map(function(Se){var me=Se.charCodeAt(0).toString(2);return new Array(8-me.length+1).join("0")+me}).join(""),2)}function be(oe){for(var ae=0,Se={};ae<oe.length;){var me=oe.substr(ae,4),ye=xe(oe,ae),Ie=oe.substr(ae+4+4,ye);ae+=8+ye,Se[me]=Se[me]||[],me==="RIFF"||me==="LIST"?Se[me].push(be(Ie)):Se[me].push(Ie)}return Se}function Ae(oe){return[].slice.call(new Uint8Array(new Float64Array([oe]).buffer),0).map(function(ae){return String.fromCharCode(ae)}).reverse().join("")}var Ce=new ne(W.map(function(oe){var ae=ee(be(atob(oe.image.slice(23))));return ae.duration=oe.duration,ae}));postMessage(Ce)}return L.prototype.compile=function(W){var ne=N(V);ne.onmessage=function(se){if(se.data.error){console.error(se.data.error);return}W(se.data)},ne.postMessage(this.frames)},{Video:L}}();typeof e<"u"&&(e.Whammy=$);/**
 * DiskStorage is a standalone object used by {@link RecordRTC} to store recorded blobs in IndexedDB storage.
 * @summary Writing blobs into IndexedDB.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @example
 * DiskStorage.Store({
 *     audioBlob: yourAudioBlob,
 *     videoBlob: yourVideoBlob,
 *     gifBlob  : yourGifBlob
 * });
 * DiskStorage.Fetch(function(dataURL, type) {
 *     if(type === 'audioBlob') { }
 *     if(type === 'videoBlob') { }
 *     if(type === 'gifBlob')   { }
 * });
 * // DiskStorage.dataStoreName = 'recordRTC';
 * // DiskStorage.onError = function(error) { };
 * @property {function} init - This method must be called once to initialize IndexedDB ObjectStore. Though, it is auto-used internally.
 * @property {function} Fetch - This method fetches stored blobs from IndexedDB.
 * @property {function} Store - This method stores blobs in IndexedDB.
 * @property {function} onError - This function is invoked for any known/unknown error.
 * @property {string} dataStoreName - Name of the ObjectStore created in IndexedDB storage.
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 */var F={init:function(){var L=this;if(typeof indexedDB>"u"||typeof indexedDB.open>"u"){console.error("IndexedDB API are not available in this browser.");return}var N=1,V=this.dbName||location.href.replace(/\/|:|#|%|\.|\[|\]/g,""),W,ne=indexedDB.open(V,N);function se(ie){ie.createObjectStore(L.dataStoreName)}function te(){var ie=W.transaction([L.dataStoreName],"readwrite");L.videoBlob&&ie.objectStore(L.dataStoreName).put(L.videoBlob,"videoBlob"),L.gifBlob&&ie.objectStore(L.dataStoreName).put(L.gifBlob,"gifBlob"),L.audioBlob&&ie.objectStore(L.dataStoreName).put(L.audioBlob,"audioBlob");function pe(de){ie.objectStore(L.dataStoreName).get(de).onsuccess=function(ce){L.callback&&L.callback(ce.target.result,de)}}pe("audioBlob"),pe("videoBlob"),pe("gifBlob")}ne.onerror=L.onError,ne.onsuccess=function(){if(W=ne.result,W.onerror=L.onError,W.setVersion)if(W.version!==N){var ie=W.setVersion(N);ie.onsuccess=function(){se(W),te()}}else te();else te()},ne.onupgradeneeded=function(ie){se(ie.target.result)}},Fetch:function(L){return this.callback=L,this.init(),this},Store:function(L){return this.audioBlob=L.audioBlob,this.videoBlob=L.videoBlob,this.gifBlob=L.gifBlob,this.init(),this},onError:function(L){console.error(JSON.stringify(L,null,"	"))},dataStoreName:"recordRTC",dbName:null};typeof e<"u"&&(e.DiskStorage=F);/**
 * GifRecorder is standalone calss used by {@link RecordRTC} to record video or canvas into animated gif.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef GifRecorder
 * @class
 * @example
 * var recorder = new GifRecorder(mediaStream || canvas || context, { onGifPreview: function, onGifRecordingStarted: function, width: 1280, height: 720, frameRate: 200, quality: 10 });
 * recorder.record();
 * recorder.stop(function(blob) {
 *     img.src = URL.createObjectURL(blob);
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object or HTMLCanvasElement or CanvasRenderingContext2D.
 * @param {object} config - {disableLogs:true, initCallback: function, width: 320, height: 240, frameRate: 200, quality: 10}
 */function J(L,N){if(typeof GIFEncoder>"u"){var V=document.createElement("script");V.src="https://www.webrtc-experiment.com/gif-recorder.js",(document.body||document.documentElement).appendChild(V)}N=N||{};var W=L instanceof CanvasRenderingContext2D||L instanceof HTMLCanvasElement;this.record=function(){if(typeof GIFEncoder>"u"){setTimeout(xe.record,1e3);return}if(!pe){setTimeout(xe.record,1e3);return}W||(N.width||(N.width=de.offsetWidth||320),N.height||(N.height=de.offsetHeight||240),N.video||(N.video={width:N.width,height:N.height}),N.canvas||(N.canvas={width:N.width,height:N.height}),te.width=N.canvas.width||320,te.height=N.canvas.height||240,de.width=N.video.width||320,de.height=N.video.height||240),ee=new GIFEncoder,ee.setRepeat(0),ee.setDelay(N.frameRate||200),ee.setQuality(N.quality||10),ee.start(),typeof N.onGifRecordingStarted=="function"&&N.onGifRecordingStarted();function be(Ae){if(xe.clearedRecordedData!==!0){if(ne)return setTimeout(function(){be(Ae)},100);ce=a(be),typeof he===void 0&&(he=Ae),!(Ae-he<90)&&(!W&&de.paused&&de.play(),W||ie.drawImage(de,0,0,te.width,te.height),N.onGifPreview&&N.onGifPreview(te.toDataURL("image/png")),ee.addFrame(ie),he=Ae)}}ce=a(be),N.initCallback&&N.initCallback()},this.stop=function(be){be=be||function(){},ce&&l(ce),this.blob=new Blob([new Uint8Array(ee.stream().bin)],{type:"image/gif"}),be(this.blob),ee.stream().bin=[]};var ne=!1;this.pause=function(){ne=!0},this.resume=function(){ne=!1},this.clearRecordedData=function(){xe.clearedRecordedData=!0,se()};function se(){ee&&(ee.stream().bin=[])}this.name="GifRecorder",this.toString=function(){return this.name};var te=document.createElement("canvas"),ie=te.getContext("2d");W&&(L instanceof CanvasRenderingContext2D?(ie=L,te=ie.canvas):L instanceof HTMLCanvasElement&&(ie=L.getContext("2d"),te=L));var pe=!0;if(!W){var de=document.createElement("video");de.muted=!0,de.autoplay=!0,de.playsInline=!0,pe=!1,de.onloadedmetadata=function(){pe=!0},P(L,de),de.play()}var ce=null,he,ee,xe=this}typeof e<"u"&&(e.GifRecorder=J);function K(L,N){var V="Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45";(function(me){typeof e<"u"||me&&(typeof window<"u"||typeof ur>"u"||(ur.navigator={userAgent:V,getUserMedia:function(){}},ur.console||(ur.console={}),(typeof ur.console.log>"u"||typeof ur.console.error>"u")&&(ur.console.error=ur.console.log=ur.console.log||function(){console.log(arguments)}),typeof document>"u"&&(me.document={documentElement:{appendChild:function(){return""}}},document.createElement=document.captureStream=document.mozCaptureStream=function(){var ye={getContext:function(){return ye},play:function(){},pause:function(){},drawImage:function(){},toDataURL:function(){return""},style:{}};return ye},me.HTMLVideoElement=function(){}),typeof location>"u"&&(me.location={protocol:"file:",href:"",hash:""}),typeof screen>"u"&&(me.screen={width:0,height:0}),typeof de>"u"&&(me.URL={createObjectURL:function(){return""},revokeObjectURL:function(){return""}}),me.window=ur))})(typeof ur<"u"?ur:null),N=N||"multi-streams-mixer";var W=[],ne=!1,se=document.createElement("canvas"),te=se.getContext("2d");se.style.opacity=0,se.style.position="absolute",se.style.zIndex=-1,se.style.top="-1000em",se.style.left="-1000em",se.className=N,(document.body||document.documentElement).appendChild(se),this.disableLogs=!1,this.frameInterval=10,this.width=360,this.height=240,this.useGainNode=!0;var ie=this,pe=window.AudioContext;typeof pe>"u"&&(typeof webkitAudioContext<"u"&&(pe=webkitAudioContext),typeof mozAudioContext<"u"&&(pe=mozAudioContext));var de=window.URL;typeof de>"u"&&typeof webkitURL<"u"&&(de=webkitURL),typeof navigator<"u"&&typeof navigator.getUserMedia>"u"&&(typeof navigator.webkitGetUserMedia<"u"&&(navigator.getUserMedia=navigator.webkitGetUserMedia),typeof navigator.mozGetUserMedia<"u"&&(navigator.getUserMedia=navigator.mozGetUserMedia));var ce=window.MediaStream;typeof ce>"u"&&typeof webkitMediaStream<"u"&&(ce=webkitMediaStream),typeof ce<"u"&&typeof ce.prototype.stop>"u"&&(ce.prototype.stop=function(){this.getTracks().forEach(function(me){me.stop()})});var he={};typeof pe<"u"?he.AudioContext=pe:typeof webkitAudioContext<"u"&&(he.AudioContext=webkitAudioContext);function ee(me,ye){"srcObject"in ye?ye.srcObject=me:"mozSrcObject"in ye?ye.mozSrcObject=me:ye.srcObject=me}this.startDrawingFrames=function(){xe()};function xe(){if(!ne){var me=W.length,ye=!1,Ie=[];if(W.forEach(function(Ue){Ue.stream||(Ue.stream={}),Ue.stream.fullcanvas?ye=Ue:Ie.push(Ue)}),ye)se.width=ye.stream.width,se.height=ye.stream.height;else if(Ie.length){se.width=me>1?Ie[0].width*2:Ie[0].width;var De=1;(me===3||me===4)&&(De=2),(me===5||me===6)&&(De=3),(me===7||me===8)&&(De=4),(me===9||me===10)&&(De=5),se.height=Ie[0].height*De}else se.width=ie.width||360,se.height=ie.height||240;ye&&ye instanceof HTMLVideoElement&&be(ye),Ie.forEach(function(Ue,$e){be(Ue,$e)}),setTimeout(xe,ie.frameInterval)}}function be(me,ye){if(!ne){var Ie=0,De=0,Ue=me.width,$e=me.height;ye===1&&(Ie=me.width),ye===2&&(De=me.height),ye===3&&(Ie=me.width,De=me.height),ye===4&&(De=me.height*2),ye===5&&(Ie=me.width,De=me.height*2),ye===6&&(De=me.height*3),ye===7&&(Ie=me.width,De=me.height*3),typeof me.stream.left<"u"&&(Ie=me.stream.left),typeof me.stream.top<"u"&&(De=me.stream.top),typeof me.stream.width<"u"&&(Ue=me.stream.width),typeof me.stream.height<"u"&&($e=me.stream.height),te.drawImage(me,Ie,De,Ue,$e),typeof me.stream.onRender=="function"&&me.stream.onRender(te,Ie,De,Ue,$e,ye)}}function Ae(){ne=!1;var me=Ce(),ye=oe();return ye&&ye.getTracks().filter(function(Ie){return Ie.kind==="audio"}).forEach(function(Ie){me.addTrack(Ie)}),L.forEach(function(Ie){Ie.fullcanvas}),me}function Ce(){Se();var me;"captureStream"in se?me=se.captureStream():"mozCaptureStream"in se?me=se.mozCaptureStream():ie.disableLogs||console.error("Upgrade to latest Chrome or otherwise enable this flag: chrome://flags/#enable-experimental-web-platform-features");var ye=new ce;return me.getTracks().filter(function(Ie){return Ie.kind==="video"}).forEach(function(Ie){ye.addTrack(Ie)}),se.stream=ye,ye}function oe(){he.AudioContextConstructor||(he.AudioContextConstructor=new he.AudioContext),ie.audioContext=he.AudioContextConstructor,ie.audioSources=[],ie.useGainNode===!0&&(ie.gainNode=ie.audioContext.createGain(),ie.gainNode.connect(ie.audioContext.destination),ie.gainNode.gain.value=0);var me=0;if(L.forEach(function(ye){if(ye.getTracks().filter(function(De){return De.kind==="audio"}).length){me++;var Ie=ie.audioContext.createMediaStreamSource(ye);ie.useGainNode===!0&&Ie.connect(ie.gainNode),ie.audioSources.push(Ie)}}),!!me)return ie.audioDestination=ie.audioContext.createMediaStreamDestination(),ie.audioSources.forEach(function(ye){ye.connect(ie.audioDestination)}),ie.audioDestination.stream}function ae(me){var ye=document.createElement("video");return ee(me,ye),ye.className=N,ye.muted=!0,ye.volume=0,ye.width=me.width||ie.width||360,ye.height=me.height||ie.height||240,ye.play(),ye}this.appendStreams=function(me){if(!me)throw"First parameter is required.";me instanceof Array||(me=[me]),me.forEach(function(ye){var Ie=new ce;if(ye.getTracks().filter(function($e){return $e.kind==="video"}).length){var De=ae(ye);De.stream=ye,W.push(De),Ie.addTrack(ye.getTracks().filter(function($e){return $e.kind==="video"})[0])}if(ye.getTracks().filter(function($e){return $e.kind==="audio"}).length){var Ue=ie.audioContext.createMediaStreamSource(ye);ie.audioDestination=ie.audioContext.createMediaStreamDestination(),Ue.connect(ie.audioDestination),Ie.addTrack(ie.audioDestination.stream.getTracks().filter(function($e){return $e.kind==="audio"})[0])}L.push(Ie)})},this.releaseStreams=function(){W=[],ne=!0,ie.gainNode&&(ie.gainNode.disconnect(),ie.gainNode=null),ie.audioSources.length&&(ie.audioSources.forEach(function(me){me.disconnect()}),ie.audioSources=[]),ie.audioDestination&&(ie.audioDestination.disconnect(),ie.audioDestination=null),ie.audioContext&&ie.audioContext.close(),ie.audioContext=null,te.clearRect(0,0,se.width,se.height),se.stream&&(se.stream.stop(),se.stream=null)},this.resetVideoStreams=function(me){me&&!(me instanceof Array)&&(me=[me]),Se(me)};function Se(me){W=[],me=me||L,me.forEach(function(ye){if(ye.getTracks().filter(function(De){return De.kind==="video"}).length){var Ie=ae(ye);Ie.stream=ye,W.push(Ie)}})}this.name="MultiStreamsMixer",this.toString=function(){return this.name},this.getMixedStream=Ae}typeof e>"u"&&(t.exports=K);/**
 * MultiStreamRecorder can record multiple videos in single container.
 * @summary Multi-videos recorder.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef MultiStreamRecorder
 * @class
 * @example
 * var options = {
 *     mimeType: 'video/webm'
 * }
 * var recorder = new MultiStreamRecorder(ArrayOfMediaStreams, options);
 * recorder.record();
 * recorder.stop(function(blob) {
 *     video.src = URL.createObjectURL(blob);
 *
 *     // or
 *     var blob = recorder.blob;
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStreams} mediaStreams - Array of MediaStreams.
 * @param {object} config - {disableLogs:true, frameInterval: 1, mimeType: "video/webm"}
 */function Z(L,N){L=L||[];var V=this,W,ne;N=N||{elementClass:"multi-streams-mixer",mimeType:"video/webm",video:{width:360,height:240}},N.frameInterval||(N.frameInterval=10),N.video||(N.video={}),N.video.width||(N.video.width=360),N.video.height||(N.video.height=240),this.record=function(){W=new K(L,N.elementClass||"multi-streams-mixer"),se().length&&(W.frameInterval=N.frameInterval||10,W.width=N.video.width||360,W.height=N.video.height||240,W.startDrawingFrames()),N.previewStream&&typeof N.previewStream=="function"&&N.previewStream(W.getMixedStream()),ne=new U(W.getMixedStream(),N),ne.record()};function se(){var te=[];return L.forEach(function(ie){C(ie,"video").forEach(function(pe){te.push(pe)})}),te}this.stop=function(te){ne&&ne.stop(function(ie){V.blob=ie,te(ie),V.clearRecordedData()})},this.pause=function(){ne&&ne.pause()},this.resume=function(){ne&&ne.resume()},this.clearRecordedData=function(){ne&&(ne.clearRecordedData(),ne=null),W&&(W.releaseStreams(),W=null)},this.addStreams=function(te){if(!te)throw"First parameter is required.";te instanceof Array||(te=[te]),L.concat(te),!(!ne||!W)&&(W.appendStreams(te),N.previewStream&&typeof N.previewStream=="function"&&N.previewStream(W.getMixedStream()))},this.resetVideoStreams=function(te){W&&(te&&!(te instanceof Array)&&(te=[te]),W.resetVideoStreams(te))},this.getMixer=function(){return W},this.name="MultiStreamRecorder",this.toString=function(){return this.name}}typeof e<"u"&&(e.MultiStreamRecorder=Z);/**
 * RecordRTCPromisesHandler adds promises support in {@link RecordRTC}. Try a {@link https://github.com/muaz-khan/RecordRTC/blob/master/simple-demos/RecordRTCPromisesHandler.html|demo here}
 * @summary Promises for {@link RecordRTC}
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef RecordRTCPromisesHandler
 * @class
 * @example
 * var recorder = new RecordRTCPromisesHandler(mediaStream, options);
 * recorder.startRecording()
 *         .then(successCB)
 *         .catch(errorCB);
 * // Note: You can access all RecordRTC API using "recorder.recordRTC" e.g. 
 * recorder.recordRTC.onStateChanged = function(state) {};
 * recorder.recordRTC.setRecordingDuration(5000);
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - Single media-stream object, array of media-streams, html-canvas-element, etc.
 * @param {object} config - {type:"video", recorderType: MediaStreamRecorder, disableLogs: true, numberOfAudioChannels: 1, bufferSize: 0, sampleRate: 0, video: HTMLVideoElement, etc.}
 * @throws Will throw an error if "new" keyword is not used to initiate "RecordRTCPromisesHandler". Also throws error if first argument "MediaStream" is missing.
 * @requires {@link RecordRTC}
 */function H(L,N){if(!this)throw'Use "new RecordRTCPromisesHandler()"';if(typeof L>"u")throw'First argument "MediaStream" is required.';var V=this;V.recordRTC=new e(L,N),this.startRecording=function(){return new Promise(function(W,ne){try{V.recordRTC.startRecording(),W()}catch(se){ne(se)}})},this.stopRecording=function(){return new Promise(function(W,ne){try{V.recordRTC.stopRecording(function(se){if(V.blob=V.recordRTC.getBlob(),!V.blob||!V.blob.size){ne("Empty blob.",V.blob);return}W(se)})}catch(se){ne(se)}})},this.pauseRecording=function(){return new Promise(function(W,ne){try{V.recordRTC.pauseRecording(),W()}catch(se){ne(se)}})},this.resumeRecording=function(){return new Promise(function(W,ne){try{V.recordRTC.resumeRecording(),W()}catch(se){ne(se)}})},this.getDataURL=function(W){return new Promise(function(ne,se){try{V.recordRTC.getDataURL(function(te){ne(te)})}catch(te){se(te)}})},this.getBlob=function(){return new Promise(function(W,ne){try{W(V.recordRTC.getBlob())}catch(se){ne(se)}})},this.getInternalRecorder=function(){return new Promise(function(W,ne){try{W(V.recordRTC.getInternalRecorder())}catch(se){ne(se)}})},this.reset=function(){return new Promise(function(W,ne){try{W(V.recordRTC.reset())}catch(se){ne(se)}})},this.destroy=function(){return new Promise(function(W,ne){try{W(V.recordRTC.destroy())}catch(se){ne(se)}})},this.getState=function(){return new Promise(function(W,ne){try{W(V.recordRTC.getState())}catch(se){ne(se)}})},this.blob=null,this.version="5.6.2"}typeof e<"u"&&(e.RecordRTCPromisesHandler=H);/**
 * WebAssemblyRecorder lets you create webm videos in JavaScript via WebAssembly. The library consumes raw RGBA32 buffers (4 bytes per pixel) and turns them into a webm video with the given framerate and quality. This makes it compatible out-of-the-box with ImageData from a CANVAS. With realtime mode you can also use webm-wasm for streaming webm videos.
 * @summary Video recording feature in Chrome, Firefox and maybe Edge.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef WebAssemblyRecorder
 * @class
 * @example
 * var recorder = new WebAssemblyRecorder(mediaStream);
 * recorder.record();
 * recorder.stop(function(blob) {
 *     video.src = URL.createObjectURL(blob);
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @param {object} config - {webAssemblyPath:'webm-wasm.wasm',workerPath: 'webm-worker.js', frameRate: 30, width: 1920, height: 1080, bitrate: 1024, realtime: true}
 */function Y(L,N){(typeof ReadableStream>"u"||typeof WritableStream>"u")&&console.error("Following polyfill is strongly recommended: https://unpkg.com/@mattiasbuelens/web-streams-polyfill/dist/polyfill.min.js"),N=N||{},N.width=N.width||640,N.height=N.height||480,N.frameRate=N.frameRate||30,N.bitrate=N.bitrate||1200,N.realtime=N.realtime||!0;var V;function W(){return new ReadableStream({start:function(de){var ce=document.createElement("canvas"),he=document.createElement("video"),ee=!0;he.srcObject=L,he.muted=!0,he.height=N.height,he.width=N.width,he.volume=0,he.onplaying=function(){ce.width=N.width,ce.height=N.height;var xe=ce.getContext("2d"),be=1e3/N.frameRate,Ae=setInterval(function(){if(V&&(clearInterval(Ae),de.close()),ee&&(ee=!1,N.onVideoProcessStarted&&N.onVideoProcessStarted()),xe.drawImage(he,0,0),de._controlledReadableStream.state!=="closed")try{de.enqueue(xe.getImageData(0,0,N.width,N.height))}catch{}},be)},he.play()}})}var ne;function se(de,ce){if(!N.workerPath&&!ce){V=!1,fetch("https://unpkg.com/webm-wasm@latest/dist/webm-worker.js").then(function(ee){ee.arrayBuffer().then(function(xe){se(de,xe)})});return}if(!N.workerPath&&ce instanceof ArrayBuffer){var he=new Blob([ce],{type:"text/javascript"});N.workerPath=u.createObjectURL(he)}N.workerPath||console.error("workerPath parameter is missing."),ne=new Worker(N.workerPath),ne.postMessage(N.webAssemblyPath||"https://unpkg.com/webm-wasm@latest/dist/webm-wasm.wasm"),ne.addEventListener("message",function(ee){ee.data==="READY"?(ne.postMessage({width:N.width,height:N.height,bitrate:N.bitrate||1200,timebaseDen:N.frameRate||30,realtime:N.realtime}),W().pipeTo(new WritableStream({write:function(xe){if(V){console.error("Got image, but recorder is finished!");return}ne.postMessage(xe.data.buffer,[xe.data.buffer])}}))):ee.data&&(te||pe.push(ee.data))})}this.record=function(){pe=[],te=!1,this.blob=null,se(L),typeof N.initCallback=="function"&&N.initCallback()};var te;this.pause=function(){te=!0},this.resume=function(){te=!1};function ie(de){if(!ne){de&&de();return}ne.addEventListener("message",function(ce){ce.data===null&&(ne.terminate(),ne=null,de&&de())}),ne.postMessage(null)}var pe=[];this.stop=function(de){V=!0;var ce=this;ie(function(){ce.blob=new Blob(pe,{type:"video/webm"}),de(ce.blob)})},this.name="WebAssemblyRecorder",this.toString=function(){return this.name},this.clearRecordedData=function(){pe=[],te=!1,this.blob=null},this.blob=null}typeof e<"u"&&(e.WebAssemblyRecorder=Y)}(yP)),yP.exports}var dF=lPe();const wne=$n(dF);function cPe({maxDuration:t=300,noiseReduction:e=!0}={}){const[n,r]=_.useState(!1),[i,o]=_.useState(0),[a,s]=_.useState(null),[l,c]=_.useState(0),[u,f]=_.useState(null),[h,p]=_.useState([]),y=_.useRef(null),g=_.useRef(null),v=_.useRef(null),b=_.useRef(null),w=_.useRef(null),T=_.useRef(null),C=_.useRef(0),P=_.useRef(null),M=_.useCallback(()=>{b.current&&(cancelAnimationFrame(b.current),b.current=null),v.current&&(clearInterval(v.current),v.current=null),P.current&&(clearTimeout(P.current),P.current=null),w.current&&w.current.state!=="closed"&&w.current.close().catch(console.error),y.current&&(y.current.stopRecording(),y.current=null),g.current&&(g.current.getTracks().forEach(B=>B.stop()),g.current=null)},[]);_.useEffect(()=>M,[M]);const k=_.useCallback(async()=>{try{M();const B=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:e,autoGainControl:!0,channelCount:1,sampleRate:44100}});return g.current=B,f(!0),!0}catch(B){return console.error("[useAudioRecorder] Error requesting permissions:",B),f(!1),!1}},[e,M]),I=_.useCallback(()=>{if(g.current)try{const B=new AudioContext;w.current=B;const $=B.createAnalyser();$.fftSize=256,T.current=$,B.createMediaStreamSource(g.current).connect($);const J=new Uint8Array($.frequencyBinCount),K=()=>{if(!T.current)return;T.current.getByteFrequencyData(J);let Z=0;for(let Y=0;Y<J.length;Y++)Z+=J[Y];const H=Z/J.length;if(c(H),H>30){const Y=Date.now();(h.length===0||Y-h[h.length-1]>100)&&p(L=>[...L,Y])}p(Y=>Y.filter(L=>Date.now()-L<2e3)),b.current=requestAnimationFrame(K)};b.current=requestAnimationFrame(K)}catch(B){console.error("[useAudioRecorder] Error setting up audio analysis:",B)}},[h]),U=_.useCallback(async()=>{if(!n)try{if(u!==!0&&!await k())throw new Error("Microphone permission denied");if(g.current||await k(),!g.current)throw new Error("Failed to get audio stream");s(null),o(0),C.current=Date.now();const B={type:"audio",mimeType:"audio/webm;codecs=opus",recorderType:dF.StereoAudioRecorder,numberOfAudioChannels:1,desiredSampRate:44100,checkForInactiveTracks:!0,timeSlice:50},$=new wne(g.current,B);y.current=$,$.startRecording(),I(),v.current=window.setInterval(()=>{const F=Date.now()-C.current;o(F)},100),t>0&&(P.current=setTimeout(()=>{n&&z()},t*1e3)),r(!0)}catch(B){console.error("[useAudioRecorder] Error starting recording:",B),M()}},[n,u,k,M,I,t]),z=_.useCallback(()=>{if(!(!n||!y.current))try{r(!1),v.current&&(clearInterval(v.current),v.current=null),P.current&&(clearTimeout(P.current),P.current=null),b.current&&(cancelAnimationFrame(b.current),b.current=null);const B=(Date.now()-C.current)/1e3;y.current.stopRecording(async()=>{var F;const $=(F=y.current)==null?void 0:F.getBlob();if($)try{Object.defineProperty($,"duration",{value:B,writable:!1,enumerable:!0}),console.log(`[useAudioRecorder] Recording stopped. Duration: ${B}s, Size: ${$.size} bytes, Type: ${$.type}`),s($)}catch(J){console.error("[useAudioRecorder] Error adding duration to blob:",J),s($)}y.current&&(y.current=null)})}catch(B){console.error("[useAudioRecorder] Error stopping recording:",B),M()}},[n,M]),O=_.useCallback(()=>{M(),s(null),o(0),c(0),p([])},[M]);return{isRecording:n,recordingTime:i,audioBlob:a,audioLevel:l,hasPermission:u,ripples:h,startRecording:U,stopRecording:z,requestPermissions:k,resetRecording:O}}function uPe({audioBlob:t,onPlaybackStart:e,onPlaybackEnd:n}){const[r,i]=_.useState(!1),[o,a]=_.useState(0),[s,l]=_.useState(0),c=_.useRef(null),u=_.useRef(null),f=_.useRef(null),h=_.useRef(!1),p=_.useCallback(()=>{f.current&&(clearInterval(f.current),f.current=null),u.current&&(URL.revokeObjectURL(u.current),u.current=null)},[]);_.useEffect(()=>{if(i(!1),a(0),h.current=!1,p(),!t||!c.current){l(0);return}console.log("[useAudioPlayback] Creating new URL for audio blob");try{const w=URL.createObjectURL(t);if(u.current=w,c.current.src=w,c.current.load(),"duration"in t&&typeof t.duration=="number"){const T=t.duration;console.log("[useAudioPlayback] Using duration from blob:",T),l(T)}else console.log("[useAudioPlayback] No duration in blob, waiting for loadedmetadata event")}catch(w){console.error("[useAudioPlayback] Error setting up audio:",w)}return p},[t,p]),_.useEffect(()=>{if(!c.current)return;const w=c.current,T=()=>{console.log("[useAudioPlayback] Audio metadata loaded, duration:",w.duration),isFinite(w.duration)&&w.duration>0?(l(w.duration),h.current=!0):(console.log("[useAudioPlayback] Invalid duration from metadata:",w.duration),t&&"duration"in t&&typeof t.duration=="number"&&l(t.duration))},C=()=>{if(w.duration>0){const k=w.currentTime/w.duration;a(k)}},P=()=>{console.log("[useAudioPlayback] Playback ended"),i(!1),a(1),f.current&&(clearInterval(f.current),f.current=null),n&&n()},M=k=>{console.error("[useAudioPlayback] Audio error:",k),i(!1),f.current&&(clearInterval(f.current),f.current=null)};return w.addEventListener("loadedmetadata",T),w.addEventListener("timeupdate",C),w.addEventListener("ended",P),w.addEventListener("error",M),()=>{w.removeEventListener("loadedmetadata",T),w.removeEventListener("timeupdate",C),w.removeEventListener("ended",P),w.removeEventListener("error",M)}},[t,n]);const y=_.useCallback(()=>{if(!c.current||!t)return;const w=c.current;if(r)console.log("[useAudioPlayback] Pausing playback"),w.pause(),i(!1),f.current&&(clearInterval(f.current),f.current=null);else{console.log("[useAudioPlayback] Starting playback"),w.currentTime>=w.duration-.1&&(w.currentTime=0,a(0));const T=w.play();T!==void 0&&T.then(()=>{i(!0),e&&e(),f.current||(f.current=setInterval(()=>{if(w.duration>0){const C=w.currentTime/w.duration;a(C)}},50))}).catch(C=>{console.error("[useAudioPlayback] Error playing audio:",C)})}},[r,t,e]),g=_.useCallback(w=>{if(!(!c.current||!t))try{const T=c.current,C=w*T.duration;console.log(`[useAudioPlayback] Seeking to position ${w} (${C}s)`),C>=0&&C<=T.duration&&(T.currentTime=C,a(w))}catch(T){console.error("[useAudioPlayback] Error seeking:",T)}},[t]),v=_.useCallback(async()=>new Promise(w=>{if(!c.current||!t){w(0);return}const T=c.current;if(h.current&&s>0){w(s);return}if(t&&"duration"in t&&typeof t.duration=="number"){const M=t.duration;console.log("[useAudioPlayback] Using duration from blob:",M),l(M),w(M);return}const C=()=>{if(console.log("[useAudioPlayback] Audio loaded, duration:",T.duration),isFinite(T.duration)&&T.duration>0)l(T.duration),w(T.duration);else{const M=t.size/16e3;console.log("[useAudioPlayback] Using estimated duration:",M),l(M),w(M)}T.removeEventListener("loadedmetadata",C)},P=()=>{console.error("[useAudioPlayback] Error loading audio metadata");const M=t.size/16e3;console.log("[useAudioPlayback] Using estimated duration after error:",M),l(M),w(M),T.removeEventListener("loadedmetadata",C),T.removeEventListener("error",P)};T.addEventListener("loadedmetadata",C),T.addEventListener("error",P),!T.src&&u.current&&(T.src=u.current,T.load()),setTimeout(()=>{if(!h.current){T.removeEventListener("loadedmetadata",C),T.removeEventListener("error",P);const M=t.size/16e3;console.log("[useAudioPlayback] Timeout - using estimated duration:",M),l(M),w(M)}},3e3)}),[t,s]),b=_.useCallback(()=>{c.current&&(c.current.pause(),c.current.currentTime=0),i(!1),a(0),f.current&&(clearInterval(f.current),f.current=null)},[]);return{isPlaying:r,playbackProgress:o,audioDuration:s,audioRef:c,togglePlayback:y,seekTo:g,reset:b,prepareAudio:v}}const dPe=({size:t})=>{const e=["","","Hola","Bonjour","Ciao","","Guten Tag","Ol","","Merhaba","","Shalom","","Ayubowan","  ","Kem Chho","","","Namaste","Hello","Hi","Hey","Svenska","Lietuvi","Romn","","Gaeilge","","","","Shqip"],n=()=>e.map((i,o)=>{const a=o/e.length*2*Math.PI,s=10+Math.random()*20,l=120+Math.random()*150,c=Math.cos(a)*s,u=Math.sin(a)*s;return{angle:a,initialX:c,initialY:u,targetX:Math.cos(a)*l,targetY:Math.sin(a)*l,scale:.7+Math.random()*.6,opacity:.3+Math.random()*.4,duration:15+Math.random()*25,delay:Math.random()*5}}),r=ve.useMemo(()=>n(),[]);return d.jsx("div",{className:He("absolute -z-10 overflow-hidden",t==="sm"?"text-[0.5rem]":"text-xs","will-change-transform"),style:{width:"100%",height:"100%",left:"50%",top:"65%",transform:"translate(-50%, -50%)",opacity:.8},children:d.jsx("div",{className:"relative h-full w-full",children:e.map((i,o)=>{const a=r[o];return d.jsx(Ke.span,{className:"absolute whitespace-nowrap transform-gpu",style:{left:"50%",top:"50%"},initial:{x:a.initialX,y:a.initialY,scale:0,opacity:0},animate:{x:a.targetX,y:a.targetY,scale:a.scale,opacity:a.opacity},transition:{x:{duration:a.duration,repeat:1/0,repeatType:"mirror",ease:"easeOut",delay:a.delay},y:{duration:a.duration,repeat:1/0,repeatType:"mirror",ease:"easeOut",delay:a.delay},opacity:{duration:2,delay:a.delay},scale:{duration:1.5,delay:a.delay}},children:i},o)})})})};function fPe({isRecording:t,isProcessing:e,hasPermission:n,onRecordingStart:r,onRecordingStop:i,onPermissionRequest:o,audioLevel:a=0,showAnimation:s=!0,audioBlob:l=null}){const{isInStep:c,tutorialCompleted:u,isActive:f}=ka(),h=c(3);if(f&&c(5))return null;if(n===!1)return d.jsx(Ke.button,{onClick:o,className:"relative z-10 rounded-full flex items-center justify-center border transition-all duration-300 shadow-lg bg-red-500 border-red-600 w-20 h-20",whileTap:{scale:.95},children:d.jsx(Vf,{className:"w-8 h-8 text-white"})});const y=h&&!u,g=t?Math.max(12,Math.min(60,a/5*3)):y?40:0;if(!t&&e)return null;const v=h&&!u;return d.jsx("div",{className:`relative flex items-center justify-center ${v?"tutorial-target record-entry-tab":""}`,children:d.jsx(Ke.button,{onClick:t?i:r,className:He("relative z-10 rounded-full flex items-center justify-center border transition-all duration-300 shadow-lg",t?"bg-red-500 border-red-600":"bg-theme-color hover:bg-theme-color/90 border-theme-color/20","w-20 h-20",l&&"opacity-50 cursor-not-allowed",v?"tutorial-button-highlight":""),style:{boxShadow:t||y?`0 0 ${g}px ${g/2}px rgba(239, 68, 68, 0.8)`:void 0,backgroundColor:"#000000"},whileTap:{scale:.95},disabled:l!==null,"data-tutorial-target":v?"record-entry":void 0,children:t?d.jsx(RJ,{className:"w-7 h-7 text-white"}):d.jsx(Vf,{className:"w-8 h-8 text-white"})})})}function hPe({isRecording:t,recordingTime:e}){const n=typeof e=="string"?e:Mte(typeof e=="number"?e/1e3:0);return d.jsxs(Ke.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"flex items-center gap-2 mt-4",children:[d.jsx(Ke.div,{className:"w-4 h-4 rounded-full bg-red-500",animate:{opacity:[1,.4,1],scale:[1,1.1,1]},transition:{repeat:1/0,duration:1.2,ease:"easeInOut"}}),d.jsx("span",{className:"text-xl font-medium",children:n})]})}function vb(t,[e,n]){return Math.min(n,Math.max(e,t))}function TA(t){const e=_.useRef({value:t,previous:t});return _.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var bne=["PageUp","PageDown"],Sne=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Ene={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},E0="Slider",[qO,pPe,mPe]=f0(E0),[_ne,wot]=sa(E0,[mPe]),[gPe,CA]=_ne(E0),Tne=_.forwardRef((t,e)=>{const{name:n,min:r=0,max:i=100,step:o=1,orientation:a="horizontal",disabled:s=!1,minStepsBetweenThumbs:l=0,defaultValue:c=[r],value:u,onValueChange:f=()=>{},onValueCommit:h=()=>{},inverted:p=!1,form:y,...g}=t,v=_.useRef(new Set),b=_.useRef(0),T=a==="horizontal"?yPe:vPe,[C=[],P]=wo({prop:u,defaultProp:c,onChange:O=>{var $;($=[...v.current][b.current])==null||$.focus(),f(O)}}),M=_.useRef(C);function k(O){const B=EPe(C,O);z(O,B)}function I(O){z(O,b.current)}function U(){const O=M.current[b.current];C[b.current]!==O&&h(C)}function z(O,B,{commit:$}={commit:!1}){const F=APe(o),J=MPe(Math.round((O-r)/o)*o+r,F),K=vb(J,[r,i]);P((Z=[])=>{const H=bPe(Z,K,B);if(CPe(H,l*o)){b.current=H.indexOf(K);const Y=String(H)!==String(Z);return Y&&$&&h(H),Y?H:Z}else return Z})}return d.jsx(gPe,{scope:t.__scopeSlider,name:n,disabled:s,min:r,max:i,valueIndexToChangeRef:b,thumbs:v.current,values:C,orientation:a,form:y,children:d.jsx(qO.Provider,{scope:t.__scopeSlider,children:d.jsx(qO.Slot,{scope:t.__scopeSlider,children:d.jsx(T,{"aria-disabled":s,"data-disabled":s?"":void 0,...g,ref:e,onPointerDown:ut(g.onPointerDown,()=>{s||(M.current=C)}),min:r,max:i,inverted:p,onSlideStart:s?void 0:k,onSlideMove:s?void 0:I,onSlideEnd:s?void 0:U,onHomeKeyDown:()=>!s&&z(r,0,{commit:!0}),onEndKeyDown:()=>!s&&z(i,C.length-1,{commit:!0}),onStepKeyDown:({event:O,direction:B})=>{if(!s){const J=bne.includes(O.key)||O.shiftKey&&Sne.includes(O.key)?10:1,K=b.current,Z=C[K],H=o*J*B;z(Z+H,K,{commit:!0})}}})})})})});Tne.displayName=E0;var[Cne,Ane]=_ne(E0,{startEdge:"left",endEdge:"right",size:"width",direction:1}),yPe=_.forwardRef((t,e)=>{const{min:n,max:r,dir:i,inverted:o,onSlideStart:a,onSlideMove:s,onSlideEnd:l,onStepKeyDown:c,...u}=t,[f,h]=_.useState(null),p=Kt(e,T=>h(T)),y=_.useRef(),g=ah(i),v=g==="ltr",b=v&&!o||!v&&o;function w(T){const C=y.current||f.getBoundingClientRect(),P=[0,C.width],k=fF(P,b?[n,r]:[r,n]);return y.current=C,k(T-C.left)}return d.jsx(Cne,{scope:t.__scopeSlider,startEdge:b?"left":"right",endEdge:b?"right":"left",direction:b?1:-1,size:"width",children:d.jsx(Mne,{dir:g,"data-orientation":"horizontal",...u,ref:p,style:{...u.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:T=>{const C=w(T.clientX);a==null||a(C)},onSlideMove:T=>{const C=w(T.clientX);s==null||s(C)},onSlideEnd:()=>{y.current=void 0,l==null||l()},onStepKeyDown:T=>{const P=Ene[b?"from-left":"from-right"].includes(T.key);c==null||c({event:T,direction:P?-1:1})}})})}),vPe=_.forwardRef((t,e)=>{const{min:n,max:r,inverted:i,onSlideStart:o,onSlideMove:a,onSlideEnd:s,onStepKeyDown:l,...c}=t,u=_.useRef(null),f=Kt(e,u),h=_.useRef(),p=!i;function y(g){const v=h.current||u.current.getBoundingClientRect(),b=[0,v.height],T=fF(b,p?[r,n]:[n,r]);return h.current=v,T(g-v.top)}return d.jsx(Cne,{scope:t.__scopeSlider,startEdge:p?"bottom":"top",endEdge:p?"top":"bottom",size:"height",direction:p?1:-1,children:d.jsx(Mne,{"data-orientation":"vertical",...c,ref:f,style:{...c.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:g=>{const v=y(g.clientY);o==null||o(v)},onSlideMove:g=>{const v=y(g.clientY);a==null||a(v)},onSlideEnd:()=>{h.current=void 0,s==null||s()},onStepKeyDown:g=>{const b=Ene[p?"from-bottom":"from-top"].includes(g.key);l==null||l({event:g,direction:b?-1:1})}})})}),Mne=_.forwardRef((t,e)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:i,onSlideEnd:o,onHomeKeyDown:a,onEndKeyDown:s,onStepKeyDown:l,...c}=t,u=CA(E0,n);return d.jsx(At.span,{...c,ref:e,onKeyDown:ut(t.onKeyDown,f=>{f.key==="Home"?(a(f),f.preventDefault()):f.key==="End"?(s(f),f.preventDefault()):bne.concat(Sne).includes(f.key)&&(l(f),f.preventDefault())}),onPointerDown:ut(t.onPointerDown,f=>{const h=f.target;h.setPointerCapture(f.pointerId),f.preventDefault(),u.thumbs.has(h)?h.focus():r(f)}),onPointerMove:ut(t.onPointerMove,f=>{f.target.hasPointerCapture(f.pointerId)&&i(f)}),onPointerUp:ut(t.onPointerUp,f=>{const h=f.target;h.hasPointerCapture(f.pointerId)&&(h.releasePointerCapture(f.pointerId),o(f))})})}),Pne="SliderTrack",kne=_.forwardRef((t,e)=>{const{__scopeSlider:n,...r}=t,i=CA(Pne,n);return d.jsx(At.span,{"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation,...r,ref:e})});kne.displayName=Pne;var YO="SliderRange",Nne=_.forwardRef((t,e)=>{const{__scopeSlider:n,...r}=t,i=CA(YO,n),o=Ane(YO,n),a=_.useRef(null),s=Kt(e,a),l=i.values.length,c=i.values.map(h=>jne(h,i.min,i.max)),u=l>1?Math.min(...c):0,f=100-Math.max(...c);return d.jsx(At.span,{"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,...r,ref:s,style:{...t.style,[o.startEdge]:u+"%",[o.endEdge]:f+"%"}})});Nne.displayName=YO;var XO="SliderThumb",Rne=_.forwardRef((t,e)=>{const n=pPe(t.__scopeSlider),[r,i]=_.useState(null),o=Kt(e,s=>i(s)),a=_.useMemo(()=>r?n().findIndex(s=>s.ref.current===r):-1,[n,r]);return d.jsx(xPe,{...t,ref:o,index:a})}),xPe=_.forwardRef((t,e)=>{const{__scopeSlider:n,index:r,name:i,...o}=t,a=CA(XO,n),s=Ane(XO,n),[l,c]=_.useState(null),u=Kt(e,w=>c(w)),f=l?a.form||!!l.closest("form"):!0,h=lA(l),p=a.values[r],y=p===void 0?0:jne(p,a.min,a.max),g=SPe(r,a.values.length),v=h==null?void 0:h[s.size],b=v?_Pe(v,y,s.direction):0;return _.useEffect(()=>{if(l)return a.thumbs.add(l),()=>{a.thumbs.delete(l)}},[l,a.thumbs]),d.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[s.startEdge]:`calc(${y}% + ${b}px)`},children:[d.jsx(qO.ItemSlot,{scope:t.__scopeSlider,children:d.jsx(At.span,{role:"slider","aria-label":t["aria-label"]||g,"aria-valuemin":a.min,"aria-valuenow":p,"aria-valuemax":a.max,"aria-orientation":a.orientation,"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,tabIndex:a.disabled?void 0:0,...o,ref:u,style:p===void 0?{display:"none"}:t.style,onFocus:ut(t.onFocus,()=>{a.valueIndexToChangeRef.current=r})})}),f&&d.jsx(wPe,{name:i??(a.name?a.name+(a.values.length>1?"[]":""):void 0),form:a.form,value:p},r)]})});Rne.displayName=XO;var wPe=t=>{const{value:e,...n}=t,r=_.useRef(null),i=TA(e);return _.useEffect(()=>{const o=r.current,a=window.HTMLInputElement.prototype,l=Object.getOwnPropertyDescriptor(a,"value").set;if(i!==e&&l){const c=new Event("input",{bubbles:!0});l.call(o,e),o.dispatchEvent(c)}},[i,e]),d.jsx("input",{style:{display:"none"},...n,ref:r,defaultValue:e})};function bPe(t=[],e,n){const r=[...t];return r[n]=e,r.sort((i,o)=>i-o)}function jne(t,e,n){const o=100/(n-e)*(t-e);return vb(o,[0,100])}function SPe(t,e){return e>2?`Value ${t+1} of ${e}`:e===2?["Minimum","Maximum"][t]:void 0}function EPe(t,e){if(t.length===1)return 0;const n=t.map(i=>Math.abs(i-e)),r=Math.min(...n);return n.indexOf(r)}function _Pe(t,e,n){const r=t/2,o=fF([0,50],[0,r]);return(r-o(e)*n)*n}function TPe(t){return t.slice(0,-1).map((e,n)=>t[n+1]-e)}function CPe(t,e){if(e>0){const n=TPe(t);return Math.min(...n)>=e}return!0}function fF(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function APe(t){return(String(t).split(".")[1]||"").length}function MPe(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}var Ine=Tne,PPe=kne,kPe=Nne,NPe=Rne;const Fw=_.forwardRef(({className:t,...e},n)=>d.jsxs(Ine,{ref:n,className:He("relative flex w-full touch-none select-none items-center",t),...e,children:[d.jsx(PPe,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:d.jsx(kPe,{className:"absolute h-full bg-primary text-black transition-all"})}),d.jsx(NPe,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background text-black ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));Fw.displayName=Ine.displayName;let y8=0;const RPe=10,jPe=1*60*1e3,oT=new Map,One=new Set,vP=new Map,IPe=(t,e)=>{try{const n=Date.now();if(n-y8<RPe)return console.log("[Audio.ProcessingState] Debouncing rapid state change"),v8();y8=n;const r=`${e}-${t}-${n}`;if(vP.has(r))return console.log("[Audio.ProcessingState] Skipping duplicate recent operation"),v8();vP.set(r,n),setTimeout(()=>vP.delete(r),2e3);const i=localStorage.getItem("processingEntries");let o=i?JSON.parse(i):[];return e==="add"&&!o.includes(t)&&(o.push(t),oT.set(t,n),One.delete(t),console.log(`[Audio.ProcessingState] Added entry ${t} to processing list. Now tracking ${o.length} entries.`)),localStorage.setItem("processingEntries",JSON.stringify(o)),window.dispatchEvent(new CustomEvent("processingEntriesChanged",{detail:{entries:o,lastUpdate:n,forceUpdate:!0,immediate:!0}})),window.dispatchEvent(new CustomEvent("processingEntriesChanged",{detail:{entries:o,lastUpdate:n+1,forceUpdate:!0,immediate:!0}})),o}catch(n){return console.error("[Audio.ProcessingState] Error updating processing entries in storage:",n),[]}},v8=()=>{try{const t=localStorage.getItem("processingEntries");let e=t?JSON.parse(t):[];const n=Date.now(),r=e.filter(i=>{if(One.has(i))return!1;let o=oT.get(i);if(!o){const s=i.split("-"),l=parseInt(s[s.length-1]);if(!isNaN(l))o=l,oT.set(i,l);else return oT.set(i,n),!0}if(n-o>jPe){console.log(`[Audio.ProcessingState] Found stale entry: ${i}, removing automatically`),window.dispatchEvent(new CustomEvent("processingEntryCompleted",{detail:{tempId:i,timestamp:n,forceClearProcessingCard:!0,wasStale:!0,immediate:!0}})),window.dispatchEvent(new CustomEvent("forceRemoveProcessingCard",{detail:{tempId:i,timestamp:n,forceCleanup:!0,wasStale:!0,immediate:!0}}));try{document.querySelectorAll(".journal-entry-card.processing-card").forEach(s=>{s.style.display="none",s.parentNode&&s.parentNode.removeChild(s)})}catch(s){console.error("[Audio.ProcessingState] Error in stale card DOM cleanup:",s)}return!1}return!0});return r.length!==e.length&&(localStorage.setItem("processingEntries",JSON.stringify(r)),console.log(`[Audio.ProcessingState] Removed ${e.length-r.length} stale entries`),window.dispatchEvent(new CustomEvent("processingEntriesChanged",{detail:{entries:r,lastUpdate:n,forceUpdate:!0,immediate:!0}})),e=r),console.log(`[Audio.ProcessingState] Retrieved ${e.length} processing entries from storage.`),e}catch(t){return console.error("[Audio.ProcessingState] Error retrieving processing entries from storage:",t),[]}};function OPe({audioBlob:t,isPlaying:e,isProcessing:n,playbackProgress:r,audioDuration:i,onTogglePlayback:o,onSaveEntry:a,onRestart:s,onSeek:l}){const[c,u]=_.useState(0),[f,h]=_.useState(!1),[p,y]=_.useState(0),[g,v]=_.useState(!1),[b,w]=_.useState(0),{isMobile:T}=ui(),{addEvent:C}=$1();_.useEffect(()=>{if(!g&&r!==void 0){const z=r*i;u(z),y(r*100),C("PlaybackControls","Progress update","info",{progress:r,timeInSeconds:z,audioDuration:i,sliderValue:r*100})}},[r,i,g,C]),_.useEffect(()=>{if(n&&b===0?w(Date.now()):!n&&b!==0&&w(0),n&&b>0){const z=Date.now()-b;z>45e3&&C("PlaybackControls","Processing taking too long","warning",{processingTime:z})}},[n,b,C]);const P=z=>{if(isNaN(z)||z<0)return"00:00";const O=Math.floor(z/60),B=Math.floor(z%60);return`${O.toString().padStart(2,"0")}:${B.toString().padStart(2,"0")}`},M=z=>{const O=z[0]/100;y(z[0]),u(O*i),C("PlaybackControls","Slider changed","info",{value:z[0],newPosition:O,newTimeInSeconds:O*i}),l&&l(O)},k=()=>{v(!0)},I=()=>{l&&p!==void 0&&l(p/100),setTimeout(()=>{v(!1)},100)},U=async()=>{if(C("ProcessingFlow","Save entry initiated","info"),!t||t.size<100){C("ProcessingFlow","Invalid audio blob for saving","error",{size:t==null?void 0:t.size});return}h(!0),await Lc();const z="temp-"+Date.now();C("ProcessingFlow","Dispatching immediate processing event","info",{tempId:z}),IPe(z,"add"),window.dispatchEvent(new CustomEvent("processingEntriesChanged",{detail:{entries:[z],lastUpdate:Date.now(),forceUpdate:!0,showLoader:!0}})),setTimeout(()=>{C("ProcessingFlow","Sending followup processing event","info",{tempId:z}),window.dispatchEvent(new CustomEvent("processingEntriesChanged",{detail:{entries:[z],lastUpdate:Date.now(),forceUpdate:!0,showLoader:!0}}))},50),setTimeout(()=>{C("ProcessingFlow","Sending third processing event","info",{tempId:z}),window.dispatchEvent(new CustomEvent("processingEntriesChanged",{detail:{entries:[z],lastUpdate:Date.now(),forceUpdate:!0,showLoader:!0}}))},200),setTimeout(()=>{C("ProcessingFlow","Sending journal refresh event","info",{tempId:z}),window.dispatchEvent(new CustomEvent("journalEntriesNeedRefresh",{detail:{tempId:z,timestamp:Date.now(),forceRefresh:!0}}))},300),setTimeout(()=>{h(!1),C("ProcessingFlow","Calling onSaveEntry callback","info"),a()},150)};return d.jsx("div",{className:"w-full px-4 py-2",children:d.jsxs("div",{className:"flex flex-col w-full gap-3",children:[d.jsxs("div",{className:"flex items-center gap-3 mb-1 w-full",children:[d.jsx("div",{className:"relative w-full flex items-center",children:d.jsx(Fw,{value:[p],min:0,max:100,step:.1,className:He("w-full transition-opacity",n?"opacity-60 cursor-not-allowed":""),onValueChange:M,onTouchStart:k,onTouchEnd:I,onMouseDown:k,onMouseUp:I,disabled:n})}),d.jsxs("div",{className:"text-sm text-muted-foreground w-[60px] text-right",children:[P(c),"/",P(i)]})]}),d.jsxs("div",{className:"flex justify-center items-center gap-4",children:[d.jsx(ct,{variant:"ghost",size:"icon",className:"rounded-full w-10 h-10",onClick:o,disabled:n,children:e?d.jsx(O0e,{className:"h-5 w-5"}):d.jsx(nA,{className:"h-5 w-5 ml-0.5"})}),d.jsx(ct,{variant:"ghost",size:"icon",className:"rounded-full w-10 h-10",onClick:s,disabled:n,children:d.jsx(L0e,{className:"h-5 w-5"})}),d.jsx(ct,{variant:"default",className:"rounded-full px-4 bg-green-600 hover:bg-green-700 ml-2",onClick:U,disabled:n||f||!t||t.size<100,children:n||f?d.jsxs(d.Fragment,{children:[d.jsx(Aa,{className:"h-4 w-4 mr-2 animate-spin"}),f?"Preparing...":"Processing..."]}):"Save Entry"})]})]})})}const LPe=({show:t})=>{const[e,n]=_.useState(!1),{theme:r}=Zr();return _.useEffect(()=>{if(t){const i=setTimeout(()=>n(!0),100);return()=>clearTimeout(i)}else n(!1)},[t]),d.jsx(Kc,{children:e&&d.jsx(Ke.div,{className:"w-full flex justify-center mt-4 mb-2 text-center",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},transition:{duration:.5,ease:"easeInOut"},children:d.jsxs(Ke.div,{className:"px-4 py-2 flex flex-col text-lg font-medium text-white",animate:{scale:[1,1.03,1]},transition:{duration:2,repeat:1/0,repeatType:"reverse"},children:[d.jsx(Q,{text:"Speak in any language,"}),d.jsx(Q,{text:"I'll understand you!"})]})})})};function DPe({onRecordingComplete:t,onCancel:e,className:n,updateDebugInfo:r}){const[i,o]=_.useState(!1),[a,s]=_.useState(null),[l,c]=_.useState(!0),[u,f]=_.useState(!1),[h,p]=_.useState(!1),[y,g]=_.useState(!1),[v,b]=_.useState(!1),[w,T]=_.useState(!1),C=_.useRef(!1),P=_.useRef(!1),M=_.useRef(!1),{user:k}=or(),{isMobile:I}=ui(),{isInStep:U}=ka(),{isRecording:z,recordingTime:O,audioBlob:B,audioLevel:$,hasPermission:F,startRecording:J,stopRecording:K,requestPermissions:Z,resetRecording:H}=cPe({noiseReduction:!1,maxDuration:300}),{isPlaying:Y,playbackProgress:L,audioDuration:N,audioRef:V,togglePlayback:W,reset:ne,seekTo:se,prepareAudio:te}=uPe({audioBlob:B,onPlaybackStart:()=>{console.log("[VoiceRecorder] Playback started"),p(!0)},onPlaybackEnd:()=>{console.log("[VoiceRecorder] Playback ended")}});_.useEffect(()=>((async()=>{await Ty(),T(!0)})(),()=>{Lc()}),[]),_.useEffect(()=>{z&&s(null)},[z]),_.useEffect(()=>{z&&O>=12e4&&It.warning("Your recording is quite long. Consider stopping now for better processing.",{duration:3e3})},[z,O]),_.useEffect(()=>{z?c(!0):B&&c(!1)},[z,B]),_.useEffect(()=>{B&&!y&&(console.log("[VoiceRecorder] New audio blob detected, preparing audio..."),te().then(he=>{console.log("[VoiceRecorder] Audio prepared with duration:",he),g(!0)}).catch(he=>{console.error("[VoiceRecorder] Error preparing audio:",he)}))},[B,y,te]),_.useEffect(()=>{console.log("[VoiceRecorder] State update:",{isProcessing:i,hasAudioBlob:!!B,audioSize:(B==null?void 0:B.size)||0,isRecording:z,hasPermission:F,audioDuration:N,hasSaved:u,hasPlayedOnce:h,audioPrepared:y,waitingForClear:v,toastsCleared:w}),r&&r({status:z?"Recording":B?"Recorded":"No Recording",duration:N||O/1e3})},[i,B,z,F,N,u,h,O,y,v,w,r]),_.useEffect(()=>()=>{console.log("[VoiceRecorder] Component unmounting, resetting state"),i&&!C.current&&console.warn("[VoiceRecorder] Component unmounted during processing - potential source of UI errors"),Lc()},[i]);const ie=async()=>{if(!B){s("No audio recording available");return}if(u||P.current){console.log("[VoiceRecorder] Already saved this recording or save in progress, ignoring duplicate save request");return}try{if(console.log("[VoiceRecorder] Starting save process"),P.current=!0,o(!0),s(null),f(!0),b(!0),await Ty(),!M.current){M.current=!0;try{const ee=document.querySelectorAll("[data-sonner-toast]");ee.length>0&&(console.log(`[VoiceRecorder] Found ${ee.length} lingering toasts, removing manually`),ee.forEach(xe=>{xe.parentNode&&xe.parentNode.removeChild(xe)}))}catch(ee){console.error("[VoiceRecorder] Error in manual DOM cleanup:",ee)}}if(await new Promise(ee=>setTimeout(ee,100)),b(!1),T(!0),!h||N===0){console.log("[VoiceRecorder] Recording not played yet, preparing audio...");const ee=await te();if(console.log("[VoiceRecorder] Audio prepared with duration:",ee),g(!0),ee<.5){s("Recording is too short. Please try again."),o(!1),f(!1),P.current=!1;return}}else if(N<.5){s("Recording is too short. Please try again."),o(!1),f(!1),P.current=!1;return}console.log("[VoiceRecorder] Normalizing audio blob before processing...");let he;try{he=await Z2e(B),console.log("[VoiceRecorder] Blob normalized successfully:",{type:he.type,size:he.size,hasDuration:"duration"in he,duration:he.duration||"unknown"});const ee=J2e(he);if(!ee.isValid)throw new Error(ee.errorMessage||"Invalid audio data after normalization")}catch(ee){console.error("[VoiceRecorder] Error normalizing audio blob:",ee),s("Error processing audio. Please try again."),o(!1),f(!1),P.current=!1;return}if(console.log("[VoiceRecorder] Processing audio:",{type:he.type,size:he.size,duration:N,recordingTime:O/1e3,hasPlayedOnce:h,audioPrepared:y,blobHasDuration:"duration"in he}),!h&&N===0&&O>0){const ee=O/1e3;if(console.log(`[VoiceRecorder] Recording not played yet, estimating duration as ${ee}s`),!("duration"in he))try{Object.defineProperty(he,"duration",{value:ee,writable:!1})}catch(xe){console.warn("[VoiceRecorder] Could not add duration to blob:",xe)}}if(t)try{console.log("[VoiceRecorder] Calling recording completion callback"),C.current=!1;const ee=await tF(he).catch(xe=>{throw console.error("[VoiceRecorder] Base64 conversion test failed:",xe),new Error("Error preparing audio for processing")});console.log("[VoiceRecorder] Base64 test conversion successful, length:",ee.length),console.log("[VoiceRecorder] Directly calling onRecordingComplete with blob"),await t(he),C.current=!0,P.current=!1,console.log("[VoiceRecorder] Recording callback completed successfully")}catch(ee){console.error("[VoiceRecorder] Error in recording callback:",ee),s((ee==null?void 0:ee.message)||"An unexpected error occurred"),setTimeout(()=>{It.error("Error saving recording",{id:"error-toast",duration:3e3})},300),o(!1),f(!1),P.current=!1}}catch(he){console.error("[VoiceRecorder] Error in save entry:",he),s((he==null?void 0:he.message)||"An unexpected error occurred"),setTimeout(()=>{It.error("Error saving recording",{id:"error-toast",duration:3e3})},300),o(!1),f(!1),P.current=!1}},pe=async()=>{await Ty(),H(),ne(),s(null),c(!0),o(!1),f(!1),p(!1),g(!1),C.current=!1,P.current=!1,M.current=!1,await new Promise(he=>setTimeout(he,300)),It.info("Starting a new recording",{duration:2e3})},de=!z&&!B,ce=!U(3)&&!U(4);return d.jsxs("div",{className:He("flex flex-col items-center relative z-10 w-full mb-[1rem]",n),children:[d.jsx("audio",{ref:V,className:"hidden"}),d.jsxs("div",{className:He("relative w-full h-full flex flex-col items-center justify-between overflow-hidden rounded-2xl border border-slate-200/20",I?"min-h-[calc(80vh-160px)]":"min-h-[500px]"),children:[l&&ce&&d.jsx("div",{className:"absolute inset-0 w-full h-full flex items-center justify-center",children:d.jsx(dPe,{size:"md"})}),d.jsxs("div",{className:"relative z-10 flex flex-col items-center justify-start w-full h-full pt-4",children:[d.jsx(LPe,{show:de}),d.jsx("div",{className:"relative z-10 flex justify-center items-center mt-40",children:d.jsx(fPe,{isRecording:z,isProcessing:i,hasPermission:F,onRecordingStart:async()=>{console.log("[VoiceRecorder] Starting new recording"),await Ty(),J()},onRecordingStop:()=>{console.log("[VoiceRecorder] Stopping recording"),K()},onPermissionRequest:()=>{console.log("[VoiceRecorder] Requesting permissions"),Z().then(he=>{})},audioLevel:$,showAnimation:!1,audioBlob:B})}),d.jsx(Kc,{mode:"wait",children:z?d.jsx(hPe,{isRecording:z,recordingTime:O}):B?d.jsx("div",{className:"flex flex-col items-center w-full relative z-10 mt-auto mb-8",children:d.jsx(OPe,{audioBlob:B,isPlaying:Y,isProcessing:i||v,playbackProgress:L,audioDuration:N,onTogglePlayback:async()=>{console.log("[VoiceRecorder] Toggle playback clicked"),await Ty(),W()},onSaveEntry:ie,onRestart:pe,onSeek:se})}):F===!1?d.jsx(Ke.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"text-center text-muted-foreground relative z-10 mt-auto mb-8",children:"Microphone access is required for recording"},"permission"):d.jsx(d.Fragment,{})}),a&&d.jsxs(Ke.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"mt-3 p-2 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm flex items-start gap-2 relative z-10 absolute bottom-8",children:[d.jsx(dv,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),d.jsx("div",{children:a})]}),(i||v)&&d.jsxs("div",{className:"flex items-center gap-2 mt-3 text-sm text-muted-foreground relative z-10 absolute bottom-4",children:[d.jsx(Aa,{className:"w-4 h-4 animate-spin"}),d.jsx("span",{children:v?"Preparing...":"Processing..."})]})]})]})]})}const FPe=()=>{const t=ui(),n=new URLSearchParams(window.location.search).get("mobileDemo")==="true",r=t||n,{currentLanguage:i}=In(),[o,a]=_.useState(Date.now());return _.useEffect(()=>{a(Date.now()),console.log(`JournalHeader: Language changed to ${i}, forcing re-render`)},[i]),d.jsx("div",{className:He("bg-muted/30 py-2 border-b",r?"mt-0":"mt-1 md:mt-2"),children:d.jsx("div",{className:"container mx-auto px-4 max-w-5xl",children:d.jsxs(Ke.h1,{className:"text-2xl sm:text-2xl md:text-3xl font-bold flex items-center gap-2",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:[d.jsx(Q,{text:"Your"})," ",d.jsx(Yc,{className:"inline-flex",useColorTheme:!0})," ",d.jsx(Q,{text:"Journal"})]},`journal-header-${o}`)})})};var hF="Tabs",[zPe,bot]=sa(hF,[g0]),Lne=g0(),[UPe,pF]=zPe(hF),Dne=_.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:i,defaultValue:o,orientation:a="horizontal",dir:s,activationMode:l="automatic",...c}=t,u=ah(s),[f,h]=wo({prop:r,onChange:i,defaultProp:o});return d.jsx(UPe,{scope:n,baseId:Xa(),value:f,onValueChange:h,orientation:a,dir:u,activationMode:l,children:d.jsx(At.div,{dir:u,"data-orientation":a,...c,ref:e})})});Dne.displayName=hF;var Fne="TabsList",zne=_.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...i}=t,o=pF(Fne,n),a=Lne(n);return d.jsx(r4,{asChild:!0,...a,orientation:o.orientation,dir:o.dir,loop:r,children:d.jsx(At.div,{role:"tablist","aria-orientation":o.orientation,...i,ref:e})})});zne.displayName=Fne;var Une="TabsTrigger",Bne=_.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:i=!1,...o}=t,a=pF(Une,n),s=Lne(n),l=Vne(a.baseId,r),c=Wne(a.baseId,r),u=r===a.value;return d.jsx(i4,{asChild:!0,...s,focusable:!i,active:u,children:d.jsx(At.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":c,"data-state":u?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:l,...o,ref:e,onMouseDown:ut(t.onMouseDown,f=>{!i&&f.button===0&&f.ctrlKey===!1?a.onValueChange(r):f.preventDefault()}),onKeyDown:ut(t.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&a.onValueChange(r)}),onFocus:ut(t.onFocus,()=>{const f=a.activationMode!=="manual";!u&&!i&&f&&a.onValueChange(r)})})})});Bne.displayName=Une;var $ne="TabsContent",Hne=_.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:i,children:o,...a}=t,s=pF($ne,n),l=Vne(s.baseId,r),c=Wne(s.baseId,r),u=r===s.value,f=_.useRef(u);return _.useEffect(()=>{const h=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(h)},[]),d.jsx(oo,{present:i||u,children:({present:h})=>d.jsx(At.div,{"data-state":u?"active":"inactive","data-orientation":s.orientation,role:"tabpanel","aria-labelledby":l,hidden:!h,id:c,tabIndex:0,...a,ref:e,style:{...t.style,animationDuration:f.current?"0s":void 0},children:h&&o})})});Hne.displayName=$ne;function Vne(t,e){return`${t}-trigger-${e}`}function Wne(t,e){return`${t}-content-${e}`}var BPe=Dne,Gne=zne,qne=Bne,Yne=Hne;const $Pe=BPe,Xne=_.forwardRef(({className:t,...e},n)=>d.jsx(Gne,{ref:n,className:He("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));Xne.displayName=Gne.displayName;const KO=_.forwardRef(({className:t,...e},n)=>{const r=He("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e.value==="record"&&"record-entry-tab",e.value==="entries"&&"entries-tab",t);return d.jsx(qne,{ref:n,className:r,"data-tutorial-tab":e.value,...e})});KO.displayName=qne.displayName;const JO=_.forwardRef(({className:t,...e},n)=>d.jsx(Yne,{ref:n,className:He("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));JO.displayName=Yne.displayName;const FE=["emotions","memories","places","people","thoughts","events","feelings","themes","issues","entities"],HPe=({entries:t,onSelectEntry:e,onSearchResults:n})=>{const{translate:r}=In(),[i,o]=_.useState(""),[a,s]=_.useState([]),[l,c]=_.useState(0),[u,f]=_.useState(""),[h,p]=_.useState(!0),[y,g]=_.useState(0),[v,b]=_.useState(!1),[w,T]=_.useState([]),[C,P]=_.useState("Search for"),M=_.useRef(null);ui(),_.useEffect(()=>{const z=async()=>{if(r){const O=await r("Search for","en");P(O)}};return z(),window.addEventListener("languageChange",z),()=>{window.removeEventListener("languageChange",z)}},[r]),_.useEffect(()=>{const z=async()=>{if(r){const O=await Promise.all(FE.map(B=>r(B,"en")));T(O)}};return z(),f(""),g(0),p(!0),c(0),window.addEventListener("languageChange",z),()=>{window.removeEventListener("languageChange",z)}},[r]),_.useEffect(()=>{if(h){const z=w.length>l?w[l]:FE[l];if(y<z.length){const O=setTimeout(()=>{f(z.substring(0,y+1)),g(y+1)},100);return()=>clearTimeout(O)}else{const O=setTimeout(()=>{p(!1)},1500);return()=>clearTimeout(O)}}else if(y>0){const z=setTimeout(()=>{const O=w.length>l?w[l]:FE[l];f(O.substring(0,y-1)),g(y-1)},60);return()=>clearTimeout(z)}else{const z=setTimeout(()=>{c(O=>(O+1)%FE.length),p(!0)},300);return()=>clearTimeout(z)}},[h,y,l,w]),_.useEffect(()=>{const z=O=>{v&&(O.preventDefault(),M.current&&M.current.blur(),b(!1),window.history.pushState(null,"",window.location.pathname))};return v&&(window.history.pushState(null,"",window.location.pathname),window.addEventListener("popstate",z)),()=>{window.removeEventListener("popstate",z)}},[v]),_.useEffect(()=>{if(!i.trim()){s(t),n(t);return}const z=t.filter(O=>{const B=(O.content||"").toLowerCase(),$=i.toLowerCase();if(B.includes($))return!0;if(O.entities)try{const F=typeof O.entities=="string"?JSON.parse(O.entities):O.entities;if(F&&Array.isArray(F))return F.some(J=>{var K,Z;return((K=J.name)==null?void 0:K.toLowerCase().includes($))||((Z=J.type)==null?void 0:Z.toLowerCase().includes($))});if(F&&typeof F=="object")return Object.values(F).some(J=>J&&String(J).toLowerCase().includes($))}catch(F){console.error("Error parsing entities:",F)}return O.themes&&Array.isArray(O.themes)?O.themes.some(F=>F.toLowerCase().includes($)):O.master_themes&&Array.isArray(O.master_themes)?O.master_themes.some(F=>F.toLowerCase().includes($)):!1});s(z),n(z)},[i,t,n]);const k=z=>{const O=z.target.value;o(O)},I=()=>{b(!0)},U=()=>{b(!1)};return d.jsx(Jr,{className:`w-full transition-all duration-300 bg-transparent border-none shadow-none ${v?"fixed top-0 left-0 right-0 z-50 rounded-none":"sticky top-0 z-10"}`,children:d.jsx(au,{className:"p-1 py-1",children:d.jsxs("div",{className:"flex flex-col space-y-0.5",children:[d.jsxs("div",{className:"relative",children:[d.jsx(z3,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),d.jsx(xm,{ref:M,type:"text",placeholder:`${C} ${u}${h?"|":""}`,value:i,onChange:k,onFocus:I,onBlur:U,className:"w-full pl-9"})]}),d.jsx("div",{className:"flex flex-wrap items-center justify-end gap-1 py-0.5",children:d.jsx("div",{className:"text-xs text-muted-foreground",children:d.jsx(Q,{text:`${a.length} total ${a.length===1?"entry":"entries"}`})})})]})})})},xP=(t,e)=>{console.log(`[${e}] ${t}`)},VPe=()=>{const{user:t,ensureProfileExists:e}=or(),[n,r]=_.useState(0),[i,o]=_.useState(!1),[a,s]=_.useState([]),[l,c]=_.useState([]),[u,f]=_.useState(!1),[h,p]=_.useState("record"),[y,g]=_.useState(0),[v,b]=_.useState(0),[w,T]=_.useState(!1),[C,P]=_.useState(new Set),[M,k]=_.useState(null),[I,U]=_.useState(!1),[z,O]=_.useState(!1),[B,$]=_.useState(!1),[F,J]=_.useState(null),[K,Z]=_.useState(!1),[H,Y]=_.useState(!0),[L,N]=_.useState(0),[V,W]=_.useState(!1),[ne,se]=_.useState(3),te=_.useRef([]),ie=_.useRef(!1),pe=_.useRef(null),[de,ce]=_.useState("Page Loaded"),[he,ee]=_.useState("No Recording"),[xe,be]=_.useState(0),[Ae,Ce]=_.useState(!1),oe=_.useRef(null),ae=_.useRef(new Map),[Se,me]=_.useState(new Set),[ye,Ie]=_.useState(!1),[De,Ue]=_.useState(null),[$e,we]=_.useState([]),[fe,ke]=_.useState(!1),[Ne,qe]=_.useState(new Set),tt=_.useRef([]),ot=_.useRef(null),[St,dt]=_.useState([]),[ft,Ee]=_.useState(new Set),{entries:Ve,loading:Xe,fetchEntries:et,error:wt}=eF(t==null?void 0:t.id,n,i);_.useEffect(()=>{if(Ve&&Ve.length>0&&!fe){const le=Ve.filter(Me=>!ft.has(Me.id));we(le),tt.current=le}else if(Ve&&Ve.length>0){const le=new Set([...Ne,...ft]),Me=Ve.filter(Pe=>!le.has(Pe.id));Me.length>0&&(we(Me),tt.current=Me)}},[Ve,fe,Ne,ft]),_.useEffect(()=>{const le=ze=>{console.error("[Journal] Caught render error:",ze),Z(!0)};window.addEventListener("error",le);const Me=ze=>{if(ze.detail&&Array.isArray(ze.detail.entries)){console.log(`[Journal] Processing entries changed: ${ze.detail.entries.length} entries`);const at=ze.detail.entries.filter(it=>!Se.has(it));s(at)}},Pe=ze=>{if(ze.detail&&ze.detail.tempId&&ze.detail.entryId){if(console.log(`[Journal] Processing entry mapped: ${ze.detail.tempId} -> ${ze.detail.entryId}`),Se.has(ze.detail.tempId)){console.log(`[Journal] Skipping mapped entry as its tempId was deleted: ${ze.detail.tempId}`);return}ae.current.set(ze.detail.tempId,ze.detail.entryId),a.includes(ze.detail.tempId)&&(c(it=>[...it,ze.detail.entryId]),console.log("[Journal] Fetching new data immediately after entry mapped"),et(),we(it=>it.filter(pt=>pt.tempId!==ze.detail.tempId)),setTimeout(()=>{s(it=>it.filter(pt=>pt!==ze.detail.tempId))},3e3),It.success("Journal entry analyzed and saved",{duration:3e3,id:"journal-success-toast",closeButton:!1}),[500,1500,3e3].forEach(it=>{setTimeout(()=>{Re.current&&(console.log(`[Journal] Scheduled fetch at ${it}ms after mapping`),et(),r(pt=>pt+1))},it)}))}},Re={current:!0};return window.addEventListener("processingEntriesChanged",Me),window.addEventListener("processingEntryMapped",Pe),()=>{Re.current=!1,window.removeEventListener("error",le),window.removeEventListener("processingEntriesChanged",Me),window.removeEventListener("processingEntryMapped",Pe),oe.current&&clearTimeout(oe.current),ot.current&&clearTimeout(ot.current),Lc()}},[a,et,Se]),_.useEffect(()=>(Lc(),()=>{Lc(),M&&clearTimeout(M),oe.current&&clearTimeout(oe.current)}),[]),_.useEffect(()=>{if(!Xe&&Ve.length>0&&B){const le=setTimeout(()=>{Y(!0),p("entries"),$(!1)},300);return()=>clearTimeout(le)}},[Xe,Ve.length,B]),_.useEffect(()=>{if(Ve.length>0){const le=Ve.map(Re=>Re.id),Me=te.current,Pe=le.filter(Re=>!Me.includes(Re));if(Pe.length>0){console.log("[Journal] New entries detected:",Pe),xP(`New entries detected: ${Pe.join(", ")}`,"Journal");const Re=[];a.forEach(ze=>{const at=OE(ze);at&&Pe.includes(at)&&Re.push(ze)}),(Re.length>0||a.length>0)&&(console.log("[Journal] Found connection between new entries and processing entries:",Re),U(!0),c(at=>[...at,...Pe]),Pe.some(at=>C.has(at))||(It.success("Journal entry analyzed and saved",{duration:3e3,id:"journal-success-toast",closeButton:!1}),P(at=>{const it=new Set(at);return Pe.forEach(pt=>it.add(pt)),it})),Re.length>0&&s(at=>at.filter(it=>!Re.includes(it))),[1e3,2e3].forEach(at=>{setTimeout(()=>{console.log(`[Journal] Additional fetch at ${at}ms after new entries detected`),et(),r(it=>it+1)},at)}),$(!1),Y(!0),h==="record"&&p("entries")),Ce(!0)}te.current=le,!Ae&&Ve.length>0&&Ce(!0)}},[Ve,a,Ae,h,et,C]),_.useEffect(()=>()=>{M&&clearTimeout(M)},[M]),_.useEffect(()=>{if(t!=null&&t.id&&u&&!ie.current){const le=setTimeout(()=>{console.log("[Journal] Profile check taking too long, proceeding anyway"),xP("Profile check taking too long, proceeding anyway","Journal"),f(!1),o(!0),ie.current=!0},5e3);return k(le),()=>{clearTimeout(le),k(null)}}},[t==null?void 0:t.id,u]),_.useEffect(()=>{t!=null&&t.id&&!i&&!u&&!ie.current&&Bt(t.id)},[t==null?void 0:t.id,i,u]),_.useEffect(()=>{if(a.length>0||B){const le=setInterval(()=>{console.log("[Journal] Polling for updates while processing entries"),xP("Polling for updates while processing entries","Journal"),r(Me=>Me+1),et()},2e3);return()=>clearInterval(le)}},[a.length,et,B]),_.useEffect(()=>{if(h==="entries"){const le=a.filter(Me=>!OE(Me));le.length!==a.length&&s(le)}},[h,a]);const Bt=async le=>{try{f(!0),T(!1),ce("Checking Profile"),console.log("[Journal] Checking user profile for ID:",le);const Me=await e();if(ie.current=!0,console.log("[Journal] Profile check result:",Me),Me)ce("Profile Check Success"),N(0);else if(L<ne){N(Re=>Re+1);const Pe=1e3*Math.pow(1.5,L);oe.current&&clearTimeout(oe.current),oe.current=setTimeout(()=>{ce(`Auto Retry Profile ${L+1}`),L>=ne-1&&T(!0),Bt(le)},Pe)}else T(!0),ce("Profile Check Failed");o(!0)}catch(Me){console.error("[Journal] Error checking/creating user profile:",Me);const Pe=Date.now();if(Pe-v>6e4&&b(Pe),L<ne){N(ze=>ze+1);const Re=1e3*Math.pow(1.5,L);oe.current&&clearTimeout(oe.current),oe.current=setTimeout(()=>{ce(`Auto Retry Profile After Error ${L+1}`),L>=ne-1&&T(!0),Bt(le)},Re)}else T(!0),ce("Profile Check Error");o(!0)}finally{f(!1)}},en=()=>{t!=null&&t.id&&(N(0),ie.current=!1,o(!1),ce("Retry Profile Creation"),Bt(t.id))},Hn=()=>{console.log("Starting new recording"),p("record"),ce("Start Recording Tab"),J(null)},gr=le=>{console.log(`[Journal] Tab change requested to: ${le}. Current safeToSwitchTab: ${H}`),le==="entries"&&!H&&(console.log("[Journal] User attempting to switch to entries while processing"),It.info("Processing in progress...",{duration:2e3,closeButton:!1})),W(!0),setTimeout(()=>{le==="entries"&&!H&&(console.log("[Journal] User attempting to switch to entries while processing"),It.info("Processing in progress...",{duration:2e3,closeButton:!1})),p(le),le==="entries"&&et(),W(!1)},50)},Mn=async le=>{if(!le||!(t!=null&&t.id)){console.error("[Journal] Cannot process recording: missing audio blob or user ID"),J("Cannot process recording: missing required information"),O(!1),$(!1),ce("Recording Failed - Missing Data");return}try{console.log("[Journal] Setting processing intent immediately"),LE(!0),await new Promise(ze=>{Lc(),setTimeout(()=>{Lc(),setTimeout(()=>ze(),150)},50)}),O(!0),$(!0),J(null),ce("Recording Complete - Processing"),ee(`Processing (${Ar(le.size)})`),Y(!1),Ce(!1),window.dispatchEvent(new CustomEvent("immediateProcessingStarted",{detail:{tempId:"immediate-processing",timestamp:Date.now(),immediate:!0}})),setTimeout(()=>{p("entries")},50),console.log("[Journal] Starting processing for audio file:",le.size,"bytes");const{success:Me,tempId:Pe,error:Re}=await mMe(le,t.id);if(Me&&Pe){console.log("[Journal] Processing started with tempId:",Pe),s(it=>[...it,Pe]),ce(`Processing Started (${Pe})`),LE(!1);const ze={id:Date.now(),created_at:new Date().toISOString(),content:"Processing entry...",tempId:Pe};we(it=>[ze,...it]),ke(!0),et(),r(it=>it+1),window.dispatchEvent(new CustomEvent("processingEntriesChanged",{detail:{entries:[...a,Pe],lastUpdate:Date.now(),forceUpdate:!0}})),[1e3,2e3,3e3,5e3,8e3,1e4,15e3].forEach(it=>{setTimeout(()=>{console.log(`[Journal] Polling for entry data at ${it}ms interval`),et(),r(pt=>pt+1)},it)}),setTimeout(()=>{console.log("[Journal] Maximum processing time check for tempId:",Pe),s(it=>it.includes(Pe)?(console.log("[Journal] Maximum processing time reached for tempId:",Pe),ce(`Max Processing Time Reached (${Pe})`),It.success("Journal entry processed",{duration:3e3,closeButton:!1}),we(pt=>pt.filter(Qt=>Qt.tempId!==Pe)),et(),r(pt=>pt+1),$(!1),Y(!0),it.filter(pt=>pt!==Pe)):it)},2e4)}else console.error("[Journal] Processing failed:",Re),J(Re||"Unknown error occurred"),ce(`Processing Failed: ${Re||"Unknown"}`),LE(!1),await new Promise(ze=>setTimeout(ze,150)),It.error(`Failed to process recording: ${Re||"Unknown error"}`,{duration:3e3,closeButton:!1}),O(!1),$(!1),Y(!0),setTimeout(()=>{p("record")},100)}catch(Me){console.error("Error processing recording:",Me),J((Me==null?void 0:Me.message)||"Unknown error occurred"),ce(`Exception: ${(Me==null?void 0:Me.message)||"Unknown"}`),LE(!1),Lc(),await new Promise(Pe=>setTimeout(Pe,150)),It.error("Error processing your recording",{duration:3e3,closeButton:!1}),O(!1),$(!1),Y(!0),setTimeout(()=>{p("record")},100)}},Jt=_.useCallback(async le=>{if(!(!(t!=null&&t.id)||ye))try{console.log(`[Journal] Deleting entry ${le}`),ce(`Deleting Entry ${le}`),Ue(le),Ie(!0),Lc();const Me=[];a.forEach(at=>{OE(at)===le&&Me.push(at)}),ae.current.forEach((at,it)=>{at===le&&!Me.includes(it)&&Me.push(it)}),Me.length>0&&(console.log("[Journal] Marking processing entries as deleted:",Me),me(at=>{const it=new Set(at);return Me.forEach(pt=>it.add(pt)),it})),yMe(le);const Pe=a.filter(at=>!Me.includes(at)&&OE(at)!==le);s(Pe),P(at=>{const it=new Set(at);return it.delete(le),it}),we(at=>{const it=at.filter(pt=>pt.id!==le);return console.log(`[Journal] Locally filtered entries: ${it.length} (removed entry ${le})`),it}),qe(at=>{const it=new Set(at);return it.add(le),it}),Ee(at=>{const it=new Set(at);return it.add(le),it}),ke(!0);const{error:Re}=await Ze.from("Journal Entries").delete().eq("id",le);if(Re)throw console.error("[Journal] Database error while deleting entry:",Re),new Error(`Database error: ${Re.message}`);console.log(`[Journal] Entry ${le} successfully deleted from database`),window.dispatchEvent(new CustomEvent("journalEntriesNeedRefresh",{detail:{action:"delete",entryId:le,timestamp:Date.now()}}));const ze=[300,1e3,2500];ze.forEach((at,it)=>{setTimeout(()=>{it===ze.length-1&&(qe(pt=>{const Qt=new Set(pt);return Qt.delete(le),Qt}),ke(!1)),r(pt=>pt+1),it===0&&et()},at)}),It.success("Entry successfully deleted",{duration:3e3,id:"delete-success-toast",closeButton:!1})}catch(Me){throw console.error("[Journal] Error deleting entry:",Me),ce(`Delete Entry Error (${le})`),It.error("Failed to delete entry"),fe&&(we(Ve),qe(Pe=>{const Re=new Set(Pe);return Re.delete(le),Re}),Ee(Pe=>{const Re=new Set(Pe);return Re.delete(le),Re}),ke(!1)),Me}finally{Ie(!1),Ue(null)}},[t==null?void 0:t.id,a,et,Ve,fe,ye]),fn=_.useCallback(()=>{Z(!1),J(null),p("entries"),r(Date.now()),ce("Reset Error State"),Y(!0),setTimeout(()=>{et()},100)},[et]),Ar=(le,Me=2)=>{if(le===0)return"0 Bytes";const Pe=1024,Re=Me<0?0:Me,ze=["Bytes","KB","MB","GB"],at=Math.floor(Math.log(le)/Math.log(Pe));return parseFloat((le/Math.pow(Pe,at)).toFixed(Re))+" "+ze[at]},gn=le=>{ee(le.status),le.duration!==void 0&&be(le.duration),ce(`Recorder: ${le.status}`)};_.useEffect(()=>{const le=Pe=>{Pe.detail&&Pe.detail.entryId&&(console.log(`[Journal] Entry updated event detected for ID: ${Pe.detail.entryId}, refreshing data`),r(Re=>Re+1),et())},Me=Pe=>{if(Pe.detail&&Pe.detail.entryId){const Re=Number(Pe.detail.entryId);console.log(`[Journal] Entry deletion event detected for ID: ${Re}`),Ee(ze=>{const at=new Set(ze);return at.add(Re),at})}};return window.addEventListener("journalEntryUpdated",le),window.addEventListener("journalEntryDeleted",Me),()=>{window.removeEventListener("journalEntryUpdated",le),window.removeEventListener("journalEntryDeleted",Me)}},[et]);const un=le=>{dt(le)},ln=fe?$e:Ve&&Ve.length>0?Ve.filter(le=>!ft.has(le.id)):tt.current.length>0?tt.current.filter(le=>!ft.has(le.id)):[];ln.length===0&&tt.current.length;const Nn=Xe&&ln.length===0&&!fe,Zt=St.length>0&&ln.length>0?St.map(le=>({...le,content:le.content||le["refined text"]||le["transcription text"]||""})):ln.map(le=>({...le,content:le.content||le["refined text"]||le["transcription text"]||""}));return K&&(console.error("[Journal] Recovering from render error"),Z(!1),ce("Recovering from Render Error")),d.jsx(Ly,{onReset:fn,children:d.jsxs("div",{className:"max-w-3xl mx-auto px-4 pt-4 pb-24",children:[d.jsx(FPe,{}),u?d.jsx("div",{className:"min-h-screen flex items-center justify-center",children:d.jsxs("div",{className:"flex flex-col items-center gap-3",children:[d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mb-4"}),d.jsx("p",{className:"text-muted-foreground",children:"Setting up your profile..."})]})}):wt&&!Xe?d.jsx(d.Fragment,{children:d.jsx("div",{className:"mt-8 p-4 border border-red-200 bg-red-50 dark:bg-red-900/20 dark:border-red-800 rounded-lg",children:d.jsxs("div",{className:"flex flex-col gap-3",children:[d.jsxs("div",{className:"flex items-start gap-2",children:[d.jsx(zM,{className:"w-5 h-5 text-red-600 shrink-0 mt-0.5"}),d.jsxs("p",{className:"text-red-800 dark:text-red-200",children:["Error loading your journal entries: ",wt]})]}),d.jsxs(ct,{variant:"outline",className:"w-full sm:w-auto border-red-500 text-red-700 hover:bg-red-100 dark:text-red-300 dark:hover:bg-red-900/40",onClick:()=>{r(le=>le+1),et()},children:[d.jsx(Qu,{className:"w-4 h-4 mr-2"}),"Retry Loading"]})]})})}):d.jsxs(d.Fragment,{children:[w&&d.jsx("div",{className:"mb-6 p-4 border border-amber-200 bg-amber-50 dark:bg-amber-900/20 dark:border-amber-800 rounded-lg",children:d.jsxs("div",{className:"flex flex-col gap-3",children:[d.jsxs("div",{className:"flex items-start gap-2",children:[d.jsx(zM,{className:"w-5 h-5 text-amber-600 shrink-0 mt-0.5"}),d.jsx("p",{className:"text-amber-800 dark:text-amber-200",children:"We're having trouble setting up your profile. Your entries may not be saved correctly."})]}),d.jsxs(ct,{variant:"outline",className:"w-full sm:w-auto border-amber-500 text-amber-700 hover:bg-amber-100 dark:text-amber-300 dark:hover:bg-amber-900/40",onClick:en,children:[d.jsx(Qu,{className:"w-4 h-4 mr-2"}),"Retry Profile Setup"]})]})}),F&&d.jsx("div",{className:"mb-6 p-4 border border-red-200 bg-red-50 dark:bg-red-900/20 dark:border-red-800 rounded-lg",children:d.jsxs("div",{className:"flex flex-col gap-3",children:[d.jsxs("div",{className:"flex items-start gap-2",children:[d.jsx(zM,{className:"w-5 h-5 text-red-600 shrink-0 mt-0.5"}),d.jsxs("p",{className:"text-red-800 dark:text-red-200",children:["Error processing your recording: ",F]})]}),d.jsxs(ct,{variant:"outline",className:"w-full sm:w-auto border-red-500 text-red-700 hover:bg-red-100 dark:text-red-300 dark:hover:bg-red-900/40",onClick:()=>{J(null),p("record")},children:[d.jsx(Qu,{className:"w-4 h-4 mr-2"}),"Try Again"]})]})}),d.jsxs($Pe,{defaultValue:h,value:h,onValueChange:gr,className:"mt-6",children:[d.jsxs(Xne,{className:"grid w-full grid-cols-2 mb-6",children:[d.jsx(KO,{value:"record",className:"tutorial-record-entry-button record-entry-tab","data-tutorial-target":"record-entry",id:"new-entry-button",children:d.jsx(Q,{text:"Record Entry"})}),d.jsx(KO,{value:"entries",className:"entries-tab","data-tutorial-target":"past-entries",id:"past-entries-button",children:d.jsx(Q,{text:"Past Entries"})})]}),d.jsx(JO,{value:"record",className:"mt-0",children:d.jsx("div",{className:"mb-4",children:d.jsx(DPe,{onRecordingComplete:Mn,updateDebugInfo:gn})})}),d.jsx(JO,{value:"entries",className:"mt-0",ref:pe,children:d.jsxs(Ly,{children:[d.jsx(HPe,{entries:ln,onSelectEntry:()=>{},onSearchResults:un}),d.jsx(sPe,{entries:Zt,loading:Nn,processingEntries:a,processedEntryIds:l,onStartRecording:Hn,onDeleteEntry:Jt,isSavingRecording:B})]})})]})]})]})})},WPe=5*60*1e3,GPe=3,qPe=(t,e,n)=>{const[r,i]=_.useState(null),[o,a]=_.useState(!0),[s,l]=_.useState(!1),c=_.useMemo(()=>{const g=new Date,v=O1(K4(g,GPe-1)),b=VCe(g);return{start:v,end:b}},[]),u=_.useCallback(g=>{if(!g)return!1;const b=Date.now()-g.cacheTimestamp<WPe,w=g.cacheRange.start.getTime()===c.start.getTime()&&g.cacheRange.end.getTime()===c.end.getTime();return b&&w},[c]),f=_.useCallback(async(g=!1)=>{if(!t){a(!1);return}if(!g&&u(r)){a(!1);return}try{g?l(!0):a(!0),console.log(`[useInsightsCacheData] Fetching 3-month cache for user ${t}:`,{start:c.start.toISOString(),end:c.end.toISOString()});const{data:v,error:b}=await Ze.from("Journal Entries").select("*").eq("user_id",t).order("created_at",{ascending:!1});if(b)throw console.error("Error fetching all journal entries:",b),b;const w=(v==null?void 0:v.filter(P=>{if(!P.created_at)return!1;const M=new Date(P.created_at);return HAe(M,c)}))||[];console.log(`[useInsightsCacheData] Cached ${w.length} entries out of ${(v==null?void 0:v.length)||0} total`);const T=(v==null?void 0:v.map(P=>{if(P.emotions&&typeof P.emotions=="string")try{P.emotions=JSON.parse(P.emotions)}catch(M){console.error("Error parsing emotions JSON string:",M)}if((!P.sentiment||P.sentiment==="0")&&P.emotions)try{const M=typeof P.emotions=="string"?JSON.parse(P.emotions):P.emotions;if(M&&typeof M=="object"){let k=0,I=0;if(Array.isArray(M.emotions)?M.emotions.forEach(U=>{if(U&&U.name&&U.intensity){const z=["sad","angry","anxious","fearful","stressed","disappointed","frustrated"],O=U.name.toLowerCase(),B=z.includes(O)?-1:1;k+=U.intensity*B,I++}}):Object.entries(M).forEach(([U,z])=>{if(U.toLowerCase()==="id"||U.toLowerCase()==="intensity"||U.toLowerCase()==="name"||/^\d+$/.test(U)||U.length<2)return;const O=Number(z);if(!isNaN(O)){const $=["sad","angry","anxious","fearful","stressed","disappointed","frustrated"].includes(U.toLowerCase())?-1:1;k+=O*$,I++}}),I>0){let U=k/(I*2);U>1&&(U=1),U<-1&&(U=-1),P.sentiment=U.toString()}}}catch(M){console.error("Error processing emotions for sentiment:",M)}return P}))||[],C={entries:w,allEntries:T,cacheTimestamp:Date.now(),cacheRange:c};i(C),console.log("[useInsightsCacheData] Cache updated successfully")}catch(v){console.error("Error fetching cached insights data:",v)}finally{a(!1),l(!1)}},[t,c,u,r]),h=_.useMemo(()=>{if(!r)return{entries:[],allEntries:[],dominantMood:null,biggestImprovement:null,journalActivity:{entryCount:0,streak:0,maxStreak:0},aggregatedEmotionData:{}};const g=new Date,{startDate:v,endDate:b}=x8(e,g),w=r.entries.filter(T=>{if(!T.created_at)return!1;const C=new Date(T.created_at);return C>=v&&C<=b});return{entries:w,allEntries:r.allEntries,dominantMood:w8(w),biggestImprovement:b8(r.allEntries,w),journalActivity:_8(w,e),aggregatedEmotionData:T8(w)}},[r,e]),p=_.useMemo(()=>{if(!r)return{entries:[],allEntries:[],dominantMood:null,biggestImprovement:null,journalActivity:{entryCount:0,streak:0,maxStreak:0},aggregatedEmotionData:{}};const g=n||new Date,{startDate:v,endDate:b}=x8(e,g),w=r.entries.filter(T=>{if(!T.created_at)return!1;const C=new Date(T.created_at);return C>=v&&C<=b});return{entries:w,allEntries:r.allEntries,dominantMood:w8(w),biggestImprovement:b8(r.allEntries,w),journalActivity:_8(w,e),aggregatedEmotionData:T8(w)}},[r,e,n]);_.useEffect(()=>{f()},[f]);const y=_.useCallback(()=>{f(!0)},[f]);return{statsInsightsData:h,chartInsightsData:p,loading:o,refreshing:s,refreshCache:y,isCacheHit:!!(r&&u(r))}},x8=(t,e=new Date)=>{let n,r;switch(t){case"today":n=new Date(e),n.setHours(0,0,0,0),r=new Date(e),r.setHours(23,59,59,999);break;case"week":n=new Date(e),n.setDate(e.getDate()-e.getDay()+1),n.setHours(0,0,0,0),r=new Date(n),r.setDate(n.getDate()+6),r.setHours(23,59,59,999);break;case"month":n=new Date(e.getFullYear(),e.getMonth(),1),r=new Date(e.getFullYear(),e.getMonth()+1,0,23,59,59,999);break;case"year":n=new Date(e.getFullYear(),0,1),r=new Date(e.getFullYear(),11,31,23,59,59,999);break;default:n=new Date(e),n.setDate(e.getDate()-e.getDay()+1),n.setHours(0,0,0,0),r=new Date(n),r.setDate(n.getDate()+6),r.setHours(23,59,59,999)}return{startDate:n,endDate:r}},w8=t=>{if(!t||t.length===0)return null;const e={};t.forEach(o=>{if(o.emotions)try{let a={};if(typeof o.emotions=="string"){const s=JSON.parse(o.emotions);Array.isArray(s.emotions)?s.emotions.sort((c,u)=>u.intensity-c.intensity).slice(0,5).forEach(c=>{c&&c.name&&c.intensity&&(a[c.name.toLowerCase()]=c.intensity)}):a=s}else o.emotions&&typeof o.emotions=="object"&&(Array.isArray(o.emotions.emotions)?o.emotions.emotions.sort((l,c)=>c.intensity-l.intensity).slice(0,5).forEach(l=>{l&&l.name&&l.intensity&&(a[l.name.toLowerCase()]=l.intensity)}):a=o.emotions);Object.entries(a).forEach(([s,l])=>{const c=s.toLowerCase();e[c]||(e[c]={count:0,score:0}),e[c].count+=1,e[c].score+=Number(l)})}catch(a){console.error("Error processing emotions:",a)}});let n="",r=0;return Object.entries(e).forEach(([o,a])=>{a.score>r&&(n=o,r=a.score)}),n?(n=n.charAt(0).toUpperCase()+n.slice(1),{emotion:n,emoji:{happy:"",sad:"",angry:"",fearful:"",disgusted:"",surprised:"",joy:"",love:"",content:"",peaceful:"",anxious:"",stressed:"",tired:"",excited:"",hopeful:"",grateful:"",satisfaction:""}[n.toLowerCase()]||"",score:r}):null},b8=(t,e,n)=>{if(!t||t.length===0||!e||e.length===0)return null;const r=[...e].sort((a,s)=>new Date(a.created_at).getTime()-new Date(s.created_at).getTime()),i=new Date(Math.min(...e.map(a=>new Date(a.created_at).getTime()))),o=t.filter(a=>new Date(a.created_at)<i);if(o.length===0){if(r.length<4)return{emotion:r.length>0?"Peaceful":"Content",percentage:24};const a=Math.floor(r.length/2),s=r.slice(0,a),l=r.slice(a);return S8(s,l)}return S8(o,r)};function S8(t,e){const n={},r={};for(const o of t)if(o.emotions)try{const a=typeof o.emotions=="string"?JSON.parse(o.emotions):o.emotions;E8(a,n)}catch(a){console.error("Error parsing emotions for previous entries:",a)}for(const o of e)if(o.emotions)try{const a=typeof o.emotions=="string"?JSON.parse(o.emotions):o.emotions;E8(a,r)}catch(a){console.error("Error parsing emotions for current entries:",a)}const i=[];return Object.keys({...n,...r}).forEach(o=>{const a=n[o]?n[o].total/n[o].count:0,s=r[o]?r[o].total/r[o].count:0;if(a===0&&s===0)return;let l=0;a===0&&s>0?l=100:a>0&&(l=(s-a)/a*100);const c=o.charAt(0).toUpperCase()+o.slice(1);i.push({emotion:c,percentage:Math.round(l)})}),i.sort((o,a)=>Math.abs(a.percentage)-Math.abs(o.percentage)),i.length>0?i[0]:{emotion:"Peaceful",percentage:24}}function E8(t,e){if(!(!t||typeof t!="object")){if(Array.isArray(t.emotions)){t.emotions.forEach(n=>{if(n&&n.name&&n.intensity){const r=n.name.toLowerCase();e[r]||(e[r]={total:0,count:0}),e[r].total+=n.intensity,e[r].count+=1}});return}Object.entries(t).forEach(([n,r])=>{if(n.toLowerCase()==="id"||n.toLowerCase()==="intensity"||n.toLowerCase()==="name"||/^\d+$/.test(n)||n.length<2)return;const i=Number(r);if(!isNaN(i)){const o=n.toLowerCase();e[o]||(e[o]={total:0,count:0}),e[o].total+=i,e[o].count+=1}})}}const _8=(t,e)=>{const n=t.length;if(e==="today")return{entryCount:n,streak:n,maxStreak:n};const r=[...t].sort((l,c)=>new Date(l.created_at).getTime()-new Date(c.created_at).getTime()),i=new Map;r.forEach(l=>{const c=ir(new Date(l.created_at),"yyyy-MM-dd");i.set(c,(i.get(c)||0)+1)});const o=Array.from(i.keys()).sort();if(o.length===0)return{entryCount:0,streak:0,maxStreak:0};let a=1,s=1;for(let l=1;l<o.length;l++){const c=new Date(o[l]),u=new Date(o[l-1]),f=c.getTime()-u.getTime(),h=Math.round(f/(1e3*3600*24));h===1?(a++,s=Math.max(s,a)):h>1&&(a=1)}return{entryCount:n,streak:Math.min(a,7),maxStreak:s}},T8=(t,e)=>{const n={},r=new Map;return t.forEach(i=>{const o=ir(new Date(i.created_at),"yyyy-MM-dd");if(i.emotions)try{let a={};if(typeof i.emotions=="string"){const s=JSON.parse(i.emotions);Array.isArray(s.emotions)?s.emotions.sort((c,u)=>u.intensity-c.intensity).slice(0,5).forEach(c=>{c&&c.name&&c.intensity&&(a[c.name.toLowerCase()]=c.intensity)}):a=s}else i.emotions&&typeof i.emotions=="object"&&(Array.isArray(i.emotions.emotions)?i.emotions.emotions.sort((l,c)=>c.intensity-l.intensity).slice(0,5).forEach(l=>{l&&l.name&&l.intensity&&(a[l.name.toLowerCase()]=l.intensity)}):a=i.emotions);Object.entries(a).forEach(([s,l])=>{const c=s.charAt(0).toUpperCase()+s.slice(1);n[c]||(n[c]=[]),r.has(o)||r.set(o,new Map);const u=r.get(o);u.has(c)||u.set(c,0),u.set(c,u.get(c)+1);const f=n[c].find(h=>h.date===o);f?f.value+=Number(l):n[c].push({date:o,value:Number(l),emotion:c})})}catch(a){console.error("Error processing emotions:",a)}}),Object.entries(n).forEach(([i,o])=>{o.forEach(a=>{const s=r.get(a.date);if(s&&s.has(i)){const l=s.get(i);l>1&&(a.value=a.value/l,a.value>1&&(a.value=1))}})}),n};let Kne=class extends _.Component{constructor(n){super(n);Mt(this,"retryTimeoutRef",null);Mt(this,"handleRetry",()=>{this.setState({hasError:!1,error:null,isDOMError:!1})});this.state={hasError:!1,error:null,isDOMError:!1}}static getDerivedStateFromError(n){const r=n.message.includes("removeChild")||n.message.includes("appendChild")||n.message.includes("insertBefore")||n.message.includes("replaceChild")||n.message.includes("Node was not found")||n.message.includes("Cannot read properties of null");return{hasError:!0,error:n,isDOMError:r}}componentDidCatch(n,r){console.error("ErrorBoundary caught error:",n,r),this.props.onError&&this.props.onError(n,r),this.state.isDOMError&&(console.log("DOM error detected, attempting recovery..."),this.retryTimeoutRef=setTimeout(()=>{this.setState({hasError:!1,error:null,isDOMError:!1})},1e3))}componentWillUnmount(){this.retryTimeoutRef&&clearTimeout(this.retryTimeoutRef)}render(){var n;return this.state.hasError?this.state.isDOMError?this.props.fallback||d.jsxs("div",{className:"p-4 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg max-w-md mx-auto my-4",children:[d.jsx("h3",{className:"text-lg font-medium text-yellow-800 dark:text-yellow-300 mb-2",children:"Temporary Display Issue"}),d.jsx("p",{className:"text-yellow-700 dark:text-yellow-400 mb-3",children:"The interface encountered a temporary issue. This usually resolves automatically."}),d.jsx("button",{className:"px-4 py-2 bg-yellow-600 text-white rounded hover:bg-yellow-700 transition-colors",onClick:this.handleRetry,children:"Refresh View"})]}):this.props.fallback||d.jsxs("div",{className:"p-6 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg max-w-3xl mx-auto my-8",children:[d.jsx("h2",{className:"text-xl font-semibold text-red-800 dark:text-red-300 mb-2",children:"Something went wrong"}),d.jsxs("details",{className:"bg-white dark:bg-gray-800 p-4 rounded-md",children:[d.jsx("summary",{className:"cursor-pointer font-medium mb-2",children:"Error details"}),d.jsx("pre",{className:"text-sm overflow-auto p-2 bg-gray-100 dark:bg-gray-900 rounded",children:(n=this.state.error)==null?void 0:n.toString()})]}),d.jsxs("div",{className:"mt-4 space-x-2",children:[d.jsx("button",{className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 transition-colors",onClick:this.handleRetry,children:"Try Again"}),d.jsx("button",{className:"px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700 transition-colors",onClick:()=>window.location.reload(),children:"Reload Page"})]})]}):this.props.children}};function YPe(t,e=[]){let n=[];function r(o,a){const s=_.createContext(a),l=n.length;n=[...n,a];function c(f){const{scope:h,children:p,...y}=f,g=(h==null?void 0:h[t][l])||s,v=_.useMemo(()=>y,Object.values(y));return d.jsx(g.Provider,{value:v,children:p})}function u(f,h){const p=(h==null?void 0:h[t][l])||s,y=_.useContext(p);if(y)return y;if(a!==void 0)return a;throw new Error(`\`${f}\` must be used within \`${o}\``)}return c.displayName=o+"Provider",[c,u]}const i=()=>{const o=n.map(a=>_.createContext(a));return function(s){const l=(s==null?void 0:s[t])||o;return _.useMemo(()=>({[`__scope${t}`]:{...s,[t]:l}}),[s,l])}};return i.scopeName=t,[r,XPe(i,...e)]}function XPe(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(o){const a=r.reduce((s,{useScope:l,scopeName:c})=>{const f=l(o)[`__scope${c}`];return{...s,...f}},{});return _.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return n.scopeName=e.scopeName,n}var mF="Progress",gF=100,[KPe,Eot]=YPe(mF),[JPe,ZPe]=KPe(mF),Jne=_.forwardRef((t,e)=>{const{__scopeProgress:n,value:r=null,max:i,getValueLabel:o=QPe,...a}=t;(i||i===0)&&!C8(i)&&console.error(eke(`${i}`,"Progress"));const s=C8(i)?i:gF;r!==null&&!A8(r,s)&&console.error(tke(`${r}`,"Progress"));const l=A8(r,s)?r:null,c=IT(l)?o(l,s):void 0;return d.jsx(JPe,{scope:n,value:l,max:s,children:d.jsx(At.div,{"aria-valuemax":s,"aria-valuemin":0,"aria-valuenow":IT(l)?l:void 0,"aria-valuetext":c,role:"progressbar","data-state":ere(l,s),"data-value":l??void 0,"data-max":s,...a,ref:e})})});Jne.displayName=mF;var Zne="ProgressIndicator",Qne=_.forwardRef((t,e)=>{const{__scopeProgress:n,...r}=t,i=ZPe(Zne,n);return d.jsx(At.div,{"data-state":ere(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...r,ref:e})});Qne.displayName=Zne;function QPe(t,e){return`${Math.round(t/e*100)}%`}function ere(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function IT(t){return typeof t=="number"}function C8(t){return IT(t)&&!isNaN(t)&&t>0}function A8(t,e){return IT(t)&&!isNaN(t)&&t<=e&&t>=0}function eke(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${gF}\`.`}function tke(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${gF} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var tre=Jne,nke=Qne;const yF=_.forwardRef(({className:t,value:e,...n},r)=>d.jsx(tre,{ref:r,className:He("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...n,children:d.jsx(nke,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));yF.displayName=tre.displayName;const rke=({className:t})=>{const{isTranslating:e,progress:n}=vne(),{currentLanguage:r}=In();return r==="en"||!e?null:d.jsx("div",{className:He("fixed top-0 left-0 right-0 z-50 bg-background/95 backdrop-blur-sm border-b",t),children:d.jsx("div",{className:"px-4 py-2",children:d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("span",{className:"text-xs text-muted-foreground flex-shrink-0",children:"Translating page..."}),d.jsx(yF,{value:n,className:"flex-1 h-1.5"}),d.jsxs("span",{className:"text-xs text-muted-foreground flex-shrink-0",children:[Math.round(n),"%"]})]})})})};class ike{constructor(){Mt(this,"lastErrorTime",0);Mt(this,"errorCooldown",1e4);Mt(this,"shownErrors",new Set)}handleError(e,n="subscription"){const r=this.categorizeError(e),i=`${r.type}-${r.code||"unknown"}`,o=Date.now(),a=this.shouldShowError(i,o);return a&&!r.silent&&(this.showErrorNotification(r,n),this.lastErrorTime=o,this.shownErrors.add(i)),console.warn(`[${n}] Subscription error:`,{type:r.type,message:r.message,code:r.code,originalError:e,shown:a}),r}categorizeError(e){var n,r,i,o,a,s,l,c;return(n=e==null?void 0:e.message)!=null&&n.includes("fetch")||(r=e==null?void 0:e.message)!=null&&r.includes("network")||(e==null?void 0:e.code)==="NETWORK_ERROR"?{type:"network",message:"Unable to check subscription status due to network issues",code:"NETWORK_ERROR",silent:!0}:(i=e==null?void 0:e.message)!=null&&i.includes("auth")||(o=e==null?void 0:e.message)!=null&&o.includes("401")||(e==null?void 0:e.code)==="UNAUTHORIZED"?{type:"authentication",message:"Authentication required to check subscription",code:"AUTH_ERROR",silent:!0}:(a=e==null?void 0:e.message)!=null&&a.includes("permission")||(s=e==null?void 0:e.message)!=null&&s.includes("403")||(e==null?void 0:e.code)==="FORBIDDEN"?{type:"permission",message:"Permission denied accessing subscription data",code:"PERMISSION_ERROR",silent:!0}:(l=e==null?void 0:e.message)!=null&&l.includes("RevenueCat")||(c=e==null?void 0:e.message)!=null&&c.includes("purchases")?{type:"unknown",message:"Subscription service temporarily unavailable",code:"REVENUECAT_ERROR",silent:!0}:{type:"unknown",message:(e==null?void 0:e.message)||"An unexpected error occurred with subscription service",code:"UNKNOWN_ERROR",silent:!0}}shouldShowError(e,n){return!(this.shownErrors.has(e)||n-this.lastErrorTime<this.errorCooldown)}showErrorNotification(e,n){It.error(`${n}: ${e.message}`,{duration:5e3,description:e.code?`Error code: ${e.code}`:void 0})}reset(){this.shownErrors.clear(),this.lastErrorTime=0}shouldIgnoreError(e){const n=JSON.stringify(e).toLowerCase();return!!(n.includes("revenuecat")||n.includes("purchases")||n.includes("fetch")||n.includes("network"))}}const M8=new ike,nre=_.createContext(void 0),oke=({children:t})=>{const{user:e}=or(),[n,r]=_.useState("free"),[i,o]=_.useState("unknown"),[a,s]=_.useState(!0),[l,c]=_.useState(null),[u,f]=_.useState(!1),[h,p]=_.useState(null),[y,g]=_.useState(!1),v=async()=>{if(!e){r("free"),o("unknown"),s(!1),c(null),f(!0),p(null),g(!1);return}try{s(!0),c(null),console.log("[SubscriptionContext] Fetching subscription data for user:",e.id);const{error:I}=await Ze.rpc("cleanup_expired_trials");I&&console.warn("[SubscriptionContext] Cleanup function error:",I);const{data:U,error:z}=await Ze.rpc("get_user_subscription_status",{user_id_param:e.id});if(z)throw z;if(U&&U.length>0){const O=U[0],B=O.current_tier==="premium"?"premium":"free",$=O.current_status||"free",F=O.trial_end_date?new Date(O.trial_end_date):null,J=O.is_trial_active||!1;r(B),o($),p(F),console.log("[SubscriptionContext] Updated subscription from function:",{tier:B,status:$,trialEndDate:F,isTrialActive:J,isPremium:O.is_premium_access})}else{const{data:O,error:B}=await Ze.from("profiles").select("subscription_tier, subscription_status, trial_ends_at, is_premium").eq("id",e.id).maybeSingle();if(B)throw B;if(O){const $=O.subscription_tier==="premium"?"premium":"free",F=O.subscription_status||"free",J=O.trial_ends_at?new Date(O.trial_ends_at):null;r($),o(F),p(J),console.log("[SubscriptionContext] Updated subscription from fallback:",{tier:$,status:F,trialEndDate:J,isPremium:O.is_premium})}else r("free"),o("free"),p(null),console.log("[SubscriptionContext] No profile found, defaulting to free tier")}if(e.id){const{data:O,error:B}=await Ze.rpc("is_trial_eligible",{user_id_param:e.id});!B&&O!==null&&g(O)}}catch(I){console.error("[SubscriptionContext] Error fetching subscription:",I);const U=M8.handleError(I,"Subscription");!U.silent&&U.type!=="network"&&c(U.message),r("free"),o("free"),p(null),g(!1)}finally{s(!1),f(!0)}},b=async()=>{await v()},w=async()=>{await v()};_.useEffect(()=>{v(),e&&M8.reset()},[e]);const T=n==="premium",C=i==="trial"&&h&&h>new Date,P=i==="active"||C,M=h&&C?Math.max(0,Math.ceil((h.getTime()-new Date().getTime())/(1e3*60*60*24))):0,k={tier:n,status:i,isLoading:a,error:l,refreshSubscription:b,isPremium:T,hasActiveSubscription:P,isTrialActive:C,trialEndDate:h,daysRemainingInTrial:M,subscriptionStatus:i,refreshSubscriptionStatus:w,hasInitialLoadCompleted:u,isTrialEligible:y};return d.jsx(nre.Provider,{value:k,children:t})},H1=()=>{const t=_.useContext(nre);if(t===void 0)throw new Error("useSubscription must be used within a SubscriptionProvider");return t},P8={premium_monthly_in:{identifier:"premium_monthly_in",description:"Premium features with 7-day free trial",title:"Soulo Premium Monthly (India)",price:99,priceString:"99",currencyCode:"INR",region:"India"},premium_monthly_us:{identifier:"premium_monthly_us",description:"Premium features with 7-day free trial",title:"Soulo Premium Monthly (US)",price:4.99,priceString:"$4.99",currencyCode:"USD",region:"United States"},premium_monthly_gb:{identifier:"premium_monthly_gb",description:"Premium features with 7-day free trial",title:"Soulo Premium Monthly (UK)",price:3.99,priceString:"3.99",currencyCode:"GBP",region:"United Kingdom"},premium_monthly_default:{identifier:"premium_monthly_default",description:"Premium features with 7-day free trial",title:"Soulo Premium Monthly",price:4.99,priceString:"$4.99",currencyCode:"USD",region:"Global"}};class ake{constructor(){Mt(this,"isInitialized",!1);Mt(this,"currentUserId",null);Mt(this,"initializationAttempts",0);Mt(this,"maxInitializationAttempts",3)}async initialize(e){try{if(console.log("[RevenueCatService] Initializing RevenueCat for user:",e),this.currentUserId!==e&&(this.initializationAttempts=0),this.initializationAttempts++,this.initializationAttempts>this.maxInitializationAttempts){console.warn("[RevenueCatService] Max initialization attempts reached, using fallback mode"),this.isInitialized=!0,this.currentUserId=e;return}this.currentUserId=e,await Promise.race([this.createOrUpdateCustomer(e),new Promise((n,r)=>setTimeout(()=>r(new Error("Customer creation timeout")),5e3))]),this.isInitialized=!0,console.log("[RevenueCatService] RevenueCat initialized successfully")}catch(n){if(console.error("[RevenueCatService] Failed to initialize RevenueCat:",n),this.isInitialized=!0,this.currentUserId=e,this.initializationAttempts<=1)throw n}}async createOrUpdateCustomer(e){try{console.log("[RevenueCatService] Creating/updating customer for user:",e);const{error:n}=await Ze.from("profiles").select("id").limit(1);if(n)throw console.error("[RevenueCatService] Database connectivity test failed:",n),new Error(`Database connection failed: ${n.message}`);const{data:r,error:i}=await Ze.from("revenuecat_customers").select("*").eq("user_id",e).maybeSingle();if(i){console.error("[RevenueCatService] Error fetching existing customer:",i);return}if(r)console.log("[RevenueCatService] Customer already exists");else{const{error:o}=await Ze.from("revenuecat_customers").insert({user_id:e,revenuecat_user_id:e,revenuecat_app_user_id:e});if(o){console.error("[RevenueCatService] Error creating RevenueCat customer:",o);return}console.log("[RevenueCatService] Customer created successfully")}}catch(n){console.error("[RevenueCatService] Error in createOrUpdateCustomer:",n)}}async getProducts(){return this.isInitialized?(console.log("[RevenueCatService] Fetching products..."),Object.values(P8)):(console.warn("[RevenueCatService] Service not initialized, returning empty products"),[])}async getProductByRegion(e){const n=await this.getProducts();return n.find(r=>r.region===e)||n.find(r=>r.identifier==="premium_monthly_default")||null}async purchaseProduct(e){if(!this.isInitialized||!this.currentUserId)throw new Error("RevenueCat not initialized or user not set");try{console.log("[RevenueCatService] Attempting to purchase product:",e);const n=P8[e];if(!n)throw new Error(`Product ${e} not found`);const r={transactionIdentifier:`trial_${Date.now()}`,productIdentifier:e,purchaseDate:new Date().toISOString()},i=new Date;i.setDate(i.getDate()+7);const{data:o}=await Ze.from("revenuecat_customers").select("id").eq("user_id",this.currentUserId).maybeSingle();if(o){const{error:a}=await Ze.from("revenuecat_subscriptions").insert({customer_id:o.id,revenuecat_subscription_id:r.transactionIdentifier,product_id:e,status:"in_trial",period_type:"trial",purchase_date:r.purchaseDate,original_purchase_date:r.purchaseDate,expires_date:i.toISOString(),is_sandbox:!0,auto_renew_status:!0,price_in_purchased_currency:0,currency:n.currencyCode});if(a)throw console.error("[RevenueCatService] Error creating subscription:",a),a;const{error:s}=await Ze.from("profiles").update({is_premium:!0,trial_ends_at:i.toISOString(),subscription_status:"trial",updated_at:new Date().toISOString()}).eq("id",this.currentUserId);s&&console.error("[RevenueCatService] Error updating profile:",s)}return console.log("[RevenueCatService] Purchase completed successfully:",r),r}catch(n){throw console.error("[RevenueCatService] Error purchasing product:",n),n}}async restorePurchases(){if(!this.isInitialized||!this.currentUserId)return console.warn("[RevenueCatService] Service not initialized, cannot restore purchases"),null;try{const{data:e,error:n}=await Ze.from("revenuecat_subscriptions").select(`
          *,
          revenuecat_customers!inner (
            user_id,
            revenuecat_user_id
          )
        `).eq("revenuecat_customers.user_id",this.currentUserId);if(n)return console.error("[RevenueCatService] Error fetching subscriptions:",n),null;if(!e||e.length===0)return null;const r=[],i={},o={};return e.forEach(a=>{(a.status==="active"||a.status==="in_trial")&&r.push(a.product_id),a.expires_date&&(i[a.product_id]=a.expires_date),o[a.product_id]={identifier:a.product_id,isActive:a.status==="active"||a.status==="in_trial",willRenew:a.auto_renew_status||!1,periodType:a.period_type==="trial"?"TRIAL":"NORMAL",latestPurchaseDate:a.purchase_date||a.created_at,originalPurchaseDate:a.original_purchase_date||a.created_at,expirationDate:a.expires_date||void 0,store:"play_store",productIdentifier:a.product_id,isSandbox:a.is_sandbox||!1,unsubscribeDetectedAt:a.unsubscribe_detected_at||void 0,billingIssueDetectedAt:a.billing_issues_detected_at||void 0}}),{originalAppUserId:this.currentUserId,allPurchasedProductIdentifiers:e.map(a=>a.product_id),latestExpirationDate:Math.max(...Object.values(i).map(a=>new Date(a).getTime())).toString(),activeSubscriptions:r,allExpirationDates:i,entitlements:{all:o,active:Object.fromEntries(Object.entries(o).filter(([a,s])=>s.isActive))}}}catch(e){return console.error("[RevenueCatService] Error restoring purchases:",e),null}}async getPurchaserInfo(){return this.restorePurchases()}async checkTrialEligibility(e){if(!this.isInitialized||!this.currentUserId)return!1;try{const{data:n,error:r}=await Ze.from("revenuecat_subscriptions").select(`
          *,
          revenuecat_customers!inner (user_id)
        `).eq("revenuecat_customers.user_id",this.currentUserId).eq("product_id",e).eq("period_type","trial");return r?(console.error("[RevenueCatService] Error checking trial eligibility:",r),!1):!n||n.length===0}catch(n){return console.error("[RevenueCatService] Error checking trial eligibility:",n),!1}}isUserPremium(e){return e?Object.values(e.entitlements.active).some(r=>r.isActive&&(r.periodType==="TRIAL"||r.periodType==="NORMAL")):!1}getTrialEndDate(e){if(!e)return null;const n=Object.values(e.entitlements.active).filter(i=>i.periodType==="TRIAL"&&i.isActive);if(n.length===0)return null;const r=n.reduce((i,o)=>{const a=new Date(o.expirationDate||0),s=new Date(i.expirationDate||0);return a>s?o:i});return r.expirationDate?new Date(r.expirationDate):null}}const zu=new ake,ske=()=>{const{user:t}=or(),{toast:e}=oh(),[n,r]=_.useState(!1),[i,o]=_.useState(null),[a,s]=_.useState([]),[l,c]=_.useState(!0),[u,f]=_.useState(0),h=3,p=_.useCallback(async()=>{if(t!=null&&t.id)try{c(!0),f(z=>z+1),console.log(`[useRevenueCat] Initializing RevenueCat, attempt ${u+1}/${h}`),await Promise.race([zu.initialize(t.id),new Promise((z,O)=>setTimeout(()=>O(new Error("RevenueCat initialization timeout")),1e4))]),r(!0),f(0);const M=Promise.race([zu.getProducts(),new Promise((z,O)=>setTimeout(()=>O(new Error("Products fetch timeout")),5e3))]),k=Promise.race([zu.getPurchaserInfo(),new Promise(z=>setTimeout(()=>z(null),5e3))]),[I,U]=await Promise.all([M.catch(()=>[]),k]);s(I),o(U)}catch(M){console.error("[useRevenueCat] Failed to initialize RevenueCat:",M),u>=h?(console.warn("[useRevenueCat] Max initialization attempts reached, using fallback mode"),r(!0),e({title:"Subscription Services Limited",description:"Some premium features may not be available. Please check your connection.",variant:"default"})):console.log(`[useRevenueCat] Will retry initialization later, attempts so far: ${u+1}/${h}`)}finally{c(!1)}},[t==null?void 0:t.id,e,u]);_.useEffect(()=>{t!=null&&t.id&&!n&&u<h&&p()},[t==null?void 0:t.id,n,p,u]);const y=_.useCallback(async()=>{if(n)try{c(!0);const M=await Promise.race([zu.getPurchaserInfo(),new Promise(k=>setTimeout(()=>k(null),5e3))]);M&&o(M)}catch(M){console.error("[useRevenueCat] Failed to refresh purchaser info:",M)}finally{c(!1)}},[n]),g=_.useCallback(async M=>{if(!n)return e({title:"Service Unavailable",description:"Subscription service not initialized. Please try again later.",variant:"destructive"}),!1;try{return c(!0),await zu.purchaseProduct(M),await y(),e({title:"Trial Started!",description:"Your 7-day free trial has begun. Enjoy premium features!",variant:"default"}),!0}catch(k){return console.error("[useRevenueCat] Purchase failed:",k),e({title:"Purchase Failed",description:"Failed to start your trial. Please try again later.",variant:"destructive"}),!1}finally{c(!1)}},[n,y,e]),v=_.useCallback(async()=>{if(!n)return!1;try{c(!0);const M=await zu.restorePurchases();return M?(o(M),e({title:"Purchases Restored",description:"Your subscription has been restored successfully.",variant:"default"}),!0):(e({title:"No Purchases Found",description:"No previous purchases were found to restore.",variant:"default"}),!1)}catch(M){return console.error("[useRevenueCat] Restore failed:",M),e({title:"Restore Failed",description:"Failed to restore purchases. Please try again later.",variant:"destructive"}),!1}finally{c(!1)}},[n,e]),b=_.useCallback(async M=>{if(!n)return!1;try{return await zu.checkTrialEligibility(M)}catch(k){return console.error("[useRevenueCat] Failed to check trial eligibility:",k),!1}},[n]),w=i?zu.isUserPremium(i):!1,T=i?zu.getTrialEndDate(i):null,C=T?T>new Date:!1,P=T?Math.max(0,Math.ceil((T.getTime()-new Date().getTime())/(1e3*60*60*24))):0;return{isInitialized:n,purchaserInfo:i,products:a,isLoading:l,isPremium:w,isTrialActive:C,trialEndDate:T,daysRemainingInTrial:P,purchaseProduct:g,restorePurchases:v,checkTrialEligibility:b,refreshPurchaserInfo:y}},lke=["Unlimited AI chat conversations - Access to the intelligent chat assistant","Advanced emotional insights & analytics - Deep pattern analysis and trends","Interactive SoulNet visualization - 3D network of your emotional connections","Detailed mood tracking & calendar - Comprehensive mood analysis over time","Priority customer support - Faster response times for help"],rre=({isOpen:t,onClose:e})=>{const{purchaseProduct:n,isLoading:r}=ske(),{isPremium:i,isTrialActive:o}=H1(),{pricing:a,isLoading:s,error:l}=Y4(),[c,u]=_.useState(!1);console.log("[SubscriptionModal] Current pricing state:",{pricing:a,isLoading:s,error:l});const f=async()=>{try{u(!0),console.log("[SubscriptionModal] Starting subscription for product:",a.productId),await n(a.productId)?(It.success(d.jsx(Q,{text:"Premium subscription activated! Welcome to Premium!",forceTranslate:!0})),e()):It.error(d.jsx(Q,{text:"Subscription failed. Please try again.",forceTranslate:!0}))}catch(p){console.error("[SubscriptionModal] Subscription error:",p),It.error(d.jsx(Q,{text:"An error occurred during subscription. Please try again.",forceTranslate:!0}))}finally{u(!1)}},h=()=>{c||e()};return i&&!o?d.jsx(Pp,{open:t,onOpenChange:h,children:d.jsxs(Rf,{className:"max-w-md",children:[d.jsx(jf,{children:d.jsxs(If,{className:"flex items-center gap-2 text-center",children:[d.jsx(rc,{className:"h-6 w-6 text-yellow-500"}),d.jsx(Q,{text:"Already Premium!"})]})}),d.jsxs("div",{className:"text-center py-6",children:[d.jsx("p",{className:"text-muted-foreground",children:d.jsx(Q,{text:"You already have an active premium subscription. Thank you for your support!"})}),d.jsx(ct,{onClick:h,className:"mt-4",children:d.jsx(Q,{text:"Close"})})]})]})}):d.jsx(Pp,{open:t,onOpenChange:h,children:d.jsxs(Rf,{className:"max-w-lg max-h-[90vh] overflow-y-auto",children:[d.jsxs(jf,{children:[d.jsxs(If,{className:"flex items-center gap-2 text-center",children:[d.jsx(rc,{className:"h-6 w-6 text-yellow-500"}),d.jsx(Q,{text:"Upgrade to Premium"})]}),d.jsx(Oy,{className:"text-center",children:d.jsx(Q,{text:"Unlock all premium features and enhance your journaling experience"})})]}),d.jsxs("div",{className:"space-y-6",children:[d.jsx(Jr,{className:"border-2 border-primary/20 bg-gradient-to-br from-primary/5 to-primary/10",children:d.jsx(au,{className:"p-6",children:d.jsx("div",{className:"text-center space-y-2",children:s?d.jsxs("div",{className:"flex items-center justify-center gap-2",children:[d.jsx(Aa,{className:"h-4 w-4 animate-spin"}),d.jsx("span",{className:"text-sm text-muted-foreground",children:d.jsx(Q,{text:"Detecting location..."})})]}):d.jsxs(d.Fragment,{children:[d.jsx(ec,{variant:"secondary",className:"mb-2",children:a.country}),d.jsx("div",{className:"text-3xl font-bold text-primary",children:a.price}),d.jsx("div",{className:"text-sm text-muted-foreground",children:d.jsx(Q,{text:"per month"})}),o&&d.jsx(ec,{variant:"outline",className:"bg-blue-50 dark:bg-blue-950/20",children:d.jsx(Q,{text:"Currently in 7-day free trial"})}),l&&d.jsx("div",{className:"text-xs text-yellow-600 dark:text-yellow-400",children:d.jsx(Q,{text:"Using default pricing due to location detection issues"})})]})})})}),d.jsxs("div",{className:"space-y-3",children:[d.jsx("h4",{className:"font-semibold text-center",children:d.jsx(Q,{text:"Premium Features"})}),d.jsx("div",{className:"grid gap-3",children:lke.map((p,y)=>d.jsxs(Ke.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:y*.1},className:"flex items-start gap-3",children:[d.jsx(Sd,{className:"h-5 w-5 text-green-500 flex-shrink-0 mt-0.5"}),d.jsx("span",{className:"text-sm leading-relaxed",children:d.jsx(Q,{text:p})})]},p))})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsx(ct,{onClick:f,disabled:c||r||s,className:"w-full bg-gradient-to-r from-yellow-400 to-orange-500 hover:from-yellow-500 hover:to-orange-600 text-white border-0",size:"lg",children:c?d.jsxs(d.Fragment,{children:[d.jsx(Aa,{className:"h-4 w-4 mr-2 animate-spin"}),d.jsx(Q,{text:"Processing..."})]}):d.jsxs(d.Fragment,{children:[d.jsx(rc,{className:"h-4 w-4 mr-2"}),d.jsx(Q,{text:"Subscribe Now"})]})}),d.jsxs(ct,{variant:"outline",onClick:h,disabled:c,className:"w-full",children:[d.jsx(cc,{className:"h-4 w-4 mr-2"}),d.jsx(Q,{text:"Maybe Later"})]})]}),d.jsxs("div",{className:"text-xs text-muted-foreground text-center space-y-1",children:[d.jsx("p",{children:d.jsx(Q,{text:"Subscription will be charged to your Google Play account"})}),d.jsx("p",{children:d.jsx(Q,{text:"Cancel anytime from your Google Play Store account settings"})}),o&&d.jsx("p",{className:"text-blue-600 dark:text-blue-400",children:d.jsx(Q,{text:"Your trial will continue until it expires, then billing begins"})})]})]})]})})},OT=({children:t,feature:e,fallbackTitle:n,fallbackDescription:r})=>{const{hasActiveSubscription:i,isTrialActive:o,trialEndDate:a,daysRemainingInTrial:s,isLoading:l,tier:c,status:u,isTrialEligible:f}=H1(),h=Za(),[p,y]=_.useState(!1);if(l)return d.jsx("div",{className:"flex items-center justify-center h-64",children:d.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full"})});if(console.log("[PremiumFeatureGuard] Subscription check:",{feature:e,hasActiveSubscription:i,isTrialActive:o,tier:c,status:u,trialEndDate:a==null?void 0:a.toISOString(),daysRemaining:s,isTrialEligible:f}),i)return console.log("[PremiumFeatureGuard] Access granted - user has active subscription or trial"),d.jsx(d.Fragment,{children:t});const g=()=>n||(e==="chat"?"AI Chat Assistant":"Advanced Insights"),v=()=>r||(e==="chat"?"Get personalized insights and guidance from your AI companion":"Discover deep patterns and trends in your emotional journey"),b=()=>{y(!0)},w=()=>{y(!0)};return console.log("[PremiumFeatureGuard] Access blocked - showing upgrade prompt"),d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"min-h-screen pb-20 flex items-center justify-center p-4",children:d.jsxs(Jr,{className:"w-full max-w-md",children:[d.jsxs(w0,{className:"text-center",children:[d.jsx("div",{className:"mx-auto mb-4 h-16 w-16 bg-gradient-to-br from-orange-400 to-pink-600 rounded-full flex items-center justify-center",children:d.jsx(rc,{className:"h-8 w-8 text-white"})}),d.jsx(b0,{className:"text-xl font-bold",children:d.jsx(Q,{text:g()})}),d.jsx(nF,{children:d.jsx(Q,{text:v()})})]}),d.jsxs(au,{className:"space-y-4",children:[a&&!o&&d.jsxs("div",{className:"bg-muted/50 rounded-lg p-4 space-y-2",children:[d.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[d.jsx(Zu,{className:"h-4 w-4"}),d.jsx(Q,{text:"Your 7-day free trial has ended"})]}),d.jsxs("p",{className:"text-sm",children:[d.jsx(Q,{text:"Trial ended on:"})," ",d.jsx("span",{className:"font-medium",children:ir(a,"MMM dd, yyyy")})]})]}),f&&!a&&d.jsxs("div",{className:"bg-blue-50 dark:bg-blue-950/20 rounded-lg p-4 space-y-2",children:[d.jsxs("div",{className:"flex items-center gap-2 text-sm text-blue-700 dark:text-blue-300",children:[d.jsx(Zu,{className:"h-4 w-4"}),d.jsx(Q,{text:"Start your 7-day free trial"})]}),d.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:d.jsx(Q,{text:"Get full access to all premium features for 7 days"})})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("h4",{className:"font-medium text-sm",children:d.jsx(Q,{text:"Premium features include:"})}),d.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[d.jsxs("li",{children:[" ",d.jsx(Q,{text:"Unlimited AI chat conversations"})]}),d.jsxs("li",{children:[" ",d.jsx(Q,{text:"Advanced emotional insights"})]}),d.jsxs("li",{children:[" ",d.jsx(Q,{text:"Detailed mood tracking"})]}),d.jsxs("li",{children:[" ",d.jsx(Q,{text:"Export your journal data"})]})]})]}),d.jsxs("div",{className:"space-y-3",children:[f&&!a&&d.jsxs(ct,{onClick:w,className:"w-full bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700",children:[d.jsx(Zu,{className:"mr-2 h-4 w-4"}),d.jsx(Q,{text:"Start 7-Day Free Trial"})]}),d.jsxs(ct,{onClick:b,className:"w-full bg-gradient-to-r from-orange-500 to-pink-600 hover:from-orange-600 hover:to-pink-700",variant:f&&!a?"outline":"default",children:[d.jsx(rc,{className:"mr-2 h-4 w-4"}),d.jsx(Q,{text:"Upgrade to Premium"}),d.jsx(d0,{className:"ml-2 h-4 w-4"})]}),d.jsx(ct,{variant:"outline",onClick:()=>h("/app/journal"),className:"w-full",children:d.jsx(Q,{text:"Continue with Journal"})})]})]})]})}),d.jsx(rre,{isOpen:p,onClose:()=>y(!1)})]})};function cke(){return d.jsxs("div",{children:[d.jsx("h1",{className:"text-3xl font-bold mb-2",children:d.jsx(Tn,{text:"Insights",forceTranslate:!0,enableFontScaling:!0,scalingContext:"general",usePageTranslation:!0})}),d.jsx("p",{className:"text-muted-foreground",children:d.jsx(Tn,{text:"Discover patterns in your emotional journey",forceTranslate:!0,enableFontScaling:!0,scalingContext:"general",usePageTranslation:!0})})]})}function uke(t,e=[]){let n=[];function r(o,a){const s=_.createContext(a),l=n.length;n=[...n,a];function c(f){const{scope:h,children:p,...y}=f,g=(h==null?void 0:h[t][l])||s,v=_.useMemo(()=>y,Object.values(y));return d.jsx(g.Provider,{value:v,children:p})}function u(f,h){const p=(h==null?void 0:h[t][l])||s,y=_.useContext(p);if(y)return y;if(a!==void 0)return a;throw new Error(`\`${f}\` must be used within \`${o}\``)}return c.displayName=o+"Provider",[c,u]}const i=()=>{const o=n.map(a=>_.createContext(a));return function(s){const l=(s==null?void 0:s[t])||o;return _.useMemo(()=>({[`__scope${t}`]:{...s,[t]:l}}),[s,l])}};return i.scopeName=t,[r,dke(i,...e)]}function dke(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(o){const a=r.reduce((s,{useScope:l,scopeName:c})=>{const f=l(o)[`__scope${c}`];return{...s,...f}},{});return _.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return n.scopeName=e.scopeName,n}var fke="Toggle",vF=_.forwardRef((t,e)=>{const{pressed:n,defaultPressed:r=!1,onPressedChange:i,...o}=t,[a=!1,s]=wo({prop:n,onChange:i,defaultProp:r});return d.jsx(At.button,{type:"button","aria-pressed":a,"data-state":a?"on":"off","data-disabled":t.disabled?"":void 0,...o,ref:e,onClick:ut(t.onClick,()=>{t.disabled||s(!a)})})});vF.displayName=fke;var ire=vF,_0="ToggleGroup",[ore,_ot]=uke(_0,[g0]),are=g0(),xF=ve.forwardRef((t,e)=>{const{type:n,...r}=t;if(n==="single"){const i=r;return d.jsx(hke,{...i,ref:e})}if(n==="multiple"){const i=r;return d.jsx(pke,{...i,ref:e})}throw new Error(`Missing prop \`type\` expected on \`${_0}\``)});xF.displayName=_0;var[sre,lre]=ore(_0),hke=ve.forwardRef((t,e)=>{const{value:n,defaultValue:r,onValueChange:i=()=>{},...o}=t,[a,s]=wo({prop:n,defaultProp:r,onChange:i});return d.jsx(sre,{scope:t.__scopeToggleGroup,type:"single",value:a?[a]:[],onItemActivate:s,onItemDeactivate:ve.useCallback(()=>s(""),[s]),children:d.jsx(cre,{...o,ref:e})})}),pke=ve.forwardRef((t,e)=>{const{value:n,defaultValue:r,onValueChange:i=()=>{},...o}=t,[a=[],s]=wo({prop:n,defaultProp:r,onChange:i}),l=ve.useCallback(u=>s((f=[])=>[...f,u]),[s]),c=ve.useCallback(u=>s((f=[])=>f.filter(h=>h!==u)),[s]);return d.jsx(sre,{scope:t.__scopeToggleGroup,type:"multiple",value:a,onItemActivate:l,onItemDeactivate:c,children:d.jsx(cre,{...o,ref:e})})});xF.displayName=_0;var[mke,gke]=ore(_0),cre=ve.forwardRef((t,e)=>{const{__scopeToggleGroup:n,disabled:r=!1,rovingFocus:i=!0,orientation:o,dir:a,loop:s=!0,...l}=t,c=are(n),u=ah(a),f={role:"group",dir:u,...l};return d.jsx(mke,{scope:n,rovingFocus:i,disabled:r,children:i?d.jsx(r4,{asChild:!0,...c,orientation:o,dir:u,loop:s,children:d.jsx(At.div,{...f,ref:e})}):d.jsx(At.div,{...f,ref:e})})}),LT="ToggleGroupItem",ure=ve.forwardRef((t,e)=>{const n=lre(LT,t.__scopeToggleGroup),r=gke(LT,t.__scopeToggleGroup),i=are(t.__scopeToggleGroup),o=n.value.includes(t.value),a=r.disabled||t.disabled,s={...t,pressed:o,disabled:a},l=ve.useRef(null);return r.rovingFocus?d.jsx(i4,{asChild:!0,...i,focusable:!a,active:o,ref:l,children:d.jsx(k8,{...s,ref:e})}):d.jsx(k8,{...s,ref:e})});ure.displayName=LT;var k8=ve.forwardRef((t,e)=>{const{__scopeToggleGroup:n,value:r,...i}=t,o=lre(LT,n),a={role:"radio","aria-checked":t.pressed,"aria-pressed":void 0},s=o.type==="single"?a:void 0;return d.jsx(vF,{...s,...i,ref:e,onPressedChange:l=>{l?o.onItemActivate(r):o.onItemDeactivate(r)}})}),dre=xF,fre=ure;const hre=mm("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground"},size:{default:"h-10 px-3",sm:"h-9 px-2.5",lg:"h-11 px-5"}},defaultVariants:{variant:"default",size:"default"}}),yke=_.forwardRef(({className:t,variant:e,size:n,...r},i)=>d.jsx(ire,{ref:i,className:He(hre({variant:e,size:n,className:t})),...r}));yke.displayName=ire.displayName;const pre=_.createContext({size:"default",variant:"default"}),wF=_.forwardRef(({className:t,variant:e,size:n,children:r,...i},o)=>d.jsx(dre,{ref:o,className:He("flex items-center justify-center gap-1",t),...i,children:d.jsx(pre.Provider,{value:{variant:e,size:n},children:r})}));wF.displayName=dre.displayName;const DT=_.forwardRef(({className:t,children:e,variant:n,size:r,...i},o)=>{const a=_.useContext(pre);return d.jsx(fre,{ref:o,className:He(hre({variant:a.variant||n,size:a.size||r}),t),...i,children:e})});DT.displayName=fre.displayName;function N8({timeRange:t,onTimeRangeChange:e,refreshing:n,onRefresh:r}){const i=[{value:"today",label:"Day"},{value:"week",label:"Week"},{value:"month",label:"Month"},{value:"year",label:"Year"}];return d.jsxs("div",{className:"insights-time-toggle flex items-center gap-3",children:[d.jsx("span",{className:"text-sm text-muted-foreground",children:d.jsx(Tn,{text:"View:",forceTranslate:!0,enableFontScaling:!0,scalingContext:"compact",usePageTranslation:!0})}),d.jsx(wF,{type:"single",value:t,onValueChange:e,variant:"outline",className:"bg-secondary rounded-full p-1",children:i.map(o=>d.jsx(DT,{value:o.value,className:He("px-4 py-1.5 rounded-full text-sm font-medium transition-all",t===o.value?"bg-background text-primary shadow-sm":"text-muted-foreground hover:text-foreground bg-transparent"),children:d.jsx(Tn,{text:o.label,forceTranslate:!0,enableFontScaling:!0,scalingContext:"compact",usePageTranslation:!0})},o.value))}),d.jsx(ct,{variant:"ghost",size:"sm",onClick:r,disabled:n,className:He("ml-2 h-8 w-8 p-0",n&&"animate-spin"),title:"Refresh data",children:d.jsx(Qu,{className:"h-4 w-4"})})]})}const wP=({title:t,delay:e,badge:n,badgeColor:r,...i})=>{const o=()=>{switch(i.type){case"mood":return i.data?d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("div",{className:"h-16 w-16 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center",children:d.jsx("span",{className:"text-2xl",children:i.data.emoji})}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-2xl font-bold capitalize",children:d.jsx(Tn,{text:i.data.emotion,forceTranslate:!0,enableFontScaling:!0,scalingContext:"general",usePageTranslation:!0})}),d.jsx("p",{className:"text-muted-foreground text-sm",children:d.jsx(Tn,{text:"Appeared in most entries",forceTranslate:!0,enableFontScaling:!0,scalingContext:"compact",usePageTranslation:!0})})]})]}):d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("div",{className:"h-16 w-16 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center",children:d.jsx("span",{className:"text-2xl",children:""})}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-2xl font-bold",children:d.jsx(Tn,{text:"Not enough data",forceTranslate:!0,enableFontScaling:!0,scalingContext:"general",usePageTranslation:!0})}),d.jsx("p",{className:"text-muted-foreground text-sm",children:d.jsx(Tn,{text:"Add more journal entries",forceTranslate:!0,enableFontScaling:!0,scalingContext:"compact",usePageTranslation:!0})})]})]});case"change":return i.data?d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("div",{className:He("h-16 w-16 rounded-full flex items-center justify-center",i.data.percentage>=0?"bg-green-100 dark:bg-green-900":"bg-blue-100 dark:bg-blue-900"),children:i.data.percentage>=0?d.jsx(d0e,{className:"h-8 w-8 text-green-600 dark:text-green-300"}):d.jsx(u0e,{className:"h-8 w-8 text-blue-600 dark:text-blue-300"})}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-2xl font-bold capitalize",children:d.jsx(Tn,{text:i.data.emotion,forceTranslate:!0,enableFontScaling:!0,scalingContext:"general",usePageTranslation:!0})}),d.jsx("p",{className:"text-muted-foreground text-sm",children:d.jsx(Tn,{text:i.data.percentage>=0?"Increased significantly":"Decreased significantly",forceTranslate:!0,enableFontScaling:!0,scalingContext:"compact",usePageTranslation:!0})})]})]}):d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("div",{className:"h-16 w-16 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center",children:d.jsx(IJ,{className:"h-8 w-8 text-gray-500 dark:text-gray-400"})}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-2xl font-bold",children:d.jsx(Tn,{text:"Not enough data",forceTranslate:!0,enableFontScaling:!0,scalingContext:"general",usePageTranslation:!0})}),d.jsx("p",{className:"text-muted-foreground text-sm",children:d.jsx(Tn,{text:"Need more entries to compare",forceTranslate:!0,enableFontScaling:!0,scalingContext:"compact",usePageTranslation:!0})})]})]});case"activity":const a=i.timeRange==="today"?"Today":`This ${i.timeRange}`;return d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("div",{className:"h-16 w-16 bg-purple-100 dark:bg-purple-900 rounded-full flex items-center justify-center",children:i.data.streak>0?d.jsx(f0e,{className:"h-8 w-8 text-purple-600 dark:text-purple-300"}):d.jsx(c0e,{className:"h-8 w-8 text-purple-600 dark:text-purple-300"})}),d.jsxs("div",{className:"flex-1",children:[d.jsx("h3",{className:"text-2xl font-bold",children:d.jsx(Tn,{text:`${i.data.entryCount} entries`,forceTranslate:!0,enableFontScaling:!0,scalingContext:"general",usePageTranslation:!0})}),d.jsx("p",{className:"text-muted-foreground text-sm",children:d.jsx(Tn,{text:a,forceTranslate:!0,enableFontScaling:!0,scalingContext:"compact",usePageTranslation:!0})})]})]});default:return null}};return d.jsxs(Ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:e},className:"bg-background p-6 rounded-xl shadow-sm border w-full",children:[d.jsxs("div",{className:"flex justify-between items-start mb-4",children:[d.jsx("h2",{className:"font-semibold text-lg",children:d.jsx(Tn,{text:t,forceTranslate:!0,enableFontScaling:!0,scalingContext:"general",usePageTranslation:!0})}),n&&d.jsx("span",{className:He("px-2 py-1 rounded-full text-xs font-medium",r),children:d.jsx(Tn,{text:n,forceTranslate:!0,enableFontScaling:!0,scalingContext:"compact",usePageTranslation:!0})})]}),o()]})};function vke({timeRange:t,insightsData:e}){ui();const n=r=>{switch(r){case"today":return"Today";case"week":return"This week";case"month":return"This month";case"year":return"This year";default:return`This ${r}`}};return d.jsxs("div",{className:He("grid grid-cols-1 md:grid-cols-3 gap-6 mb-8 px-2 md:px-0"),children:[d.jsx(wP,{type:"mood",title:"Dominant Mood",delay:0,badge:n(t),badgeColor:"bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-200",data:e.dominantMood,timeRange:t}),d.jsx(wP,{type:"change",title:"Biggest Change",delay:.1,badge:e.biggestImprovement?`${e.biggestImprovement.percentage>=0?"+":""}${e.biggestImprovement.percentage}%`:void 0,badgeColor:e.biggestImprovement?He("px-2 py-1 rounded-full text-xs font-medium",e.biggestImprovement.percentage>=0?"bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-200":"bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-200"):void 0,data:e.biggestImprovement,timeRange:t}),d.jsx(wP,{type:"activity",title:"Journal Activity",delay:.2,badge:e.journalActivity.maxStreak>0?`Max streak: ${e.journalActivity.maxStreak} ${t==="today"?"entries":"days"}`:void 0,badgeColor:"bg-purple-100 dark:bg-purple-900 text-purple-700 dark:text-purple-200",data:e.journalActivity,timeRange:t})]})}function xke(t,e){const[n,r]=_.useState(()=>{if(typeof window<"u"){const i=window.localStorage.getItem(t);if(i!==null)return JSON.parse(i)}return e});return _.useEffect(()=>{typeof window<"u"&&window.localStorage.setItem(t,JSON.stringify(n))},[n,t]),[n,r]}const bP=({isNavigating:t,onPrevious:e,onNext:n,periodLabel:r})=>d.jsxs("div",{className:"flex items-center justify-between mb-2",children:[d.jsx(ct,{variant:"ghost",size:"icon",onClick:e,disabled:t,className:"text-muted-foreground hover:text-foreground",title:"Previous period",children:t?d.jsx(Aa,{className:"h-5 w-5 animate-spin"}):d.jsx(eA,{className:"h-5 w-5"})}),d.jsx("div",{className:"text-center font-medium text-base",children:d.jsx(Q,{text:r,forceTranslate:!0,enableFontScaling:!0,scalingContext:"compact"})}),d.jsx(ct,{variant:"ghost",size:"icon",onClick:n,disabled:t,className:"text-muted-foreground hover:text-foreground",title:"Next period",children:t?d.jsx(Aa,{className:"h-5 w-5 animate-spin"}):d.jsx(S1,{className:"h-5 w-5"})})]});var SP,R8;function Qa(){if(R8)return SP;R8=1;var t=Array.isArray;return SP=t,SP}var EP,j8;function mre(){if(j8)return EP;j8=1;var t=typeof ur=="object"&&ur&&ur.Object===Object&&ur;return EP=t,EP}var _P,I8;function su(){if(I8)return _P;I8=1;var t=mre(),e=typeof self=="object"&&self&&self.Object===Object&&self,n=t||e||Function("return this")();return _P=n,_P}var TP,O8;function V1(){if(O8)return TP;O8=1;var t=su(),e=t.Symbol;return TP=e,TP}var CP,L8;function wke(){if(L8)return CP;L8=1;var t=V1(),e=Object.prototype,n=e.hasOwnProperty,r=e.toString,i=t?t.toStringTag:void 0;function o(a){var s=n.call(a,i),l=a[i];try{a[i]=void 0;var c=!0}catch{}var u=r.call(a);return c&&(s?a[i]=l:delete a[i]),u}return CP=o,CP}var AP,D8;function bke(){if(D8)return AP;D8=1;var t=Object.prototype,e=t.toString;function n(r){return e.call(r)}return AP=n,AP}var MP,F8;function _d(){if(F8)return MP;F8=1;var t=V1(),e=wke(),n=bke(),r="[object Null]",i="[object Undefined]",o=t?t.toStringTag:void 0;function a(s){return s==null?s===void 0?i:r:o&&o in Object(s)?e(s):n(s)}return MP=a,MP}var PP,z8;function Td(){if(z8)return PP;z8=1;function t(e){return e!=null&&typeof e=="object"}return PP=t,PP}var kP,U8;function T0(){if(U8)return kP;U8=1;var t=_d(),e=Td(),n="[object Symbol]";function r(i){return typeof i=="symbol"||e(i)&&t(i)==n}return kP=r,kP}var NP,B8;function bF(){if(B8)return NP;B8=1;var t=Qa(),e=T0(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(o,a){if(t(o))return!1;var s=typeof o;return s=="number"||s=="symbol"||s=="boolean"||o==null||e(o)?!0:r.test(o)||!n.test(o)||a!=null&&o in Object(a)}return NP=i,NP}var RP,$8;function ch(){if($8)return RP;$8=1;function t(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}return RP=t,RP}var jP,H8;function SF(){if(H8)return jP;H8=1;var t=_d(),e=ch(),n="[object AsyncFunction]",r="[object Function]",i="[object GeneratorFunction]",o="[object Proxy]";function a(s){if(!e(s))return!1;var l=t(s);return l==r||l==i||l==n||l==o}return jP=a,jP}var IP,V8;function Ske(){if(V8)return IP;V8=1;var t=su(),e=t["__core-js_shared__"];return IP=e,IP}var OP,W8;function Eke(){if(W8)return OP;W8=1;var t=Ske(),e=function(){var r=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function n(r){return!!e&&e in r}return OP=n,OP}var LP,G8;function gre(){if(G8)return LP;G8=1;var t=Function.prototype,e=t.toString;function n(r){if(r!=null){try{return e.call(r)}catch{}try{return r+""}catch{}}return""}return LP=n,LP}var DP,q8;function _ke(){if(q8)return DP;q8=1;var t=SF(),e=Eke(),n=ch(),r=gre(),i=/[\\^$.*+?()[\]{}|]/g,o=/^\[object .+?Constructor\]$/,a=Function.prototype,s=Object.prototype,l=a.toString,c=s.hasOwnProperty,u=RegExp("^"+l.call(c).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function f(h){if(!n(h)||e(h))return!1;var p=t(h)?u:o;return p.test(r(h))}return DP=f,DP}var FP,Y8;function Tke(){if(Y8)return FP;Y8=1;function t(e,n){return e==null?void 0:e[n]}return FP=t,FP}var zP,X8;function Mm(){if(X8)return zP;X8=1;var t=_ke(),e=Tke();function n(r,i){var o=e(r,i);return t(o)?o:void 0}return zP=n,zP}var UP,K8;function AA(){if(K8)return UP;K8=1;var t=Mm(),e=t(Object,"create");return UP=e,UP}var BP,J8;function Cke(){if(J8)return BP;J8=1;var t=AA();function e(){this.__data__=t?t(null):{},this.size=0}return BP=e,BP}var $P,Z8;function Ake(){if(Z8)return $P;Z8=1;function t(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}return $P=t,$P}var HP,Q8;function Mke(){if(Q8)return HP;Q8=1;var t=AA(),e="__lodash_hash_undefined__",n=Object.prototype,r=n.hasOwnProperty;function i(o){var a=this.__data__;if(t){var s=a[o];return s===e?void 0:s}return r.call(a,o)?a[o]:void 0}return HP=i,HP}var VP,eH;function Pke(){if(eH)return VP;eH=1;var t=AA(),e=Object.prototype,n=e.hasOwnProperty;function r(i){var o=this.__data__;return t?o[i]!==void 0:n.call(o,i)}return VP=r,VP}var WP,tH;function kke(){if(tH)return WP;tH=1;var t=AA(),e="__lodash_hash_undefined__";function n(r,i){var o=this.__data__;return this.size+=this.has(r)?0:1,o[r]=t&&i===void 0?e:i,this}return WP=n,WP}var GP,nH;function Nke(){if(nH)return GP;nH=1;var t=Cke(),e=Ake(),n=Mke(),r=Pke(),i=kke();function o(a){var s=-1,l=a==null?0:a.length;for(this.clear();++s<l;){var c=a[s];this.set(c[0],c[1])}}return o.prototype.clear=t,o.prototype.delete=e,o.prototype.get=n,o.prototype.has=r,o.prototype.set=i,GP=o,GP}var qP,rH;function Rke(){if(rH)return qP;rH=1;function t(){this.__data__=[],this.size=0}return qP=t,qP}var YP,iH;function EF(){if(iH)return YP;iH=1;function t(e,n){return e===n||e!==e&&n!==n}return YP=t,YP}var XP,oH;function MA(){if(oH)return XP;oH=1;var t=EF();function e(n,r){for(var i=n.length;i--;)if(t(n[i][0],r))return i;return-1}return XP=e,XP}var KP,aH;function jke(){if(aH)return KP;aH=1;var t=MA(),e=Array.prototype,n=e.splice;function r(i){var o=this.__data__,a=t(o,i);if(a<0)return!1;var s=o.length-1;return a==s?o.pop():n.call(o,a,1),--this.size,!0}return KP=r,KP}var JP,sH;function Ike(){if(sH)return JP;sH=1;var t=MA();function e(n){var r=this.__data__,i=t(r,n);return i<0?void 0:r[i][1]}return JP=e,JP}var ZP,lH;function Oke(){if(lH)return ZP;lH=1;var t=MA();function e(n){return t(this.__data__,n)>-1}return ZP=e,ZP}var QP,cH;function Lke(){if(cH)return QP;cH=1;var t=MA();function e(n,r){var i=this.__data__,o=t(i,n);return o<0?(++this.size,i.push([n,r])):i[o][1]=r,this}return QP=e,QP}var ek,uH;function PA(){if(uH)return ek;uH=1;var t=Rke(),e=jke(),n=Ike(),r=Oke(),i=Lke();function o(a){var s=-1,l=a==null?0:a.length;for(this.clear();++s<l;){var c=a[s];this.set(c[0],c[1])}}return o.prototype.clear=t,o.prototype.delete=e,o.prototype.get=n,o.prototype.has=r,o.prototype.set=i,ek=o,ek}var tk,dH;function _F(){if(dH)return tk;dH=1;var t=Mm(),e=su(),n=t(e,"Map");return tk=n,tk}var nk,fH;function Dke(){if(fH)return nk;fH=1;var t=Nke(),e=PA(),n=_F();function r(){this.size=0,this.__data__={hash:new t,map:new(n||e),string:new t}}return nk=r,nk}var rk,hH;function Fke(){if(hH)return rk;hH=1;function t(e){var n=typeof e;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?e!=="__proto__":e===null}return rk=t,rk}var ik,pH;function kA(){if(pH)return ik;pH=1;var t=Fke();function e(n,r){var i=n.__data__;return t(r)?i[typeof r=="string"?"string":"hash"]:i.map}return ik=e,ik}var ok,mH;function zke(){if(mH)return ok;mH=1;var t=kA();function e(n){var r=t(this,n).delete(n);return this.size-=r?1:0,r}return ok=e,ok}var ak,gH;function Uke(){if(gH)return ak;gH=1;var t=kA();function e(n){return t(this,n).get(n)}return ak=e,ak}var sk,yH;function Bke(){if(yH)return sk;yH=1;var t=kA();function e(n){return t(this,n).has(n)}return sk=e,sk}var lk,vH;function $ke(){if(vH)return lk;vH=1;var t=kA();function e(n,r){var i=t(this,n),o=i.size;return i.set(n,r),this.size+=i.size==o?0:1,this}return lk=e,lk}var ck,xH;function TF(){if(xH)return ck;xH=1;var t=Dke(),e=zke(),n=Uke(),r=Bke(),i=$ke();function o(a){var s=-1,l=a==null?0:a.length;for(this.clear();++s<l;){var c=a[s];this.set(c[0],c[1])}}return o.prototype.clear=t,o.prototype.delete=e,o.prototype.get=n,o.prototype.has=r,o.prototype.set=i,ck=o,ck}var uk,wH;function yre(){if(wH)return uk;wH=1;var t=TF(),e="Expected a function";function n(r,i){if(typeof r!="function"||i!=null&&typeof i!="function")throw new TypeError(e);var o=function(){var a=arguments,s=i?i.apply(this,a):a[0],l=o.cache;if(l.has(s))return l.get(s);var c=r.apply(this,a);return o.cache=l.set(s,c)||l,c};return o.cache=new(n.Cache||t),o}return n.Cache=t,uk=n,uk}var dk,bH;function Hke(){if(bH)return dk;bH=1;var t=yre(),e=500;function n(r){var i=t(r,function(a){return o.size===e&&o.clear(),a}),o=i.cache;return i}return dk=n,dk}var fk,SH;function Vke(){if(SH)return fk;SH=1;var t=Hke(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,r=t(function(i){var o=[];return i.charCodeAt(0)===46&&o.push(""),i.replace(e,function(a,s,l,c){o.push(l?c.replace(n,"$1"):s||a)}),o});return fk=r,fk}var hk,EH;function CF(){if(EH)return hk;EH=1;function t(e,n){for(var r=-1,i=e==null?0:e.length,o=Array(i);++r<i;)o[r]=n(e[r],r,e);return o}return hk=t,hk}var pk,_H;function Wke(){if(_H)return pk;_H=1;var t=V1(),e=CF(),n=Qa(),r=T0(),i=t?t.prototype:void 0,o=i?i.toString:void 0;function a(s){if(typeof s=="string")return s;if(n(s))return e(s,a)+"";if(r(s))return o?o.call(s):"";var l=s+"";return l=="0"&&1/s==-1/0?"-0":l}return pk=a,pk}var mk,TH;function vre(){if(TH)return mk;TH=1;var t=Wke();function e(n){return n==null?"":t(n)}return mk=e,mk}var gk,CH;function xre(){if(CH)return gk;CH=1;var t=Qa(),e=bF(),n=Vke(),r=vre();function i(o,a){return t(o)?o:e(o,a)?[o]:n(r(o))}return gk=i,gk}var yk,AH;function NA(){if(AH)return yk;AH=1;var t=T0();function e(n){if(typeof n=="string"||t(n))return n;var r=n+"";return r=="0"&&1/n==-1/0?"-0":r}return yk=e,yk}var vk,MH;function AF(){if(MH)return vk;MH=1;var t=xre(),e=NA();function n(r,i){i=t(i,r);for(var o=0,a=i.length;r!=null&&o<a;)r=r[e(i[o++])];return o&&o==a?r:void 0}return vk=n,vk}var xk,PH;function wre(){if(PH)return xk;PH=1;var t=AF();function e(n,r,i){var o=n==null?void 0:t(n,r);return o===void 0?i:o}return xk=e,xk}var Gke=wre();const rl=$n(Gke);var wk,kH;function qke(){if(kH)return wk;kH=1;function t(e){return e==null}return wk=t,wk}var Yke=qke();const jn=$n(Yke);var bk,NH;function Xke(){if(NH)return bk;NH=1;var t=_d(),e=Qa(),n=Td(),r="[object String]";function i(o){return typeof o=="string"||!e(o)&&n(o)&&t(o)==r}return bk=i,bk}var Kke=Xke();const W1=$n(Kke);var Jke=SF();const kn=$n(Jke);var Zke=ch();const C0=$n(Zke);var Sk={exports:{}},er={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RH;function Qke(){if(RH)return er;RH=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),a=Symbol.for("react.context"),s=Symbol.for("react.server_context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.for("react.offscreen"),y;y=Symbol.for("react.module.reference");function g(v){if(typeof v=="object"&&v!==null){var b=v.$$typeof;switch(b){case t:switch(v=v.type,v){case n:case i:case r:case c:case u:return v;default:switch(v=v&&v.$$typeof,v){case s:case a:case l:case h:case f:case o:return v;default:return b}}case e:return b}}}return er.ContextConsumer=a,er.ContextProvider=o,er.Element=t,er.ForwardRef=l,er.Fragment=n,er.Lazy=h,er.Memo=f,er.Portal=e,er.Profiler=i,er.StrictMode=r,er.Suspense=c,er.SuspenseList=u,er.isAsyncMode=function(){return!1},er.isConcurrentMode=function(){return!1},er.isContextConsumer=function(v){return g(v)===a},er.isContextProvider=function(v){return g(v)===o},er.isElement=function(v){return typeof v=="object"&&v!==null&&v.$$typeof===t},er.isForwardRef=function(v){return g(v)===l},er.isFragment=function(v){return g(v)===n},er.isLazy=function(v){return g(v)===h},er.isMemo=function(v){return g(v)===f},er.isPortal=function(v){return g(v)===e},er.isProfiler=function(v){return g(v)===i},er.isStrictMode=function(v){return g(v)===r},er.isSuspense=function(v){return g(v)===c},er.isSuspenseList=function(v){return g(v)===u},er.isValidElementType=function(v){return typeof v=="string"||typeof v=="function"||v===n||v===i||v===r||v===c||v===u||v===p||typeof v=="object"&&v!==null&&(v.$$typeof===h||v.$$typeof===f||v.$$typeof===o||v.$$typeof===a||v.$$typeof===l||v.$$typeof===y||v.getModuleId!==void 0)},er.typeOf=g,er}var jH;function eNe(){return jH||(jH=1,Sk.exports=Qke()),Sk.exports}var bre=eNe(),Ek,IH;function Sre(){if(IH)return Ek;IH=1;var t=_d(),e=Td(),n="[object Number]";function r(i){return typeof i=="number"||e(i)&&t(i)==n}return Ek=r,Ek}var _k,OH;function tNe(){if(OH)return _k;OH=1;var t=Sre();function e(n){return t(n)&&n!=+n}return _k=e,_k}var nNe=tNe();const G1=$n(nNe);var rNe=Sre();const iNe=$n(rNe);var tc=function(e){return e===0?0:e>0?1:-1},kp=function(e){return W1(e)&&e.indexOf("%")===e.length-1},Et=function(e){return iNe(e)&&!G1(e)},no=function(e){return Et(e)||W1(e)},oNe=0,q1=function(e){var n=++oNe;return"".concat(e||"").concat(n)},im=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Et(e)&&!W1(e))return r;var o;if(kp(e)){var a=e.indexOf("%");o=n*parseFloat(e.slice(0,a))/100}else o=+e;return G1(o)&&(o=r),i&&o>n&&(o=n),o},kf=function(e){if(!e)return null;var n=Object.keys(e);return n&&n.length?e[n[0]]:null},aNe=function(e){if(!Array.isArray(e))return!1;for(var n=e.length,r={},i=0;i<n;i++)if(!r[e[i]])r[e[i]]=!0;else return!0;return!1},Xl=function(e,n){return Et(e)&&Et(n)?function(r){return e+r*(n-e)}:function(){return n}};function FT(t,e,n){return!t||!t.length?null:t.find(function(r){return r&&(typeof e=="function"?e(r):rl(r,e))===n})}function Zy(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(t,r))return!1;return!0}function ZO(t){"@babel/helpers - typeof";return ZO=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ZO(t)}var sNe=["viewBox","children"],lNe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],LH=["points","pathLength"],Tk={svg:sNe,polygon:LH,polyline:LH},MF=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],zT=function(e,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(_.isValidElement(e)&&(r=e.props),!C0(r))return null;var i={};return Object.keys(r).forEach(function(o){MF.includes(o)&&(i[o]=n||function(a){return r[o](r,a)})}),i},cNe=function(e,n,r){return function(i){return e(n,r,i),null}},UT=function(e,n,r){if(!C0(e)||ZO(e)!=="object")return null;var i=null;return Object.keys(e).forEach(function(o){var a=e[o];MF.includes(o)&&typeof a=="function"&&(i||(i={}),i[o]=cNe(a,n,r))}),i},uNe=["children"],dNe=["children"];function DH(t,e){if(t==null)return{};var n=fNe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function fNe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function QO(t){"@babel/helpers - typeof";return QO=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},QO(t)}var FH={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart"},rd=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},zH=null,Ck=null,PF=function t(e){if(e===zH&&Array.isArray(Ck))return Ck;var n=[];return _.Children.forEach(e,function(r){jn(r)||(bre.isFragment(r)?n=n.concat(t(r.props.children)):n.push(r))}),Ck=n,zH=e,n};function il(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(function(i){return rd(i)}):r=[rd(e)],PF(t).forEach(function(i){var o=rl(i,"type.displayName")||rl(i,"type.name");r.indexOf(o)!==-1&&n.push(i)}),n}function Ts(t,e){var n=il(t,e);return n&&n[0]}var UH=function(e){if(!e||!e.props)return!1;var n=e.props,r=n.width,i=n.height;return!(!Et(r)||r<=0||!Et(i)||i<=0)},hNe=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],pNe=function(e){return e&&e.type&&W1(e.type)&&hNe.indexOf(e.type)>=0},mNe=function(e){return e&&QO(e)==="object"&&"clipDot"in e},gNe=function(e,n,r,i){var o,a=(o=Tk==null?void 0:Tk[i])!==null&&o!==void 0?o:[];return!kn(e)&&(i&&a.includes(n)||lNe.includes(n))||r&&MF.includes(n)},Dn=function(e,n,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(_.isValidElement(e)&&(i=e.props),!C0(i))return null;var o={};return Object.keys(i).forEach(function(a){var s;gNe((s=i)===null||s===void 0?void 0:s[a],a,n,r)&&(o[a]=i[a])}),o},eL=function t(e,n){if(e===n)return!0;var r=_.Children.count(e);if(r!==_.Children.count(n))return!1;if(r===0)return!0;if(r===1)return BH(Array.isArray(e)?e[0]:e,Array.isArray(n)?n[0]:n);for(var i=0;i<r;i++){var o=e[i],a=n[i];if(Array.isArray(o)||Array.isArray(a)){if(!t(o,a))return!1}else if(!BH(o,a))return!1}return!0},BH=function(e,n){if(jn(e)&&jn(n))return!0;if(!jn(e)&&!jn(n)){var r=e.props||{},i=r.children,o=DH(r,uNe),a=n.props||{},s=a.children,l=DH(a,dNe);return i&&s?Zy(o,l)&&eL(i,s):!i&&!s?Zy(o,l):!1}return!1},$H=function(e,n){var r=[],i={};return PF(e).forEach(function(o,a){if(pNe(o))r.push(o);else if(o){var s=rd(o.type),l=n[s]||{},c=l.handler,u=l.once;if(c&&(!u||!i[s])){var f=c(o,s,a);r.push(f),i[s]=!0}}}),r},yNe=function(e){var n=e&&e.type;return n&&FH[n]?FH[n]:null},vNe=function(e,n){return PF(n).indexOf(e)},xNe=["children","width","height","viewBox","className","style","title","desc"];function tL(){return tL=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},tL.apply(this,arguments)}function wNe(t,e){if(t==null)return{};var n=bNe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function bNe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function nL(t){var e=t.children,n=t.width,r=t.height,i=t.viewBox,o=t.className,a=t.style,s=t.title,l=t.desc,c=wNe(t,xNe),u=i||{width:n,height:r,x:0,y:0},f=Un("recharts-surface",o);return ve.createElement("svg",tL({},Dn(c,!0,"svg"),{className:f,width:n,height:r,style:a,viewBox:"".concat(u.x," ").concat(u.y," ").concat(u.width," ").concat(u.height)}),ve.createElement("title",null,s),ve.createElement("desc",null,l),e)}var SNe=["children","className"];function rL(){return rL=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},rL.apply(this,arguments)}function ENe(t,e){if(t==null)return{};var n=_Ne(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function _Ne(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var bi=ve.forwardRef(function(t,e){var n=t.children,r=t.className,i=ENe(t,SNe),o=Un("recharts-layer",r);return ve.createElement("g",rL({className:o},Dn(i,!0),{ref:e}),n)}),id=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o]},Ak,HH;function TNe(){if(HH)return Ak;HH=1;function t(e,n,r){var i=-1,o=e.length;n<0&&(n=-n>o?0:o+n),r=r>o?o:r,r<0&&(r+=o),o=n>r?0:r-n>>>0,n>>>=0;for(var a=Array(o);++i<o;)a[i]=e[i+n];return a}return Ak=t,Ak}var Mk,VH;function CNe(){if(VH)return Mk;VH=1;var t=TNe();function e(n,r,i){var o=n.length;return i=i===void 0?o:i,!r&&i>=o?n:t(n,r,i)}return Mk=e,Mk}var Pk,WH;function Ere(){if(WH)return Pk;WH=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=e+n+r,o="\\ufe0e\\ufe0f",a="\\u200d",s=RegExp("["+a+t+i+o+"]");function l(c){return s.test(c)}return Pk=l,Pk}var kk,GH;function ANe(){if(GH)return kk;GH=1;function t(e){return e.split("")}return kk=t,kk}var Nk,qH;function MNe(){if(qH)return Nk;qH=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=e+n+r,o="\\ufe0e\\ufe0f",a="["+t+"]",s="["+i+"]",l="\\ud83c[\\udffb-\\udfff]",c="(?:"+s+"|"+l+")",u="[^"+t+"]",f="(?:\\ud83c[\\udde6-\\uddff]){2}",h="[\\ud800-\\udbff][\\udc00-\\udfff]",p="\\u200d",y=c+"?",g="["+o+"]?",v="(?:"+p+"(?:"+[u,f,h].join("|")+")"+g+y+")*",b=g+y+v,w="(?:"+[u+s+"?",s,f,h,a].join("|")+")",T=RegExp(l+"(?="+l+")|"+w+b,"g");function C(P){return P.match(T)||[]}return Nk=C,Nk}var Rk,YH;function PNe(){if(YH)return Rk;YH=1;var t=ANe(),e=Ere(),n=MNe();function r(i){return e(i)?n(i):t(i)}return Rk=r,Rk}var jk,XH;function kNe(){if(XH)return jk;XH=1;var t=CNe(),e=Ere(),n=PNe(),r=vre();function i(o){return function(a){a=r(a);var s=e(a)?n(a):void 0,l=s?s[0]:a.charAt(0),c=s?t(s,1).join(""):a.slice(1);return l[o]()+c}}return jk=i,jk}var Ik,KH;function NNe(){if(KH)return Ik;KH=1;var t=kNe(),e=t("toUpperCase");return Ik=e,Ik}var RNe=NNe();const RA=$n(RNe);function Er(t){return function(){return t}}const _re=Math.cos,BT=Math.sin,dc=Math.sqrt,$T=Math.PI,jA=2*$T,iL=Math.PI,oL=2*iL,hp=1e-6,jNe=oL-hp;function Tre(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function INe(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Tre;const n=10**e;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let ONe=class{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Tre:INe(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,o,a){this._append`C${+e},${+n},${+r},${+i},${this._x1=+o},${this._y1=+a}`}arcTo(e,n,r,i,o){if(e=+e,n=+n,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let a=this._x1,s=this._y1,l=r-e,c=i-n,u=a-e,f=s-n,h=u*u+f*f;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(h>hp)if(!(Math.abs(f*l-c*u)>hp)||!o)this._append`L${this._x1=e},${this._y1=n}`;else{let p=r-a,y=i-s,g=l*l+c*c,v=p*p+y*y,b=Math.sqrt(g),w=Math.sqrt(h),T=o*Math.tan((iL-Math.acos((g+h-v)/(2*b*w)))/2),C=T/w,P=T/b;Math.abs(C-1)>hp&&this._append`L${e+C*u},${n+C*f}`,this._append`A${o},${o},0,0,${+(f*p>u*y)},${this._x1=e+P*l},${this._y1=n+P*c}`}}arc(e,n,r,i,o,a){if(e=+e,n=+n,r=+r,a=!!a,r<0)throw new Error(`negative radius: ${r}`);let s=r*Math.cos(i),l=r*Math.sin(i),c=e+s,u=n+l,f=1^a,h=a?i-o:o-i;this._x1===null?this._append`M${c},${u}`:(Math.abs(this._x1-c)>hp||Math.abs(this._y1-u)>hp)&&this._append`L${c},${u}`,r&&(h<0&&(h=h%oL+oL),h>jNe?this._append`A${r},${r},0,1,${f},${e-s},${n-l}A${r},${r},0,1,${f},${this._x1=c},${this._y1=u}`:h>hp&&this._append`A${r},${r},0,${+(h>=iL)},${f},${this._x1=e+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function kF(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new ONe(e)}function NF(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Cre(t){this._context=t}Cre.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function IA(t){return new Cre(t)}function Are(t){return t[0]}function Mre(t){return t[1]}function Pre(t,e){var n=Er(!0),r=null,i=IA,o=null,a=kF(s);t=typeof t=="function"?t:t===void 0?Are:Er(t),e=typeof e=="function"?e:e===void 0?Mre:Er(e);function s(l){var c,u=(l=NF(l)).length,f,h=!1,p;for(r==null&&(o=i(p=a())),c=0;c<=u;++c)!(c<u&&n(f=l[c],c,l))===h&&((h=!h)?o.lineStart():o.lineEnd()),h&&o.point(+t(f,c,l),+e(f,c,l));if(p)return o=null,p+""||null}return s.x=function(l){return arguments.length?(t=typeof l=="function"?l:Er(+l),s):t},s.y=function(l){return arguments.length?(e=typeof l=="function"?l:Er(+l),s):e},s.defined=function(l){return arguments.length?(n=typeof l=="function"?l:Er(!!l),s):n},s.curve=function(l){return arguments.length?(i=l,r!=null&&(o=i(r)),s):i},s.context=function(l){return arguments.length?(l==null?r=o=null:o=i(r=l),s):r},s}function zE(t,e,n){var r=null,i=Er(!0),o=null,a=IA,s=null,l=kF(c);t=typeof t=="function"?t:t===void 0?Are:Er(+t),e=typeof e=="function"?e:Er(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?Mre:Er(+n);function c(f){var h,p,y,g=(f=NF(f)).length,v,b=!1,w,T=new Array(g),C=new Array(g);for(o==null&&(s=a(w=l())),h=0;h<=g;++h){if(!(h<g&&i(v=f[h],h,f))===b)if(b=!b)p=h,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),y=h-1;y>=p;--y)s.point(T[y],C[y]);s.lineEnd(),s.areaEnd()}b&&(T[h]=+t(v,h,f),C[h]=+e(v,h,f),s.point(r?+r(v,h,f):T[h],n?+n(v,h,f):C[h]))}if(w)return s=null,w+""||null}function u(){return Pre().defined(i).curve(a).context(o)}return c.x=function(f){return arguments.length?(t=typeof f=="function"?f:Er(+f),r=null,c):t},c.x0=function(f){return arguments.length?(t=typeof f=="function"?f:Er(+f),c):t},c.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Er(+f),c):r},c.y=function(f){return arguments.length?(e=typeof f=="function"?f:Er(+f),n=null,c):e},c.y0=function(f){return arguments.length?(e=typeof f=="function"?f:Er(+f),c):e},c.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Er(+f),c):n},c.lineX0=c.lineY0=function(){return u().x(t).y(e)},c.lineY1=function(){return u().x(t).y(n)},c.lineX1=function(){return u().x(r).y(e)},c.defined=function(f){return arguments.length?(i=typeof f=="function"?f:Er(!!f),c):i},c.curve=function(f){return arguments.length?(a=f,o!=null&&(s=a(o)),c):a},c.context=function(f){return arguments.length?(f==null?o=s=null:s=a(o=f),c):o},c}class kre{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function LNe(t){return new kre(t,!0)}function DNe(t){return new kre(t,!1)}const RF={draw(t,e){const n=dc(e/$T);t.moveTo(n,0),t.arc(0,0,n,0,jA)}},FNe={draw(t,e){const n=dc(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},Nre=dc(1/3),zNe=Nre*2,UNe={draw(t,e){const n=dc(e/zNe),r=n*Nre;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},BNe={draw(t,e){const n=dc(e),r=-n/2;t.rect(r,r,n,n)}},$Ne=.8908130915292852,Rre=BT($T/10)/BT(7*$T/10),HNe=BT(jA/10)*Rre,VNe=-_re(jA/10)*Rre,WNe={draw(t,e){const n=dc(e*$Ne),r=HNe*n,i=VNe*n;t.moveTo(0,-n),t.lineTo(r,i);for(let o=1;o<5;++o){const a=jA*o/5,s=_re(a),l=BT(a);t.lineTo(l*n,-s*n),t.lineTo(s*r-l*i,l*r+s*i)}t.closePath()}},Ok=dc(3),GNe={draw(t,e){const n=-dc(e/(Ok*3));t.moveTo(0,n*2),t.lineTo(-Ok*n,-n),t.lineTo(Ok*n,-n),t.closePath()}},Ks=-.5,Js=dc(3)/2,aL=1/dc(12),qNe=(aL/2+1)*3,YNe={draw(t,e){const n=dc(e/qNe),r=n/2,i=n*aL,o=r,a=n*aL+n,s=-o,l=a;t.moveTo(r,i),t.lineTo(o,a),t.lineTo(s,l),t.lineTo(Ks*r-Js*i,Js*r+Ks*i),t.lineTo(Ks*o-Js*a,Js*o+Ks*a),t.lineTo(Ks*s-Js*l,Js*s+Ks*l),t.lineTo(Ks*r+Js*i,Ks*i-Js*r),t.lineTo(Ks*o+Js*a,Ks*a-Js*o),t.lineTo(Ks*s+Js*l,Ks*l-Js*s),t.closePath()}};function XNe(t,e){let n=null,r=kF(i);t=typeof t=="function"?t:Er(t||RF),e=typeof e=="function"?e:Er(e===void 0?64:+e);function i(){let o;if(n||(n=o=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),o)return n=null,o+""||null}return i.type=function(o){return arguments.length?(t=typeof o=="function"?o:Er(o),i):t},i.size=function(o){return arguments.length?(e=typeof o=="function"?o:Er(+o),i):e},i.context=function(o){return arguments.length?(n=o??null,i):n},i}function HT(){}function VT(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function jre(t){this._context=t}jre.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:VT(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:VT(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function KNe(t){return new jre(t)}function Ire(t){this._context=t}Ire.prototype={areaStart:HT,areaEnd:HT,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:VT(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function JNe(t){return new Ire(t)}function Ore(t){this._context=t}Ore.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:VT(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function ZNe(t){return new Ore(t)}function Lre(t){this._context=t}Lre.prototype={areaStart:HT,areaEnd:HT,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function QNe(t){return new Lre(t)}function JH(t){return t<0?-1:1}function ZH(t,e,n){var r=t._x1-t._x0,i=e-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),a=(n-t._y1)/(i||r<0&&-0),s=(o*i+a*r)/(r+i);return(JH(o)+JH(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function QH(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function Lk(t,e,n){var r=t._x0,i=t._y0,o=t._x1,a=t._y1,s=(o-r)/3;t._context.bezierCurveTo(r+s,i+s*e,o-s,a-s*n,o,a)}function WT(t){this._context=t}WT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Lk(this,this._t0,QH(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Lk(this,QH(this,n=ZH(this,t,e)),n);break;default:Lk(this,this._t0,n=ZH(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function Dre(t){this._context=new Fre(t)}(Dre.prototype=Object.create(WT.prototype)).point=function(t,e){WT.prototype.point.call(this,e,t)};function Fre(t){this._context=t}Fre.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,o){this._context.bezierCurveTo(e,t,r,n,o,i)}};function eRe(t){return new WT(t)}function tRe(t){return new Dre(t)}function zre(t){this._context=t}zre.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=eV(t),i=eV(e),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],t[a],e[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function eV(t){var e,n=t.length-1,r,i=new Array(n),o=new Array(n),a=new Array(n);for(i[0]=0,o[0]=2,a[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,o[e]=4,a[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,o[n-1]=7,a[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/o[e-1],o[e]-=r,a[e]-=r*a[e-1];for(i[n-1]=a[n-1]/o[n-1],e=n-2;e>=0;--e)i[e]=(a[e]-i[e+1])/o[e];for(o[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)o[e]=2*t[e+1]-i[e+1];return[i,o]}function nRe(t){return new zre(t)}function OA(t,e){this._context=t,this._t=e}OA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function rRe(t){return new OA(t,.5)}function iRe(t){return new OA(t,0)}function oRe(t){return new OA(t,1)}function wv(t,e){if((a=t.length)>1)for(var n=1,r,i,o=t[e[0]],a,s=o.length;n<a;++n)for(i=o,o=t[e[n]],r=0;r<s;++r)o[r][1]+=o[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function sL(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function aRe(t,e){return t[e]}function sRe(t){const e=[];return e.key=t,e}function lRe(){var t=Er([]),e=sL,n=wv,r=aRe;function i(o){var a=Array.from(t.apply(this,arguments),sRe),s,l=a.length,c=-1,u;for(const f of o)for(s=0,++c;s<l;++s)(a[s][c]=[0,+r(f,a[s].key,c,o)]).data=f;for(s=0,u=NF(e(a));s<l;++s)a[u[s]].index=s;return n(a,u),a}return i.keys=function(o){return arguments.length?(t=typeof o=="function"?o:Er(Array.from(o)),i):t},i.value=function(o){return arguments.length?(r=typeof o=="function"?o:Er(+o),i):r},i.order=function(o){return arguments.length?(e=o==null?sL:typeof o=="function"?o:Er(Array.from(o)),i):e},i.offset=function(o){return arguments.length?(n=o??wv,i):n},i}function cRe(t,e){if((r=t.length)>0){for(var n,r,i=0,o=t[0].length,a;i<o;++i){for(a=n=0;n<r;++n)a+=t[n][i][1]||0;if(a)for(n=0;n<r;++n)t[n][i][1]/=a}wv(t,e)}}function uRe(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,o=r.length;n<o;++n){for(var a=0,s=0;a<i;++a)s+=t[a][n][1]||0;r[n][1]+=r[n][0]=-s/2}wv(t,e)}}function dRe(t,e){if(!(!((a=t.length)>0)||!((o=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,o,a;r<o;++r){for(var s=0,l=0,c=0;s<a;++s){for(var u=t[e[s]],f=u[r][1]||0,h=u[r-1][1]||0,p=(f-h)/2,y=0;y<s;++y){var g=t[e[y]],v=g[r][1]||0,b=g[r-1][1]||0;p+=v-b}l+=f,c+=p*f}i[r-1][1]+=i[r-1][0]=n,l&&(n-=c/l)}i[r-1][1]+=i[r-1][0]=n,wv(t,e)}}function xb(t){"@babel/helpers - typeof";return xb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xb(t)}var fRe=["type","size","sizeType"];function lL(){return lL=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},lL.apply(this,arguments)}function tV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function nV(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?tV(Object(n),!0).forEach(function(r){hRe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hRe(t,e,n){return e=pRe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pRe(t){var e=mRe(t,"string");return xb(e)=="symbol"?e:e+""}function mRe(t,e){if(xb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(xb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function gRe(t,e){if(t==null)return{};var n=yRe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function yRe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var Ure={symbolCircle:RF,symbolCross:FNe,symbolDiamond:UNe,symbolSquare:BNe,symbolStar:WNe,symbolTriangle:GNe,symbolWye:YNe},vRe=Math.PI/180,xRe=function(e){var n="symbol".concat(RA(e));return Ure[n]||RF},wRe=function(e,n,r){if(n==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var i=18*vRe;return 1.25*e*e*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},bRe=function(e,n){Ure["symbol".concat(RA(e))]=n},jF=function(e){var n=e.type,r=n===void 0?"circle":n,i=e.size,o=i===void 0?64:i,a=e.sizeType,s=a===void 0?"area":a,l=gRe(e,fRe),c=nV(nV({},l),{},{type:r,size:o,sizeType:s}),u=function(){var v=xRe(r),b=XNe().type(v).size(wRe(o,s,r));return b()},f=c.className,h=c.cx,p=c.cy,y=Dn(c,!0);return h===+h&&p===+p&&o===+o?ve.createElement("path",lL({},y,{className:Un("recharts-symbols",f),transform:"translate(".concat(h,", ").concat(p,")"),d:u()})):null};jF.registerSymbol=bRe;function bv(t){"@babel/helpers - typeof";return bv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bv(t)}function cL(){return cL=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},cL.apply(this,arguments)}function rV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function SRe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?rV(Object(n),!0).forEach(function(r){wb(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ERe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _Re(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,$re(r.key),r)}}function TRe(t,e,n){return e&&_Re(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function CRe(t,e,n){return e=GT(e),ARe(t,Bre()?Reflect.construct(e,n||[],GT(t).constructor):e.apply(t,n))}function ARe(t,e){if(e&&(bv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return MRe(t)}function MRe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Bre(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Bre=function(){return!!t})()}function GT(t){return GT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},GT(t)}function PRe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&uL(t,e)}function uL(t,e){return uL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},uL(t,e)}function wb(t,e,n){return e=$re(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $re(t){var e=kRe(t,"string");return bv(e)=="symbol"?e:e+""}function kRe(t,e){if(bv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(bv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Ll=32,IF=function(t){function e(){return ERe(this,e),CRe(this,e,arguments)}return PRe(e,t),TRe(e,[{key:"renderIcon",value:function(r){var i=this.props.inactiveColor,o=Ll/2,a=Ll/6,s=Ll/3,l=r.inactive?i:r.color;if(r.type==="plainline")return ve.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:o,x2:Ll,y2:o,className:"recharts-legend-icon"});if(r.type==="line")return ve.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(o,"h").concat(s,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(2*s,",").concat(o,`
            H`).concat(Ll,"M").concat(2*s,",").concat(o,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(s,",").concat(o),className:"recharts-legend-icon"});if(r.type==="rect")return ve.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(Ll/8,"h").concat(Ll,"v").concat(Ll*3/4,"h").concat(-32,"z"),className:"recharts-legend-icon"});if(ve.isValidElement(r.legendIcon)){var c=SRe({},r);return delete c.legendIcon,ve.cloneElement(r.legendIcon,c)}return ve.createElement(jF,{fill:l,cx:o,cy:o,size:Ll,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,i=this.props,o=i.payload,a=i.iconSize,s=i.layout,l=i.formatter,c=i.inactiveColor,u={x:0,y:0,width:Ll,height:Ll},f={display:s==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return o.map(function(p,y){var g=p.formatter||l,v=Un(wb(wb({"recharts-legend-item":!0},"legend-item-".concat(y),!0),"inactive",p.inactive));if(p.type==="none")return null;var b=kn(p.value)?null:p.value;id(!kn(p.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var w=p.inactive?c:p.color;return ve.createElement("li",cL({className:v,style:f,key:"legend-item-".concat(y)},UT(r.props,p,y)),ve.createElement(nL,{width:a,height:a,viewBox:u,style:h},r.renderIcon(p)),ve.createElement("span",{className:"recharts-legend-item-text",style:{color:w}},g?g(b,p,y):b))})}},{key:"render",value:function(){var r=this.props,i=r.payload,o=r.layout,a=r.align;if(!i||!i.length)return null;var s={padding:0,margin:0,textAlign:o==="horizontal"?a:"left"};return ve.createElement("ul",{className:"recharts-default-legend",style:s},this.renderItems())}}])}(_.PureComponent);wb(IF,"displayName","Legend");wb(IF,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var Dk,iV;function NRe(){if(iV)return Dk;iV=1;var t=PA();function e(){this.__data__=new t,this.size=0}return Dk=e,Dk}var Fk,oV;function RRe(){if(oV)return Fk;oV=1;function t(e){var n=this.__data__,r=n.delete(e);return this.size=n.size,r}return Fk=t,Fk}var zk,aV;function jRe(){if(aV)return zk;aV=1;function t(e){return this.__data__.get(e)}return zk=t,zk}var Uk,sV;function IRe(){if(sV)return Uk;sV=1;function t(e){return this.__data__.has(e)}return Uk=t,Uk}var Bk,lV;function ORe(){if(lV)return Bk;lV=1;var t=PA(),e=_F(),n=TF(),r=200;function i(o,a){var s=this.__data__;if(s instanceof t){var l=s.__data__;if(!e||l.length<r-1)return l.push([o,a]),this.size=++s.size,this;s=this.__data__=new n(l)}return s.set(o,a),this.size=s.size,this}return Bk=i,Bk}var $k,cV;function Hre(){if(cV)return $k;cV=1;var t=PA(),e=NRe(),n=RRe(),r=jRe(),i=IRe(),o=ORe();function a(s){var l=this.__data__=new t(s);this.size=l.size}return a.prototype.clear=e,a.prototype.delete=n,a.prototype.get=r,a.prototype.has=i,a.prototype.set=o,$k=a,$k}var Hk,uV;function LRe(){if(uV)return Hk;uV=1;var t="__lodash_hash_undefined__";function e(n){return this.__data__.set(n,t),this}return Hk=e,Hk}var Vk,dV;function DRe(){if(dV)return Vk;dV=1;function t(e){return this.__data__.has(e)}return Vk=t,Vk}var Wk,fV;function Vre(){if(fV)return Wk;fV=1;var t=TF(),e=LRe(),n=DRe();function r(i){var o=-1,a=i==null?0:i.length;for(this.__data__=new t;++o<a;)this.add(i[o])}return r.prototype.add=r.prototype.push=e,r.prototype.has=n,Wk=r,Wk}var Gk,hV;function Wre(){if(hV)return Gk;hV=1;function t(e,n){for(var r=-1,i=e==null?0:e.length;++r<i;)if(n(e[r],r,e))return!0;return!1}return Gk=t,Gk}var qk,pV;function Gre(){if(pV)return qk;pV=1;function t(e,n){return e.has(n)}return qk=t,qk}var Yk,mV;function qre(){if(mV)return Yk;mV=1;var t=Vre(),e=Wre(),n=Gre(),r=1,i=2;function o(a,s,l,c,u,f){var h=l&r,p=a.length,y=s.length;if(p!=y&&!(h&&y>p))return!1;var g=f.get(a),v=f.get(s);if(g&&v)return g==s&&v==a;var b=-1,w=!0,T=l&i?new t:void 0;for(f.set(a,s),f.set(s,a);++b<p;){var C=a[b],P=s[b];if(c)var M=h?c(P,C,b,s,a,f):c(C,P,b,a,s,f);if(M!==void 0){if(M)continue;w=!1;break}if(T){if(!e(s,function(k,I){if(!n(T,I)&&(C===k||u(C,k,l,c,f)))return T.push(I)})){w=!1;break}}else if(!(C===P||u(C,P,l,c,f))){w=!1;break}}return f.delete(a),f.delete(s),w}return Yk=o,Yk}var Xk,gV;function FRe(){if(gV)return Xk;gV=1;var t=su(),e=t.Uint8Array;return Xk=e,Xk}var Kk,yV;function zRe(){if(yV)return Kk;yV=1;function t(e){var n=-1,r=Array(e.size);return e.forEach(function(i,o){r[++n]=[o,i]}),r}return Kk=t,Kk}var Jk,vV;function OF(){if(vV)return Jk;vV=1;function t(e){var n=-1,r=Array(e.size);return e.forEach(function(i){r[++n]=i}),r}return Jk=t,Jk}var Zk,xV;function URe(){if(xV)return Zk;xV=1;var t=V1(),e=FRe(),n=EF(),r=qre(),i=zRe(),o=OF(),a=1,s=2,l="[object Boolean]",c="[object Date]",u="[object Error]",f="[object Map]",h="[object Number]",p="[object RegExp]",y="[object Set]",g="[object String]",v="[object Symbol]",b="[object ArrayBuffer]",w="[object DataView]",T=t?t.prototype:void 0,C=T?T.valueOf:void 0;function P(M,k,I,U,z,O,B){switch(I){case w:if(M.byteLength!=k.byteLength||M.byteOffset!=k.byteOffset)return!1;M=M.buffer,k=k.buffer;case b:return!(M.byteLength!=k.byteLength||!O(new e(M),new e(k)));case l:case c:case h:return n(+M,+k);case u:return M.name==k.name&&M.message==k.message;case p:case g:return M==k+"";case f:var $=i;case y:var F=U&a;if($||($=o),M.size!=k.size&&!F)return!1;var J=B.get(M);if(J)return J==k;U|=s,B.set(M,k);var K=r($(M),$(k),U,z,O,B);return B.delete(M),K;case v:if(C)return C.call(M)==C.call(k)}return!1}return Zk=P,Zk}var Qk,wV;function Yre(){if(wV)return Qk;wV=1;function t(e,n){for(var r=-1,i=n.length,o=e.length;++r<i;)e[o+r]=n[r];return e}return Qk=t,Qk}var eN,bV;function BRe(){if(bV)return eN;bV=1;var t=Yre(),e=Qa();function n(r,i,o){var a=i(r);return e(r)?a:t(a,o(r))}return eN=n,eN}var tN,SV;function $Re(){if(SV)return tN;SV=1;function t(e,n){for(var r=-1,i=e==null?0:e.length,o=0,a=[];++r<i;){var s=e[r];n(s,r,e)&&(a[o++]=s)}return a}return tN=t,tN}var nN,EV;function HRe(){if(EV)return nN;EV=1;function t(){return[]}return nN=t,nN}var rN,_V;function VRe(){if(_V)return rN;_V=1;var t=$Re(),e=HRe(),n=Object.prototype,r=n.propertyIsEnumerable,i=Object.getOwnPropertySymbols,o=i?function(a){return a==null?[]:(a=Object(a),t(i(a),function(s){return r.call(a,s)}))}:e;return rN=o,rN}var iN,TV;function WRe(){if(TV)return iN;TV=1;function t(e,n){for(var r=-1,i=Array(e);++r<e;)i[r]=n(r);return i}return iN=t,iN}var oN,CV;function GRe(){if(CV)return oN;CV=1;var t=_d(),e=Td(),n="[object Arguments]";function r(i){return e(i)&&t(i)==n}return oN=r,oN}var aN,AV;function LF(){if(AV)return aN;AV=1;var t=GRe(),e=Td(),n=Object.prototype,r=n.hasOwnProperty,i=n.propertyIsEnumerable,o=t(function(){return arguments}())?t:function(a){return e(a)&&r.call(a,"callee")&&!i.call(a,"callee")};return aN=o,aN}var _w={exports:{}},sN,MV;function qRe(){if(MV)return sN;MV=1;function t(){return!1}return sN=t,sN}_w.exports;var PV;function Xre(){return PV||(PV=1,function(t,e){var n=su(),r=qRe(),i=e&&!e.nodeType&&e,o=i&&!0&&t&&!t.nodeType&&t,a=o&&o.exports===i,s=a?n.Buffer:void 0,l=s?s.isBuffer:void 0,c=l||r;t.exports=c}(_w,_w.exports)),_w.exports}var lN,kV;function DF(){if(kV)return lN;kV=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function n(r,i){var o=typeof r;return i=i??t,!!i&&(o=="number"||o!="symbol"&&e.test(r))&&r>-1&&r%1==0&&r<i}return lN=n,lN}var cN,NV;function FF(){if(NV)return cN;NV=1;var t=9007199254740991;function e(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=t}return cN=e,cN}var uN,RV;function YRe(){if(RV)return uN;RV=1;var t=_d(),e=FF(),n=Td(),r="[object Arguments]",i="[object Array]",o="[object Boolean]",a="[object Date]",s="[object Error]",l="[object Function]",c="[object Map]",u="[object Number]",f="[object Object]",h="[object RegExp]",p="[object Set]",y="[object String]",g="[object WeakMap]",v="[object ArrayBuffer]",b="[object DataView]",w="[object Float32Array]",T="[object Float64Array]",C="[object Int8Array]",P="[object Int16Array]",M="[object Int32Array]",k="[object Uint8Array]",I="[object Uint8ClampedArray]",U="[object Uint16Array]",z="[object Uint32Array]",O={};O[w]=O[T]=O[C]=O[P]=O[M]=O[k]=O[I]=O[U]=O[z]=!0,O[r]=O[i]=O[v]=O[o]=O[b]=O[a]=O[s]=O[l]=O[c]=O[u]=O[f]=O[h]=O[p]=O[y]=O[g]=!1;function B($){return n($)&&e($.length)&&!!O[t($)]}return uN=B,uN}var dN,jV;function Kre(){if(jV)return dN;jV=1;function t(e){return function(n){return e(n)}}return dN=t,dN}var Tw={exports:{}};Tw.exports;var IV;function XRe(){return IV||(IV=1,function(t,e){var n=mre(),r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,o=i&&i.exports===r,a=o&&n.process,s=function(){try{var l=i&&i.require&&i.require("util").types;return l||a&&a.binding&&a.binding("util")}catch{}}();t.exports=s}(Tw,Tw.exports)),Tw.exports}var fN,OV;function Jre(){if(OV)return fN;OV=1;var t=YRe(),e=Kre(),n=XRe(),r=n&&n.isTypedArray,i=r?e(r):t;return fN=i,fN}var hN,LV;function KRe(){if(LV)return hN;LV=1;var t=WRe(),e=LF(),n=Qa(),r=Xre(),i=DF(),o=Jre(),a=Object.prototype,s=a.hasOwnProperty;function l(c,u){var f=n(c),h=!f&&e(c),p=!f&&!h&&r(c),y=!f&&!h&&!p&&o(c),g=f||h||p||y,v=g?t(c.length,String):[],b=v.length;for(var w in c)(u||s.call(c,w))&&!(g&&(w=="length"||p&&(w=="offset"||w=="parent")||y&&(w=="buffer"||w=="byteLength"||w=="byteOffset")||i(w,b)))&&v.push(w);return v}return hN=l,hN}var pN,DV;function JRe(){if(DV)return pN;DV=1;var t=Object.prototype;function e(n){var r=n&&n.constructor,i=typeof r=="function"&&r.prototype||t;return n===i}return pN=e,pN}var mN,FV;function Zre(){if(FV)return mN;FV=1;function t(e,n){return function(r){return e(n(r))}}return mN=t,mN}var gN,zV;function ZRe(){if(zV)return gN;zV=1;var t=Zre(),e=t(Object.keys,Object);return gN=e,gN}var yN,UV;function QRe(){if(UV)return yN;UV=1;var t=JRe(),e=ZRe(),n=Object.prototype,r=n.hasOwnProperty;function i(o){if(!t(o))return e(o);var a=[];for(var s in Object(o))r.call(o,s)&&s!="constructor"&&a.push(s);return a}return yN=i,yN}var vN,BV;function Y1(){if(BV)return vN;BV=1;var t=SF(),e=FF();function n(r){return r!=null&&e(r.length)&&!t(r)}return vN=n,vN}var xN,$V;function LA(){if($V)return xN;$V=1;var t=KRe(),e=QRe(),n=Y1();function r(i){return n(i)?t(i):e(i)}return xN=r,xN}var wN,HV;function eje(){if(HV)return wN;HV=1;var t=BRe(),e=VRe(),n=LA();function r(i){return t(i,n,e)}return wN=r,wN}var bN,VV;function tje(){if(VV)return bN;VV=1;var t=eje(),e=1,n=Object.prototype,r=n.hasOwnProperty;function i(o,a,s,l,c,u){var f=s&e,h=t(o),p=h.length,y=t(a),g=y.length;if(p!=g&&!f)return!1;for(var v=p;v--;){var b=h[v];if(!(f?b in a:r.call(a,b)))return!1}var w=u.get(o),T=u.get(a);if(w&&T)return w==a&&T==o;var C=!0;u.set(o,a),u.set(a,o);for(var P=f;++v<p;){b=h[v];var M=o[b],k=a[b];if(l)var I=f?l(k,M,b,a,o,u):l(M,k,b,o,a,u);if(!(I===void 0?M===k||c(M,k,s,l,u):I)){C=!1;break}P||(P=b=="constructor")}if(C&&!P){var U=o.constructor,z=a.constructor;U!=z&&"constructor"in o&&"constructor"in a&&!(typeof U=="function"&&U instanceof U&&typeof z=="function"&&z instanceof z)&&(C=!1)}return u.delete(o),u.delete(a),C}return bN=i,bN}var SN,WV;function nje(){if(WV)return SN;WV=1;var t=Mm(),e=su(),n=t(e,"DataView");return SN=n,SN}var EN,GV;function rje(){if(GV)return EN;GV=1;var t=Mm(),e=su(),n=t(e,"Promise");return EN=n,EN}var _N,qV;function Qre(){if(qV)return _N;qV=1;var t=Mm(),e=su(),n=t(e,"Set");return _N=n,_N}var TN,YV;function ije(){if(YV)return TN;YV=1;var t=Mm(),e=su(),n=t(e,"WeakMap");return TN=n,TN}var CN,XV;function oje(){if(XV)return CN;XV=1;var t=nje(),e=_F(),n=rje(),r=Qre(),i=ije(),o=_d(),a=gre(),s="[object Map]",l="[object Object]",c="[object Promise]",u="[object Set]",f="[object WeakMap]",h="[object DataView]",p=a(t),y=a(e),g=a(n),v=a(r),b=a(i),w=o;return(t&&w(new t(new ArrayBuffer(1)))!=h||e&&w(new e)!=s||n&&w(n.resolve())!=c||r&&w(new r)!=u||i&&w(new i)!=f)&&(w=function(T){var C=o(T),P=C==l?T.constructor:void 0,M=P?a(P):"";if(M)switch(M){case p:return h;case y:return s;case g:return c;case v:return u;case b:return f}return C}),CN=w,CN}var AN,KV;function aje(){if(KV)return AN;KV=1;var t=Hre(),e=qre(),n=URe(),r=tje(),i=oje(),o=Qa(),a=Xre(),s=Jre(),l=1,c="[object Arguments]",u="[object Array]",f="[object Object]",h=Object.prototype,p=h.hasOwnProperty;function y(g,v,b,w,T,C){var P=o(g),M=o(v),k=P?u:i(g),I=M?u:i(v);k=k==c?f:k,I=I==c?f:I;var U=k==f,z=I==f,O=k==I;if(O&&a(g)){if(!a(v))return!1;P=!0,U=!1}if(O&&!U)return C||(C=new t),P||s(g)?e(g,v,b,w,T,C):n(g,v,k,b,w,T,C);if(!(b&l)){var B=U&&p.call(g,"__wrapped__"),$=z&&p.call(v,"__wrapped__");if(B||$){var F=B?g.value():g,J=$?v.value():v;return C||(C=new t),T(F,J,b,w,C)}}return O?(C||(C=new t),r(g,v,b,w,T,C)):!1}return AN=y,AN}var MN,JV;function zF(){if(JV)return MN;JV=1;var t=aje(),e=Td();function n(r,i,o,a,s){return r===i?!0:r==null||i==null||!e(r)&&!e(i)?r!==r&&i!==i:t(r,i,o,a,n,s)}return MN=n,MN}var PN,ZV;function sje(){if(ZV)return PN;ZV=1;var t=Hre(),e=zF(),n=1,r=2;function i(o,a,s,l){var c=s.length,u=c,f=!l;if(o==null)return!u;for(o=Object(o);c--;){var h=s[c];if(f&&h[2]?h[1]!==o[h[0]]:!(h[0]in o))return!1}for(;++c<u;){h=s[c];var p=h[0],y=o[p],g=h[1];if(f&&h[2]){if(y===void 0&&!(p in o))return!1}else{var v=new t;if(l)var b=l(y,g,p,o,a,v);if(!(b===void 0?e(g,y,n|r,l,v):b))return!1}}return!0}return PN=i,PN}var kN,QV;function eie(){if(QV)return kN;QV=1;var t=ch();function e(n){return n===n&&!t(n)}return kN=e,kN}var NN,eW;function lje(){if(eW)return NN;eW=1;var t=eie(),e=LA();function n(r){for(var i=e(r),o=i.length;o--;){var a=i[o],s=r[a];i[o]=[a,s,t(s)]}return i}return NN=n,NN}var RN,tW;function tie(){if(tW)return RN;tW=1;function t(e,n){return function(r){return r==null?!1:r[e]===n&&(n!==void 0||e in Object(r))}}return RN=t,RN}var jN,nW;function cje(){if(nW)return jN;nW=1;var t=sje(),e=lje(),n=tie();function r(i){var o=e(i);return o.length==1&&o[0][2]?n(o[0][0],o[0][1]):function(a){return a===i||t(a,i,o)}}return jN=r,jN}var IN,rW;function uje(){if(rW)return IN;rW=1;function t(e,n){return e!=null&&n in Object(e)}return IN=t,IN}var ON,iW;function dje(){if(iW)return ON;iW=1;var t=xre(),e=LF(),n=Qa(),r=DF(),i=FF(),o=NA();function a(s,l,c){l=t(l,s);for(var u=-1,f=l.length,h=!1;++u<f;){var p=o(l[u]);if(!(h=s!=null&&c(s,p)))break;s=s[p]}return h||++u!=f?h:(f=s==null?0:s.length,!!f&&i(f)&&r(p,f)&&(n(s)||e(s)))}return ON=a,ON}var LN,oW;function fje(){if(oW)return LN;oW=1;var t=uje(),e=dje();function n(r,i){return r!=null&&e(r,i,t)}return LN=n,LN}var DN,aW;function hje(){if(aW)return DN;aW=1;var t=zF(),e=wre(),n=fje(),r=bF(),i=eie(),o=tie(),a=NA(),s=1,l=2;function c(u,f){return r(u)&&i(f)?o(a(u),f):function(h){var p=e(h,u);return p===void 0&&p===f?n(h,u):t(f,p,s|l)}}return DN=c,DN}var FN,sW;function A0(){if(sW)return FN;sW=1;function t(e){return e}return FN=t,FN}var zN,lW;function pje(){if(lW)return zN;lW=1;function t(e){return function(n){return n==null?void 0:n[e]}}return zN=t,zN}var UN,cW;function mje(){if(cW)return UN;cW=1;var t=AF();function e(n){return function(r){return t(r,n)}}return UN=e,UN}var BN,uW;function gje(){if(uW)return BN;uW=1;var t=pje(),e=mje(),n=bF(),r=NA();function i(o){return n(o)?t(r(o)):e(o)}return BN=i,BN}var $N,dW;function uh(){if(dW)return $N;dW=1;var t=cje(),e=hje(),n=A0(),r=Qa(),i=gje();function o(a){return typeof a=="function"?a:a==null?n:typeof a=="object"?r(a)?e(a[0],a[1]):t(a):i(a)}return $N=o,$N}var HN,fW;function nie(){if(fW)return HN;fW=1;function t(e,n,r,i){for(var o=e.length,a=r+(i?1:-1);i?a--:++a<o;)if(n(e[a],a,e))return a;return-1}return HN=t,HN}var VN,hW;function yje(){if(hW)return VN;hW=1;function t(e){return e!==e}return VN=t,VN}var WN,pW;function vje(){if(pW)return WN;pW=1;function t(e,n,r){for(var i=r-1,o=e.length;++i<o;)if(e[i]===n)return i;return-1}return WN=t,WN}var GN,mW;function xje(){if(mW)return GN;mW=1;var t=nie(),e=yje(),n=vje();function r(i,o,a){return o===o?n(i,o,a):t(i,e,a)}return GN=r,GN}var qN,gW;function wje(){if(gW)return qN;gW=1;var t=xje();function e(n,r){var i=n==null?0:n.length;return!!i&&t(n,r,0)>-1}return qN=e,qN}var YN,yW;function bje(){if(yW)return YN;yW=1;function t(e,n,r){for(var i=-1,o=e==null?0:e.length;++i<o;)if(r(n,e[i]))return!0;return!1}return YN=t,YN}var XN,vW;function Sje(){if(vW)return XN;vW=1;function t(){}return XN=t,XN}var KN,xW;function Eje(){if(xW)return KN;xW=1;var t=Qre(),e=Sje(),n=OF(),r=1/0,i=t&&1/n(new t([,-0]))[1]==r?function(o){return new t(o)}:e;return KN=i,KN}var JN,wW;function _je(){if(wW)return JN;wW=1;var t=Vre(),e=wje(),n=bje(),r=Gre(),i=Eje(),o=OF(),a=200;function s(l,c,u){var f=-1,h=e,p=l.length,y=!0,g=[],v=g;if(u)y=!1,h=n;else if(p>=a){var b=c?null:i(l);if(b)return o(b);y=!1,h=r,v=new t}else v=c?[]:g;e:for(;++f<p;){var w=l[f],T=c?c(w):w;if(w=u||w!==0?w:0,y&&T===T){for(var C=v.length;C--;)if(v[C]===T)continue e;c&&v.push(T),g.push(w)}else h(v,T,u)||(v!==g&&v.push(T),g.push(w))}return g}return JN=s,JN}var ZN,bW;function Tje(){if(bW)return ZN;bW=1;var t=uh(),e=_je();function n(r,i){return r&&r.length?e(r,t(i,2)):[]}return ZN=n,ZN}var Cje=Tje();const SW=$n(Cje);function rie(t,e,n){return e===!0?SW(t,n):kn(e)?SW(t,e):t}function Sv(t){"@babel/helpers - typeof";return Sv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sv(t)}var Aje=["ref"];function EW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Uu(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?EW(Object(n),!0).forEach(function(r){DA(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):EW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Mje(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _W(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,oie(r.key),r)}}function Pje(t,e,n){return e&&_W(t.prototype,e),n&&_W(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function kje(t,e,n){return e=qT(e),Nje(t,iie()?Reflect.construct(e,n||[],qT(t).constructor):e.apply(t,n))}function Nje(t,e){if(e&&(Sv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Rje(t)}function Rje(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function iie(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(iie=function(){return!!t})()}function qT(t){return qT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},qT(t)}function jje(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&dL(t,e)}function dL(t,e){return dL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},dL(t,e)}function DA(t,e,n){return e=oie(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function oie(t){var e=Ije(t,"string");return Sv(e)=="symbol"?e:e+""}function Ije(t,e){if(Sv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Sv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Oje(t,e){if(t==null)return{};var n=Lje(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Lje(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Dje(t){return t.value}function Fje(t,e){if(ve.isValidElement(t))return ve.cloneElement(t,e);if(typeof t=="function")return ve.createElement(t,e);e.ref;var n=Oje(e,Aje);return ve.createElement(IF,n)}var TW=1,Qy=function(t){function e(){var n;Mje(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=kje(this,e,[].concat(i)),DA(n,"lastBoundingBox",{width:-1,height:-1}),n}return jje(e,t),Pje(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>TW||Math.abs(i.height-this.lastBoundingBox.height)>TW)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,r&&r(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Uu({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var i=this.props,o=i.layout,a=i.align,s=i.verticalAlign,l=i.margin,c=i.chartWidth,u=i.chartHeight,f,h;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(a==="center"&&o==="vertical"){var p=this.getBBoxSnapshot();f={left:((c||0)-p.width)/2}}else f=a==="right"?{right:l&&l.right||0}:{left:l&&l.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(s==="middle"){var y=this.getBBoxSnapshot();h={top:((u||0)-y.height)/2}}else h=s==="bottom"?{bottom:l&&l.bottom||0}:{top:l&&l.top||0};return Uu(Uu({},f),h)}},{key:"render",value:function(){var r=this,i=this.props,o=i.content,a=i.width,s=i.height,l=i.wrapperStyle,c=i.payloadUniqBy,u=i.payload,f=Uu(Uu({position:"absolute",width:a||"auto",height:s||"auto"},this.getDefaultPosition(l)),l);return ve.createElement("div",{className:"recharts-legend-wrapper",style:f,ref:function(p){r.wrapperNode=p}},Fje(o,Uu(Uu({},this.props),{},{payload:rie(u,c,Dje)})))}}],[{key:"getWithHeight",value:function(r,i){var o=Uu(Uu({},this.defaultProps),r.props),a=o.layout;return a==="vertical"&&Et(r.props.height)?{height:r.props.height}:a==="horizontal"?{width:r.props.width||i}:null}}])}(_.PureComponent);DA(Qy,"displayName","Legend");DA(Qy,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var QN,CW;function zje(){if(CW)return QN;CW=1;var t=V1(),e=LF(),n=Qa(),r=t?t.isConcatSpreadable:void 0;function i(o){return n(o)||e(o)||!!(r&&o&&o[r])}return QN=i,QN}var eR,AW;function aie(){if(AW)return eR;AW=1;var t=Yre(),e=zje();function n(r,i,o,a,s){var l=-1,c=r.length;for(o||(o=e),s||(s=[]);++l<c;){var u=r[l];i>0&&o(u)?i>1?n(u,i-1,o,a,s):t(s,u):a||(s[s.length]=u)}return s}return eR=n,eR}var tR,MW;function Uje(){if(MW)return tR;MW=1;function t(e){return function(n,r,i){for(var o=-1,a=Object(n),s=i(n),l=s.length;l--;){var c=s[e?l:++o];if(r(a[c],c,a)===!1)break}return n}}return tR=t,tR}var nR,PW;function Bje(){if(PW)return nR;PW=1;var t=Uje(),e=t();return nR=e,nR}var rR,kW;function sie(){if(kW)return rR;kW=1;var t=Bje(),e=LA();function n(r,i){return r&&t(r,i,e)}return rR=n,rR}var iR,NW;function $je(){if(NW)return iR;NW=1;var t=Y1();function e(n,r){return function(i,o){if(i==null)return i;if(!t(i))return n(i,o);for(var a=i.length,s=r?a:-1,l=Object(i);(r?s--:++s<a)&&o(l[s],s,l)!==!1;);return i}}return iR=e,iR}var oR,RW;function UF(){if(RW)return oR;RW=1;var t=sie(),e=$je(),n=e(t);return oR=n,oR}var aR,jW;function lie(){if(jW)return aR;jW=1;var t=UF(),e=Y1();function n(r,i){var o=-1,a=e(r)?Array(r.length):[];return t(r,function(s,l,c){a[++o]=i(s,l,c)}),a}return aR=n,aR}var sR,IW;function Hje(){if(IW)return sR;IW=1;function t(e,n){var r=e.length;for(e.sort(n);r--;)e[r]=e[r].value;return e}return sR=t,sR}var lR,OW;function Vje(){if(OW)return lR;OW=1;var t=T0();function e(n,r){if(n!==r){var i=n!==void 0,o=n===null,a=n===n,s=t(n),l=r!==void 0,c=r===null,u=r===r,f=t(r);if(!c&&!f&&!s&&n>r||s&&l&&u&&!c&&!f||o&&l&&u||!i&&u||!a)return 1;if(!o&&!s&&!f&&n<r||f&&i&&a&&!o&&!s||c&&i&&a||!l&&a||!u)return-1}return 0}return lR=e,lR}var cR,LW;function Wje(){if(LW)return cR;LW=1;var t=Vje();function e(n,r,i){for(var o=-1,a=n.criteria,s=r.criteria,l=a.length,c=i.length;++o<l;){var u=t(a[o],s[o]);if(u){if(o>=c)return u;var f=i[o];return u*(f=="desc"?-1:1)}}return n.index-r.index}return cR=e,cR}var uR,DW;function Gje(){if(DW)return uR;DW=1;var t=CF(),e=AF(),n=uh(),r=lie(),i=Hje(),o=Kre(),a=Wje(),s=A0(),l=Qa();function c(u,f,h){f.length?f=t(f,function(g){return l(g)?function(v){return e(v,g.length===1?g[0]:g)}:g}):f=[s];var p=-1;f=t(f,o(n));var y=r(u,function(g,v,b){var w=t(f,function(T){return T(g)});return{criteria:w,index:++p,value:g}});return i(y,function(g,v){return a(g,v,h)})}return uR=c,uR}var dR,FW;function qje(){if(FW)return dR;FW=1;function t(e,n,r){switch(r.length){case 0:return e.call(n);case 1:return e.call(n,r[0]);case 2:return e.call(n,r[0],r[1]);case 3:return e.call(n,r[0],r[1],r[2])}return e.apply(n,r)}return dR=t,dR}var fR,zW;function Yje(){if(zW)return fR;zW=1;var t=qje(),e=Math.max;function n(r,i,o){return i=e(i===void 0?r.length-1:i,0),function(){for(var a=arguments,s=-1,l=e(a.length-i,0),c=Array(l);++s<l;)c[s]=a[i+s];s=-1;for(var u=Array(i+1);++s<i;)u[s]=a[s];return u[i]=o(c),t(r,this,u)}}return fR=n,fR}var hR,UW;function Xje(){if(UW)return hR;UW=1;function t(e){return function(){return e}}return hR=t,hR}var pR,BW;function cie(){if(BW)return pR;BW=1;var t=Mm(),e=function(){try{var n=t(Object,"defineProperty");return n({},"",{}),n}catch{}}();return pR=e,pR}var mR,$W;function Kje(){if($W)return mR;$W=1;var t=Xje(),e=cie(),n=A0(),r=e?function(i,o){return e(i,"toString",{configurable:!0,enumerable:!1,value:t(o),writable:!0})}:n;return mR=r,mR}var gR,HW;function Jje(){if(HW)return gR;HW=1;var t=800,e=16,n=Date.now;function r(i){var o=0,a=0;return function(){var s=n(),l=e-(s-a);if(a=s,l>0){if(++o>=t)return arguments[0]}else o=0;return i.apply(void 0,arguments)}}return gR=r,gR}var yR,VW;function Zje(){if(VW)return yR;VW=1;var t=Kje(),e=Jje(),n=e(t);return yR=n,yR}var vR,WW;function Qje(){if(WW)return vR;WW=1;var t=A0(),e=Yje(),n=Zje();function r(i,o){return n(e(i,o,t),i+"")}return vR=r,vR}var xR,GW;function FA(){if(GW)return xR;GW=1;var t=EF(),e=Y1(),n=DF(),r=ch();function i(o,a,s){if(!r(s))return!1;var l=typeof a;return(l=="number"?e(s)&&n(a,s.length):l=="string"&&a in s)?t(s[a],o):!1}return xR=i,xR}var wR,qW;function eIe(){if(qW)return wR;qW=1;var t=aie(),e=Gje(),n=Qje(),r=FA(),i=n(function(o,a){if(o==null)return[];var s=a.length;return s>1&&r(o,a[0],a[1])?a=[]:s>2&&r(a[0],a[1],a[2])&&(a=[a[0]]),e(o,t(a,1),[])});return wR=i,wR}var tIe=eIe();const BF=$n(tIe);function bb(t){"@babel/helpers - typeof";return bb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bb(t)}function fL(){return fL=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fL.apply(this,arguments)}function nIe(t,e){return aIe(t)||oIe(t,e)||iIe(t,e)||rIe()}function rIe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iIe(t,e){if(t){if(typeof t=="string")return YW(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return YW(t,e)}}function YW(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function oIe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}function aIe(t){if(Array.isArray(t))return t}function XW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function bR(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?XW(Object(n),!0).forEach(function(r){sIe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):XW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function sIe(t,e,n){return e=lIe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lIe(t){var e=cIe(t,"string");return bb(e)=="symbol"?e:e+""}function cIe(t,e){if(bb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(bb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function uIe(t){return Array.isArray(t)&&no(t[0])&&no(t[1])?t.join(" ~ "):t}var dIe=function(e){var n=e.separator,r=n===void 0?" : ":n,i=e.contentStyle,o=i===void 0?{}:i,a=e.itemStyle,s=a===void 0?{}:a,l=e.labelStyle,c=l===void 0?{}:l,u=e.payload,f=e.formatter,h=e.itemSorter,p=e.wrapperClassName,y=e.labelClassName,g=e.label,v=e.labelFormatter,b=e.accessibilityLayer,w=b===void 0?!1:b,T=function(){if(u&&u.length){var B={padding:0,margin:0},$=(h?BF(u,h):u).map(function(F,J){if(F.type==="none")return null;var K=bR({display:"block",paddingTop:4,paddingBottom:4,color:F.color||"#000"},s),Z=F.formatter||f||uIe,H=F.value,Y=F.name,L=H,N=Y;if(Z&&L!=null&&N!=null){var V=Z(H,Y,F,J,u);if(Array.isArray(V)){var W=nIe(V,2);L=W[0],N=W[1]}else L=V}return ve.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(J),style:K},no(N)?ve.createElement("span",{className:"recharts-tooltip-item-name"},N):null,no(N)?ve.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,ve.createElement("span",{className:"recharts-tooltip-item-value"},L),ve.createElement("span",{className:"recharts-tooltip-item-unit"},F.unit||""))});return ve.createElement("ul",{className:"recharts-tooltip-item-list",style:B},$)}return null},C=bR({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},o),P=bR({margin:0},c),M=!jn(g),k=M?g:"",I=Un("recharts-default-tooltip",p),U=Un("recharts-tooltip-label",y);M&&v&&u!==void 0&&u!==null&&(k=v(g,u));var z=w?{role:"status","aria-live":"assertive"}:{};return ve.createElement("div",fL({className:I,style:C},z),ve.createElement("p",{className:U,style:P},ve.isValidElement(k)?k:"".concat(k)),T())};function Sb(t){"@babel/helpers - typeof";return Sb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sb(t)}function UE(t,e,n){return e=fIe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fIe(t){var e=hIe(t,"string");return Sb(e)=="symbol"?e:e+""}function hIe(t,e){if(Sb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Sb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var qx="recharts-tooltip-wrapper",pIe={visibility:"hidden"};function mIe(t){var e=t.coordinate,n=t.translateX,r=t.translateY;return Un(qx,UE(UE(UE(UE({},"".concat(qx,"-right"),Et(n)&&e&&Et(e.x)&&n>=e.x),"".concat(qx,"-left"),Et(n)&&e&&Et(e.x)&&n<e.x),"".concat(qx,"-bottom"),Et(r)&&e&&Et(e.y)&&r>=e.y),"".concat(qx,"-top"),Et(r)&&e&&Et(e.y)&&r<e.y))}function KW(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.key,i=t.offsetTopLeft,o=t.position,a=t.reverseDirection,s=t.tooltipDimension,l=t.viewBox,c=t.viewBoxDimension;if(o&&Et(o[r]))return o[r];var u=n[r]-s-i,f=n[r]+i;if(e[r])return a[r]?u:f;if(a[r]){var h=u,p=l[r];return h<p?Math.max(f,l[r]):Math.max(u,l[r])}var y=f+s,g=l[r]+c;return y>g?Math.max(u,l[r]):Math.max(f,l[r])}function gIe(t){var e=t.translateX,n=t.translateY,r=t.useTranslate3d;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function yIe(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.offsetTopLeft,i=t.position,o=t.reverseDirection,a=t.tooltipBox,s=t.useTranslate3d,l=t.viewBox,c,u,f;return a.height>0&&a.width>0&&n?(u=KW({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:o,tooltipDimension:a.width,viewBox:l,viewBoxDimension:l.width}),f=KW({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:o,tooltipDimension:a.height,viewBox:l,viewBoxDimension:l.height}),c=gIe({translateX:u,translateY:f,useTranslate3d:s})):c=pIe,{cssProperties:c,cssClasses:mIe({translateX:u,translateY:f,coordinate:n})}}function Ev(t){"@babel/helpers - typeof";return Ev=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ev(t)}function JW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ZW(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?JW(Object(n),!0).forEach(function(r){pL(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):JW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function vIe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function xIe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,die(r.key),r)}}function wIe(t,e,n){return e&&xIe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function bIe(t,e,n){return e=YT(e),SIe(t,uie()?Reflect.construct(e,n||[],YT(t).constructor):e.apply(t,n))}function SIe(t,e){if(e&&(Ev(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return EIe(t)}function EIe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function uie(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(uie=function(){return!!t})()}function YT(t){return YT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},YT(t)}function _Ie(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hL(t,e)}function hL(t,e){return hL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},hL(t,e)}function pL(t,e,n){return e=die(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function die(t){var e=TIe(t,"string");return Ev(e)=="symbol"?e:e+""}function TIe(t,e){if(Ev(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ev(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var QW=1,CIe=function(t){function e(){var n;vIe(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=bIe(this,e,[].concat(i)),pL(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),pL(n,"handleKeyDown",function(a){if(a.key==="Escape"){var s,l,c,u;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(s=(l=n.props.coordinate)===null||l===void 0?void 0:l.x)!==null&&s!==void 0?s:0,y:(c=(u=n.props.coordinate)===null||u===void 0?void 0:u.y)!==null&&c!==void 0?c:0}})}}),n}return _Ie(e,t),wIe(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>QW||Math.abs(r.height-this.state.lastBoundingBox.height)>QW)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,i=this.props,o=i.active,a=i.allowEscapeViewBox,s=i.animationDuration,l=i.animationEasing,c=i.children,u=i.coordinate,f=i.hasPayload,h=i.isAnimationActive,p=i.offset,y=i.position,g=i.reverseDirection,v=i.useTranslate3d,b=i.viewBox,w=i.wrapperStyle,T=yIe({allowEscapeViewBox:a,coordinate:u,offsetTopLeft:p,position:y,reverseDirection:g,tooltipBox:this.state.lastBoundingBox,useTranslate3d:v,viewBox:b}),C=T.cssClasses,P=T.cssProperties,M=ZW(ZW({transition:h&&o?"transform ".concat(s,"ms ").concat(l):void 0},P),{},{pointerEvents:"none",visibility:!this.state.dismissed&&o&&f?"visible":"hidden",position:"absolute",top:0,left:0},w);return ve.createElement("div",{tabIndex:-1,className:C,style:M,ref:function(I){r.wrapperNode=I}},c)}}])}(_.PureComponent),AIe=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},M0={isSsr:AIe()};function _v(t){"@babel/helpers - typeof";return _v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_v(t)}function eG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function tG(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?eG(Object(n),!0).forEach(function(r){$F(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):eG(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function MIe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function PIe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,hie(r.key),r)}}function kIe(t,e,n){return e&&PIe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function NIe(t,e,n){return e=XT(e),RIe(t,fie()?Reflect.construct(e,n||[],XT(t).constructor):e.apply(t,n))}function RIe(t,e){if(e&&(_v(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return jIe(t)}function jIe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function fie(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(fie=function(){return!!t})()}function XT(t){return XT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},XT(t)}function IIe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mL(t,e)}function mL(t,e){return mL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},mL(t,e)}function $F(t,e,n){return e=hie(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hie(t){var e=OIe(t,"string");return _v(e)=="symbol"?e:e+""}function OIe(t,e){if(_v(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(_v(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function LIe(t){return t.dataKey}function DIe(t,e){return ve.isValidElement(t)?ve.cloneElement(t,e):typeof t=="function"?ve.createElement(t,e):ve.createElement(dIe,e)}var Gl=function(t){function e(){return MIe(this,e),NIe(this,e,arguments)}return IIe(e,t),kIe(e,[{key:"render",value:function(){var r=this,i=this.props,o=i.active,a=i.allowEscapeViewBox,s=i.animationDuration,l=i.animationEasing,c=i.content,u=i.coordinate,f=i.filterNull,h=i.isAnimationActive,p=i.offset,y=i.payload,g=i.payloadUniqBy,v=i.position,b=i.reverseDirection,w=i.useTranslate3d,T=i.viewBox,C=i.wrapperStyle,P=y??[];f&&P.length&&(P=rie(y.filter(function(k){return k.value!=null&&(k.hide!==!0||r.props.includeHidden)}),g,LIe));var M=P.length>0;return ve.createElement(CIe,{allowEscapeViewBox:a,animationDuration:s,animationEasing:l,isAnimationActive:h,active:o,coordinate:u,hasPayload:M,offset:p,position:v,reverseDirection:b,useTranslate3d:w,viewBox:T,wrapperStyle:C},DIe(c,tG(tG({},this.props),{},{payload:P})))}}])}(_.PureComponent);$F(Gl,"displayName","Tooltip");$F(Gl,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!M0.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var SR,nG;function FIe(){if(nG)return SR;nG=1;var t=su(),e=function(){return t.Date.now()};return SR=e,SR}var ER,rG;function zIe(){if(rG)return ER;rG=1;var t=/\s/;function e(n){for(var r=n.length;r--&&t.test(n.charAt(r)););return r}return ER=e,ER}var _R,iG;function UIe(){if(iG)return _R;iG=1;var t=zIe(),e=/^\s+/;function n(r){return r&&r.slice(0,t(r)+1).replace(e,"")}return _R=n,_R}var TR,oG;function pie(){if(oG)return TR;oG=1;var t=UIe(),e=ch(),n=T0(),r=NaN,i=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,a=/^0o[0-7]+$/i,s=parseInt;function l(c){if(typeof c=="number")return c;if(n(c))return r;if(e(c)){var u=typeof c.valueOf=="function"?c.valueOf():c;c=e(u)?u+"":u}if(typeof c!="string")return c===0?c:+c;c=t(c);var f=o.test(c);return f||a.test(c)?s(c.slice(2),f?2:8):i.test(c)?r:+c}return TR=l,TR}var CR,aG;function BIe(){if(aG)return CR;aG=1;var t=ch(),e=FIe(),n=pie(),r="Expected a function",i=Math.max,o=Math.min;function a(s,l,c){var u,f,h,p,y,g,v=0,b=!1,w=!1,T=!0;if(typeof s!="function")throw new TypeError(r);l=n(l)||0,t(c)&&(b=!!c.leading,w="maxWait"in c,h=w?i(n(c.maxWait)||0,l):h,T="trailing"in c?!!c.trailing:T);function C($){var F=u,J=f;return u=f=void 0,v=$,p=s.apply(J,F),p}function P($){return v=$,y=setTimeout(I,l),b?C($):p}function M($){var F=$-g,J=$-v,K=l-F;return w?o(K,h-J):K}function k($){var F=$-g,J=$-v;return g===void 0||F>=l||F<0||w&&J>=h}function I(){var $=e();if(k($))return U($);y=setTimeout(I,M($))}function U($){return y=void 0,T&&u?C($):(u=f=void 0,p)}function z(){y!==void 0&&clearTimeout(y),v=0,u=g=f=y=void 0}function O(){return y===void 0?p:U(e())}function B(){var $=e(),F=k($);if(u=arguments,f=this,g=$,F){if(y===void 0)return P(g);if(w)return clearTimeout(y),y=setTimeout(I,l),C(g)}return y===void 0&&(y=setTimeout(I,l)),p}return B.cancel=z,B.flush=O,B}return CR=a,CR}var AR,sG;function $Ie(){if(sG)return AR;sG=1;var t=BIe(),e=ch(),n="Expected a function";function r(i,o,a){var s=!0,l=!0;if(typeof i!="function")throw new TypeError(n);return e(a)&&(s="leading"in a?!!a.leading:s,l="trailing"in a?!!a.trailing:l),t(i,o,{leading:s,maxWait:o,trailing:l})}return AR=r,AR}var HIe=$Ie();const mie=$n(HIe);function Eb(t){"@babel/helpers - typeof";return Eb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Eb(t)}function lG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function BE(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?lG(Object(n),!0).forEach(function(r){VIe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lG(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function VIe(t,e,n){return e=WIe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function WIe(t){var e=GIe(t,"string");return Eb(e)=="symbol"?e:e+""}function GIe(t,e){if(Eb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Eb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function qIe(t,e){return JIe(t)||KIe(t,e)||XIe(t,e)||YIe()}function YIe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function XIe(t,e){if(t){if(typeof t=="string")return cG(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return cG(t,e)}}function cG(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function KIe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}function JIe(t){if(Array.isArray(t))return t}var gie=_.forwardRef(function(t,e){var n=t.aspect,r=t.initialDimension,i=r===void 0?{width:-1,height:-1}:r,o=t.width,a=o===void 0?"100%":o,s=t.height,l=s===void 0?"100%":s,c=t.minWidth,u=c===void 0?0:c,f=t.minHeight,h=t.maxHeight,p=t.children,y=t.debounce,g=y===void 0?0:y,v=t.id,b=t.className,w=t.onResize,T=t.style,C=T===void 0?{}:T,P=_.useRef(null),M=_.useRef();M.current=w,_.useImperativeHandle(e,function(){return Object.defineProperty(P.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),P.current},configurable:!0})});var k=_.useState({containerWidth:i.width,containerHeight:i.height}),I=qIe(k,2),U=I[0],z=I[1],O=_.useCallback(function($,F){z(function(J){var K=Math.round($),Z=Math.round(F);return J.containerWidth===K&&J.containerHeight===Z?J:{containerWidth:K,containerHeight:Z}})},[]);_.useEffect(function(){var $=function(Y){var L,N=Y[0].contentRect,V=N.width,W=N.height;O(V,W),(L=M.current)===null||L===void 0||L.call(M,V,W)};g>0&&($=mie($,g,{trailing:!0,leading:!1}));var F=new ResizeObserver($),J=P.current.getBoundingClientRect(),K=J.width,Z=J.height;return O(K,Z),F.observe(P.current),function(){F.disconnect()}},[O,g]);var B=_.useMemo(function(){var $=U.containerWidth,F=U.containerHeight;if($<0||F<0)return null;id(kp(a)||kp(l),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,a,l),id(!n||n>0,"The aspect(%s) must be greater than zero.",n);var J=kp(a)?$:a,K=kp(l)?F:l;n&&n>0&&(J?K=J/n:K&&(J=K*n),h&&K>h&&(K=h)),id(J>0||K>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,J,K,a,l,u,f,n);var Z=!Array.isArray(p)&&rd(p.type).endsWith("Chart");return ve.Children.map(p,function(H){return bre.isElement(H)?_.cloneElement(H,BE({width:J,height:K},Z?{style:BE({height:"100%",width:"100%",maxHeight:K,maxWidth:J},H.props.style)}:{})):H})},[n,p,l,h,f,u,U,a]);return ve.createElement("div",{id:v?"".concat(v):void 0,className:Un("recharts-responsive-container",b),style:BE(BE({},C),{},{width:a,height:l,minWidth:u,minHeight:f,maxHeight:h}),ref:P},B)}),yie=function(e){return null};yie.displayName="Cell";function _b(t){"@babel/helpers - typeof";return _b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_b(t)}function uG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function gL(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?uG(Object(n),!0).forEach(function(r){ZIe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uG(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ZIe(t,e,n){return e=QIe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function QIe(t){var e=eOe(t,"string");return _b(e)=="symbol"?e:e+""}function eOe(t,e){if(_b(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(_b(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Vg={widthCache:{},cacheCount:0},tOe=2e3,nOe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},dG="recharts_measurement_span";function rOe(t){var e=gL({},t);return Object.keys(e).forEach(function(n){e[n]||delete e[n]}),e}var zw=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||M0.isSsr)return{width:0,height:0};var r=rOe(n),i=JSON.stringify({text:e,copyStyle:r});if(Vg.widthCache[i])return Vg.widthCache[i];try{var o=document.getElementById(dG);o||(o=document.createElement("span"),o.setAttribute("id",dG),o.setAttribute("aria-hidden","true"),document.body.appendChild(o));var a=gL(gL({},nOe),r);Object.assign(o.style,a),o.textContent="".concat(e);var s=o.getBoundingClientRect(),l={width:s.width,height:s.height};return Vg.widthCache[i]=l,++Vg.cacheCount>tOe&&(Vg.cacheCount=0,Vg.widthCache={}),l}catch{return{width:0,height:0}}},iOe=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function Tb(t){"@babel/helpers - typeof";return Tb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tb(t)}function KT(t,e){return lOe(t)||sOe(t,e)||aOe(t,e)||oOe()}function oOe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aOe(t,e){if(t){if(typeof t=="string")return fG(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fG(t,e)}}function fG(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function sOe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}function lOe(t){if(Array.isArray(t))return t}function cOe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function hG(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,dOe(r.key),r)}}function uOe(t,e,n){return e&&hG(t.prototype,e),n&&hG(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function dOe(t){var e=fOe(t,"string");return Tb(e)=="symbol"?e:e+""}function fOe(t,e){if(Tb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Tb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var pG=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,mG=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,hOe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,pOe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,vie={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},mOe=Object.keys(vie),Dy="NaN";function gOe(t,e){return t*vie[e]}var $E=function(){function t(e,n){cOe(this,t),this.num=e,this.unit=n,this.num=e,this.unit=n,Number.isNaN(e)&&(this.unit=""),n!==""&&!hOe.test(n)&&(this.num=NaN,this.unit=""),mOe.includes(n)&&(this.num=gOe(e,n),this.unit="px")}return uOe(t,[{key:"add",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var r,i=(r=pOe.exec(n))!==null&&r!==void 0?r:[],o=KT(i,3),a=o[1],s=o[2];return new t(parseFloat(a),s??"")}}])}();function xie(t){if(t.includes(Dy))return Dy;for(var e=t;e.includes("*")||e.includes("/");){var n,r=(n=pG.exec(e))!==null&&n!==void 0?n:[],i=KT(r,4),o=i[1],a=i[2],s=i[3],l=$E.parse(o??""),c=$E.parse(s??""),u=a==="*"?l.multiply(c):l.divide(c);if(u.isNaN())return Dy;e=e.replace(pG,u.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var f,h=(f=mG.exec(e))!==null&&f!==void 0?f:[],p=KT(h,4),y=p[1],g=p[2],v=p[3],b=$E.parse(y??""),w=$E.parse(v??""),T=g==="+"?b.add(w):b.subtract(w);if(T.isNaN())return Dy;e=e.replace(mG,T.toString())}return e}var gG=/\(([^()]*)\)/;function yOe(t){for(var e=t;e.includes("(");){var n=gG.exec(e),r=KT(n,2),i=r[1];e=e.replace(gG,xie(i))}return e}function vOe(t){var e=t.replace(/\s+/g,"");return e=yOe(e),e=xie(e),e}function xOe(t){try{return vOe(t)}catch{return Dy}}function MR(t){var e=xOe(t.slice(5,-1));return e===Dy?"":e}var wOe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],bOe=["dx","dy","angle","className","breakAll"];function yL(){return yL=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yL.apply(this,arguments)}function yG(t,e){if(t==null)return{};var n=SOe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function SOe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function vG(t,e){return COe(t)||TOe(t,e)||_Oe(t,e)||EOe()}function EOe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _Oe(t,e){if(t){if(typeof t=="string")return xG(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xG(t,e)}}function xG(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function TOe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}function COe(t){if(Array.isArray(t))return t}var wie=/[ \f\n\r\t\v\u2028\u2029]+/,bie=function(e){var n=e.children,r=e.breakAll,i=e.style;try{var o=[];jn(n)||(r?o=n.toString().split(""):o=n.toString().split(wie));var a=o.map(function(l){return{word:l,width:zw(l,i).width}}),s=r?0:zw("",i).width;return{wordsWithComputedWidth:a,spaceWidth:s}}catch{return null}},AOe=function(e,n,r,i,o){var a=e.maxLines,s=e.children,l=e.style,c=e.breakAll,u=Et(a),f=s,h=function(){var J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return J.reduce(function(K,Z){var H=Z.word,Y=Z.width,L=K[K.length-1];if(L&&(i==null||o||L.width+Y+r<Number(i)))L.words.push(H),L.width+=Y+r;else{var N={words:[H],width:Y};K.push(N)}return K},[])},p=h(n),y=function(J){return J.reduce(function(K,Z){return K.width>Z.width?K:Z})};if(!u)return p;for(var g="",v=function(J){var K=f.slice(0,J),Z=bie({breakAll:c,style:l,children:K+g}).wordsWithComputedWidth,H=h(Z),Y=H.length>a||y(H).width>Number(i);return[Y,H]},b=0,w=f.length-1,T=0,C;b<=w&&T<=f.length-1;){var P=Math.floor((b+w)/2),M=P-1,k=v(M),I=vG(k,2),U=I[0],z=I[1],O=v(P),B=vG(O,1),$=B[0];if(!U&&!$&&(b=P+1),U&&$&&(w=P-1),!U&&$){C=z;break}T++}return C||p},wG=function(e){var n=jn(e)?[]:e.toString().split(wie);return[{words:n}]},MOe=function(e){var n=e.width,r=e.scaleToFit,i=e.children,o=e.style,a=e.breakAll,s=e.maxLines;if((n||r)&&!M0.isSsr){var l,c,u=bie({breakAll:a,children:i,style:o});if(u){var f=u.wordsWithComputedWidth,h=u.spaceWidth;l=f,c=h}else return wG(i);return AOe({breakAll:a,children:i,maxLines:s,style:o},l,c,n,r)}return wG(i)},bG="#808080",JT=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,o=i===void 0?0:i,a=e.lineHeight,s=a===void 0?"1em":a,l=e.capHeight,c=l===void 0?"0.71em":l,u=e.scaleToFit,f=u===void 0?!1:u,h=e.textAnchor,p=h===void 0?"start":h,y=e.verticalAnchor,g=y===void 0?"end":y,v=e.fill,b=v===void 0?bG:v,w=yG(e,wOe),T=_.useMemo(function(){return MOe({breakAll:w.breakAll,children:w.children,maxLines:w.maxLines,scaleToFit:f,style:w.style,width:w.width})},[w.breakAll,w.children,w.maxLines,f,w.style,w.width]),C=w.dx,P=w.dy,M=w.angle,k=w.className,I=w.breakAll,U=yG(w,bOe);if(!no(r)||!no(o))return null;var z=r+(Et(C)?C:0),O=o+(Et(P)?P:0),B;switch(g){case"start":B=MR("calc(".concat(c,")"));break;case"middle":B=MR("calc(".concat((T.length-1)/2," * -").concat(s," + (").concat(c," / 2))"));break;default:B=MR("calc(".concat(T.length-1," * -").concat(s,")"));break}var $=[];if(f){var F=T[0].width,J=w.width;$.push("scale(".concat((Et(J)?J/F:1)/F,")"))}return M&&$.push("rotate(".concat(M,", ").concat(z,", ").concat(O,")")),$.length&&(U.transform=$.join(" ")),ve.createElement("text",yL({},Dn(U,!0),{x:z,y:O,className:Un("recharts-text",k),textAnchor:p,fill:b.includes("url")?bG:b}),T.map(function(K,Z){var H=K.words.join(I?"":" ");return ve.createElement("tspan",{x:z,dy:Z===0?B:s,key:"".concat(H,"-").concat(Z)},H)}))};function zf(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function POe(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function HF(t){let e,n,r;t.length!==2?(e=zf,n=(s,l)=>zf(t(s),l),r=(s,l)=>t(s)-l):(e=t===zf||t===POe?t:kOe,n=t,r=t);function i(s,l,c=0,u=s.length){if(c<u){if(e(l,l)!==0)return u;do{const f=c+u>>>1;n(s[f],l)<0?c=f+1:u=f}while(c<u)}return c}function o(s,l,c=0,u=s.length){if(c<u){if(e(l,l)!==0)return u;do{const f=c+u>>>1;n(s[f],l)<=0?c=f+1:u=f}while(c<u)}return c}function a(s,l,c=0,u=s.length){const f=i(s,l,c,u-1);return f>c&&r(s[f-1],l)>-r(s[f],l)?f-1:f}return{left:i,center:a,right:o}}function kOe(){return 0}function Sie(t){return t===null?NaN:+t}function*NOe(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const ROe=HF(zf),X1=ROe.right;HF(Sie).center;class SG extends Map{constructor(e,n=OOe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(EG(this,e))}has(e){return super.has(EG(this,e))}set(e,n){return super.set(jOe(this,e),n)}delete(e){return super.delete(IOe(this,e))}}function EG({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function jOe({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function IOe({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function OOe(t){return t!==null&&typeof t=="object"?t.valueOf():t}function LOe(t=zf){if(t===zf)return Eie;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function Eie(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const DOe=Math.sqrt(50),FOe=Math.sqrt(10),zOe=Math.sqrt(2);function ZT(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),a=o>=DOe?10:o>=FOe?5:o>=zOe?2:1;let s,l,c;return i<0?(c=Math.pow(10,-i)/a,s=Math.round(t*c),l=Math.round(e*c),s/c<t&&++s,l/c>e&&--l,c=-c):(c=Math.pow(10,i)*a,s=Math.round(t/c),l=Math.round(e/c),s*c<t&&++s,l*c>e&&--l),l<s&&.5<=n&&n<2?ZT(t,e,n*2):[s,l,c]}function vL(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,o,a]=r?ZT(e,t,n):ZT(t,e,n);if(!(o>=i))return[];const s=o-i+1,l=new Array(s);if(r)if(a<0)for(let c=0;c<s;++c)l[c]=(o-c)/-a;else for(let c=0;c<s;++c)l[c]=(o-c)*a;else if(a<0)for(let c=0;c<s;++c)l[c]=(i+c)/-a;else for(let c=0;c<s;++c)l[c]=(i+c)*a;return l}function xL(t,e,n){return e=+e,t=+t,n=+n,ZT(t,e,n)[2]}function wL(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?xL(e,t,n):xL(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function _G(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function TG(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function _ie(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?Eie:LOe(i);r>n;){if(r-n>600){const l=r-n+1,c=e-n+1,u=Math.log(l),f=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*f*(l-f)/l)*(c-l/2<0?-1:1),p=Math.max(n,Math.floor(e-c*f/l+h)),y=Math.min(r,Math.floor(e+(l-c)*f/l+h));_ie(t,e,p,y,i)}const o=t[e];let a=n,s=r;for(Yx(t,n,e),i(t[r],o)>0&&Yx(t,n,r);a<s;){for(Yx(t,a,s),++a,--s;i(t[a],o)<0;)++a;for(;i(t[s],o)>0;)--s}i(t[n],o)===0?Yx(t,n,s):(++s,Yx(t,s,r)),s<=e&&(n=s+1),e<=s&&(r=s-1)}return t}function Yx(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function UOe(t,e,n){if(t=Float64Array.from(NOe(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return TG(t);if(e>=1)return _G(t);var r,i=(r-1)*e,o=Math.floor(i),a=_G(_ie(t,o).subarray(0,o+1)),s=TG(t.subarray(o+1));return a+(s-a)*(i-o)}}function BOe(t,e,n=Sie){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,o=Math.floor(i),a=+n(t[o],o,t),s=+n(t[o+1],o+1,t);return a+(s-a)*(i-o)}}function $Oe(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,o=new Array(i);++r<i;)o[r]=t+r*n;return o}function sl(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Cd(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const bL=Symbol("implicit");function VF(){var t=new SG,e=[],n=[],r=bL;function i(o){let a=t.get(o);if(a===void 0){if(r!==bL)return r;t.set(o,a=e.push(o)-1)}return n[a%n.length]}return i.domain=function(o){if(!arguments.length)return e.slice();e=[],t=new SG;for(const a of o)t.has(a)||t.set(a,e.push(a)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return VF(e,n).unknown(r)},sl.apply(i,arguments),i}function Cb(){var t=VF().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,o,a,s=!1,l=0,c=0,u=.5;delete t.unknown;function f(){var h=e().length,p=i<r,y=p?i:r,g=p?r:i;o=(g-y)/Math.max(1,h-l+c*2),s&&(o=Math.floor(o)),y+=(g-y-o*(h-l))*u,a=o*(1-l),s&&(y=Math.round(y),a=Math.round(a));var v=$Oe(h).map(function(b){return y+o*b});return n(p?v.reverse():v)}return t.domain=function(h){return arguments.length?(e(h),f()):e()},t.range=function(h){return arguments.length?([r,i]=h,r=+r,i=+i,f()):[r,i]},t.rangeRound=function(h){return[r,i]=h,r=+r,i=+i,s=!0,f()},t.bandwidth=function(){return a},t.step=function(){return o},t.round=function(h){return arguments.length?(s=!!h,f()):s},t.padding=function(h){return arguments.length?(l=Math.min(1,c=+h),f()):l},t.paddingInner=function(h){return arguments.length?(l=Math.min(1,h),f()):l},t.paddingOuter=function(h){return arguments.length?(c=+h,f()):c},t.align=function(h){return arguments.length?(u=Math.max(0,Math.min(1,h)),f()):u},t.copy=function(){return Cb(e(),[r,i]).round(s).paddingInner(l).paddingOuter(c).align(u)},sl.apply(f(),arguments)}function Tie(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return Tie(e())},t}function Uw(){return Tie(Cb.apply(null,arguments).paddingInner(1))}function WF(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Cie(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function K1(){}var Ab=.7,QT=1/Ab,ev="\\s*([+-]?\\d+)\\s*",Mb="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Vc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",HOe=/^#([0-9a-f]{3,8})$/,VOe=new RegExp(`^rgb\\(${ev},${ev},${ev}\\)$`),WOe=new RegExp(`^rgb\\(${Vc},${Vc},${Vc}\\)$`),GOe=new RegExp(`^rgba\\(${ev},${ev},${ev},${Mb}\\)$`),qOe=new RegExp(`^rgba\\(${Vc},${Vc},${Vc},${Mb}\\)$`),YOe=new RegExp(`^hsl\\(${Mb},${Vc},${Vc}\\)$`),XOe=new RegExp(`^hsla\\(${Mb},${Vc},${Vc},${Mb}\\)$`),CG={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};WF(K1,Pb,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:AG,formatHex:AG,formatHex8:KOe,formatHsl:JOe,formatRgb:MG,toString:MG});function AG(){return this.rgb().formatHex()}function KOe(){return this.rgb().formatHex8()}function JOe(){return Aie(this).formatHsl()}function MG(){return this.rgb().formatRgb()}function Pb(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=HOe.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?PG(e):n===3?new Ya(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?HE(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?HE(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=VOe.exec(t))?new Ya(e[1],e[2],e[3],1):(e=WOe.exec(t))?new Ya(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=GOe.exec(t))?HE(e[1],e[2],e[3],e[4]):(e=qOe.exec(t))?HE(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=YOe.exec(t))?RG(e[1],e[2]/100,e[3]/100,1):(e=XOe.exec(t))?RG(e[1],e[2]/100,e[3]/100,e[4]):CG.hasOwnProperty(t)?PG(CG[t]):t==="transparent"?new Ya(NaN,NaN,NaN,0):null}function PG(t){return new Ya(t>>16&255,t>>8&255,t&255,1)}function HE(t,e,n,r){return r<=0&&(t=e=n=NaN),new Ya(t,e,n,r)}function ZOe(t){return t instanceof K1||(t=Pb(t)),t?(t=t.rgb(),new Ya(t.r,t.g,t.b,t.opacity)):new Ya}function SL(t,e,n,r){return arguments.length===1?ZOe(t):new Ya(t,e,n,r??1)}function Ya(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}WF(Ya,SL,Cie(K1,{brighter(t){return t=t==null?QT:Math.pow(QT,t),new Ya(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Ab:Math.pow(Ab,t),new Ya(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Ya(Hp(this.r),Hp(this.g),Hp(this.b),eC(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:kG,formatHex:kG,formatHex8:QOe,formatRgb:NG,toString:NG}));function kG(){return`#${Np(this.r)}${Np(this.g)}${Np(this.b)}`}function QOe(){return`#${Np(this.r)}${Np(this.g)}${Np(this.b)}${Np((isNaN(this.opacity)?1:this.opacity)*255)}`}function NG(){const t=eC(this.opacity);return`${t===1?"rgb(":"rgba("}${Hp(this.r)}, ${Hp(this.g)}, ${Hp(this.b)}${t===1?")":`, ${t})`}`}function eC(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Hp(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Np(t){return t=Hp(t),(t<16?"0":"")+t.toString(16)}function RG(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Zl(t,e,n,r)}function Aie(t){if(t instanceof Zl)return new Zl(t.h,t.s,t.l,t.opacity);if(t instanceof K1||(t=Pb(t)),!t)return new Zl;if(t instanceof Zl)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,s=o-i,l=(o+i)/2;return s?(e===o?a=(n-r)/s+(n<r)*6:n===o?a=(r-e)/s+2:a=(e-n)/s+4,s/=l<.5?o+i:2-o-i,a*=60):s=l>0&&l<1?0:a,new Zl(a,s,l,t.opacity)}function eLe(t,e,n,r){return arguments.length===1?Aie(t):new Zl(t,e,n,r??1)}function Zl(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}WF(Zl,eLe,Cie(K1,{brighter(t){return t=t==null?QT:Math.pow(QT,t),new Zl(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Ab:Math.pow(Ab,t),new Zl(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Ya(PR(t>=240?t-240:t+120,i,r),PR(t,i,r),PR(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Zl(jG(this.h),VE(this.s),VE(this.l),eC(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=eC(this.opacity);return`${t===1?"hsl(":"hsla("}${jG(this.h)}, ${VE(this.s)*100}%, ${VE(this.l)*100}%${t===1?")":`, ${t})`}`}}));function jG(t){return t=(t||0)%360,t<0?t+360:t}function VE(t){return Math.max(0,Math.min(1,t||0))}function PR(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const GF=t=>()=>t;function tLe(t,e){return function(n){return t+n*e}}function nLe(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function rLe(t){return(t=+t)==1?Mie:function(e,n){return n-e?nLe(e,n,t):GF(isNaN(e)?n:e)}}function Mie(t,e){var n=e-t;return n?tLe(t,n):GF(isNaN(t)?e:t)}const IG=function t(e){var n=rLe(e);function r(i,o){var a=n((i=SL(i)).r,(o=SL(o)).r),s=n(i.g,o.g),l=n(i.b,o.b),c=Mie(i.opacity,o.opacity);return function(u){return i.r=a(u),i.g=s(u),i.b=l(u),i.opacity=c(u),i+""}}return r.gamma=t,r}(1);function iLe(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=t[i]*(1-o)+e[i]*o;return r}}function oLe(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function aLe(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),o=new Array(n),a;for(a=0;a<r;++a)i[a]=P0(t[a],e[a]);for(;a<n;++a)o[a]=e[a];return function(s){for(a=0;a<r;++a)o[a]=i[a](s);return o}}function sLe(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function tC(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function lLe(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=P0(t[i],e[i]):r[i]=e[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var EL=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,kR=new RegExp(EL.source,"g");function cLe(t){return function(){return t}}function uLe(t){return function(e){return t(e)+""}}function dLe(t,e){var n=EL.lastIndex=kR.lastIndex=0,r,i,o,a=-1,s=[],l=[];for(t=t+"",e=e+"";(r=EL.exec(t))&&(i=kR.exec(e));)(o=i.index)>n&&(o=e.slice(n,o),s[a]?s[a]+=o:s[++a]=o),(r=r[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,l.push({i:a,x:tC(r,i)})),n=kR.lastIndex;return n<e.length&&(o=e.slice(n),s[a]?s[a]+=o:s[++a]=o),s.length<2?l[0]?uLe(l[0].x):cLe(e):(e=l.length,function(c){for(var u=0,f;u<e;++u)s[(f=l[u]).i]=f.x(c);return s.join("")})}function P0(t,e){var n=typeof e,r;return e==null||n==="boolean"?GF(e):(n==="number"?tC:n==="string"?(r=Pb(e))?(e=r,IG):dLe:e instanceof Pb?IG:e instanceof Date?sLe:oLe(e)?iLe:Array.isArray(e)?aLe:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?lLe:tC)(t,e)}function qF(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function fLe(t,e){e===void 0&&(e=t,t=P0);for(var n=0,r=e.length-1,i=e[0],o=new Array(r<0?0:r);n<r;)o[n]=t(i,i=e[++n]);return function(a){var s=Math.max(0,Math.min(r-1,Math.floor(a*=r)));return o[s](a-s)}}function hLe(t){return function(){return t}}function nC(t){return+t}var OG=[0,1];function Ca(t){return t}function _L(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:hLe(isNaN(e)?NaN:.5)}function pLe(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function mLe(t,e,n){var r=t[0],i=t[1],o=e[0],a=e[1];return i<r?(r=_L(i,r),o=n(a,o)):(r=_L(r,i),o=n(o,a)),function(s){return o(r(s))}}function gLe(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=_L(t[a],t[a+1]),o[a]=n(e[a],e[a+1]);return function(s){var l=X1(t,s,1,r)-1;return o[l](i[l](s))}}function J1(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function zA(){var t=OG,e=OG,n=P0,r,i,o,a=Ca,s,l,c;function u(){var h=Math.min(t.length,e.length);return a!==Ca&&(a=pLe(t[0],t[h-1])),s=h>2?gLe:mLe,l=c=null,f}function f(h){return h==null||isNaN(h=+h)?o:(l||(l=s(t.map(r),e,n)))(r(a(h)))}return f.invert=function(h){return a(i((c||(c=s(e,t.map(r),tC)))(h)))},f.domain=function(h){return arguments.length?(t=Array.from(h,nC),u()):t.slice()},f.range=function(h){return arguments.length?(e=Array.from(h),u()):e.slice()},f.rangeRound=function(h){return e=Array.from(h),n=qF,u()},f.clamp=function(h){return arguments.length?(a=h?!0:Ca,u()):a!==Ca},f.interpolate=function(h){return arguments.length?(n=h,u()):n},f.unknown=function(h){return arguments.length?(o=h,f):o},function(h,p){return r=h,i=p,u()}}function YF(){return zA()(Ca,Ca)}function yLe(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function rC(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Tv(t){return t=rC(Math.abs(t)),t?t[1]:NaN}function vLe(t,e){return function(n,r){for(var i=n.length,o=[],a=0,s=t[0],l=0;i>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),o.push(n.substring(i-=s,i+s)),!((l+=s+1)>r));)s=t[a=(a+1)%t.length];return o.reverse().join(e)}}function xLe(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var wLe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function kb(t){if(!(e=wLe.exec(t)))throw new Error("invalid format: "+t);var e;return new XF({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}kb.prototype=XF.prototype;function XF(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}XF.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function bLe(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var Pie;function SLe(t,e){var n=rC(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(Pie=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+rC(t,Math.max(0,e+o-1))[0]}function LG(t,e){var n=rC(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const DG={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:yLe,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>LG(t*100,e),r:LG,s:SLe,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function FG(t){return t}var zG=Array.prototype.map,UG=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function ELe(t){var e=t.grouping===void 0||t.thousands===void 0?FG:vLe(zG.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?FG:xLe(zG.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",s=t.minus===void 0?"":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function c(f){f=kb(f);var h=f.fill,p=f.align,y=f.sign,g=f.symbol,v=f.zero,b=f.width,w=f.comma,T=f.precision,C=f.trim,P=f.type;P==="n"?(w=!0,P="g"):DG[P]||(T===void 0&&(T=12),C=!0,P="g"),(v||h==="0"&&p==="=")&&(v=!0,h="0",p="=");var M=g==="$"?n:g==="#"&&/[boxX]/.test(P)?"0"+P.toLowerCase():"",k=g==="$"?r:/[%p]/.test(P)?a:"",I=DG[P],U=/[defgprs%]/.test(P);T=T===void 0?6:/[gprs]/.test(P)?Math.max(1,Math.min(21,T)):Math.max(0,Math.min(20,T));function z(O){var B=M,$=k,F,J,K;if(P==="c")$=I(O)+$,O="";else{O=+O;var Z=O<0||1/O<0;if(O=isNaN(O)?l:I(Math.abs(O),T),C&&(O=bLe(O)),Z&&+O==0&&y!=="+"&&(Z=!1),B=(Z?y==="("?y:s:y==="-"||y==="("?"":y)+B,$=(P==="s"?UG[8+Pie/3]:"")+$+(Z&&y==="("?")":""),U){for(F=-1,J=O.length;++F<J;)if(K=O.charCodeAt(F),48>K||K>57){$=(K===46?i+O.slice(F+1):O.slice(F))+$,O=O.slice(0,F);break}}}w&&!v&&(O=e(O,1/0));var H=B.length+O.length+$.length,Y=H<b?new Array(b-H+1).join(h):"";switch(w&&v&&(O=e(Y+O,Y.length?b-$.length:1/0),Y=""),p){case"<":O=B+O+$+Y;break;case"=":O=B+Y+O+$;break;case"^":O=Y.slice(0,H=Y.length>>1)+B+O+$+Y.slice(H);break;default:O=Y+B+O+$;break}return o(O)}return z.toString=function(){return f+""},z}function u(f,h){var p=c((f=kb(f),f.type="f",f)),y=Math.max(-8,Math.min(8,Math.floor(Tv(h)/3)))*3,g=Math.pow(10,-y),v=UG[8+y/3];return function(b){return p(g*b)+v}}return{format:c,formatPrefix:u}}var WE,KF,kie;_Le({thousands:",",grouping:[3],currency:["$",""]});function _Le(t){return WE=ELe(t),KF=WE.format,kie=WE.formatPrefix,WE}function TLe(t){return Math.max(0,-Tv(Math.abs(t)))}function CLe(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Tv(e)/3)))*3-Tv(Math.abs(t)))}function ALe(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Tv(e)-Tv(t))+1}function Nie(t,e,n,r){var i=wL(t,e,n),o;switch(r=kb(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(o=CLe(i,a))&&(r.precision=o),kie(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=ALe(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=TLe(i))&&(r.precision=o-(r.type==="%")*2);break}}return KF(r)}function dh(t){var e=t.domain;return t.ticks=function(n){var r=e();return vL(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return Nie(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,o=r.length-1,a=r[i],s=r[o],l,c,u=10;for(s<a&&(c=a,a=s,s=c,c=i,i=o,o=c);u-- >0;){if(c=xL(a,s,n),c===l)return r[i]=a,r[o]=s,e(r);if(c>0)a=Math.floor(a/c)*c,s=Math.ceil(s/c)*c;else if(c<0)a=Math.ceil(a*c)/c,s=Math.floor(s*c)/c;else break;l=c}return t},t}function iC(){var t=YF();return t.copy=function(){return J1(t,iC())},sl.apply(t,arguments),dh(t)}function Rie(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,nC),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return Rie(t).unknown(e)},t=arguments.length?Array.from(t,nC):[0,1],dh(n)}function jie(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],o=t[r],a;return o<i&&(a=n,n=r,r=a,a=i,i=o,o=a),t[n]=e.floor(i),t[r]=e.ceil(o),t}function BG(t){return Math.log(t)}function $G(t){return Math.exp(t)}function MLe(t){return-Math.log(-t)}function PLe(t){return-Math.exp(-t)}function kLe(t){return isFinite(t)?+("1e"+t):t<0?0:t}function NLe(t){return t===10?kLe:t===Math.E?Math.exp:e=>Math.pow(t,e)}function RLe(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function HG(t){return(e,n)=>-t(-e,n)}function JF(t){const e=t(BG,$G),n=e.domain;let r=10,i,o;function a(){return i=RLe(r),o=NLe(r),n()[0]<0?(i=HG(i),o=HG(o),t(MLe,PLe)):t(BG,$G),e}return e.base=function(s){return arguments.length?(r=+s,a()):r},e.domain=function(s){return arguments.length?(n(s),a()):n()},e.ticks=s=>{const l=n();let c=l[0],u=l[l.length-1];const f=u<c;f&&([c,u]=[u,c]);let h=i(c),p=i(u),y,g;const v=s==null?10:+s;let b=[];if(!(r%1)&&p-h<v){if(h=Math.floor(h),p=Math.ceil(p),c>0){for(;h<=p;++h)for(y=1;y<r;++y)if(g=h<0?y/o(-h):y*o(h),!(g<c)){if(g>u)break;b.push(g)}}else for(;h<=p;++h)for(y=r-1;y>=1;--y)if(g=h>0?y/o(-h):y*o(h),!(g<c)){if(g>u)break;b.push(g)}b.length*2<v&&(b=vL(c,u,v))}else b=vL(h,p,Math.min(p-h,v)).map(o);return f?b.reverse():b},e.tickFormat=(s,l)=>{if(s==null&&(s=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=kb(l)).precision==null&&(l.trim=!0),l=KF(l)),s===1/0)return l;const c=Math.max(1,r*s/e.ticks().length);return u=>{let f=u/o(Math.round(i(u)));return f*r<r-.5&&(f*=r),f<=c?l(u):""}},e.nice=()=>n(jie(n(),{floor:s=>o(Math.floor(i(s))),ceil:s=>o(Math.ceil(i(s)))})),e}function Iie(){const t=JF(zA()).domain([1,10]);return t.copy=()=>J1(t,Iie()).base(t.base()),sl.apply(t,arguments),t}function VG(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function WG(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function ZF(t){var e=1,n=t(VG(e),WG(e));return n.constant=function(r){return arguments.length?t(VG(e=+r),WG(e)):e},dh(n)}function Oie(){var t=ZF(zA());return t.copy=function(){return J1(t,Oie()).constant(t.constant())},sl.apply(t,arguments)}function GG(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function jLe(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function ILe(t){return t<0?-t*t:t*t}function QF(t){var e=t(Ca,Ca),n=1;function r(){return n===1?t(Ca,Ca):n===.5?t(jLe,ILe):t(GG(n),GG(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},dh(e)}function e5(){var t=QF(zA());return t.copy=function(){return J1(t,e5()).exponent(t.exponent())},sl.apply(t,arguments),t}function OLe(){return e5.apply(null,arguments).exponent(.5)}function qG(t){return Math.sign(t)*t*t}function LLe(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function Lie(){var t=YF(),e=[0,1],n=!1,r;function i(o){var a=LLe(t(o));return isNaN(a)?r:n?Math.round(a):a}return i.invert=function(o){return t.invert(qG(o))},i.domain=function(o){return arguments.length?(t.domain(o),i):t.domain()},i.range=function(o){return arguments.length?(t.range((e=Array.from(o,nC)).map(qG)),i):e.slice()},i.rangeRound=function(o){return i.range(o).round(!0)},i.round=function(o){return arguments.length?(n=!!o,i):n},i.clamp=function(o){return arguments.length?(t.clamp(o),i):t.clamp()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return Lie(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},sl.apply(i,arguments),dh(i)}function Die(){var t=[],e=[],n=[],r;function i(){var a=0,s=Math.max(1,e.length);for(n=new Array(s-1);++a<s;)n[a-1]=BOe(t,a/s);return o}function o(a){return a==null||isNaN(a=+a)?r:e[X1(n,a)]}return o.invertExtent=function(a){var s=e.indexOf(a);return s<0?[NaN,NaN]:[s>0?n[s-1]:t[0],s<n.length?n[s]:t[t.length-1]]},o.domain=function(a){if(!arguments.length)return t.slice();t=[];for(let s of a)s!=null&&!isNaN(s=+s)&&t.push(s);return t.sort(zf),i()},o.range=function(a){return arguments.length?(e=Array.from(a),i()):e.slice()},o.unknown=function(a){return arguments.length?(r=a,o):r},o.quantiles=function(){return n.slice()},o.copy=function(){return Die().domain(t).range(e).unknown(r)},sl.apply(o,arguments)}function Fie(){var t=0,e=1,n=1,r=[.5],i=[0,1],o;function a(l){return l!=null&&l<=l?i[X1(r,l,0,n)]:o}function s(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*e-(l-n)*t)/(n+1);return a}return a.domain=function(l){return arguments.length?([t,e]=l,t=+t,e=+e,s()):[t,e]},a.range=function(l){return arguments.length?(n=(i=Array.from(l)).length-1,s()):i.slice()},a.invertExtent=function(l){var c=i.indexOf(l);return c<0?[NaN,NaN]:c<1?[t,r[0]]:c>=n?[r[n-1],e]:[r[c-1],r[c]]},a.unknown=function(l){return arguments.length&&(o=l),a},a.thresholds=function(){return r.slice()},a.copy=function(){return Fie().domain([t,e]).range(i).unknown(o)},sl.apply(dh(a),arguments)}function zie(){var t=[.5],e=[0,1],n,r=1;function i(o){return o!=null&&o<=o?e[X1(t,o,0,r)]:n}return i.domain=function(o){return arguments.length?(t=Array.from(o),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(o){return arguments.length?(e=Array.from(o),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(o){var a=e.indexOf(o);return[t[a-1],t[a]]},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return zie().domain(t).range(e).unknown(n)},sl.apply(i,arguments)}const NR=new Date,RR=new Date;function ao(t,e,n,r){function i(o){return t(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(t(o=new Date(+o)),o),i.ceil=o=>(t(o=new Date(o-1)),e(o,1),t(o),o),i.round=o=>{const a=i(o),s=i.ceil(o);return o-a<s-o?a:s},i.offset=(o,a)=>(e(o=new Date(+o),a==null?1:Math.floor(a)),o),i.range=(o,a,s)=>{const l=[];if(o=i.ceil(o),s=s==null?1:Math.floor(s),!(o<a)||!(s>0))return l;let c;do l.push(c=new Date(+o)),e(o,s),t(o);while(c<o&&o<a);return l},i.filter=o=>ao(a=>{if(a>=a)for(;t(a),!o(a);)a.setTime(a-1)},(a,s)=>{if(a>=a)if(s<0)for(;++s<=0;)for(;e(a,-1),!o(a););else for(;--s>=0;)for(;e(a,1),!o(a););}),n&&(i.count=(o,a)=>(NR.setTime(+o),RR.setTime(+a),t(NR),t(RR),Math.floor(n(NR,RR))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?a=>r(a)%o===0:a=>i.count(0,a)%o===0):i)),i}const oC=ao(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);oC.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?ao(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):oC);oC.range;const Xu=1e3,tl=Xu*60,Ku=tl*60,pd=Ku*24,t5=pd*7,YG=pd*30,jR=pd*365,Rp=ao(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Xu)},(t,e)=>(e-t)/Xu,t=>t.getUTCSeconds());Rp.range;const n5=ao(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Xu)},(t,e)=>{t.setTime(+t+e*tl)},(t,e)=>(e-t)/tl,t=>t.getMinutes());n5.range;const r5=ao(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*tl)},(t,e)=>(e-t)/tl,t=>t.getUTCMinutes());r5.range;const i5=ao(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Xu-t.getMinutes()*tl)},(t,e)=>{t.setTime(+t+e*Ku)},(t,e)=>(e-t)/Ku,t=>t.getHours());i5.range;const o5=ao(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Ku)},(t,e)=>(e-t)/Ku,t=>t.getUTCHours());o5.range;const Z1=ao(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*tl)/pd,t=>t.getDate()-1);Z1.range;const UA=ao(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/pd,t=>t.getUTCDate()-1);UA.range;const Uie=ao(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/pd,t=>Math.floor(t/pd));Uie.range;function Pm(t){return ao(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*tl)/t5)}const BA=Pm(0),aC=Pm(1),DLe=Pm(2),FLe=Pm(3),Cv=Pm(4),zLe=Pm(5),ULe=Pm(6);BA.range;aC.range;DLe.range;FLe.range;Cv.range;zLe.range;ULe.range;function km(t){return ao(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/t5)}const $A=km(0),sC=km(1),BLe=km(2),$Le=km(3),Av=km(4),HLe=km(5),VLe=km(6);$A.range;sC.range;BLe.range;$Le.range;Av.range;HLe.range;VLe.range;const a5=ao(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());a5.range;const s5=ao(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());s5.range;const md=ao(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());md.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:ao(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});md.range;const gd=ao(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());gd.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:ao(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});gd.range;function Bie(t,e,n,r,i,o){const a=[[Rp,1,Xu],[Rp,5,5*Xu],[Rp,15,15*Xu],[Rp,30,30*Xu],[o,1,tl],[o,5,5*tl],[o,15,15*tl],[o,30,30*tl],[i,1,Ku],[i,3,3*Ku],[i,6,6*Ku],[i,12,12*Ku],[r,1,pd],[r,2,2*pd],[n,1,t5],[e,1,YG],[e,3,3*YG],[t,1,jR]];function s(c,u,f){const h=u<c;h&&([c,u]=[u,c]);const p=f&&typeof f.range=="function"?f:l(c,u,f),y=p?p.range(c,+u+1):[];return h?y.reverse():y}function l(c,u,f){const h=Math.abs(u-c)/f,p=HF(([,,v])=>v).right(a,h);if(p===a.length)return t.every(wL(c/jR,u/jR,f));if(p===0)return oC.every(Math.max(wL(c,u,f),1));const[y,g]=a[h/a[p-1][2]<a[p][2]/h?p-1:p];return y.every(g)}return[s,l]}const[WLe,GLe]=Bie(gd,s5,$A,Uie,o5,r5),[qLe,YLe]=Bie(md,a5,BA,Z1,i5,n5);function IR(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function OR(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Xx(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function XLe(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,o=t.days,a=t.shortDays,s=t.months,l=t.shortMonths,c=Kx(i),u=Jx(i),f=Kx(o),h=Jx(o),p=Kx(a),y=Jx(a),g=Kx(s),v=Jx(s),b=Kx(l),w=Jx(l),T={a:Z,A:H,b:Y,B:L,c:null,d:e9,e:e9,f:vDe,g:MDe,G:kDe,H:mDe,I:gDe,j:yDe,L:$ie,m:xDe,M:wDe,p:N,q:V,Q:r9,s:i9,S:bDe,u:SDe,U:EDe,V:_De,w:TDe,W:CDe,x:null,X:null,y:ADe,Y:PDe,Z:NDe,"%":n9},C={a:W,A:ne,b:se,B:te,c:null,d:t9,e:t9,f:ODe,g:WDe,G:qDe,H:RDe,I:jDe,j:IDe,L:Vie,m:LDe,M:DDe,p:ie,q:pe,Q:r9,s:i9,S:FDe,u:zDe,U:UDe,V:BDe,w:$De,W:HDe,x:null,X:null,y:VDe,Y:GDe,Z:YDe,"%":n9},P={a:z,A:O,b:B,B:$,c:F,d:ZG,e:ZG,f:dDe,g:JG,G:KG,H:QG,I:QG,j:sDe,L:uDe,m:aDe,M:lDe,p:U,q:oDe,Q:hDe,s:pDe,S:cDe,u:eDe,U:tDe,V:nDe,w:QLe,W:rDe,x:J,X:K,y:JG,Y:KG,Z:iDe,"%":fDe};T.x=M(n,T),T.X=M(r,T),T.c=M(e,T),C.x=M(n,C),C.X=M(r,C),C.c=M(e,C);function M(de,ce){return function(he){var ee=[],xe=-1,be=0,Ae=de.length,Ce,oe,ae;for(he instanceof Date||(he=new Date(+he));++xe<Ae;)de.charCodeAt(xe)===37&&(ee.push(de.slice(be,xe)),(oe=XG[Ce=de.charAt(++xe)])!=null?Ce=de.charAt(++xe):oe=Ce==="e"?" ":"0",(ae=ce[Ce])&&(Ce=ae(he,oe)),ee.push(Ce),be=xe+1);return ee.push(de.slice(be,xe)),ee.join("")}}function k(de,ce){return function(he){var ee=Xx(1900,void 0,1),xe=I(ee,de,he+="",0),be,Ae;if(xe!=he.length)return null;if("Q"in ee)return new Date(ee.Q);if("s"in ee)return new Date(ee.s*1e3+("L"in ee?ee.L:0));if(ce&&!("Z"in ee)&&(ee.Z=0),"p"in ee&&(ee.H=ee.H%12+ee.p*12),ee.m===void 0&&(ee.m="q"in ee?ee.q:0),"V"in ee){if(ee.V<1||ee.V>53)return null;"w"in ee||(ee.w=1),"Z"in ee?(be=OR(Xx(ee.y,0,1)),Ae=be.getUTCDay(),be=Ae>4||Ae===0?sC.ceil(be):sC(be),be=UA.offset(be,(ee.V-1)*7),ee.y=be.getUTCFullYear(),ee.m=be.getUTCMonth(),ee.d=be.getUTCDate()+(ee.w+6)%7):(be=IR(Xx(ee.y,0,1)),Ae=be.getDay(),be=Ae>4||Ae===0?aC.ceil(be):aC(be),be=Z1.offset(be,(ee.V-1)*7),ee.y=be.getFullYear(),ee.m=be.getMonth(),ee.d=be.getDate()+(ee.w+6)%7)}else("W"in ee||"U"in ee)&&("w"in ee||(ee.w="u"in ee?ee.u%7:"W"in ee?1:0),Ae="Z"in ee?OR(Xx(ee.y,0,1)).getUTCDay():IR(Xx(ee.y,0,1)).getDay(),ee.m=0,ee.d="W"in ee?(ee.w+6)%7+ee.W*7-(Ae+5)%7:ee.w+ee.U*7-(Ae+6)%7);return"Z"in ee?(ee.H+=ee.Z/100|0,ee.M+=ee.Z%100,OR(ee)):IR(ee)}}function I(de,ce,he,ee){for(var xe=0,be=ce.length,Ae=he.length,Ce,oe;xe<be;){if(ee>=Ae)return-1;if(Ce=ce.charCodeAt(xe++),Ce===37){if(Ce=ce.charAt(xe++),oe=P[Ce in XG?ce.charAt(xe++):Ce],!oe||(ee=oe(de,he,ee))<0)return-1}else if(Ce!=he.charCodeAt(ee++))return-1}return ee}function U(de,ce,he){var ee=c.exec(ce.slice(he));return ee?(de.p=u.get(ee[0].toLowerCase()),he+ee[0].length):-1}function z(de,ce,he){var ee=p.exec(ce.slice(he));return ee?(de.w=y.get(ee[0].toLowerCase()),he+ee[0].length):-1}function O(de,ce,he){var ee=f.exec(ce.slice(he));return ee?(de.w=h.get(ee[0].toLowerCase()),he+ee[0].length):-1}function B(de,ce,he){var ee=b.exec(ce.slice(he));return ee?(de.m=w.get(ee[0].toLowerCase()),he+ee[0].length):-1}function $(de,ce,he){var ee=g.exec(ce.slice(he));return ee?(de.m=v.get(ee[0].toLowerCase()),he+ee[0].length):-1}function F(de,ce,he){return I(de,e,ce,he)}function J(de,ce,he){return I(de,n,ce,he)}function K(de,ce,he){return I(de,r,ce,he)}function Z(de){return a[de.getDay()]}function H(de){return o[de.getDay()]}function Y(de){return l[de.getMonth()]}function L(de){return s[de.getMonth()]}function N(de){return i[+(de.getHours()>=12)]}function V(de){return 1+~~(de.getMonth()/3)}function W(de){return a[de.getUTCDay()]}function ne(de){return o[de.getUTCDay()]}function se(de){return l[de.getUTCMonth()]}function te(de){return s[de.getUTCMonth()]}function ie(de){return i[+(de.getUTCHours()>=12)]}function pe(de){return 1+~~(de.getUTCMonth()/3)}return{format:function(de){var ce=M(de+="",T);return ce.toString=function(){return de},ce},parse:function(de){var ce=k(de+="",!1);return ce.toString=function(){return de},ce},utcFormat:function(de){var ce=M(de+="",C);return ce.toString=function(){return de},ce},utcParse:function(de){var ce=k(de+="",!0);return ce.toString=function(){return de},ce}}}var XG={"-":"",_:" ",0:"0"},bo=/^\s*\d+/,KLe=/^%/,JLe=/[\\^$*+?|[\]().{}]/g;function Yn(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function ZLe(t){return t.replace(JLe,"\\$&")}function Kx(t){return new RegExp("^(?:"+t.map(ZLe).join("|")+")","i")}function Jx(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function QLe(t,e,n){var r=bo.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function eDe(t,e,n){var r=bo.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function tDe(t,e,n){var r=bo.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function nDe(t,e,n){var r=bo.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function rDe(t,e,n){var r=bo.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function KG(t,e,n){var r=bo.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function JG(t,e,n){var r=bo.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function iDe(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function oDe(t,e,n){var r=bo.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function aDe(t,e,n){var r=bo.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function ZG(t,e,n){var r=bo.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function sDe(t,e,n){var r=bo.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function QG(t,e,n){var r=bo.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function lDe(t,e,n){var r=bo.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function cDe(t,e,n){var r=bo.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function uDe(t,e,n){var r=bo.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function dDe(t,e,n){var r=bo.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function fDe(t,e,n){var r=KLe.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function hDe(t,e,n){var r=bo.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function pDe(t,e,n){var r=bo.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function e9(t,e){return Yn(t.getDate(),e,2)}function mDe(t,e){return Yn(t.getHours(),e,2)}function gDe(t,e){return Yn(t.getHours()%12||12,e,2)}function yDe(t,e){return Yn(1+Z1.count(md(t),t),e,3)}function $ie(t,e){return Yn(t.getMilliseconds(),e,3)}function vDe(t,e){return $ie(t,e)+"000"}function xDe(t,e){return Yn(t.getMonth()+1,e,2)}function wDe(t,e){return Yn(t.getMinutes(),e,2)}function bDe(t,e){return Yn(t.getSeconds(),e,2)}function SDe(t){var e=t.getDay();return e===0?7:e}function EDe(t,e){return Yn(BA.count(md(t)-1,t),e,2)}function Hie(t){var e=t.getDay();return e>=4||e===0?Cv(t):Cv.ceil(t)}function _De(t,e){return t=Hie(t),Yn(Cv.count(md(t),t)+(md(t).getDay()===4),e,2)}function TDe(t){return t.getDay()}function CDe(t,e){return Yn(aC.count(md(t)-1,t),e,2)}function ADe(t,e){return Yn(t.getFullYear()%100,e,2)}function MDe(t,e){return t=Hie(t),Yn(t.getFullYear()%100,e,2)}function PDe(t,e){return Yn(t.getFullYear()%1e4,e,4)}function kDe(t,e){var n=t.getDay();return t=n>=4||n===0?Cv(t):Cv.ceil(t),Yn(t.getFullYear()%1e4,e,4)}function NDe(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Yn(e/60|0,"0",2)+Yn(e%60,"0",2)}function t9(t,e){return Yn(t.getUTCDate(),e,2)}function RDe(t,e){return Yn(t.getUTCHours(),e,2)}function jDe(t,e){return Yn(t.getUTCHours()%12||12,e,2)}function IDe(t,e){return Yn(1+UA.count(gd(t),t),e,3)}function Vie(t,e){return Yn(t.getUTCMilliseconds(),e,3)}function ODe(t,e){return Vie(t,e)+"000"}function LDe(t,e){return Yn(t.getUTCMonth()+1,e,2)}function DDe(t,e){return Yn(t.getUTCMinutes(),e,2)}function FDe(t,e){return Yn(t.getUTCSeconds(),e,2)}function zDe(t){var e=t.getUTCDay();return e===0?7:e}function UDe(t,e){return Yn($A.count(gd(t)-1,t),e,2)}function Wie(t){var e=t.getUTCDay();return e>=4||e===0?Av(t):Av.ceil(t)}function BDe(t,e){return t=Wie(t),Yn(Av.count(gd(t),t)+(gd(t).getUTCDay()===4),e,2)}function $De(t){return t.getUTCDay()}function HDe(t,e){return Yn(sC.count(gd(t)-1,t),e,2)}function VDe(t,e){return Yn(t.getUTCFullYear()%100,e,2)}function WDe(t,e){return t=Wie(t),Yn(t.getUTCFullYear()%100,e,2)}function GDe(t,e){return Yn(t.getUTCFullYear()%1e4,e,4)}function qDe(t,e){var n=t.getUTCDay();return t=n>=4||n===0?Av(t):Av.ceil(t),Yn(t.getUTCFullYear()%1e4,e,4)}function YDe(){return"+0000"}function n9(){return"%"}function r9(t){return+t}function i9(t){return Math.floor(+t/1e3)}var Wg,Gie,qie;XDe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function XDe(t){return Wg=XLe(t),Gie=Wg.format,Wg.parse,qie=Wg.utcFormat,Wg.utcParse,Wg}function KDe(t){return new Date(t)}function JDe(t){return t instanceof Date?+t:+new Date(+t)}function l5(t,e,n,r,i,o,a,s,l,c){var u=YF(),f=u.invert,h=u.domain,p=c(".%L"),y=c(":%S"),g=c("%I:%M"),v=c("%I %p"),b=c("%a %d"),w=c("%b %d"),T=c("%B"),C=c("%Y");function P(M){return(l(M)<M?p:s(M)<M?y:a(M)<M?g:o(M)<M?v:r(M)<M?i(M)<M?b:w:n(M)<M?T:C)(M)}return u.invert=function(M){return new Date(f(M))},u.domain=function(M){return arguments.length?h(Array.from(M,JDe)):h().map(KDe)},u.ticks=function(M){var k=h();return t(k[0],k[k.length-1],M??10)},u.tickFormat=function(M,k){return k==null?P:c(k)},u.nice=function(M){var k=h();return(!M||typeof M.range!="function")&&(M=e(k[0],k[k.length-1],M??10)),M?h(jie(k,M)):u},u.copy=function(){return J1(u,l5(t,e,n,r,i,o,a,s,l,c))},u}function ZDe(){return sl.apply(l5(qLe,YLe,md,a5,BA,Z1,i5,n5,Rp,Gie).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function QDe(){return sl.apply(l5(WLe,GLe,gd,s5,$A,UA,o5,r5,Rp,qie).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function HA(){var t=0,e=1,n,r,i,o,a=Ca,s=!1,l;function c(f){return f==null||isNaN(f=+f)?l:a(i===0?.5:(f=(o(f)-n)*i,s?Math.max(0,Math.min(1,f)):f))}c.domain=function(f){return arguments.length?([t,e]=f,n=o(t=+t),r=o(e=+e),i=n===r?0:1/(r-n),c):[t,e]},c.clamp=function(f){return arguments.length?(s=!!f,c):s},c.interpolator=function(f){return arguments.length?(a=f,c):a};function u(f){return function(h){var p,y;return arguments.length?([p,y]=h,a=f(p,y),c):[a(0),a(1)]}}return c.range=u(P0),c.rangeRound=u(qF),c.unknown=function(f){return arguments.length?(l=f,c):l},function(f){return o=f,n=f(t),r=f(e),i=n===r?0:1/(r-n),c}}function fh(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function Yie(){var t=dh(HA()(Ca));return t.copy=function(){return fh(t,Yie())},Cd.apply(t,arguments)}function Xie(){var t=JF(HA()).domain([1,10]);return t.copy=function(){return fh(t,Xie()).base(t.base())},Cd.apply(t,arguments)}function Kie(){var t=ZF(HA());return t.copy=function(){return fh(t,Kie()).constant(t.constant())},Cd.apply(t,arguments)}function c5(){var t=QF(HA());return t.copy=function(){return fh(t,c5()).exponent(t.exponent())},Cd.apply(t,arguments)}function e3e(){return c5.apply(null,arguments).exponent(.5)}function Jie(){var t=[],e=Ca;function n(r){if(r!=null&&!isNaN(r=+r))return e((X1(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(zf),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,o)=>UOe(t,o/r))},n.copy=function(){return Jie(e).domain(t)},Cd.apply(n,arguments)}function VA(){var t=0,e=.5,n=1,r=1,i,o,a,s,l,c=Ca,u,f=!1,h;function p(g){return isNaN(g=+g)?h:(g=.5+((g=+u(g))-o)*(r*g<r*o?s:l),c(f?Math.max(0,Math.min(1,g)):g))}p.domain=function(g){return arguments.length?([t,e,n]=g,i=u(t=+t),o=u(e=+e),a=u(n=+n),s=i===o?0:.5/(o-i),l=o===a?0:.5/(a-o),r=o<i?-1:1,p):[t,e,n]},p.clamp=function(g){return arguments.length?(f=!!g,p):f},p.interpolator=function(g){return arguments.length?(c=g,p):c};function y(g){return function(v){var b,w,T;return arguments.length?([b,w,T]=v,c=fLe(g,[b,w,T]),p):[c(0),c(.5),c(1)]}}return p.range=y(P0),p.rangeRound=y(qF),p.unknown=function(g){return arguments.length?(h=g,p):h},function(g){return u=g,i=g(t),o=g(e),a=g(n),s=i===o?0:.5/(o-i),l=o===a?0:.5/(a-o),r=o<i?-1:1,p}}function Zie(){var t=dh(VA()(Ca));return t.copy=function(){return fh(t,Zie())},Cd.apply(t,arguments)}function Qie(){var t=JF(VA()).domain([.1,1,10]);return t.copy=function(){return fh(t,Qie()).base(t.base())},Cd.apply(t,arguments)}function eoe(){var t=ZF(VA());return t.copy=function(){return fh(t,eoe()).constant(t.constant())},Cd.apply(t,arguments)}function u5(){var t=QF(VA());return t.copy=function(){return fh(t,u5()).exponent(t.exponent())},Cd.apply(t,arguments)}function t3e(){return u5.apply(null,arguments).exponent(.5)}const o9=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Cb,scaleDiverging:Zie,scaleDivergingLog:Qie,scaleDivergingPow:u5,scaleDivergingSqrt:t3e,scaleDivergingSymlog:eoe,scaleIdentity:Rie,scaleImplicit:bL,scaleLinear:iC,scaleLog:Iie,scaleOrdinal:VF,scalePoint:Uw,scalePow:e5,scaleQuantile:Die,scaleQuantize:Fie,scaleRadial:Lie,scaleSequential:Yie,scaleSequentialLog:Xie,scaleSequentialPow:c5,scaleSequentialQuantile:Jie,scaleSequentialSqrt:e3e,scaleSequentialSymlog:Kie,scaleSqrt:OLe,scaleSymlog:Oie,scaleThreshold:zie,scaleTime:ZDe,scaleUtc:QDe,tickFormat:Nie},Symbol.toStringTag,{value:"Module"}));var LR,a9;function toe(){if(a9)return LR;a9=1;var t=T0();function e(n,r,i){for(var o=-1,a=n.length;++o<a;){var s=n[o],l=r(s);if(l!=null&&(c===void 0?l===l&&!t(l):i(l,c)))var c=l,u=s}return u}return LR=e,LR}var DR,s9;function n3e(){if(s9)return DR;s9=1;function t(e,n){return e>n}return DR=t,DR}var FR,l9;function r3e(){if(l9)return FR;l9=1;var t=toe(),e=n3e(),n=A0();function r(i){return i&&i.length?t(i,n,e):void 0}return FR=r,FR}var i3e=r3e();const WA=$n(i3e);var zR,c9;function o3e(){if(c9)return zR;c9=1;function t(e,n){return e<n}return zR=t,zR}var UR,u9;function a3e(){if(u9)return UR;u9=1;var t=toe(),e=o3e(),n=A0();function r(i){return i&&i.length?t(i,n,e):void 0}return UR=r,UR}var s3e=a3e();const GA=$n(s3e);var BR,d9;function l3e(){if(d9)return BR;d9=1;var t=CF(),e=uh(),n=lie(),r=Qa();function i(o,a){var s=r(o)?t:n;return s(o,e(a,3))}return BR=i,BR}var $R,f9;function c3e(){if(f9)return $R;f9=1;var t=aie(),e=l3e();function n(r,i){return t(e(r,i),1)}return $R=n,$R}var u3e=c3e();const d3e=$n(u3e);var HR,h9;function f3e(){if(h9)return HR;h9=1;var t=zF();function e(n,r){return t(n,r)}return HR=e,HR}var h3e=f3e();const qA=$n(h3e);var k0=1e9,p3e={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},f5,$r=!0,al="[DecimalError] ",Vp=al+"Invalid argument: ",d5=al+"Exponent out of range: ",N0=Math.floor,pp=Math.pow,m3e=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,As,xo=1e7,Lr=7,noe=9007199254740991,lC=N0(noe/Lr),jt={};jt.absoluteValue=jt.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};jt.comparedTo=jt.cmp=function(t){var e,n,r,i,o=this;if(t=new o.constructor(t),o.s!==t.s)return o.s||-t.s;if(o.e!==t.e)return o.e>t.e^o.s<0?1:-1;for(r=o.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(o.d[e]!==t.d[e])return o.d[e]>t.d[e]^o.s<0?1:-1;return r===i?0:r>i^o.s<0?1:-1};jt.decimalPlaces=jt.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*Lr;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};jt.dividedBy=jt.div=function(t){return od(this,new this.constructor(t))};jt.dividedToIntegerBy=jt.idiv=function(t){var e=this,n=e.constructor;return mr(od(e,new n(t),0,1),n.precision)};jt.equals=jt.eq=function(t){return!this.cmp(t)};jt.exponent=function(){return Bi(this)};jt.greaterThan=jt.gt=function(t){return this.cmp(t)>0};jt.greaterThanOrEqualTo=jt.gte=function(t){return this.cmp(t)>=0};jt.isInteger=jt.isint=function(){return this.e>this.d.length-2};jt.isNegative=jt.isneg=function(){return this.s<0};jt.isPositive=jt.ispos=function(){return this.s>0};jt.isZero=function(){return this.s===0};jt.lessThan=jt.lt=function(t){return this.cmp(t)<0};jt.lessThanOrEqualTo=jt.lte=function(t){return this.cmp(t)<1};jt.logarithm=jt.log=function(t){var e,n=this,r=n.constructor,i=r.precision,o=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(As))throw Error(al+"NaN");if(n.s<1)throw Error(al+(n.s?"NaN":"-Infinity"));return n.eq(As)?new r(0):($r=!1,e=od(Nb(n,o),Nb(t,o),o),$r=!0,mr(e,i))};jt.minus=jt.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?ooe(e,t):roe(e,(t.s=-t.s,t))};jt.modulo=jt.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(al+"NaN");return n.s?($r=!1,e=od(n,t,0,1).times(t),$r=!0,n.minus(e)):mr(new r(n),i)};jt.naturalExponential=jt.exp=function(){return ioe(this)};jt.naturalLogarithm=jt.ln=function(){return Nb(this)};jt.negated=jt.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};jt.plus=jt.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?roe(e,t):ooe(e,(t.s=-t.s,t))};jt.precision=jt.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Vp+t);if(e=Bi(i)+1,r=i.d.length-1,n=r*Lr+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};jt.squareRoot=jt.sqrt=function(){var t,e,n,r,i,o,a,s=this,l=s.constructor;if(s.s<1){if(!s.s)return new l(0);throw Error(al+"NaN")}for(t=Bi(s),$r=!1,i=Math.sqrt(+s),i==0||i==1/0?(e=Bc(s.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=N0((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new l(e)):r=new l(i.toString()),n=l.precision,i=a=n+3;;)if(o=r,r=o.plus(od(s,o,a+2)).times(.5),Bc(o.d).slice(0,a)===(e=Bc(r.d)).slice(0,a)){if(e=e.slice(a-3,a+1),i==a&&e=="4999"){if(mr(o,n+1,0),o.times(o).eq(s)){r=o;break}}else if(e!="9999")break;a+=4}return $r=!0,mr(r,n)};jt.times=jt.mul=function(t){var e,n,r,i,o,a,s,l,c,u=this,f=u.constructor,h=u.d,p=(t=new f(t)).d;if(!u.s||!t.s)return new f(0);for(t.s*=u.s,n=u.e+t.e,l=h.length,c=p.length,l<c&&(o=h,h=p,p=o,a=l,l=c,c=a),o=[],a=l+c,r=a;r--;)o.push(0);for(r=c;--r>=0;){for(e=0,i=l+r;i>r;)s=o[i]+p[r]*h[i-r-1]+e,o[i--]=s%xo|0,e=s/xo|0;o[i]=(o[i]+e)%xo|0}for(;!o[--a];)o.pop();return e?++n:o.shift(),t.d=o,t.e=n,$r?mr(t,f.precision):t};jt.toDecimalPlaces=jt.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(Jc(t,0,k0),e===void 0?e=r.rounding:Jc(e,0,8),mr(n,t+Bi(n)+1,e))};jt.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=om(r,!0):(Jc(t,0,k0),e===void 0?e=i.rounding:Jc(e,0,8),r=mr(new i(r),t+1,e),n=om(r,!0,t+1)),n};jt.toFixed=function(t,e){var n,r,i=this,o=i.constructor;return t===void 0?om(i):(Jc(t,0,k0),e===void 0?e=o.rounding:Jc(e,0,8),r=mr(new o(i),t+Bi(i)+1,e),n=om(r.abs(),!1,t+Bi(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};jt.toInteger=jt.toint=function(){var t=this,e=t.constructor;return mr(new e(t),Bi(t)+1,e.rounding)};jt.toNumber=function(){return+this};jt.toPower=jt.pow=function(t){var e,n,r,i,o,a,s=this,l=s.constructor,c=12,u=+(t=new l(t));if(!t.s)return new l(As);if(s=new l(s),!s.s){if(t.s<1)throw Error(al+"Infinity");return s}if(s.eq(As))return s;if(r=l.precision,t.eq(As))return mr(s,r);if(e=t.e,n=t.d.length-1,a=e>=n,o=s.s,a){if((n=u<0?-u:u)<=noe){for(i=new l(As),e=Math.ceil(r/Lr+4),$r=!1;n%2&&(i=i.times(s),m9(i.d,e)),n=N0(n/2),n!==0;)s=s.times(s),m9(s.d,e);return $r=!0,t.s<0?new l(As).div(i):mr(i,r)}}else if(o<0)throw Error(al+"NaN");return o=o<0&&t.d[Math.max(e,n)]&1?-1:1,s.s=1,$r=!1,i=t.times(Nb(s,r+c)),$r=!0,i=ioe(i),i.s=o,i};jt.toPrecision=function(t,e){var n,r,i=this,o=i.constructor;return t===void 0?(n=Bi(i),r=om(i,n<=o.toExpNeg||n>=o.toExpPos)):(Jc(t,1,k0),e===void 0?e=o.rounding:Jc(e,0,8),i=mr(new o(i),t,e),n=Bi(i),r=om(i,t<=n||n<=o.toExpNeg,t)),r};jt.toSignificantDigits=jt.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(Jc(t,1,k0),e===void 0?e=r.rounding:Jc(e,0,8)),mr(new r(n),t,e)};jt.toString=jt.valueOf=jt.val=jt.toJSON=jt[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Bi(t),n=t.constructor;return om(t,e<=n.toExpNeg||e>=n.toExpPos)};function roe(t,e){var n,r,i,o,a,s,l,c,u=t.constructor,f=u.precision;if(!t.s||!e.s)return e.s||(e=new u(t)),$r?mr(e,f):e;if(l=t.d,c=e.d,a=t.e,i=e.e,l=l.slice(),o=a-i,o){for(o<0?(r=l,o=-o,s=c.length):(r=c,i=a,s=l.length),a=Math.ceil(f/Lr),s=a>s?a+1:s+1,o>s&&(o=s,r.length=1),r.reverse();o--;)r.push(0);r.reverse()}for(s=l.length,o=c.length,s-o<0&&(o=s,r=c,c=l,l=r),n=0;o;)n=(l[--o]=l[o]+c[o]+n)/xo|0,l[o]%=xo;for(n&&(l.unshift(n),++i),s=l.length;l[--s]==0;)l.pop();return e.d=l,e.e=i,$r?mr(e,f):e}function Jc(t,e,n){if(t!==~~t||t<e||t>n)throw Error(Vp+t)}function Bc(t){var e,n,r,i=t.length-1,o="",a=t[0];if(i>0){for(o+=a,e=1;e<i;e++)r=t[e]+"",n=Lr-r.length,n&&(o+=Mf(n)),o+=r;a=t[e],r=a+"",n=Lr-r.length,n&&(o+=Mf(n))}else if(a===0)return"0";for(;a%10===0;)a/=10;return o+a}var od=function(){function t(r,i){var o,a=0,s=r.length;for(r=r.slice();s--;)o=r[s]*i+a,r[s]=o%xo|0,a=o/xo|0;return a&&r.unshift(a),r}function e(r,i,o,a){var s,l;if(o!=a)l=o>a?1:-1;else for(s=l=0;s<o;s++)if(r[s]!=i[s]){l=r[s]>i[s]?1:-1;break}return l}function n(r,i,o){for(var a=0;o--;)r[o]-=a,a=r[o]<i[o]?1:0,r[o]=a*xo+r[o]-i[o];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,o,a){var s,l,c,u,f,h,p,y,g,v,b,w,T,C,P,M,k,I,U=r.constructor,z=r.s==i.s?1:-1,O=r.d,B=i.d;if(!r.s)return new U(r);if(!i.s)throw Error(al+"Division by zero");for(l=r.e-i.e,k=B.length,P=O.length,p=new U(z),y=p.d=[],c=0;B[c]==(O[c]||0);)++c;if(B[c]>(O[c]||0)&&--l,o==null?w=o=U.precision:a?w=o+(Bi(r)-Bi(i))+1:w=o,w<0)return new U(0);if(w=w/Lr+2|0,c=0,k==1)for(u=0,B=B[0],w++;(c<P||u)&&w--;c++)T=u*xo+(O[c]||0),y[c]=T/B|0,u=T%B|0;else{for(u=xo/(B[0]+1)|0,u>1&&(B=t(B,u),O=t(O,u),k=B.length,P=O.length),C=k,g=O.slice(0,k),v=g.length;v<k;)g[v++]=0;I=B.slice(),I.unshift(0),M=B[0],B[1]>=xo/2&&++M;do u=0,s=e(B,g,k,v),s<0?(b=g[0],k!=v&&(b=b*xo+(g[1]||0)),u=b/M|0,u>1?(u>=xo&&(u=xo-1),f=t(B,u),h=f.length,v=g.length,s=e(f,g,h,v),s==1&&(u--,n(f,k<h?I:B,h))):(u==0&&(s=u=1),f=B.slice()),h=f.length,h<v&&f.unshift(0),n(g,f,v),s==-1&&(v=g.length,s=e(B,g,k,v),s<1&&(u++,n(g,k<v?I:B,v))),v=g.length):s===0&&(u++,g=[0]),y[c++]=u,s&&g[0]?g[v++]=O[C]||0:(g=[O[C]],v=1);while((C++<P||g[0]!==void 0)&&w--)}return y[0]||y.shift(),p.e=l,mr(p,a?o+Bi(p)+1:o)}}();function ioe(t,e){var n,r,i,o,a,s,l=0,c=0,u=t.constructor,f=u.precision;if(Bi(t)>16)throw Error(d5+Bi(t));if(!t.s)return new u(As);for($r=!1,s=f,a=new u(.03125);t.abs().gte(.1);)t=t.times(a),c+=5;for(r=Math.log(pp(2,c))/Math.LN10*2+5|0,s+=r,n=i=o=new u(As),u.precision=s;;){if(i=mr(i.times(t),s),n=n.times(++l),a=o.plus(od(i,n,s)),Bc(a.d).slice(0,s)===Bc(o.d).slice(0,s)){for(;c--;)o=mr(o.times(o),s);return u.precision=f,e==null?($r=!0,mr(o,f)):o}o=a}}function Bi(t){for(var e=t.e*Lr,n=t.d[0];n>=10;n/=10)e++;return e}function VR(t,e,n){if(e>t.LN10.sd())throw $r=!0,n&&(t.precision=n),Error(al+"LN10 precision limit exceeded");return mr(new t(t.LN10),e)}function Mf(t){for(var e="";t--;)e+="0";return e}function Nb(t,e){var n,r,i,o,a,s,l,c,u,f=1,h=10,p=t,y=p.d,g=p.constructor,v=g.precision;if(p.s<1)throw Error(al+(p.s?"NaN":"-Infinity"));if(p.eq(As))return new g(0);if(e==null?($r=!1,c=v):c=e,p.eq(10))return e==null&&($r=!0),VR(g,c);if(c+=h,g.precision=c,n=Bc(y),r=n.charAt(0),o=Bi(p),Math.abs(o)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)p=p.times(t),n=Bc(p.d),r=n.charAt(0),f++;o=Bi(p),r>1?(p=new g("0."+n),o++):p=new g(r+"."+n.slice(1))}else return l=VR(g,c+2,v).times(o+""),p=Nb(new g(r+"."+n.slice(1)),c-h).plus(l),g.precision=v,e==null?($r=!0,mr(p,v)):p;for(s=a=p=od(p.minus(As),p.plus(As),c),u=mr(p.times(p),c),i=3;;){if(a=mr(a.times(u),c),l=s.plus(od(a,new g(i),c)),Bc(l.d).slice(0,c)===Bc(s.d).slice(0,c))return s=s.times(2),o!==0&&(s=s.plus(VR(g,c+2,v).times(o+""))),s=od(s,new g(f),c),g.precision=v,e==null?($r=!0,mr(s,v)):s;s=l,i+=2}}function p9(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=N0(n/Lr),t.d=[],r=(n+1)%Lr,n<0&&(r+=Lr),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=Lr;r<i;)t.d.push(+e.slice(r,r+=Lr));e=e.slice(r),r=Lr-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),$r&&(t.e>lC||t.e<-lC))throw Error(d5+n)}else t.s=0,t.e=0,t.d=[0];return t}function mr(t,e,n){var r,i,o,a,s,l,c,u,f=t.d;for(a=1,o=f[0];o>=10;o/=10)a++;if(r=e-a,r<0)r+=Lr,i=e,c=f[u=0];else{if(u=Math.ceil((r+1)/Lr),o=f.length,u>=o)return t;for(c=o=f[u],a=1;o>=10;o/=10)a++;r%=Lr,i=r-Lr+a}if(n!==void 0&&(o=pp(10,a-i-1),s=c/o%10|0,l=e<0||f[u+1]!==void 0||c%o,l=n<4?(s||l)&&(n==0||n==(t.s<0?3:2)):s>5||s==5&&(n==4||l||n==6&&(r>0?i>0?c/pp(10,a-i):0:f[u-1])%10&1||n==(t.s<0?8:7))),e<1||!f[0])return l?(o=Bi(t),f.length=1,e=e-o-1,f[0]=pp(10,(Lr-e%Lr)%Lr),t.e=N0(-e/Lr)||0):(f.length=1,f[0]=t.e=t.s=0),t;if(r==0?(f.length=u,o=1,u--):(f.length=u+1,o=pp(10,Lr-r),f[u]=i>0?(c/pp(10,a-i)%pp(10,i)|0)*o:0),l)for(;;)if(u==0){(f[0]+=o)==xo&&(f[0]=1,++t.e);break}else{if(f[u]+=o,f[u]!=xo)break;f[u--]=0,o=1}for(r=f.length;f[--r]===0;)f.pop();if($r&&(t.e>lC||t.e<-lC))throw Error(d5+Bi(t));return t}function ooe(t,e){var n,r,i,o,a,s,l,c,u,f,h=t.constructor,p=h.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new h(t),$r?mr(e,p):e;if(l=t.d,f=e.d,r=e.e,c=t.e,l=l.slice(),a=c-r,a){for(u=a<0,u?(n=l,a=-a,s=f.length):(n=f,r=c,s=l.length),i=Math.max(Math.ceil(p/Lr),s)+2,a>i&&(a=i,n.length=1),n.reverse(),i=a;i--;)n.push(0);n.reverse()}else{for(i=l.length,s=f.length,u=i<s,u&&(s=i),i=0;i<s;i++)if(l[i]!=f[i]){u=l[i]<f[i];break}a=0}for(u&&(n=l,l=f,f=n,e.s=-e.s),s=l.length,i=f.length-s;i>0;--i)l[s++]=0;for(i=f.length;i>a;){if(l[--i]<f[i]){for(o=i;o&&l[--o]===0;)l[o]=xo-1;--l[o],l[i]+=xo}l[i]-=f[i]}for(;l[--s]===0;)l.pop();for(;l[0]===0;l.shift())--r;return l[0]?(e.d=l,e.e=r,$r?mr(e,p):e):new h(0)}function om(t,e,n){var r,i=Bi(t),o=Bc(t.d),a=o.length;return e?(n&&(r=n-a)>0?o=o.charAt(0)+"."+o.slice(1)+Mf(r):a>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(i<0?"e":"e+")+i):i<0?(o="0."+Mf(-i-1)+o,n&&(r=n-a)>0&&(o+=Mf(r))):i>=a?(o+=Mf(i+1-a),n&&(r=n-i-1)>0&&(o=o+"."+Mf(r))):((r=i+1)<a&&(o=o.slice(0,r)+"."+o.slice(r)),n&&(r=n-a)>0&&(i+1===a&&(o+="."),o+=Mf(r))),t.s<0?"-"+o:o}function m9(t,e){if(t.length>e)return t.length=e,!0}function aoe(t){var e,n,r;function i(o){var a=this;if(!(a instanceof i))return new i(o);if(a.constructor=i,o instanceof i){a.s=o.s,a.e=o.e,a.d=(o=o.d)?o.slice():o;return}if(typeof o=="number"){if(o*0!==0)throw Error(Vp+o);if(o>0)a.s=1;else if(o<0)o=-o,a.s=-1;else{a.s=0,a.e=0,a.d=[0];return}if(o===~~o&&o<1e7){a.e=0,a.d=[o];return}return p9(a,o.toString())}else if(typeof o!="string")throw Error(Vp+o);if(o.charCodeAt(0)===45?(o=o.slice(1),a.s=-1):a.s=1,m3e.test(o))p9(a,o);else throw Error(Vp+o)}if(i.prototype=jt,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=aoe,i.config=i.set=g3e,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function g3e(t){if(!t||typeof t!="object")throw Error(al+"Object expected");var e,n,r,i=["precision",1,k0,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(N0(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(Vp+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(Vp+n+": "+r);return this}var f5=aoe(p3e);As=new f5(1);const dr=f5;function y3e(t){return b3e(t)||w3e(t)||x3e(t)||v3e()}function v3e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function x3e(t,e){if(t){if(typeof t=="string")return TL(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return TL(t,e)}}function w3e(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function b3e(t){if(Array.isArray(t))return TL(t)}function TL(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var S3e=function(e){return e},soe={},loe=function(e){return e===soe},g9=function(e){return function n(){return arguments.length===0||arguments.length===1&&loe(arguments.length<=0?void 0:arguments[0])?n:e.apply(void 0,arguments)}},E3e=function t(e,n){return e===1?n:g9(function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];var a=i.filter(function(s){return s!==soe}).length;return a>=e?n.apply(void 0,i):t(e-a,g9(function(){for(var s=arguments.length,l=new Array(s),c=0;c<s;c++)l[c]=arguments[c];var u=i.map(function(f){return loe(f)?l.shift():f});return n.apply(void 0,y3e(u).concat(l))}))})},YA=function(e){return E3e(e.length,e)},CL=function(e,n){for(var r=[],i=e;i<n;++i)r[i-e]=i;return r},_3e=YA(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(n){return e[n]}).map(t)}),T3e=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return S3e;var i=n.reverse(),o=i[0],a=i.slice(1);return function(){return a.reduce(function(s,l){return l(s)},o.apply(void 0,arguments))}},AL=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},coe=function(e){var n=null,r=null;return function(){for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return n&&o.every(function(s,l){return s===n[l]})||(n=o,r=e.apply(void 0,o)),r}};function C3e(t){var e;return t===0?e=1:e=Math.floor(new dr(t).abs().log(10).toNumber())+1,e}function A3e(t,e,n){for(var r=new dr(t),i=0,o=[];r.lt(e)&&i<1e5;)o.push(r.toNumber()),r=r.add(n),i++;return o}var M3e=YA(function(t,e,n){var r=+t,i=+e;return r+n*(i-r)}),P3e=YA(function(t,e,n){var r=e-+t;return r=r||1/0,(n-t)/r}),k3e=YA(function(t,e,n){var r=e-+t;return r=r||1/0,Math.max(0,Math.min(1,(n-t)/r))});const XA={rangeStep:A3e,getDigitCount:C3e,interpolateNumber:M3e,uninterpolateNumber:P3e,uninterpolateTruncation:k3e};function ML(t){return j3e(t)||R3e(t)||uoe(t)||N3e()}function N3e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function R3e(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function j3e(t){if(Array.isArray(t))return PL(t)}function Rb(t,e){return L3e(t)||O3e(t,e)||uoe(t,e)||I3e()}function I3e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uoe(t,e){if(t){if(typeof t=="string")return PL(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return PL(t,e)}}function PL(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function O3e(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],r=!0,i=!1,o=void 0;try{for(var a=t[Symbol.iterator](),s;!(r=(s=a.next()).done)&&(n.push(s.value),!(e&&n.length===e));r=!0);}catch(l){i=!0,o=l}finally{try{!r&&a.return!=null&&a.return()}finally{if(i)throw o}}return n}}function L3e(t){if(Array.isArray(t))return t}function doe(t){var e=Rb(t,2),n=e[0],r=e[1],i=n,o=r;return n>r&&(i=r,o=n),[i,o]}function foe(t,e,n){if(t.lte(0))return new dr(0);var r=XA.getDigitCount(t.toNumber()),i=new dr(10).pow(r),o=t.div(i),a=r!==1?.05:.1,s=new dr(Math.ceil(o.div(a).toNumber())).add(n).mul(a),l=s.mul(i);return e?l:new dr(Math.ceil(l))}function D3e(t,e,n){var r=1,i=new dr(t);if(!i.isint()&&n){var o=Math.abs(t);o<1?(r=new dr(10).pow(XA.getDigitCount(t)-1),i=new dr(Math.floor(i.div(r).toNumber())).mul(r)):o>1&&(i=new dr(Math.floor(t)))}else t===0?i=new dr(Math.floor((e-1)/2)):n||(i=new dr(Math.floor(t)));var a=Math.floor((e-1)/2),s=T3e(_3e(function(l){return i.add(new dr(l-a).mul(r)).toNumber()}),CL);return s(0,e)}function hoe(t,e,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(n-1)))return{step:new dr(0),tickMin:new dr(0),tickMax:new dr(0)};var o=foe(new dr(e).sub(t).div(n-1),r,i),a;t<=0&&e>=0?a=new dr(0):(a=new dr(t).add(e).div(2),a=a.sub(new dr(a).mod(o)));var s=Math.ceil(a.sub(t).div(o).toNumber()),l=Math.ceil(new dr(e).sub(a).div(o).toNumber()),c=s+l+1;return c>n?hoe(t,e,n,r,i+1):(c<n&&(l=e>0?l+(n-c):l,s=e>0?s:s+(n-c)),{step:o,tickMin:a.sub(new dr(s).mul(o)),tickMax:a.add(new dr(l).mul(o))})}function F3e(t){var e=Rb(t,2),n=e[0],r=e[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=Math.max(i,2),s=doe([n,r]),l=Rb(s,2),c=l[0],u=l[1];if(c===-1/0||u===1/0){var f=u===1/0?[c].concat(ML(CL(0,i-1).map(function(){return 1/0}))):[].concat(ML(CL(0,i-1).map(function(){return-1/0})),[u]);return n>r?AL(f):f}if(c===u)return D3e(c,i,o);var h=hoe(c,u,a,o),p=h.step,y=h.tickMin,g=h.tickMax,v=XA.rangeStep(y,g.add(new dr(.1).mul(p)),p);return n>r?AL(v):v}function z3e(t,e){var n=Rb(t,2),r=n[0],i=n[1],o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=doe([r,i]),s=Rb(a,2),l=s[0],c=s[1];if(l===-1/0||c===1/0)return[r,i];if(l===c)return[l];var u=Math.max(e,2),f=foe(new dr(c).sub(l).div(u-1),o,0),h=[].concat(ML(XA.rangeStep(new dr(l),new dr(c).sub(new dr(.99).mul(f)),f)),[c]);return r>i?AL(h):h}var U3e=coe(F3e),B3e=coe(z3e),$3e="Invariant failed";function am(t,e){throw new Error($3e)}var H3e=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Mv(t){"@babel/helpers - typeof";return Mv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mv(t)}function cC(){return cC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},cC.apply(this,arguments)}function V3e(t,e){return Y3e(t)||q3e(t,e)||G3e(t,e)||W3e()}function W3e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function G3e(t,e){if(t){if(typeof t=="string")return y9(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y9(t,e)}}function y9(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function q3e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}function Y3e(t){if(Array.isArray(t))return t}function X3e(t,e){if(t==null)return{};var n=K3e(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function K3e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function J3e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Z3e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,goe(r.key),r)}}function Q3e(t,e,n){return e&&Z3e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function e4e(t,e,n){return e=uC(e),t4e(t,poe()?Reflect.construct(e,n||[],uC(t).constructor):e.apply(t,n))}function t4e(t,e){if(e&&(Mv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return n4e(t)}function n4e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function poe(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(poe=function(){return!!t})()}function uC(t){return uC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},uC(t)}function r4e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&kL(t,e)}function kL(t,e){return kL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},kL(t,e)}function moe(t,e,n){return e=goe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function goe(t){var e=i4e(t,"string");return Mv(e)=="symbol"?e:e+""}function i4e(t,e){if(Mv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Mv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Q1=function(t){function e(){return J3e(this,e),e4e(this,e,arguments)}return r4e(e,t),Q3e(e,[{key:"render",value:function(){var r=this.props,i=r.offset,o=r.layout,a=r.width,s=r.dataKey,l=r.data,c=r.dataPointFormatter,u=r.xAxis,f=r.yAxis,h=X3e(r,H3e),p=Dn(h,!1);this.props.direction==="x"&&u.type!=="number"&&am();var y=l.map(function(g){var v=c(g,s),b=v.x,w=v.y,T=v.value,C=v.errorVal;if(!C)return null;var P=[],M,k;if(Array.isArray(C)){var I=V3e(C,2);M=I[0],k=I[1]}else M=k=C;if(o==="vertical"){var U=u.scale,z=w+i,O=z+a,B=z-a,$=U(T-M),F=U(T+k);P.push({x1:F,y1:O,x2:F,y2:B}),P.push({x1:$,y1:z,x2:F,y2:z}),P.push({x1:$,y1:O,x2:$,y2:B})}else if(o==="horizontal"){var J=f.scale,K=b+i,Z=K-a,H=K+a,Y=J(T-M),L=J(T+k);P.push({x1:Z,y1:L,x2:H,y2:L}),P.push({x1:K,y1:Y,x2:K,y2:L}),P.push({x1:Z,y1:Y,x2:H,y2:Y})}return ve.createElement(bi,cC({className:"recharts-errorBar",key:"bar-".concat(P.map(function(N){return"".concat(N.x1,"-").concat(N.x2,"-").concat(N.y1,"-").concat(N.y2)}))},p),P.map(function(N){return ve.createElement("line",cC({},N,{key:"line-".concat(N.x1,"-").concat(N.x2,"-").concat(N.y1,"-").concat(N.y2)}))}))});return ve.createElement(bi,{className:"recharts-errorBars"},y)}}])}(ve.Component);moe(Q1,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});moe(Q1,"displayName","ErrorBar");function jb(t){"@babel/helpers - typeof";return jb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jb(t)}function v9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function np(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?v9(Object(n),!0).forEach(function(r){o4e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function o4e(t,e,n){return e=a4e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a4e(t){var e=s4e(t,"string");return jb(e)=="symbol"?e:e+""}function s4e(t,e){if(jb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(jb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var yoe=function(e){var n=e.children,r=e.formattedGraphicalItems,i=e.legendWidth,o=e.legendContent,a=Ts(n,Qy);if(!a)return null;var s=Qy.defaultProps,l=s!==void 0?np(np({},s),a.props):{},c;return a.props&&a.props.payload?c=a.props&&a.props.payload:o==="children"?c=(r||[]).reduce(function(u,f){var h=f.item,p=f.props,y=p.sectors||p.data||[];return u.concat(y.map(function(g){return{type:a.props.iconType||h.props.legendType,value:g.name,color:g.fill,payload:g}}))},[]):c=(r||[]).map(function(u){var f=u.item,h=f.type.defaultProps,p=h!==void 0?np(np({},h),f.props):{},y=p.dataKey,g=p.name,v=p.legendType,b=p.hide;return{inactive:b,dataKey:y,type:l.iconType||v||"square",color:h5(f),value:g||y,payload:p}}),np(np(np({},l),Qy.getWithHeight(a,i)),{},{payload:c,item:a})};function Ib(t){"@babel/helpers - typeof";return Ib=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ib(t)}function x9(t){return d4e(t)||u4e(t)||c4e(t)||l4e()}function l4e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function c4e(t,e){if(t){if(typeof t=="string")return NL(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return NL(t,e)}}function u4e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function d4e(t){if(Array.isArray(t))return NL(t)}function NL(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function w9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function si(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?w9(Object(n),!0).forEach(function(r){tv(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function tv(t,e,n){return e=f4e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function f4e(t){var e=h4e(t,"string");return Ib(e)=="symbol"?e:e+""}function h4e(t,e){if(Ib(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ib(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function js(t,e,n){return jn(t)||jn(e)?n:no(e)?rl(t,e,n):kn(e)?e(t):n}function Bw(t,e,n,r){var i=d3e(t,function(s){return js(s,e)});if(n==="number"){var o=i.filter(function(s){return Et(s)||parseFloat(s)});return o.length?[GA(o),WA(o)]:[1/0,-1/0]}var a=r?i.filter(function(s){return!jn(s)}):i;return a.map(function(s){return no(s)||s instanceof Date?s:""})}var p4e=function(e){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,a=-1,s=(n=r==null?void 0:r.length)!==null&&n!==void 0?n:0;if(s<=1)return 0;if(o&&o.axisType==="angleAxis"&&Math.abs(Math.abs(o.range[1]-o.range[0])-360)<=1e-6)for(var l=o.range,c=0;c<s;c++){var u=c>0?i[c-1].coordinate:i[s-1].coordinate,f=i[c].coordinate,h=c>=s-1?i[0].coordinate:i[c+1].coordinate,p=void 0;if(tc(f-u)!==tc(h-f)){var y=[];if(tc(h-f)===tc(l[1]-l[0])){p=h;var g=f+l[1]-l[0];y[0]=Math.min(g,(g+u)/2),y[1]=Math.max(g,(g+u)/2)}else{p=u;var v=h+l[1]-l[0];y[0]=Math.min(f,(v+f)/2),y[1]=Math.max(f,(v+f)/2)}var b=[Math.min(f,(p+f)/2),Math.max(f,(p+f)/2)];if(e>b[0]&&e<=b[1]||e>=y[0]&&e<=y[1]){a=i[c].index;break}}else{var w=Math.min(u,h),T=Math.max(u,h);if(e>(w+f)/2&&e<=(T+f)/2){a=i[c].index;break}}}else for(var C=0;C<s;C++)if(C===0&&e<=(r[C].coordinate+r[C+1].coordinate)/2||C>0&&C<s-1&&e>(r[C].coordinate+r[C-1].coordinate)/2&&e<=(r[C].coordinate+r[C+1].coordinate)/2||C===s-1&&e>(r[C].coordinate+r[C-1].coordinate)/2){a=r[C].index;break}return a},h5=function(e){var n,r=e,i=r.type.displayName,o=(n=e.type)!==null&&n!==void 0&&n.defaultProps?si(si({},e.type.defaultProps),e.props):e.props,a=o.stroke,s=o.fill,l;switch(i){case"Line":l=a;break;case"Area":case"Radar":l=a&&a!=="none"?a:s;break;default:l=s;break}return l},m4e=function(e){var n=e.barSize,r=e.totalSize,i=e.stackGroups,o=i===void 0?{}:i;if(!o)return{};for(var a={},s=Object.keys(o),l=0,c=s.length;l<c;l++)for(var u=o[s[l]].stackGroups,f=Object.keys(u),h=0,p=f.length;h<p;h++){var y=u[f[h]],g=y.items,v=y.cateAxisId,b=g.filter(function(k){return rd(k.type).indexOf("Bar")>=0});if(b&&b.length){var w=b[0].type.defaultProps,T=w!==void 0?si(si({},w),b[0].props):b[0].props,C=T.barSize,P=T[v];a[P]||(a[P]=[]);var M=jn(C)?n:C;a[P].push({item:b[0],stackList:b.slice(1),barSize:jn(M)?void 0:im(M,r,0)})}}return a},g4e=function(e){var n=e.barGap,r=e.barCategoryGap,i=e.bandSize,o=e.sizeList,a=o===void 0?[]:o,s=e.maxBarSize,l=a.length;if(l<1)return null;var c=im(n,i,0,!0),u,f=[];if(a[0].barSize===+a[0].barSize){var h=!1,p=i/l,y=a.reduce(function(C,P){return C+P.barSize||0},0);y+=(l-1)*c,y>=i&&(y-=(l-1)*c,c=0),y>=i&&p>0&&(h=!0,p*=.9,y=l*p);var g=(i-y)/2>>0,v={offset:g-c,size:0};u=a.reduce(function(C,P){var M={item:P.item,position:{offset:v.offset+v.size+c,size:h?p:P.barSize}},k=[].concat(x9(C),[M]);return v=k[k.length-1].position,P.stackList&&P.stackList.length&&P.stackList.forEach(function(I){k.push({item:I,position:v})}),k},f)}else{var b=im(r,i,0,!0);i-2*b-(l-1)*c<=0&&(c=0);var w=(i-2*b-(l-1)*c)/l;w>1&&(w>>=0);var T=s===+s?Math.min(w,s):w;u=a.reduce(function(C,P,M){var k=[].concat(x9(C),[{item:P.item,position:{offset:b+(w+c)*M+(w-T)/2,size:T}}]);return P.stackList&&P.stackList.length&&P.stackList.forEach(function(I){k.push({item:I,position:k[k.length-1].position})}),k},f)}return u},y4e=function(e,n,r,i){var o=r.children,a=r.width,s=r.margin,l=a-(s.left||0)-(s.right||0),c=yoe({children:o,legendWidth:l});if(c){var u=i||{},f=u.width,h=u.height,p=c.align,y=c.verticalAlign,g=c.layout;if((g==="vertical"||g==="horizontal"&&y==="middle")&&p!=="center"&&Et(e[p]))return si(si({},e),{},tv({},p,e[p]+(f||0)));if((g==="horizontal"||g==="vertical"&&p==="center")&&y!=="middle"&&Et(e[y]))return si(si({},e),{},tv({},y,e[y]+(h||0)))}return e},v4e=function(e,n,r){return jn(n)?!0:e==="horizontal"?n==="yAxis":e==="vertical"||r==="x"?n==="xAxis":r==="y"?n==="yAxis":!0},voe=function(e,n,r,i,o){var a=n.props.children,s=il(a,Q1).filter(function(c){return v4e(i,o,c.props.direction)});if(s&&s.length){var l=s.map(function(c){return c.props.dataKey});return e.reduce(function(c,u){var f=js(u,r);if(jn(f))return c;var h=Array.isArray(f)?[GA(f),WA(f)]:[f,f],p=l.reduce(function(y,g){var v=js(u,g,0),b=h[0]-Math.abs(Array.isArray(v)?v[0]:v),w=h[1]+Math.abs(Array.isArray(v)?v[1]:v);return[Math.min(b,y[0]),Math.max(w,y[1])]},[1/0,-1/0]);return[Math.min(p[0],c[0]),Math.max(p[1],c[1])]},[1/0,-1/0])}return null},x4e=function(e,n,r,i,o){var a=n.map(function(s){return voe(e,s,r,o,i)}).filter(function(s){return!jn(s)});return a&&a.length?a.reduce(function(s,l){return[Math.min(s[0],l[0]),Math.max(s[1],l[1])]},[1/0,-1/0]):null},xoe=function(e,n,r,i,o){var a=n.map(function(l){var c=l.props.dataKey;return r==="number"&&c&&voe(e,l,c,i)||Bw(e,c,r,o)});if(r==="number")return a.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]);var s={};return a.reduce(function(l,c){for(var u=0,f=c.length;u<f;u++)s[c[u]]||(s[c[u]]=!0,l.push(c[u]));return l},[])},woe=function(e,n){return e==="horizontal"&&n==="xAxis"||e==="vertical"&&n==="yAxis"||e==="centric"&&n==="angleAxis"||e==="radial"&&n==="radiusAxis"},boe=function(e,n,r,i){if(i)return e.map(function(l){return l.coordinate});var o,a,s=e.map(function(l){return l.coordinate===n&&(o=!0),l.coordinate===r&&(a=!0),l.coordinate});return o||s.push(n),a||s.push(r),s},Ju=function(e,n,r){if(!e)return null;var i=e.scale,o=e.duplicateDomain,a=e.type,s=e.range,l=e.realScaleType==="scaleBand"?i.bandwidth()/2:2,c=(n||r)&&a==="category"&&i.bandwidth?i.bandwidth()/l:0;if(c=e.axisType==="angleAxis"&&(s==null?void 0:s.length)>=2?tc(s[0]-s[1])*2*c:c,n&&(e.ticks||e.niceTicks)){var u=(e.ticks||e.niceTicks).map(function(f){var h=o?o.indexOf(f):f;return{coordinate:i(h)+c,value:f,offset:c}});return u.filter(function(f){return!G1(f.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(f,h){return{coordinate:i(f)+c,value:f,index:h,offset:c}}):i.ticks&&!r?i.ticks(e.tickCount).map(function(f){return{coordinate:i(f)+c,value:f,offset:c}}):i.domain().map(function(f,h){return{coordinate:i(f)+c,value:o?o[f]:f,index:h,offset:c}})},WR=new WeakMap,GE=function(e,n){if(typeof n!="function")return e;WR.has(e)||WR.set(e,new WeakMap);var r=WR.get(e);if(r.has(n))return r.get(n);var i=function(){e.apply(void 0,arguments),n.apply(void 0,arguments)};return r.set(n,i),i},w4e=function(e,n,r){var i=e.scale,o=e.type,a=e.layout,s=e.axisType;if(i==="auto")return a==="radial"&&s==="radiusAxis"?{scale:Cb(),realScaleType:"band"}:a==="radial"&&s==="angleAxis"?{scale:iC(),realScaleType:"linear"}:o==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:Uw(),realScaleType:"point"}:o==="category"?{scale:Cb(),realScaleType:"band"}:{scale:iC(),realScaleType:"linear"};if(W1(i)){var l="scale".concat(RA(i));return{scale:(o9[l]||Uw)(),realScaleType:o9[l]?l:"point"}}return kn(i)?{scale:i}:{scale:Uw(),realScaleType:"point"}},b9=1e-4,b4e=function(e){var n=e.domain();if(!(!n||n.length<=2)){var r=n.length,i=e.range(),o=Math.min(i[0],i[1])-b9,a=Math.max(i[0],i[1])+b9,s=e(n[0]),l=e(n[r-1]);(s<o||s>a||l<o||l>a)&&e.domain([n[0],n[r-1]])}},S4e=function(e,n){if(!e)return null;for(var r=0,i=e.length;r<i;r++)if(e[r].item===n)return e[r].position;return null},E4e=function(e,n){if(!n||n.length!==2||!Et(n[0])||!Et(n[1]))return e;var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]),o=[e[0],e[1]];return(!Et(e[0])||e[0]<r)&&(o[0]=r),(!Et(e[1])||e[1]>i)&&(o[1]=i),o[0]>i&&(o[0]=i),o[1]<r&&(o[1]=r),o},_4e=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var o=0,a=0,s=0;s<n;++s){var l=G1(e[s][r][1])?e[s][r][0]:e[s][r][1];l>=0?(e[s][r][0]=o,e[s][r][1]=o+l,o=e[s][r][1]):(e[s][r][0]=a,e[s][r][1]=a+l,a=e[s][r][1])}},T4e=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var o=0,a=0;a<n;++a){var s=G1(e[a][r][1])?e[a][r][0]:e[a][r][1];s>=0?(e[a][r][0]=o,e[a][r][1]=o+s,o=e[a][r][1]):(e[a][r][0]=0,e[a][r][1]=0)}},C4e={sign:_4e,expand:cRe,none:wv,silhouette:uRe,wiggle:dRe,positive:T4e},A4e=function(e,n,r){var i=n.map(function(s){return s.props.dataKey}),o=C4e[r],a=lRe().keys(i).value(function(s,l){return+js(s,l,0)}).order(sL).offset(o);return a(e)},M4e=function(e,n,r,i,o,a){if(!e)return null;var s=a?n.reverse():n,l={},c=s.reduce(function(f,h){var p,y=(p=h.type)!==null&&p!==void 0&&p.defaultProps?si(si({},h.type.defaultProps),h.props):h.props,g=y.stackId,v=y.hide;if(v)return f;var b=y[r],w=f[b]||{hasStack:!1,stackGroups:{}};if(no(g)){var T=w.stackGroups[g]||{numericAxisId:r,cateAxisId:i,items:[]};T.items.push(h),w.hasStack=!0,w.stackGroups[g]=T}else w.stackGroups[q1("_stackId_")]={numericAxisId:r,cateAxisId:i,items:[h]};return si(si({},f),{},tv({},b,w))},l),u={};return Object.keys(c).reduce(function(f,h){var p=c[h];if(p.hasStack){var y={};p.stackGroups=Object.keys(p.stackGroups).reduce(function(g,v){var b=p.stackGroups[v];return si(si({},g),{},tv({},v,{numericAxisId:r,cateAxisId:i,items:b.items,stackedData:A4e(e,b.items,o)}))},y)}return si(si({},f),{},tv({},h,p))},u)},P4e=function(e,n){var r=n.realScaleType,i=n.type,o=n.tickCount,a=n.originalDomain,s=n.allowDecimals,l=r||n.scale;if(l!=="auto"&&l!=="linear")return null;if(o&&i==="number"&&a&&(a[0]==="auto"||a[1]==="auto")){var c=e.domain();if(!c.length)return null;var u=U3e(c,o,s);return e.domain([GA(u),WA(u)]),{niceTicks:u}}if(o&&i==="number"){var f=e.domain(),h=B3e(f,o,s);return{niceTicks:h}}return null};function S9(t){var e=t.axis,n=t.ticks,r=t.bandSize,i=t.entry,o=t.index,a=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!jn(i[e.dataKey])){var s=FT(n,"value",i[e.dataKey]);if(s)return s.coordinate+r/2}return n[o]?n[o].coordinate+r/2:null}var l=js(i,jn(a)?e.dataKey:a);return jn(l)?null:e.scale(l)}var E9=function(e){var n=e.axis,r=e.ticks,i=e.offset,o=e.bandSize,a=e.entry,s=e.index;if(n.type==="category")return r[s]?r[s].coordinate+i:null;var l=js(a,n.dataKey,n.domain[s]);return jn(l)?null:n.scale(l)-o/2+i},k4e=function(e){var n=e.numericAxis,r=n.scale.domain();if(n.type==="number"){var i=Math.min(r[0],r[1]),o=Math.max(r[0],r[1]);return i<=0&&o>=0?0:o<0?o:i}return r[0]},N4e=function(e,n){var r,i=(r=e.type)!==null&&r!==void 0&&r.defaultProps?si(si({},e.type.defaultProps),e.props):e.props,o=i.stackId;if(no(o)){var a=n[o];if(a){var s=a.items.indexOf(e);return s>=0?a.stackedData[s]:null}}return null},R4e=function(e){return e.reduce(function(n,r){return[GA(r.concat([n[0]]).filter(Et)),WA(r.concat([n[1]]).filter(Et))]},[1/0,-1/0])},Soe=function(e,n,r){return Object.keys(e).reduce(function(i,o){var a=e[o],s=a.stackedData,l=s.reduce(function(c,u){var f=R4e(u.slice(n,r+1));return[Math.min(c[0],f[0]),Math.max(c[1],f[1])]},[1/0,-1/0]);return[Math.min(l[0],i[0]),Math.max(l[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},_9=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,T9=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,RL=function(e,n,r){if(kn(e))return e(n,r);if(!Array.isArray(e))return n;var i=[];if(Et(e[0]))i[0]=r?e[0]:Math.min(e[0],n[0]);else if(_9.test(e[0])){var o=+_9.exec(e[0])[1];i[0]=n[0]-o}else kn(e[0])?i[0]=e[0](n[0]):i[0]=n[0];if(Et(e[1]))i[1]=r?e[1]:Math.max(e[1],n[1]);else if(T9.test(e[1])){var a=+T9.exec(e[1])[1];i[1]=n[1]+a}else kn(e[1])?i[1]=e[1](n[1]):i[1]=n[1];return i},dC=function(e,n,r){if(e&&e.scale&&e.scale.bandwidth){var i=e.scale.bandwidth();if(!r||i>0)return i}if(e&&n&&n.length>=2){for(var o=BF(n,function(f){return f.coordinate}),a=1/0,s=1,l=o.length;s<l;s++){var c=o[s],u=o[s-1];a=Math.min((c.coordinate||0)-(u.coordinate||0),a)}return a===1/0?0:a}return r?void 0:0},C9=function(e,n,r){return!e||!e.length||qA(e,rl(r,"type.defaultProps.domain"))?n:e},Eoe=function(e,n){var r=e.type.defaultProps?si(si({},e.type.defaultProps),e.props):e.props,i=r.dataKey,o=r.name,a=r.unit,s=r.formatter,l=r.tooltipType,c=r.chartType,u=r.hide;return si(si({},Dn(e,!1)),{},{dataKey:i,unit:a,formatter:s,name:o||i,color:h5(e),value:js(n,i),type:l,payload:n,chartType:c,hide:u})};function Ob(t){"@babel/helpers - typeof";return Ob=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ob(t)}function A9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function M9(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?A9(Object(n),!0).forEach(function(r){j4e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):A9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function j4e(t,e,n){return e=I4e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function I4e(t){var e=O4e(t,"string");return Ob(e)=="symbol"?e:e+""}function O4e(t,e){if(Ob(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ob(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var fC=Math.PI/180,L4e=function(e){return e*180/Math.PI},Ho=function(e,n,r,i){return{x:e+Math.cos(-fC*i)*r,y:n+Math.sin(-fC*i)*r}},D4e=function(e,n){var r=e.x,i=e.y,o=n.x,a=n.y;return Math.sqrt(Math.pow(r-o,2)+Math.pow(i-a,2))},F4e=function(e,n){var r=e.x,i=e.y,o=n.cx,a=n.cy,s=D4e({x:r,y:i},{x:o,y:a});if(s<=0)return{radius:s};var l=(r-o)/s,c=Math.acos(l);return i>a&&(c=2*Math.PI-c),{radius:s,angle:L4e(c),angleInRadian:c}},z4e=function(e){var n=e.startAngle,r=e.endAngle,i=Math.floor(n/360),o=Math.floor(r/360),a=Math.min(i,o);return{startAngle:n-a*360,endAngle:r-a*360}},U4e=function(e,n){var r=n.startAngle,i=n.endAngle,o=Math.floor(r/360),a=Math.floor(i/360),s=Math.min(o,a);return e+s*360},P9=function(e,n){var r=e.x,i=e.y,o=F4e({x:r,y:i},n),a=o.radius,s=o.angle,l=n.innerRadius,c=n.outerRadius;if(a<l||a>c)return!1;if(a===0)return!0;var u=z4e(n),f=u.startAngle,h=u.endAngle,p=s,y;if(f<=h){for(;p>h;)p-=360;for(;p<f;)p+=360;y=p>=f&&p<=h}else{for(;p>f;)p-=360;for(;p<h;)p+=360;y=p>=h&&p<=f}return y?M9(M9({},n),{},{radius:a,angle:U4e(p,n)}):null};function Lb(t){"@babel/helpers - typeof";return Lb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lb(t)}var B4e=["offset"];function $4e(t){return G4e(t)||W4e(t)||V4e(t)||H4e()}function H4e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function V4e(t,e){if(t){if(typeof t=="string")return jL(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jL(t,e)}}function W4e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function G4e(t){if(Array.isArray(t))return jL(t)}function jL(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function q4e(t,e){if(t==null)return{};var n=Y4e(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Y4e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function k9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function eo(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?k9(Object(n),!0).forEach(function(r){X4e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):k9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function X4e(t,e,n){return e=K4e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function K4e(t){var e=J4e(t,"string");return Lb(e)=="symbol"?e:e+""}function J4e(t,e){if(Lb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Lb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Db(){return Db=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Db.apply(this,arguments)}var Z4e=function(e){var n=e.value,r=e.formatter,i=jn(e.children)?n:e.children;return kn(r)?r(i):i},Q4e=function(e,n){var r=tc(n-e),i=Math.min(Math.abs(n-e),360);return r*i},eFe=function(e,n,r){var i=e.position,o=e.viewBox,a=e.offset,s=e.className,l=o,c=l.cx,u=l.cy,f=l.innerRadius,h=l.outerRadius,p=l.startAngle,y=l.endAngle,g=l.clockWise,v=(f+h)/2,b=Q4e(p,y),w=b>=0?1:-1,T,C;i==="insideStart"?(T=p+w*a,C=g):i==="insideEnd"?(T=y-w*a,C=!g):i==="end"&&(T=y+w*a,C=g),C=b<=0?C:!C;var P=Ho(c,u,v,T),M=Ho(c,u,v,T+(C?1:-1)*359),k="M".concat(P.x,",").concat(P.y,`
    A`).concat(v,",").concat(v,",0,1,").concat(C?0:1,`,
    `).concat(M.x,",").concat(M.y),I=jn(e.id)?q1("recharts-radial-line-"):e.id;return ve.createElement("text",Db({},r,{dominantBaseline:"central",className:Un("recharts-radial-bar-label",s)}),ve.createElement("defs",null,ve.createElement("path",{id:I,d:k})),ve.createElement("textPath",{xlinkHref:"#".concat(I)},n))},tFe=function(e){var n=e.viewBox,r=e.offset,i=e.position,o=n,a=o.cx,s=o.cy,l=o.innerRadius,c=o.outerRadius,u=o.startAngle,f=o.endAngle,h=(u+f)/2;if(i==="outside"){var p=Ho(a,s,c+r,h),y=p.x,g=p.y;return{x:y,y:g,textAnchor:y>=a?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:a,y:s,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:a,y:s,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:a,y:s,textAnchor:"middle",verticalAnchor:"end"};var v=(l+c)/2,b=Ho(a,s,v,h),w=b.x,T=b.y;return{x:w,y:T,textAnchor:"middle",verticalAnchor:"middle"}},nFe=function(e){var n=e.viewBox,r=e.parentViewBox,i=e.offset,o=e.position,a=n,s=a.x,l=a.y,c=a.width,u=a.height,f=u>=0?1:-1,h=f*i,p=f>0?"end":"start",y=f>0?"start":"end",g=c>=0?1:-1,v=g*i,b=g>0?"end":"start",w=g>0?"start":"end";if(o==="top"){var T={x:s+c/2,y:l-f*i,textAnchor:"middle",verticalAnchor:p};return eo(eo({},T),r?{height:Math.max(l-r.y,0),width:c}:{})}if(o==="bottom"){var C={x:s+c/2,y:l+u+h,textAnchor:"middle",verticalAnchor:y};return eo(eo({},C),r?{height:Math.max(r.y+r.height-(l+u),0),width:c}:{})}if(o==="left"){var P={x:s-v,y:l+u/2,textAnchor:b,verticalAnchor:"middle"};return eo(eo({},P),r?{width:Math.max(P.x-r.x,0),height:u}:{})}if(o==="right"){var M={x:s+c+v,y:l+u/2,textAnchor:w,verticalAnchor:"middle"};return eo(eo({},M),r?{width:Math.max(r.x+r.width-M.x,0),height:u}:{})}var k=r?{width:c,height:u}:{};return o==="insideLeft"?eo({x:s+v,y:l+u/2,textAnchor:w,verticalAnchor:"middle"},k):o==="insideRight"?eo({x:s+c-v,y:l+u/2,textAnchor:b,verticalAnchor:"middle"},k):o==="insideTop"?eo({x:s+c/2,y:l+h,textAnchor:"middle",verticalAnchor:y},k):o==="insideBottom"?eo({x:s+c/2,y:l+u-h,textAnchor:"middle",verticalAnchor:p},k):o==="insideTopLeft"?eo({x:s+v,y:l+h,textAnchor:w,verticalAnchor:y},k):o==="insideTopRight"?eo({x:s+c-v,y:l+h,textAnchor:b,verticalAnchor:y},k):o==="insideBottomLeft"?eo({x:s+v,y:l+u-h,textAnchor:w,verticalAnchor:p},k):o==="insideBottomRight"?eo({x:s+c-v,y:l+u-h,textAnchor:b,verticalAnchor:p},k):C0(o)&&(Et(o.x)||kp(o.x))&&(Et(o.y)||kp(o.y))?eo({x:s+im(o.x,c),y:l+im(o.y,u),textAnchor:"end",verticalAnchor:"end"},k):eo({x:s+c/2,y:l+u/2,textAnchor:"middle",verticalAnchor:"middle"},k)},rFe=function(e){return"cx"in e&&Et(e.cx)};function na(t){var e=t.offset,n=e===void 0?5:e,r=q4e(t,B4e),i=eo({offset:n},r),o=i.viewBox,a=i.position,s=i.value,l=i.children,c=i.content,u=i.className,f=u===void 0?"":u,h=i.textBreakAll;if(!o||jn(s)&&jn(l)&&!_.isValidElement(c)&&!kn(c))return null;if(_.isValidElement(c))return _.cloneElement(c,i);var p;if(kn(c)){if(p=_.createElement(c,i),_.isValidElement(p))return p}else p=Z4e(i);var y=rFe(o),g=Dn(i,!0);if(y&&(a==="insideStart"||a==="insideEnd"||a==="end"))return eFe(i,p,g);var v=y?tFe(i):nFe(i);return ve.createElement(JT,Db({className:Un("recharts-label",f)},g,v,{breakAll:h}),p)}na.displayName="Label";var _oe=function(e){var n=e.cx,r=e.cy,i=e.angle,o=e.startAngle,a=e.endAngle,s=e.r,l=e.radius,c=e.innerRadius,u=e.outerRadius,f=e.x,h=e.y,p=e.top,y=e.left,g=e.width,v=e.height,b=e.clockWise,w=e.labelViewBox;if(w)return w;if(Et(g)&&Et(v)){if(Et(f)&&Et(h))return{x:f,y:h,width:g,height:v};if(Et(p)&&Et(y))return{x:p,y,width:g,height:v}}return Et(f)&&Et(h)?{x:f,y:h,width:0,height:0}:Et(n)&&Et(r)?{cx:n,cy:r,startAngle:o||i||0,endAngle:a||i||0,innerRadius:c||0,outerRadius:u||l||s||0,clockWise:b}:e.viewBox?e.viewBox:{}},iFe=function(e,n){return e?e===!0?ve.createElement(na,{key:"label-implicit",viewBox:n}):no(e)?ve.createElement(na,{key:"label-implicit",viewBox:n,value:e}):_.isValidElement(e)?e.type===na?_.cloneElement(e,{key:"label-implicit",viewBox:n}):ve.createElement(na,{key:"label-implicit",content:e,viewBox:n}):kn(e)?ve.createElement(na,{key:"label-implicit",content:e,viewBox:n}):C0(e)?ve.createElement(na,Db({viewBox:n},e,{key:"label-implicit"})):null:null},oFe=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var i=e.children,o=_oe(e),a=il(i,na).map(function(l,c){return _.cloneElement(l,{viewBox:n||o,key:"label-".concat(c)})});if(!r)return a;var s=iFe(e.label,n||o);return[s].concat($4e(a))};na.parseViewBox=_oe;na.renderCallByParent=oFe;var GR,N9;function aFe(){if(N9)return GR;N9=1;function t(e){var n=e==null?0:e.length;return n?e[n-1]:void 0}return GR=t,GR}var sFe=aFe();const lFe=$n(sFe);function Fb(t){"@babel/helpers - typeof";return Fb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fb(t)}var cFe=["valueAccessor"],uFe=["data","dataKey","clockWise","id","textBreakAll"];function dFe(t){return mFe(t)||pFe(t)||hFe(t)||fFe()}function fFe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hFe(t,e){if(t){if(typeof t=="string")return IL(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return IL(t,e)}}function pFe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function mFe(t){if(Array.isArray(t))return IL(t)}function IL(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function hC(){return hC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hC.apply(this,arguments)}function R9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function j9(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?R9(Object(n),!0).forEach(function(r){gFe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):R9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gFe(t,e,n){return e=yFe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yFe(t){var e=vFe(t,"string");return Fb(e)=="symbol"?e:e+""}function vFe(t,e){if(Fb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Fb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function I9(t,e){if(t==null)return{};var n=xFe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function xFe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var wFe=function(e){return Array.isArray(e.value)?lFe(e.value):e.value};function Uf(t){var e=t.valueAccessor,n=e===void 0?wFe:e,r=I9(t,cFe),i=r.data,o=r.dataKey,a=r.clockWise,s=r.id,l=r.textBreakAll,c=I9(r,uFe);return!i||!i.length?null:ve.createElement(bi,{className:"recharts-label-list"},i.map(function(u,f){var h=jn(o)?n(u,f):js(u&&u.payload,o),p=jn(s)?{}:{id:"".concat(s,"-").concat(f)};return ve.createElement(na,hC({},Dn(u,!0),c,p,{parentViewBox:u.parentViewBox,value:h,textBreakAll:l,viewBox:na.parseViewBox(jn(a)?u:j9(j9({},u),{},{clockWise:a})),key:"label-".concat(f),index:f}))}))}Uf.displayName="LabelList";function bFe(t,e){return t?t===!0?ve.createElement(Uf,{key:"labelList-implicit",data:e}):ve.isValidElement(t)||kn(t)?ve.createElement(Uf,{key:"labelList-implicit",data:e,content:t}):C0(t)?ve.createElement(Uf,hC({data:e},t,{key:"labelList-implicit"})):null:null}function SFe(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var r=t.children,i=il(r,Uf).map(function(a,s){return _.cloneElement(a,{data:e,key:"labelList-".concat(s)})});if(!n)return i;var o=bFe(t.label,e);return[o].concat(dFe(i))}Uf.renderCallByParent=SFe;function zb(t){"@babel/helpers - typeof";return zb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zb(t)}function OL(){return OL=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},OL.apply(this,arguments)}function O9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function L9(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?O9(Object(n),!0).forEach(function(r){EFe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):O9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function EFe(t,e,n){return e=_Fe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _Fe(t){var e=TFe(t,"string");return zb(e)=="symbol"?e:e+""}function TFe(t,e){if(zb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(zb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var CFe=function(e,n){var r=tc(n-e),i=Math.min(Math.abs(n-e),359.999);return r*i},qE=function(e){var n=e.cx,r=e.cy,i=e.radius,o=e.angle,a=e.sign,s=e.isExternal,l=e.cornerRadius,c=e.cornerIsExternal,u=l*(s?1:-1)+i,f=Math.asin(l/u)/fC,h=c?o:o+a*f,p=Ho(n,r,u,h),y=Ho(n,r,i,h),g=c?o-a*f:o,v=Ho(n,r,u*Math.cos(f*fC),g);return{center:p,circleTangency:y,lineTangency:v,theta:f}},Toe=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,o=e.outerRadius,a=e.startAngle,s=e.endAngle,l=CFe(a,s),c=a+l,u=Ho(n,r,o,a),f=Ho(n,r,o,c),h="M ".concat(u.x,",").concat(u.y,`
    A `).concat(o,",").concat(o,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(a>c),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(i>0){var p=Ho(n,r,i,a),y=Ho(n,r,i,c);h+="L ".concat(y.x,",").concat(y.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(a<=c),`,
            `).concat(p.x,",").concat(p.y," Z")}else h+="L ".concat(n,",").concat(r," Z");return h},AFe=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,o=e.outerRadius,a=e.cornerRadius,s=e.forceCornerRadius,l=e.cornerIsExternal,c=e.startAngle,u=e.endAngle,f=tc(u-c),h=qE({cx:n,cy:r,radius:o,angle:c,sign:f,cornerRadius:a,cornerIsExternal:l}),p=h.circleTangency,y=h.lineTangency,g=h.theta,v=qE({cx:n,cy:r,radius:o,angle:u,sign:-f,cornerRadius:a,cornerIsExternal:l}),b=v.circleTangency,w=v.lineTangency,T=v.theta,C=l?Math.abs(c-u):Math.abs(c-u)-g-T;if(C<0)return s?"M ".concat(y.x,",").concat(y.y,`
        a`).concat(a,",").concat(a,",0,0,1,").concat(a*2,`,0
        a`).concat(a,",").concat(a,",0,0,1,").concat(-a*2,`,0
      `):Toe({cx:n,cy:r,innerRadius:i,outerRadius:o,startAngle:c,endAngle:u});var P="M ".concat(y.x,",").concat(y.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(f<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(o,",").concat(o,",0,").concat(+(C>180),",").concat(+(f<0),",").concat(b.x,",").concat(b.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(f<0),",").concat(w.x,",").concat(w.y,`
  `);if(i>0){var M=qE({cx:n,cy:r,radius:i,angle:c,sign:f,isExternal:!0,cornerRadius:a,cornerIsExternal:l}),k=M.circleTangency,I=M.lineTangency,U=M.theta,z=qE({cx:n,cy:r,radius:i,angle:u,sign:-f,isExternal:!0,cornerRadius:a,cornerIsExternal:l}),O=z.circleTangency,B=z.lineTangency,$=z.theta,F=l?Math.abs(c-u):Math.abs(c-u)-U-$;if(F<0&&a===0)return"".concat(P,"L").concat(n,",").concat(r,"Z");P+="L".concat(B.x,",").concat(B.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(f<0),",").concat(O.x,",").concat(O.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(F>180),",").concat(+(f>0),",").concat(k.x,",").concat(k.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(f<0),",").concat(I.x,",").concat(I.y,"Z")}else P+="L".concat(n,",").concat(r,"Z");return P},MFe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Coe=function(e){var n=L9(L9({},MFe),e),r=n.cx,i=n.cy,o=n.innerRadius,a=n.outerRadius,s=n.cornerRadius,l=n.forceCornerRadius,c=n.cornerIsExternal,u=n.startAngle,f=n.endAngle,h=n.className;if(a<o||u===f)return null;var p=Un("recharts-sector",h),y=a-o,g=im(s,y,0,!0),v;return g>0&&Math.abs(u-f)<360?v=AFe({cx:r,cy:i,innerRadius:o,outerRadius:a,cornerRadius:Math.min(g,y/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:f}):v=Toe({cx:r,cy:i,innerRadius:o,outerRadius:a,startAngle:u,endAngle:f}),ve.createElement("path",OL({},Dn(n,!0),{className:p,d:v,role:"img"}))};function Ub(t){"@babel/helpers - typeof";return Ub=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ub(t)}function LL(){return LL=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},LL.apply(this,arguments)}function D9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function F9(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?D9(Object(n),!0).forEach(function(r){PFe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):D9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function PFe(t,e,n){return e=kFe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kFe(t){var e=NFe(t,"string");return Ub(e)=="symbol"?e:e+""}function NFe(t,e){if(Ub(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ub(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var z9={curveBasisClosed:JNe,curveBasisOpen:ZNe,curveBasis:KNe,curveBumpX:LNe,curveBumpY:DNe,curveLinearClosed:QNe,curveLinear:IA,curveMonotoneX:eRe,curveMonotoneY:tRe,curveNatural:nRe,curveStep:rRe,curveStepAfter:oRe,curveStepBefore:iRe},YE=function(e){return e.x===+e.x&&e.y===+e.y},Zx=function(e){return e.x},Qx=function(e){return e.y},RFe=function(e,n){if(kn(e))return e;var r="curve".concat(RA(e));return(r==="curveMonotone"||r==="curveBump")&&n?z9["".concat(r).concat(n==="vertical"?"Y":"X")]:z9[r]||IA},jFe=function(e){var n=e.type,r=n===void 0?"linear":n,i=e.points,o=i===void 0?[]:i,a=e.baseLine,s=e.layout,l=e.connectNulls,c=l===void 0?!1:l,u=RFe(r,s),f=c?o.filter(function(g){return YE(g)}):o,h;if(Array.isArray(a)){var p=c?a.filter(function(g){return YE(g)}):a,y=f.map(function(g,v){return F9(F9({},g),{},{base:p[v]})});return s==="vertical"?h=zE().y(Qx).x1(Zx).x0(function(g){return g.base.x}):h=zE().x(Zx).y1(Qx).y0(function(g){return g.base.y}),h.defined(YE).curve(u),h(y)}return s==="vertical"&&Et(a)?h=zE().y(Qx).x1(Zx).x0(a):Et(a)?h=zE().x(Zx).y1(Qx).y0(a):h=Pre().x(Zx).y(Qx),h.defined(YE).curve(u),h(f)},DL=function(e){var n=e.className,r=e.points,i=e.path,o=e.pathRef;if((!r||!r.length)&&!i)return null;var a=r&&r.length?jFe(e):i;return ve.createElement("path",LL({},Dn(e,!1),zT(e),{className:Un("recharts-curve",n),d:a,ref:o}))},qR={exports:{}},YR,U9;function IFe(){if(U9)return YR;U9=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return YR=t,YR}var XR,B9;function OFe(){if(B9)return XR;B9=1;var t=IFe();function e(){}function n(){}return n.resetWarningCache=e,XR=function(){function r(a,s,l,c,u,f){if(f!==t){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}r.isRequired=r;function i(){return r}var o={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:e};return o.PropTypes=o,o},XR}var $9;function LFe(){return $9||($9=1,qR.exports=OFe()()),qR.exports}var DFe=LFe();const bn=$n(DFe);var FFe=Object.getOwnPropertyNames,zFe=Object.getOwnPropertySymbols,UFe=Object.prototype.hasOwnProperty;function H9(t,e){return function(r,i,o){return t(r,i,o)&&e(r,i,o)}}function XE(t){return function(n,r,i){if(!n||!r||typeof n!="object"||typeof r!="object")return t(n,r,i);var o=i.cache,a=o.get(n),s=o.get(r);if(a&&s)return a===r&&s===n;o.set(n,r),o.set(r,n);var l=t(n,r,i);return o.delete(n),o.delete(r),l}}function V9(t){return FFe(t).concat(zFe(t))}var Aoe=Object.hasOwn||function(t,e){return UFe.call(t,e)};function R0(t,e){return t||e?t===e:t===e||t!==t&&e!==e}var Moe="_owner",W9=Object.getOwnPropertyDescriptor,G9=Object.keys;function BFe(t,e,n){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n.equals(t[r],e[r],r,r,t,e,n))return!1;return!0}function $Fe(t,e){return R0(t.getTime(),e.getTime())}function q9(t,e,n){if(t.size!==e.size)return!1;for(var r={},i=t.entries(),o=0,a,s;(a=i.next())&&!a.done;){for(var l=e.entries(),c=!1,u=0;(s=l.next())&&!s.done;){var f=a.value,h=f[0],p=f[1],y=s.value,g=y[0],v=y[1];!c&&!r[u]&&(c=n.equals(h,g,o,u,t,e,n)&&n.equals(p,v,h,g,t,e,n))&&(r[u]=!0),u++}if(!c)return!1;o++}return!0}function HFe(t,e,n){var r=G9(t),i=r.length;if(G9(e).length!==i)return!1;for(var o;i-- >0;)if(o=r[i],o===Moe&&(t.$$typeof||e.$$typeof)&&t.$$typeof!==e.$$typeof||!Aoe(e,o)||!n.equals(t[o],e[o],o,o,t,e,n))return!1;return!0}function ew(t,e,n){var r=V9(t),i=r.length;if(V9(e).length!==i)return!1;for(var o,a,s;i-- >0;)if(o=r[i],o===Moe&&(t.$$typeof||e.$$typeof)&&t.$$typeof!==e.$$typeof||!Aoe(e,o)||!n.equals(t[o],e[o],o,o,t,e,n)||(a=W9(t,o),s=W9(e,o),(a||s)&&(!a||!s||a.configurable!==s.configurable||a.enumerable!==s.enumerable||a.writable!==s.writable)))return!1;return!0}function VFe(t,e){return R0(t.valueOf(),e.valueOf())}function WFe(t,e){return t.source===e.source&&t.flags===e.flags}function Y9(t,e,n){if(t.size!==e.size)return!1;for(var r={},i=t.values(),o,a;(o=i.next())&&!o.done;){for(var s=e.values(),l=!1,c=0;(a=s.next())&&!a.done;)!l&&!r[c]&&(l=n.equals(o.value,a.value,o.value,a.value,t,e,n))&&(r[c]=!0),c++;if(!l)return!1}return!0}function GFe(t,e){var n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}var qFe="[object Arguments]",YFe="[object Boolean]",XFe="[object Date]",KFe="[object Map]",JFe="[object Number]",ZFe="[object Object]",QFe="[object RegExp]",e5e="[object Set]",t5e="[object String]",n5e=Array.isArray,X9=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,K9=Object.assign,r5e=Object.prototype.toString.call.bind(Object.prototype.toString);function i5e(t){var e=t.areArraysEqual,n=t.areDatesEqual,r=t.areMapsEqual,i=t.areObjectsEqual,o=t.arePrimitiveWrappersEqual,a=t.areRegExpsEqual,s=t.areSetsEqual,l=t.areTypedArraysEqual;return function(u,f,h){if(u===f)return!0;if(u==null||f==null||typeof u!="object"||typeof f!="object")return u!==u&&f!==f;var p=u.constructor;if(p!==f.constructor)return!1;if(p===Object)return i(u,f,h);if(n5e(u))return e(u,f,h);if(X9!=null&&X9(u))return l(u,f,h);if(p===Date)return n(u,f,h);if(p===RegExp)return a(u,f,h);if(p===Map)return r(u,f,h);if(p===Set)return s(u,f,h);var y=r5e(u);return y===XFe?n(u,f,h):y===QFe?a(u,f,h):y===KFe?r(u,f,h):y===e5e?s(u,f,h):y===ZFe?typeof u.then!="function"&&typeof f.then!="function"&&i(u,f,h):y===qFe?i(u,f,h):y===YFe||y===JFe||y===t5e?o(u,f,h):!1}}function o5e(t){var e=t.circular,n=t.createCustomConfig,r=t.strict,i={areArraysEqual:r?ew:BFe,areDatesEqual:$Fe,areMapsEqual:r?H9(q9,ew):q9,areObjectsEqual:r?ew:HFe,arePrimitiveWrappersEqual:VFe,areRegExpsEqual:WFe,areSetsEqual:r?H9(Y9,ew):Y9,areTypedArraysEqual:r?ew:GFe};if(n&&(i=K9({},i,n(i))),e){var o=XE(i.areArraysEqual),a=XE(i.areMapsEqual),s=XE(i.areObjectsEqual),l=XE(i.areSetsEqual);i=K9({},i,{areArraysEqual:o,areMapsEqual:a,areObjectsEqual:s,areSetsEqual:l})}return i}function a5e(t){return function(e,n,r,i,o,a,s){return t(e,n,s)}}function s5e(t){var e=t.circular,n=t.comparator,r=t.createState,i=t.equals,o=t.strict;if(r)return function(l,c){var u=r(),f=u.cache,h=f===void 0?e?new WeakMap:void 0:f,p=u.meta;return n(l,c,{cache:h,equals:i,meta:p,strict:o})};if(e)return function(l,c){return n(l,c,{cache:new WeakMap,equals:i,meta:void 0,strict:o})};var a={cache:void 0,equals:i,meta:void 0,strict:o};return function(l,c){return n(l,c,a)}}var l5e=hh();hh({strict:!0});hh({circular:!0});hh({circular:!0,strict:!0});hh({createInternalComparator:function(){return R0}});hh({strict:!0,createInternalComparator:function(){return R0}});hh({circular:!0,createInternalComparator:function(){return R0}});hh({circular:!0,createInternalComparator:function(){return R0},strict:!0});function hh(t){t===void 0&&(t={});var e=t.circular,n=e===void 0?!1:e,r=t.createInternalComparator,i=t.createState,o=t.strict,a=o===void 0?!1:o,s=o5e(t),l=i5e(s),c=r?r(l):a5e(l);return s5e({circular:n,comparator:l,createState:i,equals:c,strict:a})}function c5e(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function J9(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function i(o){n<0&&(n=o),o-n>e?(t(o),n=-1):c5e(i)};requestAnimationFrame(r)}function FL(t){"@babel/helpers - typeof";return FL=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},FL(t)}function u5e(t){return p5e(t)||h5e(t)||f5e(t)||d5e()}function d5e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function f5e(t,e){if(t){if(typeof t=="string")return Z9(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Z9(t,e)}}function Z9(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function h5e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function p5e(t){if(Array.isArray(t))return t}function m5e(){var t={},e=function(){return null},n=!1,r=function i(o){if(!n){if(Array.isArray(o)){if(!o.length)return;var a=o,s=u5e(a),l=s[0],c=s.slice(1);if(typeof l=="number"){J9(i.bind(null,c),l);return}i(l),J9(i.bind(null,c));return}FL(o)==="object"&&(t=o,e(t)),typeof o=="function"&&o()}};return{stop:function(){n=!0},start:function(o){n=!1,r(o)},subscribe:function(o){return e=o,function(){e=function(){return null}}}}}function Bb(t){"@babel/helpers - typeof";return Bb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bb(t)}function Q9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function e7(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Q9(Object(n),!0).forEach(function(r){Poe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Q9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Poe(t,e,n){return e=g5e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function g5e(t){var e=y5e(t,"string");return Bb(e)==="symbol"?e:String(e)}function y5e(t,e){if(Bb(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Bb(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var v5e=function(e,n){return[Object.keys(e),Object.keys(n)].reduce(function(r,i){return r.filter(function(o){return i.includes(o)})})},x5e=function(e){return e},w5e=function(e){return e.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},$w=function(e,n){return Object.keys(n).reduce(function(r,i){return e7(e7({},r),{},Poe({},i,e(i,n[i])))},{})},t7=function(e,n,r){return e.map(function(i){return"".concat(w5e(i)," ").concat(n,"ms ").concat(r)}).join(",")};function b5e(t,e){return _5e(t)||E5e(t,e)||koe(t,e)||S5e()}function S5e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function E5e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}function _5e(t){if(Array.isArray(t))return t}function T5e(t){return M5e(t)||A5e(t)||koe(t)||C5e()}function C5e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function koe(t,e){if(t){if(typeof t=="string")return zL(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zL(t,e)}}function A5e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function M5e(t){if(Array.isArray(t))return zL(t)}function zL(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var pC=1e-4,Noe=function(e,n){return[0,3*e,3*n-6*e,3*e-3*n+1]},Roe=function(e,n){return e.map(function(r,i){return r*Math.pow(n,i)}).reduce(function(r,i){return r+i})},n7=function(e,n){return function(r){var i=Noe(e,n);return Roe(i,r)}},P5e=function(e,n){return function(r){var i=Noe(e,n),o=[].concat(T5e(i.map(function(a,s){return a*s}).slice(1)),[0]);return Roe(o,r)}},r7=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0],o=n[1],a=n[2],s=n[3];if(n.length===1)switch(n[0]){case"linear":i=0,o=0,a=1,s=1;break;case"ease":i=.25,o=.1,a=.25,s=1;break;case"ease-in":i=.42,o=0,a=1,s=1;break;case"ease-out":i=.42,o=0,a=.58,s=1;break;case"ease-in-out":i=0,o=0,a=.58,s=1;break;default:{var l=n[0].split("(");if(l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4){var c=l[1].split(")")[0].split(",").map(function(v){return parseFloat(v)}),u=b5e(c,4);i=u[0],o=u[1],a=u[2],s=u[3]}}}var f=n7(i,a),h=n7(o,s),p=P5e(i,a),y=function(b){return b>1?1:b<0?0:b},g=function(b){for(var w=b>1?1:b,T=w,C=0;C<8;++C){var P=f(T)-w,M=p(T);if(Math.abs(P-w)<pC||M<pC)return h(T);T=y(T-P/M)}return h(T)};return g.isStepper=!1,g},k5e=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.stiff,r=n===void 0?100:n,i=e.damping,o=i===void 0?8:i,a=e.dt,s=a===void 0?17:a,l=function(u,f,h){var p=-(u-f)*r,y=h*o,g=h+(p-y)*s/1e3,v=h*s/1e3+u;return Math.abs(v-f)<pC&&Math.abs(g)<pC?[f,0]:[v,g]};return l.isStepper=!0,l.dt=s,l},N5e=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return r7(i);case"spring":return k5e();default:if(i.split("(")[0]==="cubic-bezier")return r7(i)}return typeof i=="function"?i:null};function $b(t){"@babel/helpers - typeof";return $b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$b(t)}function i7(t){return I5e(t)||j5e(t)||joe(t)||R5e()}function R5e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function j5e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function I5e(t){if(Array.isArray(t))return BL(t)}function o7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Fo(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?o7(Object(n),!0).forEach(function(r){UL(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function UL(t,e,n){return e=O5e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function O5e(t){var e=L5e(t,"string");return $b(e)==="symbol"?e:String(e)}function L5e(t,e){if($b(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if($b(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function D5e(t,e){return U5e(t)||z5e(t,e)||joe(t,e)||F5e()}function F5e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function joe(t,e){if(t){if(typeof t=="string")return BL(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return BL(t,e)}}function BL(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function z5e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}function U5e(t){if(Array.isArray(t))return t}var mC=function(e,n,r){return e+(n-e)*r},$L=function(e){var n=e.from,r=e.to;return n!==r},B5e=function t(e,n,r){var i=$w(function(o,a){if($L(a)){var s=e(a.from,a.to,a.velocity),l=D5e(s,2),c=l[0],u=l[1];return Fo(Fo({},a),{},{from:c,velocity:u})}return a},n);return r<1?$w(function(o,a){return $L(a)?Fo(Fo({},a),{},{velocity:mC(a.velocity,i[o].velocity,r),from:mC(a.from,i[o].from,r)}):a},n):t(e,i,r-1)};const $5e=function(t,e,n,r,i){var o=v5e(t,e),a=o.reduce(function(v,b){return Fo(Fo({},v),{},UL({},b,[t[b],e[b]]))},{}),s=o.reduce(function(v,b){return Fo(Fo({},v),{},UL({},b,{from:t[b],velocity:0,to:e[b]}))},{}),l=-1,c,u,f=function(){return null},h=function(){return $w(function(b,w){return w.from},s)},p=function(){return!Object.values(s).filter($L).length},y=function(b){c||(c=b);var w=b-c,T=w/n.dt;s=B5e(n,s,T),i(Fo(Fo(Fo({},t),e),h())),c=b,p()||(l=requestAnimationFrame(f))},g=function(b){u||(u=b);var w=(b-u)/r,T=$w(function(P,M){return mC.apply(void 0,i7(M).concat([n(w)]))},a);if(i(Fo(Fo(Fo({},t),e),T)),w<1)l=requestAnimationFrame(f);else{var C=$w(function(P,M){return mC.apply(void 0,i7(M).concat([n(1)]))},a);i(Fo(Fo(Fo({},t),e),C))}};return f=n.isStepper?y:g,function(){return requestAnimationFrame(f),function(){cancelAnimationFrame(l)}}};function Pv(t){"@babel/helpers - typeof";return Pv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pv(t)}var H5e=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function V5e(t,e){if(t==null)return{};var n=W5e(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function W5e(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function KR(t){return X5e(t)||Y5e(t)||q5e(t)||G5e()}function G5e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function q5e(t,e){if(t){if(typeof t=="string")return HL(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return HL(t,e)}}function Y5e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function X5e(t){if(Array.isArray(t))return HL(t)}function HL(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Dl(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?a7(Object(n),!0).forEach(function(r){Cw(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Cw(t,e,n){return e=Ioe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function K5e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function J5e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ioe(r.key),r)}}function Z5e(t,e,n){return e&&J5e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ioe(t){var e=Q5e(t,"string");return Pv(e)==="symbol"?e:String(e)}function Q5e(t,e){if(Pv(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Pv(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function eze(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&VL(t,e)}function VL(t,e){return VL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},VL(t,e)}function tze(t){var e=nze();return function(){var r=gC(t),i;if(e){var o=gC(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return WL(this,i)}}function WL(t,e){if(e&&(Pv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return GL(t)}function GL(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function nze(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function gC(t){return gC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},gC(t)}var yd=function(t){eze(n,t);var e=tze(n);function n(r,i){var o;K5e(this,n),o=e.call(this,r,i);var a=o.props,s=a.isActive,l=a.attributeName,c=a.from,u=a.to,f=a.steps,h=a.children,p=a.duration;if(o.handleStyleChange=o.handleStyleChange.bind(GL(o)),o.changeStyle=o.changeStyle.bind(GL(o)),!s||p<=0)return o.state={style:{}},typeof h=="function"&&(o.state={style:u}),WL(o);if(f&&f.length)o.state={style:f[0].style};else if(c){if(typeof h=="function")return o.state={style:c},WL(o);o.state={style:l?Cw({},l,c):c}}else o.state={style:{}};return o}return Z5e(n,[{key:"componentDidMount",value:function(){var i=this.props,o=i.isActive,a=i.canBegin;this.mounted=!0,!(!o||!a)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var o=this.props,a=o.isActive,s=o.canBegin,l=o.attributeName,c=o.shouldReAnimate,u=o.to,f=o.from,h=this.state.style;if(s){if(!a){var p={style:l?Cw({},l,u):u};this.state&&h&&(l&&h[l]!==u||!l&&h!==u)&&this.setState(p);return}if(!(l5e(i.to,u)&&i.canBegin&&i.isActive)){var y=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var g=y||c?f:i.to;if(this.state&&h){var v={style:l?Cw({},l,g):g};(l&&h[l]!==g||!l&&h!==g)&&this.setState(v)}this.runAnimation(Dl(Dl({},this.props),{},{from:g,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var o=this,a=i.from,s=i.to,l=i.duration,c=i.easing,u=i.begin,f=i.onAnimationEnd,h=i.onAnimationStart,p=$5e(a,s,N5e(c),l,this.changeStyle),y=function(){o.stopJSAnimation=p()};this.manager.start([h,u,y,l,f])}},{key:"runStepAnimation",value:function(i){var o=this,a=i.steps,s=i.begin,l=i.onAnimationStart,c=a[0],u=c.style,f=c.duration,h=f===void 0?0:f,p=function(g,v,b){if(b===0)return g;var w=v.duration,T=v.easing,C=T===void 0?"ease":T,P=v.style,M=v.properties,k=v.onAnimationEnd,I=b>0?a[b-1]:v,U=M||Object.keys(P);if(typeof C=="function"||C==="spring")return[].concat(KR(g),[o.runJSAnimation.bind(o,{from:I.style,to:P,duration:w,easing:C}),w]);var z=t7(U,w,C),O=Dl(Dl(Dl({},I.style),P),{},{transition:z});return[].concat(KR(g),[O,w,k]).filter(x5e)};return this.manager.start([l].concat(KR(a.reduce(p,[u,Math.max(h,s)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=m5e());var o=i.begin,a=i.duration,s=i.attributeName,l=i.to,c=i.easing,u=i.onAnimationStart,f=i.onAnimationEnd,h=i.steps,p=i.children,y=this.manager;if(this.unSubscribe=y.subscribe(this.handleStyleChange),typeof c=="function"||typeof p=="function"||c==="spring"){this.runJSAnimation(i);return}if(h.length>1){this.runStepAnimation(i);return}var g=s?Cw({},s,l):l,v=t7(Object.keys(g),a,c);y.start([u,o,Dl(Dl({},g),{},{transition:v}),a,f])}},{key:"render",value:function(){var i=this.props,o=i.children;i.begin;var a=i.duration;i.attributeName,i.easing;var s=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var l=V5e(i,H5e),c=_.Children.count(o),u=this.state.style;if(typeof o=="function")return o(u);if(!s||c===0||a<=0)return o;var f=function(p){var y=p.props,g=y.style,v=g===void 0?{}:g,b=y.className,w=_.cloneElement(p,Dl(Dl({},l),{},{style:Dl(Dl({},v),u),className:b}));return w};return c===1?f(_.Children.only(o)):ve.createElement("div",null,_.Children.map(o,function(h){return f(h)}))}}]),n}(_.PureComponent);yd.displayName="Animate";yd.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};yd.propTypes={from:bn.oneOfType([bn.object,bn.string]),to:bn.oneOfType([bn.object,bn.string]),attributeName:bn.string,duration:bn.number,begin:bn.number,easing:bn.oneOfType([bn.string,bn.func]),steps:bn.arrayOf(bn.shape({duration:bn.number.isRequired,style:bn.object.isRequired,easing:bn.oneOfType([bn.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),bn.func]),properties:bn.arrayOf("string"),onAnimationEnd:bn.func})),children:bn.oneOfType([bn.node,bn.func]),isActive:bn.bool,canBegin:bn.bool,onAnimationEnd:bn.func,shouldReAnimate:bn.bool,onAnimationStart:bn.func,onAnimationReStart:bn.func};function yC(){return yC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yC.apply(null,arguments)}bn.object,bn.object,bn.object,bn.element;bn.object,bn.object,bn.object,bn.oneOfType([bn.array,bn.element]),bn.any;function Hb(t){"@babel/helpers - typeof";return Hb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hb(t)}function vC(){return vC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vC.apply(this,arguments)}function rze(t,e){return sze(t)||aze(t,e)||oze(t,e)||ize()}function ize(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oze(t,e){if(t){if(typeof t=="string")return s7(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s7(t,e)}}function s7(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function aze(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}function sze(t){if(Array.isArray(t))return t}function l7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function c7(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?l7(Object(n),!0).forEach(function(r){lze(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function lze(t,e,n){return e=cze(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cze(t){var e=uze(t,"string");return Hb(e)=="symbol"?e:e+""}function uze(t,e){if(Hb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Hb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var u7=function(e,n,r,i,o){var a=Math.min(Math.abs(r)/2,Math.abs(i)/2),s=i>=0?1:-1,l=r>=0?1:-1,c=i>=0&&r>=0||i<0&&r<0?1:0,u;if(a>0&&o instanceof Array){for(var f=[0,0,0,0],h=0,p=4;h<p;h++)f[h]=o[h]>a?a:o[h];u="M".concat(e,",").concat(n+s*f[0]),f[0]>0&&(u+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(c,",").concat(e+l*f[0],",").concat(n)),u+="L ".concat(e+r-l*f[1],",").concat(n),f[1]>0&&(u+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(c,`,
        `).concat(e+r,",").concat(n+s*f[1])),u+="L ".concat(e+r,",").concat(n+i-s*f[2]),f[2]>0&&(u+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(c,`,
        `).concat(e+r-l*f[2],",").concat(n+i)),u+="L ".concat(e+l*f[3],",").concat(n+i),f[3]>0&&(u+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(c,`,
        `).concat(e,",").concat(n+i-s*f[3])),u+="Z"}else if(a>0&&o===+o&&o>0){var y=Math.min(a,o);u="M ".concat(e,",").concat(n+s*y,`
            A `).concat(y,",").concat(y,",0,0,").concat(c,",").concat(e+l*y,",").concat(n,`
            L `).concat(e+r-l*y,",").concat(n,`
            A `).concat(y,",").concat(y,",0,0,").concat(c,",").concat(e+r,",").concat(n+s*y,`
            L `).concat(e+r,",").concat(n+i-s*y,`
            A `).concat(y,",").concat(y,",0,0,").concat(c,",").concat(e+r-l*y,",").concat(n+i,`
            L `).concat(e+l*y,",").concat(n+i,`
            A `).concat(y,",").concat(y,",0,0,").concat(c,",").concat(e,",").concat(n+i-s*y," Z")}else u="M ".concat(e,",").concat(n," h ").concat(r," v ").concat(i," h ").concat(-r," Z");return u},dze=function(e,n){if(!e||!n)return!1;var r=e.x,i=e.y,o=n.x,a=n.y,s=n.width,l=n.height;if(Math.abs(s)>0&&Math.abs(l)>0){var c=Math.min(o,o+s),u=Math.max(o,o+s),f=Math.min(a,a+l),h=Math.max(a,a+l);return r>=c&&r<=u&&i>=f&&i<=h}return!1},fze={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},p5=function(e){var n=c7(c7({},fze),e),r=_.useRef(),i=_.useState(-1),o=rze(i,2),a=o[0],s=o[1];_.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var C=r.current.getTotalLength();C&&s(C)}catch{}},[]);var l=n.x,c=n.y,u=n.width,f=n.height,h=n.radius,p=n.className,y=n.animationEasing,g=n.animationDuration,v=n.animationBegin,b=n.isAnimationActive,w=n.isUpdateAnimationActive;if(l!==+l||c!==+c||u!==+u||f!==+f||u===0||f===0)return null;var T=Un("recharts-rectangle",p);return w?ve.createElement(yd,{canBegin:a>0,from:{width:u,height:f,x:l,y:c},to:{width:u,height:f,x:l,y:c},duration:g,animationEasing:y,isActive:w},function(C){var P=C.width,M=C.height,k=C.x,I=C.y;return ve.createElement(yd,{canBegin:a>0,from:"0px ".concat(a===-1?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:v,duration:g,isActive:b,easing:y},ve.createElement("path",vC({},Dn(n,!0),{className:T,d:u7(k,I,P,M,h),ref:r})))}):ve.createElement("path",vC({},Dn(n,!0),{className:T,d:u7(l,c,u,f,h)}))};function qL(){return qL=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qL.apply(this,arguments)}var m5=function(e){var n=e.cx,r=e.cy,i=e.r,o=e.className,a=Un("recharts-dot",o);return n===+n&&r===+r&&i===+i?ve.createElement("circle",qL({},Dn(e,!1),zT(e),{className:a,cx:n,cy:r,r:i})):null};function Vb(t){"@babel/helpers - typeof";return Vb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vb(t)}var hze=["x","y","top","left","width","height","className"];function YL(){return YL=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},YL.apply(this,arguments)}function d7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function pze(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?d7(Object(n),!0).forEach(function(r){mze(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function mze(t,e,n){return e=gze(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gze(t){var e=yze(t,"string");return Vb(e)=="symbol"?e:e+""}function yze(t,e){if(Vb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Vb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function vze(t,e){if(t==null)return{};var n=xze(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function xze(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var wze=function(e,n,r,i,o,a){return"M".concat(e,",").concat(o,"v").concat(i,"M").concat(a,",").concat(n,"h").concat(r)},bze=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,o=i===void 0?0:i,a=e.top,s=a===void 0?0:a,l=e.left,c=l===void 0?0:l,u=e.width,f=u===void 0?0:u,h=e.height,p=h===void 0?0:h,y=e.className,g=vze(e,hze),v=pze({x:r,y:o,top:s,left:c,width:f,height:p},g);return!Et(r)||!Et(o)||!Et(f)||!Et(p)||!Et(s)||!Et(c)?null:ve.createElement("path",YL({},Dn(v,!0),{className:Un("recharts-cross",y),d:wze(r,o,f,p,s,c)}))},JR,f7;function Sze(){if(f7)return JR;f7=1;var t=Zre(),e=t(Object.getPrototypeOf,Object);return JR=e,JR}var ZR,h7;function Eze(){if(h7)return ZR;h7=1;var t=_d(),e=Sze(),n=Td(),r="[object Object]",i=Function.prototype,o=Object.prototype,a=i.toString,s=o.hasOwnProperty,l=a.call(Object);function c(u){if(!n(u)||t(u)!=r)return!1;var f=e(u);if(f===null)return!0;var h=s.call(f,"constructor")&&f.constructor;return typeof h=="function"&&h instanceof h&&a.call(h)==l}return ZR=c,ZR}var _ze=Eze();const Tze=$n(_ze);var QR,p7;function Cze(){if(p7)return QR;p7=1;var t=_d(),e=Td(),n="[object Boolean]";function r(i){return i===!0||i===!1||e(i)&&t(i)==n}return QR=r,QR}var Aze=Cze();const Mze=$n(Aze);function Wb(t){"@babel/helpers - typeof";return Wb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wb(t)}function xC(){return xC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xC.apply(this,arguments)}function Pze(t,e){return jze(t)||Rze(t,e)||Nze(t,e)||kze()}function kze(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Nze(t,e){if(t){if(typeof t=="string")return m7(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m7(t,e)}}function m7(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Rze(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}function jze(t){if(Array.isArray(t))return t}function g7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function y7(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?g7(Object(n),!0).forEach(function(r){Ize(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ize(t,e,n){return e=Oze(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Oze(t){var e=Lze(t,"string");return Wb(e)=="symbol"?e:e+""}function Lze(t,e){if(Wb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Wb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var v7=function(e,n,r,i,o){var a=r-i,s;return s="M ".concat(e,",").concat(n),s+="L ".concat(e+r,",").concat(n),s+="L ".concat(e+r-a/2,",").concat(n+o),s+="L ".concat(e+r-a/2-i,",").concat(n+o),s+="L ".concat(e,",").concat(n," Z"),s},Dze={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Fze=function(e){var n=y7(y7({},Dze),e),r=_.useRef(),i=_.useState(-1),o=Pze(i,2),a=o[0],s=o[1];_.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var T=r.current.getTotalLength();T&&s(T)}catch{}},[]);var l=n.x,c=n.y,u=n.upperWidth,f=n.lowerWidth,h=n.height,p=n.className,y=n.animationEasing,g=n.animationDuration,v=n.animationBegin,b=n.isUpdateAnimationActive;if(l!==+l||c!==+c||u!==+u||f!==+f||h!==+h||u===0&&f===0||h===0)return null;var w=Un("recharts-trapezoid",p);return b?ve.createElement(yd,{canBegin:a>0,from:{upperWidth:0,lowerWidth:0,height:h,x:l,y:c},to:{upperWidth:u,lowerWidth:f,height:h,x:l,y:c},duration:g,animationEasing:y,isActive:b},function(T){var C=T.upperWidth,P=T.lowerWidth,M=T.height,k=T.x,I=T.y;return ve.createElement(yd,{canBegin:a>0,from:"0px ".concat(a===-1?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:v,duration:g,easing:y},ve.createElement("path",xC({},Dn(n,!0),{className:w,d:v7(k,I,C,P,M),ref:r})))}):ve.createElement("g",null,ve.createElement("path",xC({},Dn(n,!0),{className:w,d:v7(l,c,u,f,h)})))},zze=["option","shapeType","propTransformer","activeClassName","isActive"];function Gb(t){"@babel/helpers - typeof";return Gb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gb(t)}function Uze(t,e){if(t==null)return{};var n=Bze(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Bze(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function x7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function wC(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?x7(Object(n),!0).forEach(function(r){$ze(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):x7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $ze(t,e,n){return e=Hze(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Hze(t){var e=Vze(t,"string");return Gb(e)=="symbol"?e:e+""}function Vze(t,e){if(Gb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Gb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Wze(t,e){return wC(wC({},e),t)}function Gze(t,e){return t==="symbols"}function w7(t){var e=t.shapeType,n=t.elementProps;switch(e){case"rectangle":return ve.createElement(p5,n);case"trapezoid":return ve.createElement(Fze,n);case"sector":return ve.createElement(Coe,n);case"symbols":if(Gze(e))return ve.createElement(jF,n);break;default:return null}}function qze(t){return _.isValidElement(t)?t.props:t}function Yze(t){var e=t.option,n=t.shapeType,r=t.propTransformer,i=r===void 0?Wze:r,o=t.activeClassName,a=o===void 0?"recharts-active-shape":o,s=t.isActive,l=Uze(t,zze),c;if(_.isValidElement(e))c=_.cloneElement(e,wC(wC({},l),qze(e)));else if(kn(e))c=e(l);else if(Tze(e)&&!Mze(e)){var u=i(e,l);c=ve.createElement(w7,{shapeType:n,elementProps:u})}else{var f=l;c=ve.createElement(w7,{shapeType:n,elementProps:f})}return s?ve.createElement(bi,{className:a},c):c}function KA(t,e){return e!=null&&"trapezoids"in t.props}function JA(t,e){return e!=null&&"sectors"in t.props}function qb(t,e){return e!=null&&"points"in t.props}function Xze(t,e){var n,r,i=t.x===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.x)||t.x===e.x,o=t.y===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.y)||t.y===e.y;return i&&o}function Kze(t,e){var n=t.endAngle===e.endAngle,r=t.startAngle===e.startAngle;return n&&r}function Jze(t,e){var n=t.x===e.x,r=t.y===e.y,i=t.z===e.z;return n&&r&&i}function Zze(t,e){var n;return KA(t,e)?n=Xze:JA(t,e)?n=Kze:qb(t,e)&&(n=Jze),n}function Qze(t,e){var n;return KA(t,e)?n="trapezoids":JA(t,e)?n="sectors":qb(t,e)&&(n="points"),n}function eUe(t,e){if(KA(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(JA(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return qb(t,e)?e.payload:{}}function tUe(t){var e=t.activeTooltipItem,n=t.graphicalItem,r=t.itemData,i=Qze(n,e),o=eUe(n,e),a=r.filter(function(l,c){var u=qA(o,l),f=n.props[i].filter(function(y){var g=Zze(n,e);return g(y,e)}),h=n.props[i].indexOf(f[f.length-1]),p=c===h;return u&&p}),s=r.indexOf(a[a.length-1]);return s}var ej,b7;function nUe(){if(b7)return ej;b7=1;var t=Math.ceil,e=Math.max;function n(r,i,o,a){for(var s=-1,l=e(t((i-r)/(o||1)),0),c=Array(l);l--;)c[a?l:++s]=r,r+=o;return c}return ej=n,ej}var tj,S7;function Ooe(){if(S7)return tj;S7=1;var t=pie(),e=1/0,n=17976931348623157e292;function r(i){if(!i)return i===0?i:0;if(i=t(i),i===e||i===-1/0){var o=i<0?-1:1;return o*n}return i===i?i:0}return tj=r,tj}var nj,E7;function rUe(){if(E7)return nj;E7=1;var t=nUe(),e=FA(),n=Ooe();function r(i){return function(o,a,s){return s&&typeof s!="number"&&e(o,a,s)&&(a=s=void 0),o=n(o),a===void 0?(a=o,o=0):a=n(a),s=s===void 0?o<a?1:-1:n(s),t(o,a,s,i)}}return nj=r,nj}var rj,_7;function iUe(){if(_7)return rj;_7=1;var t=rUe(),e=t();return rj=e,rj}var oUe=iUe();const bC=$n(oUe);function Yb(t){"@babel/helpers - typeof";return Yb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yb(t)}function T7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function C7(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?T7(Object(n),!0).forEach(function(r){Loe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):T7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Loe(t,e,n){return e=aUe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function aUe(t){var e=sUe(t,"string");return Yb(e)=="symbol"?e:e+""}function sUe(t,e){if(Yb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Yb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var lUe=["Webkit","Moz","O","ms"],cUe=function(e,n){var r=e.replace(/(\w)/,function(o){return o.toUpperCase()}),i=lUe.reduce(function(o,a){return C7(C7({},o),{},Loe({},a+r,n))},{});return i[e]=n,i};function kv(t){"@babel/helpers - typeof";return kv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kv(t)}function SC(){return SC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},SC.apply(this,arguments)}function A7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ij(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?A7(Object(n),!0).forEach(function(r){Ss(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):A7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function uUe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function M7(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Foe(r.key),r)}}function dUe(t,e,n){return e&&M7(t.prototype,e),n&&M7(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function fUe(t,e,n){return e=EC(e),hUe(t,Doe()?Reflect.construct(e,n||[],EC(t).constructor):e.apply(t,n))}function hUe(t,e){if(e&&(kv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return pUe(t)}function pUe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Doe(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Doe=function(){return!!t})()}function EC(t){return EC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},EC(t)}function mUe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&XL(t,e)}function XL(t,e){return XL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},XL(t,e)}function Ss(t,e,n){return e=Foe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Foe(t){var e=gUe(t,"string");return kv(e)=="symbol"?e:e+""}function gUe(t,e){if(kv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(kv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var yUe=function(e){var n=e.data,r=e.startIndex,i=e.endIndex,o=e.x,a=e.width,s=e.travellerWidth;if(!n||!n.length)return{};var l=n.length,c=Uw().domain(bC(0,l)).range([o,o+a-s]),u=c.domain().map(function(f){return c(f)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:c(r),endX:c(i),scale:c,scaleValues:u}},P7=function(e){return e.changedTouches&&!!e.changedTouches.length},Nv=function(t){function e(n){var r;return uUe(this,e),r=fUe(this,e,[n]),Ss(r,"handleDrag",function(i){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(i):r.state.isSlideMoving&&r.handleSlideDrag(i)}),Ss(r,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&r.handleDrag(i.changedTouches[0])}),Ss(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=r.props,o=i.endIndex,a=i.onDragEnd,s=i.startIndex;a==null||a({endIndex:o,startIndex:s})}),r.detachDragEndListener()}),Ss(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),Ss(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),Ss(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),Ss(r,"handleSlideDragStart",function(i){var o=P7(i)?i.changedTouches[0]:i;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:o.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return mUe(e,t),dUe(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var i=r.startX,o=r.endX,a=this.state.scaleValues,s=this.props,l=s.gap,c=s.data,u=c.length-1,f=Math.min(i,o),h=Math.max(i,o),p=e.getIndexInRange(a,f),y=e.getIndexInRange(a,h);return{startIndex:p-p%l,endIndex:y===u?u:y-y%l}}},{key:"getTextOfTick",value:function(r){var i=this.props,o=i.data,a=i.tickFormatter,s=i.dataKey,l=js(o[r],s,r);return kn(a)?a(l,r):l}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var i=this.state,o=i.slideMoveStartX,a=i.startX,s=i.endX,l=this.props,c=l.x,u=l.width,f=l.travellerWidth,h=l.startIndex,p=l.endIndex,y=l.onChange,g=r.pageX-o;g>0?g=Math.min(g,c+u-f-s,c+u-f-a):g<0&&(g=Math.max(g,c-a,c-s));var v=this.getIndex({startX:a+g,endX:s+g});(v.startIndex!==h||v.endIndex!==p)&&y&&y(v),this.setState({startX:a+g,endX:s+g,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,i){var o=P7(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:o.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var i=this.state,o=i.brushMoveStartX,a=i.movingTravellerId,s=i.endX,l=i.startX,c=this.state[a],u=this.props,f=u.x,h=u.width,p=u.travellerWidth,y=u.onChange,g=u.gap,v=u.data,b={startX:this.state.startX,endX:this.state.endX},w=r.pageX-o;w>0?w=Math.min(w,f+h-p-c):w<0&&(w=Math.max(w,f-c)),b[a]=c+w;var T=this.getIndex(b),C=T.startIndex,P=T.endIndex,M=function(){var I=v.length-1;return a==="startX"&&(s>l?C%g===0:P%g===0)||s<l&&P===I||a==="endX"&&(s>l?P%g===0:C%g===0)||s>l&&P===I};this.setState(Ss(Ss({},a,c+w),"brushMoveStartX",r.pageX),function(){y&&M()&&y(T)})}},{key:"handleTravellerMoveKeyboard",value:function(r,i){var o=this,a=this.state,s=a.scaleValues,l=a.startX,c=a.endX,u=this.state[i],f=s.indexOf(u);if(f!==-1){var h=f+r;if(!(h===-1||h>=s.length)){var p=s[h];i==="startX"&&p>=c||i==="endX"&&p<=l||this.setState(Ss({},i,p),function(){o.props.onChange(o.getIndex({startX:o.state.startX,endX:o.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,i=r.x,o=r.y,a=r.width,s=r.height,l=r.fill,c=r.stroke;return ve.createElement("rect",{stroke:c,fill:l,x:i,y:o,width:a,height:s})}},{key:"renderPanorama",value:function(){var r=this.props,i=r.x,o=r.y,a=r.width,s=r.height,l=r.data,c=r.children,u=r.padding,f=_.Children.only(c);return f?ve.cloneElement(f,{x:i,y:o,width:a,height:s,margin:u,compact:!0,data:l}):null}},{key:"renderTravellerLayer",value:function(r,i){var o,a,s=this,l=this.props,c=l.y,u=l.travellerWidth,f=l.height,h=l.traveller,p=l.ariaLabel,y=l.data,g=l.startIndex,v=l.endIndex,b=Math.max(r,this.props.x),w=ij(ij({},Dn(this.props,!1)),{},{x:b,y:c,width:u,height:f}),T=p||"Min value: ".concat((o=y[g])===null||o===void 0?void 0:o.name,", Max value: ").concat((a=y[v])===null||a===void 0?void 0:a.name);return ve.createElement(bi,{tabIndex:0,role:"slider","aria-label":T,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(P){["ArrowLeft","ArrowRight"].includes(P.key)&&(P.preventDefault(),P.stopPropagation(),s.handleTravellerMoveKeyboard(P.key==="ArrowRight"?1:-1,i))},onFocus:function(){s.setState({isTravellerFocused:!0})},onBlur:function(){s.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(h,w))}},{key:"renderSlide",value:function(r,i){var o=this.props,a=o.y,s=o.height,l=o.stroke,c=o.travellerWidth,u=Math.min(r,i)+c,f=Math.max(Math.abs(i-r)-c,0);return ve.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:l,fillOpacity:.2,x:u,y:a,width:f,height:s})}},{key:"renderText",value:function(){var r=this.props,i=r.startIndex,o=r.endIndex,a=r.y,s=r.height,l=r.travellerWidth,c=r.stroke,u=this.state,f=u.startX,h=u.endX,p=5,y={pointerEvents:"none",fill:c};return ve.createElement(bi,{className:"recharts-brush-texts"},ve.createElement(JT,SC({textAnchor:"end",verticalAnchor:"middle",x:Math.min(f,h)-p,y:a+s/2},y),this.getTextOfTick(i)),ve.createElement(JT,SC({textAnchor:"start",verticalAnchor:"middle",x:Math.max(f,h)+l+p,y:a+s/2},y),this.getTextOfTick(o)))}},{key:"render",value:function(){var r=this.props,i=r.data,o=r.className,a=r.children,s=r.x,l=r.y,c=r.width,u=r.height,f=r.alwaysShowText,h=this.state,p=h.startX,y=h.endX,g=h.isTextActive,v=h.isSlideMoving,b=h.isTravellerMoving,w=h.isTravellerFocused;if(!i||!i.length||!Et(s)||!Et(l)||!Et(c)||!Et(u)||c<=0||u<=0)return null;var T=Un("recharts-brush",o),C=ve.Children.count(a)===1,P=cUe("userSelect","none");return ve.createElement(bi,{className:T,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:P},this.renderBackground(),C&&this.renderPanorama(),this.renderSlide(p,y),this.renderTravellerLayer(p,"startX"),this.renderTravellerLayer(y,"endX"),(g||v||b||w||f)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var i=r.x,o=r.y,a=r.width,s=r.height,l=r.stroke,c=Math.floor(o+s/2)-1;return ve.createElement(ve.Fragment,null,ve.createElement("rect",{x:i,y:o,width:a,height:s,fill:l,stroke:"none"}),ve.createElement("line",{x1:i+1,y1:c,x2:i+a-1,y2:c,fill:"none",stroke:"#fff"}),ve.createElement("line",{x1:i+1,y1:c+2,x2:i+a-1,y2:c+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,i){var o;return ve.isValidElement(r)?o=ve.cloneElement(r,i):kn(r)?o=r(i):o=e.renderDefaultTraveller(i),o}},{key:"getDerivedStateFromProps",value:function(r,i){var o=r.data,a=r.width,s=r.x,l=r.travellerWidth,c=r.updateId,u=r.startIndex,f=r.endIndex;if(o!==i.prevData||c!==i.prevUpdateId)return ij({prevData:o,prevTravellerWidth:l,prevUpdateId:c,prevX:s,prevWidth:a},o&&o.length?yUe({data:o,width:a,x:s,travellerWidth:l,startIndex:u,endIndex:f}):{scale:null,scaleValues:null});if(i.scale&&(a!==i.prevWidth||s!==i.prevX||l!==i.prevTravellerWidth)){i.scale.range([s,s+a-l]);var h=i.scale.domain().map(function(p){return i.scale(p)});return{prevData:o,prevTravellerWidth:l,prevUpdateId:c,prevX:s,prevWidth:a,startX:i.scale(r.startIndex),endX:i.scale(r.endIndex),scaleValues:h}}return null}},{key:"getIndexInRange",value:function(r,i){for(var o=r.length,a=0,s=o-1;s-a>1;){var l=Math.floor((a+s)/2);r[l]>i?s=l:a=l}return i>=r[s]?s:a}}])}(_.PureComponent);Ss(Nv,"displayName","Brush");Ss(Nv,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var oj,k7;function vUe(){if(k7)return oj;k7=1;var t=UF();function e(n,r){var i;return t(n,function(o,a,s){return i=r(o,a,s),!i}),!!i}return oj=e,oj}var aj,N7;function xUe(){if(N7)return aj;N7=1;var t=Wre(),e=uh(),n=vUe(),r=Qa(),i=FA();function o(a,s,l){var c=r(a)?t:n;return l&&i(a,s,l)&&(s=void 0),c(a,e(s,3))}return aj=o,aj}var wUe=xUe();const bUe=$n(wUe);var Wc=function(e,n){var r=e.alwaysShow,i=e.ifOverflow;return r&&(i="extendDomain"),i===n},sj,R7;function SUe(){if(R7)return sj;R7=1;var t=cie();function e(n,r,i){r=="__proto__"&&t?t(n,r,{configurable:!0,enumerable:!0,value:i,writable:!0}):n[r]=i}return sj=e,sj}var lj,j7;function EUe(){if(j7)return lj;j7=1;var t=SUe(),e=sie(),n=uh();function r(i,o){var a={};return o=n(o,3),e(i,function(s,l,c){t(a,l,o(s,l,c))}),a}return lj=r,lj}var _Ue=EUe();const TUe=$n(_Ue);var cj,I7;function CUe(){if(I7)return cj;I7=1;function t(e,n){for(var r=-1,i=e==null?0:e.length;++r<i;)if(!n(e[r],r,e))return!1;return!0}return cj=t,cj}var uj,O7;function AUe(){if(O7)return uj;O7=1;var t=UF();function e(n,r){var i=!0;return t(n,function(o,a,s){return i=!!r(o,a,s),i}),i}return uj=e,uj}var dj,L7;function MUe(){if(L7)return dj;L7=1;var t=CUe(),e=AUe(),n=uh(),r=Qa(),i=FA();function o(a,s,l){var c=r(a)?t:e;return l&&i(a,s,l)&&(s=void 0),c(a,n(s,3))}return dj=o,dj}var PUe=MUe();const zoe=$n(PUe);var kUe=["x","y"];function Xb(t){"@babel/helpers - typeof";return Xb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xb(t)}function KL(){return KL=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},KL.apply(this,arguments)}function D7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function tw(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?D7(Object(n),!0).forEach(function(r){NUe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):D7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function NUe(t,e,n){return e=RUe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function RUe(t){var e=jUe(t,"string");return Xb(e)=="symbol"?e:e+""}function jUe(t,e){if(Xb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Xb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function IUe(t,e){if(t==null)return{};var n=OUe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function OUe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function LUe(t,e){var n=t.x,r=t.y,i=IUe(t,kUe),o="".concat(n),a=parseInt(o,10),s="".concat(r),l=parseInt(s,10),c="".concat(e.height||i.height),u=parseInt(c,10),f="".concat(e.width||i.width),h=parseInt(f,10);return tw(tw(tw(tw(tw({},e),i),a?{x:a}:{}),l?{y:l}:{}),{},{height:u,width:h,name:e.name,radius:e.radius})}function F7(t){return ve.createElement(Yze,KL({shapeType:"rectangle",propTransformer:LUe,activeClassName:"recharts-active-bar"},t))}var DUe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,i){if(typeof e=="number")return e;var o=typeof r=="number";return o?e(r,i):(o||am(),n)}},FUe=["value","background"],Uoe;function Rv(t){"@babel/helpers - typeof";return Rv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rv(t)}function zUe(t,e){if(t==null)return{};var n=UUe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function UUe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function _C(){return _C=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_C.apply(this,arguments)}function z7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Oi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?z7(Object(n),!0).forEach(function(r){Of(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):z7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function BUe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function U7(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,$oe(r.key),r)}}function $Ue(t,e,n){return e&&U7(t.prototype,e),n&&U7(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function HUe(t,e,n){return e=TC(e),VUe(t,Boe()?Reflect.construct(e,n||[],TC(t).constructor):e.apply(t,n))}function VUe(t,e){if(e&&(Rv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return WUe(t)}function WUe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Boe(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Boe=function(){return!!t})()}function TC(t){return TC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},TC(t)}function GUe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&JL(t,e)}function JL(t,e){return JL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},JL(t,e)}function Of(t,e,n){return e=$oe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $oe(t){var e=qUe(t,"string");return Rv(e)=="symbol"?e:e+""}function qUe(t,e){if(Rv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Rv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var eS=function(t){function e(){var n;BUe(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=HUe(this,e,[].concat(i)),Of(n,"state",{isAnimationFinished:!1}),Of(n,"id",q1("recharts-bar-")),Of(n,"handleAnimationEnd",function(){var a=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),a&&a()}),Of(n,"handleAnimationStart",function(){var a=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),a&&a()}),n}return GUe(e,t),$Ue(e,[{key:"renderRectanglesStatically",value:function(r){var i=this,o=this.props,a=o.shape,s=o.dataKey,l=o.activeIndex,c=o.activeBar,u=Dn(this.props,!1);return r&&r.map(function(f,h){var p=h===l,y=p?c:a,g=Oi(Oi(Oi({},u),f),{},{isActive:p,option:y,index:h,dataKey:s,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return ve.createElement(bi,_C({className:"recharts-bar-rectangle"},UT(i.props,f,h),{key:"rectangle-".concat(f==null?void 0:f.x,"-").concat(f==null?void 0:f.y,"-").concat(f==null?void 0:f.value)}),ve.createElement(F7,g))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,i=this.props,o=i.data,a=i.layout,s=i.isAnimationActive,l=i.animationBegin,c=i.animationDuration,u=i.animationEasing,f=i.animationId,h=this.state.prevData;return ve.createElement(yd,{begin:l,duration:c,isActive:s,easing:u,from:{t:0},to:{t:1},key:"bar-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(p){var y=p.t,g=o.map(function(v,b){var w=h&&h[b];if(w){var T=Xl(w.x,v.x),C=Xl(w.y,v.y),P=Xl(w.width,v.width),M=Xl(w.height,v.height);return Oi(Oi({},v),{},{x:T(y),y:C(y),width:P(y),height:M(y)})}if(a==="horizontal"){var k=Xl(0,v.height),I=k(y);return Oi(Oi({},v),{},{y:v.y+v.height-I,height:I})}var U=Xl(0,v.width),z=U(y);return Oi(Oi({},v),{},{width:z})});return ve.createElement(bi,null,r.renderRectanglesStatically(g))})}},{key:"renderRectangles",value:function(){var r=this.props,i=r.data,o=r.isAnimationActive,a=this.state.prevData;return o&&i&&i.length&&(!a||!qA(a,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var r=this,i=this.props,o=i.data,a=i.dataKey,s=i.activeIndex,l=Dn(this.props.background,!1);return o.map(function(c,u){c.value;var f=c.background,h=zUe(c,FUe);if(!f)return null;var p=Oi(Oi(Oi(Oi(Oi({},h),{},{fill:"#eee"},f),l),UT(r.props,c,u)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:a,index:u,className:"recharts-bar-background-rectangle"});return ve.createElement(F7,_C({key:"background-bar-".concat(u),option:r.props.background,isActive:u===s},p))})}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var o=this.props,a=o.data,s=o.xAxis,l=o.yAxis,c=o.layout,u=o.children,f=il(u,Q1);if(!f)return null;var h=c==="vertical"?a[0].height/2:a[0].width/2,p=function(v,b){var w=Array.isArray(v.value)?v.value[1]:v.value;return{x:v.x,y:v.y,value:w,errorVal:js(v,b)}},y={clipPath:r?"url(#clipPath-".concat(i,")"):null};return ve.createElement(bi,y,f.map(function(g){return ve.cloneElement(g,{key:"error-bar-".concat(i,"-").concat(g.props.dataKey),data:a,xAxis:s,yAxis:l,layout:c,offset:h,dataPointFormatter:p})}))}},{key:"render",value:function(){var r=this.props,i=r.hide,o=r.data,a=r.className,s=r.xAxis,l=r.yAxis,c=r.left,u=r.top,f=r.width,h=r.height,p=r.isAnimationActive,y=r.background,g=r.id;if(i||!o||!o.length)return null;var v=this.state.isAnimationFinished,b=Un("recharts-bar",a),w=s&&s.allowDataOverflow,T=l&&l.allowDataOverflow,C=w||T,P=jn(g)?this.id:g;return ve.createElement(bi,{className:b},w||T?ve.createElement("defs",null,ve.createElement("clipPath",{id:"clipPath-".concat(P)},ve.createElement("rect",{x:w?c:c-f/2,y:T?u:u-h/2,width:w?f:f*2,height:T?h:h*2}))):null,ve.createElement(bi,{className:"recharts-bar-rectangles",clipPath:C?"url(#clipPath-".concat(P,")"):null},y?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(C,P),(!p||v)&&Uf.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:i.curData}:r.data!==i.curData?{curData:r.data}:null}}])}(_.PureComponent);Uoe=eS;Of(eS,"displayName","Bar");Of(eS,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!M0.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Of(eS,"getComposedData",function(t){var e=t.props,n=t.item,r=t.barPosition,i=t.bandSize,o=t.xAxis,a=t.yAxis,s=t.xAxisTicks,l=t.yAxisTicks,c=t.stackedData,u=t.dataStartIndex,f=t.displayedData,h=t.offset,p=S4e(r,n);if(!p)return null;var y=e.layout,g=n.type.defaultProps,v=g!==void 0?Oi(Oi({},g),n.props):n.props,b=v.dataKey,w=v.children,T=v.minPointSize,C=y==="horizontal"?a:o,P=c?C.scale.domain():null,M=k4e({numericAxis:C}),k=il(w,yie),I=f.map(function(U,z){var O,B,$,F,J,K;c?O=E4e(c[u+z],P):(O=js(U,b),Array.isArray(O)||(O=[M,O]));var Z=DUe(T,Uoe.defaultProps.minPointSize)(O[1],z);if(y==="horizontal"){var H,Y=[a.scale(O[0]),a.scale(O[1])],L=Y[0],N=Y[1];B=E9({axis:o,ticks:s,bandSize:i,offset:p.offset,entry:U,index:z}),$=(H=N??L)!==null&&H!==void 0?H:void 0,F=p.size;var V=L-N;if(J=Number.isNaN(V)?0:V,K={x:B,y:a.y,width:F,height:a.height},Math.abs(Z)>0&&Math.abs(J)<Math.abs(Z)){var W=tc(J||Z)*(Math.abs(Z)-Math.abs(J));$-=W,J+=W}}else{var ne=[o.scale(O[0]),o.scale(O[1])],se=ne[0],te=ne[1];if(B=se,$=E9({axis:a,ticks:l,bandSize:i,offset:p.offset,entry:U,index:z}),F=te-se,J=p.size,K={x:o.x,y:$,width:o.width,height:J},Math.abs(Z)>0&&Math.abs(F)<Math.abs(Z)){var ie=tc(F||Z)*(Math.abs(Z)-Math.abs(F));F+=ie}}return Oi(Oi(Oi({},U),{},{x:B,y:$,width:F,height:J,value:c?O:O[1],payload:U,background:K},k&&k[z]&&k[z].props),{},{tooltipPayload:[Eoe(n,U)],tooltipPosition:{x:B+F/2,y:$+J/2}})});return Oi({data:I,layout:y},h)});function Kb(t){"@babel/helpers - typeof";return Kb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kb(t)}function YUe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function B7(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Hoe(r.key),r)}}function XUe(t,e,n){return e&&B7(t.prototype,e),n&&B7(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function $7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ql(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$7(Object(n),!0).forEach(function(r){ZA(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ZA(t,e,n){return e=Hoe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Hoe(t){var e=KUe(t,"string");return Kb(e)=="symbol"?e:e+""}function KUe(t,e){if(Kb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Kb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var JUe=function(e,n,r,i,o){var a=e.width,s=e.height,l=e.layout,c=e.children,u=Object.keys(n),f={left:r.left,leftMirror:r.left,right:a-r.right,rightMirror:a-r.right,top:r.top,topMirror:r.top,bottom:s-r.bottom,bottomMirror:s-r.bottom},h=!!Ts(c,eS);return u.reduce(function(p,y){var g=n[y],v=g.orientation,b=g.domain,w=g.padding,T=w===void 0?{}:w,C=g.mirror,P=g.reversed,M="".concat(v).concat(C?"Mirror":""),k,I,U,z,O;if(g.type==="number"&&(g.padding==="gap"||g.padding==="no-gap")){var B=b[1]-b[0],$=1/0,F=g.categoricalDomain.sort();if(F.forEach(function(ne,se){se>0&&($=Math.min((ne||0)-(F[se-1]||0),$))}),Number.isFinite($)){var J=$/B,K=g.layout==="vertical"?r.height:r.width;if(g.padding==="gap"&&(k=J*K/2),g.padding==="no-gap"){var Z=im(e.barCategoryGap,J*K),H=J*K/2;k=H-Z-(H-Z)/K*Z}}}i==="xAxis"?I=[r.left+(T.left||0)+(k||0),r.left+r.width-(T.right||0)-(k||0)]:i==="yAxis"?I=l==="horizontal"?[r.top+r.height-(T.bottom||0),r.top+(T.top||0)]:[r.top+(T.top||0)+(k||0),r.top+r.height-(T.bottom||0)-(k||0)]:I=g.range,P&&(I=[I[1],I[0]]);var Y=w4e(g,o,h),L=Y.scale,N=Y.realScaleType;L.domain(b).range(I),b4e(L);var V=P4e(L,ql(ql({},g),{},{realScaleType:N}));i==="xAxis"?(O=v==="top"&&!C||v==="bottom"&&C,U=r.left,z=f[M]-O*g.height):i==="yAxis"&&(O=v==="left"&&!C||v==="right"&&C,U=f[M]-O*g.width,z=r.top);var W=ql(ql(ql({},g),V),{},{realScaleType:N,x:U,y:z,scale:L,width:i==="xAxis"?r.width:g.width,height:i==="yAxis"?r.height:g.height});return W.bandSize=dC(W,V),!g.hide&&i==="xAxis"?f[M]+=(O?-1:1)*W.height:g.hide||(f[M]+=(O?-1:1)*W.width),ql(ql({},p),{},ZA({},y,W))},{})},Voe=function(e,n){var r=e.x,i=e.y,o=n.x,a=n.y;return{x:Math.min(r,o),y:Math.min(i,a),width:Math.abs(o-r),height:Math.abs(a-i)}},ZUe=function(e){var n=e.x1,r=e.y1,i=e.x2,o=e.y2;return Voe({x:n,y:r},{x:i,y:o})},Woe=function(){function t(e){YUe(this,t),this.scale=e}return XUe(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.bandAware,o=r.position;if(n!==void 0){if(o)switch(o){case"start":return this.scale(n);case"middle":{var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+a}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(n)+s}default:return this.scale(n)}if(i){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+l}return this.scale(n)}}},{key:"isInRange",value:function(n){var r=this.range(),i=r[0],o=r[r.length-1];return i<=o?n>=i&&n<=o:n>=o&&n<=i}}],[{key:"create",value:function(n){return new t(n)}}])}();ZA(Woe,"EPS",1e-4);var g5=function(e){var n=Object.keys(e).reduce(function(r,i){return ql(ql({},r),{},ZA({},i,Woe.create(e[i])))},{});return ql(ql({},n),{},{apply:function(i){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=o.bandAware,s=o.position;return TUe(i,function(l,c){return n[c].apply(l,{bandAware:a,position:s})})},isInRange:function(i){return zoe(i,function(o,a){return n[a].isInRange(o)})}})};function QUe(t){return(t%180+180)%180}var eBe=function(e){var n=e.width,r=e.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=QUe(i),a=o*Math.PI/180,s=Math.atan(r/n),l=a>s&&a<Math.PI-s?r/Math.sin(a):n/Math.cos(a);return Math.abs(l)},fj,H7;function tBe(){if(H7)return fj;H7=1;var t=uh(),e=Y1(),n=LA();function r(i){return function(o,a,s){var l=Object(o);if(!e(o)){var c=t(a,3);o=n(o),a=function(f){return c(l[f],f,l)}}var u=i(o,a,s);return u>-1?l[c?o[u]:u]:void 0}}return fj=r,fj}var hj,V7;function nBe(){if(V7)return hj;V7=1;var t=Ooe();function e(n){var r=t(n),i=r%1;return r===r?i?r-i:r:0}return hj=e,hj}var pj,W7;function rBe(){if(W7)return pj;W7=1;var t=nie(),e=uh(),n=nBe(),r=Math.max;function i(o,a,s){var l=o==null?0:o.length;if(!l)return-1;var c=s==null?0:n(s);return c<0&&(c=r(l+c,0)),t(o,e(a,3),c)}return pj=i,pj}var mj,G7;function iBe(){if(G7)return mj;G7=1;var t=tBe(),e=rBe(),n=t(e);return mj=n,mj}var oBe=iBe();const aBe=$n(oBe);var sBe=yre();const lBe=$n(sBe);var cBe=lBe(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),y5=_.createContext(void 0),v5=_.createContext(void 0),Goe=_.createContext(void 0),qoe=_.createContext({}),Yoe=_.createContext(void 0),Xoe=_.createContext(0),Koe=_.createContext(0),q7=function(e){var n=e.state,r=n.xAxisMap,i=n.yAxisMap,o=n.offset,a=e.clipPathId,s=e.children,l=e.width,c=e.height,u=cBe(o);return ve.createElement(y5.Provider,{value:r},ve.createElement(v5.Provider,{value:i},ve.createElement(qoe.Provider,{value:o},ve.createElement(Goe.Provider,{value:u},ve.createElement(Yoe.Provider,{value:a},ve.createElement(Xoe.Provider,{value:c},ve.createElement(Koe.Provider,{value:l},s)))))))},uBe=function(){return _.useContext(Yoe)},Joe=function(e){var n=_.useContext(y5);n==null&&am();var r=n[e];return r==null&&am(),r},dBe=function(){var e=_.useContext(y5);return kf(e)},fBe=function(){var e=_.useContext(v5),n=aBe(e,function(r){return zoe(r.domain,Number.isFinite)});return n||kf(e)},Zoe=function(e){var n=_.useContext(v5);n==null&&am();var r=n[e];return r==null&&am(),r},hBe=function(){var e=_.useContext(Goe);return e},pBe=function(){return _.useContext(qoe)},x5=function(){return _.useContext(Koe)},w5=function(){return _.useContext(Xoe)};function jv(t){"@babel/helpers - typeof";return jv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jv(t)}function mBe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gBe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,eae(r.key),r)}}function yBe(t,e,n){return e&&gBe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function vBe(t,e,n){return e=CC(e),xBe(t,Qoe()?Reflect.construct(e,n||[],CC(t).constructor):e.apply(t,n))}function xBe(t,e){if(e&&(jv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wBe(t)}function wBe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Qoe(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Qoe=function(){return!!t})()}function CC(t){return CC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},CC(t)}function bBe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ZL(t,e)}function ZL(t,e){return ZL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},ZL(t,e)}function Y7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function X7(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Y7(Object(n),!0).forEach(function(r){b5(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Y7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function b5(t,e,n){return e=eae(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function eae(t){var e=SBe(t,"string");return jv(e)=="symbol"?e:e+""}function SBe(t,e){if(jv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(jv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function EBe(t,e){return ABe(t)||CBe(t,e)||TBe(t,e)||_Be()}function _Be(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function TBe(t,e){if(t){if(typeof t=="string")return K7(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return K7(t,e)}}function K7(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function CBe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}function ABe(t){if(Array.isArray(t))return t}function QL(){return QL=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},QL.apply(this,arguments)}var MBe=function(e,n){var r;return ve.isValidElement(e)?r=ve.cloneElement(e,n):kn(e)?r=e(n):r=ve.createElement("line",QL({},n,{className:"recharts-reference-line-line"})),r},PBe=function(e,n,r,i,o,a,s,l,c){var u=o.x,f=o.y,h=o.width,p=o.height;if(r){var y=c.y,g=e.y.apply(y,{position:a});if(Wc(c,"discard")&&!e.y.isInRange(g))return null;var v=[{x:u+h,y:g},{x:u,y:g}];return l==="left"?v.reverse():v}if(n){var b=c.x,w=e.x.apply(b,{position:a});if(Wc(c,"discard")&&!e.x.isInRange(w))return null;var T=[{x:w,y:f+p},{x:w,y:f}];return s==="top"?T.reverse():T}if(i){var C=c.segment,P=C.map(function(M){return e.apply(M,{position:a})});return Wc(c,"discard")&&bUe(P,function(M){return!e.isInRange(M)})?null:P}return null};function kBe(t){var e=t.x,n=t.y,r=t.segment,i=t.xAxisId,o=t.yAxisId,a=t.shape,s=t.className,l=t.alwaysShow,c=uBe(),u=Joe(i),f=Zoe(o),h=hBe();if(!c||!h)return null;id(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=g5({x:u.scale,y:f.scale}),y=no(e),g=no(n),v=r&&r.length===2,b=PBe(p,y,g,v,h,t.position,u.orientation,f.orientation,t);if(!b)return null;var w=EBe(b,2),T=w[0],C=T.x,P=T.y,M=w[1],k=M.x,I=M.y,U=Wc(t,"hidden")?"url(#".concat(c,")"):void 0,z=X7(X7({clipPath:U},Dn(t,!0)),{},{x1:C,y1:P,x2:k,y2:I});return ve.createElement(bi,{className:Un("recharts-reference-line",s)},MBe(a,z),na.renderCallByParent(t,ZUe({x1:C,y1:P,x2:k,y2:I})))}var Jb=function(t){function e(){return mBe(this,e),vBe(this,e,arguments)}return bBe(e,t),yBe(e,[{key:"render",value:function(){return ve.createElement(kBe,this.props)}}])}(ve.Component);b5(Jb,"displayName","ReferenceLine");b5(Jb,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function eD(){return eD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},eD.apply(this,arguments)}function Iv(t){"@babel/helpers - typeof";return Iv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Iv(t)}function J7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Z7(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?J7(Object(n),!0).forEach(function(r){QA(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):J7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function NBe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function RBe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,nae(r.key),r)}}function jBe(t,e,n){return e&&RBe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function IBe(t,e,n){return e=AC(e),OBe(t,tae()?Reflect.construct(e,n||[],AC(t).constructor):e.apply(t,n))}function OBe(t,e){if(e&&(Iv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return LBe(t)}function LBe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function tae(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(tae=function(){return!!t})()}function AC(t){return AC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},AC(t)}function DBe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&tD(t,e)}function tD(t,e){return tD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},tD(t,e)}function QA(t,e,n){return e=nae(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nae(t){var e=FBe(t,"string");return Iv(e)=="symbol"?e:e+""}function FBe(t,e){if(Iv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Iv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var zBe=function(e){var n=e.x,r=e.y,i=e.xAxis,o=e.yAxis,a=g5({x:i.scale,y:o.scale}),s=a.apply({x:n,y:r},{bandAware:!0});return Wc(e,"discard")&&!a.isInRange(s)?null:s},e2=function(t){function e(){return NBe(this,e),IBe(this,e,arguments)}return DBe(e,t),jBe(e,[{key:"render",value:function(){var r=this.props,i=r.x,o=r.y,a=r.r,s=r.alwaysShow,l=r.clipPathId,c=no(i),u=no(o);if(id(s===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!c||!u)return null;var f=zBe(this.props);if(!f)return null;var h=f.x,p=f.y,y=this.props,g=y.shape,v=y.className,b=Wc(this.props,"hidden")?"url(#".concat(l,")"):void 0,w=Z7(Z7({clipPath:b},Dn(this.props,!0)),{},{cx:h,cy:p});return ve.createElement(bi,{className:Un("recharts-reference-dot",v)},e.renderDot(g,w),na.renderCallByParent(this.props,{x:h-a,y:p-a,width:2*a,height:2*a}))}}])}(ve.Component);QA(e2,"displayName","ReferenceDot");QA(e2,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});QA(e2,"renderDot",function(t,e){var n;return ve.isValidElement(t)?n=ve.cloneElement(t,e):kn(t)?n=t(e):n=ve.createElement(m5,eD({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),n});function nD(){return nD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},nD.apply(this,arguments)}function Ov(t){"@babel/helpers - typeof";return Ov=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ov(t)}function Q7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function eq(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Q7(Object(n),!0).forEach(function(r){t2(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Q7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function UBe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function BBe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,iae(r.key),r)}}function $Be(t,e,n){return e&&BBe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function HBe(t,e,n){return e=MC(e),VBe(t,rae()?Reflect.construct(e,n||[],MC(t).constructor):e.apply(t,n))}function VBe(t,e){if(e&&(Ov(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return WBe(t)}function WBe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function rae(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(rae=function(){return!!t})()}function MC(t){return MC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},MC(t)}function GBe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&rD(t,e)}function rD(t,e){return rD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},rD(t,e)}function t2(t,e,n){return e=iae(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function iae(t){var e=qBe(t,"string");return Ov(e)=="symbol"?e:e+""}function qBe(t,e){if(Ov(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ov(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var YBe=function(e,n,r,i,o){var a=o.x1,s=o.x2,l=o.y1,c=o.y2,u=o.xAxis,f=o.yAxis;if(!u||!f)return null;var h=g5({x:u.scale,y:f.scale}),p={x:e?h.x.apply(a,{position:"start"}):h.x.rangeMin,y:r?h.y.apply(l,{position:"start"}):h.y.rangeMin},y={x:n?h.x.apply(s,{position:"end"}):h.x.rangeMax,y:i?h.y.apply(c,{position:"end"}):h.y.rangeMax};return Wc(o,"discard")&&(!h.isInRange(p)||!h.isInRange(y))?null:Voe(p,y)},Wp=function(t){function e(){return UBe(this,e),HBe(this,e,arguments)}return GBe(e,t),$Be(e,[{key:"render",value:function(){var r=this.props,i=r.x1,o=r.x2,a=r.y1,s=r.y2,l=r.className,c=r.alwaysShow,u=r.clipPathId;id(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=no(i),h=no(o),p=no(a),y=no(s),g=this.props.shape;if(!f&&!h&&!p&&!y&&!g)return null;var v=YBe(f,h,p,y,this.props);if(!v&&!g)return null;var b=Wc(this.props,"hidden")?"url(#".concat(u,")"):void 0;return ve.createElement(bi,{className:Un("recharts-reference-area",l)},e.renderRect(g,eq(eq({clipPath:b},Dn(this.props,!0)),v)),na.renderCallByParent(this.props,v))}}])}(ve.Component);t2(Wp,"displayName","ReferenceArea");t2(Wp,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});t2(Wp,"renderRect",function(t,e){var n;return ve.isValidElement(t)?n=ve.cloneElement(t,e):kn(t)?n=t(e):n=ve.createElement(p5,nD({},e,{className:"recharts-reference-area-rect"})),n});function oae(t,e,n){if(e<1)return[];if(e===1&&n===void 0)return t;for(var r=[],i=0;i<t.length;i+=e)r.push(t[i]);return r}function XBe(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return eBe(r,n)}function KBe(t,e,n){var r=n==="width",i=t.x,o=t.y,a=t.width,s=t.height;return e===1?{start:r?i:o,end:r?i+a:o+s}:{start:r?i+a:o+s,end:r?i:o}}function PC(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var o=n();return t*(e-t*o/2-r)>=0&&t*(e+t*o/2-i)<=0}function JBe(t,e){return oae(t,e+1)}function ZBe(t,e,n,r,i){for(var o=(r||[]).slice(),a=e.start,s=e.end,l=0,c=1,u=a,f=function(){var y=r==null?void 0:r[l];if(y===void 0)return{v:oae(r,c)};var g=l,v,b=function(){return v===void 0&&(v=n(y,g)),v},w=y.coordinate,T=l===0||PC(t,w,b,u,s);T||(l=0,u=a,c+=1),T&&(u=w+t*(b()/2+i),l+=c)},h;c<=o.length;)if(h=f(),h)return h.v;return[]}function Zb(t){"@babel/helpers - typeof";return Zb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zb(t)}function tq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ta(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?tq(Object(n),!0).forEach(function(r){QBe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function QBe(t,e,n){return e=e$e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function e$e(t){var e=t$e(t,"string");return Zb(e)=="symbol"?e:e+""}function t$e(t,e){if(Zb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Zb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function n$e(t,e,n,r,i){for(var o=(r||[]).slice(),a=o.length,s=e.start,l=e.end,c=function(h){var p=o[h],y,g=function(){return y===void 0&&(y=n(p,h)),y};if(h===a-1){var v=t*(p.coordinate+t*g()/2-l);o[h]=p=ta(ta({},p),{},{tickCoord:v>0?p.coordinate-v*t:p.coordinate})}else o[h]=p=ta(ta({},p),{},{tickCoord:p.coordinate});var b=PC(t,p.tickCoord,g,s,l);b&&(l=p.tickCoord-t*(g()/2+i),o[h]=ta(ta({},p),{},{isShow:!0}))},u=a-1;u>=0;u--)c(u);return o}function r$e(t,e,n,r,i,o){var a=(r||[]).slice(),s=a.length,l=e.start,c=e.end;if(o){var u=r[s-1],f=n(u,s-1),h=t*(u.coordinate+t*f/2-c);a[s-1]=u=ta(ta({},u),{},{tickCoord:h>0?u.coordinate-h*t:u.coordinate});var p=PC(t,u.tickCoord,function(){return f},l,c);p&&(c=u.tickCoord-t*(f/2+i),a[s-1]=ta(ta({},u),{},{isShow:!0}))}for(var y=o?s-1:s,g=function(w){var T=a[w],C,P=function(){return C===void 0&&(C=n(T,w)),C};if(w===0){var M=t*(T.coordinate-t*P()/2-l);a[w]=T=ta(ta({},T),{},{tickCoord:M<0?T.coordinate-M*t:T.coordinate})}else a[w]=T=ta(ta({},T),{},{tickCoord:T.coordinate});var k=PC(t,T.tickCoord,P,l,c);k&&(l=T.tickCoord+t*(P()/2+i),a[w]=ta(ta({},T),{},{isShow:!0}))},v=0;v<y;v++)g(v);return a}function S5(t,e,n){var r=t.tick,i=t.ticks,o=t.viewBox,a=t.minTickGap,s=t.orientation,l=t.interval,c=t.tickFormatter,u=t.unit,f=t.angle;if(!i||!i.length||!r)return[];if(Et(l)||M0.isSsr)return JBe(i,typeof l=="number"&&Et(l)?l:0);var h=[],p=s==="top"||s==="bottom"?"width":"height",y=u&&p==="width"?zw(u,{fontSize:e,letterSpacing:n}):{width:0,height:0},g=function(T,C){var P=kn(c)?c(T.value,C):T.value;return p==="width"?XBe(zw(P,{fontSize:e,letterSpacing:n}),y,f):zw(P,{fontSize:e,letterSpacing:n})[p]},v=i.length>=2?tc(i[1].coordinate-i[0].coordinate):1,b=KBe(o,v,p);return l==="equidistantPreserveStart"?ZBe(v,b,g,i,a):(l==="preserveStart"||l==="preserveStartEnd"?h=r$e(v,b,g,i,a,l==="preserveStartEnd"):h=n$e(v,b,g,i,a),h.filter(function(w){return w.isShow}))}var i$e=["viewBox"],o$e=["viewBox"],a$e=["ticks"];function Lv(t){"@babel/helpers - typeof";return Lv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lv(t)}function Fy(){return Fy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Fy.apply(this,arguments)}function nq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ea(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?nq(Object(n),!0).forEach(function(r){E5(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gj(t,e){if(t==null)return{};var n=s$e(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function s$e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function l$e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function rq(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,sae(r.key),r)}}function c$e(t,e,n){return e&&rq(t.prototype,e),n&&rq(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function u$e(t,e,n){return e=kC(e),d$e(t,aae()?Reflect.construct(e,n||[],kC(t).constructor):e.apply(t,n))}function d$e(t,e){if(e&&(Lv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return f$e(t)}function f$e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function aae(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(aae=function(){return!!t})()}function kC(t){return kC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},kC(t)}function h$e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&iD(t,e)}function iD(t,e){return iD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},iD(t,e)}function E5(t,e,n){return e=sae(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function sae(t){var e=p$e(t,"string");return Lv(e)=="symbol"?e:e+""}function p$e(t,e){if(Lv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Lv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var j0=function(t){function e(n){var r;return l$e(this,e),r=u$e(this,e,[n]),r.state={fontSize:"",letterSpacing:""},r}return h$e(e,t),c$e(e,[{key:"shouldComponentUpdate",value:function(r,i){var o=r.viewBox,a=gj(r,i$e),s=this.props,l=s.viewBox,c=gj(s,o$e);return!Zy(o,l)||!Zy(a,c)||!Zy(i,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var i=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var i=this.props,o=i.x,a=i.y,s=i.width,l=i.height,c=i.orientation,u=i.tickSize,f=i.mirror,h=i.tickMargin,p,y,g,v,b,w,T=f?-1:1,C=r.tickSize||u,P=Et(r.tickCoord)?r.tickCoord:r.coordinate;switch(c){case"top":p=y=r.coordinate,v=a+ +!f*l,g=v-T*C,w=g-T*h,b=P;break;case"left":g=v=r.coordinate,y=o+ +!f*s,p=y-T*C,b=p-T*h,w=P;break;case"right":g=v=r.coordinate,y=o+ +f*s,p=y+T*C,b=p+T*h,w=P;break;default:p=y=r.coordinate,v=a+ +f*l,g=v+T*C,w=g+T*h,b=P;break}return{line:{x1:p,y1:g,x2:y,y2:v},tick:{x:b,y:w}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,i=r.orientation,o=r.mirror,a;switch(i){case"left":a=o?"start":"end";break;case"right":a=o?"end":"start";break;default:a="middle";break}return a}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,i=r.orientation,o=r.mirror,a="end";switch(i){case"left":case"right":a="middle";break;case"top":a=o?"start":"end";break;default:a=o?"end":"start";break}return a}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.x,o=r.y,a=r.width,s=r.height,l=r.orientation,c=r.mirror,u=r.axisLine,f=Ea(Ea(Ea({},Dn(this.props,!1)),Dn(u,!1)),{},{fill:"none"});if(l==="top"||l==="bottom"){var h=+(l==="top"&&!c||l==="bottom"&&c);f=Ea(Ea({},f),{},{x1:i,y1:o+h*s,x2:i+a,y2:o+h*s})}else{var p=+(l==="left"&&!c||l==="right"&&c);f=Ea(Ea({},f),{},{x1:i+p*a,y1:o,x2:i+p*a,y2:o+s})}return ve.createElement("line",Fy({},f,{className:Un("recharts-cartesian-axis-line",rl(u,"className"))}))}},{key:"renderTicks",value:function(r,i,o){var a=this,s=this.props,l=s.tickLine,c=s.stroke,u=s.tick,f=s.tickFormatter,h=s.unit,p=S5(Ea(Ea({},this.props),{},{ticks:r}),i,o),y=this.getTickTextAnchor(),g=this.getTickVerticalAnchor(),v=Dn(this.props,!1),b=Dn(u,!1),w=Ea(Ea({},v),{},{fill:"none"},Dn(l,!1)),T=p.map(function(C,P){var M=a.getTickLineCoord(C),k=M.line,I=M.tick,U=Ea(Ea(Ea(Ea({textAnchor:y,verticalAnchor:g},v),{},{stroke:"none",fill:c},b),I),{},{index:P,payload:C,visibleTicksCount:p.length,tickFormatter:f});return ve.createElement(bi,Fy({className:"recharts-cartesian-axis-tick",key:"tick-".concat(C.value,"-").concat(C.coordinate,"-").concat(C.tickCoord)},UT(a.props,C,P)),l&&ve.createElement("line",Fy({},w,k,{className:Un("recharts-cartesian-axis-tick-line",rl(l,"className"))})),u&&e.renderTickItem(u,U,"".concat(kn(f)?f(C.value,P):C.value).concat(h||"")))});return ve.createElement("g",{className:"recharts-cartesian-axis-ticks"},T)}},{key:"render",value:function(){var r=this,i=this.props,o=i.axisLine,a=i.width,s=i.height,l=i.ticksGenerator,c=i.className,u=i.hide;if(u)return null;var f=this.props,h=f.ticks,p=gj(f,a$e),y=h;return kn(l)&&(y=h&&h.length>0?l(this.props):l(p)),a<=0||s<=0||!y||!y.length?null:ve.createElement(bi,{className:Un("recharts-cartesian-axis",c),ref:function(v){r.layerReference=v}},o&&this.renderAxisLine(),this.renderTicks(y,this.state.fontSize,this.state.letterSpacing),na.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,i,o){var a;return ve.isValidElement(r)?a=ve.cloneElement(r,i):kn(r)?a=r(i):a=ve.createElement(JT,Fy({},i,{className:"recharts-cartesian-axis-tick-value"}),o),a}}])}(_.Component);E5(j0,"displayName","CartesianAxis");E5(j0,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var m$e=["x1","y1","x2","y2","key"],g$e=["offset"];function sm(t){"@babel/helpers - typeof";return sm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sm(t)}function iq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ra(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?iq(Object(n),!0).forEach(function(r){y$e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):iq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function y$e(t,e,n){return e=v$e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function v$e(t){var e=x$e(t,"string");return sm(e)=="symbol"?e:e+""}function x$e(t,e){if(sm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(sm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function jp(){return jp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},jp.apply(this,arguments)}function oq(t,e){if(t==null)return{};var n=w$e(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function w$e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var b$e=function(e){var n=e.fill;if(!n||n==="none")return null;var r=e.fillOpacity,i=e.x,o=e.y,a=e.width,s=e.height,l=e.ry;return ve.createElement("rect",{x:i,y:o,ry:l,width:a,height:s,stroke:"none",fill:n,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function lae(t,e){var n;if(ve.isValidElement(t))n=ve.cloneElement(t,e);else if(kn(t))n=t(e);else{var r=e.x1,i=e.y1,o=e.x2,a=e.y2,s=e.key,l=oq(e,m$e),c=Dn(l,!1);c.offset;var u=oq(c,g$e);n=ve.createElement("line",jp({},u,{x1:r,y1:i,x2:o,y2:a,fill:"none",key:s}))}return n}function S$e(t){var e=t.x,n=t.width,r=t.horizontal,i=r===void 0?!0:r,o=t.horizontalPoints;if(!i||!o||!o.length)return null;var a=o.map(function(s,l){var c=ra(ra({},t),{},{x1:e,y1:s,x2:e+n,y2:s,key:"line-".concat(l),index:l});return lae(i,c)});return ve.createElement("g",{className:"recharts-cartesian-grid-horizontal"},a)}function E$e(t){var e=t.y,n=t.height,r=t.vertical,i=r===void 0?!0:r,o=t.verticalPoints;if(!i||!o||!o.length)return null;var a=o.map(function(s,l){var c=ra(ra({},t),{},{x1:s,y1:e,x2:s,y2:e+n,key:"line-".concat(l),index:l});return lae(i,c)});return ve.createElement("g",{className:"recharts-cartesian-grid-vertical"},a)}function _$e(t){var e=t.horizontalFill,n=t.fillOpacity,r=t.x,i=t.y,o=t.width,a=t.height,s=t.horizontalPoints,l=t.horizontal,c=l===void 0?!0:l;if(!c||!e||!e.length)return null;var u=s.map(function(h){return Math.round(h+i-i)}).sort(function(h,p){return h-p});i!==u[0]&&u.unshift(0);var f=u.map(function(h,p){var y=!u[p+1],g=y?i+a-h:u[p+1]-h;if(g<=0)return null;var v=p%e.length;return ve.createElement("rect",{key:"react-".concat(p),y:h,x:r,height:g,width:o,stroke:"none",fill:e[v],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return ve.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function T$e(t){var e=t.vertical,n=e===void 0?!0:e,r=t.verticalFill,i=t.fillOpacity,o=t.x,a=t.y,s=t.width,l=t.height,c=t.verticalPoints;if(!n||!r||!r.length)return null;var u=c.map(function(h){return Math.round(h+o-o)}).sort(function(h,p){return h-p});o!==u[0]&&u.unshift(0);var f=u.map(function(h,p){var y=!u[p+1],g=y?o+s-h:u[p+1]-h;if(g<=0)return null;var v=p%r.length;return ve.createElement("rect",{key:"react-".concat(p),x:h,y:a,width:g,height:l,stroke:"none",fill:r[v],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return ve.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var C$e=function(e,n){var r=e.xAxis,i=e.width,o=e.height,a=e.offset;return boe(S5(ra(ra(ra({},j0.defaultProps),r),{},{ticks:Ju(r,!0),viewBox:{x:0,y:0,width:i,height:o}})),a.left,a.left+a.width,n)},A$e=function(e,n){var r=e.yAxis,i=e.width,o=e.height,a=e.offset;return boe(S5(ra(ra(ra({},j0.defaultProps),r),{},{ticks:Ju(r,!0),viewBox:{x:0,y:0,width:i,height:o}})),a.top,a.top+a.height,n)},Gg={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function _5(t){var e,n,r,i,o,a,s=x5(),l=w5(),c=pBe(),u=ra(ra({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:Gg.stroke,fill:(n=t.fill)!==null&&n!==void 0?n:Gg.fill,horizontal:(r=t.horizontal)!==null&&r!==void 0?r:Gg.horizontal,horizontalFill:(i=t.horizontalFill)!==null&&i!==void 0?i:Gg.horizontalFill,vertical:(o=t.vertical)!==null&&o!==void 0?o:Gg.vertical,verticalFill:(a=t.verticalFill)!==null&&a!==void 0?a:Gg.verticalFill,x:Et(t.x)?t.x:c.left,y:Et(t.y)?t.y:c.top,width:Et(t.width)?t.width:c.width,height:Et(t.height)?t.height:c.height}),f=u.x,h=u.y,p=u.width,y=u.height,g=u.syncWithTicks,v=u.horizontalValues,b=u.verticalValues,w=dBe(),T=fBe();if(!Et(p)||p<=0||!Et(y)||y<=0||!Et(f)||f!==+f||!Et(h)||h!==+h)return null;var C=u.verticalCoordinatesGenerator||C$e,P=u.horizontalCoordinatesGenerator||A$e,M=u.horizontalPoints,k=u.verticalPoints;if((!M||!M.length)&&kn(P)){var I=v&&v.length,U=P({yAxis:T?ra(ra({},T),{},{ticks:I?v:T.ticks}):void 0,width:s,height:l,offset:c},I?!0:g);id(Array.isArray(U),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(sm(U),"]")),Array.isArray(U)&&(M=U)}if((!k||!k.length)&&kn(C)){var z=b&&b.length,O=C({xAxis:w?ra(ra({},w),{},{ticks:z?b:w.ticks}):void 0,width:s,height:l,offset:c},z?!0:g);id(Array.isArray(O),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(sm(O),"]")),Array.isArray(O)&&(k=O)}return ve.createElement("g",{className:"recharts-cartesian-grid"},ve.createElement(b$e,{fill:u.fill,fillOpacity:u.fillOpacity,x:u.x,y:u.y,width:u.width,height:u.height,ry:u.ry}),ve.createElement(S$e,jp({},u,{offset:c,horizontalPoints:M,xAxis:w,yAxis:T})),ve.createElement(E$e,jp({},u,{offset:c,verticalPoints:k,xAxis:w,yAxis:T})),ve.createElement(_$e,jp({},u,{horizontalPoints:M})),ve.createElement(T$e,jp({},u,{verticalPoints:k})))}_5.displayName="CartesianGrid";var M$e=["type","layout","connectNulls","ref"],P$e=["key"];function Dv(t){"@babel/helpers - typeof";return Dv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dv(t)}function aq(t,e){if(t==null)return{};var n=k$e(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function k$e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Hw(){return Hw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Hw.apply(this,arguments)}function sq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function vs(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?sq(Object(n),!0).forEach(function(r){Yl(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function qg(t){return I$e(t)||j$e(t)||R$e(t)||N$e()}function N$e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function R$e(t,e){if(t){if(typeof t=="string")return oD(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return oD(t,e)}}function j$e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function I$e(t){if(Array.isArray(t))return oD(t)}function oD(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function O$e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function lq(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,uae(r.key),r)}}function L$e(t,e,n){return e&&lq(t.prototype,e),n&&lq(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function D$e(t,e,n){return e=NC(e),F$e(t,cae()?Reflect.construct(e,n||[],NC(t).constructor):e.apply(t,n))}function F$e(t,e){if(e&&(Dv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return z$e(t)}function z$e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function cae(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(cae=function(){return!!t})()}function NC(t){return NC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},NC(t)}function U$e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&aD(t,e)}function aD(t,e){return aD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},aD(t,e)}function Yl(t,e,n){return e=uae(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function uae(t){var e=B$e(t,"string");return Dv(e)=="symbol"?e:e+""}function B$e(t,e){if(Dv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Dv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var I0=function(t){function e(){var n;O$e(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=D$e(this,e,[].concat(i)),Yl(n,"state",{isAnimationFinished:!0,totalLength:0}),Yl(n,"generateSimpleStrokeDasharray",function(a,s){return"".concat(s,"px ").concat(a-s,"px")}),Yl(n,"getStrokeDasharray",function(a,s,l){var c=l.reduce(function(b,w){return b+w});if(!c)return n.generateSimpleStrokeDasharray(s,a);for(var u=Math.floor(a/c),f=a%c,h=s-a,p=[],y=0,g=0;y<l.length;g+=l[y],++y)if(g+l[y]>f){p=[].concat(qg(l.slice(0,y)),[f-g]);break}var v=p.length%2===0?[0,h]:[h];return[].concat(qg(e.repeat(l,u)),qg(p),v).map(function(b){return"".concat(b,"px")}).join(", ")}),Yl(n,"id",q1("recharts-line-")),Yl(n,"pathRef",function(a){n.mainCurve=a}),Yl(n,"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0}),n.props.onAnimationEnd&&n.props.onAnimationEnd()}),Yl(n,"handleAnimationStart",function(){n.setState({isAnimationFinished:!1}),n.props.onAnimationStart&&n.props.onAnimationStart()}),n}return U$e(e,t),L$e(e,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();this.setState({totalLength:r})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();r!==this.state.totalLength&&this.setState({totalLength:r})}}},{key:"getTotalLength",value:function(){var r=this.mainCurve;try{return r&&r.getTotalLength&&r.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var o=this.props,a=o.points,s=o.xAxis,l=o.yAxis,c=o.layout,u=o.children,f=il(u,Q1);if(!f)return null;var h=function(g,v){return{x:g.x,y:g.y,value:g.value,errorVal:js(g.payload,v)}},p={clipPath:r?"url(#clipPath-".concat(i,")"):null};return ve.createElement(bi,p,f.map(function(y){return ve.cloneElement(y,{key:"bar-".concat(y.props.dataKey),data:a,xAxis:s,yAxis:l,layout:c,dataPointFormatter:h})}))}},{key:"renderDots",value:function(r,i,o){var a=this.props.isAnimationActive;if(a&&!this.state.isAnimationFinished)return null;var s=this.props,l=s.dot,c=s.points,u=s.dataKey,f=Dn(this.props,!1),h=Dn(l,!0),p=c.map(function(g,v){var b=vs(vs(vs({key:"dot-".concat(v),r:3},f),h),{},{value:g.value,dataKey:u,cx:g.x,cy:g.y,index:v,payload:g.payload});return e.renderDotItem(l,b)}),y={clipPath:r?"url(#clipPath-".concat(i?"":"dots-").concat(o,")"):null};return ve.createElement(bi,Hw({className:"recharts-line-dots",key:"dots"},y),p)}},{key:"renderCurveStatically",value:function(r,i,o,a){var s=this.props,l=s.type,c=s.layout,u=s.connectNulls;s.ref;var f=aq(s,M$e),h=vs(vs(vs({},Dn(f,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:i?"url(#clipPath-".concat(o,")"):null,points:r},a),{},{type:l,layout:c,connectNulls:u});return ve.createElement(DL,Hw({},h,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(r,i){var o=this,a=this.props,s=a.points,l=a.strokeDasharray,c=a.isAnimationActive,u=a.animationBegin,f=a.animationDuration,h=a.animationEasing,p=a.animationId,y=a.animateNewValues,g=a.width,v=a.height,b=this.state,w=b.prevPoints,T=b.totalLength;return ve.createElement(yd,{begin:u,duration:f,isActive:c,easing:h,from:{t:0},to:{t:1},key:"line-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(C){var P=C.t;if(w){var M=w.length/s.length,k=s.map(function(B,$){var F=Math.floor($*M);if(w[F]){var J=w[F],K=Xl(J.x,B.x),Z=Xl(J.y,B.y);return vs(vs({},B),{},{x:K(P),y:Z(P)})}if(y){var H=Xl(g*2,B.x),Y=Xl(v/2,B.y);return vs(vs({},B),{},{x:H(P),y:Y(P)})}return vs(vs({},B),{},{x:B.x,y:B.y})});return o.renderCurveStatically(k,r,i)}var I=Xl(0,T),U=I(P),z;if(l){var O="".concat(l).split(/[,\s]+/gim).map(function(B){return parseFloat(B)});z=o.getStrokeDasharray(U,T,O)}else z=o.generateSimpleStrokeDasharray(T,U);return o.renderCurveStatically(s,r,i,{strokeDasharray:z})})}},{key:"renderCurve",value:function(r,i){var o=this.props,a=o.points,s=o.isAnimationActive,l=this.state,c=l.prevPoints,u=l.totalLength;return s&&a&&a.length&&(!c&&u>0||!qA(c,a))?this.renderCurveWithAnimation(r,i):this.renderCurveStatically(a,r,i)}},{key:"render",value:function(){var r,i=this.props,o=i.hide,a=i.dot,s=i.points,l=i.className,c=i.xAxis,u=i.yAxis,f=i.top,h=i.left,p=i.width,y=i.height,g=i.isAnimationActive,v=i.id;if(o||!s||!s.length)return null;var b=this.state.isAnimationFinished,w=s.length===1,T=Un("recharts-line",l),C=c&&c.allowDataOverflow,P=u&&u.allowDataOverflow,M=C||P,k=jn(v)?this.id:v,I=(r=Dn(a,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},U=I.r,z=U===void 0?3:U,O=I.strokeWidth,B=O===void 0?2:O,$=mNe(a)?a:{},F=$.clipDot,J=F===void 0?!0:F,K=z*2+B;return ve.createElement(bi,{className:T},C||P?ve.createElement("defs",null,ve.createElement("clipPath",{id:"clipPath-".concat(k)},ve.createElement("rect",{x:C?h:h-p/2,y:P?f:f-y/2,width:C?p:p*2,height:P?y:y*2})),!J&&ve.createElement("clipPath",{id:"clipPath-dots-".concat(k)},ve.createElement("rect",{x:h-K/2,y:f-K/2,width:p+K,height:y+K}))):null,!w&&this.renderCurve(M,k),this.renderErrorBar(M,k),(w||a)&&this.renderDots(M,J,k),(!g||b)&&Uf.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:i.curPoints}:r.points!==i.curPoints?{curPoints:r.points}:null}},{key:"repeat",value:function(r,i){for(var o=r.length%2!==0?[].concat(qg(r),[0]):r,a=[],s=0;s<i;++s)a=[].concat(qg(a),qg(o));return a}},{key:"renderDotItem",value:function(r,i){var o;if(ve.isValidElement(r))o=ve.cloneElement(r,i);else if(kn(r))o=r(i);else{var a=i.key,s=aq(i,P$e),l=Un("recharts-line-dot",typeof r!="boolean"?r.className:"");o=ve.createElement(m5,Hw({key:a},s,{className:l}))}return o}}])}(_.PureComponent);Yl(I0,"displayName","Line");Yl(I0,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!M0.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});Yl(I0,"getComposedData",function(t){var e=t.props,n=t.xAxis,r=t.yAxis,i=t.xAxisTicks,o=t.yAxisTicks,a=t.dataKey,s=t.bandSize,l=t.displayedData,c=t.offset,u=e.layout,f=l.map(function(h,p){var y=js(h,a);return u==="horizontal"?{x:S9({axis:n,ticks:i,bandSize:s,entry:h,index:p}),y:jn(y)?null:r.scale(y),value:y,payload:h}:{x:jn(y)?null:n.scale(y),y:S9({axis:r,ticks:o,bandSize:s,entry:h,index:p}),value:y,payload:h}});return vs({points:f,layout:u},c)});function Fv(t){"@babel/helpers - typeof";return Fv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fv(t)}function $$e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function H$e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,hae(r.key),r)}}function V$e(t,e,n){return e&&H$e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function W$e(t,e,n){return e=RC(e),G$e(t,dae()?Reflect.construct(e,n||[],RC(t).constructor):e.apply(t,n))}function G$e(t,e){if(e&&(Fv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return q$e(t)}function q$e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function dae(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(dae=function(){return!!t})()}function RC(t){return RC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},RC(t)}function Y$e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sD(t,e)}function sD(t,e){return sD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},sD(t,e)}function fae(t,e,n){return e=hae(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hae(t){var e=X$e(t,"string");return Fv(e)=="symbol"?e:e+""}function X$e(t,e){if(Fv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Fv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function lD(){return lD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},lD.apply(this,arguments)}function K$e(t){var e=t.xAxisId,n=x5(),r=w5(),i=Joe(e);return i==null?null:ve.createElement(j0,lD({},i,{className:Un("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(a){return Ju(a,!0)}}))}var tS=function(t){function e(){return $$e(this,e),W$e(this,e,arguments)}return Y$e(e,t),V$e(e,[{key:"render",value:function(){return ve.createElement(K$e,this.props)}}])}(ve.Component);fae(tS,"displayName","XAxis");fae(tS,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function zv(t){"@babel/helpers - typeof";return zv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zv(t)}function J$e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Z$e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,gae(r.key),r)}}function Q$e(t,e,n){return e&&Z$e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function e6e(t,e,n){return e=jC(e),t6e(t,pae()?Reflect.construct(e,n||[],jC(t).constructor):e.apply(t,n))}function t6e(t,e){if(e&&(zv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return n6e(t)}function n6e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function pae(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(pae=function(){return!!t})()}function jC(t){return jC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},jC(t)}function r6e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&cD(t,e)}function cD(t,e){return cD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},cD(t,e)}function mae(t,e,n){return e=gae(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gae(t){var e=i6e(t,"string");return zv(e)=="symbol"?e:e+""}function i6e(t,e){if(zv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(zv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function uD(){return uD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},uD.apply(this,arguments)}var o6e=function(e){var n=e.yAxisId,r=x5(),i=w5(),o=Zoe(n);return o==null?null:ve.createElement(j0,uD({},o,{className:Un("recharts-".concat(o.axisType," ").concat(o.axisType),o.className),viewBox:{x:0,y:0,width:r,height:i},ticksGenerator:function(s){return Ju(s,!0)}}))},nS=function(t){function e(){return J$e(this,e),e6e(this,e,arguments)}return r6e(e,t),Q$e(e,[{key:"render",value:function(){return ve.createElement(o6e,this.props)}}])}(ve.Component);mae(nS,"displayName","YAxis");mae(nS,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function cq(t){return c6e(t)||l6e(t)||s6e(t)||a6e()}function a6e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function s6e(t,e){if(t){if(typeof t=="string")return dD(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dD(t,e)}}function l6e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function c6e(t){if(Array.isArray(t))return dD(t)}function dD(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var fD=function(e,n,r,i,o){var a=il(e,Jb),s=il(e,e2),l=[].concat(cq(a),cq(s)),c=il(e,Wp),u="".concat(i,"Id"),f=i[0],h=n;if(l.length&&(h=l.reduce(function(g,v){if(v.props[u]===r&&Wc(v.props,"extendDomain")&&Et(v.props[f])){var b=v.props[f];return[Math.min(g[0],b),Math.max(g[1],b)]}return g},h)),c.length){var p="".concat(f,"1"),y="".concat(f,"2");h=c.reduce(function(g,v){if(v.props[u]===r&&Wc(v.props,"extendDomain")&&Et(v.props[p])&&Et(v.props[y])){var b=v.props[p],w=v.props[y];return[Math.min(g[0],b,w),Math.max(g[1],b,w)]}return g},h)}return o&&o.length&&(h=o.reduce(function(g,v){return Et(v)?[Math.min(g[0],v),Math.max(g[1],v)]:g},h)),h},yj={exports:{}},uq;function u6e(){return uq||(uq=1,function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(l,c,u){this.fn=l,this.context=c,this.once=u||!1}function o(l,c,u,f,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var p=new i(u,f||l,h),y=n?n+c:c;return l._events[y]?l._events[y].fn?l._events[y]=[l._events[y],p]:l._events[y].push(p):(l._events[y]=p,l._eventsCount++),l}function a(l,c){--l._eventsCount===0?l._events=new r:delete l._events[c]}function s(){this._events=new r,this._eventsCount=0}s.prototype.eventNames=function(){var c=[],u,f;if(this._eventsCount===0)return c;for(f in u=this._events)e.call(u,f)&&c.push(n?f.slice(1):f);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(u)):c},s.prototype.listeners=function(c){var u=n?n+c:c,f=this._events[u];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,p=f.length,y=new Array(p);h<p;h++)y[h]=f[h].fn;return y},s.prototype.listenerCount=function(c){var u=n?n+c:c,f=this._events[u];return f?f.fn?1:f.length:0},s.prototype.emit=function(c,u,f,h,p,y){var g=n?n+c:c;if(!this._events[g])return!1;var v=this._events[g],b=arguments.length,w,T;if(v.fn){switch(v.once&&this.removeListener(c,v.fn,void 0,!0),b){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,u),!0;case 3:return v.fn.call(v.context,u,f),!0;case 4:return v.fn.call(v.context,u,f,h),!0;case 5:return v.fn.call(v.context,u,f,h,p),!0;case 6:return v.fn.call(v.context,u,f,h,p,y),!0}for(T=1,w=new Array(b-1);T<b;T++)w[T-1]=arguments[T];v.fn.apply(v.context,w)}else{var C=v.length,P;for(T=0;T<C;T++)switch(v[T].once&&this.removeListener(c,v[T].fn,void 0,!0),b){case 1:v[T].fn.call(v[T].context);break;case 2:v[T].fn.call(v[T].context,u);break;case 3:v[T].fn.call(v[T].context,u,f);break;case 4:v[T].fn.call(v[T].context,u,f,h);break;default:if(!w)for(P=1,w=new Array(b-1);P<b;P++)w[P-1]=arguments[P];v[T].fn.apply(v[T].context,w)}}return!0},s.prototype.on=function(c,u,f){return o(this,c,u,f,!1)},s.prototype.once=function(c,u,f){return o(this,c,u,f,!0)},s.prototype.removeListener=function(c,u,f,h){var p=n?n+c:c;if(!this._events[p])return this;if(!u)return a(this,p),this;var y=this._events[p];if(y.fn)y.fn===u&&(!h||y.once)&&(!f||y.context===f)&&a(this,p);else{for(var g=0,v=[],b=y.length;g<b;g++)(y[g].fn!==u||h&&!y[g].once||f&&y[g].context!==f)&&v.push(y[g]);v.length?this._events[p]=v.length===1?v[0]:v:a(this,p)}return this},s.prototype.removeAllListeners=function(c){var u;return c?(u=n?n+c:c,this._events[u]&&a(this,u)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,t.exports=s}(yj)),yj.exports}var d6e=u6e();const f6e=$n(d6e);var vj=new f6e,xj="recharts.syncMouseEvents";function Qb(t){"@babel/helpers - typeof";return Qb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qb(t)}function h6e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p6e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,yae(r.key),r)}}function m6e(t,e,n){return e&&p6e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function wj(t,e,n){return e=yae(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yae(t){var e=g6e(t,"string");return Qb(e)=="symbol"?e:e+""}function g6e(t,e){if(Qb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Qb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var y6e=function(){function t(){h6e(this,t),wj(this,"activeIndex",0),wj(this,"coordinateList",[]),wj(this,"layout","horizontal")}return m6e(t,[{key:"setDetails",value:function(n){var r,i=n.coordinateList,o=i===void 0?null:i,a=n.container,s=a===void 0?null:a,l=n.layout,c=l===void 0?null:l,u=n.offset,f=u===void 0?null:u,h=n.mouseHandlerCallback,p=h===void 0?null:h;this.coordinateList=(r=o??this.coordinateList)!==null&&r!==void 0?r:[],this.container=s??this.container,this.layout=c??this.layout,this.offset=f??this.offset,this.mouseHandlerCallback=p??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),o=i.x,a=i.y,s=i.height,l=this.coordinateList[this.activeIndex].coordinate,c=((n=window)===null||n===void 0?void 0:n.scrollX)||0,u=((r=window)===null||r===void 0?void 0:r.scrollY)||0,f=o+l+c,h=a+this.offset.top+s/2+u;this.mouseHandlerCallback({pageX:f,pageY:h})}}}])}();function v6e(t,e,n){if(n==="number"&&e===!0&&Array.isArray(t)){var r=t==null?void 0:t[0],i=t==null?void 0:t[1];if(r&&i&&Et(r)&&Et(i))return!0}return!1}function x6e(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function vae(t){var e=t.cx,n=t.cy,r=t.radius,i=t.startAngle,o=t.endAngle,a=Ho(e,n,r,i),s=Ho(e,n,r,o);return{points:[a,s],cx:e,cy:n,radius:r,startAngle:i,endAngle:o}}function w6e(t,e,n){var r,i,o,a;if(t==="horizontal")r=e.x,o=r,i=n.top,a=n.top+n.height;else if(t==="vertical")i=e.y,a=i,r=n.left,o=n.left+n.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var s=e.cx,l=e.cy,c=e.innerRadius,u=e.outerRadius,f=e.angle,h=Ho(s,l,c,f),p=Ho(s,l,u,f);r=h.x,i=h.y,o=p.x,a=p.y}else return vae(e);return[{x:r,y:i},{x:o,y:a}]}function e1(t){"@babel/helpers - typeof";return e1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e1(t)}function dq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function KE(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dq(Object(n),!0).forEach(function(r){b6e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function b6e(t,e,n){return e=S6e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function S6e(t){var e=E6e(t,"string");return e1(e)=="symbol"?e:e+""}function E6e(t,e){if(e1(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(e1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _6e(t){var e,n,r=t.element,i=t.tooltipEventType,o=t.isActive,a=t.activeCoordinate,s=t.activePayload,l=t.offset,c=t.activeTooltipIndex,u=t.tooltipAxisBandSize,f=t.layout,h=t.chartName,p=(e=r.props.cursor)!==null&&e!==void 0?e:(n=r.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!r||!p||!o||!a||h!=="ScatterChart"&&i!=="axis")return null;var y,g=DL;if(h==="ScatterChart")y=a,g=bze;else if(h==="BarChart")y=x6e(f,a,l,u),g=p5;else if(f==="radial"){var v=vae(a),b=v.cx,w=v.cy,T=v.radius,C=v.startAngle,P=v.endAngle;y={cx:b,cy:w,startAngle:C,endAngle:P,innerRadius:T,outerRadius:T},g=Coe}else y={points:w6e(f,a,l)},g=DL;var M=KE(KE(KE(KE({stroke:"#ccc",pointerEvents:"none"},l),y),Dn(p,!1)),{},{payload:s,payloadIndex:c,className:Un("recharts-tooltip-cursor",p.className)});return _.isValidElement(p)?_.cloneElement(p,M):_.createElement(g,M)}var T6e=["item"],C6e=["children","className","width","height","style","compact","title","desc"];function Uv(t){"@babel/helpers - typeof";return Uv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Uv(t)}function Vw(){return Vw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Vw.apply(this,arguments)}function fq(t,e){return P6e(t)||M6e(t,e)||wae(t,e)||A6e()}function A6e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function M6e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}function P6e(t){if(Array.isArray(t))return t}function hq(t,e){if(t==null)return{};var n=k6e(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function k6e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function N6e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function R6e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,bae(r.key),r)}}function j6e(t,e,n){return e&&R6e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function I6e(t,e,n){return e=IC(e),O6e(t,xae()?Reflect.construct(e,n||[],IC(t).constructor):e.apply(t,n))}function O6e(t,e){if(e&&(Uv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return L6e(t)}function L6e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function xae(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(xae=function(){return!!t})()}function IC(t){return IC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},IC(t)}function D6e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hD(t,e)}function hD(t,e){return hD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},hD(t,e)}function Bv(t){return U6e(t)||z6e(t)||wae(t)||F6e()}function F6e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wae(t,e){if(t){if(typeof t=="string")return pD(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pD(t,e)}}function z6e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function U6e(t){if(Array.isArray(t))return pD(t)}function pD(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function pq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function nt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?pq(Object(n),!0).forEach(function(r){tn(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function tn(t,e,n){return e=bae(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bae(t){var e=B6e(t,"string");return Uv(e)=="symbol"?e:e+""}function B6e(t,e){if(Uv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Uv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var $6e={xAxis:["bottom","top"],yAxis:["left","right"]},H6e={width:"100%",height:"100%"},Sae={x:0,y:0};function JE(t){return t}var V6e=function(e,n){return n==="horizontal"?e.x:n==="vertical"?e.y:n==="centric"?e.angle:e.radius},W6e=function(e,n,r,i){var o=n.find(function(u){return u&&u.index===r});if(o){if(e==="horizontal")return{x:o.coordinate,y:i.y};if(e==="vertical")return{x:i.x,y:o.coordinate};if(e==="centric"){var a=o.coordinate,s=i.radius;return nt(nt(nt({},i),Ho(i.cx,i.cy,s,a)),{},{angle:a,radius:s})}var l=o.coordinate,c=i.angle;return nt(nt(nt({},i),Ho(i.cx,i.cy,l,c)),{},{angle:c,radius:l})}return Sae},n2=function(e,n){var r=n.graphicalItems,i=n.dataStartIndex,o=n.dataEndIndex,a=(r??[]).reduce(function(s,l){var c=l.props.data;return c&&c.length?[].concat(Bv(s),Bv(c)):s},[]);return a.length>0?a:e&&e.length&&Et(i)&&Et(o)?e.slice(i,o+1):[]};function Eae(t){return t==="number"?[0,"auto"]:void 0}var mD=function(e,n,r,i){var o=e.graphicalItems,a=e.tooltipAxis,s=n2(n,e);return r<0||!o||!o.length||r>=s.length?null:o.reduce(function(l,c){var u,f=(u=c.props.data)!==null&&u!==void 0?u:n;f&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=r&&(f=f.slice(e.dataStartIndex,e.dataEndIndex+1));var h;if(a.dataKey&&!a.allowDuplicatedCategory){var p=f===void 0?s:f;h=FT(p,a.dataKey,i)}else h=f&&f[r]||s[r];return h?[].concat(Bv(l),[Eoe(c,h)]):l},[])},mq=function(e,n,r,i){var o=i||{x:e.chartX,y:e.chartY},a=V6e(o,r),s=e.orderedTooltipTicks,l=e.tooltipAxis,c=e.tooltipTicks,u=p4e(a,s,c,l);if(u>=0&&c){var f=c[u]&&c[u].value,h=mD(e,n,u,f),p=W6e(r,s,u,o);return{activeTooltipIndex:u,activeLabel:f,activePayload:h,activeCoordinate:p}}return null},G6e=function(e,n){var r=n.axes,i=n.graphicalItems,o=n.axisType,a=n.axisIdKey,s=n.stackGroups,l=n.dataStartIndex,c=n.dataEndIndex,u=e.layout,f=e.children,h=e.stackOffset,p=woe(u,o);return r.reduce(function(y,g){var v,b=g.type.defaultProps!==void 0?nt(nt({},g.type.defaultProps),g.props):g.props,w=b.type,T=b.dataKey,C=b.allowDataOverflow,P=b.allowDuplicatedCategory,M=b.scale,k=b.ticks,I=b.includeHidden,U=b[a];if(y[U])return y;var z=n2(e.data,{graphicalItems:i.filter(function(V){var W,ne=a in V.props?V.props[a]:(W=V.type.defaultProps)===null||W===void 0?void 0:W[a];return ne===U}),dataStartIndex:l,dataEndIndex:c}),O=z.length,B,$,F;v6e(b.domain,C,w)&&(B=RL(b.domain,null,C),p&&(w==="number"||M!=="auto")&&(F=Bw(z,T,"category")));var J=Eae(w);if(!B||B.length===0){var K,Z=(K=b.domain)!==null&&K!==void 0?K:J;if(T){if(B=Bw(z,T,w),w==="category"&&p){var H=aNe(B);P&&H?($=B,B=bC(0,O)):P||(B=C9(Z,B,g).reduce(function(V,W){return V.indexOf(W)>=0?V:[].concat(Bv(V),[W])},[]))}else if(w==="category")P?B=B.filter(function(V){return V!==""&&!jn(V)}):B=C9(Z,B,g).reduce(function(V,W){return V.indexOf(W)>=0||W===""||jn(W)?V:[].concat(Bv(V),[W])},[]);else if(w==="number"){var Y=x4e(z,i.filter(function(V){var W,ne,se=a in V.props?V.props[a]:(W=V.type.defaultProps)===null||W===void 0?void 0:W[a],te="hide"in V.props?V.props.hide:(ne=V.type.defaultProps)===null||ne===void 0?void 0:ne.hide;return se===U&&(I||!te)}),T,o,u);Y&&(B=Y)}p&&(w==="number"||M!=="auto")&&(F=Bw(z,T,"category"))}else p?B=bC(0,O):s&&s[U]&&s[U].hasStack&&w==="number"?B=h==="expand"?[0,1]:Soe(s[U].stackGroups,l,c):B=xoe(z,i.filter(function(V){var W=a in V.props?V.props[a]:V.type.defaultProps[a],ne="hide"in V.props?V.props.hide:V.type.defaultProps.hide;return W===U&&(I||!ne)}),w,u,!0);if(w==="number")B=fD(f,B,U,o,k),Z&&(B=RL(Z,B,C));else if(w==="category"&&Z){var L=Z,N=B.every(function(V){return L.indexOf(V)>=0});N&&(B=L)}}return nt(nt({},y),{},tn({},U,nt(nt({},b),{},{axisType:o,domain:B,categoricalDomain:F,duplicateDomain:$,originalDomain:(v=b.domain)!==null&&v!==void 0?v:J,isCategorical:p,layout:u})))},{})},q6e=function(e,n){var r=n.graphicalItems,i=n.Axis,o=n.axisType,a=n.axisIdKey,s=n.stackGroups,l=n.dataStartIndex,c=n.dataEndIndex,u=e.layout,f=e.children,h=n2(e.data,{graphicalItems:r,dataStartIndex:l,dataEndIndex:c}),p=h.length,y=woe(u,o),g=-1;return r.reduce(function(v,b){var w=b.type.defaultProps!==void 0?nt(nt({},b.type.defaultProps),b.props):b.props,T=w[a],C=Eae("number");if(!v[T]){g++;var P;return y?P=bC(0,p):s&&s[T]&&s[T].hasStack?(P=Soe(s[T].stackGroups,l,c),P=fD(f,P,T,o)):(P=RL(C,xoe(h,r.filter(function(M){var k,I,U=a in M.props?M.props[a]:(k=M.type.defaultProps)===null||k===void 0?void 0:k[a],z="hide"in M.props?M.props.hide:(I=M.type.defaultProps)===null||I===void 0?void 0:I.hide;return U===T&&!z}),"number",u),i.defaultProps.allowDataOverflow),P=fD(f,P,T,o)),nt(nt({},v),{},tn({},T,nt(nt({axisType:o},i.defaultProps),{},{hide:!0,orientation:rl($6e,"".concat(o,".").concat(g%2),null),domain:P,originalDomain:C,isCategorical:y,layout:u})))}return v},{})},Y6e=function(e,n){var r=n.axisType,i=r===void 0?"xAxis":r,o=n.AxisComp,a=n.graphicalItems,s=n.stackGroups,l=n.dataStartIndex,c=n.dataEndIndex,u=e.children,f="".concat(i,"Id"),h=il(u,o),p={};return h&&h.length?p=G6e(e,{axes:h,graphicalItems:a,axisType:i,axisIdKey:f,stackGroups:s,dataStartIndex:l,dataEndIndex:c}):a&&a.length&&(p=q6e(e,{Axis:o,graphicalItems:a,axisType:i,axisIdKey:f,stackGroups:s,dataStartIndex:l,dataEndIndex:c})),p},X6e=function(e){var n=kf(e),r=Ju(n,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:BF(r,function(i){return i.coordinate}),tooltipAxis:n,tooltipAxisBandSize:dC(n,r)}},gq=function(e){var n=e.children,r=e.defaultShowTooltip,i=Ts(n,Nv),o=0,a=0;return e.data&&e.data.length!==0&&(a=e.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(o=i.props.startIndex),i.props.endIndex>=0&&(a=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:o,dataEndIndex:a,activeTooltipIndex:-1,isTooltipActive:!!r}},K6e=function(e){return!e||!e.length?!1:e.some(function(n){var r=rd(n&&n.type);return r&&r.indexOf("Bar")>=0})},yq=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},J6e=function(e,n){var r=e.props,i=e.graphicalItems,o=e.xAxisMap,a=o===void 0?{}:o,s=e.yAxisMap,l=s===void 0?{}:s,c=r.width,u=r.height,f=r.children,h=r.margin||{},p=Ts(f,Nv),y=Ts(f,Qy),g=Object.keys(l).reduce(function(P,M){var k=l[M],I=k.orientation;return!k.mirror&&!k.hide?nt(nt({},P),{},tn({},I,P[I]+k.width)):P},{left:h.left||0,right:h.right||0}),v=Object.keys(a).reduce(function(P,M){var k=a[M],I=k.orientation;return!k.mirror&&!k.hide?nt(nt({},P),{},tn({},I,rl(P,"".concat(I))+k.height)):P},{top:h.top||0,bottom:h.bottom||0}),b=nt(nt({},v),g),w=b.bottom;p&&(b.bottom+=p.props.height||Nv.defaultProps.height),y&&n&&(b=y4e(b,i,r,n));var T=c-b.left-b.right,C=u-b.top-b.bottom;return nt(nt({brushBottom:w},b),{},{width:Math.max(T,0),height:Math.max(C,0)})},Z6e=function(e,n){if(n==="xAxis")return e[n].width;if(n==="yAxis")return e[n].height},Q6e=function(e){var n=e.chartName,r=e.GraphicalChild,i=e.defaultTooltipEventType,o=i===void 0?"axis":i,a=e.validateTooltipEventTypes,s=a===void 0?["axis"]:a,l=e.axisComponents,c=e.legendContent,u=e.formatAxisMap,f=e.defaultProps,h=function(v,b){var w=b.graphicalItems,T=b.stackGroups,C=b.offset,P=b.updateId,M=b.dataStartIndex,k=b.dataEndIndex,I=v.barSize,U=v.layout,z=v.barGap,O=v.barCategoryGap,B=v.maxBarSize,$=yq(U),F=$.numericAxisName,J=$.cateAxisName,K=K6e(w),Z=[];return w.forEach(function(H,Y){var L=n2(v.data,{graphicalItems:[H],dataStartIndex:M,dataEndIndex:k}),N=H.type.defaultProps!==void 0?nt(nt({},H.type.defaultProps),H.props):H.props,V=N.dataKey,W=N.maxBarSize,ne=N["".concat(F,"Id")],se=N["".concat(J,"Id")],te={},ie=l.reduce(function(me,ye){var Ie=b["".concat(ye.axisType,"Map")],De=N["".concat(ye.axisType,"Id")];Ie&&Ie[De]||ye.axisType==="zAxis"||am();var Ue=Ie[De];return nt(nt({},me),{},tn(tn({},ye.axisType,Ue),"".concat(ye.axisType,"Ticks"),Ju(Ue)))},te),pe=ie[J],de=ie["".concat(J,"Ticks")],ce=T&&T[ne]&&T[ne].hasStack&&N4e(H,T[ne].stackGroups),he=rd(H.type).indexOf("Bar")>=0,ee=dC(pe,de),xe=[],be=K&&m4e({barSize:I,stackGroups:T,totalSize:Z6e(ie,J)});if(he){var Ae,Ce,oe=jn(W)?B:W,ae=(Ae=(Ce=dC(pe,de,!0))!==null&&Ce!==void 0?Ce:oe)!==null&&Ae!==void 0?Ae:0;xe=g4e({barGap:z,barCategoryGap:O,bandSize:ae!==ee?ae:ee,sizeList:be[se],maxBarSize:oe}),ae!==ee&&(xe=xe.map(function(me){return nt(nt({},me),{},{position:nt(nt({},me.position),{},{offset:me.position.offset-ae/2})})}))}var Se=H&&H.type&&H.type.getComposedData;Se&&Z.push({props:nt(nt({},Se(nt(nt({},ie),{},{displayedData:L,props:v,dataKey:V,item:H,bandSize:ee,barPosition:xe,offset:C,stackedData:ce,layout:U,dataStartIndex:M,dataEndIndex:k}))),{},tn(tn(tn({key:H.key||"item-".concat(Y)},F,ie[F]),J,ie[J]),"animationId",P)),childIndex:vNe(H,v.children),item:H})}),Z},p=function(v,b){var w=v.props,T=v.dataStartIndex,C=v.dataEndIndex,P=v.updateId;if(!UH({props:w}))return null;var M=w.children,k=w.layout,I=w.stackOffset,U=w.data,z=w.reverseStackOrder,O=yq(k),B=O.numericAxisName,$=O.cateAxisName,F=il(M,r),J=M4e(U,F,"".concat(B,"Id"),"".concat($,"Id"),I,z),K=l.reduce(function(N,V){var W="".concat(V.axisType,"Map");return nt(nt({},N),{},tn({},W,Y6e(w,nt(nt({},V),{},{graphicalItems:F,stackGroups:V.axisType===B&&J,dataStartIndex:T,dataEndIndex:C}))))},{}),Z=J6e(nt(nt({},K),{},{props:w,graphicalItems:F}),b==null?void 0:b.legendBBox);Object.keys(K).forEach(function(N){K[N]=u(w,K[N],Z,N.replace("Map",""),n)});var H=K["".concat($,"Map")],Y=X6e(H),L=h(w,nt(nt({},K),{},{dataStartIndex:T,dataEndIndex:C,updateId:P,graphicalItems:F,stackGroups:J,offset:Z}));return nt(nt({formattedGraphicalItems:L,graphicalItems:F,offset:Z,stackGroups:J},Y),K)},y=function(g){function v(b){var w,T,C;return N6e(this,v),C=I6e(this,v,[b]),tn(C,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),tn(C,"accessibilityManager",new y6e),tn(C,"handleLegendBBoxUpdate",function(P){if(P){var M=C.state,k=M.dataStartIndex,I=M.dataEndIndex,U=M.updateId;C.setState(nt({legendBBox:P},p({props:C.props,dataStartIndex:k,dataEndIndex:I,updateId:U},nt(nt({},C.state),{},{legendBBox:P}))))}}),tn(C,"handleReceiveSyncEvent",function(P,M,k){if(C.props.syncId===P){if(k===C.eventEmitterSymbol&&typeof C.props.syncMethod!="function")return;C.applySyncEvent(M)}}),tn(C,"handleBrushChange",function(P){var M=P.startIndex,k=P.endIndex;if(M!==C.state.dataStartIndex||k!==C.state.dataEndIndex){var I=C.state.updateId;C.setState(function(){return nt({dataStartIndex:M,dataEndIndex:k},p({props:C.props,dataStartIndex:M,dataEndIndex:k,updateId:I},C.state))}),C.triggerSyncEvent({dataStartIndex:M,dataEndIndex:k})}}),tn(C,"handleMouseEnter",function(P){var M=C.getMouseInfo(P);if(M){var k=nt(nt({},M),{},{isTooltipActive:!0});C.setState(k),C.triggerSyncEvent(k);var I=C.props.onMouseEnter;kn(I)&&I(k,P)}}),tn(C,"triggeredAfterMouseMove",function(P){var M=C.getMouseInfo(P),k=M?nt(nt({},M),{},{isTooltipActive:!0}):{isTooltipActive:!1};C.setState(k),C.triggerSyncEvent(k);var I=C.props.onMouseMove;kn(I)&&I(k,P)}),tn(C,"handleItemMouseEnter",function(P){C.setState(function(){return{isTooltipActive:!0,activeItem:P,activePayload:P.tooltipPayload,activeCoordinate:P.tooltipPosition||{x:P.cx,y:P.cy}}})}),tn(C,"handleItemMouseLeave",function(){C.setState(function(){return{isTooltipActive:!1}})}),tn(C,"handleMouseMove",function(P){P.persist(),C.throttleTriggeredAfterMouseMove(P)}),tn(C,"handleMouseLeave",function(P){C.throttleTriggeredAfterMouseMove.cancel();var M={isTooltipActive:!1};C.setState(M),C.triggerSyncEvent(M);var k=C.props.onMouseLeave;kn(k)&&k(M,P)}),tn(C,"handleOuterEvent",function(P){var M=yNe(P),k=rl(C.props,"".concat(M));if(M&&kn(k)){var I,U;/.*touch.*/i.test(M)?U=C.getMouseInfo(P.changedTouches[0]):U=C.getMouseInfo(P),k((I=U)!==null&&I!==void 0?I:{},P)}}),tn(C,"handleClick",function(P){var M=C.getMouseInfo(P);if(M){var k=nt(nt({},M),{},{isTooltipActive:!0});C.setState(k),C.triggerSyncEvent(k);var I=C.props.onClick;kn(I)&&I(k,P)}}),tn(C,"handleMouseDown",function(P){var M=C.props.onMouseDown;if(kn(M)){var k=C.getMouseInfo(P);M(k,P)}}),tn(C,"handleMouseUp",function(P){var M=C.props.onMouseUp;if(kn(M)){var k=C.getMouseInfo(P);M(k,P)}}),tn(C,"handleTouchMove",function(P){P.changedTouches!=null&&P.changedTouches.length>0&&C.throttleTriggeredAfterMouseMove(P.changedTouches[0])}),tn(C,"handleTouchStart",function(P){P.changedTouches!=null&&P.changedTouches.length>0&&C.handleMouseDown(P.changedTouches[0])}),tn(C,"handleTouchEnd",function(P){P.changedTouches!=null&&P.changedTouches.length>0&&C.handleMouseUp(P.changedTouches[0])}),tn(C,"triggerSyncEvent",function(P){C.props.syncId!==void 0&&vj.emit(xj,C.props.syncId,P,C.eventEmitterSymbol)}),tn(C,"applySyncEvent",function(P){var M=C.props,k=M.layout,I=M.syncMethod,U=C.state.updateId,z=P.dataStartIndex,O=P.dataEndIndex;if(P.dataStartIndex!==void 0||P.dataEndIndex!==void 0)C.setState(nt({dataStartIndex:z,dataEndIndex:O},p({props:C.props,dataStartIndex:z,dataEndIndex:O,updateId:U},C.state)));else if(P.activeTooltipIndex!==void 0){var B=P.chartX,$=P.chartY,F=P.activeTooltipIndex,J=C.state,K=J.offset,Z=J.tooltipTicks;if(!K)return;if(typeof I=="function")F=I(Z,P);else if(I==="value"){F=-1;for(var H=0;H<Z.length;H++)if(Z[H].value===P.activeLabel){F=H;break}}var Y=nt(nt({},K),{},{x:K.left,y:K.top}),L=Math.min(B,Y.x+Y.width),N=Math.min($,Y.y+Y.height),V=Z[F]&&Z[F].value,W=mD(C.state,C.props.data,F),ne=Z[F]?{x:k==="horizontal"?Z[F].coordinate:L,y:k==="horizontal"?N:Z[F].coordinate}:Sae;C.setState(nt(nt({},P),{},{activeLabel:V,activeCoordinate:ne,activePayload:W,activeTooltipIndex:F}))}else C.setState(P)}),tn(C,"renderCursor",function(P){var M,k=C.state,I=k.isTooltipActive,U=k.activeCoordinate,z=k.activePayload,O=k.offset,B=k.activeTooltipIndex,$=k.tooltipAxisBandSize,F=C.getTooltipEventType(),J=(M=P.props.active)!==null&&M!==void 0?M:I,K=C.props.layout,Z=P.key||"_recharts-cursor";return ve.createElement(_6e,{key:Z,activeCoordinate:U,activePayload:z,activeTooltipIndex:B,chartName:n,element:P,isActive:J,layout:K,offset:O,tooltipAxisBandSize:$,tooltipEventType:F})}),tn(C,"renderPolarAxis",function(P,M,k){var I=rl(P,"type.axisType"),U=rl(C.state,"".concat(I,"Map")),z=P.type.defaultProps,O=z!==void 0?nt(nt({},z),P.props):P.props,B=U&&U[O["".concat(I,"Id")]];return _.cloneElement(P,nt(nt({},B),{},{className:Un(I,B.className),key:P.key||"".concat(M,"-").concat(k),ticks:Ju(B,!0)}))}),tn(C,"renderPolarGrid",function(P){var M=P.props,k=M.radialLines,I=M.polarAngles,U=M.polarRadius,z=C.state,O=z.radiusAxisMap,B=z.angleAxisMap,$=kf(O),F=kf(B),J=F.cx,K=F.cy,Z=F.innerRadius,H=F.outerRadius;return _.cloneElement(P,{polarAngles:Array.isArray(I)?I:Ju(F,!0).map(function(Y){return Y.coordinate}),polarRadius:Array.isArray(U)?U:Ju($,!0).map(function(Y){return Y.coordinate}),cx:J,cy:K,innerRadius:Z,outerRadius:H,key:P.key||"polar-grid",radialLines:k})}),tn(C,"renderLegend",function(){var P=C.state.formattedGraphicalItems,M=C.props,k=M.children,I=M.width,U=M.height,z=C.props.margin||{},O=I-(z.left||0)-(z.right||0),B=yoe({children:k,formattedGraphicalItems:P,legendWidth:O,legendContent:c});if(!B)return null;var $=B.item,F=hq(B,T6e);return _.cloneElement($,nt(nt({},F),{},{chartWidth:I,chartHeight:U,margin:z,onBBoxUpdate:C.handleLegendBBoxUpdate}))}),tn(C,"renderTooltip",function(){var P,M=C.props,k=M.children,I=M.accessibilityLayer,U=Ts(k,Gl);if(!U)return null;var z=C.state,O=z.isTooltipActive,B=z.activeCoordinate,$=z.activePayload,F=z.activeLabel,J=z.offset,K=(P=U.props.active)!==null&&P!==void 0?P:O;return _.cloneElement(U,{viewBox:nt(nt({},J),{},{x:J.left,y:J.top}),active:K,label:F,payload:K?$:[],coordinate:B,accessibilityLayer:I})}),tn(C,"renderBrush",function(P){var M=C.props,k=M.margin,I=M.data,U=C.state,z=U.offset,O=U.dataStartIndex,B=U.dataEndIndex,$=U.updateId;return _.cloneElement(P,{key:P.key||"_recharts-brush",onChange:GE(C.handleBrushChange,P.props.onChange),data:I,x:Et(P.props.x)?P.props.x:z.left,y:Et(P.props.y)?P.props.y:z.top+z.height+z.brushBottom-(k.bottom||0),width:Et(P.props.width)?P.props.width:z.width,startIndex:O,endIndex:B,updateId:"brush-".concat($)})}),tn(C,"renderReferenceElement",function(P,M,k){if(!P)return null;var I=C,U=I.clipPathId,z=C.state,O=z.xAxisMap,B=z.yAxisMap,$=z.offset,F=P.type.defaultProps||{},J=P.props,K=J.xAxisId,Z=K===void 0?F.xAxisId:K,H=J.yAxisId,Y=H===void 0?F.yAxisId:H;return _.cloneElement(P,{key:P.key||"".concat(M,"-").concat(k),xAxis:O[Z],yAxis:B[Y],viewBox:{x:$.left,y:$.top,width:$.width,height:$.height},clipPathId:U})}),tn(C,"renderActivePoints",function(P){var M=P.item,k=P.activePoint,I=P.basePoint,U=P.childIndex,z=P.isRange,O=[],B=M.props.key,$=M.item.type.defaultProps!==void 0?nt(nt({},M.item.type.defaultProps),M.item.props):M.item.props,F=$.activeDot,J=$.dataKey,K=nt(nt({index:U,dataKey:J,cx:k.x,cy:k.y,r:4,fill:h5(M.item),strokeWidth:2,stroke:"#fff",payload:k.payload,value:k.value},Dn(F,!1)),zT(F));return O.push(v.renderActiveDot(F,K,"".concat(B,"-activePoint-").concat(U))),I?O.push(v.renderActiveDot(F,nt(nt({},K),{},{cx:I.x,cy:I.y}),"".concat(B,"-basePoint-").concat(U))):z&&O.push(null),O}),tn(C,"renderGraphicChild",function(P,M,k){var I=C.filterFormatItem(P,M,k);if(!I)return null;var U=C.getTooltipEventType(),z=C.state,O=z.isTooltipActive,B=z.tooltipAxis,$=z.activeTooltipIndex,F=z.activeLabel,J=C.props.children,K=Ts(J,Gl),Z=I.props,H=Z.points,Y=Z.isRange,L=Z.baseLine,N=I.item.type.defaultProps!==void 0?nt(nt({},I.item.type.defaultProps),I.item.props):I.item.props,V=N.activeDot,W=N.hide,ne=N.activeBar,se=N.activeShape,te=!!(!W&&O&&K&&(V||ne||se)),ie={};U!=="axis"&&K&&K.props.trigger==="click"?ie={onClick:GE(C.handleItemMouseEnter,P.props.onClick)}:U!=="axis"&&(ie={onMouseLeave:GE(C.handleItemMouseLeave,P.props.onMouseLeave),onMouseEnter:GE(C.handleItemMouseEnter,P.props.onMouseEnter)});var pe=_.cloneElement(P,nt(nt({},I.props),ie));function de(ye){return typeof B.dataKey=="function"?B.dataKey(ye.payload):null}if(te)if($>=0){var ce,he;if(B.dataKey&&!B.allowDuplicatedCategory){var ee=typeof B.dataKey=="function"?de:"payload.".concat(B.dataKey.toString());ce=FT(H,ee,F),he=Y&&L&&FT(L,ee,F)}else ce=H==null?void 0:H[$],he=Y&&L&&L[$];if(se||ne){var xe=P.props.activeIndex!==void 0?P.props.activeIndex:$;return[_.cloneElement(P,nt(nt(nt({},I.props),ie),{},{activeIndex:xe})),null,null]}if(!jn(ce))return[pe].concat(Bv(C.renderActivePoints({item:I,activePoint:ce,basePoint:he,childIndex:$,isRange:Y})))}else{var be,Ae=(be=C.getItemByXY(C.state.activeCoordinate))!==null&&be!==void 0?be:{graphicalItem:pe},Ce=Ae.graphicalItem,oe=Ce.item,ae=oe===void 0?P:oe,Se=Ce.childIndex,me=nt(nt(nt({},I.props),ie),{},{activeIndex:Se});return[_.cloneElement(ae,me),null,null]}return Y?[pe,null,null]:[pe,null]}),tn(C,"renderCustomized",function(P,M,k){return _.cloneElement(P,nt(nt({key:"recharts-customized-".concat(k)},C.props),C.state))}),tn(C,"renderMap",{CartesianGrid:{handler:JE,once:!0},ReferenceArea:{handler:C.renderReferenceElement},ReferenceLine:{handler:JE},ReferenceDot:{handler:C.renderReferenceElement},XAxis:{handler:JE},YAxis:{handler:JE},Brush:{handler:C.renderBrush,once:!0},Bar:{handler:C.renderGraphicChild},Line:{handler:C.renderGraphicChild},Area:{handler:C.renderGraphicChild},Radar:{handler:C.renderGraphicChild},RadialBar:{handler:C.renderGraphicChild},Scatter:{handler:C.renderGraphicChild},Pie:{handler:C.renderGraphicChild},Funnel:{handler:C.renderGraphicChild},Tooltip:{handler:C.renderCursor,once:!0},PolarGrid:{handler:C.renderPolarGrid,once:!0},PolarAngleAxis:{handler:C.renderPolarAxis},PolarRadiusAxis:{handler:C.renderPolarAxis},Customized:{handler:C.renderCustomized}}),C.clipPathId="".concat((w=b.id)!==null&&w!==void 0?w:q1("recharts"),"-clip"),C.throttleTriggeredAfterMouseMove=mie(C.triggeredAfterMouseMove,(T=b.throttleDelay)!==null&&T!==void 0?T:1e3/60),C.state={},C}return D6e(v,g),j6e(v,[{key:"componentDidMount",value:function(){var w,T;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(w=this.props.margin.left)!==null&&w!==void 0?w:0,top:(T=this.props.margin.top)!==null&&T!==void 0?T:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var w=this.props,T=w.children,C=w.data,P=w.height,M=w.layout,k=Ts(T,Gl);if(k){var I=k.props.defaultIndex;if(!(typeof I!="number"||I<0||I>this.state.tooltipTicks.length-1)){var U=this.state.tooltipTicks[I]&&this.state.tooltipTicks[I].value,z=mD(this.state,C,I,U),O=this.state.tooltipTicks[I].coordinate,B=(this.state.offset.top+P)/2,$=M==="horizontal",F=$?{x:O,y:B}:{y:O,x:B},J=this.state.formattedGraphicalItems.find(function(Z){var H=Z.item;return H.type.name==="Scatter"});J&&(F=nt(nt({},F),J.props.points[I].tooltipPosition),z=J.props.points[I].tooltipPayload);var K={activeTooltipIndex:I,isTooltipActive:!0,activeLabel:U,activePayload:z,activeCoordinate:F};this.setState(K),this.renderCursor(k),this.accessibilityManager.setIndex(I)}}}},{key:"getSnapshotBeforeUpdate",value:function(w,T){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==T.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==w.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==w.margin){var C,P;this.accessibilityManager.setDetails({offset:{left:(C=this.props.margin.left)!==null&&C!==void 0?C:0,top:(P=this.props.margin.top)!==null&&P!==void 0?P:0}})}return null}},{key:"componentDidUpdate",value:function(w){eL([Ts(w.children,Gl)],[Ts(this.props.children,Gl)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var w=Ts(this.props.children,Gl);if(w&&typeof w.props.shared=="boolean"){var T=w.props.shared?"axis":"item";return s.indexOf(T)>=0?T:o}return o}},{key:"getMouseInfo",value:function(w){if(!this.container)return null;var T=this.container,C=T.getBoundingClientRect(),P=iOe(C),M={chartX:Math.round(w.pageX-P.left),chartY:Math.round(w.pageY-P.top)},k=C.width/T.offsetWidth||1,I=this.inRange(M.chartX,M.chartY,k);if(!I)return null;var U=this.state,z=U.xAxisMap,O=U.yAxisMap,B=this.getTooltipEventType();if(B!=="axis"&&z&&O){var $=kf(z).scale,F=kf(O).scale,J=$&&$.invert?$.invert(M.chartX):null,K=F&&F.invert?F.invert(M.chartY):null;return nt(nt({},M),{},{xValue:J,yValue:K})}var Z=mq(this.state,this.props.data,this.props.layout,I);return Z?nt(nt({},M),Z):null}},{key:"inRange",value:function(w,T){var C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,P=this.props.layout,M=w/C,k=T/C;if(P==="horizontal"||P==="vertical"){var I=this.state.offset,U=M>=I.left&&M<=I.left+I.width&&k>=I.top&&k<=I.top+I.height;return U?{x:M,y:k}:null}var z=this.state,O=z.angleAxisMap,B=z.radiusAxisMap;if(O&&B){var $=kf(O);return P9({x:M,y:k},$)}return null}},{key:"parseEventsOfWrapper",value:function(){var w=this.props.children,T=this.getTooltipEventType(),C=Ts(w,Gl),P={};C&&T==="axis"&&(C.props.trigger==="click"?P={onClick:this.handleClick}:P={onMouseEnter:this.handleMouseEnter,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd});var M=zT(this.props,this.handleOuterEvent);return nt(nt({},M),P)}},{key:"addListener",value:function(){vj.on(xj,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){vj.removeListener(xj,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(w,T,C){for(var P=this.state.formattedGraphicalItems,M=0,k=P.length;M<k;M++){var I=P[M];if(I.item===w||I.props.key===w.key||T===rd(I.item.type)&&C===I.childIndex)return I}return null}},{key:"renderClipPath",value:function(){var w=this.clipPathId,T=this.state.offset,C=T.left,P=T.top,M=T.height,k=T.width;return ve.createElement("defs",null,ve.createElement("clipPath",{id:w},ve.createElement("rect",{x:C,y:P,height:M,width:k})))}},{key:"getXScales",value:function(){var w=this.state.xAxisMap;return w?Object.entries(w).reduce(function(T,C){var P=fq(C,2),M=P[0],k=P[1];return nt(nt({},T),{},tn({},M,k.scale))},{}):null}},{key:"getYScales",value:function(){var w=this.state.yAxisMap;return w?Object.entries(w).reduce(function(T,C){var P=fq(C,2),M=P[0],k=P[1];return nt(nt({},T),{},tn({},M,k.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(w){var T;return(T=this.state.xAxisMap)===null||T===void 0||(T=T[w])===null||T===void 0?void 0:T.scale}},{key:"getYScaleByAxisId",value:function(w){var T;return(T=this.state.yAxisMap)===null||T===void 0||(T=T[w])===null||T===void 0?void 0:T.scale}},{key:"getItemByXY",value:function(w){var T=this.state,C=T.formattedGraphicalItems,P=T.activeItem;if(C&&C.length)for(var M=0,k=C.length;M<k;M++){var I=C[M],U=I.props,z=I.item,O=z.type.defaultProps!==void 0?nt(nt({},z.type.defaultProps),z.props):z.props,B=rd(z.type);if(B==="Bar"){var $=(U.data||[]).find(function(Z){return dze(w,Z)});if($)return{graphicalItem:I,payload:$}}else if(B==="RadialBar"){var F=(U.data||[]).find(function(Z){return P9(w,Z)});if(F)return{graphicalItem:I,payload:F}}else if(KA(I,P)||JA(I,P)||qb(I,P)){var J=tUe({graphicalItem:I,activeTooltipItem:P,itemData:O.data}),K=O.activeIndex===void 0?J:O.activeIndex;return{graphicalItem:nt(nt({},I),{},{childIndex:K}),payload:qb(I,P)?O.data[J]:I.props.data[J]}}}return null}},{key:"render",value:function(){var w=this;if(!UH(this))return null;var T=this.props,C=T.children,P=T.className,M=T.width,k=T.height,I=T.style,U=T.compact,z=T.title,O=T.desc,B=hq(T,C6e),$=Dn(B,!1);if(U)return ve.createElement(q7,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},ve.createElement(nL,Vw({},$,{width:M,height:k,title:z,desc:O}),this.renderClipPath(),$H(C,this.renderMap)));if(this.props.accessibilityLayer){var F,J;$.tabIndex=(F=this.props.tabIndex)!==null&&F!==void 0?F:0,$.role=(J=this.props.role)!==null&&J!==void 0?J:"application",$.onKeyDown=function(Z){w.accessibilityManager.keyboardEvent(Z)},$.onFocus=function(){w.accessibilityManager.focus()}}var K=this.parseEventsOfWrapper();return ve.createElement(q7,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},ve.createElement("div",Vw({className:Un("recharts-wrapper",P),style:nt({position:"relative",cursor:"default",width:M,height:k},I)},K,{ref:function(H){w.container=H}}),ve.createElement(nL,Vw({},$,{width:M,height:k,title:z,desc:O,style:H6e}),this.renderClipPath(),$H(C,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(_.Component);return tn(y,"displayName",n),tn(y,"defaultProps",nt({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},f)),tn(y,"getDerivedStateFromProps",function(g,v){var b=g.dataKey,w=g.data,T=g.children,C=g.width,P=g.height,M=g.layout,k=g.stackOffset,I=g.margin,U=v.dataStartIndex,z=v.dataEndIndex;if(v.updateId===void 0){var O=gq(g);return nt(nt(nt({},O),{},{updateId:0},p(nt(nt({props:g},O),{},{updateId:0}),v)),{},{prevDataKey:b,prevData:w,prevWidth:C,prevHeight:P,prevLayout:M,prevStackOffset:k,prevMargin:I,prevChildren:T})}if(b!==v.prevDataKey||w!==v.prevData||C!==v.prevWidth||P!==v.prevHeight||M!==v.prevLayout||k!==v.prevStackOffset||!Zy(I,v.prevMargin)){var B=gq(g),$={chartX:v.chartX,chartY:v.chartY,isTooltipActive:v.isTooltipActive},F=nt(nt({},mq(v,w,M)),{},{updateId:v.updateId+1}),J=nt(nt(nt({},B),$),F);return nt(nt(nt({},J),p(nt({props:g},J),v)),{},{prevDataKey:b,prevData:w,prevWidth:C,prevHeight:P,prevLayout:M,prevStackOffset:k,prevMargin:I,prevChildren:T})}if(!eL(T,v.prevChildren)){var K,Z,H,Y,L=Ts(T,Nv),N=L&&(K=(Z=L.props)===null||Z===void 0?void 0:Z.startIndex)!==null&&K!==void 0?K:U,V=L&&(H=(Y=L.props)===null||Y===void 0?void 0:Y.endIndex)!==null&&H!==void 0?H:z,W=N!==U||V!==z,ne=!jn(w),se=ne&&!W?v.updateId:v.updateId+1;return nt(nt({updateId:se},p(nt(nt({props:g},v),{},{updateId:se,dataStartIndex:N,dataEndIndex:V}),v)),{},{prevChildren:T,dataStartIndex:N,dataEndIndex:V})}return null}),tn(y,"renderActiveDot",function(g,v,b){var w;return _.isValidElement(g)?w=_.cloneElement(g,v):kn(g)?w=g(v):w=ve.createElement(m5,v),ve.createElement(bi,{className:"recharts-active-dot",key:b},w)}),function(v){return ve.createElement(y,v)}},_ae=Q6e({chartName:"LineChart",GraphicalChild:I0,axisComponents:[{axisType:"xAxis",AxisComp:tS},{axisType:"yAxis",AxisComp:nS}],formatAxisMap:JUe});const vq=["#8b5cf6","#06b6d4","#84cc16","#f59e0b","#ef4444","#ec4899","#10b981","#f97316","#6366f1","#14b8a6"],xq=(t,e)=>{const n=t.split("").reduce((i,o)=>o.charCodeAt(0)+((i<<5)-i),0),r=Math.abs(n)%vq.length;return vq[r]},e8e=t=>{const{cx:e,cy:n,stroke:r,strokeWidth:i,r:o,value:a}=t,{theme:s}=Zr();return a===null?null:d.jsx("circle",{cx:e,cy:n,r:o,fill:s==="dark"?"#1e293b":"white",stroke:r,strokeWidth:i})},t8e=t=>{const{active:e,payload:n,label:r}=t;if(e&&n&&n.length){const i=n[0].dataKey.charAt(0).toUpperCase()+n[0].dataKey.slice(1),o=n[0].value;return d.jsxs("div",{className:"bg-card/95 backdrop-blur-sm p-2 rounded-lg border shadow-md",children:[d.jsx("p",{className:"text-sm font-medium",children:r}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:n[0].stroke}}),d.jsxs("p",{className:"text-sm",children:[d.jsx(Q,{text:i,forceTranslate:!0,enableFontScaling:!0,scalingContext:"compact"}),": ",(o==null?void 0:o.toFixed(1))||"N/A"]})]})]})}return null},n8e=t=>{const{x:e,y:n,stroke:r,index:i,data:o,dataKey:a}=t;if(i!==o.length-1)return null;const s=a.charAt(0).toUpperCase()+a.slice(1);return d.jsx("text",{x:e+5,y:n,dy:4,fill:r,fontSize:12,textAnchor:"start",fontWeight:"500",children:s})},r8e=({data:t,visibleEmotions:e,onLegendClick:n})=>{const{theme:r}=Zr(),i=ui(),o=Object.keys(t[0]||{}).filter(a=>a!=="day").filter(a=>t.some(s=>s[a]!==null));return d.jsxs(d.Fragment,{children:[d.jsx(gie,{width:"100%",height:i?250:300,children:d.jsxs(_ae,{data:t,margin:{top:20,right:i?10:60,left:0,bottom:10},children:[d.jsx(_5,{strokeDasharray:"3 3",stroke:r==="dark"?"#333":"#eee"}),d.jsx(tS,{dataKey:"day",stroke:"#888",fontSize:i?10:12,tickMargin:10,tick:{fontSize:i?10:12}}),d.jsx(nS,{stroke:"#888",fontSize:i?10:12,tickMargin:i?5:10,domain:[0,1],ticks:i?[0,.25,.5,.75,1]:[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1],tickFormatter:a=>a.toFixed(1),width:i?25:40}),d.jsx(Gl,{content:d.jsx(t8e,{})}),o.map((a,s)=>d.jsx(I0,{type:"monotone",dataKey:a,stroke:xq(a),strokeWidth:2,dot:d.jsx(e8e,{}),activeDot:{r:i?5:6},name:a.charAt(0).toUpperCase()+a.slice(1),label:i?null:d.jsx(n8e,{}),hide:!e.includes(a),connectNulls:!0},a))]})}),d.jsx("div",{className:"flex flex-wrap justify-center gap-2 mt-6 px-2",children:o.map((a,s)=>{const l=e.includes(a);return d.jsxs("div",{className:He("flex items-center gap-2 px-3 py-1.5 rounded-lg cursor-pointer transition-all duration-200",l?"bg-secondary font-medium shadow-sm border-2 border-primary":"bg-secondary/30 hover:bg-secondary/50"),onClick:()=>n(a),children:[d.jsx("div",{className:He("w-3 h-3 rounded-full",l?"animate-pulse":"opacity-60"),style:{backgroundColor:xq(a)}}),d.jsx("span",{className:He("text-sm",l?"font-bold":"text-muted-foreground"),children:d.jsx(Q,{text:a.charAt(0).toUpperCase()+a.slice(1),forceTranslate:!0,enableFontScaling:!0,scalingContext:"compact"})})]},a)})}),d.jsx("div",{className:"flex justify-center flex-wrap gap-4 mt-4 text-xs text-muted-foreground",children:d.jsx(Q,{text:"* Click on a legend item to focus on that emotion",forceTranslate:!0,enableFontScaling:!0,scalingContext:"compact"})})]})},i8e=({userId:t,timeRange:e,currentDate:n=new Date,onEntityClick:r,className:i})=>{const[o,a]=_.useState([]),[s,l]=_.useState(!0),[c,u]=_.useState(null),f=_.useRef(null),[h,p]=_.useState({width:300,height:300}),{theme:y}=Zr(),g=ui(),v=()=>{const T=n;let C,P;switch(e){case"today":C=ol(T),P=qa(C,1);break;case"week":C=oa(T,{weekStartsOn:1}),P=nm(C,1);break;case"month":C=O1(T),P=tm(C,1);break;case"year":C=L1(T),P=vv(C,1);break;default:C=ol(T),P=qa(C,1)}return{startDate:C.toISOString(),endDate:P.toISOString()}},b=T=>T<=-1?"#dc2626":T<=-.2?"#ef4444":T<0?"#fcd34d":T<.2?"#facc15":T<1?"#65a30d":"#22c55e";if(_.useEffect(()=>{(async()=>{if(!t){console.log("No user ID provided"),l(!1);return}l(!0);try{console.log(`Fetching themes for timeRange: ${e}, userId: ${t}, currentDate: ${n.toISOString()}`);const{startDate:C,endDate:P}=v(),{data:M,error:k}=await Ze.from("Journal Entries").select("master_themes, sentiment").eq("user_id",t).gte("created_at",C).lte("created_at",P).not("master_themes","is",null);if(k)throw console.error("Error fetching entries:",k),k;console.log(`Found ${(M==null?void 0:M.length)||0} entries with themes for date range ${C} to ${P}`);const I=new Map;M==null||M.forEach(O=>{if(!O.master_themes||!Array.isArray(O.master_themes))return;let B=0;O.sentiment&&(typeof O.sentiment=="string"?O.sentiment==="positive"?B=.7:O.sentiment==="negative"?B=-.7:O.sentiment==="neutral"?B=0:B=parseFloat(O.sentiment)||0:B=Number(O.sentiment)||0),O.master_themes.forEach($=>{if(typeof $=="string"&&$.trim()){const F=$.toLowerCase().trim();I.has(F)||I.set(F,{count:0,totalSentiment:0});const J=I.get(F);J.count+=1,J.totalSentiment+=B}})});const z=Array.from(I.entries()).map(([O,B])=>({name:O.charAt(0).toUpperCase()+O.slice(1),count:B.count,sentiment:B.totalSentiment/B.count})).sort((O,B)=>B.count-O.count).slice(0,7);console.log("Top themes for current period:",z),a(z)}catch(C){console.error("Error fetching theme data:",C),It.error("Failed to load life areas")}finally{l(!1)}})()},[t,e,n]),_.useEffect(()=>{const T=()=>{if(f.current){const{offsetWidth:P,offsetHeight:M}=f.current;p({width:P||300,height:M||300})}};T(),window.addEventListener("resize",T);const C=setTimeout(T,200);return()=>{window.removeEventListener("resize",T),clearTimeout(C)}},[]),s)return d.jsx("div",{className:"flex items-center justify-center h-full w-full",children:d.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})});if(o.length===0)return d.jsx("div",{className:"flex items-center justify-center h-full w-full",children:d.jsx("p",{className:"text-muted-foreground",children:d.jsx(Q,{text:"No life areas found in this time period",forceTranslate:!0})})});const w=T=>Math.max(-1,Math.min(1,T));return d.jsxs("div",{ref:f,className:He("relative w-full h-full overflow-hidden flex flex-col",i),style:{minHeight:g?"250px":"300px"},children:[d.jsx("div",{className:"flex-1 flex flex-col gap-3 overflow-hidden",children:o.map(T=>{const C=c===T.name,P=w(T.sentiment),M=b(P),k=Math.max(...o.map(U=>U.count)),I=40+T.count/k*60;return d.jsx(Ke.div,{className:He("rounded-md cursor-pointer transition-all flex items-center justify-center","text-white shadow-md",C?"z-10":"z-0"),style:{backgroundColor:M,width:`${I}%`,height:"40px",opacity:C?.95:.8,margin:"0 auto"},initial:{scaleX:0},animate:{scaleX:1,boxShadow:C?"0 0 10px rgba(0,0,0,0.2)":"0 0 5px rgba(0,0,0,0.1)"},transition:{type:"spring",stiffness:200,damping:15,delay:.05},onMouseEnter:()=>u(T.name),onMouseLeave:()=>u(null),onClick:()=>r==null?void 0:r(T.name,T.sentiment),children:d.jsxs("div",{className:"text-center px-2 truncate max-w-full",children:[d.jsx("span",{className:"font-medium",children:d.jsx(Q,{text:T.name,forceTranslate:!0})}),C&&d.jsxs("span",{className:"ml-2 text-white/90 text-xs",children:["(",T.sentiment.toFixed(2),")"]})]})},T.name)})}),d.jsxs("div",{className:"mt-8 mb-2",children:[d.jsxs("div",{className:"h-6 relative rounded-md overflow-hidden flex",children:[d.jsx("div",{className:"w-1/6 bg-[#dc2626]"}),d.jsx("div",{className:"w-1/6 bg-[#ef4444]"}),d.jsx("div",{className:"w-1/6 bg-[#fcd34d]"}),d.jsx("div",{className:"w-1/6 bg-[#facc15]"}),d.jsx("div",{className:"w-1/6 bg-[#65a30d]"}),d.jsx("div",{className:"w-1/6 bg-[#22c55e]"})]}),d.jsxs("div",{className:"flex justify-between mt-1 text-xs text-muted-foreground",children:[d.jsx("span",{children:d.jsx(Q,{text:"Negative (-1.0)",forceTranslate:!0})}),d.jsx("span",{children:d.jsx(Q,{text:"Neutral (0.0)",forceTranslate:!0})}),d.jsx("span",{children:d.jsx(Q,{text:"Positive (1.0)",forceTranslate:!0})})]})]})]})},o8e=({timeframe:t,activeDate:e,onEntityClick:n,topRightPercentage:r,bubbleKey:i})=>{const{user:o}=or();return d.jsxs("div",{className:"w-full h-full flex flex-col",children:[r&&d.jsxs("div",{className:"absolute top-2 right-2 bg-background/90 py-1 px-3 rounded-lg shadow-lg text-primary font-medium z-20",children:[d.jsx(Q,{text:r.emotion,forceTranslate:!0,enableFontScaling:!0,scalingContext:"compact"}),": ",r.percentage]}),d.jsx("div",{className:"h-[300px] w-full",children:d.jsx(i8e,{userId:o==null?void 0:o.id,timeRange:t,currentDate:e,onEntityClick:n,className:"w-full h-full"})},i)]})},a8e=(t,e,n)=>{if(!t)return{};let r,i;switch(e){case"today":r=ol(n),i=qa(r,1);break;case"week":r=oa(n,{weekStartsOn:1}),i=nm(r,1);break;case"month":r=O1(n),i=tm(r,1);break;case"year":r=L1(n),i=vv(r,1);break;default:r=ol(n),i=qa(r,1)}const o={};for(const[a,s]of Object.entries(t))o[a]=s.filter(l=>{const c=new Date(l.date);return c>=r&&c<i});return o},s8e=(t,e)=>{if(!t||Object.keys(t).length===0)return[];const n={},r=new Map;Object.entries(t).forEach(([a,s])=>{let l=0;s.forEach(c=>{r.has(c.date)||r.set(c.date,new Map);const u=r.get(c.date);u.has(a)||u.set(a,{total:0,count:0});const f=u.get(a);f.total+=c.value,f.count+=1,l+=c.value}),l>0&&(n[a]=l)});const i=Object.entries(n).sort((a,s)=>s[1]-a[1]).slice(0,5).map(([a])=>a);return Array.from(r.entries()).map(([a,s])=>{const l={day:new Date(a).toLocaleDateString("en-US",{month:"short",day:"numeric"})};return i.forEach(c=>{const u=s.get(c);if(u&&u.count>0){let f=u.total/u.count;f>1&&(f=1),l[c]=parseFloat(f.toFixed(2))}else l[c]=null}),l}).sort((a,s)=>{const l=new Date(a.day),c=new Date(s.day);return l.getTime()-c.getTime()})},l8e=t=>{if(!t||Object.keys(t).length===0)return{};const e={};return Object.entries(t).forEach(([n,r])=>{if(r.length>0){const i=r.reduce((o,a)=>o+a.value,0);i>0&&(e[n]=i/r.length,e[n]>1&&(e[n]=1))}}),e},c8e=t=>{if(!t||Object.keys(t).length===0)return"";const e={};Object.entries(t).forEach(([r,i])=>{let o=0;i.forEach(a=>{o+=a.value}),o>0&&(e[r]=o)});const n=Object.entries(e).sort((r,i)=>i[1]-r[1]);return n.length>0?n[0][0]:""},Dc=(t,e,n="en")=>{if(!t)return"";const r=typeof t=="string"?new Date(t):t;if(!X4(r))return"";try{switch(e){case"today":return new Intl.DateTimeFormat(n,{hour:"2-digit",minute:"2-digit",hour12:!1}).format(r);case"day":return new Intl.DateTimeFormat(n,{year:"numeric",month:"long",day:"numeric"}).format(r);case"week":{const i=r.getDate();return`${new Intl.DateTimeFormat(n,{weekday:"short"}).format(r)} ${i}`}case"short":return new Intl.DateTimeFormat(n,{month:"short",day:"numeric"}).format(r);case"month":return new Intl.DateTimeFormat(n,{year:"numeric",month:"long"}).format(r);case"year":return new Intl.DateTimeFormat(n,{month:"short"}).format(r);default:return new Intl.DateTimeFormat(n,{day:"numeric",month:"short"}).format(r)}}catch(i){console.error("Error formatting date:",i);try{return r.toLocaleDateString(n)}catch{return"Invalid date"}}},u8e=(t,e)=>{switch(t){case"today":return qa(e,1);case"week":return nm(e,1);case"month":return tm(e,1);case"year":return vv(e,1);default:return nm(e,1)}},d8e=(t,e)=>{switch(t){case"today":return kT(e,1);case"week":return BO(e);case"month":return K4(e,1);case"year":return lte(e);default:return BO(e)}},bj=(t,e)=>{switch(t){case"today":return Dc(e,"day");case"week":{const n=oa(e,{weekStartsOn:1}),r=qa(n,6);return`${Dc(n,"short")} - ${Dc(r,"short")}`}case"month":return Dc(e,"month");case"year":return e.getFullYear().toString();default:return""}};function f8e({className:t,timeframe:e="week",aggregatedData:n,currentDate:r,onTimeRangeNavigate:i}){const[o,a]=xke("emotion-chart-type","bubble"),[s,l]=_.useState(0),[c,u]=_.useState([]),[f,h]=_.useState(null),[p,y]=_.useState(!1),g=_.useRef(!0),[v,b]=_.useState(new Date),w=typeof r=="object"?r:v;_.useEffect(()=>{u([]),r||b(new Date)},[e]);const T=[{id:"line",label:"Emotions"},{id:"bubble",label:"Life Areas"}],C=()=>{y(!0);const F=d8e(e,w);i?i(F):b(F),setTimeout(()=>y(!1),100)},P=()=>{y(!0);const F=u8e(e,w);i?i(F):b(F),setTimeout(()=>y(!1),100)};_.useEffect(()=>{r||b(new Date)},[e,r]);const M=_.useMemo(()=>a8e(n||{},e,w),[n,e,w]),k=_.useMemo(()=>l8e(M),[M]);_.useEffect(()=>{g.current&&(l(F=>F+1),setTimeout(()=>{l(F=>F+1)},100),g.current=!1)},[]),_.useEffect(()=>{l(F=>F+1)},[o]),_.useEffect(()=>{l(F=>F+1),setTimeout(()=>{l(F=>F+1)},50)},[e,n,k]);const I=(F,J)=>{h({emotion:F,percentage:Math.round(J*100)/100}),setTimeout(()=>{h(null)},2e3)},U=_.useMemo(()=>s8e(M),[M,c]),z=_.useMemo(()=>c8e(M),[M]);_.useEffect(()=>{z&&o==="line"&&c.length===0&&u([z])},[z,o,c.length]);const O=F=>{u(J=>J.length===1&&J[0]===F?J:J.includes(F)?J.filter(K=>K!==F):[...J,F])},B=()=>U.length===0?d.jsxs("div",{className:"flex flex-col h-full",children:[d.jsx(bP,{isNavigating:p,onPrevious:C,onNext:P,periodLabel:bj(e,w)}),d.jsx("div",{className:"flex items-center justify-center h-full",children:d.jsx("p",{className:"text-muted-foreground",children:d.jsx(Q,{text:"No data available for this timeframe",forceTranslate:!0,enableFontScaling:!0,scalingContext:"general"})})})]}):Object.keys(U[0]).filter(J=>J!=="day").filter(J=>U.some(K=>K[J]!==null)).length===0?d.jsx("div",{className:"flex items-center justify-center h-full",children:d.jsx("p",{className:"text-muted-foreground",children:d.jsx(Q,{text:"No emotional data found",forceTranslate:!0,enableFontScaling:!0,scalingContext:"general"})})}):d.jsxs("div",{className:"flex flex-col h-full",children:[d.jsx(bP,{isNavigating:p,onPrevious:C,onNext:P,periodLabel:bj(e,w)}),d.jsx(r8e,{data:U,visibleEmotions:c,onLegendClick:O})]}),$=()=>d.jsxs("div",{className:"w-full h-full flex flex-col",children:[d.jsx(bP,{isNavigating:p,onPrevious:C,onNext:P,periodLabel:bj(e,w)}),d.jsx(o8e,{timeframe:e,activeDate:w,onEntityClick:I,topRightPercentage:f,bubbleKey:s})]});return d.jsxs("div",{className:He("w-full",t),children:[d.jsxs("div",{className:"flex flex-wrap justify-between items-center mb-4",children:[d.jsx("h3",{className:"text-xl font-semibold",children:d.jsx(Q,{text:"TOP",forceTranslate:!0,enableFontScaling:!0,scalingContext:"general"})}),d.jsx("div",{className:"flex gap-2",children:T.map(F=>d.jsx("button",{onClick:()=>a(F.id),className:He("px-3 py-1 rounded-full text-sm transition-all",o===F.id?"bg-primary text-white":"bg-secondary text-muted-foreground hover:text-foreground"),children:d.jsx(Q,{text:F.label,forceTranslate:!0,enableFontScaling:!0,scalingContext:"compact"})},F.id))})]}),d.jsxs("div",{className:"bg-card p-4 rounded-xl shadow-sm relative",children:[p&&d.jsx("div",{className:"absolute inset-0 bg-background/30 backdrop-blur-sm flex items-center justify-center z-10 rounded-xl",children:d.jsx(Aa,{className:"h-6 w-6 animate-spin text-primary"})}),o==="line"&&B(),o==="bubble"&&$()]})]})}const ZE=t=>t>=.2?"bg-green-500":t<=-.2?"bg-red-500":"bg-yellow-400",h8e=({sentimentData:t,timeRange:e,currentDate:n})=>{const{theme:r}=Zr(),i=ui(),{currentLanguage:o}=In();if(!t||t.length===0)return d.jsx("div",{className:"flex items-center justify-center h-full",children:d.jsx("p",{className:"text-muted-foreground",children:d.jsx(Tn,{text:"No data available for this timeframe",forceTranslate:!0,enableFontScaling:!0,scalingContext:"general",usePageTranslation:!0})})});const a=new Map,s=new Map;t.forEach(g=>{const v=ir(g.date,"yyyy-MM-dd");if(!a.has(v))a.set(v,g.sentiment),s.set(v,g.date);else{const b=a.get(v)||0,w=a.has(v)?1:0,T=(b*w+g.sentiment)/(w+1);a.set(v,T)}});const c=(()=>{let g=[];switch(e){case"today":{const b=ol(n);g=Array.from({length:12},(w,T)=>{const C=new Date(b);return C.setHours(9+T),C.setMinutes(0),C.setSeconds(0),C});break}case"week":{const b=oa(n,{weekStartsOn:1});g=Array.from({length:7},(w,T)=>qa(b,T));break}case"month":{const b=O1(n),w=new Date(b.getFullYear(),b.getMonth()+1,0).getDate();g=Array.from({length:w},(T,C)=>new Date(b.getFullYear(),b.getMonth(),C+1));break}case"year":{const b=L1(n);g=Array.from({length:12},(w,T)=>new Date(b.getFullYear(),T,1));break}default:const v=oa(n,{weekStartsOn:1});g=Array.from({length:7},(b,w)=>qa(v,w))}return g})(),u=()=>{switch(e){case"today":return h();case"month":return p();case"year":return y();case"week":default:return f()}},f=()=>d.jsx("div",{className:"grid grid-cols-7 gap-2 mt-4",children:c.map(g=>{const v=ir(g,"yyyy-MM-dd"),b=a.has(v),w=a.get(v)||0;return d.jsxs("div",{className:"flex flex-col items-center",children:[d.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:ir(g,"EEE")}),d.jsx("div",{className:"text-sm mb-2",children:ir(g,"d")}),d.jsx("div",{className:He("w-10 h-10 rounded-full flex items-center justify-center transition-all",b?ZE(w):"bg-muted",cP(g)&&"ring-2 ring-primary ring-offset-2")})]},v)})}),h=()=>d.jsx("div",{className:"grid grid-cols-6 gap-2 mt-4",children:c.map(g=>{const v=ir(g,"yyyy-MM-dd-HH"),b=t.find(C=>{const P=C.date.getHours();return ote(C.date,g)&&Math.abs(P-g.getHours())<=1}),w=!!b,T=(b==null?void 0:b.sentiment)||0;return d.jsxs("div",{className:"flex flex-col items-center",children:[d.jsx("div",{className:"text-sm mb-2",children:ir(g,"h a")}),d.jsx("div",{className:He("w-8 h-8 rounded-full flex items-center justify-center transition-all",w?ZE(T):"bg-muted")})]},v)})}),p=()=>d.jsxs("div",{className:"grid grid-cols-7 gap-1 mt-4",children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(g=>d.jsx("div",{className:"text-xs text-center text-muted-foreground",children:d.jsx(Tn,{text:g,forceTranslate:!0,enableFontScaling:!0,scalingContext:"compact",usePageTranslation:!0})},g)),Array.from({length:c[0].getDay()}).map((g,v)=>d.jsx("div",{className:"h-8"},`empty-${v}`)),c.map(g=>{const v=ir(g,"yyyy-MM-dd"),b=a.has(v),w=a.get(v)||0;return d.jsx("div",{className:"flex flex-col items-center",children:d.jsx("div",{className:He("w-8 h-8 rounded-full flex flex-col items-center justify-center transition-all",b?ZE(w):"bg-muted/30",cP(g)&&"ring-1 ring-primary ring-offset-1"),children:d.jsx("span",{className:He("text-xs font-medium",b?"text-white":"text-foreground"),children:ir(g,"d")})})},v)})]}),y=()=>{const g=n.getFullYear(),v=["J","F","M","A","M","J","J","A","S","O","N","D"],b=Array.from({length:31},(w,T)=>T+1);return d.jsx("div",{className:"w-full overflow-x-hidden",children:d.jsx("div",{className:"compact-year-view overflow-x-auto",children:d.jsxs("table",{className:He("w-full border-collapse table-fixed",i?"compact-table-mobile":""),children:[d.jsx("thead",{children:d.jsxs("tr",{children:[d.jsx("th",{className:He("text-xs text-muted-foreground sticky top-0 bg-background z-10",i?"w-6 px-1":"w-8 px-1")}),v.map((w,T)=>d.jsx("th",{className:He("text-xs text-center text-muted-foreground sticky top-0 bg-background z-10","px-1 py-1"),children:d.jsx(Tn,{text:w,forceTranslate:!0,enableFontScaling:!0,scalingContext:"compact",usePageTranslation:!0})},w))]})}),d.jsx("tbody",{className:"text-xs",children:b.map(w=>d.jsxs("tr",{className:w%2===0?"bg-muted/5":"",children:[d.jsx("td",{className:He("text-xs text-center text-muted-foreground sticky left-0 bg-background","px-1"),children:w}),v.map((T,C)=>{const P=new Date(g,C+1,0).getDate();if(w>P)return d.jsx("td",{className:"p-0"},`empty-${C}-${w}`);const M=new Date(g,C,w),k=ir(M,"yyyy-MM-dd"),I=a.has(k),U=a.get(k)||0;return d.jsx("td",{className:He("text-center align-middle","p-0"),children:d.jsx("div",{className:He(i?"w-3 h-3":"w-4 h-4","rounded-full mx-auto",I?ZE(U):"bg-muted/30",cP(M)&&"ring-1 ring-primary ring-offset-1")})},k)})]},`day-${w}`))})]})})})};return d.jsxs("div",{className:"h-full py-4",children:[u(),d.jsxs("div",{className:"flex justify-center gap-4 text-xs text-muted-foreground mt-4",children:[d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"}),d.jsx(Tn,{text:"Positive",forceTranslate:!0,enableFontScaling:!0,scalingContext:"compact",usePageTranslation:!0})]}),d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-400"}),d.jsx(Tn,{text:"Neutral",forceTranslate:!0,enableFontScaling:!0,scalingContext:"compact",usePageTranslation:!0})]}),d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500"}),d.jsx(Tn,{text:"Negative",forceTranslate:!0,enableFontScaling:!0,scalingContext:"compact",usePageTranslation:!0})]})]})]})},p8e=t=>{const{cx:e,cy:n,payload:r}=t,i=r.sentiment;let o="#3b82f6";return i>=.2?o="#4ade80":i<=-.2?o="#ea384c":o="#facc15",d.jsx("circle",{cx:e,cy:n,r:4,stroke:"white",strokeWidth:1,fill:o})},m8e=({active:t,payload:e,label:n})=>{if(t&&e&&e.length){const r=e[0].value;let i="Neutral",o="#facc15";return r>=.2?(i="Positive",o="#4ade80"):r<=-.2&&(i="Negative",o="#ea384c"),d.jsxs("div",{className:"custom-tooltip bg-background p-2 border rounded-md shadow-md",children:[d.jsx("p",{className:"date",children:n}),d.jsx("p",{className:"sentiment",style:{color:o},children:d.jsx(Tn,{text:i,forceTranslate:!0,enableFontScaling:!0,scalingContext:"compact",usePageTranslation:!0})})]})}return null},g8e=({sentimentData:t,timeRange:e,currentDate:n,onTimeRangeNavigate:r})=>{const{theme:i}=Zr(),o=ui(),{currentLanguage:a}=In(),[s,l]=_.useState("chart"),[c,u]=_.useState(new Date),f=n??c,h=()=>{let w;switch(e){case"today":w=kT(f,1);break;case"week":w=BO(f);break;case"month":w=K4(f,1);break;case"year":w=lte(f);break;default:w=f}r?r(w):u(w)},p=()=>{let w;switch(e){case"today":w=qa(f,1);break;case"week":w=nm(f,1);break;case"month":w=tm(f,1);break;case"year":w=vv(f,1);break;default:w=f}r?r(w):u(w)};_.useEffect(()=>{n||u(new Date)},[e,n]);const y=()=>{const w=f;switch(e){case"today":return Dc(w,"day",a);case"week":{const T=oa(w,{weekStartsOn:1}),C=qa(T,6);return`${Dc(T,"short",a)} - ${Dc(C,"short",a)}`}case"month":return Dc(w,"month",a);case"year":return w.getFullYear().toString();default:return""}},v=(()=>{if(!t||t.length===0)return[];let w;switch(e){case"today":w=ol(f);break;case"week":w=oa(f,{weekStartsOn:1});break;case"month":w=O1(f);break;case"year":w=L1(f);break;default:w=ol(f)}const T=t.filter(P=>{const M=P.date instanceof Date?P.date:new Date(P.date);let k;switch(e){case"today":k=qa(w,1);break;case"week":k=nm(w,1);break;case"month":k=tm(w,1);break;case"year":k=vv(w,1);break;default:k=qa(w,1)}return M>=w&&M<k}),C=new Map;return T.forEach(P=>{let M;e==="month"?M=Dc(P.date,"short",a):M=Dc(P.date,e,a);const k=M;if(!C.has(k))C.set(k,{formattedDate:M,originalDate:P.date,sentimentSum:P.sentiment,count:1});else{const I=C.get(k);I.sentimentSum+=P.sentiment,I.count+=1,e==="today"&&P.date>I.originalDate&&(I.originalDate=P.date)}}),Array.from(C.values()).map(P=>({formattedDate:P.formattedDate,sentiment:P.sentimentSum/P.count,originalDate:P.originalDate})).sort((P,M)=>new Date(P.originalDate).getTime()-new Date(M.originalDate).getTime())})(),b=()=>{if(v.length===0)return d.jsx("div",{className:"flex items-center justify-center h-full",children:d.jsx("p",{className:"text-muted-foreground",children:d.jsx(Tn,{text:"No data available for this timeframe",forceTranslate:!0,enableFontScaling:!0,scalingContext:"general",usePageTranslation:!0})})});const w=v.map((T,C)=>({day:T.formattedDate,sentiment:T.sentiment,originalDate:T.originalDate,displayIndex:C}));return d.jsxs("div",{className:"flex flex-col h-full",children:[d.jsx(gie,{width:"100%",height:o?250:300,children:d.jsxs(_ae,{data:w,margin:{top:20,right:o?10:60,left:0,bottom:10},children:[d.jsx("defs",{children:d.jsxs("linearGradient",{id:"line-gradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[d.jsx("stop",{offset:"0%",stopColor:"#8b5cf6",stopOpacity:"0.8"}),d.jsx("stop",{offset:"100%",stopColor:"#8b5cf6",stopOpacity:"0.15"})]})}),d.jsx(_5,{strokeDasharray:"3 3",stroke:i==="dark"?"#333":"#eee"}),d.jsx(tS,{dataKey:"day",stroke:"#888",fontSize:12,tickMargin:10,tickFormatter:(T,C)=>T,interval:o&&w.length>10?Math.floor(w.length/6):0}),d.jsx(nS,{stroke:"#888",fontSize:12,tickMargin:10,domain:[-1,1],ticks:[-1,-.5,0,.5,1]}),d.jsx(Gl,{content:d.jsx(m8e,{})}),d.jsx(Wp,{y1:.2,y2:1,fill:"#4ade80",fillOpacity:.18,ifOverflow:"visible"}),d.jsx(Wp,{y1:-.2,y2:.2,fill:"#facc15",fillOpacity:.2,ifOverflow:"visible"}),d.jsx(Wp,{y1:-1,y2:-.2,fill:"#ea384c",fillOpacity:.18,ifOverflow:"visible"}),d.jsx(I0,{type:"monotone",dataKey:"sentiment",stroke:"#3b82f6",strokeWidth:2,dot:T=>d.jsx(p8e,{cx:T.cx,cy:T.cy,payload:T.payload}),activeDot:{r:6}}),d.jsx(Jb,{y:-.2,stroke:"#facc15",strokeDasharray:"4 2",ifOverflow:"visible",strokeWidth:1}),d.jsx(Jb,{y:.2,stroke:"#4ade80",strokeDasharray:"4 2",ifOverflow:"visible",strokeWidth:1})]})}),d.jsxs("div",{className:"flex justify-center gap-4 text-xs text-muted-foreground mt-4",children:[d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx("div",{className:"w-3 h-3 rounded-full",style:{background:"#4ade80"}}),d.jsx(Tn,{text:"Positive",forceTranslate:!0,enableFontScaling:!0,scalingContext:"compact",usePageTranslation:!0})]}),d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx("div",{className:"w-3 h-3 rounded-full",style:{background:"#facc15"}}),d.jsx(Tn,{text:"Neutral",forceTranslate:!0,enableFontScaling:!0,scalingContext:"compact",usePageTranslation:!0})]}),d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx("div",{className:"w-3 h-3 rounded-full",style:{background:"#ea384c"}}),d.jsx(Tn,{text:"Negative",forceTranslate:!0,enableFontScaling:!0,scalingContext:"compact",usePageTranslation:!0})]})]})]})};return _.useEffect(()=>{console.log("Language or timeRange changed in MoodCalendar:",a,e)},[a,e]),d.jsxs("div",{className:"bg-background rounded-xl shadow-sm border w-full p-6 md:p-8",children:[d.jsxs("div",{className:"text-center mb-4",children:[d.jsx("h2",{className:"text-lg font-semibold mb-1",children:d.jsx(Tn,{text:"Mood Trends",forceTranslate:!0,enableFontScaling:!0,scalingContext:"general",usePageTranslation:!0})}),d.jsx("p",{className:"text-sm text-muted-foreground",children:d.jsx(Tn,{text:"Your sentiment changes over time",forceTranslate:!0,enableFontScaling:!0,scalingContext:"compact",usePageTranslation:!0})})]}),d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsx(ct,{variant:"ghost",size:"icon",onClick:h,className:"text-muted-foreground hover:text-foreground",title:"Previous period",children:d.jsx(eA,{className:"h-5 w-5"})}),d.jsx("div",{className:"text-center font-medium",children:d.jsx(Tn,{text:y(),forceTranslate:!0,enableFontScaling:!0,scalingContext:"compact",usePageTranslation:!0})}),d.jsx(ct,{variant:"ghost",size:"icon",onClick:p,className:"text-muted-foreground hover:text-foreground",title:"Next period",children:d.jsx(S1,{className:"h-5 w-5"})})]}),d.jsx("div",{className:"flex justify-center mb-6",children:d.jsxs(wF,{type:"single",value:s,onValueChange:w=>w&&l(w),variant:"outline",className:"border rounded-md",children:[d.jsx(DT,{value:"chart","aria-label":"Chart view",className:He("data-[state=on]:bg-muted","w-10 h-10 p-2"),children:d.jsx(Ff,{className:"h-4 w-4"})}),d.jsx(DT,{value:"calendar","aria-label":"Calendar view",className:He("data-[state=on]:bg-muted","w-10 h-10 p-2"),children:d.jsx(QC,{className:"h-4 w-4"})})]})}),d.jsx("div",{className:He("h-auto",s==="chart"?"h-[300px] md:h-[350px]":"",s==="calendar"&&e==="year"?"min-h-[490px]":"h-[300px] md:h-[350px]"),children:s==="chart"?b():d.jsx(h8e,{sentimentData:t,timeRange:e,currentDate:f})})]})};/**
 * @license
 * Copyright 2010-2021 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const T5="133",mp={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},gp={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},Tae=0,gD=1,Cae=2,y8e=3,Aae=0,r2=1,Ww=2,Ip=3,Jf=0,oi=1,vd=2,C5=1,v8e=2,ad=0,nv=1,yD=2,vD=3,xD=4,Mae=5,xp=100,Pae=101,kae=102,wD=103,bD=104,Nae=200,Rae=201,jae=202,Iae=203,A5=204,M5=205,Oae=206,Lae=207,Dae=208,Fae=209,zae=210,Uae=0,Bae=1,$ae=2,OC=3,Hae=4,Vae=5,Wae=6,Gae=7,rS=0,qae=1,Yae=2,sd=0,Xae=1,Kae=2,Jae=3,P5=4,Zae=5,i2=300,O0=301,L0=302,t1=303,n1=304,D0=306,iS=307,r1=1e3,$o=1001,i1=1002,Fi=1003,LC=1004,x8e=1004,DC=1005,w8e=1005,Xr=1006,k5=1007,b8e=1007,Nm=1008,S8e=1008,Zc=1009,Qae=1010,ese=1011,o1=1012,tse=1013,Gw=1014,zc=1015,Gp=1016,nse=1017,rse=1018,ise=1019,rv=1020,ose=1021,qp=1022,ro=1023,ase=1024,sse=1025,lse=ro,Yp=1026,$v=1027,cse=1028,use=1029,dse=1030,fse=1031,hse=1032,pse=1033,SD=33776,ED=33777,_D=33778,TD=33779,CD=35840,AD=35841,MD=35842,PD=35843,mse=36196,kD=37492,ND=37496,gse=37808,yse=37809,vse=37810,xse=37811,wse=37812,bse=37813,Sse=37814,Ese=37815,_se=37816,Tse=37817,Cse=37818,Ase=37819,Mse=37820,Pse=37821,kse=36492,Nse=37840,Rse=37841,jse=37842,Ise=37843,Ose=37844,Lse=37845,Dse=37846,Fse=37847,zse=37848,Use=37849,Bse=37850,$se=37851,Hse=37852,Vse=37853,Wse=2200,Gse=2201,qse=2202,a1=2300,s1=2301,aT=2302,Op=2400,Lp=2401,l1=2402,o2=2500,N5=2501,Yse=0,E8e=1,_8e=2,Vo=3e3,ph=3001,a2=3007,s2=3002,Xse=3003,R5=3004,j5=3005,I5=3006,Kse=3200,O5=3201,Rm=0,Jse=1,T8e=0,sT=7680,C8e=7681,A8e=7682,M8e=7683,P8e=34055,k8e=34056,N8e=5386,R8e=512,j8e=513,I8e=514,O8e=515,L8e=516,D8e=517,F8e=518,Zse=519,Hv=35044,Vv=35048,z8e=35040,U8e=35045,B8e=35049,$8e=35041,H8e=35046,V8e=35050,W8e=35042,G8e="100",RD="300 es";let mh=class{addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(n)===-1&&r[e].push(n)}hasEventListener(e,n){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(n)!==-1}removeEventListener(e,n){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const o=i.indexOf(n);o!==-1&&i.splice(o,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let o=0,a=i.length;o<a;o++)i[o].call(this,e);e.target=null}}},QE=1234567;const Xp=Math.PI/180,c1=180/Math.PI,Oo=[];for(let t=0;t<256;t++)Oo[t]=(t<16?"0":"")+t.toString(16);const q8e=typeof crypto<"u"&&"randomUUID"in crypto;function Ns(){if(q8e)return crypto.randomUUID().toUpperCase();const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(Oo[t&255]+Oo[t>>8&255]+Oo[t>>16&255]+Oo[t>>24&255]+"-"+Oo[e&255]+Oo[e>>8&255]+"-"+Oo[e>>16&15|64]+Oo[e>>24&255]+"-"+Oo[n&63|128]+Oo[n>>8&255]+"-"+Oo[n>>16&255]+Oo[n>>24&255]+Oo[r&255]+Oo[r>>8&255]+Oo[r>>16&255]+Oo[r>>24&255]).toUpperCase()}function Bo(t,e,n){return Math.max(e,Math.min(n,t))}function L5(t,e){return(t%e+e)%e}function Y8e(t,e,n,r,i){return r+(t-e)*(i-r)/(n-e)}function X8e(t,e,n){return t!==e?(n-t)/(e-t):0}function qw(t,e,n){return(1-n)*t+n*e}function K8e(t,e,n,r){return qw(t,e,1-Math.exp(-n*r))}function J8e(t,e=1){return e-Math.abs(L5(t,e*2)-e)}function Z8e(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*(3-2*t))}function Q8e(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*t*(t*(t*6-15)+10))}function eHe(t,e){return t+Math.floor(Math.random()*(e-t+1))}function tHe(t,e){return t+Math.random()*(e-t)}function nHe(t){return t*(.5-Math.random())}function rHe(t){return t!==void 0&&(QE=t%2147483647),QE=QE*16807%2147483647,(QE-1)/2147483646}function iHe(t){return t*Xp}function oHe(t){return t*c1}function jD(t){return(t&t-1)===0&&t!==0}function Qse(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function ele(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function aHe(t,e,n,r,i){const o=Math.cos,a=Math.sin,s=o(n/2),l=a(n/2),c=o((e+r)/2),u=a((e+r)/2),f=o((e-r)/2),h=a((e-r)/2),p=o((r-e)/2),y=a((r-e)/2);switch(i){case"XYX":t.set(s*u,l*f,l*h,s*c);break;case"YZY":t.set(l*h,s*u,l*f,s*c);break;case"ZXZ":t.set(l*f,l*h,s*u,s*c);break;case"XZX":t.set(s*u,l*y,l*p,s*c);break;case"YXY":t.set(l*p,s*u,l*y,s*c);break;case"ZYZ":t.set(l*y,l*p,s*u,s*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}var wq=Object.freeze({__proto__:null,DEG2RAD:Xp,RAD2DEG:c1,generateUUID:Ns,clamp:Bo,euclideanModulo:L5,mapLinear:Y8e,inverseLerp:X8e,lerp:qw,damp:K8e,pingpong:J8e,smoothstep:Z8e,smootherstep:Q8e,randInt:eHe,randFloat:tHe,randFloatSpread:nHe,seededRandom:rHe,degToRad:iHe,radToDeg:oHe,isPowerOfTwo:jD,ceilPowerOfTwo:Qse,floorPowerOfTwo:ele,setQuaternionFromProperEuler:aHe});class rt{constructor(e=0,n=0){this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e,n){return n!==void 0?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,n)):(this.x+=e.x,this.y+=e.y,this)}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e,n){return n!==void 0?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,n)):(this.x-=e.x,this.y-=e.y,this)}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const n=this.x,r=this.y,i=e.elements;return this.x=i[0]*n+i[3]*r+i[6],this.y=i[1]*n+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y;return n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n,r){return r!==void 0&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){const r=Math.cos(n),i=Math.sin(n),o=this.x-e.x,a=this.y-e.y;return this.x=o*r-a*i+e.x,this.y=o*i+a*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}rt.prototype.isVector2=!0;class zi{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(e,n,r,i,o,a,s,l,c){const u=this.elements;return u[0]=e,u[1]=i,u[2]=s,u[3]=n,u[4]=o,u[5]=l,u[6]=r,u[7]=a,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],this}extractBasis(e,n,r){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,i=n.elements,o=this.elements,a=r[0],s=r[3],l=r[6],c=r[1],u=r[4],f=r[7],h=r[2],p=r[5],y=r[8],g=i[0],v=i[3],b=i[6],w=i[1],T=i[4],C=i[7],P=i[2],M=i[5],k=i[8];return o[0]=a*g+s*w+l*P,o[3]=a*v+s*T+l*M,o[6]=a*b+s*C+l*k,o[1]=c*g+u*w+f*P,o[4]=c*v+u*T+f*M,o[7]=c*b+u*C+f*k,o[2]=h*g+p*w+y*P,o[5]=h*v+p*T+y*M,o[8]=h*b+p*C+y*k,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],l=e[6],c=e[7],u=e[8];return n*a*u-n*s*c-r*o*u+r*s*l+i*o*c-i*a*l}invert(){const e=this.elements,n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],l=e[6],c=e[7],u=e[8],f=u*a-s*c,h=s*l-u*o,p=c*o-a*l,y=n*f+r*h+i*p;if(y===0)return this.set(0,0,0,0,0,0,0,0,0);const g=1/y;return e[0]=f*g,e[1]=(i*c-u*r)*g,e[2]=(s*r-i*a)*g,e[3]=h*g,e[4]=(u*n-i*l)*g,e[5]=(i*o-s*n)*g,e[6]=p*g,e[7]=(r*l-c*n)*g,e[8]=(a*n-r*o)*g,this}transpose(){let e;const n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,r,i,o,a,s){const l=Math.cos(o),c=Math.sin(o);return this.set(r*l,r*c,-r*(l*a+c*s)+a+e,-i*c,i*l,-i*(-c*a+l*s)+s+n,0,0,1),this}scale(e,n){const r=this.elements;return r[0]*=e,r[3]*=e,r[6]*=e,r[1]*=n,r[4]*=n,r[7]*=n,this}rotate(e){const n=Math.cos(e),r=Math.sin(e),i=this.elements,o=i[0],a=i[3],s=i[6],l=i[1],c=i[4],u=i[7];return i[0]=n*o+r*l,i[3]=n*a+r*c,i[6]=n*s+r*u,i[1]=-r*o+n*l,i[4]=-r*a+n*c,i[7]=-r*s+n*u,this}translate(e,n){const r=this.elements;return r[0]+=e*r[2],r[3]+=e*r[5],r[6]+=e*r[8],r[1]+=n*r[2],r[4]+=n*r[5],r[7]+=n*r[8],this}equals(e){const n=this.elements,r=e.elements;for(let i=0;i<9;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<9;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}zi.prototype.isMatrix3=!0;function tle(t){if(t.length===0)return-1/0;let e=t[0];for(let n=1,r=t.length;n<r;++n)t[n]>e&&(e=t[n]);return e}const sHe={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function zy(t,e){return new sHe[t](e)}function l2(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}let Yg;class jm{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{Yg===void 0&&(Yg=l2("canvas")),Yg.width=e.width,Yg.height=e.height;const r=Yg.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),n=Yg}return n.width>2048||n.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),n.toDataURL("image/jpeg",.6)):n.toDataURL("image/png")}}let lHe=0;class Hi extends mh{constructor(e=Hi.DEFAULT_IMAGE,n=Hi.DEFAULT_MAPPING,r=$o,i=$o,o=Xr,a=Nm,s=ro,l=Zc,c=1,u=Vo){super(),Object.defineProperty(this,"id",{value:lHe++}),this.uuid=Ns(),this.name="",this.image=e,this.mipmaps=[],this.mapping=n,this.wrapS=r,this.wrapT=i,this.magFilter=o,this.minFilter=a,this.anisotropy=c,this.format=s,this.internalFormat=null,this.type=l,this.offset=new rt(0,0),this.repeat=new rt(1,1),this.center=new rt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new zi,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=u,this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(this.image!==void 0){const i=this.image;if(i.uuid===void 0&&(i.uuid=Ns()),!n&&e.images[i.uuid]===void 0){let o;if(Array.isArray(i)){o=[];for(let a=0,s=i.length;a<s;a++)i[a].isDataTexture?o.push(Sj(i[a].image)):o.push(Sj(i[a]))}else o=Sj(i);e.images[i.uuid]={uuid:i.uuid,url:o}}r.image=i.uuid}return n||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==i2)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case r1:e.x=e.x-Math.floor(e.x);break;case $o:e.x=e.x<0?0:1;break;case i1:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case r1:e.y=e.y-Math.floor(e.y);break;case $o:e.y=e.y<0?0:1;break;case i1:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&this.version++}}Hi.DEFAULT_IMAGE=void 0;Hi.DEFAULT_MAPPING=i2;Hi.prototype.isTexture=!0;function Sj(t){return typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap?jm.getDataURL(t):t.data?{data:Array.prototype.slice.call(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}class Kn{constructor(e=0,n=0,r=0,i=1){this.x=e,this.y=n,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,r,i){return this.x=e,this.y=n,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e,n){return n!==void 0?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,n)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e,n){return n!==void 0?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,n)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const n=this.x,r=this.y,i=this.z,o=this.w,a=e.elements;return this.x=a[0]*n+a[4]*r+a[8]*i+a[12]*o,this.y=a[1]*n+a[5]*r+a[9]*i+a[13]*o,this.z=a[2]*n+a[6]*r+a[10]*i+a[14]*o,this.w=a[3]*n+a[7]*r+a[11]*i+a[15]*o,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,r,i,o;const l=e.elements,c=l[0],u=l[4],f=l[8],h=l[1],p=l[5],y=l[9],g=l[2],v=l[6],b=l[10];if(Math.abs(u-h)<.01&&Math.abs(f-g)<.01&&Math.abs(y-v)<.01){if(Math.abs(u+h)<.1&&Math.abs(f+g)<.1&&Math.abs(y+v)<.1&&Math.abs(c+p+b-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const T=(c+1)/2,C=(p+1)/2,P=(b+1)/2,M=(u+h)/4,k=(f+g)/4,I=(y+v)/4;return T>C&&T>P?T<.01?(r=0,i=.707106781,o=.707106781):(r=Math.sqrt(T),i=M/r,o=k/r):C>P?C<.01?(r=.707106781,i=0,o=.707106781):(i=Math.sqrt(C),r=M/i,o=I/i):P<.01?(r=.707106781,i=.707106781,o=0):(o=Math.sqrt(P),r=k/o,i=I/o),this.set(r,i,o,n),this}let w=Math.sqrt((v-y)*(v-y)+(f-g)*(f-g)+(h-u)*(h-u));return Math.abs(w)<.001&&(w=1),this.x=(v-y)/w,this.y=(f-g)/w,this.z=(h-u)/w,this.w=Math.acos((c+p+b-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this.w=Math.max(e.w,Math.min(n.w,this.w)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this.w=Math.max(e,Math.min(n,this.w)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this.w=e.w+(n.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n,r){return r!==void 0&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}Kn.prototype.isVector4=!0;class ic extends mh{constructor(e,n,r={}){super(),this.width=e,this.height=n,this.depth=1,this.scissor=new Kn(0,0,e,n),this.scissorTest=!1,this.viewport=new Kn(0,0,e,n),this.texture=new Hi(void 0,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),this.texture.isRenderTargetTexture=!0,this.texture.image={width:e,height:n,depth:1},this.texture.generateMipmaps=r.generateMipmaps!==void 0?r.generateMipmaps:!1,this.texture.internalFormat=r.internalFormat!==void 0?r.internalFormat:null,this.texture.minFilter=r.minFilter!==void 0?r.minFilter:Xr,this.depthBuffer=r.depthBuffer!==void 0?r.depthBuffer:!0,this.stencilBuffer=r.stencilBuffer!==void 0?r.stencilBuffer:!1,this.depthTexture=r.depthTexture!==void 0?r.depthTexture:null}setTexture(e){e.image={width:this.width,height:this.height,depth:this.depth},this.texture=e}setSize(e,n,r=1){(this.width!==e||this.height!==n||this.depth!==r)&&(this.width=e,this.height=n,this.depth=r,this.texture.image.width=e,this.texture.image.height=n,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}clone(){return new this.constructor().copy(this)}copy(e){return this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.image={...this.texture.image},this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this}dispose(){this.dispatchEvent({type:"dispose"})}}ic.prototype.isWebGLRenderTarget=!0;class nle extends ic{constructor(e,n,r){super(e,n);const i=this.texture;this.texture=[];for(let o=0;o<r;o++)this.texture[o]=i.clone()}setSize(e,n,r=1){if(this.width!==e||this.height!==n||this.depth!==r){this.width=e,this.height=n,this.depth=r;for(let i=0,o=this.texture.length;i<o;i++)this.texture[i].image.width=e,this.texture[i].image.height=n,this.texture[i].image.depth=r;this.dispose()}return this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this.texture.length=0;for(let n=0,r=e.texture.length;n<r;n++)this.texture[n]=e.texture[n].clone();return this}}nle.prototype.isWebGLMultipleRenderTargets=!0;class D5 extends ic{constructor(e,n,r){super(e,n,r),this.samples=4}copy(e){return super.copy.call(this,e),this.samples=e.samples,this}}D5.prototype.isWebGLMultisampleRenderTarget=!0;class io{constructor(e=0,n=0,r=0,i=1){this._x=e,this._y=n,this._z=r,this._w=i}static slerp(e,n,r,i){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),r.slerpQuaternions(e,n,i)}static slerpFlat(e,n,r,i,o,a,s){let l=r[i+0],c=r[i+1],u=r[i+2],f=r[i+3];const h=o[a+0],p=o[a+1],y=o[a+2],g=o[a+3];if(s===0){e[n+0]=l,e[n+1]=c,e[n+2]=u,e[n+3]=f;return}if(s===1){e[n+0]=h,e[n+1]=p,e[n+2]=y,e[n+3]=g;return}if(f!==g||l!==h||c!==p||u!==y){let v=1-s;const b=l*h+c*p+u*y+f*g,w=b>=0?1:-1,T=1-b*b;if(T>Number.EPSILON){const P=Math.sqrt(T),M=Math.atan2(P,b*w);v=Math.sin(v*M)/P,s=Math.sin(s*M)/P}const C=s*w;if(l=l*v+h*C,c=c*v+p*C,u=u*v+y*C,f=f*v+g*C,v===1-s){const P=1/Math.sqrt(l*l+c*c+u*u+f*f);l*=P,c*=P,u*=P,f*=P}}e[n]=l,e[n+1]=c,e[n+2]=u,e[n+3]=f}static multiplyQuaternionsFlat(e,n,r,i,o,a){const s=r[i],l=r[i+1],c=r[i+2],u=r[i+3],f=o[a],h=o[a+1],p=o[a+2],y=o[a+3];return e[n]=s*y+u*f+l*p-c*h,e[n+1]=l*y+u*h+c*f-s*p,e[n+2]=c*y+u*p+s*h-l*f,e[n+3]=u*y-s*f-l*h-c*p,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,r,i){return this._x=e,this._y=n,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n){if(!(e&&e.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const r=e._x,i=e._y,o=e._z,a=e._order,s=Math.cos,l=Math.sin,c=s(r/2),u=s(i/2),f=s(o/2),h=l(r/2),p=l(i/2),y=l(o/2);switch(a){case"XYZ":this._x=h*u*f+c*p*y,this._y=c*p*f-h*u*y,this._z=c*u*y+h*p*f,this._w=c*u*f-h*p*y;break;case"YXZ":this._x=h*u*f+c*p*y,this._y=c*p*f-h*u*y,this._z=c*u*y-h*p*f,this._w=c*u*f+h*p*y;break;case"ZXY":this._x=h*u*f-c*p*y,this._y=c*p*f+h*u*y,this._z=c*u*y+h*p*f,this._w=c*u*f-h*p*y;break;case"ZYX":this._x=h*u*f-c*p*y,this._y=c*p*f+h*u*y,this._z=c*u*y-h*p*f,this._w=c*u*f+h*p*y;break;case"YZX":this._x=h*u*f+c*p*y,this._y=c*p*f+h*u*y,this._z=c*u*y-h*p*f,this._w=c*u*f-h*p*y;break;case"XZY":this._x=h*u*f-c*p*y,this._y=c*p*f-h*u*y,this._z=c*u*y+h*p*f,this._w=c*u*f+h*p*y;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return n!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const r=n/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,r=n[0],i=n[4],o=n[8],a=n[1],s=n[5],l=n[9],c=n[2],u=n[6],f=n[10],h=r+s+f;if(h>0){const p=.5/Math.sqrt(h+1);this._w=.25/p,this._x=(u-l)*p,this._y=(o-c)*p,this._z=(a-i)*p}else if(r>s&&r>f){const p=2*Math.sqrt(1+r-s-f);this._w=(u-l)/p,this._x=.25*p,this._y=(i+a)/p,this._z=(o+c)/p}else if(s>f){const p=2*Math.sqrt(1+s-r-f);this._w=(o-c)/p,this._x=(i+a)/p,this._y=.25*p,this._z=(l+u)/p}else{const p=2*Math.sqrt(1+f-r-s);this._w=(a-i)/p,this._x=(o+c)/p,this._y=(l+u)/p,this._z=.25*p}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let r=e.dot(n)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Bo(this.dot(e),-1,1)))}rotateTowards(e,n){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,n/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e,n){return n!==void 0?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,n)):this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const r=e._x,i=e._y,o=e._z,a=e._w,s=n._x,l=n._y,c=n._z,u=n._w;return this._x=r*u+a*s+i*c-o*l,this._y=i*u+a*l+o*s-r*c,this._z=o*u+a*c+r*l-i*s,this._w=a*u-r*s-i*l-o*c,this._onChangeCallback(),this}slerp(e,n){if(n===0)return this;if(n===1)return this.copy(e);const r=this._x,i=this._y,o=this._z,a=this._w;let s=a*e._w+r*e._x+i*e._y+o*e._z;if(s<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,s=-s):this.copy(e),s>=1)return this._w=a,this._x=r,this._y=i,this._z=o,this;const l=1-s*s;if(l<=Number.EPSILON){const p=1-n;return this._w=p*a+n*this._w,this._x=p*r+n*this._x,this._y=p*i+n*this._y,this._z=p*o+n*this._z,this.normalize(),this._onChangeCallback(),this}const c=Math.sqrt(l),u=Math.atan2(c,s),f=Math.sin((1-n)*u)/c,h=Math.sin(n*u)/c;return this._w=a*f+this._w*h,this._x=r*f+this._x*h,this._y=i*f+this._y*h,this._z=o*f+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,n,r){this.copy(e).slerp(n,r)}random(){const e=Math.random(),n=Math.sqrt(1-e),r=Math.sqrt(e),i=2*Math.PI*Math.random(),o=2*Math.PI*Math.random();return this.set(n*Math.cos(i),r*Math.sin(o),r*Math.cos(o),n*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n=0){return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}io.prototype.isQuaternion=!0;class ge{constructor(e=0,n=0,r=0){this.x=e,this.y=n,this.z=r}set(e,n,r){return r===void 0&&(r=this.z),this.x=e,this.y=n,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e,n){return n!==void 0?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,n)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e,n){return n!==void 0?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,n)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e,n){return n!==void 0?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,n)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(bq.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(bq.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,r=this.y,i=this.z,o=e.elements;return this.x=o[0]*n+o[3]*r+o[6]*i,this.y=o[1]*n+o[4]*r+o[7]*i,this.z=o[2]*n+o[5]*r+o[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const n=this.x,r=this.y,i=this.z,o=e.elements,a=1/(o[3]*n+o[7]*r+o[11]*i+o[15]);return this.x=(o[0]*n+o[4]*r+o[8]*i+o[12])*a,this.y=(o[1]*n+o[5]*r+o[9]*i+o[13])*a,this.z=(o[2]*n+o[6]*r+o[10]*i+o[14])*a,this}applyQuaternion(e){const n=this.x,r=this.y,i=this.z,o=e.x,a=e.y,s=e.z,l=e.w,c=l*n+a*i-s*r,u=l*r+s*n-o*i,f=l*i+o*r-a*n,h=-o*n-a*r-s*i;return this.x=c*l+h*-o+u*-s-f*-a,this.y=u*l+h*-a+f*-o-c*-s,this.z=f*l+h*-s+c*-a-u*-o,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const n=this.x,r=this.y,i=this.z,o=e.elements;return this.x=o[0]*n+o[4]*r+o[8]*i,this.y=o[1]*n+o[5]*r+o[9]*i,this.z=o[2]*n+o[6]*r+o[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this}cross(e,n){return n!==void 0?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,n)):this.crossVectors(this,e)}crossVectors(e,n){const r=e.x,i=e.y,o=e.z,a=n.x,s=n.y,l=n.z;return this.x=i*l-o*s,this.y=o*a-r*l,this.z=r*s-i*a,this}projectOnVector(e){const n=e.lengthSq();if(n===0)return this.set(0,0,0);const r=e.dot(this)/n;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return Ej.copy(this).projectOnVector(e),this.sub(Ej)}reflect(e){return this.sub(Ej.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(Bo(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return n*n+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,r){const i=Math.sin(n)*e;return this.x=i*Math.sin(r),this.y=Math.cos(n)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,r){return this.x=e*Math.sin(n),this.y=r,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=r,this.z=i,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n,r){return r!==void 0&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,n=Math.random()*Math.PI*2,r=Math.sqrt(1-e**2);return this.x=r*Math.cos(n),this.y=r*Math.sin(n),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}ge.prototype.isVector3=!0;const Ej=new ge,bq=new io;class es{constructor(e=new ge(1/0,1/0,1/0),n=new ge(-1/0,-1/0,-1/0)){this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){let n=1/0,r=1/0,i=1/0,o=-1/0,a=-1/0,s=-1/0;for(let l=0,c=e.length;l<c;l+=3){const u=e[l],f=e[l+1],h=e[l+2];u<n&&(n=u),f<r&&(r=f),h<i&&(i=h),u>o&&(o=u),f>a&&(a=f),h>s&&(s=h)}return this.min.set(n,r,i),this.max.set(o,a,s),this}setFromBufferAttribute(e){let n=1/0,r=1/0,i=1/0,o=-1/0,a=-1/0,s=-1/0;for(let l=0,c=e.count;l<c;l++){const u=e.getX(l),f=e.getY(l),h=e.getZ(l);u<n&&(n=u),f<r&&(r=f),h<i&&(i=h),u>o&&(o=u),f>a&&(a=f),h>s&&(s=h)}return this.min.set(n,r,i),this.max.set(o,a,s),this}setFromPoints(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const r=nw.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e){return this.makeEmpty(),this.expandByObject(e)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e){e.updateWorldMatrix(!1,!1);const n=e.geometry;n!==void 0&&(n.boundingBox===null&&n.computeBoundingBox(),_j.copy(n.boundingBox),_j.applyMatrix4(e.matrixWorld),this.union(_j));const r=e.children;for(let i=0,o=r.length;i<o;i++)this.expandByObject(r[i]);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,nw),nw.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let n,r;return e.normal.x>0?(n=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),n<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(rw),e_.subVectors(this.max,rw),Xg.subVectors(e.a,rw),Kg.subVectors(e.b,rw),Jg.subVectors(e.c,rw),ff.subVectors(Kg,Xg),hf.subVectors(Jg,Kg),rp.subVectors(Xg,Jg);let n=[0,-ff.z,ff.y,0,-hf.z,hf.y,0,-rp.z,rp.y,ff.z,0,-ff.x,hf.z,0,-hf.x,rp.z,0,-rp.x,-ff.y,ff.x,0,-hf.y,hf.x,0,-rp.y,rp.x,0];return!Tj(n,Xg,Kg,Jg,e_)||(n=[1,0,0,0,1,0,0,0,1],!Tj(n,Xg,Kg,Jg,e_))?!1:(t_.crossVectors(ff,hf),n=[t_.x,t_.y,t_.z],Tj(n,Xg,Kg,Jg,e_))}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return nw.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=this.getSize(nw).length()*.5,e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Bu[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Bu[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Bu[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Bu[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Bu[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Bu[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Bu[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Bu[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Bu),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}es.prototype.isBox3=!0;const Bu=[new ge,new ge,new ge,new ge,new ge,new ge,new ge,new ge],nw=new ge,_j=new es,Xg=new ge,Kg=new ge,Jg=new ge,ff=new ge,hf=new ge,rp=new ge,rw=new ge,e_=new ge,t_=new ge,ip=new ge;function Tj(t,e,n,r,i){for(let o=0,a=t.length-3;o<=a;o+=3){ip.fromArray(t,o);const s=i.x*Math.abs(ip.x)+i.y*Math.abs(ip.y)+i.z*Math.abs(ip.z),l=e.dot(ip),c=n.dot(ip),u=r.dot(ip);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>s)return!1}return!0}const cHe=new es,Sq=new ge,Cj=new ge,Aj=new ge;class Ad{constructor(e=new ge,n=-1){this.center=e,this.radius=n}set(e,n){return this.center.copy(e),this.radius=n,this}setFromPoints(e,n){const r=this.center;n!==void 0?r.copy(n):cHe.setFromPoints(e).getCenter(r);let i=0;for(let o=0,a=e.length;o<a;o++)i=Math.max(i,r.distanceToSquared(e[o]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,n){const r=this.center.distanceToSquared(e);return n.copy(e),r>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){Aj.subVectors(e,this.center);const n=Aj.lengthSq();if(n>this.radius*this.radius){const r=Math.sqrt(n),i=(r-this.radius)*.5;this.center.add(Aj.multiplyScalar(i/r)),this.radius+=i}return this}union(e){return Cj.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(Sq.copy(e.center).add(Cj)),this.expandByPoint(Sq.copy(e.center).sub(Cj)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const $u=new ge,Mj=new ge,n_=new ge,pf=new ge,Pj=new ge,r_=new ge,kj=new ge;class Md{constructor(e=new ge,n=new ge(0,0,-1)){this.origin=e,this.direction=n}set(e,n){return this.origin.copy(e),this.direction.copy(n),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,n){return n.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,$u)),this}closestPointToPoint(e,n){n.subVectors(e,this.origin);const r=n.dot(this.direction);return r<0?n.copy(this.origin):n.copy(this.direction).multiplyScalar(r).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const n=$u.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):($u.copy(this.direction).multiplyScalar(n).add(this.origin),$u.distanceToSquared(e))}distanceSqToSegment(e,n,r,i){Mj.copy(e).add(n).multiplyScalar(.5),n_.copy(n).sub(e).normalize(),pf.copy(this.origin).sub(Mj);const o=e.distanceTo(n)*.5,a=-this.direction.dot(n_),s=pf.dot(this.direction),l=-pf.dot(n_),c=pf.lengthSq(),u=Math.abs(1-a*a);let f,h,p,y;if(u>0)if(f=a*l-s,h=a*s-l,y=o*u,f>=0)if(h>=-y)if(h<=y){const g=1/u;f*=g,h*=g,p=f*(f+a*h+2*s)+h*(a*f+h+2*l)+c}else h=o,f=Math.max(0,-(a*h+s)),p=-f*f+h*(h+2*l)+c;else h=-o,f=Math.max(0,-(a*h+s)),p=-f*f+h*(h+2*l)+c;else h<=-y?(f=Math.max(0,-(-a*o+s)),h=f>0?-o:Math.min(Math.max(-o,-l),o),p=-f*f+h*(h+2*l)+c):h<=y?(f=0,h=Math.min(Math.max(-o,-l),o),p=h*(h+2*l)+c):(f=Math.max(0,-(a*o+s)),h=f>0?o:Math.min(Math.max(-o,-l),o),p=-f*f+h*(h+2*l)+c);else h=a>0?-o:o,f=Math.max(0,-(a*h+s)),p=-f*f+h*(h+2*l)+c;return r&&r.copy(this.direction).multiplyScalar(f).add(this.origin),i&&i.copy(n_).multiplyScalar(h).add(Mj),p}intersectSphere(e,n){$u.subVectors(e.center,this.origin);const r=$u.dot(this.direction),i=$u.dot($u)-r*r,o=e.radius*e.radius;if(i>o)return null;const a=Math.sqrt(o-i),s=r-a,l=r+a;return s<0&&l<0?null:s<0?this.at(l,n):this.at(s,n)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const n=e.normal.dot(this.direction);if(n===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/n;return r>=0?r:null}intersectPlane(e,n){const r=this.distanceToPlane(e);return r===null?null:this.at(r,n)}intersectsPlane(e){const n=e.distanceToPoint(this.origin);return n===0||e.normal.dot(this.direction)*n<0}intersectBox(e,n){let r,i,o,a,s,l;const c=1/this.direction.x,u=1/this.direction.y,f=1/this.direction.z,h=this.origin;return c>=0?(r=(e.min.x-h.x)*c,i=(e.max.x-h.x)*c):(r=(e.max.x-h.x)*c,i=(e.min.x-h.x)*c),u>=0?(o=(e.min.y-h.y)*u,a=(e.max.y-h.y)*u):(o=(e.max.y-h.y)*u,a=(e.min.y-h.y)*u),r>a||o>i||((o>r||r!==r)&&(r=o),(a<i||i!==i)&&(i=a),f>=0?(s=(e.min.z-h.z)*f,l=(e.max.z-h.z)*f):(s=(e.max.z-h.z)*f,l=(e.min.z-h.z)*f),r>l||s>i)||((s>r||r!==r)&&(r=s),(l<i||i!==i)&&(i=l),i<0)?null:this.at(r>=0?r:i,n)}intersectsBox(e){return this.intersectBox(e,$u)!==null}intersectTriangle(e,n,r,i,o){Pj.subVectors(n,e),r_.subVectors(r,e),kj.crossVectors(Pj,r_);let a=this.direction.dot(kj),s;if(a>0){if(i)return null;s=1}else if(a<0)s=-1,a=-a;else return null;pf.subVectors(this.origin,e);const l=s*this.direction.dot(r_.crossVectors(pf,r_));if(l<0)return null;const c=s*this.direction.dot(Pj.cross(pf));if(c<0||l+c>a)return null;const u=-s*pf.dot(kj);return u<0?null:this.at(u/a,o)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Ut{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(e,n,r,i,o,a,s,l,c,u,f,h,p,y,g,v){const b=this.elements;return b[0]=e,b[4]=n,b[8]=r,b[12]=i,b[1]=o,b[5]=a,b[9]=s,b[13]=l,b[2]=c,b[6]=u,b[10]=f,b[14]=h,b[3]=p,b[7]=y,b[11]=g,b[15]=v,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Ut().fromArray(this.elements)}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],this}copyPosition(e){const n=this.elements,r=e.elements;return n[12]=r[12],n[13]=r[13],n[14]=r[14],this}setFromMatrix3(e){const n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,r){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,n,r){return this.set(e.x,n.x,r.x,0,e.y,n.y,r.y,0,e.z,n.z,r.z,0,0,0,0,1),this}extractRotation(e){const n=this.elements,r=e.elements,i=1/Zg.setFromMatrixColumn(e,0).length(),o=1/Zg.setFromMatrixColumn(e,1).length(),a=1/Zg.setFromMatrixColumn(e,2).length();return n[0]=r[0]*i,n[1]=r[1]*i,n[2]=r[2]*i,n[3]=0,n[4]=r[4]*o,n[5]=r[5]*o,n[6]=r[6]*o,n[7]=0,n[8]=r[8]*a,n[9]=r[9]*a,n[10]=r[10]*a,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const n=this.elements,r=e.x,i=e.y,o=e.z,a=Math.cos(r),s=Math.sin(r),l=Math.cos(i),c=Math.sin(i),u=Math.cos(o),f=Math.sin(o);if(e.order==="XYZ"){const h=a*u,p=a*f,y=s*u,g=s*f;n[0]=l*u,n[4]=-l*f,n[8]=c,n[1]=p+y*c,n[5]=h-g*c,n[9]=-s*l,n[2]=g-h*c,n[6]=y+p*c,n[10]=a*l}else if(e.order==="YXZ"){const h=l*u,p=l*f,y=c*u,g=c*f;n[0]=h+g*s,n[4]=y*s-p,n[8]=a*c,n[1]=a*f,n[5]=a*u,n[9]=-s,n[2]=p*s-y,n[6]=g+h*s,n[10]=a*l}else if(e.order==="ZXY"){const h=l*u,p=l*f,y=c*u,g=c*f;n[0]=h-g*s,n[4]=-a*f,n[8]=y+p*s,n[1]=p+y*s,n[5]=a*u,n[9]=g-h*s,n[2]=-a*c,n[6]=s,n[10]=a*l}else if(e.order==="ZYX"){const h=a*u,p=a*f,y=s*u,g=s*f;n[0]=l*u,n[4]=y*c-p,n[8]=h*c+g,n[1]=l*f,n[5]=g*c+h,n[9]=p*c-y,n[2]=-c,n[6]=s*l,n[10]=a*l}else if(e.order==="YZX"){const h=a*l,p=a*c,y=s*l,g=s*c;n[0]=l*u,n[4]=g-h*f,n[8]=y*f+p,n[1]=f,n[5]=a*u,n[9]=-s*u,n[2]=-c*u,n[6]=p*f+y,n[10]=h-g*f}else if(e.order==="XZY"){const h=a*l,p=a*c,y=s*l,g=s*c;n[0]=l*u,n[4]=-f,n[8]=c*u,n[1]=h*f+g,n[5]=a*u,n[9]=p*f-y,n[2]=y*f-p,n[6]=s*u,n[10]=g*f+h}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(uHe,e,dHe)}lookAt(e,n,r){const i=this.elements;return gs.subVectors(e,n),gs.lengthSq()===0&&(gs.z=1),gs.normalize(),mf.crossVectors(r,gs),mf.lengthSq()===0&&(Math.abs(r.z)===1?gs.x+=1e-4:gs.z+=1e-4,gs.normalize(),mf.crossVectors(r,gs)),mf.normalize(),i_.crossVectors(gs,mf),i[0]=mf.x,i[4]=i_.x,i[8]=gs.x,i[1]=mf.y,i[5]=i_.y,i[9]=gs.y,i[2]=mf.z,i[6]=i_.z,i[10]=gs.z,this}multiply(e,n){return n!==void 0?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,n)):this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,i=n.elements,o=this.elements,a=r[0],s=r[4],l=r[8],c=r[12],u=r[1],f=r[5],h=r[9],p=r[13],y=r[2],g=r[6],v=r[10],b=r[14],w=r[3],T=r[7],C=r[11],P=r[15],M=i[0],k=i[4],I=i[8],U=i[12],z=i[1],O=i[5],B=i[9],$=i[13],F=i[2],J=i[6],K=i[10],Z=i[14],H=i[3],Y=i[7],L=i[11],N=i[15];return o[0]=a*M+s*z+l*F+c*H,o[4]=a*k+s*O+l*J+c*Y,o[8]=a*I+s*B+l*K+c*L,o[12]=a*U+s*$+l*Z+c*N,o[1]=u*M+f*z+h*F+p*H,o[5]=u*k+f*O+h*J+p*Y,o[9]=u*I+f*B+h*K+p*L,o[13]=u*U+f*$+h*Z+p*N,o[2]=y*M+g*z+v*F+b*H,o[6]=y*k+g*O+v*J+b*Y,o[10]=y*I+g*B+v*K+b*L,o[14]=y*U+g*$+v*Z+b*N,o[3]=w*M+T*z+C*F+P*H,o[7]=w*k+T*O+C*J+P*Y,o[11]=w*I+T*B+C*K+P*L,o[15]=w*U+T*$+C*Z+P*N,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[4],i=e[8],o=e[12],a=e[1],s=e[5],l=e[9],c=e[13],u=e[2],f=e[6],h=e[10],p=e[14],y=e[3],g=e[7],v=e[11],b=e[15];return y*(+o*l*f-i*c*f-o*s*h+r*c*h+i*s*p-r*l*p)+g*(+n*l*p-n*c*h+o*a*h-i*a*p+i*c*u-o*l*u)+v*(+n*c*f-n*s*p-o*a*f+r*a*p+o*s*u-r*c*u)+b*(-i*s*u-n*l*f+n*s*h+i*a*f-r*a*h+r*l*u)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=n,i[14]=r),this}invert(){const e=this.elements,n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],l=e[6],c=e[7],u=e[8],f=e[9],h=e[10],p=e[11],y=e[12],g=e[13],v=e[14],b=e[15],w=f*v*c-g*h*c+g*l*p-s*v*p-f*l*b+s*h*b,T=y*h*c-u*v*c-y*l*p+a*v*p+u*l*b-a*h*b,C=u*g*c-y*f*c+y*s*p-a*g*p-u*s*b+a*f*b,P=y*f*l-u*g*l-y*s*h+a*g*h+u*s*v-a*f*v,M=n*w+r*T+i*C+o*P;if(M===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const k=1/M;return e[0]=w*k,e[1]=(g*h*o-f*v*o-g*i*p+r*v*p+f*i*b-r*h*b)*k,e[2]=(s*v*o-g*l*o+g*i*c-r*v*c-s*i*b+r*l*b)*k,e[3]=(f*l*o-s*h*o-f*i*c+r*h*c+s*i*p-r*l*p)*k,e[4]=T*k,e[5]=(u*v*o-y*h*o+y*i*p-n*v*p-u*i*b+n*h*b)*k,e[6]=(y*l*o-a*v*o-y*i*c+n*v*c+a*i*b-n*l*b)*k,e[7]=(a*h*o-u*l*o+u*i*c-n*h*c-a*i*p+n*l*p)*k,e[8]=C*k,e[9]=(y*f*o-u*g*o-y*r*p+n*g*p+u*r*b-n*f*b)*k,e[10]=(a*g*o-y*s*o+y*r*c-n*g*c-a*r*b+n*s*b)*k,e[11]=(u*s*o-a*f*o-u*r*c+n*f*c+a*r*p-n*s*p)*k,e[12]=P*k,e[13]=(u*g*i-y*f*i+y*r*h-n*g*h-u*r*v+n*f*v)*k,e[14]=(y*s*i-a*g*i-y*r*l+n*g*l+a*r*v-n*s*v)*k,e[15]=(a*f*i-u*s*i+u*r*l-n*f*l-a*r*h+n*s*h)*k,this}scale(e){const n=this.elements,r=e.x,i=e.y,o=e.z;return n[0]*=r,n[4]*=i,n[8]*=o,n[1]*=r,n[5]*=i,n[9]*=o,n[2]*=r,n[6]*=i,n[10]*=o,n[3]*=r,n[7]*=i,n[11]*=o,this}getMaxScaleOnAxis(){const e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,r,i))}makeTranslation(e,n,r){return this.set(1,0,0,e,0,1,0,n,0,0,1,r,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,n,-r,0,0,r,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,0,r,0,0,1,0,0,-r,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,0,r,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const r=Math.cos(n),i=Math.sin(n),o=1-r,a=e.x,s=e.y,l=e.z,c=o*a,u=o*s;return this.set(c*a+r,c*s-i*l,c*l+i*s,0,c*s+i*l,u*s+r,u*l-i*a,0,c*l-i*s,u*l+i*a,o*l*l+r,0,0,0,0,1),this}makeScale(e,n,r){return this.set(e,0,0,0,0,n,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,n,r,i,o,a){return this.set(1,r,o,0,e,1,a,0,n,i,1,0,0,0,0,1),this}compose(e,n,r){const i=this.elements,o=n._x,a=n._y,s=n._z,l=n._w,c=o+o,u=a+a,f=s+s,h=o*c,p=o*u,y=o*f,g=a*u,v=a*f,b=s*f,w=l*c,T=l*u,C=l*f,P=r.x,M=r.y,k=r.z;return i[0]=(1-(g+b))*P,i[1]=(p+C)*P,i[2]=(y-T)*P,i[3]=0,i[4]=(p-C)*M,i[5]=(1-(h+b))*M,i[6]=(v+w)*M,i[7]=0,i[8]=(y+T)*k,i[9]=(v-w)*k,i[10]=(1-(h+g))*k,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,n,r){const i=this.elements;let o=Zg.set(i[0],i[1],i[2]).length();const a=Zg.set(i[4],i[5],i[6]).length(),s=Zg.set(i[8],i[9],i[10]).length();this.determinant()<0&&(o=-o),e.x=i[12],e.y=i[13],e.z=i[14],Fl.copy(this);const c=1/o,u=1/a,f=1/s;return Fl.elements[0]*=c,Fl.elements[1]*=c,Fl.elements[2]*=c,Fl.elements[4]*=u,Fl.elements[5]*=u,Fl.elements[6]*=u,Fl.elements[8]*=f,Fl.elements[9]*=f,Fl.elements[10]*=f,n.setFromRotationMatrix(Fl),r.x=o,r.y=a,r.z=s,this}makePerspective(e,n,r,i,o,a){a===void 0&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const s=this.elements,l=2*o/(n-e),c=2*o/(r-i),u=(n+e)/(n-e),f=(r+i)/(r-i),h=-(a+o)/(a-o),p=-2*a*o/(a-o);return s[0]=l,s[4]=0,s[8]=u,s[12]=0,s[1]=0,s[5]=c,s[9]=f,s[13]=0,s[2]=0,s[6]=0,s[10]=h,s[14]=p,s[3]=0,s[7]=0,s[11]=-1,s[15]=0,this}makeOrthographic(e,n,r,i,o,a){const s=this.elements,l=1/(n-e),c=1/(r-i),u=1/(a-o),f=(n+e)*l,h=(r+i)*c,p=(a+o)*u;return s[0]=2*l,s[4]=0,s[8]=0,s[12]=-f,s[1]=0,s[5]=2*c,s[9]=0,s[13]=-h,s[2]=0,s[6]=0,s[10]=-2*u,s[14]=-p,s[3]=0,s[7]=0,s[11]=0,s[15]=1,this}equals(e){const n=this.elements,r=e.elements;for(let i=0;i<16;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<16;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e[n+9]=r[9],e[n+10]=r[10],e[n+11]=r[11],e[n+12]=r[12],e[n+13]=r[13],e[n+14]=r[14],e[n+15]=r[15],e}}Ut.prototype.isMatrix4=!0;const Zg=new ge,Fl=new Ut,uHe=new ge(0,0,0),dHe=new ge(1,1,1),mf=new ge,i_=new ge,gs=new ge,Eq=new Ut,_q=new io;class Im{constructor(e=0,n=0,r=0,i=Im.DefaultOrder){this._x=e,this._y=n,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,r,i=this._order){return this._x=e,this._y=n,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,r=!0){const i=e.elements,o=i[0],a=i[4],s=i[8],l=i[1],c=i[5],u=i[9],f=i[2],h=i[6],p=i[10];switch(n){case"XYZ":this._y=Math.asin(Bo(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-u,p),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(h,c),this._z=0);break;case"YXZ":this._x=Math.asin(-Bo(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(s,p),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-f,o),this._z=0);break;case"ZXY":this._x=Math.asin(Bo(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-f,p),this._z=Math.atan2(-a,c)):(this._y=0,this._z=Math.atan2(l,o));break;case"ZYX":this._y=Math.asin(-Bo(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(h,p),this._z=Math.atan2(l,o)):(this._x=0,this._z=Math.atan2(-a,c));break;case"YZX":this._z=Math.asin(Bo(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-f,o)):(this._x=0,this._y=Math.atan2(s,p));break;case"XZY":this._z=Math.asin(-Bo(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(h,c),this._y=Math.atan2(s,o)):(this._x=Math.atan2(-u,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,n,r){return Eq.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Eq,n,r)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return _q.setFromEuler(this),this.setFromQuaternion(_q,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}toVector3(e){return e?e.set(this._x,this._y,this._z):new ge(this._x,this._y,this._z)}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}Im.prototype.isEuler=!0;Im.DefaultOrder="XYZ";Im.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class iv{constructor(){this.mask=1}set(e){this.mask=1<<e|0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}}let fHe=0;const Tq=new ge,Qg=new io,Hu=new Ut,o_=new ge,iw=new ge,hHe=new ge,pHe=new io,Cq=new ge(1,0,0),Aq=new ge(0,1,0),Mq=new ge(0,0,1),mHe={type:"added"},Pq={type:"removed"};class An extends mh{constructor(){super(),Object.defineProperty(this,"id",{value:fHe++}),this.uuid=Ns(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=An.DefaultUp.clone();const e=new ge,n=new Im,r=new io,i=new ge(1,1,1);function o(){r.setFromEuler(n,!1)}function a(){n.setFromQuaternion(r,void 0,!1)}n._onChange(o),r._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Ut},normalMatrix:{value:new zi}}),this.matrix=new Ut,this.matrixWorld=new Ut,this.matrixAutoUpdate=An.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new iv,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return Qg.setFromAxisAngle(e,n),this.quaternion.multiply(Qg),this}rotateOnWorldAxis(e,n){return Qg.setFromAxisAngle(e,n),this.quaternion.premultiply(Qg),this}rotateX(e){return this.rotateOnAxis(Cq,e)}rotateY(e){return this.rotateOnAxis(Aq,e)}rotateZ(e){return this.rotateOnAxis(Mq,e)}translateOnAxis(e,n){return Tq.copy(e).applyQuaternion(this.quaternion),this.position.add(Tq.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(Cq,e)}translateY(e){return this.translateOnAxis(Aq,e)}translateZ(e){return this.translateOnAxis(Mq,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(Hu.copy(this.matrixWorld).invert())}lookAt(e,n,r){e.isVector3?o_.copy(e):o_.set(e,n,r);const i=this.parent;this.updateWorldMatrix(!0,!1),iw.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Hu.lookAt(iw,o_,this.up):Hu.lookAt(o_,iw,this.up),this.quaternion.setFromRotationMatrix(Hu),i&&(Hu.extractRotation(i.matrixWorld),Qg.setFromRotationMatrix(Hu),this.quaternion.premultiply(Qg.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(mHe)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const n=this.children.indexOf(e);return n!==-1&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(Pq)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const n=this.children[e];n.parent=null,n.dispatchEvent(Pq)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),Hu.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Hu.multiply(e.parent.matrixWorld)),e.applyMatrix4(Hu),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let r=0,i=this.children.length;r<i;r++){const a=this.children[r].getObjectByProperty(e,n);if(a!==void 0)return a}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(iw,e,hHe),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(iw,pHe,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverseVisible(e)}traverseAncestors(e){const n=this.parent;n!==null&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].updateMatrixWorld(e)}updateWorldMatrix(e,n){const r=this.parent;if(e===!0&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),n===!0){const i=this.children;for(let o=0,a=i.length;o<a;o++)i[o].updateWorldMatrix(!1,!0)}}toJSON(e){const n=e===void 0||typeof e=="string",r={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON()));function o(s,l){return s[l.uuid]===void 0&&(s[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=o(e.geometries,this.geometry);const s=this.geometry.parameters;if(s!==void 0&&s.shapes!==void 0){const l=s.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++){const f=l[c];o(e.shapes,f)}else o(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(o(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const s=[];for(let l=0,c=this.material.length;l<c;l++)s.push(o(e.materials,this.material[l]));i.material=s}else i.material=o(e.materials,this.material);if(this.children.length>0){i.children=[];for(let s=0;s<this.children.length;s++)i.children.push(this.children[s].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let s=0;s<this.animations.length;s++){const l=this.animations[s];i.animations.push(o(e.animations,l))}}if(n){const s=a(e.geometries),l=a(e.materials),c=a(e.textures),u=a(e.images),f=a(e.shapes),h=a(e.skeletons),p=a(e.animations);s.length>0&&(r.geometries=s),l.length>0&&(r.materials=l),c.length>0&&(r.textures=c),u.length>0&&(r.images=u),f.length>0&&(r.shapes=f),h.length>0&&(r.skeletons=h),p.length>0&&(r.animations=p)}return r.object=i,r;function a(s){const l=[];for(const c in s){const u=s[c];delete u.metadata,l.push(u)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),n===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}An.DefaultUp=new ge(0,1,0);An.DefaultMatrixAutoUpdate=!0;An.prototype.isObject3D=!0;const zl=new ge,Vu=new ge,Nj=new ge,Wu=new ge,ey=new ge,ty=new ge,kq=new ge,Rj=new ge,jj=new ge,Ij=new ge;class Si{constructor(e=new ge,n=new ge,r=new ge){this.a=e,this.b=n,this.c=r}static getNormal(e,n,r,i){i.subVectors(r,n),zl.subVectors(e,n),i.cross(zl);const o=i.lengthSq();return o>0?i.multiplyScalar(1/Math.sqrt(o)):i.set(0,0,0)}static getBarycoord(e,n,r,i,o){zl.subVectors(i,n),Vu.subVectors(r,n),Nj.subVectors(e,n);const a=zl.dot(zl),s=zl.dot(Vu),l=zl.dot(Nj),c=Vu.dot(Vu),u=Vu.dot(Nj),f=a*c-s*s;if(f===0)return o.set(-2,-1,-1);const h=1/f,p=(c*l-s*u)*h,y=(a*u-s*l)*h;return o.set(1-p-y,y,p)}static containsPoint(e,n,r,i){return this.getBarycoord(e,n,r,i,Wu),Wu.x>=0&&Wu.y>=0&&Wu.x+Wu.y<=1}static getUV(e,n,r,i,o,a,s,l){return this.getBarycoord(e,n,r,i,Wu),l.set(0,0),l.addScaledVector(o,Wu.x),l.addScaledVector(a,Wu.y),l.addScaledVector(s,Wu.z),l}static isFrontFacing(e,n,r,i){return zl.subVectors(r,n),Vu.subVectors(e,n),zl.cross(Vu).dot(i)<0}set(e,n,r){return this.a.copy(e),this.b.copy(n),this.c.copy(r),this}setFromPointsAndIndices(e,n,r,i){return this.a.copy(e[n]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,n,r,i){return this.a.fromBufferAttribute(e,n),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return zl.subVectors(this.c,this.b),Vu.subVectors(this.a,this.b),zl.cross(Vu).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Si.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,n){return Si.getBarycoord(e,this.a,this.b,this.c,n)}getUV(e,n,r,i,o){return Si.getUV(e,this.a,this.b,this.c,n,r,i,o)}containsPoint(e){return Si.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Si.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,n){const r=this.a,i=this.b,o=this.c;let a,s;ey.subVectors(i,r),ty.subVectors(o,r),Rj.subVectors(e,r);const l=ey.dot(Rj),c=ty.dot(Rj);if(l<=0&&c<=0)return n.copy(r);jj.subVectors(e,i);const u=ey.dot(jj),f=ty.dot(jj);if(u>=0&&f<=u)return n.copy(i);const h=l*f-u*c;if(h<=0&&l>=0&&u<=0)return a=l/(l-u),n.copy(r).addScaledVector(ey,a);Ij.subVectors(e,o);const p=ey.dot(Ij),y=ty.dot(Ij);if(y>=0&&p<=y)return n.copy(o);const g=p*c-l*y;if(g<=0&&c>=0&&y<=0)return s=c/(c-y),n.copy(r).addScaledVector(ty,s);const v=u*y-p*f;if(v<=0&&f-u>=0&&p-y>=0)return kq.subVectors(o,i),s=(f-u)/(f-u+(p-y)),n.copy(i).addScaledVector(kq,s);const b=1/(v+g+h);return a=g*b,s=h*b,n.copy(r).addScaledVector(ey,a).addScaledVector(ty,s)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let gHe=0;class So extends mh{constructor(){super(),Object.defineProperty(this,"id",{value:gHe++}),this.uuid=Ns(),this.name="",this.type="Material",this.fog=!0,this.blending=nv,this.side=Jf,this.vertexColors=!1,this.opacity=1,this.format=ro,this.transparent=!1,this.blendSrc=A5,this.blendDst=M5,this.blendEquation=xp,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=OC,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Zse,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=sT,this.stencilZFail=sT,this.stencilZPass=sT,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const n in e){const r=e[n];if(r===void 0){console.warn("THREE.Material: '"+n+"' parameter is undefined.");continue}if(n==="shading"){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=r===C5;continue}const i=this[n];if(i===void 0){console.warn("THREE."+this.type+": '"+n+"' is not a property of this material.");continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[n]=r}}toJSON(e){const n=e===void 0||typeof e=="string";n&&(e={textures:{},images:{}});const r={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenTint&&this.sheenTint.isColor&&(r.sheenTint=this.sheenTint.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularTint&&this.specularTint.isColor&&(r.specularTint=this.specularTint.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularTintMap&&this.specularTintMap.isTexture&&(r.specularTintMap=this.specularTintMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationTint!==void 0&&(r.attenuationTint=this.attenuationTint.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==nv&&(r.blending=this.blending),this.side!==Jf&&(r.side=this.side),this.vertexColors&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.format!==ro&&(r.format=this.format),this.transparent===!0&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,r.colorWrite=this.colorWrite,r.stencilWrite=this.stencilWrite,r.stencilWriteMask=this.stencilWriteMask,r.stencilFunc=this.stencilFunc,r.stencilRef=this.stencilRef,r.stencilFuncMask=this.stencilFuncMask,r.stencilFail=this.stencilFail,r.stencilZFail=this.stencilZFail,r.stencilZPass=this.stencilZPass,this.rotation&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(r.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=this.flatShading),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),JSON.stringify(this.userData)!=="{}"&&(r.userData=this.userData);function i(o){const a=[];for(const s in o){const l=o[s];delete l.metadata,a.push(l)}return a}if(n){const o=i(e.textures),a=i(e.images);o.length>0&&(r.textures=o),a.length>0&&(r.images=a)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.format=e.format,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const n=e.clippingPlanes;let r=null;if(n!==null){const i=n.length;r=new Array(i);for(let o=0;o!==i;++o)r[o]=n[o].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}So.prototype.isMaterial=!0;const rle={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Ul={h:0,s:0,l:0},a_={h:0,s:0,l:0};function Oj(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*6*(2/3-n):t}function Lj(t){return t<.04045?t*.0773993808:Math.pow(t*.9478672986+.0521327014,2.4)}function Dj(t){return t<.0031308?t*12.92:1.055*Math.pow(t,.41666)-.055}class bt{constructor(e,n,r){return n===void 0&&r===void 0?this.set(e):this.setRGB(e,n,r)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,this}setRGB(e,n,r){return this.r=e,this.g=n,this.b=r,this}setHSL(e,n,r){if(e=L5(e,1),n=Bo(n,0,1),r=Bo(r,0,1),n===0)this.r=this.g=this.b=r;else{const i=r<=.5?r*(1+n):r+n-r*n,o=2*r-i;this.r=Oj(o,i,e+1/3),this.g=Oj(o,i,e),this.b=Oj(o,i,e-1/3)}return this}setStyle(e){function n(i){i!==void 0&&parseFloat(i)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let i;const o=r[1],a=r[2];switch(o){case"rgb":case"rgba":if(i=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(i[1],10))/255,this.g=Math.min(255,parseInt(i[2],10))/255,this.b=Math.min(255,parseInt(i[3],10))/255,n(i[4]),this;if(i=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(i[1],10))/100,this.g=Math.min(100,parseInt(i[2],10))/100,this.b=Math.min(100,parseInt(i[3],10))/100,n(i[4]),this;break;case"hsl":case"hsla":if(i=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a)){const s=parseFloat(i[1])/360,l=parseInt(i[2],10)/100,c=parseInt(i[3],10)/100;return n(i[4]),this.setHSL(s,l,c)}break}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const i=r[1],o=i.length;if(o===3)return this.r=parseInt(i.charAt(0)+i.charAt(0),16)/255,this.g=parseInt(i.charAt(1)+i.charAt(1),16)/255,this.b=parseInt(i.charAt(2)+i.charAt(2),16)/255,this;if(o===6)return this.r=parseInt(i.charAt(0)+i.charAt(1),16)/255,this.g=parseInt(i.charAt(2)+i.charAt(3),16)/255,this.b=parseInt(i.charAt(4)+i.charAt(5),16)/255,this}return e&&e.length>0?this.setColorName(e):this}setColorName(e){const n=rle[e.toLowerCase()];return n!==void 0?this.setHex(n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copyGammaToLinear(e,n=2){return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this}copyLinearToGamma(e,n=2){const r=n>0?1/n:1;return this.r=Math.pow(e.r,r),this.g=Math.pow(e.g,r),this.b=Math.pow(e.b,r),this}convertGammaToLinear(e){return this.copyGammaToLinear(this,e),this}convertLinearToGamma(e){return this.copyLinearToGamma(this,e),this}copySRGBToLinear(e){return this.r=Lj(e.r),this.g=Lj(e.g),this.b=Lj(e.b),this}copyLinearToSRGB(e){return this.r=Dj(e.r),this.g=Dj(e.g),this.b=Dj(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return this.r*255<<16^this.g*255<<8^this.b*255<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(e){const n=this.r,r=this.g,i=this.b,o=Math.max(n,r,i),a=Math.min(n,r,i);let s,l;const c=(a+o)/2;if(a===o)s=0,l=0;else{const u=o-a;switch(l=c<=.5?u/(o+a):u/(2-o-a),o){case n:s=(r-i)/u+(r<i?6:0);break;case r:s=(i-n)/u+2;break;case i:s=(n-r)/u+4;break}s/=6}return e.h=s,e.s=l,e.l=c,e}getStyle(){return"rgb("+(this.r*255|0)+","+(this.g*255|0)+","+(this.b*255|0)+")"}offsetHSL(e,n,r){return this.getHSL(Ul),Ul.h+=e,Ul.s+=n,Ul.l+=r,this.setHSL(Ul.h,Ul.s,Ul.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,r){return this.r=e.r+(n.r-e.r)*r,this.g=e.g+(n.g-e.g)*r,this.b=e.b+(n.b-e.b)*r,this}lerpHSL(e,n){this.getHSL(Ul),e.getHSL(a_);const r=qw(Ul.h,a_.h,n),i=qw(Ul.s,a_.s,n),o=qw(Ul.l,a_.l,n);return this.setHSL(r,i,o),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),e.normalized===!0&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}bt.NAMES=rle;bt.prototype.isColor=!0;bt.prototype.r=1;bt.prototype.g=1;bt.prototype.b=1;class lu extends So{constructor(e){super(),this.type="MeshBasicMaterial",this.color=new bt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=rS,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}lu.prototype.isMeshBasicMaterial=!0;const wr=new ge,s_=new rt;class Bn{constructor(e,n,r){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=n,this.count=e!==void 0?e.length/n:0,this.normalized=r===!0,this.usage=Hv,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,n,r){e*=this.itemSize,r*=n.itemSize;for(let i=0,o=this.itemSize;i<o;i++)this.array[e+i]=n.array[r+i];return this}copyArray(e){return this.array.set(e),this}copyColorsArray(e){const n=this.array;let r=0;for(let i=0,o=e.length;i<o;i++){let a=e[i];a===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),a=new bt),n[r++]=a.r,n[r++]=a.g,n[r++]=a.b}return this}copyVector2sArray(e){const n=this.array;let r=0;for(let i=0,o=e.length;i<o;i++){let a=e[i];a===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),a=new rt),n[r++]=a.x,n[r++]=a.y}return this}copyVector3sArray(e){const n=this.array;let r=0;for(let i=0,o=e.length;i<o;i++){let a=e[i];a===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),a=new ge),n[r++]=a.x,n[r++]=a.y,n[r++]=a.z}return this}copyVector4sArray(e){const n=this.array;let r=0;for(let i=0,o=e.length;i<o;i++){let a=e[i];a===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),a=new Kn),n[r++]=a.x,n[r++]=a.y,n[r++]=a.z,n[r++]=a.w}return this}applyMatrix3(e){if(this.itemSize===2)for(let n=0,r=this.count;n<r;n++)s_.fromBufferAttribute(this,n),s_.applyMatrix3(e),this.setXY(n,s_.x,s_.y);else if(this.itemSize===3)for(let n=0,r=this.count;n<r;n++)wr.fromBufferAttribute(this,n),wr.applyMatrix3(e),this.setXYZ(n,wr.x,wr.y,wr.z);return this}applyMatrix4(e){for(let n=0,r=this.count;n<r;n++)wr.x=this.getX(n),wr.y=this.getY(n),wr.z=this.getZ(n),wr.applyMatrix4(e),this.setXYZ(n,wr.x,wr.y,wr.z);return this}applyNormalMatrix(e){for(let n=0,r=this.count;n<r;n++)wr.x=this.getX(n),wr.y=this.getY(n),wr.z=this.getZ(n),wr.applyNormalMatrix(e),this.setXYZ(n,wr.x,wr.y,wr.z);return this}transformDirection(e){for(let n=0,r=this.count;n<r;n++)wr.x=this.getX(n),wr.y=this.getY(n),wr.z=this.getZ(n),wr.transformDirection(e),this.setXYZ(n,wr.x,wr.y,wr.z);return this}set(e,n=0){return this.array.set(e,n),this}getX(e){return this.array[e*this.itemSize]}setX(e,n){return this.array[e*this.itemSize]=n,this}getY(e){return this.array[e*this.itemSize+1]}setY(e,n){return this.array[e*this.itemSize+1]=n,this}getZ(e){return this.array[e*this.itemSize+2]}setZ(e,n){return this.array[e*this.itemSize+2]=n,this}getW(e){return this.array[e*this.itemSize+3]}setW(e,n){return this.array[e*this.itemSize+3]=n,this}setXY(e,n,r){return e*=this.itemSize,this.array[e+0]=n,this.array[e+1]=r,this}setXYZ(e,n,r,i){return e*=this.itemSize,this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,n,r,i,o){return e*=this.itemSize,this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=o,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Hv&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}}Bn.prototype.isBufferAttribute=!0;class ile extends Bn{constructor(e,n,r){super(new Int8Array(e),n,r)}}class ole extends Bn{constructor(e,n,r){super(new Uint8Array(e),n,r)}}class ale extends Bn{constructor(e,n,r){super(new Uint8ClampedArray(e),n,r)}}class sle extends Bn{constructor(e,n,r){super(new Int16Array(e),n,r)}}class c2 extends Bn{constructor(e,n,r){super(new Uint16Array(e),n,r)}}class lle extends Bn{constructor(e,n,r){super(new Int32Array(e),n,r)}}class u2 extends Bn{constructor(e,n,r){super(new Uint32Array(e),n,r)}}class cle extends Bn{constructor(e,n,r){super(new Uint16Array(e),n,r)}}cle.prototype.isFloat16BufferAttribute=!0;class Dt extends Bn{constructor(e,n,r){super(new Float32Array(e),n,r)}}class ule extends Bn{constructor(e,n,r){super(new Float64Array(e),n,r)}}let yHe=0;const Zs=new Ut,Fj=new An,ny=new ge,ys=new es,ow=new es,yo=new ge;class Yt extends mh{constructor(){super(),Object.defineProperty(this,"id",{value:yHe++}),this.uuid=Ns(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(tle(e)>65535?u2:c2)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,n){return this.attributes[e]=n,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,n,r=0){this.groups.push({start:e,count:n,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}applyMatrix4(e){const n=this.attributes.position;n!==void 0&&(n.applyMatrix4(e),n.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const o=new zi().getNormalMatrix(e);r.applyNormalMatrix(o),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Zs.makeRotationFromQuaternion(e),this.applyMatrix4(Zs),this}rotateX(e){return Zs.makeRotationX(e),this.applyMatrix4(Zs),this}rotateY(e){return Zs.makeRotationY(e),this.applyMatrix4(Zs),this}rotateZ(e){return Zs.makeRotationZ(e),this.applyMatrix4(Zs),this}translate(e,n,r){return Zs.makeTranslation(e,n,r),this.applyMatrix4(Zs),this}scale(e,n,r){return Zs.makeScale(e,n,r),this.applyMatrix4(Zs),this}lookAt(e){return Fj.lookAt(e),Fj.updateMatrix(),this.applyMatrix4(Fj.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(ny).negate(),this.translate(ny.x,ny.y,ny.z),this}setFromPoints(e){const n=[];for(let r=0,i=e.length;r<i;r++){const o=e[r];n.push(o.x,o.y,o.z||0)}return this.setAttribute("position",new Dt(n,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new es);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new ge(-1/0,-1/0,-1/0),new ge(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),n)for(let r=0,i=n.length;r<i;r++){const o=n[r];ys.setFromBufferAttribute(o),this.morphTargetsRelative?(yo.addVectors(this.boundingBox.min,ys.min),this.boundingBox.expandByPoint(yo),yo.addVectors(this.boundingBox.max,ys.max),this.boundingBox.expandByPoint(yo)):(this.boundingBox.expandByPoint(ys.min),this.boundingBox.expandByPoint(ys.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Ad);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new ge,1/0);return}if(e){const r=this.boundingSphere.center;if(ys.setFromBufferAttribute(e),n)for(let o=0,a=n.length;o<a;o++){const s=n[o];ow.setFromBufferAttribute(s),this.morphTargetsRelative?(yo.addVectors(ys.min,ow.min),ys.expandByPoint(yo),yo.addVectors(ys.max,ow.max),ys.expandByPoint(yo)):(ys.expandByPoint(ow.min),ys.expandByPoint(ow.max))}ys.getCenter(r);let i=0;for(let o=0,a=e.count;o<a;o++)yo.fromBufferAttribute(e,o),i=Math.max(i,r.distanceToSquared(yo));if(n)for(let o=0,a=n.length;o<a;o++){const s=n[o],l=this.morphTargetsRelative;for(let c=0,u=s.count;c<u;c++)yo.fromBufferAttribute(s,c),l&&(ny.fromBufferAttribute(e,c),yo.add(ny)),i=Math.max(i,r.distanceToSquared(yo))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,n=this.attributes;if(e===null||n.position===void 0||n.normal===void 0||n.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=e.array,i=n.position.array,o=n.normal.array,a=n.uv.array,s=i.length/3;n.tangent===void 0&&this.setAttribute("tangent",new Bn(new Float32Array(4*s),4));const l=n.tangent.array,c=[],u=[];for(let z=0;z<s;z++)c[z]=new ge,u[z]=new ge;const f=new ge,h=new ge,p=new ge,y=new rt,g=new rt,v=new rt,b=new ge,w=new ge;function T(z,O,B){f.fromArray(i,z*3),h.fromArray(i,O*3),p.fromArray(i,B*3),y.fromArray(a,z*2),g.fromArray(a,O*2),v.fromArray(a,B*2),h.sub(f),p.sub(f),g.sub(y),v.sub(y);const $=1/(g.x*v.y-v.x*g.y);isFinite($)&&(b.copy(h).multiplyScalar(v.y).addScaledVector(p,-g.y).multiplyScalar($),w.copy(p).multiplyScalar(g.x).addScaledVector(h,-v.x).multiplyScalar($),c[z].add(b),c[O].add(b),c[B].add(b),u[z].add(w),u[O].add(w),u[B].add(w))}let C=this.groups;C.length===0&&(C=[{start:0,count:r.length}]);for(let z=0,O=C.length;z<O;++z){const B=C[z],$=B.start,F=B.count;for(let J=$,K=$+F;J<K;J+=3)T(r[J+0],r[J+1],r[J+2])}const P=new ge,M=new ge,k=new ge,I=new ge;function U(z){k.fromArray(o,z*3),I.copy(k);const O=c[z];P.copy(O),P.sub(k.multiplyScalar(k.dot(O))).normalize(),M.crossVectors(I,O);const $=M.dot(u[z])<0?-1:1;l[z*4]=P.x,l[z*4+1]=P.y,l[z*4+2]=P.z,l[z*4+3]=$}for(let z=0,O=C.length;z<O;++z){const B=C[z],$=B.start,F=B.count;for(let J=$,K=$+F;J<K;J+=3)U(r[J+0]),U(r[J+1]),U(r[J+2])}}computeVertexNormals(){const e=this.index,n=this.getAttribute("position");if(n!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new Bn(new Float32Array(n.count*3),3),this.setAttribute("normal",r);else for(let h=0,p=r.count;h<p;h++)r.setXYZ(h,0,0,0);const i=new ge,o=new ge,a=new ge,s=new ge,l=new ge,c=new ge,u=new ge,f=new ge;if(e)for(let h=0,p=e.count;h<p;h+=3){const y=e.getX(h+0),g=e.getX(h+1),v=e.getX(h+2);i.fromBufferAttribute(n,y),o.fromBufferAttribute(n,g),a.fromBufferAttribute(n,v),u.subVectors(a,o),f.subVectors(i,o),u.cross(f),s.fromBufferAttribute(r,y),l.fromBufferAttribute(r,g),c.fromBufferAttribute(r,v),s.add(u),l.add(u),c.add(u),r.setXYZ(y,s.x,s.y,s.z),r.setXYZ(g,l.x,l.y,l.z),r.setXYZ(v,c.x,c.y,c.z)}else for(let h=0,p=n.count;h<p;h+=3)i.fromBufferAttribute(n,h+0),o.fromBufferAttribute(n,h+1),a.fromBufferAttribute(n,h+2),u.subVectors(a,o),f.subVectors(i,o),u.cross(f),r.setXYZ(h+0,u.x,u.y,u.z),r.setXYZ(h+1,u.x,u.y,u.z),r.setXYZ(h+2,u.x,u.y,u.z);this.normalizeNormals(),r.needsUpdate=!0}}merge(e,n){if(!(e&&e.isBufferGeometry)){console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);return}n===void 0&&(n=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const r=this.attributes;for(const i in r){if(e.attributes[i]===void 0)continue;const a=r[i].array,s=e.attributes[i],l=s.array,c=s.itemSize*n,u=Math.min(l.length,a.length-c);for(let f=0,h=c;f<u;f++,h++)a[h]=l[f]}return this}normalizeNormals(){const e=this.attributes.normal;for(let n=0,r=e.count;n<r;n++)yo.fromBufferAttribute(e,n),yo.normalize(),e.setXYZ(n,yo.x,yo.y,yo.z)}toNonIndexed(){function e(s,l){const c=s.array,u=s.itemSize,f=s.normalized,h=new c.constructor(l.length*u);let p=0,y=0;for(let g=0,v=l.length;g<v;g++){s.isInterleavedBufferAttribute?p=l[g]*s.data.stride+s.offset:p=l[g]*u;for(let b=0;b<u;b++)h[y++]=c[p++]}return new Bn(h,u,f)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new Yt,r=this.index.array,i=this.attributes;for(const s in i){const l=i[s],c=e(l,r);n.setAttribute(s,c)}const o=this.morphAttributes;for(const s in o){const l=[],c=o[s];for(let u=0,f=c.length;u<f;u++){const h=c[u],p=e(h,r);l.push(p)}n.morphAttributes[s]=l}n.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let s=0,l=a.length;s<l;s++){const c=a[s];n.addGroup(c.start,c.count,c.materialIndex)}return n}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const n=this.index;n!==null&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const r=this.attributes;for(const l in r){const c=r[l];e.data.attributes[l]=c.toJSON(e.data)}const i={};let o=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let f=0,h=c.length;f<h;f++){const p=c[f];u.push(p.toJSON(e.data))}u.length>0&&(i[l]=u,o=!0)}o&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const s=this.boundingSphere;return s!==null&&(e.data.boundingSphere={center:s.center.toArray(),radius:s.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(n));const i=e.attributes;for(const c in i){const u=i[c];this.setAttribute(c,u.clone(n))}const o=e.morphAttributes;for(const c in o){const u=[],f=o[c];for(let h=0,p=f.length;h<p;h++)u.push(f[h].clone(n));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let c=0,u=a.length;c<u;c++){const f=a[c];this.addGroup(f.start,f.count,f.materialIndex)}const s=e.boundingBox;s!==null&&(this.boundingBox=s.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,e.parameters!==void 0&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}Yt.prototype.isBufferGeometry=!0;const Nq=new Ut,ry=new Md,zj=new Ad,gf=new ge,yf=new ge,vf=new ge,Uj=new ge,Bj=new ge,$j=new ge,l_=new ge,c_=new ge,u_=new ge,d_=new rt,f_=new rt,h_=new rt,Hj=new ge,p_=new ge;class Kr extends An{constructor(e=new Yt,n=new lu){super(),this.type="Mesh",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e){return super.copy(e),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const n=e.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,a=i.length;o<a;o++){const s=i[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=o}}}}else{const n=e.morphTargets;n!==void 0&&n.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}raycast(e,n){const r=this.geometry,i=this.material,o=this.matrixWorld;if(i===void 0||(r.boundingSphere===null&&r.computeBoundingSphere(),zj.copy(r.boundingSphere),zj.applyMatrix4(o),e.ray.intersectsSphere(zj)===!1)||(Nq.copy(o).invert(),ry.copy(e.ray).applyMatrix4(Nq),r.boundingBox!==null&&ry.intersectsBox(r.boundingBox)===!1))return;let a;if(r.isBufferGeometry){const s=r.index,l=r.attributes.position,c=r.morphAttributes.position,u=r.morphTargetsRelative,f=r.attributes.uv,h=r.attributes.uv2,p=r.groups,y=r.drawRange;if(s!==null)if(Array.isArray(i))for(let g=0,v=p.length;g<v;g++){const b=p[g],w=i[b.materialIndex],T=Math.max(b.start,y.start),C=Math.min(s.count,Math.min(b.start+b.count,y.start+y.count));for(let P=T,M=C;P<M;P+=3){const k=s.getX(P),I=s.getX(P+1),U=s.getX(P+2);a=m_(this,w,e,ry,l,c,u,f,h,k,I,U),a&&(a.faceIndex=Math.floor(P/3),a.face.materialIndex=b.materialIndex,n.push(a))}}else{const g=Math.max(0,y.start),v=Math.min(s.count,y.start+y.count);for(let b=g,w=v;b<w;b+=3){const T=s.getX(b),C=s.getX(b+1),P=s.getX(b+2);a=m_(this,i,e,ry,l,c,u,f,h,T,C,P),a&&(a.faceIndex=Math.floor(b/3),n.push(a))}}else if(l!==void 0)if(Array.isArray(i))for(let g=0,v=p.length;g<v;g++){const b=p[g],w=i[b.materialIndex],T=Math.max(b.start,y.start),C=Math.min(l.count,Math.min(b.start+b.count,y.start+y.count));for(let P=T,M=C;P<M;P+=3){const k=P,I=P+1,U=P+2;a=m_(this,w,e,ry,l,c,u,f,h,k,I,U),a&&(a.faceIndex=Math.floor(P/3),a.face.materialIndex=b.materialIndex,n.push(a))}}else{const g=Math.max(0,y.start),v=Math.min(l.count,y.start+y.count);for(let b=g,w=v;b<w;b+=3){const T=b,C=b+1,P=b+2;a=m_(this,i,e,ry,l,c,u,f,h,T,C,P),a&&(a.faceIndex=Math.floor(b/3),n.push(a))}}}else r.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}Kr.prototype.isMesh=!0;function vHe(t,e,n,r,i,o,a,s){let l;if(e.side===oi?l=r.intersectTriangle(a,o,i,!0,s):l=r.intersectTriangle(i,o,a,e.side!==vd,s),l===null)return null;p_.copy(s),p_.applyMatrix4(t.matrixWorld);const c=n.ray.origin.distanceTo(p_);return c<n.near||c>n.far?null:{distance:c,point:p_.clone(),object:t}}function m_(t,e,n,r,i,o,a,s,l,c,u,f){gf.fromBufferAttribute(i,c),yf.fromBufferAttribute(i,u),vf.fromBufferAttribute(i,f);const h=t.morphTargetInfluences;if(o&&h){l_.set(0,0,0),c_.set(0,0,0),u_.set(0,0,0);for(let y=0,g=o.length;y<g;y++){const v=h[y],b=o[y];v!==0&&(Uj.fromBufferAttribute(b,c),Bj.fromBufferAttribute(b,u),$j.fromBufferAttribute(b,f),a?(l_.addScaledVector(Uj,v),c_.addScaledVector(Bj,v),u_.addScaledVector($j,v)):(l_.addScaledVector(Uj.sub(gf),v),c_.addScaledVector(Bj.sub(yf),v),u_.addScaledVector($j.sub(vf),v)))}gf.add(l_),yf.add(c_),vf.add(u_)}t.isSkinnedMesh&&(t.boneTransform(c,gf),t.boneTransform(u,yf),t.boneTransform(f,vf));const p=vHe(t,e,n,r,gf,yf,vf,Hj);if(p){s&&(d_.fromBufferAttribute(s,c),f_.fromBufferAttribute(s,u),h_.fromBufferAttribute(s,f),p.uv=Si.getUV(Hj,gf,yf,vf,d_,f_,h_,new rt)),l&&(d_.fromBufferAttribute(l,c),f_.fromBufferAttribute(l,u),h_.fromBufferAttribute(l,f),p.uv2=Si.getUV(Hj,gf,yf,vf,d_,f_,h_,new rt));const y={a:c,b:u,c:f,normal:new ge,materialIndex:0};Si.getNormal(gf,yf,vf,y.normal),p.face=y}return p}class xd extends Yt{constructor(e=1,n=1,r=1,i=1,o=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:r,widthSegments:i,heightSegments:o,depthSegments:a};const s=this;i=Math.floor(i),o=Math.floor(o),a=Math.floor(a);const l=[],c=[],u=[],f=[];let h=0,p=0;y("z","y","x",-1,-1,r,n,e,a,o,0),y("z","y","x",1,-1,r,n,-e,a,o,1),y("x","z","y",1,1,e,r,n,i,a,2),y("x","z","y",1,-1,e,r,-n,i,a,3),y("x","y","z",1,-1,e,n,r,i,o,4),y("x","y","z",-1,-1,e,n,-r,i,o,5),this.setIndex(l),this.setAttribute("position",new Dt(c,3)),this.setAttribute("normal",new Dt(u,3)),this.setAttribute("uv",new Dt(f,2));function y(g,v,b,w,T,C,P,M,k,I,U){const z=C/k,O=P/I,B=C/2,$=P/2,F=M/2,J=k+1,K=I+1;let Z=0,H=0;const Y=new ge;for(let L=0;L<K;L++){const N=L*O-$;for(let V=0;V<J;V++){const W=V*z-B;Y[g]=W*w,Y[v]=N*T,Y[b]=F,c.push(Y.x,Y.y,Y.z),Y[g]=0,Y[v]=0,Y[b]=M>0?1:-1,u.push(Y.x,Y.y,Y.z),f.push(V/k),f.push(1-L/I),Z+=1}}for(let L=0;L<I;L++)for(let N=0;N<k;N++){const V=h+N+J*L,W=h+N+J*(L+1),ne=h+(N+1)+J*(L+1),se=h+(N+1)+J*L;l.push(V,W,se),l.push(W,ne,se),H+=6}s.addGroup(p,H,U),p+=H,h+=Z}}static fromJSON(e){return new xd(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Wv(t){const e={};for(const n in t){e[n]={};for(const r in t[n]){const i=t[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?e[n][r]=i.clone():Array.isArray(i)?e[n][r]=i.slice():e[n][r]=i}}return e}function Qo(t){const e={};for(let n=0;n<t.length;n++){const r=Wv(t[n]);for(const i in r)e[i]=r[i]}return e}const F5={clone:Wv,merge:Qo};var xHe=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,wHe=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class wd extends So{constructor(e){super(),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=xHe,this.fragmentShader=wHe,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&(e.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Wv(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const n=super.toJSON(e);n.glslVersion=this.glslVersion,n.uniforms={};for(const i in this.uniforms){const a=this.uniforms[i].value;a&&a.isTexture?n.uniforms[i]={type:"t",value:a.toJSON(e).uuid}:a&&a.isColor?n.uniforms[i]={type:"c",value:a.getHex()}:a&&a.isVector2?n.uniforms[i]={type:"v2",value:a.toArray()}:a&&a.isVector3?n.uniforms[i]={type:"v3",value:a.toArray()}:a&&a.isVector4?n.uniforms[i]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?n.uniforms[i]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?n.uniforms[i]={type:"m4",value:a.toArray()}:n.uniforms[i]={value:a}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(n.extensions=r),n}}wd.prototype.isShaderMaterial=!0;class F0 extends An{constructor(){super(),this.type="Camera",this.matrixWorldInverse=new Ut,this.projectionMatrix=new Ut,this.projectionMatrixInverse=new Ut}copy(e,n){return super.copy(e,n),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(-n[8],-n[9],-n[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,n){super.updateWorldMatrix(e,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}F0.prototype.isCamera=!0;class ci extends F0{constructor(e=50,n=1,r=.1,i=2e3){super(),this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const n=.5*this.getFilmHeight()/e;this.fov=c1*2*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Xp*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return c1*2*Math.atan(Math.tan(Xp*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,n,r,i,o,a){this.aspect=e/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=o,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let n=e*Math.tan(Xp*.5*this.fov)/this.zoom,r=2*n,i=this.aspect*r,o=-.5*i;const a=this.view;if(this.view!==null&&this.view.enabled){const l=a.fullWidth,c=a.fullHeight;o+=a.offsetX*i/l,n-=a.offsetY*r/c,i*=a.width/l,r*=a.height/c}const s=this.filmOffset;s!==0&&(o+=e*s/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+i,n,n-r,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}}ci.prototype.isPerspectiveCamera=!0;const iy=90,oy=1;class d2 extends An{constructor(e,n,r){if(super(),this.type="CubeCamera",r.isWebGLCubeRenderTarget!==!0){console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");return}this.renderTarget=r;const i=new ci(iy,oy,e,n);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new ge(1,0,0)),this.add(i);const o=new ci(iy,oy,e,n);o.layers=this.layers,o.up.set(0,-1,0),o.lookAt(new ge(-1,0,0)),this.add(o);const a=new ci(iy,oy,e,n);a.layers=this.layers,a.up.set(0,0,1),a.lookAt(new ge(0,1,0)),this.add(a);const s=new ci(iy,oy,e,n);s.layers=this.layers,s.up.set(0,0,-1),s.lookAt(new ge(0,-1,0)),this.add(s);const l=new ci(iy,oy,e,n);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new ge(0,0,1)),this.add(l);const c=new ci(iy,oy,e,n);c.layers=this.layers,c.up.set(0,-1,0),c.lookAt(new ge(0,0,-1)),this.add(c)}update(e,n){this.parent===null&&this.updateMatrixWorld();const r=this.renderTarget,[i,o,a,s,l,c]=this.children,u=e.xr.enabled,f=e.getRenderTarget();e.xr.enabled=!1;const h=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0),e.render(n,i),e.setRenderTarget(r,1),e.render(n,o),e.setRenderTarget(r,2),e.render(n,a),e.setRenderTarget(r,3),e.render(n,s),e.setRenderTarget(r,4),e.render(n,l),r.texture.generateMipmaps=h,e.setRenderTarget(r,5),e.render(n,c),e.setRenderTarget(f),e.xr.enabled=u}}class z0 extends Hi{constructor(e,n,r,i,o,a,s,l,c,u){e=e!==void 0?e:[],n=n!==void 0?n:O0,super(e,n,r,i,o,a,s,l,c,u),this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}z0.prototype.isCubeTexture=!0;class f2 extends ic{constructor(e,n,r){Number.isInteger(n)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),n=r),super(e,e,n),n=n||{},this.texture=new z0(void 0,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:Xr,this.texture._needsFlipEnvMap=!1}fromEquirectangularTexture(e,n){this.texture.type=n.type,this.texture.format=ro,this.texture.encoding=n.encoding,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new xd(5,5,5),o=new wd({name:"CubemapFromEquirect",uniforms:Wv(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:oi,blending:ad});o.uniforms.tEquirect.value=n;const a=new Kr(i,o),s=n.minFilter;return n.minFilter===Nm&&(n.minFilter=Xr),new d2(1,10,this).update(e,a),n.minFilter=s,a.geometry.dispose(),a.material.dispose(),this}clear(e,n,r,i){const o=e.getRenderTarget();for(let a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(n,r,i);e.setRenderTarget(o)}}f2.prototype.isWebGLCubeRenderTarget=!0;const Vj=new ge,bHe=new ge,SHe=new zi;class Kl{constructor(e=new ge(1,0,0),n=0){this.normal=e,this.constant=n}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,r,i){return this.normal.set(e,n,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,r){const i=Vj.subVectors(r,n).cross(bHe.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,n){return n.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,n){const r=e.delta(Vj),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?n.copy(e.start):null;const o=-(e.start.dot(this.normal)+this.constant)/i;return o<0||o>1?null:n.copy(r).multiplyScalar(o).add(e.start)}intersectsLine(e){const n=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return n<0&&r>0||r<0&&n>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){const r=n||SHe.getNormalMatrix(e),i=this.coplanarPoint(Vj).applyMatrix4(e),o=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(o),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}Kl.prototype.isPlane=!0;const ay=new Ad,g_=new ge;class oS{constructor(e=new Kl,n=new Kl,r=new Kl,i=new Kl,o=new Kl,a=new Kl){this.planes=[e,n,r,i,o,a]}set(e,n,r,i,o,a){const s=this.planes;return s[0].copy(e),s[1].copy(n),s[2].copy(r),s[3].copy(i),s[4].copy(o),s[5].copy(a),this}copy(e){const n=this.planes;for(let r=0;r<6;r++)n[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e){const n=this.planes,r=e.elements,i=r[0],o=r[1],a=r[2],s=r[3],l=r[4],c=r[5],u=r[6],f=r[7],h=r[8],p=r[9],y=r[10],g=r[11],v=r[12],b=r[13],w=r[14],T=r[15];return n[0].setComponents(s-i,f-l,g-h,T-v).normalize(),n[1].setComponents(s+i,f+l,g+h,T+v).normalize(),n[2].setComponents(s+o,f+c,g+p,T+b).normalize(),n[3].setComponents(s-o,f-c,g-p,T-b).normalize(),n[4].setComponents(s-a,f-u,g-y,T-w).normalize(),n[5].setComponents(s+a,f+u,g+y,T+w).normalize(),this}intersectsObject(e){const n=e.geometry;return n.boundingSphere===null&&n.computeBoundingSphere(),ay.copy(n.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(ay)}intersectsSprite(e){return ay.center.set(0,0,0),ay.radius=.7071067811865476,ay.applyMatrix4(e.matrixWorld),this.intersectsSphere(ay)}intersectsSphere(e){const n=this.planes,r=e.center,i=-e.radius;for(let o=0;o<6;o++)if(n[o].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const n=this.planes;for(let r=0;r<6;r++){const i=n[r];if(g_.x=i.normal.x>0?e.max.x:e.min.x,g_.y=i.normal.y>0?e.max.y:e.min.y,g_.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(g_)<0)return!1}return!0}containsPoint(e){const n=this.planes;for(let r=0;r<6;r++)if(n[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function dle(){let t=null,e=!1,n=null,r=null;function i(o,a){n(o,a),r=t.requestAnimationFrame(i)}return{start:function(){e!==!0&&n!==null&&(r=t.requestAnimationFrame(i),e=!0)},stop:function(){t.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(o){n=o},setContext:function(o){t=o}}}function EHe(t,e){const n=e.isWebGL2,r=new WeakMap;function i(c,u){const f=c.array,h=c.usage,p=t.createBuffer();t.bindBuffer(u,p),t.bufferData(u,f,h),c.onUploadCallback();let y=5126;return f instanceof Float32Array?y=5126:f instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):f instanceof Uint16Array?c.isFloat16BufferAttribute?n?y=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):y=5123:f instanceof Int16Array?y=5122:f instanceof Uint32Array?y=5125:f instanceof Int32Array?y=5124:f instanceof Int8Array?y=5120:(f instanceof Uint8Array||f instanceof Uint8ClampedArray)&&(y=5121),{buffer:p,type:y,bytesPerElement:f.BYTES_PER_ELEMENT,version:c.version}}function o(c,u,f){const h=u.array,p=u.updateRange;t.bindBuffer(f,c),p.count===-1?t.bufferSubData(f,0,h):(n?t.bufferSubData(f,p.offset*h.BYTES_PER_ELEMENT,h,p.offset,p.count):t.bufferSubData(f,p.offset*h.BYTES_PER_ELEMENT,h.subarray(p.offset,p.offset+p.count)),p.count=-1)}function a(c){return c.isInterleavedBufferAttribute&&(c=c.data),r.get(c)}function s(c){c.isInterleavedBufferAttribute&&(c=c.data);const u=r.get(c);u&&(t.deleteBuffer(u.buffer),r.delete(c))}function l(c,u){if(c.isGLBufferAttribute){const h=r.get(c);(!h||h.version<c.version)&&r.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}c.isInterleavedBufferAttribute&&(c=c.data);const f=r.get(c);f===void 0?r.set(c,i(c,u)):f.version<c.version&&(o(f.buffer,c,u),f.version=c.version)}return{get:a,remove:s,update:l}}class Qc extends Yt{constructor(e=1,n=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:n,widthSegments:r,heightSegments:i};const o=e/2,a=n/2,s=Math.floor(r),l=Math.floor(i),c=s+1,u=l+1,f=e/s,h=n/l,p=[],y=[],g=[],v=[];for(let b=0;b<u;b++){const w=b*h-a;for(let T=0;T<c;T++){const C=T*f-o;y.push(C,-w,0),g.push(0,0,1),v.push(T/s),v.push(1-b/l)}}for(let b=0;b<l;b++)for(let w=0;w<s;w++){const T=w+c*b,C=w+c*(b+1),P=w+1+c*(b+1),M=w+1+c*b;p.push(T,C,M),p.push(C,P,M)}this.setIndex(p),this.setAttribute("position",new Dt(y,3)),this.setAttribute("normal",new Dt(g,3)),this.setAttribute("uv",new Dt(v,2))}static fromJSON(e){return new Qc(e.width,e.height,e.widthSegments,e.heightSegments)}}var _He=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,THe=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,CHe=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,AHe=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,MHe=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,PHe=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,kHe="vec3 transformed = vec3( position );",NHe=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,RHe=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenTint, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenTint * ( D * V );
}
#endif`,jHe=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );
		vec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,IHe=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,OHe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,LHe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,DHe=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,FHe=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,zHe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,UHe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,BHe=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,$He=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float linearToRelativeLuminance( const in vec3 color ) {
	vec3 weights = vec3( 0.2126, 0.7152, 0.0722 );
	return dot( weights, color.rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,HHe=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_maxMipLevel 8.0
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_maxTileSize 256.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		float texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );
		vec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );
		vec2 f = fract( uv );
		uv += 0.5 - f;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		if ( mipInt < cubeUV_maxMipLevel ) {
			uv.y += 2.0 * cubeUV_maxTileSize;
		}
		uv.y += filterInt * 2.0 * cubeUV_minTileSize;
		uv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );
		uv *= texelSize;
		vec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.x += texelSize;
		vec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.y += texelSize;
		vec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.x -= texelSize;
		vec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		vec3 tm = mix( tl, tr, f.x );
		vec3 bm = mix( bl, br, f.x );
		return mix( tm, bm, f.y );
	}
	#define r0 1.0
	#define v0 0.339
	#define m0 - 2.0
	#define r1 0.8
	#define v1 0.276
	#define m1 - 1.0
	#define r4 0.4
	#define v4 0.046
	#define m4 2.0
	#define r5 0.305
	#define v5 0.016
	#define m5 3.0
	#define r6 0.21
	#define v6 0.0038
	#define m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= r1 ) {
			mip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;
		} else if ( roughness >= r4 ) {
			mip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;
		} else if ( roughness >= r5 ) {
			mip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;
		} else if ( roughness >= r6 ) {
			mip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,VHe=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,WHe=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,GHe=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,qHe=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	emissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,YHe=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,XHe="gl_FragColor = linearToOutputTexel( gl_FragColor );",KHe=`
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 GammaToLinear( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );
}
vec4 LinearToGamma( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );
}
vec4 sRGBToLinear( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 RGBEToLinear( in vec4 value ) {
	return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );
}
vec4 LinearToRGBE( in vec4 value ) {
	float maxComponent = max( max( value.r, value.g ), value.b );
	float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );
	return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );
}
vec4 RGBMToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * value.a * maxRange, 1.0 );
}
vec4 LinearToRGBM( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float M = clamp( maxRGB / maxRange, 0.0, 1.0 );
	M = ceil( M * 255.0 ) / 255.0;
	return vec4( value.rgb / ( M * maxRange ), M );
}
vec4 RGBDToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );
}
vec4 LinearToRGBD( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float D = max( maxRange / maxRGB, 1.0 );
	D = clamp( floor( D ) / 255.0, 0.0, 1.0 );
	return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );
}
const mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );
vec4 LinearToLogLuv( in vec4 value ) {
	vec3 Xp_Y_XYZp = cLogLuvM * value.rgb;
	Xp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );
	vec4 vResult;
	vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;
	float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;
	vResult.w = fract( Le );
	vResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;
	return vResult;
}
const mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );
vec4 LogLuvToLinear( in vec4 value ) {
	float Le = value.z * 255.0 + value.w;
	vec3 Xp_Y_XYZp;
	Xp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );
	Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;
	Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;
	vec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;
	return vec4( max( vRGB, 0.0 ), 1.0 );
}`,JHe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
		envColor = envMapTexelToLinear( envColor );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,ZHe=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform int maxMipLevel;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,QHe=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,eVe=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,tVe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,nVe=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,rVe=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,iVe=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,oVe=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,aVe=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return texture2D( gradientMap, coord ).rgb;
	#else
		return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
	#endif
}`,sVe=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		lightMapIrradiance *= PI;
	#endif
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,lVe=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,cVe=`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
vIndirectFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
	vIndirectBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
vIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );
#ifdef DOUBLE_SIDED
	vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
	vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );
#endif
#if NUM_POINT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointLightInfo( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_SPOT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotLightInfo( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_DIR_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalLightInfo( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_HEMI_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		#ifdef DOUBLE_SIDED
			vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );
		#endif
	}
	#pragma unroll_loop_end
#endif`,uVe=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,dVe=`#if defined( USE_ENVMAP )
	#ifdef ENVMAP_MODE_REFRACTION
		uniform float refractionRatio;
	#endif
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec;
			#ifdef ENVMAP_MODE_REFLECTION
				reflectVec = reflect( - viewDir, normal );
				reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			#else
				reflectVec = refract( - viewDir, normal, refractionRatio );
			#endif
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,fVe=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,hVe=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,pVe=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,mVe=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,gVe=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularTintFactor = specularTint;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARTINTMAP
			specularTintFactor *= specularTintMapTexelToLinear( texture2D( specularTintMap, vUv ) ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularTintFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularTintFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_SHEEN
	material.sheenTint = sheenTint;
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
#endif`,yVe=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenTint;
		float sheenRoughness;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	vec3 FssEss = specularColor * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		reflectedLight.directSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenTint, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	vec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,vVe=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,xVe=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			lightMapIrradiance *= PI;
		#endif
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,wVe=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,bVe=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,SVe=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,EVe=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,_Ve=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,TVe=`#ifdef USE_MAP
	vec4 texelColor = texture2D( map, vUv );
	texelColor = mapTexelToLinear( texelColor );
	diffuseColor *= texelColor;
#endif`,CVe=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,AVe=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	vec4 mapTexel = texture2D( map, uv );
	diffuseColor *= mapTexelToLinear( mapTexel );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,MVe=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,PVe=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,kVe=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,NVe=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] > 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1, 2 ) * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,RVe=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform vec2 morphTargetsTextureSize;
		vec3 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset, const in int stride ) {
			float texelIndex = float( vertexIndex * stride + offset );
			float y = floor( texelIndex / morphTargetsTextureSize.x );
			float x = texelIndex - y * morphTargetsTextureSize.x;
			vec3 morphUV = vec3( ( x + 0.5 ) / morphTargetsTextureSize.x, y / morphTargetsTextureSize.y, morphTargetIndex );
			return texture( morphTargetsTexture, morphUV ).xyz;
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,jVe=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			#ifndef USE_MORPHNORMALS
				if ( morphTargetInfluences[ i ] > 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 1 ) * morphTargetInfluences[ i ];
			#else
				if ( morphTargetInfluences[ i ] > 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 2 ) * morphTargetInfluences[ i ];
			#endif
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,IVe=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,OVe=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,LVe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,DVe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,FVe=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,zVe=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
		vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,UVe=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,BVe=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,$Ve=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,HVe=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,VVe=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,WVe=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,GVe=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,qVe=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,YVe=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,XVe=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,KVe=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,JVe=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,ZVe=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,QVe=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,eWe=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,tWe=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,nWe=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	#ifdef BONE_TEXTURE
		uniform highp sampler2D boneTexture;
		uniform int boneTextureSize;
		mat4 getBoneMatrix( const in float i ) {
			float j = i * 4.0;
			float x = mod( j, float( boneTextureSize ) );
			float y = floor( j / float( boneTextureSize ) );
			float dx = 1.0 / float( boneTextureSize );
			float dy = 1.0 / float( boneTextureSize );
			y = dy * ( y + 0.5 );
			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
			mat4 bone = mat4( v1, v2, v3, v4 );
			return bone;
		}
	#else
		uniform mat4 boneMatrices[ MAX_BONES ];
		mat4 getBoneMatrix( const in float i ) {
			mat4 bone = boneMatrices[ int(i) ];
			return bone;
		}
	#endif
#endif`,rWe=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,iWe=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,oWe=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,aWe=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,sWe=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,lWe=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,cWe=`#ifdef USE_TRANSMISSION
	float transmissionAlpha = 1.0;
	float transmissionFactor = transmission;
	float thicknessFactor = thickness;
	#ifdef USE_TRANSMISSIONMAP
		transmissionFactor *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		thicknessFactor *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,
		attenuationTint, attenuationDistance );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );
	transmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );
#endif`,uWe=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationTint;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( float roughness, float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( vec2 fragCoord, float roughness, float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef TEXTURE_LOD_EXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( vec3 radiance, float transmissionDistance, vec3 attenuationColor, float attenuationDistance ) {
		if ( attenuationDistance == 0.0 ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( vec3 n, vec3 v, float roughness, vec3 diffuseColor, vec3 specularColor, float specularF90,
		vec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness,
		vec3 attenuationColor, float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,dWe=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,fWe=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,hWe=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,pWe=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,mWe=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,gWe=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,yWe=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const vWe=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,xWe=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,wWe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,bWe=`#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,SWe=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,EWe=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,_We=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,TWe=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,CWe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,AWe=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	vec4 texColor = texture2D( tEquirect, sampleUV );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,MWe=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,PWe=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,kWe=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,NWe=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,RWe=`#define LAMBERT
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars_begin>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,jWe=`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	#ifdef DOUBLE_SIDED
		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;
	#else
		reflectedLight.indirectDiffuse += vIndirectFront;
	#endif
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,IWe=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,OWe=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
		matcapColor = matcapTexelToLinear( matcapColor );
	#else
		vec4 matcapColor = vec4( 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,LWe=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,DWe=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
}`,FWe=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,zWe=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,UWe=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,BWe=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularTint;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARTINTMAP
		uniform sampler2D specularTintMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenTint;
	uniform float sheenRoughness;
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - clearcoat * Fcc ) + clearcoatSpecular * clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,$We=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,HWe=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,VWe=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,WWe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,GWe=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,qWe=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,YWe=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,XWe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,_n={alphamap_fragment:_He,alphamap_pars_fragment:THe,alphatest_fragment:CHe,alphatest_pars_fragment:AHe,aomap_fragment:MHe,aomap_pars_fragment:PHe,begin_vertex:kHe,beginnormal_vertex:NHe,bsdfs:RHe,bumpmap_pars_fragment:jHe,clipping_planes_fragment:IHe,clipping_planes_pars_fragment:OHe,clipping_planes_pars_vertex:LHe,clipping_planes_vertex:DHe,color_fragment:FHe,color_pars_fragment:zHe,color_pars_vertex:UHe,color_vertex:BHe,common:$He,cube_uv_reflection_fragment:HHe,defaultnormal_vertex:VHe,displacementmap_pars_vertex:WHe,displacementmap_vertex:GHe,emissivemap_fragment:qHe,emissivemap_pars_fragment:YHe,encodings_fragment:XHe,encodings_pars_fragment:KHe,envmap_fragment:JHe,envmap_common_pars_fragment:ZHe,envmap_pars_fragment:QHe,envmap_pars_vertex:eVe,envmap_physical_pars_fragment:dVe,envmap_vertex:tVe,fog_vertex:nVe,fog_pars_vertex:rVe,fog_fragment:iVe,fog_pars_fragment:oVe,gradientmap_pars_fragment:aVe,lightmap_fragment:sVe,lightmap_pars_fragment:lVe,lights_lambert_vertex:cVe,lights_pars_begin:uVe,lights_toon_fragment:fVe,lights_toon_pars_fragment:hVe,lights_phong_fragment:pVe,lights_phong_pars_fragment:mVe,lights_physical_fragment:gVe,lights_physical_pars_fragment:yVe,lights_fragment_begin:vVe,lights_fragment_maps:xVe,lights_fragment_end:wVe,logdepthbuf_fragment:bVe,logdepthbuf_pars_fragment:SVe,logdepthbuf_pars_vertex:EVe,logdepthbuf_vertex:_Ve,map_fragment:TVe,map_pars_fragment:CVe,map_particle_fragment:AVe,map_particle_pars_fragment:MVe,metalnessmap_fragment:PVe,metalnessmap_pars_fragment:kVe,morphnormal_vertex:NVe,morphtarget_pars_vertex:RVe,morphtarget_vertex:jVe,normal_fragment_begin:IVe,normal_fragment_maps:OVe,normal_pars_fragment:LVe,normal_pars_vertex:DVe,normal_vertex:FVe,normalmap_pars_fragment:zVe,clearcoat_normal_fragment_begin:UVe,clearcoat_normal_fragment_maps:BVe,clearcoat_pars_fragment:$Ve,output_fragment:HVe,packing:VVe,premultiplied_alpha_fragment:WVe,project_vertex:GVe,dithering_fragment:qVe,dithering_pars_fragment:YVe,roughnessmap_fragment:XVe,roughnessmap_pars_fragment:KVe,shadowmap_pars_fragment:JVe,shadowmap_pars_vertex:ZVe,shadowmap_vertex:QVe,shadowmask_pars_fragment:eWe,skinbase_vertex:tWe,skinning_pars_vertex:nWe,skinning_vertex:rWe,skinnormal_vertex:iWe,specularmap_fragment:oWe,specularmap_pars_fragment:aWe,tonemapping_fragment:sWe,tonemapping_pars_fragment:lWe,transmission_fragment:cWe,transmission_pars_fragment:uWe,uv_pars_fragment:dWe,uv_pars_vertex:fWe,uv_vertex:hWe,uv2_pars_fragment:pWe,uv2_pars_vertex:mWe,uv2_vertex:gWe,worldpos_vertex:yWe,background_vert:vWe,background_frag:xWe,cube_vert:wWe,cube_frag:bWe,depth_vert:SWe,depth_frag:EWe,distanceRGBA_vert:_We,distanceRGBA_frag:TWe,equirect_vert:CWe,equirect_frag:AWe,linedashed_vert:MWe,linedashed_frag:PWe,meshbasic_vert:kWe,meshbasic_frag:NWe,meshlambert_vert:RWe,meshlambert_frag:jWe,meshmatcap_vert:IWe,meshmatcap_frag:OWe,meshnormal_vert:LWe,meshnormal_frag:DWe,meshphong_vert:FWe,meshphong_frag:zWe,meshphysical_vert:UWe,meshphysical_frag:BWe,meshtoon_vert:$We,meshtoon_frag:HWe,points_vert:VWe,points_frag:WWe,shadow_vert:GWe,shadow_frag:qWe,sprite_vert:YWe,sprite_frag:XWe},Ct={common:{diffuse:{value:new bt(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new zi},uv2Transform:{value:new zi},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new rt(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new bt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new bt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new zi}},sprite:{diffuse:{value:new bt(16777215)},opacity:{value:1},center:{value:new rt(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new zi}}},Jl={basic:{uniforms:Qo([Ct.common,Ct.specularmap,Ct.envmap,Ct.aomap,Ct.lightmap,Ct.fog]),vertexShader:_n.meshbasic_vert,fragmentShader:_n.meshbasic_frag},lambert:{uniforms:Qo([Ct.common,Ct.specularmap,Ct.envmap,Ct.aomap,Ct.lightmap,Ct.emissivemap,Ct.fog,Ct.lights,{emissive:{value:new bt(0)}}]),vertexShader:_n.meshlambert_vert,fragmentShader:_n.meshlambert_frag},phong:{uniforms:Qo([Ct.common,Ct.specularmap,Ct.envmap,Ct.aomap,Ct.lightmap,Ct.emissivemap,Ct.bumpmap,Ct.normalmap,Ct.displacementmap,Ct.fog,Ct.lights,{emissive:{value:new bt(0)},specular:{value:new bt(1118481)},shininess:{value:30}}]),vertexShader:_n.meshphong_vert,fragmentShader:_n.meshphong_frag},standard:{uniforms:Qo([Ct.common,Ct.envmap,Ct.aomap,Ct.lightmap,Ct.emissivemap,Ct.bumpmap,Ct.normalmap,Ct.displacementmap,Ct.roughnessmap,Ct.metalnessmap,Ct.fog,Ct.lights,{emissive:{value:new bt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:_n.meshphysical_vert,fragmentShader:_n.meshphysical_frag},toon:{uniforms:Qo([Ct.common,Ct.aomap,Ct.lightmap,Ct.emissivemap,Ct.bumpmap,Ct.normalmap,Ct.displacementmap,Ct.gradientmap,Ct.fog,Ct.lights,{emissive:{value:new bt(0)}}]),vertexShader:_n.meshtoon_vert,fragmentShader:_n.meshtoon_frag},matcap:{uniforms:Qo([Ct.common,Ct.bumpmap,Ct.normalmap,Ct.displacementmap,Ct.fog,{matcap:{value:null}}]),vertexShader:_n.meshmatcap_vert,fragmentShader:_n.meshmatcap_frag},points:{uniforms:Qo([Ct.points,Ct.fog]),vertexShader:_n.points_vert,fragmentShader:_n.points_frag},dashed:{uniforms:Qo([Ct.common,Ct.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:_n.linedashed_vert,fragmentShader:_n.linedashed_frag},depth:{uniforms:Qo([Ct.common,Ct.displacementmap]),vertexShader:_n.depth_vert,fragmentShader:_n.depth_frag},normal:{uniforms:Qo([Ct.common,Ct.bumpmap,Ct.normalmap,Ct.displacementmap,{opacity:{value:1}}]),vertexShader:_n.meshnormal_vert,fragmentShader:_n.meshnormal_frag},sprite:{uniforms:Qo([Ct.sprite,Ct.fog]),vertexShader:_n.sprite_vert,fragmentShader:_n.sprite_frag},background:{uniforms:{uvTransform:{value:new zi},t2D:{value:null}},vertexShader:_n.background_vert,fragmentShader:_n.background_frag},cube:{uniforms:Qo([Ct.envmap,{opacity:{value:1}}]),vertexShader:_n.cube_vert,fragmentShader:_n.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:_n.equirect_vert,fragmentShader:_n.equirect_frag},distanceRGBA:{uniforms:Qo([Ct.common,Ct.displacementmap,{referencePosition:{value:new ge},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:_n.distanceRGBA_vert,fragmentShader:_n.distanceRGBA_frag},shadow:{uniforms:Qo([Ct.lights,Ct.fog,{color:{value:new bt(0)},opacity:{value:1}}]),vertexShader:_n.shadow_vert,fragmentShader:_n.shadow_frag}};Jl.physical={uniforms:Qo([Jl.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new rt(1,1)},clearcoatNormalMap:{value:null},sheen:{value:0},sheenTint:{value:new bt(0)},sheenRoughness:{value:0},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new rt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationTint:{value:new bt(0)},specularIntensity:{value:0},specularIntensityMap:{value:null},specularTint:{value:new bt(1,1,1)},specularTintMap:{value:null}}]),vertexShader:_n.meshphysical_vert,fragmentShader:_n.meshphysical_frag};function KWe(t,e,n,r,i){const o=new bt(0);let a=0,s,l,c=null,u=0,f=null;function h(y,g){let v=!1,b=g.isScene===!0?g.background:null;b&&b.isTexture&&(b=e.get(b));const w=t.xr,T=w.getSession&&w.getSession();T&&T.environmentBlendMode==="additive"&&(b=null),b===null?p(o,a):b&&b.isColor&&(p(b,1),v=!0),(t.autoClear||v)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),b&&(b.isCubeTexture||b.mapping===D0)?(l===void 0&&(l=new Kr(new xd(1,1,1),new wd({name:"BackgroundCubeMaterial",uniforms:Wv(Jl.cube.uniforms),vertexShader:Jl.cube.vertexShader,fragmentShader:Jl.cube.fragmentShader,side:oi,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),l.geometry.deleteAttribute("uv"),l.onBeforeRender=function(C,P,M){this.matrixWorld.copyPosition(M.matrixWorld)},Object.defineProperty(l.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(l)),l.material.uniforms.envMap.value=b,l.material.uniforms.flipEnvMap.value=b.isCubeTexture&&b.isRenderTargetTexture===!1?-1:1,(c!==b||u!==b.version||f!==t.toneMapping)&&(l.material.needsUpdate=!0,c=b,u=b.version,f=t.toneMapping),y.unshift(l,l.geometry,l.material,0,0,null)):b&&b.isTexture&&(s===void 0&&(s=new Kr(new Qc(2,2),new wd({name:"BackgroundMaterial",uniforms:Wv(Jl.background.uniforms),vertexShader:Jl.background.vertexShader,fragmentShader:Jl.background.fragmentShader,side:Jf,depthTest:!1,depthWrite:!1,fog:!1})),s.geometry.deleteAttribute("normal"),Object.defineProperty(s.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(s)),s.material.uniforms.t2D.value=b,b.matrixAutoUpdate===!0&&b.updateMatrix(),s.material.uniforms.uvTransform.value.copy(b.matrix),(c!==b||u!==b.version||f!==t.toneMapping)&&(s.material.needsUpdate=!0,c=b,u=b.version,f=t.toneMapping),y.unshift(s,s.geometry,s.material,0,0,null))}function p(y,g){n.buffers.color.setClear(y.r,y.g,y.b,g,i)}return{getClearColor:function(){return o},setClearColor:function(y,g=1){o.set(y),a=g,p(o,a)},getClearAlpha:function(){return a},setClearAlpha:function(y){a=y,p(o,a)},render:h}}function JWe(t,e,n,r){const i=t.getParameter(34921),o=r.isWebGL2?null:e.get("OES_vertex_array_object"),a=r.isWebGL2||o!==null,s={},l=g(null);let c=l;function u($,F,J,K,Z){let H=!1;if(a){const Y=y(K,J,F);c!==Y&&(c=Y,h(c.object)),H=v(K,Z),H&&b(K,Z)}else{const Y=F.wireframe===!0;(c.geometry!==K.id||c.program!==J.id||c.wireframe!==Y)&&(c.geometry=K.id,c.program=J.id,c.wireframe=Y,H=!0)}$.isInstancedMesh===!0&&(H=!0),Z!==null&&n.update(Z,34963),H&&(k($,F,J,K),Z!==null&&t.bindBuffer(34963,n.get(Z).buffer))}function f(){return r.isWebGL2?t.createVertexArray():o.createVertexArrayOES()}function h($){return r.isWebGL2?t.bindVertexArray($):o.bindVertexArrayOES($)}function p($){return r.isWebGL2?t.deleteVertexArray($):o.deleteVertexArrayOES($)}function y($,F,J){const K=J.wireframe===!0;let Z=s[$.id];Z===void 0&&(Z={},s[$.id]=Z);let H=Z[F.id];H===void 0&&(H={},Z[F.id]=H);let Y=H[K];return Y===void 0&&(Y=g(f()),H[K]=Y),Y}function g($){const F=[],J=[],K=[];for(let Z=0;Z<i;Z++)F[Z]=0,J[Z]=0,K[Z]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:F,enabledAttributes:J,attributeDivisors:K,object:$,attributes:{},index:null}}function v($,F){const J=c.attributes,K=$.attributes;let Z=0;for(const H in K){const Y=J[H],L=K[H];if(Y===void 0||Y.attribute!==L||Y.data!==L.data)return!0;Z++}return c.attributesNum!==Z||c.index!==F}function b($,F){const J={},K=$.attributes;let Z=0;for(const H in K){const Y=K[H],L={};L.attribute=Y,Y.data&&(L.data=Y.data),J[H]=L,Z++}c.attributes=J,c.attributesNum=Z,c.index=F}function w(){const $=c.newAttributes;for(let F=0,J=$.length;F<J;F++)$[F]=0}function T($){C($,0)}function C($,F){const J=c.newAttributes,K=c.enabledAttributes,Z=c.attributeDivisors;J[$]=1,K[$]===0&&(t.enableVertexAttribArray($),K[$]=1),Z[$]!==F&&((r.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"]($,F),Z[$]=F)}function P(){const $=c.newAttributes,F=c.enabledAttributes;for(let J=0,K=F.length;J<K;J++)F[J]!==$[J]&&(t.disableVertexAttribArray(J),F[J]=0)}function M($,F,J,K,Z,H){r.isWebGL2===!0&&(J===5124||J===5125)?t.vertexAttribIPointer($,F,J,Z,H):t.vertexAttribPointer($,F,J,K,Z,H)}function k($,F,J,K){if(r.isWebGL2===!1&&($.isInstancedMesh||K.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;w();const Z=K.attributes,H=J.getAttributes(),Y=F.defaultAttributeValues;for(const L in H){const N=H[L];if(N.location>=0){let V=Z[L];if(V===void 0&&(L==="instanceMatrix"&&$.instanceMatrix&&(V=$.instanceMatrix),L==="instanceColor"&&$.instanceColor&&(V=$.instanceColor)),V!==void 0){const W=V.normalized,ne=V.itemSize,se=n.get(V);if(se===void 0)continue;const te=se.buffer,ie=se.type,pe=se.bytesPerElement;if(V.isInterleavedBufferAttribute){const de=V.data,ce=de.stride,he=V.offset;if(de&&de.isInstancedInterleavedBuffer){for(let ee=0;ee<N.locationSize;ee++)C(N.location+ee,de.meshPerAttribute);$.isInstancedMesh!==!0&&K._maxInstanceCount===void 0&&(K._maxInstanceCount=de.meshPerAttribute*de.count)}else for(let ee=0;ee<N.locationSize;ee++)T(N.location+ee);t.bindBuffer(34962,te);for(let ee=0;ee<N.locationSize;ee++)M(N.location+ee,ne/N.locationSize,ie,W,ce*pe,(he+ne/N.locationSize*ee)*pe)}else{if(V.isInstancedBufferAttribute){for(let de=0;de<N.locationSize;de++)C(N.location+de,V.meshPerAttribute);$.isInstancedMesh!==!0&&K._maxInstanceCount===void 0&&(K._maxInstanceCount=V.meshPerAttribute*V.count)}else for(let de=0;de<N.locationSize;de++)T(N.location+de);t.bindBuffer(34962,te);for(let de=0;de<N.locationSize;de++)M(N.location+de,ne/N.locationSize,ie,W,ne*pe,ne/N.locationSize*de*pe)}}else if(Y!==void 0){const W=Y[L];if(W!==void 0)switch(W.length){case 2:t.vertexAttrib2fv(N.location,W);break;case 3:t.vertexAttrib3fv(N.location,W);break;case 4:t.vertexAttrib4fv(N.location,W);break;default:t.vertexAttrib1fv(N.location,W)}}}}P()}function I(){O();for(const $ in s){const F=s[$];for(const J in F){const K=F[J];for(const Z in K)p(K[Z].object),delete K[Z];delete F[J]}delete s[$]}}function U($){if(s[$.id]===void 0)return;const F=s[$.id];for(const J in F){const K=F[J];for(const Z in K)p(K[Z].object),delete K[Z];delete F[J]}delete s[$.id]}function z($){for(const F in s){const J=s[F];if(J[$.id]===void 0)continue;const K=J[$.id];for(const Z in K)p(K[Z].object),delete K[Z];delete J[$.id]}}function O(){B(),c!==l&&(c=l,h(c.object))}function B(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:u,reset:O,resetDefaultState:B,dispose:I,releaseStatesOfGeometry:U,releaseStatesOfProgram:z,initAttributes:w,enableAttribute:T,disableUnusedAttributes:P}}function ZWe(t,e,n,r){const i=r.isWebGL2;let o;function a(c){o=c}function s(c,u){t.drawArrays(o,c,u),n.update(u,o,1)}function l(c,u,f){if(f===0)return;let h,p;if(i)h=t,p="drawArraysInstanced";else if(h=e.get("ANGLE_instanced_arrays"),p="drawArraysInstancedANGLE",h===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}h[p](o,c,u,f),n.update(u,o,f)}this.setMode=a,this.render=s,this.renderInstances=l}function QWe(t,e,n){let r;function i(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const k=e.get("EXT_texture_filter_anisotropic");r=t.getParameter(k.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function o(k){if(k==="highp"){if(t.getShaderPrecisionFormat(35633,36338).precision>0&&t.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";k="mediump"}return k==="mediump"&&t.getShaderPrecisionFormat(35633,36337).precision>0&&t.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const a=typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&t instanceof WebGL2ComputeRenderingContext;let s=n.precision!==void 0?n.precision:"highp";const l=o(s);l!==s&&(console.warn("THREE.WebGLRenderer:",s,"not supported, using",l,"instead."),s=l);const c=a||e.has("WEBGL_draw_buffers"),u=n.logarithmicDepthBuffer===!0,f=t.getParameter(34930),h=t.getParameter(35660),p=t.getParameter(3379),y=t.getParameter(34076),g=t.getParameter(34921),v=t.getParameter(36347),b=t.getParameter(36348),w=t.getParameter(36349),T=h>0,C=a||e.has("OES_texture_float"),P=T&&C,M=a?t.getParameter(36183):0;return{isWebGL2:a,drawBuffers:c,getMaxAnisotropy:i,getMaxPrecision:o,precision:s,logarithmicDepthBuffer:u,maxTextures:f,maxVertexTextures:h,maxTextureSize:p,maxCubemapSize:y,maxAttributes:g,maxVertexUniforms:v,maxVaryings:b,maxFragmentUniforms:w,vertexTextures:T,floatFragmentTextures:C,floatVertexTextures:P,maxSamples:M}}function eGe(t){const e=this;let n=null,r=0,i=!1,o=!1;const a=new Kl,s=new zi,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(f,h,p){const y=f.length!==0||h||r!==0||i;return i=h,n=u(f,p,0),r=f.length,y},this.beginShadows=function(){o=!0,u(null)},this.endShadows=function(){o=!1,c()},this.setState=function(f,h,p){const y=f.clippingPlanes,g=f.clipIntersection,v=f.clipShadows,b=t.get(f);if(!i||y===null||y.length===0||o&&!v)o?u(null):c();else{const w=o?0:r,T=w*4;let C=b.clippingState||null;l.value=C,C=u(y,h,T,p);for(let P=0;P!==T;++P)C[P]=n[P];b.clippingState=C,this.numIntersection=g?this.numPlanes:0,this.numPlanes+=w}};function c(){l.value!==n&&(l.value=n,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function u(f,h,p,y){const g=f!==null?f.length:0;let v=null;if(g!==0){if(v=l.value,y!==!0||v===null){const b=p+g*4,w=h.matrixWorldInverse;s.getNormalMatrix(w),(v===null||v.length<b)&&(v=new Float32Array(b));for(let T=0,C=p;T!==g;++T,C+=4)a.copy(f[T]).applyMatrix4(w,s),a.normal.toArray(v,C),v[C+3]=a.constant}l.value=v,l.needsUpdate=!0}return e.numPlanes=g,e.numIntersection=0,v}}function tGe(t){let e=new WeakMap;function n(a,s){return s===t1?a.mapping=O0:s===n1&&(a.mapping=L0),a}function r(a){if(a&&a.isTexture&&a.isRenderTargetTexture===!1){const s=a.mapping;if(s===t1||s===n1)if(e.has(a)){const l=e.get(a).texture;return n(l,a.mapping)}else{const l=a.image;if(l&&l.height>0){const c=t.getRenderTarget(),u=new f2(l.height/2);return u.fromEquirectangularTexture(t,a),e.set(a,u),t.setRenderTarget(c),a.addEventListener("dispose",i),n(u.texture,a.mapping)}else return null}}return a}function i(a){const s=a.target;s.removeEventListener("dispose",i);const l=e.get(s);l!==void 0&&(e.delete(s),l.dispose())}function o(){e=new WeakMap}return{get:r,dispose:o}}class ld extends F0{constructor(e=-1,n=1,r=1,i=-1,o=.1,a=2e3){super(),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=n,this.top=r,this.bottom=i,this.near=o,this.far=a,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,n,r,i,o,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=o,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let o=r-e,a=r+e,s=i+n,l=i-n;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=c*this.view.offsetX,a=o+c*this.view.width,s-=u*this.view.offsetY,l=s-u*this.view.height}this.projectionMatrix.makeOrthographic(o,a,s,l,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}}ld.prototype.isOrthographicCamera=!0;class U0 extends wd{constructor(e){super(e),this.type="RawShaderMaterial"}}U0.prototype.isRawShaderMaterial=!0;const ov=4,Bf=8,Ic=Math.pow(2,Bf),fle=[.125,.215,.35,.446,.526,.582],hle=Bf-ov+1+fle.length,sy=20,Zf={[Vo]:0,[ph]:1,[s2]:2,[R5]:3,[j5]:4,[I5]:5,[a2]:6},Wj=new ld,{_lodPlanes:aw,_sizeLods:Rq,_sigmas:y_}=rGe(),jq=new bt;let Gj=null;const yp=(1+Math.sqrt(5))/2,ly=1/yp,Iq=[new ge(1,1,1),new ge(-1,1,1),new ge(1,1,-1),new ge(-1,1,-1),new ge(0,yp,ly),new ge(0,yp,-ly),new ge(ly,0,yp),new ge(-ly,0,yp),new ge(yp,ly,0),new ge(-yp,ly,0)];class ple{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._blurMaterial=iGe(sy),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}fromScene(e,n=0,r=.1,i=100){Gj=this._renderer.getRenderTarget();const o=this._allocateTargets();return this._sceneToCubeUV(e,r,i,o),n>0&&this._blur(o,0,0,n),this._applyPMREM(o),this._cleanup(o),o}fromEquirectangular(e){return this._fromTexture(e)}fromCubemap(e){return this._fromTexture(e)}compileCubemapShader(){this._cubemapShader===null&&(this._cubemapShader=Dq(),this._compileMaterial(this._cubemapShader))}compileEquirectangularShader(){this._equirectShader===null&&(this._equirectShader=Lq(),this._compileMaterial(this._equirectShader))}dispose(){this._blurMaterial.dispose(),this._cubemapShader!==null&&this._cubemapShader.dispose(),this._equirectShader!==null&&this._equirectShader.dispose();for(let e=0;e<aw.length;e++)aw[e].dispose()}_cleanup(e){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(Gj),e.scissorTest=!1,v_(e,0,0,e.width,e.height)}_fromTexture(e){Gj=this._renderer.getRenderTarget();const n=this._allocateTargets(e);return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(e){const n={magFilter:Fi,minFilter:Fi,generateMipmaps:!1,type:Zc,format:lse,encoding:nGe(e)?e.encoding:s2,depthBuffer:!1},r=Oq(n);return r.depthBuffer=!e,this._pingPongRenderTarget=Oq(n),r}_compileMaterial(e){const n=new Kr(aw[0],e);this._renderer.compile(n,Wj)}_sceneToCubeUV(e,n,r,i){const s=new ci(90,1,n,r),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],u=this._renderer,f=u.autoClear,h=u.outputEncoding,p=u.toneMapping;u.getClearColor(jq),u.toneMapping=sd,u.outputEncoding=Vo,u.autoClear=!1;const y=new lu({name:"PMREM.Background",side:oi,depthWrite:!1,depthTest:!1}),g=new Kr(new xd,y);let v=!1;const b=e.background;b?b.isColor&&(y.color.copy(b),e.background=null,v=!0):(y.color.copy(jq),v=!0);for(let w=0;w<6;w++){const T=w%3;T==0?(s.up.set(0,l[w],0),s.lookAt(c[w],0,0)):T==1?(s.up.set(0,0,l[w]),s.lookAt(0,c[w],0)):(s.up.set(0,l[w],0),s.lookAt(0,0,c[w])),v_(i,T*Ic,w>2?Ic:0,Ic,Ic),u.setRenderTarget(i),v&&u.render(g,s),u.render(e,s)}g.geometry.dispose(),g.material.dispose(),u.toneMapping=p,u.outputEncoding=h,u.autoClear=f,e.background=b}_setEncoding(e,n){this._renderer.capabilities.isWebGL2===!0&&n.format===ro&&n.type===Zc&&n.encoding===ph?e.value=Zf[Vo]:e.value=Zf[n.encoding]}_textureToCubeUV(e,n){const r=this._renderer;e.isCubeTexture?this._cubemapShader==null&&(this._cubemapShader=Dq()):this._equirectShader==null&&(this._equirectShader=Lq());const i=e.isCubeTexture?this._cubemapShader:this._equirectShader,o=new Kr(aw[0],i),a=i.uniforms;a.envMap.value=e,e.isCubeTexture||a.texelSize.value.set(1/e.image.width,1/e.image.height),this._setEncoding(a.inputEncoding,e),this._setEncoding(a.outputEncoding,n.texture),v_(n,0,0,3*Ic,2*Ic),r.setRenderTarget(n),r.render(o,Wj)}_applyPMREM(e){const n=this._renderer,r=n.autoClear;n.autoClear=!1;for(let i=1;i<hle;i++){const o=Math.sqrt(y_[i]*y_[i]-y_[i-1]*y_[i-1]),a=Iq[(i-1)%Iq.length];this._blur(e,i-1,i,o,a)}n.autoClear=r}_blur(e,n,r,i,o){const a=this._pingPongRenderTarget;this._halfBlur(e,a,n,r,i,"latitudinal",o),this._halfBlur(a,e,r,r,i,"longitudinal",o)}_halfBlur(e,n,r,i,o,a,s){const l=this._renderer,c=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const u=3,f=new Kr(aw[i],c),h=c.uniforms,p=Rq[r]-1,y=isFinite(o)?Math.PI/(2*p):2*Math.PI/(2*sy-1),g=o/y,v=isFinite(o)?1+Math.floor(u*g):sy;v>sy&&console.warn(`sigmaRadians, ${o}, is too large and will clip, as it requested ${v} samples when the maximum is set to ${sy}`);const b=[];let w=0;for(let M=0;M<sy;++M){const k=M/g,I=Math.exp(-k*k/2);b.push(I),M==0?w+=I:M<v&&(w+=2*I)}for(let M=0;M<b.length;M++)b[M]=b[M]/w;h.envMap.value=e.texture,h.samples.value=v,h.weights.value=b,h.latitudinal.value=a==="latitudinal",s&&(h.poleAxis.value=s),h.dTheta.value=y,h.mipInt.value=Bf-r,this._setEncoding(h.inputEncoding,e.texture),this._setEncoding(h.outputEncoding,e.texture);const T=Rq[i],C=3*Math.max(0,Ic-2*T),P=(i===0?0:2*Ic)+2*T*(i>Bf-ov?i-Bf+ov:0);v_(n,C,P,3*T,2*T),l.setRenderTarget(n),l.render(f,Wj)}}function nGe(t){return t===void 0||t.type!==Zc?!1:t.encoding===Vo||t.encoding===ph||t.encoding===a2}function rGe(){const t=[],e=[],n=[];let r=Bf;for(let i=0;i<hle;i++){const o=Math.pow(2,r);e.push(o);let a=1/o;i>Bf-ov?a=fle[i-Bf+ov-1]:i==0&&(a=0),n.push(a);const s=1/(o-1),l=-s/2,c=1+s/2,u=[l,l,c,l,c,c,l,l,c,c,l,c],f=6,h=6,p=3,y=2,g=1,v=new Float32Array(p*h*f),b=new Float32Array(y*h*f),w=new Float32Array(g*h*f);for(let C=0;C<f;C++){const P=C%3*2/3-1,M=C>2?0:-1,k=[P,M,0,P+2/3,M,0,P+2/3,M+1,0,P,M,0,P+2/3,M+1,0,P,M+1,0];v.set(k,p*h*C),b.set(u,y*h*C);const I=[C,C,C,C,C,C];w.set(I,g*h*C)}const T=new Yt;T.setAttribute("position",new Bn(v,p)),T.setAttribute("uv",new Bn(b,y)),T.setAttribute("faceIndex",new Bn(w,g)),t.push(T),r>ov&&r--}return{_lodPlanes:t,_sizeLods:e,_sigmas:n}}function Oq(t){const e=new ic(3*Ic,3*Ic,t);return e.texture.mapping=D0,e.texture.name="PMREM.cubeUv",e.scissorTest=!0,e}function v_(t,e,n,r,i){t.viewport.set(e,n,r,i),t.scissor.set(e,n,r,i)}function iGe(t){const e=new Float32Array(t),n=new ge(0,1,0);return new U0({name:"SphericalGaussianBlur",defines:{n:t},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:e},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:n},inputEncoding:{value:Zf[Vo]},outputEncoding:{value:Zf[Vo]}},vertexShader:z5(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			${U5()}

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

				gl_FragColor = linearToOutputTexel( gl_FragColor );

			}
		`,blending:ad,depthTest:!1,depthWrite:!1})}function Lq(){const t=new rt(1,1);return new U0({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:t},inputEncoding:{value:Zf[Vo]},outputEncoding:{value:Zf[Vo]}},vertexShader:z5(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform vec2 texelSize;

			${U5()}

			#include <common>

			void main() {

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				vec2 f = fract( uv / texelSize - 0.5 );
				uv -= f * texelSize;
				vec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;
				uv.x += texelSize.x;
				vec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;
				uv.y += texelSize.y;
				vec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;
				uv.x -= texelSize.x;
				vec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;

				vec3 tm = mix( tl, tr, f.x );
				vec3 bm = mix( bl, br, f.x );
				gl_FragColor.rgb = mix( tm, bm, f.y );

				gl_FragColor = linearToOutputTexel( gl_FragColor );

			}
		`,blending:ad,depthTest:!1,depthWrite:!1})}function Dq(){return new U0({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:Zf[Vo]},outputEncoding:{value:Zf[Vo]}},vertexShader:z5(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			${U5()}

			void main() {

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;
				gl_FragColor = linearToOutputTexel( gl_FragColor );

			}
		`,blending:ad,depthTest:!1,depthWrite:!1})}function z5(){return`

		precision mediump float;
		precision mediump int;

		attribute vec3 position;
		attribute vec2 uv;
		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function U5(){return`

		uniform int inputEncoding;
		uniform int outputEncoding;

		#include <encodings_pars_fragment>

		vec4 inputTexelToLinear( vec4 value ) {

			if ( inputEncoding == 0 ) {

				return value;

			} else if ( inputEncoding == 1 ) {

				return sRGBToLinear( value );

			} else if ( inputEncoding == 2 ) {

				return RGBEToLinear( value );

			} else if ( inputEncoding == 3 ) {

				return RGBMToLinear( value, 7.0 );

			} else if ( inputEncoding == 4 ) {

				return RGBMToLinear( value, 16.0 );

			} else if ( inputEncoding == 5 ) {

				return RGBDToLinear( value, 256.0 );

			} else {

				return GammaToLinear( value, 2.2 );

			}

		}

		vec4 linearToOutputTexel( vec4 value ) {

			if ( outputEncoding == 0 ) {

				return value;

			} else if ( outputEncoding == 1 ) {

				return LinearTosRGB( value );

			} else if ( outputEncoding == 2 ) {

				return LinearToRGBE( value );

			} else if ( outputEncoding == 3 ) {

				return LinearToRGBM( value, 7.0 );

			} else if ( outputEncoding == 4 ) {

				return LinearToRGBM( value, 16.0 );

			} else if ( outputEncoding == 5 ) {

				return LinearToRGBD( value, 256.0 );

			} else {

				return LinearToGamma( value, 2.2 );

			}

		}

		vec4 envMapTexelToLinear( vec4 color ) {

			return inputTexelToLinear( color );

		}
	`}function oGe(t){let e=new WeakMap,n=null;function r(s){if(s&&s.isTexture&&s.isRenderTargetTexture===!1){const l=s.mapping,c=l===t1||l===n1,u=l===O0||l===L0;if(c||u){if(e.has(s))return e.get(s).texture;{const f=s.image;if(c&&f&&f.height>0||u&&f&&i(f)){const h=t.getRenderTarget();n===null&&(n=new ple(t));const p=c?n.fromEquirectangular(s):n.fromCubemap(s);return e.set(s,p),t.setRenderTarget(h),s.addEventListener("dispose",o),p.texture}else return null}}}return s}function i(s){let l=0;const c=6;for(let u=0;u<c;u++)s[u]!==void 0&&l++;return l===c}function o(s){const l=s.target;l.removeEventListener("dispose",o);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function a(){e=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:r,dispose:a}}function aGe(t){const e={};function n(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=t.getExtension(r)}return e[r]=i,i}return{has:function(r){return n(r)!==null},init:function(r){r.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float")},get:function(r){const i=n(r);return i===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function sGe(t,e,n,r){const i={},o=new WeakMap;function a(f){const h=f.target;h.index!==null&&e.remove(h.index);for(const y in h.attributes)e.remove(h.attributes[y]);h.removeEventListener("dispose",a),delete i[h.id];const p=o.get(h);p&&(e.remove(p),o.delete(h)),r.releaseStatesOfGeometry(h),h.isInstancedBufferGeometry===!0&&delete h._maxInstanceCount,n.memory.geometries--}function s(f,h){return i[h.id]===!0||(h.addEventListener("dispose",a),i[h.id]=!0,n.memory.geometries++),h}function l(f){const h=f.attributes;for(const y in h)e.update(h[y],34962);const p=f.morphAttributes;for(const y in p){const g=p[y];for(let v=0,b=g.length;v<b;v++)e.update(g[v],34962)}}function c(f){const h=[],p=f.index,y=f.attributes.position;let g=0;if(p!==null){const w=p.array;g=p.version;for(let T=0,C=w.length;T<C;T+=3){const P=w[T+0],M=w[T+1],k=w[T+2];h.push(P,M,M,k,k,P)}}else{const w=y.array;g=y.version;for(let T=0,C=w.length/3-1;T<C;T+=3){const P=T+0,M=T+1,k=T+2;h.push(P,M,M,k,k,P)}}const v=new(tle(h)>65535?u2:c2)(h,1);v.version=g;const b=o.get(f);b&&e.remove(b),o.set(f,v)}function u(f){const h=o.get(f);if(h){const p=f.index;p!==null&&h.version<p.version&&c(f)}else c(f);return o.get(f)}return{get:s,update:l,getWireframeAttribute:u}}function lGe(t,e,n,r){const i=r.isWebGL2;let o;function a(h){o=h}let s,l;function c(h){s=h.type,l=h.bytesPerElement}function u(h,p){t.drawElements(o,p,s,h*l),n.update(p,o,1)}function f(h,p,y){if(y===0)return;let g,v;if(i)g=t,v="drawElementsInstanced";else if(g=e.get("ANGLE_instanced_arrays"),v="drawElementsInstancedANGLE",g===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}g[v](o,p,s,h*l,y),n.update(p,o,y)}this.setMode=a,this.setIndex=c,this.render=u,this.renderInstances=f}function cGe(t){const e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function r(o,a,s){switch(n.calls++,a){case 4:n.triangles+=s*(o/3);break;case 1:n.lines+=s*(o/2);break;case 3:n.lines+=s*(o-1);break;case 2:n.lines+=s*o;break;case 0:n.points+=s*o;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a);break}}function i(){n.frame++,n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:i,update:r}}class h2 extends Hi{constructor(e=null,n=1,r=1,i=1){super(null),this.image={data:e,width:n,height:r,depth:i},this.magFilter=Fi,this.minFilter=Fi,this.wrapR=$o,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}h2.prototype.isDataTexture2DArray=!0;function uGe(t,e){return t[0]-e[0]}function dGe(t,e){return Math.abs(e[1])-Math.abs(t[1])}function Fq(t,e){let n=1;const r=e.isInterleavedBufferAttribute?e.data.array:e.array;r instanceof Int8Array?n=127:r instanceof Int16Array?n=32767:r instanceof Int32Array?n=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",r),t.divideScalar(n)}function fGe(t,e,n){const r={},i=new Float32Array(8),o=new WeakMap,a=new ge,s=[];for(let c=0;c<8;c++)s[c]=[c,0];function l(c,u,f,h){const p=c.morphTargetInfluences;if(e.isWebGL2===!0){const y=u.morphAttributes.position.length;let g=o.get(u);if(g===void 0||g.count!==y){g!==void 0&&g.texture.dispose();const w=u.morphAttributes.normal!==void 0,T=u.morphAttributes.position,C=u.morphAttributes.normal||[],P=u.attributes.position.count,M=w===!0?2:1;let k=P*M,I=1;k>e.maxTextureSize&&(I=Math.ceil(k/e.maxTextureSize),k=e.maxTextureSize);const U=new Float32Array(k*I*4*y),z=new h2(U,k,I,y);z.format=ro,z.type=zc;const O=M*4;for(let B=0;B<y;B++){const $=T[B],F=C[B],J=k*I*4*B;for(let K=0;K<$.count;K++){a.fromBufferAttribute($,K),$.normalized===!0&&Fq(a,$);const Z=K*O;U[J+Z+0]=a.x,U[J+Z+1]=a.y,U[J+Z+2]=a.z,U[J+Z+3]=0,w===!0&&(a.fromBufferAttribute(F,K),F.normalized===!0&&Fq(a,F),U[J+Z+4]=a.x,U[J+Z+5]=a.y,U[J+Z+6]=a.z,U[J+Z+7]=0)}}g={count:y,texture:z,size:new rt(k,I)},o.set(u,g)}let v=0;for(let w=0;w<p.length;w++)v+=p[w];const b=u.morphTargetsRelative?1:1-v;h.getUniforms().setValue(t,"morphTargetBaseInfluence",b),h.getUniforms().setValue(t,"morphTargetInfluences",p),h.getUniforms().setValue(t,"morphTargetsTexture",g.texture,n),h.getUniforms().setValue(t,"morphTargetsTextureSize",g.size)}else{const y=p===void 0?0:p.length;let g=r[u.id];if(g===void 0||g.length!==y){g=[];for(let C=0;C<y;C++)g[C]=[C,0];r[u.id]=g}for(let C=0;C<y;C++){const P=g[C];P[0]=C,P[1]=p[C]}g.sort(dGe);for(let C=0;C<8;C++)C<y&&g[C][1]?(s[C][0]=g[C][0],s[C][1]=g[C][1]):(s[C][0]=Number.MAX_SAFE_INTEGER,s[C][1]=0);s.sort(uGe);const v=u.morphAttributes.position,b=u.morphAttributes.normal;let w=0;for(let C=0;C<8;C++){const P=s[C],M=P[0],k=P[1];M!==Number.MAX_SAFE_INTEGER&&k?(v&&u.getAttribute("morphTarget"+C)!==v[M]&&u.setAttribute("morphTarget"+C,v[M]),b&&u.getAttribute("morphNormal"+C)!==b[M]&&u.setAttribute("morphNormal"+C,b[M]),i[C]=k,w+=k):(v&&u.hasAttribute("morphTarget"+C)===!0&&u.deleteAttribute("morphTarget"+C),b&&u.hasAttribute("morphNormal"+C)===!0&&u.deleteAttribute("morphNormal"+C),i[C]=0)}const T=u.morphTargetsRelative?1:1-w;h.getUniforms().setValue(t,"morphTargetBaseInfluence",T),h.getUniforms().setValue(t,"morphTargetInfluences",i)}}return{update:l}}function hGe(t,e,n,r){let i=new WeakMap;function o(l){const c=r.render.frame,u=l.geometry,f=e.get(l,u);return i.get(f)!==c&&(e.update(f),i.set(f,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",s)===!1&&l.addEventListener("dispose",s),n.update(l.instanceMatrix,34962),l.instanceColor!==null&&n.update(l.instanceColor,34962)),f}function a(){i=new WeakMap}function s(l){const c=l.target;c.removeEventListener("dispose",s),n.remove(c.instanceMatrix),c.instanceColor!==null&&n.remove(c.instanceColor)}return{update:o,dispose:a}}class B5 extends Hi{constructor(e=null,n=1,r=1,i=1){super(null),this.image={data:e,width:n,height:r,depth:i},this.magFilter=Fi,this.minFilter=Fi,this.wrapR=$o,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}B5.prototype.isDataTexture3D=!0;const mle=new Hi,pGe=new h2,mGe=new B5,gle=new z0,zq=[],Uq=[],Bq=new Float32Array(16),$q=new Float32Array(9),Hq=new Float32Array(4);function B0(t,e,n){const r=t[0];if(r<=0||r>0)return t;const i=e*n;let o=zq[i];if(o===void 0&&(o=new Float32Array(i),zq[i]=o),e!==0){r.toArray(o,0);for(let a=1,s=0;a!==e;++a)s+=n,t[a].toArray(o,s)}return o}function Ma(t,e){if(t.length!==e.length)return!1;for(let n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}function aa(t,e){for(let n=0,r=e.length;n<r;n++)t[n]=e[n]}function yle(t,e){let n=Uq[e];n===void 0&&(n=new Int32Array(e),Uq[e]=n);for(let r=0;r!==e;++r)n[r]=t.allocateTextureUnit();return n}function gGe(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function yGe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Ma(n,e))return;t.uniform2fv(this.addr,e),aa(n,e)}}function vGe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(e.r!==void 0)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(Ma(n,e))return;t.uniform3fv(this.addr,e),aa(n,e)}}function xGe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Ma(n,e))return;t.uniform4fv(this.addr,e),aa(n,e)}}function wGe(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(Ma(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),aa(n,e)}else{if(Ma(n,r))return;Hq.set(r),t.uniformMatrix2fv(this.addr,!1,Hq),aa(n,r)}}function bGe(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(Ma(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),aa(n,e)}else{if(Ma(n,r))return;$q.set(r),t.uniformMatrix3fv(this.addr,!1,$q),aa(n,r)}}function SGe(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(Ma(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),aa(n,e)}else{if(Ma(n,r))return;Bq.set(r),t.uniformMatrix4fv(this.addr,!1,Bq),aa(n,r)}}function EGe(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function _Ge(t,e){const n=this.cache;Ma(n,e)||(t.uniform2iv(this.addr,e),aa(n,e))}function TGe(t,e){const n=this.cache;Ma(n,e)||(t.uniform3iv(this.addr,e),aa(n,e))}function CGe(t,e){const n=this.cache;Ma(n,e)||(t.uniform4iv(this.addr,e),aa(n,e))}function AGe(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function MGe(t,e){const n=this.cache;Ma(n,e)||(t.uniform2uiv(this.addr,e),aa(n,e))}function PGe(t,e){const n=this.cache;Ma(n,e)||(t.uniform3uiv(this.addr,e),aa(n,e))}function kGe(t,e){const n=this.cache;Ma(n,e)||(t.uniform4uiv(this.addr,e),aa(n,e))}function NGe(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.safeSetTexture2D(e||mle,i)}function RGe(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(e||mGe,i)}function jGe(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.safeSetTextureCube(e||gle,i)}function IGe(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(e||pGe,i)}function OGe(t){switch(t){case 5126:return gGe;case 35664:return yGe;case 35665:return vGe;case 35666:return xGe;case 35674:return wGe;case 35675:return bGe;case 35676:return SGe;case 5124:case 35670:return EGe;case 35667:case 35671:return _Ge;case 35668:case 35672:return TGe;case 35669:case 35673:return CGe;case 5125:return AGe;case 36294:return MGe;case 36295:return PGe;case 36296:return kGe;case 35678:case 36198:case 36298:case 36306:case 35682:return NGe;case 35679:case 36299:case 36307:return RGe;case 35680:case 36300:case 36308:case 36293:return jGe;case 36289:case 36303:case 36311:case 36292:return IGe}}function LGe(t,e){t.uniform1fv(this.addr,e)}function DGe(t,e){const n=B0(e,this.size,2);t.uniform2fv(this.addr,n)}function FGe(t,e){const n=B0(e,this.size,3);t.uniform3fv(this.addr,n)}function zGe(t,e){const n=B0(e,this.size,4);t.uniform4fv(this.addr,n)}function UGe(t,e){const n=B0(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function BGe(t,e){const n=B0(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function $Ge(t,e){const n=B0(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function HGe(t,e){t.uniform1iv(this.addr,e)}function VGe(t,e){t.uniform2iv(this.addr,e)}function WGe(t,e){t.uniform3iv(this.addr,e)}function GGe(t,e){t.uniform4iv(this.addr,e)}function qGe(t,e){t.uniform1uiv(this.addr,e)}function YGe(t,e){t.uniform2uiv(this.addr,e)}function XGe(t,e){t.uniform3uiv(this.addr,e)}function KGe(t,e){t.uniform4uiv(this.addr,e)}function JGe(t,e,n){const r=e.length,i=yle(n,r);t.uniform1iv(this.addr,i);for(let o=0;o!==r;++o)n.safeSetTexture2D(e[o]||mle,i[o])}function ZGe(t,e,n){const r=e.length,i=yle(n,r);t.uniform1iv(this.addr,i);for(let o=0;o!==r;++o)n.safeSetTextureCube(e[o]||gle,i[o])}function QGe(t){switch(t){case 5126:return LGe;case 35664:return DGe;case 35665:return FGe;case 35666:return zGe;case 35674:return UGe;case 35675:return BGe;case 35676:return $Ge;case 5124:case 35670:return HGe;case 35667:case 35671:return VGe;case 35668:case 35672:return WGe;case 35669:case 35673:return GGe;case 5125:return qGe;case 36294:return YGe;case 36295:return XGe;case 36296:return KGe;case 35678:case 36198:case 36298:case 36306:case 35682:return JGe;case 35680:case 36300:case 36308:case 36293:return ZGe}}function e9e(t,e,n){this.id=t,this.addr=n,this.cache=[],this.setValue=OGe(e.type)}function vle(t,e,n){this.id=t,this.addr=n,this.cache=[],this.size=e.size,this.setValue=QGe(e.type)}vle.prototype.updateCache=function(t){const e=this.cache;t instanceof Float32Array&&e.length!==t.length&&(this.cache=new Float32Array(t.length)),aa(e,t)};function xle(t){this.id=t,this.seq=[],this.map={}}xle.prototype.setValue=function(t,e,n){const r=this.seq;for(let i=0,o=r.length;i!==o;++i){const a=r[i];a.setValue(t,e[a.id],n)}};const qj=/(\w+)(\])?(\[|\.)?/g;function Vq(t,e){t.seq.push(e),t.map[e.id]=e}function t9e(t,e,n){const r=t.name,i=r.length;for(qj.lastIndex=0;;){const o=qj.exec(r),a=qj.lastIndex;let s=o[1];const l=o[2]==="]",c=o[3];if(l&&(s=s|0),c===void 0||c==="["&&a+2===i){Vq(n,c===void 0?new e9e(s,t,e):new vle(s,t,e));break}else{let f=n.map[s];f===void 0&&(f=new xle(s),Vq(n,f)),n=f}}}function $f(t,e){this.seq=[],this.map={};const n=t.getProgramParameter(e,35718);for(let r=0;r<n;++r){const i=t.getActiveUniform(e,r),o=t.getUniformLocation(e,i.name);t9e(i,o,this)}}$f.prototype.setValue=function(t,e,n,r){const i=this.map[e];i!==void 0&&i.setValue(t,n,r)};$f.prototype.setOptional=function(t,e,n){const r=e[n];r!==void 0&&this.setValue(t,n,r)};$f.upload=function(t,e,n,r){for(let i=0,o=e.length;i!==o;++i){const a=e[i],s=n[a.id];s.needsUpdate!==!1&&a.setValue(t,s.value,r)}};$f.seqWithValue=function(t,e){const n=[];for(let r=0,i=t.length;r!==i;++r){const o=t[r];o.id in e&&n.push(o)}return n};function Wq(t,e,n){const r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}let n9e=0;function r9e(t){const e=t.split(`
`);for(let n=0;n<e.length;n++)e[n]=n+1+": "+e[n];return e.join(`
`)}function wle(t){switch(t){case Vo:return["Linear","( value )"];case ph:return["sRGB","( value )"];case s2:return["RGBE","( value )"];case R5:return["RGBM","( value, 7.0 )"];case j5:return["RGBM","( value, 16.0 )"];case I5:return["RGBD","( value, 256.0 )"];case a2:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case Xse:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",t),["Linear","( value )"]}}function Gq(t,e,n){const r=t.getShaderParameter(e,35713),i=t.getShaderInfoLog(e).trim();return r&&i===""?"":n.toUpperCase()+`

`+i+`

`+r9e(t.getShaderSource(e))}function cy(t,e){const n=wle(e);return"vec4 "+t+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function i9e(t,e){const n=wle(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function o9e(t,e){let n;switch(e){case Xae:n="Linear";break;case Kae:n="Reinhard";break;case Jae:n="OptimizedCineon";break;case P5:n="ACESFilmic";break;case Zae:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function a9e(t){return[t.extensionDerivatives||t.envMapCubeUV||t.bumpMap||t.tangentSpaceNormalMap||t.clearcoatNormalMap||t.flatShading||t.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap||t.transmission)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Aw).join(`
`)}function s9e(t){const e=[];for(const n in t){const r=t[n];r!==!1&&e.push("#define "+n+" "+r)}return e.join(`
`)}function l9e(t,e){const n={},r=t.getProgramParameter(e,35721);for(let i=0;i<r;i++){const o=t.getActiveAttrib(e,i),a=o.name;let s=1;o.type===35674&&(s=2),o.type===35675&&(s=3),o.type===35676&&(s=4),n[a]={type:o.type,location:t.getAttribLocation(e,a),locationSize:s}}return n}function Aw(t){return t!==""}function qq(t,e){return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Yq(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const c9e=/^[ \t]*#include +<([\w\d./]+)>/gm;function ID(t){return t.replace(c9e,u9e)}function u9e(t,e){const n=_n[e];if(n===void 0)throw new Error("Can not resolve #include <"+e+">");return ID(n)}const d9e=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,f9e=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Xq(t){return t.replace(f9e,ble).replace(d9e,h9e)}function h9e(t,e,n,r){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),ble(t,e,n,r)}function ble(t,e,n,r){let i="";for(let o=parseInt(e);o<parseInt(n);o++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return i}function Kq(t){let e="precision "+t.precision+` float;
precision `+t.precision+" int;";return t.precision==="highp"?e+=`
#define HIGH_PRECISION`:t.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:t.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function p9e(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===r2?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===Ww?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===Ip&&(e="SHADOWMAP_TYPE_VSM"),e}function m9e(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case O0:case L0:e="ENVMAP_TYPE_CUBE";break;case D0:case iS:e="ENVMAP_TYPE_CUBE_UV";break}return e}function g9e(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case L0:case iS:e="ENVMAP_MODE_REFRACTION";break}return e}function y9e(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case rS:e="ENVMAP_BLENDING_MULTIPLY";break;case qae:e="ENVMAP_BLENDING_MIX";break;case Yae:e="ENVMAP_BLENDING_ADD";break}return e}function v9e(t,e,n,r){const i=t.getContext(),o=n.defines;let a=n.vertexShader,s=n.fragmentShader;const l=p9e(n),c=m9e(n),u=g9e(n),f=y9e(n),h=t.gammaFactor>0?t.gammaFactor:1,p=n.isWebGL2?"":a9e(n),y=s9e(o),g=i.createProgram();let v,b,w=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(v=[y].filter(Aw).join(`
`),v.length>0&&(v+=`
`),b=[p,y].filter(Aw).join(`
`),b.length>0&&(b+=`
`)):(v=[Kq(n),"#define SHADER_NAME "+n.shaderName,y,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+h,"#define MAX_BONES "+n.maxBones,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularTintMap?"#define USE_SPECULARTINTMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphTargets&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargets&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Aw).join(`
`),b=[p,Kq(n),"#define SHADER_NAME "+n.shaderName,y,"#define GAMMA_FACTOR "+h,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+u:"",n.envMap?"#define "+f:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularTintMap?"#define USE_SPECULARTINTMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(n.extensionShaderTextureLOD||n.envMap)&&n.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==sd?"#define TONE_MAPPING":"",n.toneMapping!==sd?_n.tonemapping_pars_fragment:"",n.toneMapping!==sd?o9e("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.format===qp?"#define OPAQUE":"",_n.encodings_pars_fragment,n.map?cy("mapTexelToLinear",n.mapEncoding):"",n.matcap?cy("matcapTexelToLinear",n.matcapEncoding):"",n.envMap?cy("envMapTexelToLinear",n.envMapEncoding):"",n.emissiveMap?cy("emissiveMapTexelToLinear",n.emissiveMapEncoding):"",n.specularTintMap?cy("specularTintMapTexelToLinear",n.specularTintMapEncoding):"",n.lightMap?cy("lightMapTexelToLinear",n.lightMapEncoding):"",i9e("linearToOutputTexel",n.outputEncoding),n.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(Aw).join(`
`)),a=ID(a),a=qq(a,n),a=Yq(a,n),s=ID(s),s=qq(s,n),s=Yq(s,n),a=Xq(a),s=Xq(s),n.isWebGL2&&n.isRawShaderMaterial!==!0&&(w=`#version 300 es
`,v=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+v,b=["#define varying in",n.glslVersion===RD?"":"out highp vec4 pc_fragColor;",n.glslVersion===RD?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+b);const T=w+v+a,C=w+b+s,P=Wq(i,35633,T),M=Wq(i,35632,C);if(i.attachShader(g,P),i.attachShader(g,M),n.index0AttributeName!==void 0?i.bindAttribLocation(g,0,n.index0AttributeName):n.morphTargets===!0&&i.bindAttribLocation(g,0,"position"),i.linkProgram(g),t.debug.checkShaderErrors){const U=i.getProgramInfoLog(g).trim(),z=i.getShaderInfoLog(P).trim(),O=i.getShaderInfoLog(M).trim();let B=!0,$=!0;if(i.getProgramParameter(g,35714)===!1){B=!1;const F=Gq(i,P,"vertex"),J=Gq(i,M,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(g,35715)+`

Program Info Log: `+U+`
`+F+`
`+J)}else U!==""?console.warn("THREE.WebGLProgram: Program Info Log:",U):(z===""||O==="")&&($=!1);$&&(this.diagnostics={runnable:B,programLog:U,vertexShader:{log:z,prefix:v},fragmentShader:{log:O,prefix:b}})}i.deleteShader(P),i.deleteShader(M);let k;this.getUniforms=function(){return k===void 0&&(k=new $f(i,g)),k};let I;return this.getAttributes=function(){return I===void 0&&(I=l9e(i,g)),I},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(g),this.program=void 0},this.name=n.shaderName,this.id=n9e++,this.cacheKey=e,this.usedTimes=1,this.program=g,this.vertexShader=P,this.fragmentShader=M,this}function x9e(t,e,n,r,i,o,a){const s=[],l=i.isWebGL2,c=i.logarithmicDepthBuffer,u=i.floatVertexTextures,f=i.maxVertexUniforms,h=i.vertexTextures;let p=i.precision;const y={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},g=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoat","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","specularIntensityMap","specularTintMap","specularTintMapEncoding","roughnessMap","metalnessMap","gradientMap","alphaMap","alphaTest","combine","vertexColors","vertexAlphas","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","morphTargetsCount","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","format","sheen","transmission","transmissionMap","thicknessMap"];function v(k){const U=k.skeleton.bones;if(u)return 1024;{const O=Math.floor((f-20)/4),B=Math.min(O,U.length);return B<U.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+U.length+" bones. This GPU supports "+B+"."),0):B}}function b(k){let I;return k&&k.isTexture?I=k.encoding:k&&k.isWebGLRenderTarget?(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),I=k.texture.encoding):I=Vo,l&&k&&k.isTexture&&k.format===ro&&k.type===Zc&&k.encoding===ph&&(I=Vo),I}function w(k,I,U,z,O){const B=z.fog,$=k.isMeshStandardMaterial?z.environment:null,F=(k.isMeshStandardMaterial?n:e).get(k.envMap||$),J=y[k.type],K=O.isSkinnedMesh?v(O):0;k.precision!==null&&(p=i.getMaxPrecision(k.precision),p!==k.precision&&console.warn("THREE.WebGLProgram.getParameters:",k.precision,"not supported, using",p,"instead."));let Z,H;if(J){const W=Jl[J];Z=W.vertexShader,H=W.fragmentShader}else Z=k.vertexShader,H=k.fragmentShader;const Y=t.getRenderTarget(),L=k.alphaTest>0,N=k.clearcoat>0;return{isWebGL2:l,shaderID:J,shaderName:k.type,vertexShader:Z,fragmentShader:H,defines:k.defines,isRawShaderMaterial:k.isRawShaderMaterial===!0,glslVersion:k.glslVersion,precision:p,instancing:O.isInstancedMesh===!0,instancingColor:O.isInstancedMesh===!0&&O.instanceColor!==null,supportsVertexTextures:h,outputEncoding:Y!==null?b(Y.texture):t.outputEncoding,map:!!k.map,mapEncoding:b(k.map),matcap:!!k.matcap,matcapEncoding:b(k.matcap),envMap:!!F,envMapMode:F&&F.mapping,envMapEncoding:b(F),envMapCubeUV:!!F&&(F.mapping===D0||F.mapping===iS),lightMap:!!k.lightMap,lightMapEncoding:b(k.lightMap),aoMap:!!k.aoMap,emissiveMap:!!k.emissiveMap,emissiveMapEncoding:b(k.emissiveMap),bumpMap:!!k.bumpMap,normalMap:!!k.normalMap,objectSpaceNormalMap:k.normalMapType===Jse,tangentSpaceNormalMap:k.normalMapType===Rm,clearcoat:N,clearcoatMap:N&&!!k.clearcoatMap,clearcoatRoughnessMap:N&&!!k.clearcoatRoughnessMap,clearcoatNormalMap:N&&!!k.clearcoatNormalMap,displacementMap:!!k.displacementMap,roughnessMap:!!k.roughnessMap,metalnessMap:!!k.metalnessMap,specularMap:!!k.specularMap,specularIntensityMap:!!k.specularIntensityMap,specularTintMap:!!k.specularTintMap,specularTintMapEncoding:b(k.specularTintMap),alphaMap:!!k.alphaMap,alphaTest:L,gradientMap:!!k.gradientMap,sheen:k.sheen>0,transmission:k.transmission>0,transmissionMap:!!k.transmissionMap,thicknessMap:!!k.thicknessMap,combine:k.combine,vertexTangents:!!k.normalMap&&!!O.geometry&&!!O.geometry.attributes.tangent,vertexColors:k.vertexColors,vertexAlphas:k.vertexColors===!0&&!!O.geometry&&!!O.geometry.attributes.color&&O.geometry.attributes.color.itemSize===4,vertexUvs:!!k.map||!!k.bumpMap||!!k.normalMap||!!k.specularMap||!!k.alphaMap||!!k.emissiveMap||!!k.roughnessMap||!!k.metalnessMap||!!k.clearcoatMap||!!k.clearcoatRoughnessMap||!!k.clearcoatNormalMap||!!k.displacementMap||!!k.transmissionMap||!!k.thicknessMap||!!k.specularIntensityMap||!!k.specularTintMap,uvsVertexOnly:!(k.map||k.bumpMap||k.normalMap||k.specularMap||k.alphaMap||k.emissiveMap||k.roughnessMap||k.metalnessMap||k.clearcoatNormalMap||k.transmission>0||k.transmissionMap||k.thicknessMap||k.specularIntensityMap||k.specularTintMap)&&!!k.displacementMap,fog:!!B,useFog:k.fog,fogExp2:B&&B.isFogExp2,flatShading:!!k.flatShading,sizeAttenuation:k.sizeAttenuation,logarithmicDepthBuffer:c,skinning:O.isSkinnedMesh===!0&&K>0,maxBones:K,useVertexTexture:u,morphTargets:!!O.geometry&&!!O.geometry.morphAttributes.position,morphNormals:!!O.geometry&&!!O.geometry.morphAttributes.normal,morphTargetsCount:O.geometry&&O.geometry.morphAttributes.position?O.geometry.morphAttributes.position.length:0,numDirLights:I.directional.length,numPointLights:I.point.length,numSpotLights:I.spot.length,numRectAreaLights:I.rectArea.length,numHemiLights:I.hemi.length,numDirLightShadows:I.directionalShadowMap.length,numPointLightShadows:I.pointShadowMap.length,numSpotLightShadows:I.spotShadowMap.length,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,format:k.format,dithering:k.dithering,shadowMapEnabled:t.shadowMap.enabled&&U.length>0,shadowMapType:t.shadowMap.type,toneMapping:k.toneMapped?t.toneMapping:sd,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:k.premultipliedAlpha,doubleSided:k.side===vd,flipSided:k.side===oi,depthPacking:k.depthPacking!==void 0?k.depthPacking:!1,index0AttributeName:k.index0AttributeName,extensionDerivatives:k.extensions&&k.extensions.derivatives,extensionFragDepth:k.extensions&&k.extensions.fragDepth,extensionDrawBuffers:k.extensions&&k.extensions.drawBuffers,extensionShaderTextureLOD:k.extensions&&k.extensions.shaderTextureLOD,rendererExtensionFragDepth:l||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:l||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:l||r.has("EXT_shader_texture_lod"),customProgramCacheKey:k.customProgramCacheKey()}}function T(k){const I=[];if(k.shaderID?I.push(k.shaderID):(I.push(k.fragmentShader),I.push(k.vertexShader)),k.defines!==void 0)for(const U in k.defines)I.push(U),I.push(k.defines[U]);if(k.isRawShaderMaterial===!1){for(let U=0;U<g.length;U++)I.push(k[g[U]]);I.push(t.outputEncoding),I.push(t.gammaFactor)}return I.push(k.customProgramCacheKey),I.join()}function C(k){const I=y[k.type];let U;if(I){const z=Jl[I];U=F5.clone(z.uniforms)}else U=k.uniforms;return U}function P(k,I){let U;for(let z=0,O=s.length;z<O;z++){const B=s[z];if(B.cacheKey===I){U=B,++U.usedTimes;break}}return U===void 0&&(U=new v9e(t,I,k,o),s.push(U)),U}function M(k){if(--k.usedTimes===0){const I=s.indexOf(k);s[I]=s[s.length-1],s.pop(),k.destroy()}}return{getParameters:w,getProgramCacheKey:T,getUniforms:C,acquireProgram:P,releaseProgram:M,programs:s}}function w9e(){let t=new WeakMap;function e(o){let a=t.get(o);return a===void 0&&(a={},t.set(o,a)),a}function n(o){t.delete(o)}function r(o,a,s){t.get(o)[a]=s}function i(){t=new WeakMap}return{get:e,remove:n,update:r,dispose:i}}function b9e(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.program!==e.program?t.program.id-e.program.id:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function Jq(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function Zq(t){const e=[];let n=0;const r=[],i=[],o=[],a={id:-1};function s(){n=0,r.length=0,i.length=0,o.length=0}function l(p,y,g,v,b,w){let T=e[n];const C=t.get(g);return T===void 0?(T={id:p.id,object:p,geometry:y,material:g,program:C.program||a,groupOrder:v,renderOrder:p.renderOrder,z:b,group:w},e[n]=T):(T.id=p.id,T.object=p,T.geometry=y,T.material=g,T.program=C.program||a,T.groupOrder=v,T.renderOrder=p.renderOrder,T.z=b,T.group=w),n++,T}function c(p,y,g,v,b,w){const T=l(p,y,g,v,b,w);g.transmission>0?i.push(T):g.transparent===!0?o.push(T):r.push(T)}function u(p,y,g,v,b,w){const T=l(p,y,g,v,b,w);g.transmission>0?i.unshift(T):g.transparent===!0?o.unshift(T):r.unshift(T)}function f(p,y){r.length>1&&r.sort(p||b9e),i.length>1&&i.sort(y||Jq),o.length>1&&o.sort(y||Jq)}function h(){for(let p=n,y=e.length;p<y;p++){const g=e[p];if(g.id===null)break;g.id=null,g.object=null,g.geometry=null,g.material=null,g.program=null,g.group=null}}return{opaque:r,transmissive:i,transparent:o,init:s,push:c,unshift:u,finish:h,sort:f}}function S9e(t){let e=new WeakMap;function n(i,o){let a;return e.has(i)===!1?(a=new Zq(t),e.set(i,[a])):o>=e.get(i).length?(a=new Zq(t),e.get(i).push(a)):a=e.get(i)[o],a}function r(){e=new WeakMap}return{get:n,dispose:r}}function E9e(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new ge,color:new bt};break;case"SpotLight":n={position:new ge,direction:new ge,color:new bt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new ge,color:new bt,distance:0,decay:0};break;case"HemisphereLight":n={direction:new ge,skyColor:new bt,groundColor:new bt};break;case"RectAreaLight":n={color:new bt,position:new ge,halfWidth:new ge,halfHeight:new ge};break}return t[e.id]=n,n}}}function _9e(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new rt};break;case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new rt};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new rt,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=n,n}}}let T9e=0;function C9e(t,e){return(e.castShadow?1:0)-(t.castShadow?1:0)}function A9e(t,e){const n=new E9e,r=_9e(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let u=0;u<9;u++)i.probe.push(new ge);const o=new ge,a=new Ut,s=new Ut;function l(u,f){let h=0,p=0,y=0;for(let U=0;U<9;U++)i.probe[U].set(0,0,0);let g=0,v=0,b=0,w=0,T=0,C=0,P=0,M=0;u.sort(C9e);const k=f!==!0?Math.PI:1;for(let U=0,z=u.length;U<z;U++){const O=u[U],B=O.color,$=O.intensity,F=O.distance,J=O.shadow&&O.shadow.map?O.shadow.map.texture:null;if(O.isAmbientLight)h+=B.r*$*k,p+=B.g*$*k,y+=B.b*$*k;else if(O.isLightProbe)for(let K=0;K<9;K++)i.probe[K].addScaledVector(O.sh.coefficients[K],$);else if(O.isDirectionalLight){const K=n.get(O);if(K.color.copy(O.color).multiplyScalar(O.intensity*k),O.castShadow){const Z=O.shadow,H=r.get(O);H.shadowBias=Z.bias,H.shadowNormalBias=Z.normalBias,H.shadowRadius=Z.radius,H.shadowMapSize=Z.mapSize,i.directionalShadow[g]=H,i.directionalShadowMap[g]=J,i.directionalShadowMatrix[g]=O.shadow.matrix,C++}i.directional[g]=K,g++}else if(O.isSpotLight){const K=n.get(O);if(K.position.setFromMatrixPosition(O.matrixWorld),K.color.copy(B).multiplyScalar($*k),K.distance=F,K.coneCos=Math.cos(O.angle),K.penumbraCos=Math.cos(O.angle*(1-O.penumbra)),K.decay=O.decay,O.castShadow){const Z=O.shadow,H=r.get(O);H.shadowBias=Z.bias,H.shadowNormalBias=Z.normalBias,H.shadowRadius=Z.radius,H.shadowMapSize=Z.mapSize,i.spotShadow[b]=H,i.spotShadowMap[b]=J,i.spotShadowMatrix[b]=O.shadow.matrix,M++}i.spot[b]=K,b++}else if(O.isRectAreaLight){const K=n.get(O);K.color.copy(B).multiplyScalar($),K.halfWidth.set(O.width*.5,0,0),K.halfHeight.set(0,O.height*.5,0),i.rectArea[w]=K,w++}else if(O.isPointLight){const K=n.get(O);if(K.color.copy(O.color).multiplyScalar(O.intensity*k),K.distance=O.distance,K.decay=O.decay,O.castShadow){const Z=O.shadow,H=r.get(O);H.shadowBias=Z.bias,H.shadowNormalBias=Z.normalBias,H.shadowRadius=Z.radius,H.shadowMapSize=Z.mapSize,H.shadowCameraNear=Z.camera.near,H.shadowCameraFar=Z.camera.far,i.pointShadow[v]=H,i.pointShadowMap[v]=J,i.pointShadowMatrix[v]=O.shadow.matrix,P++}i.point[v]=K,v++}else if(O.isHemisphereLight){const K=n.get(O);K.skyColor.copy(O.color).multiplyScalar($*k),K.groundColor.copy(O.groundColor).multiplyScalar($*k),i.hemi[T]=K,T++}}w>0&&(e.isWebGL2||t.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Ct.LTC_FLOAT_1,i.rectAreaLTC2=Ct.LTC_FLOAT_2):t.has("OES_texture_half_float_linear")===!0?(i.rectAreaLTC1=Ct.LTC_HALF_1,i.rectAreaLTC2=Ct.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=h,i.ambient[1]=p,i.ambient[2]=y;const I=i.hash;(I.directionalLength!==g||I.pointLength!==v||I.spotLength!==b||I.rectAreaLength!==w||I.hemiLength!==T||I.numDirectionalShadows!==C||I.numPointShadows!==P||I.numSpotShadows!==M)&&(i.directional.length=g,i.spot.length=b,i.rectArea.length=w,i.point.length=v,i.hemi.length=T,i.directionalShadow.length=C,i.directionalShadowMap.length=C,i.pointShadow.length=P,i.pointShadowMap.length=P,i.spotShadow.length=M,i.spotShadowMap.length=M,i.directionalShadowMatrix.length=C,i.pointShadowMatrix.length=P,i.spotShadowMatrix.length=M,I.directionalLength=g,I.pointLength=v,I.spotLength=b,I.rectAreaLength=w,I.hemiLength=T,I.numDirectionalShadows=C,I.numPointShadows=P,I.numSpotShadows=M,i.version=T9e++)}function c(u,f){let h=0,p=0,y=0,g=0,v=0;const b=f.matrixWorldInverse;for(let w=0,T=u.length;w<T;w++){const C=u[w];if(C.isDirectionalLight){const P=i.directional[h];P.direction.setFromMatrixPosition(C.matrixWorld),o.setFromMatrixPosition(C.target.matrixWorld),P.direction.sub(o),P.direction.transformDirection(b),h++}else if(C.isSpotLight){const P=i.spot[y];P.position.setFromMatrixPosition(C.matrixWorld),P.position.applyMatrix4(b),P.direction.setFromMatrixPosition(C.matrixWorld),o.setFromMatrixPosition(C.target.matrixWorld),P.direction.sub(o),P.direction.transformDirection(b),y++}else if(C.isRectAreaLight){const P=i.rectArea[g];P.position.setFromMatrixPosition(C.matrixWorld),P.position.applyMatrix4(b),s.identity(),a.copy(C.matrixWorld),a.premultiply(b),s.extractRotation(a),P.halfWidth.set(C.width*.5,0,0),P.halfHeight.set(0,C.height*.5,0),P.halfWidth.applyMatrix4(s),P.halfHeight.applyMatrix4(s),g++}else if(C.isPointLight){const P=i.point[p];P.position.setFromMatrixPosition(C.matrixWorld),P.position.applyMatrix4(b),p++}else if(C.isHemisphereLight){const P=i.hemi[v];P.direction.setFromMatrixPosition(C.matrixWorld),P.direction.transformDirection(b),P.direction.normalize(),v++}}}return{setup:l,setupView:c,state:i}}function Qq(t,e){const n=new A9e(t,e),r=[],i=[];function o(){r.length=0,i.length=0}function a(f){r.push(f)}function s(f){i.push(f)}function l(f){n.setup(r,f)}function c(f){n.setupView(r,f)}return{init:o,state:{lightsArray:r,shadowsArray:i,lights:n},setupLights:l,setupLightsView:c,pushLight:a,pushShadow:s}}function M9e(t,e){let n=new WeakMap;function r(o,a=0){let s;return n.has(o)===!1?(s=new Qq(t,e),n.set(o,[s])):a>=n.get(o).length?(s=new Qq(t,e),n.get(o).push(s)):s=n.get(o)[a],s}function i(){n=new WeakMap}return{get:r,dispose:i}}class aS extends So{constructor(e){super(),this.type="MeshDepthMaterial",this.depthPacking=Kse,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}aS.prototype.isMeshDepthMaterial=!0;class sS extends So{constructor(e){super(),this.type="MeshDistanceMaterial",this.referencePosition=new ge,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}sS.prototype.isMeshDistanceMaterial=!0;const P9e=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,k9e=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
uniform float samples;
#include <packing>
void main() {
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function Sle(t,e,n){let r=new oS;const i=new rt,o=new rt,a=new Kn,s=new aS({depthPacking:O5}),l=new sS,c={},u=n.maxTextureSize,f={0:oi,1:Jf,2:vd},h=new wd({uniforms:{shadow_pass:{value:null},resolution:{value:new rt},radius:{value:4},samples:{value:8}},vertexShader:P9e,fragmentShader:k9e}),p=h.clone();p.defines.HORIZONTAL_PASS=1;const y=new Yt;y.setAttribute("position",new Bn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const g=new Kr(y,h),v=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=r2,this.render=function(C,P,M){if(v.enabled===!1||v.autoUpdate===!1&&v.needsUpdate===!1||C.length===0)return;const k=t.getRenderTarget(),I=t.getActiveCubeFace(),U=t.getActiveMipmapLevel(),z=t.state;z.setBlending(ad),z.buffers.color.setClear(1,1,1,1),z.buffers.depth.setTest(!0),z.setScissorTest(!1);for(let O=0,B=C.length;O<B;O++){const $=C[O],F=$.shadow;if(F===void 0){console.warn("THREE.WebGLShadowMap:",$,"has no shadow.");continue}if(F.autoUpdate===!1&&F.needsUpdate===!1)continue;i.copy(F.mapSize);const J=F.getFrameExtents();if(i.multiply(J),o.copy(F.mapSize),(i.x>u||i.y>u)&&(i.x>u&&(o.x=Math.floor(u/J.x),i.x=o.x*J.x,F.mapSize.x=o.x),i.y>u&&(o.y=Math.floor(u/J.y),i.y=o.y*J.y,F.mapSize.y=o.y)),F.map===null&&!F.isPointLightShadow&&this.type===Ip){const Z={minFilter:Xr,magFilter:Xr,format:ro};F.map=new ic(i.x,i.y,Z),F.map.texture.name=$.name+".shadowMap",F.mapPass=new ic(i.x,i.y,Z),F.camera.updateProjectionMatrix()}if(F.map===null){const Z={minFilter:Fi,magFilter:Fi,format:ro};F.map=new ic(i.x,i.y,Z),F.map.texture.name=$.name+".shadowMap",F.camera.updateProjectionMatrix()}t.setRenderTarget(F.map),t.clear();const K=F.getViewportCount();for(let Z=0;Z<K;Z++){const H=F.getViewport(Z);a.set(o.x*H.x,o.y*H.y,o.x*H.z,o.y*H.w),z.viewport(a),F.updateMatrices($,Z),r=F.getFrustum(),T(P,M,F.camera,$,this.type)}!F.isPointLightShadow&&this.type===Ip&&b(F,M),F.needsUpdate=!1}v.needsUpdate=!1,t.setRenderTarget(k,I,U)};function b(C,P){const M=e.update(g);h.uniforms.shadow_pass.value=C.map.texture,h.uniforms.resolution.value=C.mapSize,h.uniforms.radius.value=C.radius,h.uniforms.samples.value=C.blurSamples,t.setRenderTarget(C.mapPass),t.clear(),t.renderBufferDirect(P,null,M,h,g,null),p.uniforms.shadow_pass.value=C.mapPass.texture,p.uniforms.resolution.value=C.mapSize,p.uniforms.radius.value=C.radius,p.uniforms.samples.value=C.blurSamples,t.setRenderTarget(C.map),t.clear(),t.renderBufferDirect(P,null,M,p,g,null)}function w(C,P,M,k,I,U,z){let O=null;const B=k.isPointLight===!0?C.customDistanceMaterial:C.customDepthMaterial;if(B!==void 0?O=B:O=k.isPointLight===!0?l:s,t.localClippingEnabled&&M.clipShadows===!0&&M.clippingPlanes.length!==0||M.displacementMap&&M.displacementScale!==0||M.alphaMap&&M.alphaTest>0){const $=O.uuid,F=M.uuid;let J=c[$];J===void 0&&(J={},c[$]=J);let K=J[F];K===void 0&&(K=O.clone(),J[F]=K),O=K}return O.visible=M.visible,O.wireframe=M.wireframe,z===Ip?O.side=M.shadowSide!==null?M.shadowSide:M.side:O.side=M.shadowSide!==null?M.shadowSide:f[M.side],O.alphaMap=M.alphaMap,O.alphaTest=M.alphaTest,O.clipShadows=M.clipShadows,O.clippingPlanes=M.clippingPlanes,O.clipIntersection=M.clipIntersection,O.displacementMap=M.displacementMap,O.displacementScale=M.displacementScale,O.displacementBias=M.displacementBias,O.wireframeLinewidth=M.wireframeLinewidth,O.linewidth=M.linewidth,k.isPointLight===!0&&O.isMeshDistanceMaterial===!0&&(O.referencePosition.setFromMatrixPosition(k.matrixWorld),O.nearDistance=I,O.farDistance=U),O}function T(C,P,M,k,I){if(C.visible===!1)return;if(C.layers.test(P.layers)&&(C.isMesh||C.isLine||C.isPoints)&&(C.castShadow||C.receiveShadow&&I===Ip)&&(!C.frustumCulled||r.intersectsObject(C))){C.modelViewMatrix.multiplyMatrices(M.matrixWorldInverse,C.matrixWorld);const O=e.update(C),B=C.material;if(Array.isArray(B)){const $=O.groups;for(let F=0,J=$.length;F<J;F++){const K=$[F],Z=B[K.materialIndex];if(Z&&Z.visible){const H=w(C,O,Z,k,M.near,M.far,I);t.renderBufferDirect(M,null,O,H,C,K)}}}else if(B.visible){const $=w(C,O,B,k,M.near,M.far,I);t.renderBufferDirect(M,null,O,$,C,null)}}const z=C.children;for(let O=0,B=z.length;O<B;O++)T(z[O],P,M,k,I)}}function N9e(t,e,n){const r=n.isWebGL2;function i(){let fe=!1;const ke=new Kn;let Ne=null;const qe=new Kn(0,0,0,0);return{setMask:function(tt){Ne!==tt&&!fe&&(t.colorMask(tt,tt,tt,tt),Ne=tt)},setLocked:function(tt){fe=tt},setClear:function(tt,ot,St,dt,ft){ft===!0&&(tt*=dt,ot*=dt,St*=dt),ke.set(tt,ot,St,dt),qe.equals(ke)===!1&&(t.clearColor(tt,ot,St,dt),qe.copy(ke))},reset:function(){fe=!1,Ne=null,qe.set(-1,0,0,0)}}}function o(){let fe=!1,ke=null,Ne=null,qe=null;return{setTest:function(tt){tt?ne(2929):se(2929)},setMask:function(tt){ke!==tt&&!fe&&(t.depthMask(tt),ke=tt)},setFunc:function(tt){if(Ne!==tt){if(tt)switch(tt){case Uae:t.depthFunc(512);break;case Bae:t.depthFunc(519);break;case $ae:t.depthFunc(513);break;case OC:t.depthFunc(515);break;case Hae:t.depthFunc(514);break;case Vae:t.depthFunc(518);break;case Wae:t.depthFunc(516);break;case Gae:t.depthFunc(517);break;default:t.depthFunc(515)}else t.depthFunc(515);Ne=tt}},setLocked:function(tt){fe=tt},setClear:function(tt){qe!==tt&&(t.clearDepth(tt),qe=tt)},reset:function(){fe=!1,ke=null,Ne=null,qe=null}}}function a(){let fe=!1,ke=null,Ne=null,qe=null,tt=null,ot=null,St=null,dt=null,ft=null;return{setTest:function(Ee){fe||(Ee?ne(2960):se(2960))},setMask:function(Ee){ke!==Ee&&!fe&&(t.stencilMask(Ee),ke=Ee)},setFunc:function(Ee,Ve,Xe){(Ne!==Ee||qe!==Ve||tt!==Xe)&&(t.stencilFunc(Ee,Ve,Xe),Ne=Ee,qe=Ve,tt=Xe)},setOp:function(Ee,Ve,Xe){(ot!==Ee||St!==Ve||dt!==Xe)&&(t.stencilOp(Ee,Ve,Xe),ot=Ee,St=Ve,dt=Xe)},setLocked:function(Ee){fe=Ee},setClear:function(Ee){ft!==Ee&&(t.clearStencil(Ee),ft=Ee)},reset:function(){fe=!1,ke=null,Ne=null,qe=null,tt=null,ot=null,St=null,dt=null,ft=null}}}const s=new i,l=new o,c=new a;let u={},f=null,h={},p=null,y=!1,g=null,v=null,b=null,w=null,T=null,C=null,P=null,M=!1,k=null,I=null,U=null,z=null,O=null;const B=t.getParameter(35661);let $=!1,F=0;const J=t.getParameter(7938);J.indexOf("WebGL")!==-1?(F=parseFloat(/^WebGL (\d)/.exec(J)[1]),$=F>=1):J.indexOf("OpenGL ES")!==-1&&(F=parseFloat(/^OpenGL ES (\d)/.exec(J)[1]),$=F>=2);let K=null,Z={};const H=t.getParameter(3088),Y=t.getParameter(2978),L=new Kn().fromArray(H),N=new Kn().fromArray(Y);function V(fe,ke,Ne){const qe=new Uint8Array(4),tt=t.createTexture();t.bindTexture(fe,tt),t.texParameteri(fe,10241,9728),t.texParameteri(fe,10240,9728);for(let ot=0;ot<Ne;ot++)t.texImage2D(ke+ot,0,6408,1,1,0,6408,5121,qe);return tt}const W={};W[3553]=V(3553,3553,1),W[34067]=V(34067,34069,6),s.setClear(0,0,0,1),l.setClear(1),c.setClear(0),ne(2929),l.setFunc(OC),xe(!1),be(gD),ne(2884),he(ad);function ne(fe){u[fe]!==!0&&(t.enable(fe),u[fe]=!0)}function se(fe){u[fe]!==!1&&(t.disable(fe),u[fe]=!1)}function te(fe){fe!==f&&(t.bindFramebuffer(36160,fe),f=fe)}function ie(fe,ke){return ke===null&&f!==null&&(ke=f),h[fe]!==ke?(t.bindFramebuffer(fe,ke),h[fe]=ke,r&&(fe===36009&&(h[36160]=ke),fe===36160&&(h[36009]=ke)),!0):!1}function pe(fe){return p!==fe?(t.useProgram(fe),p=fe,!0):!1}const de={[xp]:32774,[Pae]:32778,[kae]:32779};if(r)de[wD]=32775,de[bD]=32776;else{const fe=e.get("EXT_blend_minmax");fe!==null&&(de[wD]=fe.MIN_EXT,de[bD]=fe.MAX_EXT)}const ce={[Nae]:0,[Rae]:1,[jae]:768,[A5]:770,[zae]:776,[Dae]:774,[Oae]:772,[Iae]:769,[M5]:771,[Fae]:775,[Lae]:773};function he(fe,ke,Ne,qe,tt,ot,St,dt){if(fe===ad){y===!0&&(se(3042),y=!1);return}if(y===!1&&(ne(3042),y=!0),fe!==Mae){if(fe!==g||dt!==M){if((v!==xp||T!==xp)&&(t.blendEquation(32774),v=xp,T=xp),dt)switch(fe){case nv:t.blendFuncSeparate(1,771,1,771);break;case yD:t.blendFunc(1,1);break;case vD:t.blendFuncSeparate(0,0,769,771);break;case xD:t.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",fe);break}else switch(fe){case nv:t.blendFuncSeparate(770,771,1,771);break;case yD:t.blendFunc(770,1);break;case vD:t.blendFunc(0,769);break;case xD:t.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",fe);break}b=null,w=null,C=null,P=null,g=fe,M=dt}return}tt=tt||ke,ot=ot||Ne,St=St||qe,(ke!==v||tt!==T)&&(t.blendEquationSeparate(de[ke],de[tt]),v=ke,T=tt),(Ne!==b||qe!==w||ot!==C||St!==P)&&(t.blendFuncSeparate(ce[Ne],ce[qe],ce[ot],ce[St]),b=Ne,w=qe,C=ot,P=St),g=fe,M=null}function ee(fe,ke){fe.side===vd?se(2884):ne(2884);let Ne=fe.side===oi;ke&&(Ne=!Ne),xe(Ne),fe.blending===nv&&fe.transparent===!1?he(ad):he(fe.blending,fe.blendEquation,fe.blendSrc,fe.blendDst,fe.blendEquationAlpha,fe.blendSrcAlpha,fe.blendDstAlpha,fe.premultipliedAlpha),l.setFunc(fe.depthFunc),l.setTest(fe.depthTest),l.setMask(fe.depthWrite),s.setMask(fe.colorWrite);const qe=fe.stencilWrite;c.setTest(qe),qe&&(c.setMask(fe.stencilWriteMask),c.setFunc(fe.stencilFunc,fe.stencilRef,fe.stencilFuncMask),c.setOp(fe.stencilFail,fe.stencilZFail,fe.stencilZPass)),Ce(fe.polygonOffset,fe.polygonOffsetFactor,fe.polygonOffsetUnits),fe.alphaToCoverage===!0?ne(32926):se(32926)}function xe(fe){k!==fe&&(fe?t.frontFace(2304):t.frontFace(2305),k=fe)}function be(fe){fe!==Tae?(ne(2884),fe!==I&&(fe===gD?t.cullFace(1029):fe===Cae?t.cullFace(1028):t.cullFace(1032))):se(2884),I=fe}function Ae(fe){fe!==U&&($&&t.lineWidth(fe),U=fe)}function Ce(fe,ke,Ne){fe?(ne(32823),(z!==ke||O!==Ne)&&(t.polygonOffset(ke,Ne),z=ke,O=Ne)):se(32823)}function oe(fe){fe?ne(3089):se(3089)}function ae(fe){fe===void 0&&(fe=33984+B-1),K!==fe&&(t.activeTexture(fe),K=fe)}function Se(fe,ke){K===null&&ae();let Ne=Z[K];Ne===void 0&&(Ne={type:void 0,texture:void 0},Z[K]=Ne),(Ne.type!==fe||Ne.texture!==ke)&&(t.bindTexture(fe,ke||W[fe]),Ne.type=fe,Ne.texture=ke)}function me(){const fe=Z[K];fe!==void 0&&fe.type!==void 0&&(t.bindTexture(fe.type,null),fe.type=void 0,fe.texture=void 0)}function ye(){try{t.compressedTexImage2D.apply(t,arguments)}catch(fe){console.error("THREE.WebGLState:",fe)}}function Ie(){try{t.texImage2D.apply(t,arguments)}catch(fe){console.error("THREE.WebGLState:",fe)}}function De(){try{t.texImage3D.apply(t,arguments)}catch(fe){console.error("THREE.WebGLState:",fe)}}function Ue(fe){L.equals(fe)===!1&&(t.scissor(fe.x,fe.y,fe.z,fe.w),L.copy(fe))}function $e(fe){N.equals(fe)===!1&&(t.viewport(fe.x,fe.y,fe.z,fe.w),N.copy(fe))}function we(){t.disable(3042),t.disable(2884),t.disable(2929),t.disable(32823),t.disable(3089),t.disable(2960),t.disable(32926),t.blendEquation(32774),t.blendFunc(1,0),t.blendFuncSeparate(1,0,1,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(513),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(519,0,4294967295),t.stencilOp(7680,7680,7680),t.clearStencil(0),t.cullFace(1029),t.frontFace(2305),t.polygonOffset(0,0),t.activeTexture(33984),t.bindFramebuffer(36160,null),r===!0&&(t.bindFramebuffer(36009,null),t.bindFramebuffer(36008,null)),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),u={},K=null,Z={},f=null,h={},p=null,y=!1,g=null,v=null,b=null,w=null,T=null,C=null,P=null,M=!1,k=null,I=null,U=null,z=null,O=null,L.set(0,0,t.canvas.width,t.canvas.height),N.set(0,0,t.canvas.width,t.canvas.height),s.reset(),l.reset(),c.reset()}return{buffers:{color:s,depth:l,stencil:c},enable:ne,disable:se,bindFramebuffer:ie,bindXRFramebuffer:te,useProgram:pe,setBlending:he,setMaterial:ee,setFlipSided:xe,setCullFace:be,setLineWidth:Ae,setPolygonOffset:Ce,setScissorTest:oe,activeTexture:ae,bindTexture:Se,unbindTexture:me,compressedTexImage2D:ye,texImage2D:Ie,texImage3D:De,scissor:Ue,viewport:$e,reset:we}}function R9e(t,e,n,r,i,o,a){const s=i.isWebGL2,l=i.maxTextures,c=i.maxCubemapSize,u=i.maxTextureSize,f=i.maxSamples,h=new WeakMap;let p,y=!1;try{y=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function g(oe,ae){return y?new OffscreenCanvas(oe,ae):l2("canvas")}function v(oe,ae,Se,me){let ye=1;if((oe.width>me||oe.height>me)&&(ye=me/Math.max(oe.width,oe.height)),ye<1||ae===!0)if(typeof HTMLImageElement<"u"&&oe instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&oe instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&oe instanceof ImageBitmap){const Ie=ae?ele:Math.floor,De=Ie(ye*oe.width),Ue=Ie(ye*oe.height);p===void 0&&(p=g(De,Ue));const $e=Se?g(De,Ue):p;return $e.width=De,$e.height=Ue,$e.getContext("2d").drawImage(oe,0,0,De,Ue),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+oe.width+"x"+oe.height+") to ("+De+"x"+Ue+")."),$e}else return"data"in oe&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+oe.width+"x"+oe.height+")."),oe;return oe}function b(oe){return jD(oe.width)&&jD(oe.height)}function w(oe){return s?!1:oe.wrapS!==$o||oe.wrapT!==$o||oe.minFilter!==Fi&&oe.minFilter!==Xr}function T(oe,ae){return oe.generateMipmaps&&ae&&oe.minFilter!==Fi&&oe.minFilter!==Xr}function C(oe,ae,Se,me,ye=1){t.generateMipmap(oe);const Ie=r.get(ae);Ie.__maxMipLevel=Math.log2(Math.max(Se,me,ye))}function P(oe,ae,Se,me){if(s===!1)return ae;if(oe!==null){if(t[oe]!==void 0)return t[oe];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+oe+"'")}let ye=ae;return ae===6403&&(Se===5126&&(ye=33326),Se===5131&&(ye=33325),Se===5121&&(ye=33321)),ae===6407&&(Se===5126&&(ye=34837),Se===5131&&(ye=34843),Se===5121&&(ye=32849)),ae===6408&&(Se===5126&&(ye=34836),Se===5131&&(ye=34842),Se===5121&&(ye=me===ph?35907:32856)),(ye===33325||ye===33326||ye===34842||ye===34836)&&e.get("EXT_color_buffer_float"),ye}function M(oe){return oe===Fi||oe===LC||oe===DC?9728:9729}function k(oe){const ae=oe.target;ae.removeEventListener("dispose",k),U(ae),ae.isVideoTexture&&h.delete(ae),a.memory.textures--}function I(oe){const ae=oe.target;ae.removeEventListener("dispose",I),z(ae)}function U(oe){const ae=r.get(oe);ae.__webglInit!==void 0&&(t.deleteTexture(ae.__webglTexture),r.remove(oe))}function z(oe){const ae=oe.texture,Se=r.get(oe),me=r.get(ae);if(oe){if(me.__webglTexture!==void 0&&(t.deleteTexture(me.__webglTexture),a.memory.textures--),oe.depthTexture&&oe.depthTexture.dispose(),oe.isWebGLCubeRenderTarget)for(let ye=0;ye<6;ye++)t.deleteFramebuffer(Se.__webglFramebuffer[ye]),Se.__webglDepthbuffer&&t.deleteRenderbuffer(Se.__webglDepthbuffer[ye]);else t.deleteFramebuffer(Se.__webglFramebuffer),Se.__webglDepthbuffer&&t.deleteRenderbuffer(Se.__webglDepthbuffer),Se.__webglMultisampledFramebuffer&&t.deleteFramebuffer(Se.__webglMultisampledFramebuffer),Se.__webglColorRenderbuffer&&t.deleteRenderbuffer(Se.__webglColorRenderbuffer),Se.__webglDepthRenderbuffer&&t.deleteRenderbuffer(Se.__webglDepthRenderbuffer);if(oe.isWebGLMultipleRenderTargets)for(let ye=0,Ie=ae.length;ye<Ie;ye++){const De=r.get(ae[ye]);De.__webglTexture&&(t.deleteTexture(De.__webglTexture),a.memory.textures--),r.remove(ae[ye])}r.remove(ae),r.remove(oe)}}let O=0;function B(){O=0}function $(){const oe=O;return oe>=l&&console.warn("THREE.WebGLTextures: Trying to use "+oe+" texture units while this GPU supports only "+l),O+=1,oe}function F(oe,ae){const Se=r.get(oe);if(oe.isVideoTexture&&ee(oe),oe.version>0&&Se.__version!==oe.version){const me=oe.image;if(me===void 0)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else if(me.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{V(Se,oe,ae);return}}n.activeTexture(33984+ae),n.bindTexture(3553,Se.__webglTexture)}function J(oe,ae){const Se=r.get(oe);if(oe.version>0&&Se.__version!==oe.version){V(Se,oe,ae);return}n.activeTexture(33984+ae),n.bindTexture(35866,Se.__webglTexture)}function K(oe,ae){const Se=r.get(oe);if(oe.version>0&&Se.__version!==oe.version){V(Se,oe,ae);return}n.activeTexture(33984+ae),n.bindTexture(32879,Se.__webglTexture)}function Z(oe,ae){const Se=r.get(oe);if(oe.version>0&&Se.__version!==oe.version){W(Se,oe,ae);return}n.activeTexture(33984+ae),n.bindTexture(34067,Se.__webglTexture)}const H={[r1]:10497,[$o]:33071,[i1]:33648},Y={[Fi]:9728,[LC]:9984,[DC]:9986,[Xr]:9729,[k5]:9985,[Nm]:9987};function L(oe,ae,Se){if(Se?(t.texParameteri(oe,10242,H[ae.wrapS]),t.texParameteri(oe,10243,H[ae.wrapT]),(oe===32879||oe===35866)&&t.texParameteri(oe,32882,H[ae.wrapR]),t.texParameteri(oe,10240,Y[ae.magFilter]),t.texParameteri(oe,10241,Y[ae.minFilter])):(t.texParameteri(oe,10242,33071),t.texParameteri(oe,10243,33071),(oe===32879||oe===35866)&&t.texParameteri(oe,32882,33071),(ae.wrapS!==$o||ae.wrapT!==$o)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(oe,10240,M(ae.magFilter)),t.texParameteri(oe,10241,M(ae.minFilter)),ae.minFilter!==Fi&&ae.minFilter!==Xr&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){const me=e.get("EXT_texture_filter_anisotropic");if(ae.type===zc&&e.has("OES_texture_float_linear")===!1||s===!1&&ae.type===Gp&&e.has("OES_texture_half_float_linear")===!1)return;(ae.anisotropy>1||r.get(ae).__currentAnisotropy)&&(t.texParameterf(oe,me.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(ae.anisotropy,i.getMaxAnisotropy())),r.get(ae).__currentAnisotropy=ae.anisotropy)}}function N(oe,ae){oe.__webglInit===void 0&&(oe.__webglInit=!0,ae.addEventListener("dispose",k),oe.__webglTexture=t.createTexture(),a.memory.textures++)}function V(oe,ae,Se){let me=3553;ae.isDataTexture2DArray&&(me=35866),ae.isDataTexture3D&&(me=32879),N(oe,ae),n.activeTexture(33984+Se),n.bindTexture(me,oe.__webglTexture),t.pixelStorei(37440,ae.flipY),t.pixelStorei(37441,ae.premultiplyAlpha),t.pixelStorei(3317,ae.unpackAlignment),t.pixelStorei(37443,0);const ye=w(ae)&&b(ae.image)===!1,Ie=v(ae.image,ye,!1,u),De=b(Ie)||s,Ue=o.convert(ae.format);let $e=o.convert(ae.type),we=P(ae.internalFormat,Ue,$e,ae.encoding);L(me,ae,De);let fe;const ke=ae.mipmaps;if(ae.isDepthTexture)we=6402,s?ae.type===zc?we=36012:ae.type===Gw?we=33190:ae.type===rv?we=35056:we=33189:ae.type===zc&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),ae.format===Yp&&we===6402&&ae.type!==o1&&ae.type!==Gw&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),ae.type=o1,$e=o.convert(ae.type)),ae.format===$v&&we===6402&&(we=34041,ae.type!==rv&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),ae.type=rv,$e=o.convert(ae.type))),n.texImage2D(3553,0,we,Ie.width,Ie.height,0,Ue,$e,null);else if(ae.isDataTexture)if(ke.length>0&&De){for(let Ne=0,qe=ke.length;Ne<qe;Ne++)fe=ke[Ne],n.texImage2D(3553,Ne,we,fe.width,fe.height,0,Ue,$e,fe.data);ae.generateMipmaps=!1,oe.__maxMipLevel=ke.length-1}else n.texImage2D(3553,0,we,Ie.width,Ie.height,0,Ue,$e,Ie.data),oe.__maxMipLevel=0;else if(ae.isCompressedTexture){for(let Ne=0,qe=ke.length;Ne<qe;Ne++)fe=ke[Ne],ae.format!==ro&&ae.format!==qp?Ue!==null?n.compressedTexImage2D(3553,Ne,we,fe.width,fe.height,0,fe.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(3553,Ne,we,fe.width,fe.height,0,Ue,$e,fe.data);oe.__maxMipLevel=ke.length-1}else if(ae.isDataTexture2DArray)n.texImage3D(35866,0,we,Ie.width,Ie.height,Ie.depth,0,Ue,$e,Ie.data),oe.__maxMipLevel=0;else if(ae.isDataTexture3D)n.texImage3D(32879,0,we,Ie.width,Ie.height,Ie.depth,0,Ue,$e,Ie.data),oe.__maxMipLevel=0;else if(ke.length>0&&De){for(let Ne=0,qe=ke.length;Ne<qe;Ne++)fe=ke[Ne],n.texImage2D(3553,Ne,we,Ue,$e,fe);ae.generateMipmaps=!1,oe.__maxMipLevel=ke.length-1}else n.texImage2D(3553,0,we,Ue,$e,Ie),oe.__maxMipLevel=0;T(ae,De)&&C(me,ae,Ie.width,Ie.height),oe.__version=ae.version,ae.onUpdate&&ae.onUpdate(ae)}function W(oe,ae,Se){if(ae.image.length!==6)return;N(oe,ae),n.activeTexture(33984+Se),n.bindTexture(34067,oe.__webglTexture),t.pixelStorei(37440,ae.flipY),t.pixelStorei(37441,ae.premultiplyAlpha),t.pixelStorei(3317,ae.unpackAlignment),t.pixelStorei(37443,0);const me=ae&&(ae.isCompressedTexture||ae.image[0].isCompressedTexture),ye=ae.image[0]&&ae.image[0].isDataTexture,Ie=[];for(let Ne=0;Ne<6;Ne++)!me&&!ye?Ie[Ne]=v(ae.image[Ne],!1,!0,c):Ie[Ne]=ye?ae.image[Ne].image:ae.image[Ne];const De=Ie[0],Ue=b(De)||s,$e=o.convert(ae.format),we=o.convert(ae.type),fe=P(ae.internalFormat,$e,we,ae.encoding);L(34067,ae,Ue);let ke;if(me){for(let Ne=0;Ne<6;Ne++){ke=Ie[Ne].mipmaps;for(let qe=0;qe<ke.length;qe++){const tt=ke[qe];ae.format!==ro&&ae.format!==qp?$e!==null?n.compressedTexImage2D(34069+Ne,qe,fe,tt.width,tt.height,0,tt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(34069+Ne,qe,fe,tt.width,tt.height,0,$e,we,tt.data)}}oe.__maxMipLevel=ke.length-1}else{ke=ae.mipmaps;for(let Ne=0;Ne<6;Ne++)if(ye){n.texImage2D(34069+Ne,0,fe,Ie[Ne].width,Ie[Ne].height,0,$e,we,Ie[Ne].data);for(let qe=0;qe<ke.length;qe++){const ot=ke[qe].image[Ne].image;n.texImage2D(34069+Ne,qe+1,fe,ot.width,ot.height,0,$e,we,ot.data)}}else{n.texImage2D(34069+Ne,0,fe,$e,we,Ie[Ne]);for(let qe=0;qe<ke.length;qe++){const tt=ke[qe];n.texImage2D(34069+Ne,qe+1,fe,$e,we,tt.image[Ne])}}oe.__maxMipLevel=ke.length}T(ae,Ue)&&C(34067,ae,De.width,De.height),oe.__version=ae.version,ae.onUpdate&&ae.onUpdate(ae)}function ne(oe,ae,Se,me,ye){const Ie=o.convert(Se.format),De=o.convert(Se.type),Ue=P(Se.internalFormat,Ie,De,Se.encoding);ye===32879||ye===35866?n.texImage3D(ye,0,Ue,ae.width,ae.height,ae.depth,0,Ie,De,null):n.texImage2D(ye,0,Ue,ae.width,ae.height,0,Ie,De,null),n.bindFramebuffer(36160,oe),t.framebufferTexture2D(36160,me,ye,r.get(Se).__webglTexture,0),n.bindFramebuffer(36160,null)}function se(oe,ae,Se){if(t.bindRenderbuffer(36161,oe),ae.depthBuffer&&!ae.stencilBuffer){let me=33189;if(Se){const ye=ae.depthTexture;ye&&ye.isDepthTexture&&(ye.type===zc?me=36012:ye.type===Gw&&(me=33190));const Ie=he(ae);t.renderbufferStorageMultisample(36161,Ie,me,ae.width,ae.height)}else t.renderbufferStorage(36161,me,ae.width,ae.height);t.framebufferRenderbuffer(36160,36096,36161,oe)}else if(ae.depthBuffer&&ae.stencilBuffer){if(Se){const me=he(ae);t.renderbufferStorageMultisample(36161,me,35056,ae.width,ae.height)}else t.renderbufferStorage(36161,34041,ae.width,ae.height);t.framebufferRenderbuffer(36160,33306,36161,oe)}else{const me=ae.isWebGLMultipleRenderTargets===!0?ae.texture[0]:ae.texture,ye=o.convert(me.format),Ie=o.convert(me.type),De=P(me.internalFormat,ye,Ie,me.encoding);if(Se){const Ue=he(ae);t.renderbufferStorageMultisample(36161,Ue,De,ae.width,ae.height)}else t.renderbufferStorage(36161,De,ae.width,ae.height)}t.bindRenderbuffer(36161,null)}function te(oe,ae){if(ae&&ae.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,oe),!(ae.depthTexture&&ae.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(ae.depthTexture).__webglTexture||ae.depthTexture.image.width!==ae.width||ae.depthTexture.image.height!==ae.height)&&(ae.depthTexture.image.width=ae.width,ae.depthTexture.image.height=ae.height,ae.depthTexture.needsUpdate=!0),F(ae.depthTexture,0);const me=r.get(ae.depthTexture).__webglTexture;if(ae.depthTexture.format===Yp)t.framebufferTexture2D(36160,36096,3553,me,0);else if(ae.depthTexture.format===$v)t.framebufferTexture2D(36160,33306,3553,me,0);else throw new Error("Unknown depthTexture format")}function ie(oe){const ae=r.get(oe),Se=oe.isWebGLCubeRenderTarget===!0;if(oe.depthTexture){if(Se)throw new Error("target.depthTexture not supported in Cube render targets");te(ae.__webglFramebuffer,oe)}else if(Se){ae.__webglDepthbuffer=[];for(let me=0;me<6;me++)n.bindFramebuffer(36160,ae.__webglFramebuffer[me]),ae.__webglDepthbuffer[me]=t.createRenderbuffer(),se(ae.__webglDepthbuffer[me],oe,!1)}else n.bindFramebuffer(36160,ae.__webglFramebuffer),ae.__webglDepthbuffer=t.createRenderbuffer(),se(ae.__webglDepthbuffer,oe,!1);n.bindFramebuffer(36160,null)}function pe(oe){const ae=oe.texture,Se=r.get(oe),me=r.get(ae);oe.addEventListener("dispose",I),oe.isWebGLMultipleRenderTargets!==!0&&(me.__webglTexture=t.createTexture(),me.__version=ae.version,a.memory.textures++);const ye=oe.isWebGLCubeRenderTarget===!0,Ie=oe.isWebGLMultipleRenderTargets===!0,De=oe.isWebGLMultisampleRenderTarget===!0,Ue=ae.isDataTexture3D||ae.isDataTexture2DArray,$e=b(oe)||s;if(s&&ae.format===qp&&(ae.type===zc||ae.type===Gp)&&(ae.format=ro,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),ye){Se.__webglFramebuffer=[];for(let we=0;we<6;we++)Se.__webglFramebuffer[we]=t.createFramebuffer()}else if(Se.__webglFramebuffer=t.createFramebuffer(),Ie)if(i.drawBuffers){const we=oe.texture;for(let fe=0,ke=we.length;fe<ke;fe++){const Ne=r.get(we[fe]);Ne.__webglTexture===void 0&&(Ne.__webglTexture=t.createTexture(),a.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(De)if(s){Se.__webglMultisampledFramebuffer=t.createFramebuffer(),Se.__webglColorRenderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(36161,Se.__webglColorRenderbuffer);const we=o.convert(ae.format),fe=o.convert(ae.type),ke=P(ae.internalFormat,we,fe,ae.encoding),Ne=he(oe);t.renderbufferStorageMultisample(36161,Ne,ke,oe.width,oe.height),n.bindFramebuffer(36160,Se.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064,36161,Se.__webglColorRenderbuffer),t.bindRenderbuffer(36161,null),oe.depthBuffer&&(Se.__webglDepthRenderbuffer=t.createRenderbuffer(),se(Se.__webglDepthRenderbuffer,oe,!0)),n.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(ye){n.bindTexture(34067,me.__webglTexture),L(34067,ae,$e);for(let we=0;we<6;we++)ne(Se.__webglFramebuffer[we],oe,ae,36064,34069+we);T(ae,$e)&&C(34067,ae,oe.width,oe.height),n.unbindTexture()}else if(Ie){const we=oe.texture;for(let fe=0,ke=we.length;fe<ke;fe++){const Ne=we[fe],qe=r.get(Ne);n.bindTexture(3553,qe.__webglTexture),L(3553,Ne,$e),ne(Se.__webglFramebuffer,oe,Ne,36064+fe,3553),T(Ne,$e)&&C(3553,Ne,oe.width,oe.height)}n.unbindTexture()}else{let we=3553;Ue&&(s?we=ae.isDataTexture3D?32879:35866:console.warn("THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.")),n.bindTexture(we,me.__webglTexture),L(we,ae,$e),ne(Se.__webglFramebuffer,oe,ae,36064,we),T(ae,$e)&&C(we,ae,oe.width,oe.height,oe.depth),n.unbindTexture()}oe.depthBuffer&&ie(oe)}function de(oe){const ae=b(oe)||s,Se=oe.isWebGLMultipleRenderTargets===!0?oe.texture:[oe.texture];for(let me=0,ye=Se.length;me<ye;me++){const Ie=Se[me];if(T(Ie,ae)){const De=oe.isWebGLCubeRenderTarget?34067:3553,Ue=r.get(Ie).__webglTexture;n.bindTexture(De,Ue),C(De,Ie,oe.width,oe.height),n.unbindTexture()}}}function ce(oe){if(oe.isWebGLMultisampleRenderTarget)if(s){const ae=oe.width,Se=oe.height;let me=16384;oe.depthBuffer&&(me|=256),oe.stencilBuffer&&(me|=1024);const ye=r.get(oe);n.bindFramebuffer(36008,ye.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,ye.__webglFramebuffer),t.blitFramebuffer(0,0,ae,Se,0,0,ae,Se,me,9728),n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,ye.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")}function he(oe){return s&&oe.isWebGLMultisampleRenderTarget?Math.min(f,oe.samples):0}function ee(oe){const ae=a.render.frame;h.get(oe)!==ae&&(h.set(oe,ae),oe.update())}let xe=!1,be=!1;function Ae(oe,ae){oe&&oe.isWebGLRenderTarget&&(xe===!1&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),xe=!0),oe=oe.texture),F(oe,ae)}function Ce(oe,ae){oe&&oe.isWebGLCubeRenderTarget&&(be===!1&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),be=!0),oe=oe.texture),Z(oe,ae)}this.allocateTextureUnit=$,this.resetTextureUnits=B,this.setTexture2D=F,this.setTexture2DArray=J,this.setTexture3D=K,this.setTextureCube=Z,this.setupRenderTarget=pe,this.updateRenderTargetMipmap=de,this.updateMultisampleRenderTarget=ce,this.safeSetTexture2D=Ae,this.safeSetTextureCube=Ce}function Ele(t,e,n){const r=n.isWebGL2;function i(o){let a;if(o===Zc)return 5121;if(o===nse)return 32819;if(o===rse)return 32820;if(o===ise)return 33635;if(o===Qae)return 5120;if(o===ese)return 5122;if(o===o1)return 5123;if(o===tse)return 5124;if(o===Gw)return 5125;if(o===zc)return 5126;if(o===Gp)return r?5131:(a=e.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(o===ose)return 6406;if(o===qp)return 6407;if(o===ro)return 6408;if(o===ase)return 6409;if(o===sse)return 6410;if(o===Yp)return 6402;if(o===$v)return 34041;if(o===cse)return 6403;if(o===use)return 36244;if(o===dse)return 33319;if(o===fse)return 33320;if(o===hse)return 36248;if(o===pse)return 36249;if(o===SD||o===ED||o===_D||o===TD)if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(o===SD)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(o===ED)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(o===_D)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(o===TD)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(o===CD||o===AD||o===MD||o===PD)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(o===CD)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(o===AD)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(o===MD)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(o===PD)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(o===mse)return a=e.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if((o===kD||o===ND)&&(a=e.get("WEBGL_compressed_texture_etc"),a!==null)){if(o===kD)return a.COMPRESSED_RGB8_ETC2;if(o===ND)return a.COMPRESSED_RGBA8_ETC2_EAC}if(o===gse||o===yse||o===vse||o===xse||o===wse||o===bse||o===Sse||o===Ese||o===_se||o===Tse||o===Cse||o===Ase||o===Mse||o===Pse||o===Nse||o===Rse||o===jse||o===Ise||o===Ose||o===Lse||o===Dse||o===Fse||o===zse||o===Use||o===Bse||o===$se||o===Hse||o===Vse)return a=e.get("WEBGL_compressed_texture_astc"),a!==null?o:null;if(o===kse)return a=e.get("EXT_texture_compression_bptc"),a!==null?o:null;if(o===rv)return r?34042:(a=e.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null)}return{convert:i}}class $5 extends ci{constructor(e=[]){super(),this.cameras=e}}$5.prototype.isArrayCamera=!0;class Dp extends An{constructor(){super(),this.type="Group"}}Dp.prototype.isGroup=!0;const j9e={type:"move"};class Yj{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Dp,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Dp,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new ge,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new ge),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Dp,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new ge,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new ge),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,n,r){let i=null,o=null,a=null;const s=this._targetRay,l=this._grip,c=this._hand;if(e&&n.session.visibilityState!=="visible-blurred")if(s!==null&&(i=n.getPose(e.targetRaySpace,r),i!==null&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),i.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(i.linearVelocity)):s.hasLinearVelocity=!1,i.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(i.angularVelocity)):s.hasAngularVelocity=!1,this.dispatchEvent(j9e))),c&&e.hand){a=!0;for(const g of e.hand.values()){const v=n.getJointPose(g,r);if(c.joints[g.jointName]===void 0){const w=new Dp;w.matrixAutoUpdate=!1,w.visible=!1,c.joints[g.jointName]=w,c.add(w)}const b=c.joints[g.jointName];v!==null&&(b.matrix.fromArray(v.transform.matrix),b.matrix.decompose(b.position,b.rotation,b.scale),b.jointRadius=v.radius),b.visible=v!==null}const u=c.joints["index-finger-tip"],f=c.joints["thumb-tip"],h=u.position.distanceTo(f.position),p=.02,y=.005;c.inputState.pinching&&h>p+y?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&h<=p-y&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(o=n.getPose(e.gripSpace,r),o!==null&&(l.matrix.fromArray(o.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),o.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(o.linearVelocity)):l.hasLinearVelocity=!1,o.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(o.angularVelocity)):l.hasAngularVelocity=!1));return s!==null&&(s.visible=i!==null),l!==null&&(l.visible=o!==null),c!==null&&(c.visible=a!==null),this}}class I9e extends mh{constructor(e,n){super();const r=this,i=e.state;let o=null,a=1,s=null,l="local-floor",c=null,u=null,f=null,h=null,p=null,y=!1,g=null,v=null,b=null,w=null,T=null,C=null;const P=[],M=new Map,k=new ci;k.layers.enable(1),k.viewport=new Kn;const I=new ci;I.layers.enable(2),I.viewport=new Kn;const U=[k,I],z=new $5;z.layers.enable(1),z.layers.enable(2);let O=null,B=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(W){let ne=P[W];return ne===void 0&&(ne=new Yj,P[W]=ne),ne.getTargetRaySpace()},this.getControllerGrip=function(W){let ne=P[W];return ne===void 0&&(ne=new Yj,P[W]=ne),ne.getGripSpace()},this.getHand=function(W){let ne=P[W];return ne===void 0&&(ne=new Yj,P[W]=ne),ne.getHandSpace()};function $(W){const ne=M.get(W.inputSource);ne&&ne.dispatchEvent({type:W.type,data:W.inputSource})}function F(){M.forEach(function(W,ne){W.disconnect(ne)}),M.clear(),O=null,B=null,i.bindXRFramebuffer(null),e.setRenderTarget(e.getRenderTarget()),f&&n.deleteFramebuffer(f),g&&n.deleteFramebuffer(g),v&&n.deleteRenderbuffer(v),b&&n.deleteRenderbuffer(b),f=null,g=null,v=null,b=null,p=null,h=null,u=null,o=null,V.stop(),r.isPresenting=!1,r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(W){a=W,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(W){l=W,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return s},this.getBaseLayer=function(){return h!==null?h:p},this.getBinding=function(){return u},this.getFrame=function(){return w},this.getSession=function(){return o},this.setSession=async function(W){if(o=W,o!==null){o.addEventListener("select",$),o.addEventListener("selectstart",$),o.addEventListener("selectend",$),o.addEventListener("squeeze",$),o.addEventListener("squeezestart",$),o.addEventListener("squeezeend",$),o.addEventListener("end",F),o.addEventListener("inputsourceschange",J);const ne=n.getContextAttributes();if(ne.xrCompatible!==!0&&await n.makeXRCompatible(),o.renderState.layers===void 0){const se={antialias:ne.antialias,alpha:ne.alpha,depth:ne.depth,stencil:ne.stencil,framebufferScaleFactor:a};p=new XRWebGLLayer(o,n,se),o.updateRenderState({baseLayer:p})}else if(n instanceof WebGLRenderingContext){const se={antialias:!0,alpha:ne.alpha,depth:ne.depth,stencil:ne.stencil,framebufferScaleFactor:a};p=new XRWebGLLayer(o,n,se),o.updateRenderState({layers:[p]})}else{y=ne.antialias;let se=null;ne.depth&&(C=256,ne.stencil&&(C|=1024),T=ne.stencil?33306:36096,se=ne.stencil?35056:33190);const te={colorFormat:ne.alpha?32856:32849,depthFormat:se,scaleFactor:a};u=new XRWebGLBinding(o,n),h=u.createProjectionLayer(te),f=n.createFramebuffer(),o.updateRenderState({layers:[h]}),y&&(g=n.createFramebuffer(),v=n.createRenderbuffer(),n.bindRenderbuffer(36161,v),n.renderbufferStorageMultisample(36161,4,32856,h.textureWidth,h.textureHeight),i.bindFramebuffer(36160,g),n.framebufferRenderbuffer(36160,36064,36161,v),n.bindRenderbuffer(36161,null),se!==null&&(b=n.createRenderbuffer(),n.bindRenderbuffer(36161,b),n.renderbufferStorageMultisample(36161,4,se,h.textureWidth,h.textureHeight),n.framebufferRenderbuffer(36160,T,36161,b),n.bindRenderbuffer(36161,null)),i.bindFramebuffer(36160,null))}s=await o.requestReferenceSpace(l),V.setContext(o),V.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}};function J(W){const ne=o.inputSources;for(let se=0;se<P.length;se++)M.set(ne[se],P[se]);for(let se=0;se<W.removed.length;se++){const te=W.removed[se],ie=M.get(te);ie&&(ie.dispatchEvent({type:"disconnected",data:te}),M.delete(te))}for(let se=0;se<W.added.length;se++){const te=W.added[se],ie=M.get(te);ie&&ie.dispatchEvent({type:"connected",data:te})}}const K=new ge,Z=new ge;function H(W,ne,se){K.setFromMatrixPosition(ne.matrixWorld),Z.setFromMatrixPosition(se.matrixWorld);const te=K.distanceTo(Z),ie=ne.projectionMatrix.elements,pe=se.projectionMatrix.elements,de=ie[14]/(ie[10]-1),ce=ie[14]/(ie[10]+1),he=(ie[9]+1)/ie[5],ee=(ie[9]-1)/ie[5],xe=(ie[8]-1)/ie[0],be=(pe[8]+1)/pe[0],Ae=de*xe,Ce=de*be,oe=te/(-xe+be),ae=oe*-xe;ne.matrixWorld.decompose(W.position,W.quaternion,W.scale),W.translateX(ae),W.translateZ(oe),W.matrixWorld.compose(W.position,W.quaternion,W.scale),W.matrixWorldInverse.copy(W.matrixWorld).invert();const Se=de+oe,me=ce+oe,ye=Ae-ae,Ie=Ce+(te-ae),De=he*ce/me*Se,Ue=ee*ce/me*Se;W.projectionMatrix.makePerspective(ye,Ie,De,Ue,Se,me)}function Y(W,ne){ne===null?W.matrixWorld.copy(W.matrix):W.matrixWorld.multiplyMatrices(ne.matrixWorld,W.matrix),W.matrixWorldInverse.copy(W.matrixWorld).invert()}this.updateCamera=function(W){if(o===null)return;z.near=I.near=k.near=W.near,z.far=I.far=k.far=W.far,(O!==z.near||B!==z.far)&&(o.updateRenderState({depthNear:z.near,depthFar:z.far}),O=z.near,B=z.far);const ne=W.parent,se=z.cameras;Y(z,ne);for(let ie=0;ie<se.length;ie++)Y(se[ie],ne);z.matrixWorld.decompose(z.position,z.quaternion,z.scale),W.position.copy(z.position),W.quaternion.copy(z.quaternion),W.scale.copy(z.scale),W.matrix.copy(z.matrix),W.matrixWorld.copy(z.matrixWorld);const te=W.children;for(let ie=0,pe=te.length;ie<pe;ie++)te[ie].updateMatrixWorld(!0);se.length===2?H(z,k,I):z.projectionMatrix.copy(k.projectionMatrix)},this.getCamera=function(){return z},this.getFoveation=function(){if(h!==null)return h.fixedFoveation;if(p!==null)return p.fixedFoveation},this.setFoveation=function(W){h!==null&&(h.fixedFoveation=W),p!==null&&p.fixedFoveation!==void 0&&(p.fixedFoveation=W)};let L=null;function N(W,ne){if(c=ne.getViewerPose(s),w=ne,c!==null){const te=c.views;p!==null&&i.bindXRFramebuffer(p.framebuffer);let ie=!1;te.length!==z.cameras.length&&(z.cameras.length=0,ie=!0);for(let pe=0;pe<te.length;pe++){const de=te[pe];let ce=null;if(p!==null)ce=p.getViewport(de);else{const ee=u.getViewSubImage(h,de);i.bindXRFramebuffer(f),ee.depthStencilTexture!==void 0&&n.framebufferTexture2D(36160,T,3553,ee.depthStencilTexture,0),n.framebufferTexture2D(36160,36064,3553,ee.colorTexture,0),ce=ee.viewport}const he=U[pe];he.matrix.fromArray(de.transform.matrix),he.projectionMatrix.fromArray(de.projectionMatrix),he.viewport.set(ce.x,ce.y,ce.width,ce.height),pe===0&&z.matrix.copy(he.matrix),ie===!0&&z.cameras.push(he)}y&&(i.bindXRFramebuffer(g),C!==null&&n.clear(C))}const se=o.inputSources;for(let te=0;te<P.length;te++){const ie=P[te],pe=se[te];ie.update(pe,ne,s)}if(L&&L(W,ne),y){const te=h.textureWidth,ie=h.textureHeight;i.bindFramebuffer(36008,g),i.bindFramebuffer(36009,f),n.invalidateFramebuffer(36008,[T]),n.invalidateFramebuffer(36009,[T]),n.blitFramebuffer(0,0,te,ie,0,0,te,ie,16384,9728),n.invalidateFramebuffer(36008,[36064]),i.bindFramebuffer(36008,null),i.bindFramebuffer(36009,null),i.bindFramebuffer(36160,g)}w=null}const V=new dle;V.setAnimationLoop(N),this.setAnimationLoop=function(W){L=W},this.dispose=function(){}}}function O9e(t){function e(b,w){b.fogColor.value.copy(w.color),w.isFog?(b.fogNear.value=w.near,b.fogFar.value=w.far):w.isFogExp2&&(b.fogDensity.value=w.density)}function n(b,w,T,C,P){w.isMeshBasicMaterial?r(b,w):w.isMeshLambertMaterial?(r(b,w),l(b,w)):w.isMeshToonMaterial?(r(b,w),u(b,w)):w.isMeshPhongMaterial?(r(b,w),c(b,w)):w.isMeshStandardMaterial?(r(b,w),w.isMeshPhysicalMaterial?h(b,w,P):f(b,w)):w.isMeshMatcapMaterial?(r(b,w),p(b,w)):w.isMeshDepthMaterial?(r(b,w),y(b,w)):w.isMeshDistanceMaterial?(r(b,w),g(b,w)):w.isMeshNormalMaterial?(r(b,w),v(b,w)):w.isLineBasicMaterial?(i(b,w),w.isLineDashedMaterial&&o(b,w)):w.isPointsMaterial?a(b,w,T,C):w.isSpriteMaterial?s(b,w):w.isShadowMaterial?(b.color.value.copy(w.color),b.opacity.value=w.opacity):w.isShaderMaterial&&(w.uniformsNeedUpdate=!1)}function r(b,w){b.opacity.value=w.opacity,w.color&&b.diffuse.value.copy(w.color),w.emissive&&b.emissive.value.copy(w.emissive).multiplyScalar(w.emissiveIntensity),w.map&&(b.map.value=w.map),w.alphaMap&&(b.alphaMap.value=w.alphaMap),w.specularMap&&(b.specularMap.value=w.specularMap),w.alphaTest>0&&(b.alphaTest.value=w.alphaTest);const T=t.get(w).envMap;if(T){b.envMap.value=T,b.flipEnvMap.value=T.isCubeTexture&&T.isRenderTargetTexture===!1?-1:1,b.reflectivity.value=w.reflectivity,b.ior.value=w.ior,b.refractionRatio.value=w.refractionRatio;const M=t.get(T).__maxMipLevel;M!==void 0&&(b.maxMipLevel.value=M)}w.lightMap&&(b.lightMap.value=w.lightMap,b.lightMapIntensity.value=w.lightMapIntensity),w.aoMap&&(b.aoMap.value=w.aoMap,b.aoMapIntensity.value=w.aoMapIntensity);let C;w.map?C=w.map:w.specularMap?C=w.specularMap:w.displacementMap?C=w.displacementMap:w.normalMap?C=w.normalMap:w.bumpMap?C=w.bumpMap:w.roughnessMap?C=w.roughnessMap:w.metalnessMap?C=w.metalnessMap:w.alphaMap?C=w.alphaMap:w.emissiveMap?C=w.emissiveMap:w.clearcoatMap?C=w.clearcoatMap:w.clearcoatNormalMap?C=w.clearcoatNormalMap:w.clearcoatRoughnessMap?C=w.clearcoatRoughnessMap:w.specularIntensityMap?C=w.specularIntensityMap:w.specularTintMap?C=w.specularTintMap:w.transmissionMap?C=w.transmissionMap:w.thicknessMap&&(C=w.thicknessMap),C!==void 0&&(C.isWebGLRenderTarget&&(C=C.texture),C.matrixAutoUpdate===!0&&C.updateMatrix(),b.uvTransform.value.copy(C.matrix));let P;w.aoMap?P=w.aoMap:w.lightMap&&(P=w.lightMap),P!==void 0&&(P.isWebGLRenderTarget&&(P=P.texture),P.matrixAutoUpdate===!0&&P.updateMatrix(),b.uv2Transform.value.copy(P.matrix))}function i(b,w){b.diffuse.value.copy(w.color),b.opacity.value=w.opacity}function o(b,w){b.dashSize.value=w.dashSize,b.totalSize.value=w.dashSize+w.gapSize,b.scale.value=w.scale}function a(b,w,T,C){b.diffuse.value.copy(w.color),b.opacity.value=w.opacity,b.size.value=w.size*T,b.scale.value=C*.5,w.map&&(b.map.value=w.map),w.alphaMap&&(b.alphaMap.value=w.alphaMap),w.alphaTest>0&&(b.alphaTest.value=w.alphaTest);let P;w.map?P=w.map:w.alphaMap&&(P=w.alphaMap),P!==void 0&&(P.matrixAutoUpdate===!0&&P.updateMatrix(),b.uvTransform.value.copy(P.matrix))}function s(b,w){b.diffuse.value.copy(w.color),b.opacity.value=w.opacity,b.rotation.value=w.rotation,w.map&&(b.map.value=w.map),w.alphaMap&&(b.alphaMap.value=w.alphaMap),w.alphaTest>0&&(b.alphaTest.value=w.alphaTest);let T;w.map?T=w.map:w.alphaMap&&(T=w.alphaMap),T!==void 0&&(T.matrixAutoUpdate===!0&&T.updateMatrix(),b.uvTransform.value.copy(T.matrix))}function l(b,w){w.emissiveMap&&(b.emissiveMap.value=w.emissiveMap)}function c(b,w){b.specular.value.copy(w.specular),b.shininess.value=Math.max(w.shininess,1e-4),w.emissiveMap&&(b.emissiveMap.value=w.emissiveMap),w.bumpMap&&(b.bumpMap.value=w.bumpMap,b.bumpScale.value=w.bumpScale,w.side===oi&&(b.bumpScale.value*=-1)),w.normalMap&&(b.normalMap.value=w.normalMap,b.normalScale.value.copy(w.normalScale),w.side===oi&&b.normalScale.value.negate()),w.displacementMap&&(b.displacementMap.value=w.displacementMap,b.displacementScale.value=w.displacementScale,b.displacementBias.value=w.displacementBias)}function u(b,w){w.gradientMap&&(b.gradientMap.value=w.gradientMap),w.emissiveMap&&(b.emissiveMap.value=w.emissiveMap),w.bumpMap&&(b.bumpMap.value=w.bumpMap,b.bumpScale.value=w.bumpScale,w.side===oi&&(b.bumpScale.value*=-1)),w.normalMap&&(b.normalMap.value=w.normalMap,b.normalScale.value.copy(w.normalScale),w.side===oi&&b.normalScale.value.negate()),w.displacementMap&&(b.displacementMap.value=w.displacementMap,b.displacementScale.value=w.displacementScale,b.displacementBias.value=w.displacementBias)}function f(b,w){b.roughness.value=w.roughness,b.metalness.value=w.metalness,w.roughnessMap&&(b.roughnessMap.value=w.roughnessMap),w.metalnessMap&&(b.metalnessMap.value=w.metalnessMap),w.emissiveMap&&(b.emissiveMap.value=w.emissiveMap),w.bumpMap&&(b.bumpMap.value=w.bumpMap,b.bumpScale.value=w.bumpScale,w.side===oi&&(b.bumpScale.value*=-1)),w.normalMap&&(b.normalMap.value=w.normalMap,b.normalScale.value.copy(w.normalScale),w.side===oi&&b.normalScale.value.negate()),w.displacementMap&&(b.displacementMap.value=w.displacementMap,b.displacementScale.value=w.displacementScale,b.displacementBias.value=w.displacementBias),t.get(w).envMap&&(b.envMapIntensity.value=w.envMapIntensity)}function h(b,w,T){f(b,w),b.ior.value=w.ior,w.sheen>0&&(b.sheenTint.value.copy(w.sheenTint).multiplyScalar(w.sheen),b.sheenRoughness.value=w.sheenRoughness),w.clearcoat>0&&(b.clearcoat.value=w.clearcoat,b.clearcoatRoughness.value=w.clearcoatRoughness,w.clearcoatMap&&(b.clearcoatMap.value=w.clearcoatMap),w.clearcoatRoughnessMap&&(b.clearcoatRoughnessMap.value=w.clearcoatRoughnessMap),w.clearcoatNormalMap&&(b.clearcoatNormalScale.value.copy(w.clearcoatNormalScale),b.clearcoatNormalMap.value=w.clearcoatNormalMap,w.side===oi&&b.clearcoatNormalScale.value.negate())),w.transmission>0&&(b.transmission.value=w.transmission,b.transmissionSamplerMap.value=T.texture,b.transmissionSamplerSize.value.set(T.width,T.height),w.transmissionMap&&(b.transmissionMap.value=w.transmissionMap),b.thickness.value=w.thickness,w.thicknessMap&&(b.thicknessMap.value=w.thicknessMap),b.attenuationDistance.value=w.attenuationDistance,b.attenuationTint.value.copy(w.attenuationTint)),b.specularIntensity.value=w.specularIntensity,b.specularTint.value.copy(w.specularTint),w.specularIntensityMap&&(b.specularIntensityMap.value=w.specularIntensityMap),w.specularTintMap&&(b.specularTintMap.value=w.specularTintMap)}function p(b,w){w.matcap&&(b.matcap.value=w.matcap),w.bumpMap&&(b.bumpMap.value=w.bumpMap,b.bumpScale.value=w.bumpScale,w.side===oi&&(b.bumpScale.value*=-1)),w.normalMap&&(b.normalMap.value=w.normalMap,b.normalScale.value.copy(w.normalScale),w.side===oi&&b.normalScale.value.negate()),w.displacementMap&&(b.displacementMap.value=w.displacementMap,b.displacementScale.value=w.displacementScale,b.displacementBias.value=w.displacementBias)}function y(b,w){w.displacementMap&&(b.displacementMap.value=w.displacementMap,b.displacementScale.value=w.displacementScale,b.displacementBias.value=w.displacementBias)}function g(b,w){w.displacementMap&&(b.displacementMap.value=w.displacementMap,b.displacementScale.value=w.displacementScale,b.displacementBias.value=w.displacementBias),b.referencePosition.value.copy(w.referencePosition),b.nearDistance.value=w.nearDistance,b.farDistance.value=w.farDistance}function v(b,w){w.bumpMap&&(b.bumpMap.value=w.bumpMap,b.bumpScale.value=w.bumpScale,w.side===oi&&(b.bumpScale.value*=-1)),w.normalMap&&(b.normalMap.value=w.normalMap,b.normalScale.value.copy(w.normalScale),w.side===oi&&b.normalScale.value.negate()),w.displacementMap&&(b.displacementMap.value=w.displacementMap,b.displacementScale.value=w.displacementScale,b.displacementBias.value=w.displacementBias)}return{refreshFogUniforms:e,refreshMaterialUniforms:n}}function L9e(){const t=l2("canvas");return t.style.display="block",t}function ar(t={}){const e=t.canvas!==void 0?t.canvas:L9e(),n=t.context!==void 0?t.context:null,r=t.alpha!==void 0?t.alpha:!1,i=t.depth!==void 0?t.depth:!0,o=t.stencil!==void 0?t.stencil:!0,a=t.antialias!==void 0?t.antialias:!1,s=t.premultipliedAlpha!==void 0?t.premultipliedAlpha:!0,l=t.preserveDrawingBuffer!==void 0?t.preserveDrawingBuffer:!1,c=t.powerPreference!==void 0?t.powerPreference:"default",u=t.failIfMajorPerformanceCaveat!==void 0?t.failIfMajorPerformanceCaveat:!1;let f=null,h=null;const p=[],y=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=Vo,this.physicallyCorrectLights=!1,this.toneMapping=sd,this.toneMappingExposure=1;const g=this;let v=!1,b=0,w=0,T=null,C=-1,P=null;const M=new Kn,k=new Kn;let I=null,U=e.width,z=e.height,O=1,B=null,$=null;const F=new Kn(0,0,U,z),J=new Kn(0,0,U,z);let K=!1;const Z=[],H=new oS;let Y=!1,L=!1,N=null;const V=new Ut,W=new ge,ne={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function se(){return T===null?O:1}let te=n;function ie(le,Me){for(let Pe=0;Pe<le.length;Pe++){const Re=le[Pe],ze=e.getContext(Re,Me);if(ze!==null)return ze}return null}try{const le={alpha:r,depth:i,stencil:o,antialias:a,premultipliedAlpha:s,preserveDrawingBuffer:l,powerPreference:c,failIfMajorPerformanceCaveat:u};if(e.addEventListener("webglcontextlost",St,!1),e.addEventListener("webglcontextrestored",dt,!1),te===null){const Me=["webgl2","webgl","experimental-webgl"];if(g.isWebGL1Renderer===!0&&Me.shift(),te=ie(Me,le),te===null)throw ie(Me)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}te.getShaderPrecisionFormat===void 0&&(te.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(le){throw console.error("THREE.WebGLRenderer: "+le.message),le}let pe,de,ce,he,ee,xe,be,Ae,Ce,oe,ae,Se,me,ye,Ie,De,Ue,$e,we,fe,ke,Ne,qe;function tt(){pe=new aGe(te),de=new QWe(te,pe,t),pe.init(de),Ne=new Ele(te,pe,de),ce=new N9e(te,pe,de),Z[0]=1029,he=new cGe,ee=new w9e,xe=new R9e(te,pe,ce,ee,de,Ne,he),be=new tGe(g),Ae=new oGe(g),Ce=new EHe(te,de),qe=new JWe(te,pe,Ce,de),oe=new sGe(te,Ce,he,qe),ae=new hGe(te,oe,Ce,he),we=new fGe(te,de,xe),De=new eGe(ee),Se=new x9e(g,be,Ae,pe,de,qe,De),me=new O9e(ee),ye=new S9e(ee),Ie=new M9e(pe,de),$e=new KWe(g,be,ce,ae,s),Ue=new Sle(g,ae,de),fe=new ZWe(te,pe,he,de),ke=new lGe(te,pe,he,de),he.programs=Se.programs,g.capabilities=de,g.extensions=pe,g.properties=ee,g.renderLists=ye,g.shadowMap=Ue,g.state=ce,g.info=he}tt();const ot=new I9e(g,te);this.xr=ot,this.getContext=function(){return te},this.getContextAttributes=function(){return te.getContextAttributes()},this.forceContextLoss=function(){const le=pe.get("WEBGL_lose_context");le&&le.loseContext()},this.forceContextRestore=function(){const le=pe.get("WEBGL_lose_context");le&&le.restoreContext()},this.getPixelRatio=function(){return O},this.setPixelRatio=function(le){le!==void 0&&(O=le,this.setSize(U,z,!1))},this.getSize=function(le){return le.set(U,z)},this.setSize=function(le,Me,Pe){if(ot.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}U=le,z=Me,e.width=Math.floor(le*O),e.height=Math.floor(Me*O),Pe!==!1&&(e.style.width=le+"px",e.style.height=Me+"px"),this.setViewport(0,0,le,Me)},this.getDrawingBufferSize=function(le){return le.set(U*O,z*O).floor()},this.setDrawingBufferSize=function(le,Me,Pe){U=le,z=Me,O=Pe,e.width=Math.floor(le*Pe),e.height=Math.floor(Me*Pe),this.setViewport(0,0,le,Me)},this.getCurrentViewport=function(le){return le.copy(M)},this.getViewport=function(le){return le.copy(F)},this.setViewport=function(le,Me,Pe,Re){le.isVector4?F.set(le.x,le.y,le.z,le.w):F.set(le,Me,Pe,Re),ce.viewport(M.copy(F).multiplyScalar(O).floor())},this.getScissor=function(le){return le.copy(J)},this.setScissor=function(le,Me,Pe,Re){le.isVector4?J.set(le.x,le.y,le.z,le.w):J.set(le,Me,Pe,Re),ce.scissor(k.copy(J).multiplyScalar(O).floor())},this.getScissorTest=function(){return K},this.setScissorTest=function(le){ce.setScissorTest(K=le)},this.setOpaqueSort=function(le){B=le},this.setTransparentSort=function(le){$=le},this.getClearColor=function(le){return le.copy($e.getClearColor())},this.setClearColor=function(){$e.setClearColor.apply($e,arguments)},this.getClearAlpha=function(){return $e.getClearAlpha()},this.setClearAlpha=function(){$e.setClearAlpha.apply($e,arguments)},this.clear=function(le,Me,Pe){let Re=0;(le===void 0||le)&&(Re|=16384),(Me===void 0||Me)&&(Re|=256),(Pe===void 0||Pe)&&(Re|=1024),te.clear(Re)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",St,!1),e.removeEventListener("webglcontextrestored",dt,!1),ye.dispose(),Ie.dispose(),ee.dispose(),be.dispose(),Ae.dispose(),ae.dispose(),qe.dispose(),ot.dispose(),ot.removeEventListener("sessionstart",Bt),ot.removeEventListener("sessionend",en),N&&(N.dispose(),N=null),Hn.stop()};function St(le){le.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),v=!0}function dt(){console.log("THREE.WebGLRenderer: Context Restored."),v=!1;const le=he.autoReset,Me=Ue.enabled,Pe=Ue.autoUpdate,Re=Ue.needsUpdate,ze=Ue.type;tt(),he.autoReset=le,Ue.enabled=Me,Ue.autoUpdate=Pe,Ue.needsUpdate=Re,Ue.type=ze}function ft(le){const Me=le.target;Me.removeEventListener("dispose",ft),Ee(Me)}function Ee(le){Ve(le),ee.remove(le)}function Ve(le){const Me=ee.get(le).programs;Me!==void 0&&Me.forEach(function(Pe){Se.releaseProgram(Pe)})}function Xe(le,Me){le.render(function(Pe){g.renderBufferImmediate(Pe,Me)})}this.renderBufferImmediate=function(le,Me){qe.initAttributes();const Pe=ee.get(le);le.hasPositions&&!Pe.position&&(Pe.position=te.createBuffer()),le.hasNormals&&!Pe.normal&&(Pe.normal=te.createBuffer()),le.hasUvs&&!Pe.uv&&(Pe.uv=te.createBuffer()),le.hasColors&&!Pe.color&&(Pe.color=te.createBuffer());const Re=Me.getAttributes();le.hasPositions&&(te.bindBuffer(34962,Pe.position),te.bufferData(34962,le.positionArray,35048),qe.enableAttribute(Re.position.location),te.vertexAttribPointer(Re.position.location,3,5126,!1,0,0)),le.hasNormals&&(te.bindBuffer(34962,Pe.normal),te.bufferData(34962,le.normalArray,35048),qe.enableAttribute(Re.normal.location),te.vertexAttribPointer(Re.normal.location,3,5126,!1,0,0)),le.hasUvs&&(te.bindBuffer(34962,Pe.uv),te.bufferData(34962,le.uvArray,35048),qe.enableAttribute(Re.uv.location),te.vertexAttribPointer(Re.uv.location,2,5126,!1,0,0)),le.hasColors&&(te.bindBuffer(34962,Pe.color),te.bufferData(34962,le.colorArray,35048),qe.enableAttribute(Re.color.location),te.vertexAttribPointer(Re.color.location,3,5126,!1,0,0)),qe.disableUnusedAttributes(),te.drawArrays(4,0,le.count),le.count=0},this.renderBufferDirect=function(le,Me,Pe,Re,ze,at){Me===null&&(Me=ne);const it=ze.isMesh&&ze.matrixWorld.determinant()<0,pt=ln(le,Me,Pe,Re,ze);ce.setMaterial(Re,it);let Qt=Pe.index;const Pn=Pe.attributes.position;if(Qt===null){if(Pn===void 0||Pn.count===0)return}else if(Qt.count===0)return;let cn=1;Re.wireframe===!0&&(Qt=oe.getWireframeAttribute(Pe),cn=2),qe.setup(ze,Re,pt,Pe,Qt);let yn,tr=fe;Qt!==null&&(yn=Ce.get(Qt),tr=ke,tr.setIndex(yn));const ua=Qt!==null?Qt.count:Pn.count,vn=Pe.drawRange.start*cn,ns=Pe.drawRange.count*cn,Vn=at!==null?at.start*cn:0,yt=at!==null?at.count*cn:1/0,di=Math.max(vn,Vn),Eo=Math.min(ua,vn+ns,Vn+yt)-1,Qr=Math.max(0,Eo-di+1);if(Qr!==0){if(ze.isMesh)Re.wireframe===!0?(ce.setLineWidth(Re.wireframeLinewidth*se()),tr.setMode(1)):tr.setMode(4);else if(ze.isLine){let Fn=Re.linewidth;Fn===void 0&&(Fn=1),ce.setLineWidth(Fn*se()),ze.isLineSegments?tr.setMode(1):ze.isLineLoop?tr.setMode(2):tr.setMode(3)}else ze.isPoints?tr.setMode(0):ze.isSprite&&tr.setMode(4);if(ze.isInstancedMesh)tr.renderInstances(di,Qr,ze.count);else if(Pe.isInstancedBufferGeometry){const Fn=Math.min(Pe.instanceCount,Pe._maxInstanceCount);tr.renderInstances(di,Qr,Fn)}else tr.render(di,Qr)}},this.compile=function(le,Me){h=Ie.get(le),h.init(),y.push(h),le.traverseVisible(function(Pe){Pe.isLight&&Pe.layers.test(Me.layers)&&(h.pushLight(Pe),Pe.castShadow&&h.pushShadow(Pe))}),h.setupLights(g.physicallyCorrectLights),le.traverse(function(Pe){const Re=Pe.material;if(Re)if(Array.isArray(Re))for(let ze=0;ze<Re.length;ze++){const at=Re[ze];gn(at,le,Pe)}else gn(Re,le,Pe)}),y.pop(),h=null};let et=null;function wt(le){et&&et(le)}function Bt(){Hn.stop()}function en(){Hn.start()}const Hn=new dle;Hn.setAnimationLoop(wt),typeof window<"u"&&Hn.setContext(window),this.setAnimationLoop=function(le){et=le,ot.setAnimationLoop(le),le===null?Hn.stop():Hn.start()},ot.addEventListener("sessionstart",Bt),ot.addEventListener("sessionend",en),this.render=function(le,Me){if(Me!==void 0&&Me.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(v===!0)return;le.autoUpdate===!0&&le.updateMatrixWorld(),Me.parent===null&&Me.updateMatrixWorld(),ot.enabled===!0&&ot.isPresenting===!0&&(ot.cameraAutoUpdate===!0&&ot.updateCamera(Me),Me=ot.getCamera()),le.isScene===!0&&le.onBeforeRender(g,le,Me,T),h=Ie.get(le,y.length),h.init(),y.push(h),V.multiplyMatrices(Me.projectionMatrix,Me.matrixWorldInverse),H.setFromProjectionMatrix(V),L=this.localClippingEnabled,Y=De.init(this.clippingPlanes,L,Me),f=ye.get(le,p.length),f.init(),p.push(f),gr(le,Me,0,g.sortObjects),f.finish(),g.sortObjects===!0&&f.sort(B,$),Y===!0&&De.beginShadows();const Pe=h.state.shadowsArray;if(Ue.render(Pe,le,Me),Y===!0&&De.endShadows(),this.info.autoReset===!0&&this.info.reset(),$e.render(f,le),h.setupLights(g.physicallyCorrectLights),Me.isArrayCamera){const Re=Me.cameras;for(let ze=0,at=Re.length;ze<at;ze++){const it=Re[ze];Mn(f,le,it,it.viewport)}}else Mn(f,le,Me);T!==null&&(xe.updateMultisampleRenderTarget(T),xe.updateRenderTargetMipmap(T)),le.isScene===!0&&le.onAfterRender(g,le,Me),ce.buffers.depth.setTest(!0),ce.buffers.depth.setMask(!0),ce.buffers.color.setMask(!0),ce.setPolygonOffset(!1),qe.resetDefaultState(),C=-1,P=null,y.pop(),y.length>0?h=y[y.length-1]:h=null,p.pop(),p.length>0?f=p[p.length-1]:f=null};function gr(le,Me,Pe,Re){if(le.visible===!1)return;if(le.layers.test(Me.layers)){if(le.isGroup)Pe=le.renderOrder;else if(le.isLOD)le.autoUpdate===!0&&le.update(Me);else if(le.isLight)h.pushLight(le),le.castShadow&&h.pushShadow(le);else if(le.isSprite){if(!le.frustumCulled||H.intersectsSprite(le)){Re&&W.setFromMatrixPosition(le.matrixWorld).applyMatrix4(V);const it=ae.update(le),pt=le.material;pt.visible&&f.push(le,it,pt,Pe,W.z,null)}}else if(le.isImmediateRenderObject)Re&&W.setFromMatrixPosition(le.matrixWorld).applyMatrix4(V),f.push(le,null,le.material,Pe,W.z,null);else if((le.isMesh||le.isLine||le.isPoints)&&(le.isSkinnedMesh&&le.skeleton.frame!==he.render.frame&&(le.skeleton.update(),le.skeleton.frame=he.render.frame),!le.frustumCulled||H.intersectsObject(le))){Re&&W.setFromMatrixPosition(le.matrixWorld).applyMatrix4(V);const it=ae.update(le),pt=le.material;if(Array.isArray(pt)){const Qt=it.groups;for(let Pn=0,cn=Qt.length;Pn<cn;Pn++){const yn=Qt[Pn],tr=pt[yn.materialIndex];tr&&tr.visible&&f.push(le,it,tr,Pe,W.z,yn)}}else pt.visible&&f.push(le,it,pt,Pe,W.z,null)}}const at=le.children;for(let it=0,pt=at.length;it<pt;it++)gr(at[it],Me,Pe,Re)}function Mn(le,Me,Pe,Re){const ze=le.opaque,at=le.transmissive,it=le.transparent;h.setupLightsView(Pe),at.length>0&&Jt(ze,Me,Pe),Re&&ce.viewport(M.copy(Re)),ze.length>0&&fn(ze,Me,Pe),at.length>0&&fn(at,Me,Pe),it.length>0&&fn(it,Me,Pe)}function Jt(le,Me,Pe){if(N===null){const it=a===!0&&de.isWebGL2===!0?D5:ic;N=new it(1024,1024,{generateMipmaps:!0,type:Ne.convert(Gp)!==null?Gp:Zc,minFilter:Nm,magFilter:Fi,wrapS:$o,wrapT:$o})}const Re=g.getRenderTarget();g.setRenderTarget(N),g.clear();const ze=g.toneMapping;g.toneMapping=sd,fn(le,Me,Pe),g.toneMapping=ze,xe.updateMultisampleRenderTarget(N),xe.updateRenderTargetMipmap(N),g.setRenderTarget(Re)}function fn(le,Me,Pe){const Re=Me.isScene===!0?Me.overrideMaterial:null;for(let ze=0,at=le.length;ze<at;ze++){const it=le[ze],pt=it.object,Qt=it.geometry,Pn=Re===null?it.material:Re,cn=it.group;pt.layers.test(Pe.layers)&&Ar(pt,Me,Pe,Qt,Pn,cn)}}function Ar(le,Me,Pe,Re,ze,at){if(le.onBeforeRender(g,Me,Pe,Re,ze,at),le.modelViewMatrix.multiplyMatrices(Pe.matrixWorldInverse,le.matrixWorld),le.normalMatrix.getNormalMatrix(le.modelViewMatrix),ze.onBeforeRender(g,Me,Pe,Re,le,at),le.isImmediateRenderObject){const it=ln(Pe,Me,Re,ze,le);ce.setMaterial(ze),qe.reset(),Xe(le,it)}else ze.transparent===!0&&ze.side===vd?(ze.side=oi,ze.needsUpdate=!0,g.renderBufferDirect(Pe,Me,Re,ze,le,at),ze.side=Jf,ze.needsUpdate=!0,g.renderBufferDirect(Pe,Me,Re,ze,le,at),ze.side=vd):g.renderBufferDirect(Pe,Me,Re,ze,le,at);le.onAfterRender(g,Me,Pe,Re,ze,at)}function gn(le,Me,Pe){Me.isScene!==!0&&(Me=ne);const Re=ee.get(le),ze=h.state.lights,at=h.state.shadowsArray,it=ze.state.version,pt=Se.getParameters(le,ze.state,at,Me,Pe),Qt=Se.getProgramCacheKey(pt);let Pn=Re.programs;Re.environment=le.isMeshStandardMaterial?Me.environment:null,Re.fog=Me.fog,Re.envMap=(le.isMeshStandardMaterial?Ae:be).get(le.envMap||Re.environment),Pn===void 0&&(le.addEventListener("dispose",ft),Pn=new Map,Re.programs=Pn);let cn=Pn.get(Qt);if(cn!==void 0){if(Re.currentProgram===cn&&Re.lightsStateVersion===it)return un(le,pt),cn}else pt.uniforms=Se.getUniforms(le),le.onBuild(pt,g),le.onBeforeCompile(pt,g),cn=Se.acquireProgram(pt,Qt),Pn.set(Qt,cn),Re.uniforms=pt.uniforms;const yn=Re.uniforms;(!le.isShaderMaterial&&!le.isRawShaderMaterial||le.clipping===!0)&&(yn.clippingPlanes=De.uniform),un(le,pt),Re.needsLights=Zt(le),Re.lightsStateVersion=it,Re.needsLights&&(yn.ambientLightColor.value=ze.state.ambient,yn.lightProbe.value=ze.state.probe,yn.directionalLights.value=ze.state.directional,yn.directionalLightShadows.value=ze.state.directionalShadow,yn.spotLights.value=ze.state.spot,yn.spotLightShadows.value=ze.state.spotShadow,yn.rectAreaLights.value=ze.state.rectArea,yn.ltc_1.value=ze.state.rectAreaLTC1,yn.ltc_2.value=ze.state.rectAreaLTC2,yn.pointLights.value=ze.state.point,yn.pointLightShadows.value=ze.state.pointShadow,yn.hemisphereLights.value=ze.state.hemi,yn.directionalShadowMap.value=ze.state.directionalShadowMap,yn.directionalShadowMatrix.value=ze.state.directionalShadowMatrix,yn.spotShadowMap.value=ze.state.spotShadowMap,yn.spotShadowMatrix.value=ze.state.spotShadowMatrix,yn.pointShadowMap.value=ze.state.pointShadowMap,yn.pointShadowMatrix.value=ze.state.pointShadowMatrix);const tr=cn.getUniforms(),ua=$f.seqWithValue(tr.seq,yn);return Re.currentProgram=cn,Re.uniformsList=ua,cn}function un(le,Me){const Pe=ee.get(le);Pe.outputEncoding=Me.outputEncoding,Pe.instancing=Me.instancing,Pe.skinning=Me.skinning,Pe.morphTargets=Me.morphTargets,Pe.morphNormals=Me.morphNormals,Pe.morphTargetsCount=Me.morphTargetsCount,Pe.numClippingPlanes=Me.numClippingPlanes,Pe.numIntersection=Me.numClipIntersection,Pe.vertexAlphas=Me.vertexAlphas,Pe.vertexTangents=Me.vertexTangents}function ln(le,Me,Pe,Re,ze){Me.isScene!==!0&&(Me=ne),xe.resetTextureUnits();const at=Me.fog,it=Re.isMeshStandardMaterial?Me.environment:null,pt=T===null?g.outputEncoding:T.texture.encoding,Qt=(Re.isMeshStandardMaterial?Ae:be).get(Re.envMap||it),Pn=Re.vertexColors===!0&&!!Pe&&!!Pe.attributes.color&&Pe.attributes.color.itemSize===4,cn=!!Re.normalMap&&!!Pe&&!!Pe.attributes.tangent,yn=!!Pe&&!!Pe.morphAttributes.position,tr=!!Pe&&!!Pe.morphAttributes.normal,ua=Pe&&Pe.morphAttributes.position?Pe.morphAttributes.position.length:0,vn=ee.get(Re),ns=h.state.lights;if(Y===!0&&(L===!0||le!==P)){const Mr=le===P&&Re.id===C;De.setState(Re,le,Mr)}let Vn=!1;Re.version===vn.__version?(vn.needsLights&&vn.lightsStateVersion!==ns.state.version||vn.outputEncoding!==pt||ze.isInstancedMesh&&vn.instancing===!1||!ze.isInstancedMesh&&vn.instancing===!0||ze.isSkinnedMesh&&vn.skinning===!1||!ze.isSkinnedMesh&&vn.skinning===!0||vn.envMap!==Qt||Re.fog&&vn.fog!==at||vn.numClippingPlanes!==void 0&&(vn.numClippingPlanes!==De.numPlanes||vn.numIntersection!==De.numIntersection)||vn.vertexAlphas!==Pn||vn.vertexTangents!==cn||vn.morphTargets!==yn||vn.morphNormals!==tr||de.isWebGL2===!0&&vn.morphTargetsCount!==ua)&&(Vn=!0):(Vn=!0,vn.__version=Re.version);let yt=vn.currentProgram;Vn===!0&&(yt=gn(Re,Me,ze));let di=!1,Eo=!1,Qr=!1;const Fn=yt.getUniforms(),Na=vn.uniforms;if(ce.useProgram(yt.program)&&(di=!0,Eo=!0,Qr=!0),Re.id!==C&&(C=Re.id,Eo=!0),di||P!==le){if(Fn.setValue(te,"projectionMatrix",le.projectionMatrix),de.logarithmicDepthBuffer&&Fn.setValue(te,"logDepthBufFC",2/(Math.log(le.far+1)/Math.LN2)),P!==le&&(P=le,Eo=!0,Qr=!0),Re.isShaderMaterial||Re.isMeshPhongMaterial||Re.isMeshToonMaterial||Re.isMeshStandardMaterial||Re.envMap){const Mr=Fn.map.cameraPosition;Mr!==void 0&&Mr.setValue(te,W.setFromMatrixPosition(le.matrixWorld))}(Re.isMeshPhongMaterial||Re.isMeshToonMaterial||Re.isMeshLambertMaterial||Re.isMeshBasicMaterial||Re.isMeshStandardMaterial||Re.isShaderMaterial)&&Fn.setValue(te,"isOrthographic",le.isOrthographicCamera===!0),(Re.isMeshPhongMaterial||Re.isMeshToonMaterial||Re.isMeshLambertMaterial||Re.isMeshBasicMaterial||Re.isMeshStandardMaterial||Re.isShaderMaterial||Re.isShadowMaterial||ze.isSkinnedMesh)&&Fn.setValue(te,"viewMatrix",le.matrixWorldInverse)}if(ze.isSkinnedMesh){Fn.setOptional(te,ze,"bindMatrix"),Fn.setOptional(te,ze,"bindMatrixInverse");const Mr=ze.skeleton;Mr&&(de.floatVertexTextures?(Mr.boneTexture===null&&Mr.computeBoneTexture(),Fn.setValue(te,"boneTexture",Mr.boneTexture,xe),Fn.setValue(te,"boneTextureSize",Mr.boneTextureSize)):Fn.setOptional(te,Mr,"boneMatrices"))}return Pe&&(Pe.morphAttributes.position!==void 0||Pe.morphAttributes.normal!==void 0)&&we.update(ze,Pe,Re,yt),(Eo||vn.receiveShadow!==ze.receiveShadow)&&(vn.receiveShadow=ze.receiveShadow,Fn.setValue(te,"receiveShadow",ze.receiveShadow)),Eo&&(Fn.setValue(te,"toneMappingExposure",g.toneMappingExposure),vn.needsLights&&Nn(Na,Qr),at&&Re.fog&&me.refreshFogUniforms(Na,at),me.refreshMaterialUniforms(Na,Re,O,z,N),$f.upload(te,vn.uniformsList,Na,xe)),Re.isShaderMaterial&&Re.uniformsNeedUpdate===!0&&($f.upload(te,vn.uniformsList,Na,xe),Re.uniformsNeedUpdate=!1),Re.isSpriteMaterial&&Fn.setValue(te,"center",ze.center),Fn.setValue(te,"modelViewMatrix",ze.modelViewMatrix),Fn.setValue(te,"normalMatrix",ze.normalMatrix),Fn.setValue(te,"modelMatrix",ze.matrixWorld),yt}function Nn(le,Me){le.ambientLightColor.needsUpdate=Me,le.lightProbe.needsUpdate=Me,le.directionalLights.needsUpdate=Me,le.directionalLightShadows.needsUpdate=Me,le.pointLights.needsUpdate=Me,le.pointLightShadows.needsUpdate=Me,le.spotLights.needsUpdate=Me,le.spotLightShadows.needsUpdate=Me,le.rectAreaLights.needsUpdate=Me,le.hemisphereLights.needsUpdate=Me}function Zt(le){return le.isMeshLambertMaterial||le.isMeshToonMaterial||le.isMeshPhongMaterial||le.isMeshStandardMaterial||le.isShadowMaterial||le.isShaderMaterial&&le.lights===!0}this.getActiveCubeFace=function(){return b},this.getActiveMipmapLevel=function(){return w},this.getRenderTarget=function(){return T},this.setRenderTarget=function(le,Me=0,Pe=0){T=le,b=Me,w=Pe,le&&ee.get(le).__webglFramebuffer===void 0&&xe.setupRenderTarget(le);let Re=null,ze=!1,at=!1;if(le){const pt=le.texture;(pt.isDataTexture3D||pt.isDataTexture2DArray)&&(at=!0);const Qt=ee.get(le).__webglFramebuffer;le.isWebGLCubeRenderTarget?(Re=Qt[Me],ze=!0):le.isWebGLMultisampleRenderTarget?Re=ee.get(le).__webglMultisampledFramebuffer:Re=Qt,M.copy(le.viewport),k.copy(le.scissor),I=le.scissorTest}else M.copy(F).multiplyScalar(O).floor(),k.copy(J).multiplyScalar(O).floor(),I=K;if(ce.bindFramebuffer(36160,Re)&&de.drawBuffers){let pt=!1;if(le)if(le.isWebGLMultipleRenderTargets){const Qt=le.texture;if(Z.length!==Qt.length||Z[0]!==36064){for(let Pn=0,cn=Qt.length;Pn<cn;Pn++)Z[Pn]=36064+Pn;Z.length=Qt.length,pt=!0}}else(Z.length!==1||Z[0]!==36064)&&(Z[0]=36064,Z.length=1,pt=!0);else(Z.length!==1||Z[0]!==1029)&&(Z[0]=1029,Z.length=1,pt=!0);pt&&(de.isWebGL2?te.drawBuffers(Z):pe.get("WEBGL_draw_buffers").drawBuffersWEBGL(Z))}if(ce.viewport(M),ce.scissor(k),ce.setScissorTest(I),ze){const pt=ee.get(le.texture);te.framebufferTexture2D(36160,36064,34069+Me,pt.__webglTexture,Pe)}else if(at){const pt=ee.get(le.texture),Qt=Me||0;te.framebufferTextureLayer(36160,36064,pt.__webglTexture,Pe||0,Qt)}C=-1},this.readRenderTargetPixels=function(le,Me,Pe,Re,ze,at,it){if(!(le&&le.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let pt=ee.get(le).__webglFramebuffer;if(le.isWebGLCubeRenderTarget&&it!==void 0&&(pt=pt[it]),pt){ce.bindFramebuffer(36160,pt);try{const Qt=le.texture,Pn=Qt.format,cn=Qt.type;if(Pn!==ro&&Ne.convert(Pn)!==te.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const yn=cn===Gp&&(pe.has("EXT_color_buffer_half_float")||de.isWebGL2&&pe.has("EXT_color_buffer_float"));if(cn!==Zc&&Ne.convert(cn)!==te.getParameter(35738)&&!(cn===zc&&(de.isWebGL2||pe.has("OES_texture_float")||pe.has("WEBGL_color_buffer_float")))&&!yn){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}te.checkFramebufferStatus(36160)===36053?Me>=0&&Me<=le.width-Re&&Pe>=0&&Pe<=le.height-ze&&te.readPixels(Me,Pe,Re,ze,Ne.convert(Pn),Ne.convert(cn),at):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{const Qt=T!==null?ee.get(T).__webglFramebuffer:null;ce.bindFramebuffer(36160,Qt)}}},this.copyFramebufferToTexture=function(le,Me,Pe=0){const Re=Math.pow(2,-Pe),ze=Math.floor(Me.image.width*Re),at=Math.floor(Me.image.height*Re);let it=Ne.convert(Me.format);de.isWebGL2&&(it===6407&&(it=32849),it===6408&&(it=32856)),xe.setTexture2D(Me,0),te.copyTexImage2D(3553,Pe,it,le.x,le.y,ze,at,0),ce.unbindTexture()},this.copyTextureToTexture=function(le,Me,Pe,Re=0){const ze=Me.image.width,at=Me.image.height,it=Ne.convert(Pe.format),pt=Ne.convert(Pe.type);xe.setTexture2D(Pe,0),te.pixelStorei(37440,Pe.flipY),te.pixelStorei(37441,Pe.premultiplyAlpha),te.pixelStorei(3317,Pe.unpackAlignment),Me.isDataTexture?te.texSubImage2D(3553,Re,le.x,le.y,ze,at,it,pt,Me.image.data):Me.isCompressedTexture?te.compressedTexSubImage2D(3553,Re,le.x,le.y,Me.mipmaps[0].width,Me.mipmaps[0].height,it,Me.mipmaps[0].data):te.texSubImage2D(3553,Re,le.x,le.y,it,pt,Me.image),Re===0&&Pe.generateMipmaps&&te.generateMipmap(3553),ce.unbindTexture()},this.copyTextureToTexture3D=function(le,Me,Pe,Re,ze=0){if(g.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const at=le.max.x-le.min.x+1,it=le.max.y-le.min.y+1,pt=le.max.z-le.min.z+1,Qt=Ne.convert(Re.format),Pn=Ne.convert(Re.type);let cn;if(Re.isDataTexture3D)xe.setTexture3D(Re,0),cn=32879;else if(Re.isDataTexture2DArray)xe.setTexture2DArray(Re,0),cn=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}te.pixelStorei(37440,Re.flipY),te.pixelStorei(37441,Re.premultiplyAlpha),te.pixelStorei(3317,Re.unpackAlignment);const yn=te.getParameter(3314),tr=te.getParameter(32878),ua=te.getParameter(3316),vn=te.getParameter(3315),ns=te.getParameter(32877),Vn=Pe.isCompressedTexture?Pe.mipmaps[0]:Pe.image;te.pixelStorei(3314,Vn.width),te.pixelStorei(32878,Vn.height),te.pixelStorei(3316,le.min.x),te.pixelStorei(3315,le.min.y),te.pixelStorei(32877,le.min.z),Pe.isDataTexture||Pe.isDataTexture3D?te.texSubImage3D(cn,ze,Me.x,Me.y,Me.z,at,it,pt,Qt,Pn,Vn.data):Pe.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),te.compressedTexSubImage3D(cn,ze,Me.x,Me.y,Me.z,at,it,pt,Qt,Vn.data)):te.texSubImage3D(cn,ze,Me.x,Me.y,Me.z,at,it,pt,Qt,Pn,Vn),te.pixelStorei(3314,yn),te.pixelStorei(32878,tr),te.pixelStorei(3316,ua),te.pixelStorei(3315,vn),te.pixelStorei(32877,ns),ze===0&&Re.generateMipmaps&&te.generateMipmap(cn),ce.unbindTexture()},this.initTexture=function(le){xe.setTexture2D(le,0),ce.unbindTexture()},this.resetState=function(){b=0,w=0,T=null,ce.reset(),qe.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}class _le extends ar{}_le.prototype.isWebGL1Renderer=!0;class lS{constructor(e,n=25e-5){this.name="",this.color=new bt(e),this.density=n}clone(){return new lS(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}lS.prototype.isFogExp2=!0;class cS{constructor(e,n=1,r=1e3){this.name="",this.color=new bt(e),this.near=n,this.far=r}clone(){return new cS(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}cS.prototype.isFog=!0;class uS extends An{constructor(){super(),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const n=super.toJSON(e);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),n}}uS.prototype.isScene=!0;class Om{constructor(e,n){this.array=e,this.stride=n,this.count=e!==void 0?e.length/n:0,this.usage=Hv,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Ns()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,n,r){e*=this.stride,r*=n.stride;for(let i=0,o=this.stride;i<o;i++)this.array[e+i]=n.array[r+i];return this}set(e,n=0){return this.array.set(e,n),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ns()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const n=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(n,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ns()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}Om.prototype.isInterleavedBuffer=!0;const yi=new ge;class Qf{constructor(e,n,r,i=!1){this.name="",this.data=e,this.itemSize=n,this.offset=r,this.normalized=i===!0}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let n=0,r=this.data.count;n<r;n++)yi.x=this.getX(n),yi.y=this.getY(n),yi.z=this.getZ(n),yi.applyMatrix4(e),this.setXYZ(n,yi.x,yi.y,yi.z);return this}applyNormalMatrix(e){for(let n=0,r=this.count;n<r;n++)yi.x=this.getX(n),yi.y=this.getY(n),yi.z=this.getZ(n),yi.applyNormalMatrix(e),this.setXYZ(n,yi.x,yi.y,yi.z);return this}transformDirection(e){for(let n=0,r=this.count;n<r;n++)yi.x=this.getX(n),yi.y=this.getY(n),yi.z=this.getZ(n),yi.transformDirection(e),this.setXYZ(n,yi.x,yi.y,yi.z);return this}setX(e,n){return this.data.array[e*this.data.stride+this.offset]=n,this}setY(e,n){return this.data.array[e*this.data.stride+this.offset+1]=n,this}setZ(e,n){return this.data.array[e*this.data.stride+this.offset+2]=n,this}setW(e,n){return this.data.array[e*this.data.stride+this.offset+3]=n,this}getX(e){return this.data.array[e*this.data.stride+this.offset]}getY(e){return this.data.array[e*this.data.stride+this.offset+1]}getZ(e){return this.data.array[e*this.data.stride+this.offset+2]}getW(e){return this.data.array[e*this.data.stride+this.offset+3]}setXY(e,n,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=n,this.data.array[e+1]=r,this}setXYZ(e,n,r,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=n,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,n,r,i,o){return e=e*this.data.stride+this.offset,this.data.array[e+0]=n,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=o,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const n=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)n.push(this.data.array[i+o])}return new Bn(new this.array.constructor(n),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Qf(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const n=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)n.push(this.data.array[i+o])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:n,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}Qf.prototype.isInterleavedBufferAttribute=!0;class p2 extends So{constructor(e){super(),this.type="SpriteMaterial",this.color=new bt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this}}p2.prototype.isSpriteMaterial=!0;let uy;const sw=new ge,dy=new ge,fy=new ge,hy=new rt,lw=new rt,Tle=new Ut,x_=new ge,cw=new ge,w_=new ge,eY=new rt,Xj=new rt,tY=new rt;class m2 extends An{constructor(e){if(super(),this.type="Sprite",uy===void 0){uy=new Yt;const n=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new Om(n,5);uy.setIndex([0,1,2,0,2,3]),uy.setAttribute("position",new Qf(r,3,0,!1)),uy.setAttribute("uv",new Qf(r,2,3,!1))}this.geometry=uy,this.material=e!==void 0?e:new p2,this.center=new rt(.5,.5)}raycast(e,n){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),dy.setFromMatrixScale(this.matrixWorld),Tle.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),fy.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&dy.multiplyScalar(-fy.z);const r=this.material.rotation;let i,o;r!==0&&(o=Math.cos(r),i=Math.sin(r));const a=this.center;b_(x_.set(-.5,-.5,0),fy,a,dy,i,o),b_(cw.set(.5,-.5,0),fy,a,dy,i,o),b_(w_.set(.5,.5,0),fy,a,dy,i,o),eY.set(0,0),Xj.set(1,0),tY.set(1,1);let s=e.ray.intersectTriangle(x_,cw,w_,!1,sw);if(s===null&&(b_(cw.set(-.5,.5,0),fy,a,dy,i,o),Xj.set(0,1),s=e.ray.intersectTriangle(x_,w_,cw,!1,sw),s===null))return;const l=e.ray.origin.distanceTo(sw);l<e.near||l>e.far||n.push({distance:l,point:sw.clone(),uv:Si.getUV(sw,x_,cw,w_,eY,Xj,tY,new rt),face:null,object:this})}copy(e){return super.copy(e),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}m2.prototype.isSprite=!0;function b_(t,e,n,r,i,o){hy.subVectors(t,n).addScalar(.5).multiply(r),i!==void 0?(lw.x=o*hy.x-i*hy.y,lw.y=i*hy.x+o*hy.y):lw.copy(hy),t.copy(e),t.x+=lw.x,t.y+=lw.y,t.applyMatrix4(Tle)}const S_=new ge,nY=new ge;class Cle extends An{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const n=e.levels;for(let r=0,i=n.length;r<i;r++){const o=n[r];this.addLevel(o.object.clone(),o.distance)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,n=0){n=Math.abs(n);const r=this.levels;let i;for(i=0;i<r.length&&!(n<r[i].distance);i++);return r.splice(i,0,{distance:n,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const n=this.levels;if(n.length>0){let r,i;for(r=1,i=n.length;r<i&&!(e<n[r].distance);r++);return n[r-1].object}return null}raycast(e,n){if(this.levels.length>0){S_.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(S_);this.getObjectForDistance(i).raycast(e,n)}}update(e){const n=this.levels;if(n.length>1){S_.setFromMatrixPosition(e.matrixWorld),nY.setFromMatrixPosition(this.matrixWorld);const r=S_.distanceTo(nY)/e.zoom;n[0].object.visible=!0;let i,o;for(i=1,o=n.length;i<o&&r>=n[i].distance;i++)n[i-1].object.visible=!1,n[i].object.visible=!0;for(this._currentLevel=i-1;i<o;i++)n[i].object.visible=!1}}toJSON(e){const n=super.toJSON(e);this.autoUpdate===!1&&(n.object.autoUpdate=!1),n.object.levels=[];const r=this.levels;for(let i=0,o=r.length;i<o;i++){const a=r[i];n.object.levels.push({object:a.object.uuid,distance:a.distance})}return n}}const rY=new ge,iY=new Kn,oY=new Kn,D9e=new ge,aY=new Ut;class g2 extends Kr{constructor(e,n){super(e,n),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Ut,this.bindMatrixInverse=new Ut}copy(e){return super.copy(e),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,n){this.skeleton=e,n===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),n=this.matrixWorld),this.bindMatrix.copy(n),this.bindMatrixInverse.copy(n).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Kn,n=this.geometry.attributes.skinWeight;for(let r=0,i=n.count;r<i;r++){e.x=n.getX(r),e.y=n.getY(r),e.z=n.getZ(r),e.w=n.getW(r);const o=1/e.manhattanLength();o!==1/0?e.multiplyScalar(o):e.set(1,0,0,0),n.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,n){const r=this.skeleton,i=this.geometry;iY.fromBufferAttribute(i.attributes.skinIndex,e),oY.fromBufferAttribute(i.attributes.skinWeight,e),rY.copy(n).applyMatrix4(this.bindMatrix),n.set(0,0,0);for(let o=0;o<4;o++){const a=oY.getComponent(o);if(a!==0){const s=iY.getComponent(o);aY.multiplyMatrices(r.bones[s].matrixWorld,r.boneInverses[s]),n.addScaledVector(D9e.copy(rY).applyMatrix4(aY),a)}}return n.applyMatrix4(this.bindMatrixInverse)}}g2.prototype.isSkinnedMesh=!0;class y2 extends An{constructor(){super(),this.type="Bone"}}y2.prototype.isBone=!0;class Kp extends Hi{constructor(e=null,n=1,r=1,i,o,a,s,l,c=Fi,u=Fi,f,h){super(null,a,s,l,c,u,i,o,f,h),this.image={data:e,width:n,height:r},this.magFilter=c,this.minFilter=u,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}Kp.prototype.isDataTexture=!0;const sY=new Ut,F9e=new Ut;class v2{constructor(e=[],n=[]){this.uuid=Ns(),this.bones=e.slice(0),this.boneInverses=n,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,n=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),n.length===0)this.calculateInverses();else if(e.length!==n.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new Ut)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,n=this.bones.length;e<n;e++){const r=new Ut;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,n=this.bones.length;e<n;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,n=this.bones.length;e<n;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,n=this.boneInverses,r=this.boneMatrices,i=this.boneTexture;for(let o=0,a=e.length;o<a;o++){const s=e[o]?e[o].matrixWorld:F9e;sY.multiplyMatrices(s,n[o]),sY.toArray(r,o*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new v2(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Qse(e),e=Math.max(e,4);const n=new Float32Array(e*e*4);n.set(this.boneMatrices);const r=new Kp(n,e,e,ro,zc);return this.boneMatrices=n,this.boneTexture=r,this.boneTextureSize=e,this}getBoneByName(e){for(let n=0,r=this.bones.length;n<r;n++){const i=this.bones[n];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,n){this.uuid=e.uuid;for(let r=0,i=e.bones.length;r<i;r++){const o=e.bones[r];let a=n[o];a===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",o),a=new y2),this.bones.push(a),this.boneInverses.push(new Ut().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const n=this.bones,r=this.boneInverses;for(let i=0,o=n.length;i<o;i++){const a=n[i];e.bones.push(a.uuid);const s=r[i];e.boneInverses.push(s.toArray())}return e}}class eh extends Bn{constructor(e,n,r,i=1){typeof r=="number"&&(i=r,r=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),super(e,n,r),this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}eh.prototype.isInstancedBufferAttribute=!0;const lY=new Ut,cY=new Ut,E_=[],uw=new Kr;class H5 extends Kr{constructor(e,n,r){super(e,n),this.instanceMatrix=new eh(new Float32Array(r*16),16),this.instanceColor=null,this.count=r,this.frustumCulled=!1}copy(e){return super.copy(e),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,n){n.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,n){n.fromArray(this.instanceMatrix.array,e*16)}raycast(e,n){const r=this.matrixWorld,i=this.count;if(uw.geometry=this.geometry,uw.material=this.material,uw.material!==void 0)for(let o=0;o<i;o++){this.getMatrixAt(o,lY),cY.multiplyMatrices(r,lY),uw.matrixWorld=cY,uw.raycast(e,E_);for(let a=0,s=E_.length;a<s;a++){const l=E_[a];l.instanceId=o,l.object=this,n.push(l)}E_.length=0}}setColorAt(e,n){this.instanceColor===null&&(this.instanceColor=new eh(new Float32Array(this.instanceMatrix.count*3),3)),n.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,n){n.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}H5.prototype.isInstancedMesh=!0;class Vi extends So{constructor(e){super(),this.type="LineBasicMaterial",this.color=new bt(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this}}Vi.prototype.isLineBasicMaterial=!0;const uY=new ge,dY=new ge,fY=new Ut,Kj=new Md,__=new Ad;class eu extends An{constructor(e=new Yt,n=new Vi){super(),this.type="Line",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(e.index===null){const n=e.attributes.position,r=[0];for(let i=1,o=n.count;i<o;i++)uY.fromBufferAttribute(n,i-1),dY.fromBufferAttribute(n,i),r[i]=r[i-1],r[i]+=uY.distanceTo(dY);e.setAttribute("lineDistance",new Dt(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}raycast(e,n){const r=this.geometry,i=this.matrixWorld,o=e.params.Line.threshold,a=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),__.copy(r.boundingSphere),__.applyMatrix4(i),__.radius+=o,e.ray.intersectsSphere(__)===!1)return;fY.copy(i).invert(),Kj.copy(e.ray).applyMatrix4(fY);const s=o/((this.scale.x+this.scale.y+this.scale.z)/3),l=s*s,c=new ge,u=new ge,f=new ge,h=new ge,p=this.isLineSegments?2:1;if(r.isBufferGeometry){const y=r.index,v=r.attributes.position;if(y!==null){const b=Math.max(0,a.start),w=Math.min(y.count,a.start+a.count);for(let T=b,C=w-1;T<C;T+=p){const P=y.getX(T),M=y.getX(T+1);if(c.fromBufferAttribute(v,P),u.fromBufferAttribute(v,M),Kj.distanceSqToSegment(c,u,h,f)>l)continue;h.applyMatrix4(this.matrixWorld);const I=e.ray.origin.distanceTo(h);I<e.near||I>e.far||n.push({distance:I,point:f.clone().applyMatrix4(this.matrixWorld),index:T,face:null,faceIndex:null,object:this})}}else{const b=Math.max(0,a.start),w=Math.min(v.count,a.start+a.count);for(let T=b,C=w-1;T<C;T+=p){if(c.fromBufferAttribute(v,T),u.fromBufferAttribute(v,T+1),Kj.distanceSqToSegment(c,u,h,f)>l)continue;h.applyMatrix4(this.matrixWorld);const M=e.ray.origin.distanceTo(h);M<e.near||M>e.far||n.push({distance:M,point:f.clone().applyMatrix4(this.matrixWorld),index:T,face:null,faceIndex:null,object:this})}}}else r.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const n=e.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,a=i.length;o<a;o++){const s=i[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=o}}}}else{const n=e.morphTargets;n!==void 0&&n.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}eu.prototype.isLine=!0;const hY=new ge,pY=new ge;class Ja extends eu{constructor(e,n){super(e,n),this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(e.index===null){const n=e.attributes.position,r=[];for(let i=0,o=n.count;i<o;i+=2)hY.fromBufferAttribute(n,i),pY.fromBufferAttribute(n,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+hY.distanceTo(pY);e.setAttribute("lineDistance",new Dt(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}Ja.prototype.isLineSegments=!0;class V5 extends eu{constructor(e,n){super(e,n),this.type="LineLoop"}}V5.prototype.isLineLoop=!0;class Lm extends So{constructor(e){super(),this.type="PointsMaterial",this.color=new bt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this}}Lm.prototype.isPointsMaterial=!0;const mY=new Ut,OD=new Md,T_=new Ad,C_=new ge;class dS extends An{constructor(e=new Yt,n=new Lm){super(),this.type="Points",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}raycast(e,n){const r=this.geometry,i=this.matrixWorld,o=e.params.Points.threshold,a=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),T_.copy(r.boundingSphere),T_.applyMatrix4(i),T_.radius+=o,e.ray.intersectsSphere(T_)===!1)return;mY.copy(i).invert(),OD.copy(e.ray).applyMatrix4(mY);const s=o/((this.scale.x+this.scale.y+this.scale.z)/3),l=s*s;if(r.isBufferGeometry){const c=r.index,f=r.attributes.position;if(c!==null){const h=Math.max(0,a.start),p=Math.min(c.count,a.start+a.count);for(let y=h,g=p;y<g;y++){const v=c.getX(y);C_.fromBufferAttribute(f,v),gY(C_,v,l,i,e,n,this)}}else{const h=Math.max(0,a.start),p=Math.min(f.count,a.start+a.count);for(let y=h,g=p;y<g;y++)C_.fromBufferAttribute(f,y),gY(C_,y,l,i,e,n,this)}}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const n=e.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,a=i.length;o<a;o++){const s=i[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=o}}}}else{const n=e.morphTargets;n!==void 0&&n.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}dS.prototype.isPoints=!0;function gY(t,e,n,r,i,o,a){const s=OD.distanceSqToPoint(t);if(s<n){const l=new ge;OD.closestPointToPoint(t,l),l.applyMatrix4(r);const c=i.ray.origin.distanceTo(l);if(c<i.near||c>i.far)return;o.push({distance:c,distanceToRay:Math.sqrt(s),point:l,index:e,face:null,object:a})}}class Ale extends Hi{constructor(e,n,r,i,o,a,s,l,c){super(e,n,r,i,o,a,s,l,c),this.format=s!==void 0?s:qp,this.minFilter=a!==void 0?a:Xr,this.magFilter=o!==void 0?o:Xr,this.generateMipmaps=!1;const u=this;function f(){u.needsUpdate=!0,e.requestVideoFrameCallback(f)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(f)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}Ale.prototype.isVideoTexture=!0;class W5 extends Hi{constructor(e,n,r,i,o,a,s,l,c,u,f,h){super(null,a,s,l,c,u,i,o,f,h),this.image={width:n,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}W5.prototype.isCompressedTexture=!0;class G5 extends Hi{constructor(e,n,r,i,o,a,s,l,c){super(e,n,r,i,o,a,s,l,c),this.needsUpdate=!0}}G5.prototype.isCanvasTexture=!0;class Mle extends Hi{constructor(e,n,r,i,o,a,s,l,c,u){if(u=u!==void 0?u:Yp,u!==Yp&&u!==$v)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&u===Yp&&(r=o1),r===void 0&&u===$v&&(r=rv),super(null,i,o,a,s,l,u,r,c),this.image={width:e,height:n},this.magFilter=s!==void 0?s:Fi,this.minFilter=l!==void 0?l:Fi,this.flipY=!1,this.generateMipmaps=!1}}Mle.prototype.isDepthTexture=!0;class Gv extends Yt{constructor(e=1,n=8,r=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:n,thetaStart:r,thetaLength:i},n=Math.max(3,n);const o=[],a=[],s=[],l=[],c=new ge,u=new rt;a.push(0,0,0),s.push(0,0,1),l.push(.5,.5);for(let f=0,h=3;f<=n;f++,h+=3){const p=r+f/n*i;c.x=e*Math.cos(p),c.y=e*Math.sin(p),a.push(c.x,c.y,c.z),s.push(0,0,1),u.x=(a[h]/e+1)/2,u.y=(a[h+1]/e+1)/2,l.push(u.x,u.y)}for(let f=1;f<=n;f++)o.push(f,f+1,0);this.setIndex(o),this.setAttribute("position",new Dt(a,3)),this.setAttribute("normal",new Dt(s,3)),this.setAttribute("uv",new Dt(l,2))}static fromJSON(e){return new Gv(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class th extends Yt{constructor(e=1,n=1,r=1,i=8,o=1,a=!1,s=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:n,height:r,radialSegments:i,heightSegments:o,openEnded:a,thetaStart:s,thetaLength:l};const c=this;i=Math.floor(i),o=Math.floor(o);const u=[],f=[],h=[],p=[];let y=0;const g=[],v=r/2;let b=0;w(),a===!1&&(e>0&&T(!0),n>0&&T(!1)),this.setIndex(u),this.setAttribute("position",new Dt(f,3)),this.setAttribute("normal",new Dt(h,3)),this.setAttribute("uv",new Dt(p,2));function w(){const C=new ge,P=new ge;let M=0;const k=(n-e)/r;for(let I=0;I<=o;I++){const U=[],z=I/o,O=z*(n-e)+e;for(let B=0;B<=i;B++){const $=B/i,F=$*l+s,J=Math.sin(F),K=Math.cos(F);P.x=O*J,P.y=-z*r+v,P.z=O*K,f.push(P.x,P.y,P.z),C.set(J,k,K).normalize(),h.push(C.x,C.y,C.z),p.push($,1-z),U.push(y++)}g.push(U)}for(let I=0;I<i;I++)for(let U=0;U<o;U++){const z=g[U][I],O=g[U+1][I],B=g[U+1][I+1],$=g[U][I+1];u.push(z,O,$),u.push(O,B,$),M+=6}c.addGroup(b,M,0),b+=M}function T(C){const P=y,M=new rt,k=new ge;let I=0;const U=C===!0?e:n,z=C===!0?1:-1;for(let B=1;B<=i;B++)f.push(0,v*z,0),h.push(0,z,0),p.push(.5,.5),y++;const O=y;for(let B=0;B<=i;B++){const F=B/i*l+s,J=Math.cos(F),K=Math.sin(F);k.x=U*K,k.y=v*z,k.z=U*J,f.push(k.x,k.y,k.z),h.push(0,z,0),M.x=J*.5+.5,M.y=K*.5*z+.5,p.push(M.x,M.y),y++}for(let B=0;B<i;B++){const $=P+B,F=O+B;C===!0?u.push(F,F+1,$):u.push(F+1,F,$),I+=3}c.addGroup(b,I,C===!0?1:2),b+=I}}static fromJSON(e){return new th(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class qv extends th{constructor(e=1,n=1,r=8,i=1,o=!1,a=0,s=Math.PI*2){super(0,e,n,r,i,o,a,s),this.type="ConeGeometry",this.parameters={radius:e,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:a,thetaLength:s}}static fromJSON(e){return new qv(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class tu extends Yt{constructor(e=[],n=[],r=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:n,radius:r,detail:i};const o=[],a=[];s(i),c(r),u(),this.setAttribute("position",new Dt(o,3)),this.setAttribute("normal",new Dt(o.slice(),3)),this.setAttribute("uv",new Dt(a,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function s(w){const T=new ge,C=new ge,P=new ge;for(let M=0;M<n.length;M+=3)p(n[M+0],T),p(n[M+1],C),p(n[M+2],P),l(T,C,P,w)}function l(w,T,C,P){const M=P+1,k=[];for(let I=0;I<=M;I++){k[I]=[];const U=w.clone().lerp(C,I/M),z=T.clone().lerp(C,I/M),O=M-I;for(let B=0;B<=O;B++)B===0&&I===M?k[I][B]=U:k[I][B]=U.clone().lerp(z,B/O)}for(let I=0;I<M;I++)for(let U=0;U<2*(M-I)-1;U++){const z=Math.floor(U/2);U%2===0?(h(k[I][z+1]),h(k[I+1][z]),h(k[I][z])):(h(k[I][z+1]),h(k[I+1][z+1]),h(k[I+1][z]))}}function c(w){const T=new ge;for(let C=0;C<o.length;C+=3)T.x=o[C+0],T.y=o[C+1],T.z=o[C+2],T.normalize().multiplyScalar(w),o[C+0]=T.x,o[C+1]=T.y,o[C+2]=T.z}function u(){const w=new ge;for(let T=0;T<o.length;T+=3){w.x=o[T+0],w.y=o[T+1],w.z=o[T+2];const C=v(w)/2/Math.PI+.5,P=b(w)/Math.PI+.5;a.push(C,1-P)}y(),f()}function f(){for(let w=0;w<a.length;w+=6){const T=a[w+0],C=a[w+2],P=a[w+4],M=Math.max(T,C,P),k=Math.min(T,C,P);M>.9&&k<.1&&(T<.2&&(a[w+0]+=1),C<.2&&(a[w+2]+=1),P<.2&&(a[w+4]+=1))}}function h(w){o.push(w.x,w.y,w.z)}function p(w,T){const C=w*3;T.x=e[C+0],T.y=e[C+1],T.z=e[C+2]}function y(){const w=new ge,T=new ge,C=new ge,P=new ge,M=new rt,k=new rt,I=new rt;for(let U=0,z=0;U<o.length;U+=9,z+=6){w.set(o[U+0],o[U+1],o[U+2]),T.set(o[U+3],o[U+4],o[U+5]),C.set(o[U+6],o[U+7],o[U+8]),M.set(a[z+0],a[z+1]),k.set(a[z+2],a[z+3]),I.set(a[z+4],a[z+5]),P.copy(w).add(T).add(C).divideScalar(3);const O=v(P);g(M,z+0,w,O),g(k,z+2,T,O),g(I,z+4,C,O)}}function g(w,T,C,P){P<0&&w.x===1&&(a[T]=w.x-1),C.x===0&&C.z===0&&(a[T]=P/2/Math.PI+.5)}function v(w){return Math.atan2(w.z,-w.x)}function b(w){return Math.atan2(-w.y,Math.sqrt(w.x*w.x+w.z*w.z))}}static fromJSON(e){return new tu(e.vertices,e.indices,e.radius,e.details)}}class Yv extends tu{constructor(e=1,n=0){const r=(1+Math.sqrt(5))/2,i=1/r,o=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i],a=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(o,a,e,n),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new Yv(e.radius,e.detail)}}const A_=new ge,M_=new ge,Jj=new ge,P_=new Si;class q5 extends Yt{constructor(e=null,n=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:n},e!==null){const i=Math.pow(10,4),o=Math.cos(Xp*n),a=e.getIndex(),s=e.getAttribute("position"),l=a?a.count:s.count,c=[0,0,0],u=["a","b","c"],f=new Array(3),h={},p=[];for(let y=0;y<l;y+=3){a?(c[0]=a.getX(y),c[1]=a.getX(y+1),c[2]=a.getX(y+2)):(c[0]=y,c[1]=y+1,c[2]=y+2);const{a:g,b:v,c:b}=P_;if(g.fromBufferAttribute(s,c[0]),v.fromBufferAttribute(s,c[1]),b.fromBufferAttribute(s,c[2]),P_.getNormal(Jj),f[0]=`${Math.round(g.x*i)},${Math.round(g.y*i)},${Math.round(g.z*i)}`,f[1]=`${Math.round(v.x*i)},${Math.round(v.y*i)},${Math.round(v.z*i)}`,f[2]=`${Math.round(b.x*i)},${Math.round(b.y*i)},${Math.round(b.z*i)}`,!(f[0]===f[1]||f[1]===f[2]||f[2]===f[0]))for(let w=0;w<3;w++){const T=(w+1)%3,C=f[w],P=f[T],M=P_[u[w]],k=P_[u[T]],I=`${C}_${P}`,U=`${P}_${C}`;U in h&&h[U]?(Jj.dot(h[U].normal)<=o&&(p.push(M.x,M.y,M.z),p.push(k.x,k.y,k.z)),h[U]=null):I in h||(h[I]={index0:c[w],index1:c[T],normal:Jj.clone()})}}for(const y in h)if(h[y]){const{index0:g,index1:v}=h[y];A_.fromBufferAttribute(s,g),M_.fromBufferAttribute(s,v),p.push(A_.x,A_.y,A_.z),p.push(M_.x,M_.y,M_.z)}this.setAttribute("position",new Dt(p,3))}}}class Is{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,n){const r=this.getUtoTmapping(e);return this.getPoint(r,n)}getPoints(e=5){const n=[];for(let r=0;r<=e;r++)n.push(this.getPoint(r/e));return n}getSpacedPoints(e=5){const n=[];for(let r=0;r<=e;r++)n.push(this.getPointAt(r/e));return n}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const n=[];let r,i=this.getPoint(0),o=0;n.push(0);for(let a=1;a<=e;a++)r=this.getPoint(a/e),o+=r.distanceTo(i),n.push(o),i=r;return this.cacheArcLengths=n,n}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,n){const r=this.getLengths();let i=0;const o=r.length;let a;n?a=n:a=e*r[o-1];let s=0,l=o-1,c;for(;s<=l;)if(i=Math.floor(s+(l-s)/2),c=r[i]-a,c<0)s=i+1;else if(c>0)l=i-1;else{l=i;break}if(i=l,r[i]===a)return i/(o-1);const u=r[i],h=r[i+1]-u,p=(a-u)/h;return(i+p)/(o-1)}getTangent(e,n){let i=e-1e-4,o=e+1e-4;i<0&&(i=0),o>1&&(o=1);const a=this.getPoint(i),s=this.getPoint(o),l=n||(a.isVector2?new rt:new ge);return l.copy(s).sub(a).normalize(),l}getTangentAt(e,n){const r=this.getUtoTmapping(e);return this.getTangent(r,n)}computeFrenetFrames(e,n){const r=new ge,i=[],o=[],a=[],s=new ge,l=new Ut;for(let p=0;p<=e;p++){const y=p/e;i[p]=this.getTangentAt(y,new ge)}o[0]=new ge,a[0]=new ge;let c=Number.MAX_VALUE;const u=Math.abs(i[0].x),f=Math.abs(i[0].y),h=Math.abs(i[0].z);u<=c&&(c=u,r.set(1,0,0)),f<=c&&(c=f,r.set(0,1,0)),h<=c&&r.set(0,0,1),s.crossVectors(i[0],r).normalize(),o[0].crossVectors(i[0],s),a[0].crossVectors(i[0],o[0]);for(let p=1;p<=e;p++){if(o[p]=o[p-1].clone(),a[p]=a[p-1].clone(),s.crossVectors(i[p-1],i[p]),s.length()>Number.EPSILON){s.normalize();const y=Math.acos(Bo(i[p-1].dot(i[p]),-1,1));o[p].applyMatrix4(l.makeRotationAxis(s,y))}a[p].crossVectors(i[p],o[p])}if(n===!0){let p=Math.acos(Bo(o[0].dot(o[e]),-1,1));p/=e,i[0].dot(s.crossVectors(o[0],o[e]))>0&&(p=-p);for(let y=1;y<=e;y++)o[y].applyMatrix4(l.makeRotationAxis(i[y],p*y)),a[y].crossVectors(i[y],o[y])}return{tangents:i,normals:o,binormals:a}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class fS extends Is{constructor(e=0,n=0,r=1,i=1,o=0,a=Math.PI*2,s=!1,l=0){super(),this.type="EllipseCurve",this.aX=e,this.aY=n,this.xRadius=r,this.yRadius=i,this.aStartAngle=o,this.aEndAngle=a,this.aClockwise=s,this.aRotation=l}getPoint(e,n){const r=n||new rt,i=Math.PI*2;let o=this.aEndAngle-this.aStartAngle;const a=Math.abs(o)<Number.EPSILON;for(;o<0;)o+=i;for(;o>i;)o-=i;o<Number.EPSILON&&(a?o=0:o=i),this.aClockwise===!0&&!a&&(o===i?o=-i:o=o-i);const s=this.aStartAngle+e*o;let l=this.aX+this.xRadius*Math.cos(s),c=this.aY+this.yRadius*Math.sin(s);if(this.aRotation!==0){const u=Math.cos(this.aRotation),f=Math.sin(this.aRotation),h=l-this.aX,p=c-this.aY;l=h*u-p*f+this.aX,c=h*f+p*u+this.aY}return r.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}fS.prototype.isEllipseCurve=!0;class Y5 extends fS{constructor(e,n,r,i,o,a){super(e,n,r,r,i,o,a),this.type="ArcCurve"}}Y5.prototype.isArcCurve=!0;function X5(){let t=0,e=0,n=0,r=0;function i(o,a,s,l){t=o,e=s,n=-3*o+3*a-2*s-l,r=2*o-2*a+s+l}return{initCatmullRom:function(o,a,s,l,c){i(a,s,c*(s-o),c*(l-a))},initNonuniformCatmullRom:function(o,a,s,l,c,u,f){let h=(a-o)/c-(s-o)/(c+u)+(s-a)/u,p=(s-a)/u-(l-a)/(u+f)+(l-s)/f;h*=u,p*=u,i(a,s,h,p)},calc:function(o){const a=o*o,s=a*o;return t+e*o+n*a+r*s}}}const k_=new ge,Zj=new X5,Qj=new X5,eI=new X5;class K5 extends Is{constructor(e=[],n=!1,r="centripetal",i=.5){super(),this.type="CatmullRomCurve3",this.points=e,this.closed=n,this.curveType=r,this.tension=i}getPoint(e,n=new ge){const r=n,i=this.points,o=i.length,a=(o-(this.closed?0:1))*e;let s=Math.floor(a),l=a-s;this.closed?s+=s>0?0:(Math.floor(Math.abs(s)/o)+1)*o:l===0&&s===o-1&&(s=o-2,l=1);let c,u;this.closed||s>0?c=i[(s-1)%o]:(k_.subVectors(i[0],i[1]).add(i[0]),c=k_);const f=i[s%o],h=i[(s+1)%o];if(this.closed||s+2<o?u=i[(s+2)%o]:(k_.subVectors(i[o-1],i[o-2]).add(i[o-1]),u=k_),this.curveType==="centripetal"||this.curveType==="chordal"){const p=this.curveType==="chordal"?.5:.25;let y=Math.pow(c.distanceToSquared(f),p),g=Math.pow(f.distanceToSquared(h),p),v=Math.pow(h.distanceToSquared(u),p);g<1e-4&&(g=1),y<1e-4&&(y=g),v<1e-4&&(v=g),Zj.initNonuniformCatmullRom(c.x,f.x,h.x,u.x,y,g,v),Qj.initNonuniformCatmullRom(c.y,f.y,h.y,u.y,y,g,v),eI.initNonuniformCatmullRom(c.z,f.z,h.z,u.z,y,g,v)}else this.curveType==="catmullrom"&&(Zj.initCatmullRom(c.x,f.x,h.x,u.x,this.tension),Qj.initCatmullRom(c.y,f.y,h.y,u.y,this.tension),eI.initCatmullRom(c.z,f.z,h.z,u.z,this.tension));return r.set(Zj.calc(l),Qj.calc(l),eI.calc(l)),r}copy(e){super.copy(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,r=this.points.length;n<r;n++){const i=this.points[n];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(new ge().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}K5.prototype.isCatmullRomCurve3=!0;function yY(t,e,n,r,i){const o=(r-e)*.5,a=(i-n)*.5,s=t*t,l=t*s;return(2*n-2*r+o+a)*l+(-3*n+3*r-2*o-a)*s+o*t+n}function z9e(t,e){const n=1-t;return n*n*e}function U9e(t,e){return 2*(1-t)*t*e}function B9e(t,e){return t*t*e}function Yw(t,e,n,r){return z9e(t,e)+U9e(t,n)+B9e(t,r)}function $9e(t,e){const n=1-t;return n*n*n*e}function H9e(t,e){const n=1-t;return 3*n*n*t*e}function V9e(t,e){return 3*(1-t)*t*t*e}function W9e(t,e){return t*t*t*e}function Xw(t,e,n,r,i){return $9e(t,e)+H9e(t,n)+V9e(t,r)+W9e(t,i)}class x2 extends Is{constructor(e=new rt,n=new rt,r=new rt,i=new rt){super(),this.type="CubicBezierCurve",this.v0=e,this.v1=n,this.v2=r,this.v3=i}getPoint(e,n=new rt){const r=n,i=this.v0,o=this.v1,a=this.v2,s=this.v3;return r.set(Xw(e,i.x,o.x,a.x,s.x),Xw(e,i.y,o.y,a.y,s.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}x2.prototype.isCubicBezierCurve=!0;class J5 extends Is{constructor(e=new ge,n=new ge,r=new ge,i=new ge){super(),this.type="CubicBezierCurve3",this.v0=e,this.v1=n,this.v2=r,this.v3=i}getPoint(e,n=new ge){const r=n,i=this.v0,o=this.v1,a=this.v2,s=this.v3;return r.set(Xw(e,i.x,o.x,a.x,s.x),Xw(e,i.y,o.y,a.y,s.y),Xw(e,i.z,o.z,a.z,s.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}J5.prototype.isCubicBezierCurve3=!0;class hS extends Is{constructor(e=new rt,n=new rt){super(),this.type="LineCurve",this.v1=e,this.v2=n}getPoint(e,n=new rt){const r=n;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n){const r=n||new rt;return r.copy(this.v2).sub(this.v1).normalize(),r}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}hS.prototype.isLineCurve=!0;class Ple extends Is{constructor(e=new ge,n=new ge){super(),this.type="LineCurve3",this.isLineCurve3=!0,this.v1=e,this.v2=n}getPoint(e,n=new ge){const r=n;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,n){return this.getPoint(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class w2 extends Is{constructor(e=new rt,n=new rt,r=new rt){super(),this.type="QuadraticBezierCurve",this.v0=e,this.v1=n,this.v2=r}getPoint(e,n=new rt){const r=n,i=this.v0,o=this.v1,a=this.v2;return r.set(Yw(e,i.x,o.x,a.x),Yw(e,i.y,o.y,a.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}w2.prototype.isQuadraticBezierCurve=!0;class pS extends Is{constructor(e=new ge,n=new ge,r=new ge){super(),this.type="QuadraticBezierCurve3",this.v0=e,this.v1=n,this.v2=r}getPoint(e,n=new ge){const r=n,i=this.v0,o=this.v1,a=this.v2;return r.set(Yw(e,i.x,o.x,a.x),Yw(e,i.y,o.y,a.y),Yw(e,i.z,o.z,a.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}pS.prototype.isQuadraticBezierCurve3=!0;class b2 extends Is{constructor(e=[]){super(),this.type="SplineCurve",this.points=e}getPoint(e,n=new rt){const r=n,i=this.points,o=(i.length-1)*e,a=Math.floor(o),s=o-a,l=i[a===0?a:a-1],c=i[a],u=i[a>i.length-2?i.length-1:a+1],f=i[a>i.length-3?i.length-1:a+2];return r.set(yY(s,l.x,c.x,u.x,f.x),yY(s,l.y,c.y,u.y,f.y)),r}copy(e){super.copy(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,r=this.points.length;n<r;n++){const i=this.points[n];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(new rt().fromArray(i))}return this}}b2.prototype.isSplineCurve=!0;var Z5=Object.freeze({__proto__:null,ArcCurve:Y5,CatmullRomCurve3:K5,CubicBezierCurve:x2,CubicBezierCurve3:J5,EllipseCurve:fS,LineCurve:hS,LineCurve3:Ple,QuadraticBezierCurve:w2,QuadraticBezierCurve3:pS,SplineCurve:b2});class kle extends Is{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),n=this.curves[this.curves.length-1].getPoint(1);e.equals(n)||this.curves.push(new hS(n,e))}getPoint(e,n){const r=e*this.getLength(),i=this.getCurveLengths();let o=0;for(;o<i.length;){if(i[o]>=r){const a=i[o]-r,s=this.curves[o],l=s.getLength(),c=l===0?0:1-a/l;return s.getPointAt(c,n)}o++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let n=0;for(let r=0,i=this.curves.length;r<i;r++)n+=this.curves[r].getLength(),e.push(n);return this.cacheLengths=e,e}getSpacedPoints(e=40){const n=[];for(let r=0;r<=e;r++)n.push(this.getPoint(r/e));return this.autoClose&&n.push(n[0]),n}getPoints(e=12){const n=[];let r;for(let i=0,o=this.curves;i<o.length;i++){const a=o[i],s=a&&a.isEllipseCurve?e*2:a&&(a.isLineCurve||a.isLineCurve3)?1:a&&a.isSplineCurve?e*a.points.length:e,l=a.getPoints(s);for(let c=0;c<l.length;c++){const u=l[c];r&&r.equals(u)||(n.push(u),r=u)}}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}copy(e){super.copy(e),this.curves=[];for(let n=0,r=e.curves.length;n<r;n++){const i=e.curves[n];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let n=0,r=this.curves.length;n<r;n++){const i=this.curves[n];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let n=0,r=e.curves.length;n<r;n++){const i=e.curves[n];this.curves.push(new Z5[i.type]().fromJSON(i))}return this}}class u1 extends kle{constructor(e){super(),this.type="Path",this.currentPoint=new rt,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let n=1,r=e.length;n<r;n++)this.lineTo(e[n].x,e[n].y);return this}moveTo(e,n){return this.currentPoint.set(e,n),this}lineTo(e,n){const r=new hS(this.currentPoint.clone(),new rt(e,n));return this.curves.push(r),this.currentPoint.set(e,n),this}quadraticCurveTo(e,n,r,i){const o=new w2(this.currentPoint.clone(),new rt(e,n),new rt(r,i));return this.curves.push(o),this.currentPoint.set(r,i),this}bezierCurveTo(e,n,r,i,o,a){const s=new x2(this.currentPoint.clone(),new rt(e,n),new rt(r,i),new rt(o,a));return this.curves.push(s),this.currentPoint.set(o,a),this}splineThru(e){const n=[this.currentPoint.clone()].concat(e),r=new b2(n);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,n,r,i,o,a){const s=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+s,n+l,r,i,o,a),this}absarc(e,n,r,i,o,a){return this.absellipse(e,n,r,r,i,o,a),this}ellipse(e,n,r,i,o,a,s,l){const c=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+c,n+u,r,i,o,a,s,l),this}absellipse(e,n,r,i,o,a,s,l){const c=new fS(e,n,r,i,o,a,s,l);if(this.curves.length>0){const f=c.getPoint(0);f.equals(this.currentPoint)||this.lineTo(f.x,f.y)}this.curves.push(c);const u=c.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Gc extends u1{constructor(e){super(e),this.uuid=Ns(),this.type="Shape",this.holes=[]}getPointsHoles(e){const n=[];for(let r=0,i=this.holes.length;r<i;r++)n[r]=this.holes[r].getPoints(e);return n}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let n=0,r=e.holes.length;n<r;n++){const i=e.holes[n];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let n=0,r=this.holes.length;n<r;n++){const i=this.holes[n];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let n=0,r=e.holes.length;n<r;n++){const i=e.holes[n];this.holes.push(new u1().fromJSON(i))}return this}}const G9e={triangulate:function(t,e,n=2){const r=e&&e.length,i=r?e[0]*n:t.length;let o=Nle(t,0,i,n,!0);const a=[];if(!o||o.next===o.prev)return a;let s,l,c,u,f,h,p;if(r&&(o=J9e(t,e,o,n)),t.length>80*n){s=c=t[0],l=u=t[1];for(let y=n;y<i;y+=n)f=t[y],h=t[y+1],f<s&&(s=f),h<l&&(l=h),f>c&&(c=f),h>u&&(u=h);p=Math.max(c-s,u-l),p=p!==0?1/p:0}return d1(o,a,n,s,l,p),a}};function Nle(t,e,n,r,i){let o,a;if(i===l7e(t,e,n,r)>0)for(o=e;o<n;o+=r)a=vY(o,t[o],t[o+1],a);else for(o=n-r;o>=e;o-=r)a=vY(o,t[o],t[o+1],a);return a&&S2(a,a.next)&&(h1(a),a=a.next),a}function nh(t,e){if(!t)return t;e||(e=t);let n=t,r;do if(r=!1,!n.steiner&&(S2(n,n.next)||Yr(n.prev,n,n.next)===0)){if(h1(n),n=e=n.prev,n===n.next)break;r=!0}else n=n.next;while(r||n!==e);return e}function d1(t,e,n,r,i,o,a){if(!t)return;!a&&o&&n7e(t,r,i,o);let s=t,l,c;for(;t.prev!==t.next;){if(l=t.prev,c=t.next,o?Y9e(t,r,i,o):q9e(t)){e.push(l.i/n),e.push(t.i/n),e.push(c.i/n),h1(t),t=c.next,s=c.next;continue}if(t=c,t===s){a?a===1?(t=X9e(nh(t),e,n),d1(t,e,n,r,i,o,2)):a===2&&K9e(t,e,n,r,i,o):d1(nh(t),e,n,r,i,o,1);break}}}function q9e(t){const e=t.prev,n=t,r=t.next;if(Yr(e,n,r)>=0)return!1;let i=t.next.next;for(;i!==t.prev;){if(Uy(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&Yr(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function Y9e(t,e,n,r){const i=t.prev,o=t,a=t.next;if(Yr(i,o,a)>=0)return!1;const s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,l=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,c=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,u=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,f=LD(s,l,e,n,r),h=LD(c,u,e,n,r);let p=t.prevZ,y=t.nextZ;for(;p&&p.z>=f&&y&&y.z<=h;){if(p!==t.prev&&p!==t.next&&Uy(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&Yr(p.prev,p,p.next)>=0||(p=p.prevZ,y!==t.prev&&y!==t.next&&Uy(i.x,i.y,o.x,o.y,a.x,a.y,y.x,y.y)&&Yr(y.prev,y,y.next)>=0))return!1;y=y.nextZ}for(;p&&p.z>=f;){if(p!==t.prev&&p!==t.next&&Uy(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&Yr(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;y&&y.z<=h;){if(y!==t.prev&&y!==t.next&&Uy(i.x,i.y,o.x,o.y,a.x,a.y,y.x,y.y)&&Yr(y.prev,y,y.next)>=0)return!1;y=y.nextZ}return!0}function X9e(t,e,n){let r=t;do{const i=r.prev,o=r.next.next;!S2(i,o)&&Rle(i,r,r.next,o)&&f1(i,o)&&f1(o,i)&&(e.push(i.i/n),e.push(r.i/n),e.push(o.i/n),h1(r),h1(r.next),r=t=o),r=r.next}while(r!==t);return nh(r)}function K9e(t,e,n,r,i,o){let a=t;do{let s=a.next.next;for(;s!==a.prev;){if(a.i!==s.i&&o7e(a,s)){let l=jle(a,s);a=nh(a,a.next),l=nh(l,l.next),d1(a,e,n,r,i,o),d1(l,e,n,r,i,o);return}s=s.next}a=a.next}while(a!==t)}function J9e(t,e,n,r){const i=[];let o,a,s,l,c;for(o=0,a=e.length;o<a;o++)s=e[o]*r,l=o<a-1?e[o+1]*r:t.length,c=Nle(t,s,l,r,!1),c===c.next&&(c.steiner=!0),i.push(i7e(c));for(i.sort(Z9e),o=0;o<i.length;o++)Q9e(i[o],n),n=nh(n,n.next);return n}function Z9e(t,e){return t.x-e.x}function Q9e(t,e){if(e=e7e(t,e),e){const n=jle(e,t);nh(e,e.next),nh(n,n.next)}}function e7e(t,e){let n=e;const r=t.x,i=t.y;let o=-1/0,a;do{if(i<=n.y&&i>=n.next.y&&n.next.y!==n.y){const h=n.x+(i-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(h<=r&&h>o){if(o=h,h===r){if(i===n.y)return n;if(i===n.next.y)return n.next}a=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!a)return null;if(r===o)return a;const s=a,l=a.x,c=a.y;let u=1/0,f;n=a;do r>=n.x&&n.x>=l&&r!==n.x&&Uy(i<c?r:o,i,l,c,i<c?o:r,i,n.x,n.y)&&(f=Math.abs(i-n.y)/(r-n.x),f1(n,t)&&(f<u||f===u&&(n.x>a.x||n.x===a.x&&t7e(a,n)))&&(a=n,u=f)),n=n.next;while(n!==s);return a}function t7e(t,e){return Yr(t.prev,t,e.prev)<0&&Yr(e.next,t,t.next)<0}function n7e(t,e,n,r){let i=t;do i.z===null&&(i.z=LD(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,r7e(i)}function r7e(t){let e,n,r,i,o,a,s,l,c=1;do{for(n=t,t=null,o=null,a=0;n;){for(a++,r=n,s=0,e=0;e<c&&(s++,r=r.nextZ,!!r);e++);for(l=c;s>0||l>0&&r;)s!==0&&(l===0||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,l--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,c*=2}while(a>1);return t}function LD(t,e,n,r,i){return t=32767*(t-n)*i,e=32767*(e-r)*i,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function i7e(t){let e=t,n=t;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==t);return n}function Uy(t,e,n,r,i,o,a,s){return(i-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(r-s)-(n-a)*(e-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function o7e(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!a7e(t,e)&&(f1(t,e)&&f1(e,t)&&s7e(t,e)&&(Yr(t.prev,t,e.prev)||Yr(t,e.prev,e))||S2(t,e)&&Yr(t.prev,t,t.next)>0&&Yr(e.prev,e,e.next)>0)}function Yr(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function S2(t,e){return t.x===e.x&&t.y===e.y}function Rle(t,e,n,r){const i=R_(Yr(t,e,n)),o=R_(Yr(t,e,r)),a=R_(Yr(n,r,t)),s=R_(Yr(n,r,e));return!!(i!==o&&a!==s||i===0&&N_(t,n,e)||o===0&&N_(t,r,e)||a===0&&N_(n,t,r)||s===0&&N_(n,e,r))}function N_(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function R_(t){return t>0?1:t<0?-1:0}function a7e(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&Rle(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function f1(t,e){return Yr(t.prev,t,t.next)<0?Yr(t,e,t.next)>=0&&Yr(t,t.prev,e)>=0:Yr(t,e,t.prev)<0||Yr(t,t.next,e)<0}function s7e(t,e){let n=t,r=!1;const i=(t.x+e.x)/2,o=(t.y+e.y)/2;do n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next;while(n!==t);return r}function jle(t,e){const n=new DD(t.i,t.x,t.y),r=new DD(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function vY(t,e,n,r){const i=new DD(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function h1(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function DD(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function l7e(t,e,n,r){let i=0;for(let o=e,a=n-r;o<n;o+=r)i+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return i}class qc{static area(e){const n=e.length;let r=0;for(let i=n-1,o=0;o<n;i=o++)r+=e[i].x*e[o].y-e[o].x*e[i].y;return r*.5}static isClockWise(e){return qc.area(e)<0}static triangulateShape(e,n){const r=[],i=[],o=[];xY(e),wY(r,e);let a=e.length;n.forEach(xY);for(let l=0;l<n.length;l++)i.push(a),a+=n[l].length,wY(r,n[l]);const s=G9e.triangulate(r,i);for(let l=0;l<s.length;l+=3)o.push(s.slice(l,l+3));return o}}function xY(t){const e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function wY(t,e){for(let n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}class nu extends Yt{constructor(e=new Gc([new rt(.5,.5),new rt(-.5,.5),new rt(-.5,-.5),new rt(.5,-.5)]),n={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:n},e=Array.isArray(e)?e:[e];const r=this,i=[],o=[];for(let s=0,l=e.length;s<l;s++){const c=e[s];a(c)}this.setAttribute("position",new Dt(i,3)),this.setAttribute("uv",new Dt(o,2)),this.computeVertexNormals();function a(s){const l=[],c=n.curveSegments!==void 0?n.curveSegments:12,u=n.steps!==void 0?n.steps:1;let f=n.depth!==void 0?n.depth:1,h=n.bevelEnabled!==void 0?n.bevelEnabled:!0,p=n.bevelThickness!==void 0?n.bevelThickness:.2,y=n.bevelSize!==void 0?n.bevelSize:p-.1,g=n.bevelOffset!==void 0?n.bevelOffset:0,v=n.bevelSegments!==void 0?n.bevelSegments:3;const b=n.extrudePath,w=n.UVGenerator!==void 0?n.UVGenerator:c7e;n.amount!==void 0&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),f=n.amount);let T,C=!1,P,M,k,I;b&&(T=b.getSpacedPoints(u),C=!0,h=!1,P=b.computeFrenetFrames(u,!1),M=new ge,k=new ge,I=new ge),h||(v=0,p=0,y=0,g=0);const U=s.extractPoints(c);let z=U.shape;const O=U.holes;if(!qc.isClockWise(z)){z=z.reverse();for(let ee=0,xe=O.length;ee<xe;ee++){const be=O[ee];qc.isClockWise(be)&&(O[ee]=be.reverse())}}const $=qc.triangulateShape(z,O),F=z;for(let ee=0,xe=O.length;ee<xe;ee++){const be=O[ee];z=z.concat(be)}function J(ee,xe,be){return xe||console.error("THREE.ExtrudeGeometry: vec does not exist"),xe.clone().multiplyScalar(be).add(ee)}const K=z.length,Z=$.length;function H(ee,xe,be){let Ae,Ce,oe;const ae=ee.x-xe.x,Se=ee.y-xe.y,me=be.x-ee.x,ye=be.y-ee.y,Ie=ae*ae+Se*Se,De=ae*ye-Se*me;if(Math.abs(De)>Number.EPSILON){const Ue=Math.sqrt(Ie),$e=Math.sqrt(me*me+ye*ye),we=xe.x-Se/Ue,fe=xe.y+ae/Ue,ke=be.x-ye/$e,Ne=be.y+me/$e,qe=((ke-we)*ye-(Ne-fe)*me)/(ae*ye-Se*me);Ae=we+ae*qe-ee.x,Ce=fe+Se*qe-ee.y;const tt=Ae*Ae+Ce*Ce;if(tt<=2)return new rt(Ae,Ce);oe=Math.sqrt(tt/2)}else{let Ue=!1;ae>Number.EPSILON?me>Number.EPSILON&&(Ue=!0):ae<-Number.EPSILON?me<-Number.EPSILON&&(Ue=!0):Math.sign(Se)===Math.sign(ye)&&(Ue=!0),Ue?(Ae=-Se,Ce=ae,oe=Math.sqrt(Ie)):(Ae=ae,Ce=Se,oe=Math.sqrt(Ie/2))}return new rt(Ae/oe,Ce/oe)}const Y=[];for(let ee=0,xe=F.length,be=xe-1,Ae=ee+1;ee<xe;ee++,be++,Ae++)be===xe&&(be=0),Ae===xe&&(Ae=0),Y[ee]=H(F[ee],F[be],F[Ae]);const L=[];let N,V=Y.concat();for(let ee=0,xe=O.length;ee<xe;ee++){const be=O[ee];N=[];for(let Ae=0,Ce=be.length,oe=Ce-1,ae=Ae+1;Ae<Ce;Ae++,oe++,ae++)oe===Ce&&(oe=0),ae===Ce&&(ae=0),N[Ae]=H(be[Ae],be[oe],be[ae]);L.push(N),V=V.concat(N)}for(let ee=0;ee<v;ee++){const xe=ee/v,be=p*Math.cos(xe*Math.PI/2),Ae=y*Math.sin(xe*Math.PI/2)+g;for(let Ce=0,oe=F.length;Ce<oe;Ce++){const ae=J(F[Ce],Y[Ce],Ae);ie(ae.x,ae.y,-be)}for(let Ce=0,oe=O.length;Ce<oe;Ce++){const ae=O[Ce];N=L[Ce];for(let Se=0,me=ae.length;Se<me;Se++){const ye=J(ae[Se],N[Se],Ae);ie(ye.x,ye.y,-be)}}}const W=y+g;for(let ee=0;ee<K;ee++){const xe=h?J(z[ee],V[ee],W):z[ee];C?(k.copy(P.normals[0]).multiplyScalar(xe.x),M.copy(P.binormals[0]).multiplyScalar(xe.y),I.copy(T[0]).add(k).add(M),ie(I.x,I.y,I.z)):ie(xe.x,xe.y,0)}for(let ee=1;ee<=u;ee++)for(let xe=0;xe<K;xe++){const be=h?J(z[xe],V[xe],W):z[xe];C?(k.copy(P.normals[ee]).multiplyScalar(be.x),M.copy(P.binormals[ee]).multiplyScalar(be.y),I.copy(T[ee]).add(k).add(M),ie(I.x,I.y,I.z)):ie(be.x,be.y,f/u*ee)}for(let ee=v-1;ee>=0;ee--){const xe=ee/v,be=p*Math.cos(xe*Math.PI/2),Ae=y*Math.sin(xe*Math.PI/2)+g;for(let Ce=0,oe=F.length;Ce<oe;Ce++){const ae=J(F[Ce],Y[Ce],Ae);ie(ae.x,ae.y,f+be)}for(let Ce=0,oe=O.length;Ce<oe;Ce++){const ae=O[Ce];N=L[Ce];for(let Se=0,me=ae.length;Se<me;Se++){const ye=J(ae[Se],N[Se],Ae);C?ie(ye.x,ye.y+T[u-1].y,T[u-1].x+be):ie(ye.x,ye.y,f+be)}}}ne(),se();function ne(){const ee=i.length/3;if(h){let xe=0,be=K*xe;for(let Ae=0;Ae<Z;Ae++){const Ce=$[Ae];pe(Ce[2]+be,Ce[1]+be,Ce[0]+be)}xe=u+v*2,be=K*xe;for(let Ae=0;Ae<Z;Ae++){const Ce=$[Ae];pe(Ce[0]+be,Ce[1]+be,Ce[2]+be)}}else{for(let xe=0;xe<Z;xe++){const be=$[xe];pe(be[2],be[1],be[0])}for(let xe=0;xe<Z;xe++){const be=$[xe];pe(be[0]+K*u,be[1]+K*u,be[2]+K*u)}}r.addGroup(ee,i.length/3-ee,0)}function se(){const ee=i.length/3;let xe=0;te(F,xe),xe+=F.length;for(let be=0,Ae=O.length;be<Ae;be++){const Ce=O[be];te(Ce,xe),xe+=Ce.length}r.addGroup(ee,i.length/3-ee,1)}function te(ee,xe){let be=ee.length;for(;--be>=0;){const Ae=be;let Ce=be-1;Ce<0&&(Ce=ee.length-1);for(let oe=0,ae=u+v*2;oe<ae;oe++){const Se=K*oe,me=K*(oe+1),ye=xe+Ae+Se,Ie=xe+Ce+Se,De=xe+Ce+me,Ue=xe+Ae+me;de(ye,Ie,De,Ue)}}}function ie(ee,xe,be){l.push(ee),l.push(xe),l.push(be)}function pe(ee,xe,be){ce(ee),ce(xe),ce(be);const Ae=i.length/3,Ce=w.generateTopUV(r,i,Ae-3,Ae-2,Ae-1);he(Ce[0]),he(Ce[1]),he(Ce[2])}function de(ee,xe,be,Ae){ce(ee),ce(xe),ce(Ae),ce(xe),ce(be),ce(Ae);const Ce=i.length/3,oe=w.generateSideWallUV(r,i,Ce-6,Ce-3,Ce-2,Ce-1);he(oe[0]),he(oe[1]),he(oe[3]),he(oe[1]),he(oe[2]),he(oe[3])}function ce(ee){i.push(l[ee*3+0]),i.push(l[ee*3+1]),i.push(l[ee*3+2])}function he(ee){o.push(ee.x),o.push(ee.y)}}}toJSON(){const e=super.toJSON(),n=this.parameters.shapes,r=this.parameters.options;return u7e(n,r,e)}static fromJSON(e,n){const r=[];for(let o=0,a=e.shapes.length;o<a;o++){const s=n[e.shapes[o]];r.push(s)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new Z5[i.type]().fromJSON(i)),new nu(r,e.options)}}const c7e={generateTopUV:function(t,e,n,r,i){const o=e[n*3],a=e[n*3+1],s=e[r*3],l=e[r*3+1],c=e[i*3],u=e[i*3+1];return[new rt(o,a),new rt(s,l),new rt(c,u)]},generateSideWallUV:function(t,e,n,r,i,o){const a=e[n*3],s=e[n*3+1],l=e[n*3+2],c=e[r*3],u=e[r*3+1],f=e[r*3+2],h=e[i*3],p=e[i*3+1],y=e[i*3+2],g=e[o*3],v=e[o*3+1],b=e[o*3+2];return Math.abs(s-u)<Math.abs(a-c)?[new rt(a,1-l),new rt(c,1-f),new rt(h,1-y),new rt(g,1-b)]:[new rt(s,1-l),new rt(u,1-f),new rt(p,1-y),new rt(v,1-b)]}};function u7e(t,e,n){if(n.shapes=[],Array.isArray(t))for(let r=0,i=t.length;r<i;r++){const o=t[r];n.shapes.push(o.uuid)}else n.shapes.push(t.uuid);return e.extrudePath!==void 0&&(n.options.extrudePath=e.extrudePath.toJSON()),n}class Xv extends tu{constructor(e=1,n=0){const r=(1+Math.sqrt(5))/2,i=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],o=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,o,e,n),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new Xv(e.radius,e.detail)}}class Kv extends Yt{constructor(e=[new rt(0,.5),new rt(.5,0),new rt(0,-.5)],n=12,r=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:n,phiStart:r,phiLength:i},n=Math.floor(n),i=Bo(i,0,Math.PI*2);const o=[],a=[],s=[],l=1/n,c=new ge,u=new rt;for(let f=0;f<=n;f++){const h=r+f*l*i,p=Math.sin(h),y=Math.cos(h);for(let g=0;g<=e.length-1;g++)c.x=e[g].x*p,c.y=e[g].y,c.z=e[g].x*y,a.push(c.x,c.y,c.z),u.x=f/n,u.y=g/(e.length-1),s.push(u.x,u.y)}for(let f=0;f<n;f++)for(let h=0;h<e.length-1;h++){const p=h+f*e.length,y=p,g=p+e.length,v=p+e.length+1,b=p+1;o.push(y,g,b),o.push(g,v,b)}if(this.setIndex(o),this.setAttribute("position",new Dt(a,3)),this.setAttribute("uv",new Dt(s,2)),this.computeVertexNormals(),i===Math.PI*2){const f=this.attributes.normal.array,h=new ge,p=new ge,y=new ge,g=n*e.length*3;for(let v=0,b=0;v<e.length;v++,b+=3)h.x=f[b+0],h.y=f[b+1],h.z=f[b+2],p.x=f[g+b+0],p.y=f[g+b+1],p.z=f[g+b+2],y.addVectors(h,p).normalize(),f[b+0]=f[g+b+0]=y.x,f[b+1]=f[g+b+1]=y.y,f[b+2]=f[g+b+2]=y.z}}static fromJSON(e){return new Kv(e.points,e.segments,e.phiStart,e.phiLength)}}class lm extends tu{constructor(e=1,n=0){const r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(r,i,e,n),this.type="OctahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new lm(e.radius,e.detail)}}class Jv extends Yt{constructor(e=.5,n=1,r=8,i=1,o=0,a=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:n,thetaSegments:r,phiSegments:i,thetaStart:o,thetaLength:a},r=Math.max(3,r),i=Math.max(1,i);const s=[],l=[],c=[],u=[];let f=e;const h=(n-e)/i,p=new ge,y=new rt;for(let g=0;g<=i;g++){for(let v=0;v<=r;v++){const b=o+v/r*a;p.x=f*Math.cos(b),p.y=f*Math.sin(b),l.push(p.x,p.y,p.z),c.push(0,0,1),y.x=(p.x/n+1)/2,y.y=(p.y/n+1)/2,u.push(y.x,y.y)}f+=h}for(let g=0;g<i;g++){const v=g*(r+1);for(let b=0;b<r;b++){const w=b+v,T=w,C=w+r+1,P=w+r+2,M=w+1;s.push(T,C,M),s.push(C,P,M)}}this.setIndex(s),this.setAttribute("position",new Dt(l,3)),this.setAttribute("normal",new Dt(c,3)),this.setAttribute("uv",new Dt(u,2))}static fromJSON(e){return new Jv(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class cm extends Yt{constructor(e=new Gc([new rt(0,.5),new rt(-.5,-.5),new rt(.5,-.5)]),n=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:n};const r=[],i=[],o=[],a=[];let s=0,l=0;if(Array.isArray(e)===!1)c(e);else for(let u=0;u<e.length;u++)c(e[u]),this.addGroup(s,l,u),s+=l,l=0;this.setIndex(r),this.setAttribute("position",new Dt(i,3)),this.setAttribute("normal",new Dt(o,3)),this.setAttribute("uv",new Dt(a,2));function c(u){const f=i.length/3,h=u.extractPoints(n);let p=h.shape;const y=h.holes;qc.isClockWise(p)===!1&&(p=p.reverse());for(let v=0,b=y.length;v<b;v++){const w=y[v];qc.isClockWise(w)===!0&&(y[v]=w.reverse())}const g=qc.triangulateShape(p,y);for(let v=0,b=y.length;v<b;v++){const w=y[v];p=p.concat(w)}for(let v=0,b=p.length;v<b;v++){const w=p[v];i.push(w.x,w.y,0),o.push(0,0,1),a.push(w.x,w.y)}for(let v=0,b=g.length;v<b;v++){const w=g[v],T=w[0]+f,C=w[1]+f,P=w[2]+f;r.push(T,C,P),l+=3}}}toJSON(){const e=super.toJSON(),n=this.parameters.shapes;return d7e(n,e)}static fromJSON(e,n){const r=[];for(let i=0,o=e.shapes.length;i<o;i++){const a=n[e.shapes[i]];r.push(a)}return new cm(r,e.curveSegments)}}function d7e(t,e){if(e.shapes=[],Array.isArray(t))for(let n=0,r=t.length;n<r;n++){const i=t[n];e.shapes.push(i.uuid)}else e.shapes.push(t.uuid);return e}class um extends Yt{constructor(e=1,n=32,r=16,i=0,o=Math.PI*2,a=0,s=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:n,heightSegments:r,phiStart:i,phiLength:o,thetaStart:a,thetaLength:s},n=Math.max(3,Math.floor(n)),r=Math.max(2,Math.floor(r));const l=Math.min(a+s,Math.PI);let c=0;const u=[],f=new ge,h=new ge,p=[],y=[],g=[],v=[];for(let b=0;b<=r;b++){const w=[],T=b/r;let C=0;b==0&&a==0?C=.5/n:b==r&&l==Math.PI&&(C=-.5/n);for(let P=0;P<=n;P++){const M=P/n;f.x=-e*Math.cos(i+M*o)*Math.sin(a+T*s),f.y=e*Math.cos(a+T*s),f.z=e*Math.sin(i+M*o)*Math.sin(a+T*s),y.push(f.x,f.y,f.z),h.copy(f).normalize(),g.push(h.x,h.y,h.z),v.push(M+C,1-T),w.push(c++)}u.push(w)}for(let b=0;b<r;b++)for(let w=0;w<n;w++){const T=u[b][w+1],C=u[b][w],P=u[b+1][w],M=u[b+1][w+1];(b!==0||a>0)&&p.push(T,C,M),(b!==r-1||l<Math.PI)&&p.push(C,P,M)}this.setIndex(p),this.setAttribute("position",new Dt(y,3)),this.setAttribute("normal",new Dt(g,3)),this.setAttribute("uv",new Dt(v,2))}static fromJSON(e){return new um(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Zv extends tu{constructor(e=1,n=0){const r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(r,i,e,n),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new Zv(e.radius,e.detail)}}class Qv extends Yt{constructor(e=1,n=.4,r=8,i=6,o=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:n,radialSegments:r,tubularSegments:i,arc:o},r=Math.floor(r),i=Math.floor(i);const a=[],s=[],l=[],c=[],u=new ge,f=new ge,h=new ge;for(let p=0;p<=r;p++)for(let y=0;y<=i;y++){const g=y/i*o,v=p/r*Math.PI*2;f.x=(e+n*Math.cos(v))*Math.cos(g),f.y=(e+n*Math.cos(v))*Math.sin(g),f.z=n*Math.sin(v),s.push(f.x,f.y,f.z),u.x=e*Math.cos(g),u.y=e*Math.sin(g),h.subVectors(f,u).normalize(),l.push(h.x,h.y,h.z),c.push(y/i),c.push(p/r)}for(let p=1;p<=r;p++)for(let y=1;y<=i;y++){const g=(i+1)*p+y-1,v=(i+1)*(p-1)+y-1,b=(i+1)*(p-1)+y,w=(i+1)*p+y;a.push(g,v,w),a.push(v,b,w)}this.setIndex(a),this.setAttribute("position",new Dt(s,3)),this.setAttribute("normal",new Dt(l,3)),this.setAttribute("uv",new Dt(c,2))}static fromJSON(e){return new Qv(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class e0 extends Yt{constructor(e=1,n=.4,r=64,i=8,o=2,a=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:n,tubularSegments:r,radialSegments:i,p:o,q:a},r=Math.floor(r),i=Math.floor(i);const s=[],l=[],c=[],u=[],f=new ge,h=new ge,p=new ge,y=new ge,g=new ge,v=new ge,b=new ge;for(let T=0;T<=r;++T){const C=T/r*o*Math.PI*2;w(C,o,a,e,p),w(C+.01,o,a,e,y),v.subVectors(y,p),b.addVectors(y,p),g.crossVectors(v,b),b.crossVectors(g,v),g.normalize(),b.normalize();for(let P=0;P<=i;++P){const M=P/i*Math.PI*2,k=-n*Math.cos(M),I=n*Math.sin(M);f.x=p.x+(k*b.x+I*g.x),f.y=p.y+(k*b.y+I*g.y),f.z=p.z+(k*b.z+I*g.z),l.push(f.x,f.y,f.z),h.subVectors(f,p).normalize(),c.push(h.x,h.y,h.z),u.push(T/r),u.push(P/i)}}for(let T=1;T<=r;T++)for(let C=1;C<=i;C++){const P=(i+1)*(T-1)+(C-1),M=(i+1)*T+(C-1),k=(i+1)*T+C,I=(i+1)*(T-1)+C;s.push(P,M,I),s.push(M,k,I)}this.setIndex(s),this.setAttribute("position",new Dt(l,3)),this.setAttribute("normal",new Dt(c,3)),this.setAttribute("uv",new Dt(u,2));function w(T,C,P,M,k){const I=Math.cos(T),U=Math.sin(T),z=P/C*T,O=Math.cos(z);k.x=M*(2+O)*.5*I,k.y=M*(2+O)*U*.5,k.z=M*Math.sin(z)*.5}}static fromJSON(e){return new e0(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class t0 extends Yt{constructor(e=new pS(new ge(-1,-1,0),new ge(-1,1,0),new ge(1,1,0)),n=64,r=1,i=8,o=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:n,radius:r,radialSegments:i,closed:o};const a=e.computeFrenetFrames(n,o);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;const s=new ge,l=new ge,c=new rt;let u=new ge;const f=[],h=[],p=[],y=[];g(),this.setIndex(y),this.setAttribute("position",new Dt(f,3)),this.setAttribute("normal",new Dt(h,3)),this.setAttribute("uv",new Dt(p,2));function g(){for(let T=0;T<n;T++)v(T);v(o===!1?n:0),w(),b()}function v(T){u=e.getPointAt(T/n,u);const C=a.normals[T],P=a.binormals[T];for(let M=0;M<=i;M++){const k=M/i*Math.PI*2,I=Math.sin(k),U=-Math.cos(k);l.x=U*C.x+I*P.x,l.y=U*C.y+I*P.y,l.z=U*C.z+I*P.z,l.normalize(),h.push(l.x,l.y,l.z),s.x=u.x+r*l.x,s.y=u.y+r*l.y,s.z=u.z+r*l.z,f.push(s.x,s.y,s.z)}}function b(){for(let T=1;T<=n;T++)for(let C=1;C<=i;C++){const P=(i+1)*(T-1)+(C-1),M=(i+1)*T+(C-1),k=(i+1)*T+C,I=(i+1)*(T-1)+C;y.push(P,M,I),y.push(M,k,I)}}function w(){for(let T=0;T<=n;T++)for(let C=0;C<=i;C++)c.x=T/n,c.y=C/i,p.push(c.x,c.y)}}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new t0(new Z5[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class Q5 extends Yt{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const n=[],r=new Set,i=new ge,o=new ge;if(e.index!==null){const a=e.attributes.position,s=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:s.count,materialIndex:0}]);for(let c=0,u=l.length;c<u;++c){const f=l[c],h=f.start,p=f.count;for(let y=h,g=h+p;y<g;y+=3)for(let v=0;v<3;v++){const b=s.getX(y+v),w=s.getX(y+(v+1)%3);i.fromBufferAttribute(a,b),o.fromBufferAttribute(a,w),bY(i,o,r)===!0&&(n.push(i.x,i.y,i.z),n.push(o.x,o.y,o.z))}}}else{const a=e.attributes.position;for(let s=0,l=a.count/3;s<l;s++)for(let c=0;c<3;c++){const u=3*s+c,f=3*s+(c+1)%3;i.fromBufferAttribute(a,u),o.fromBufferAttribute(a,f),bY(i,o,r)===!0&&(n.push(i.x,i.y,i.z),n.push(o.x,o.y,o.z))}}this.setAttribute("position",new Dt(n,3))}}}function bY(t,e,n){const r=`${t.x},${t.y},${t.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${t.x},${t.y},${t.z}`;return n.has(r)===!0||n.has(i)===!0?!1:(n.add(r,i),!0)}var SY=Object.freeze({__proto__:null,BoxGeometry:xd,BoxBufferGeometry:xd,CircleGeometry:Gv,CircleBufferGeometry:Gv,ConeGeometry:qv,ConeBufferGeometry:qv,CylinderGeometry:th,CylinderBufferGeometry:th,DodecahedronGeometry:Yv,DodecahedronBufferGeometry:Yv,EdgesGeometry:q5,ExtrudeGeometry:nu,ExtrudeBufferGeometry:nu,IcosahedronGeometry:Xv,IcosahedronBufferGeometry:Xv,LatheGeometry:Kv,LatheBufferGeometry:Kv,OctahedronGeometry:lm,OctahedronBufferGeometry:lm,PlaneGeometry:Qc,PlaneBufferGeometry:Qc,PolyhedronGeometry:tu,PolyhedronBufferGeometry:tu,RingGeometry:Jv,RingBufferGeometry:Jv,ShapeGeometry:cm,ShapeBufferGeometry:cm,SphereGeometry:um,SphereBufferGeometry:um,TetrahedronGeometry:Zv,TetrahedronBufferGeometry:Zv,TorusGeometry:Qv,TorusBufferGeometry:Qv,TorusKnotGeometry:e0,TorusKnotBufferGeometry:e0,TubeGeometry:t0,TubeBufferGeometry:t0,WireframeGeometry:Q5});class ez extends So{constructor(e){super(),this.type="ShadowMaterial",this.color=new bt(0),this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this}}ez.prototype.isShadowMaterial=!0;class Jp extends So{constructor(e){super(),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new bt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new bt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Rm,this.normalScale=new rt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}Jp.prototype.isMeshStandardMaterial=!0;class tz extends Jp{constructor(e){super(),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new rt(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Bo(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(n){this.ior=(1+.4*n)/(1-.4*n)}}),this.sheenTint=new bt(0),this.sheenRoughness=1,this.transmissionMap=null,this.thickness=.01,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationTint=new bt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularTint=new bt(1,1,1),this.specularTintMap=null,this._sheen=0,this._clearcoat=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.sheen=e.sheen,this.sheenTint.copy(e.sheenTint),this.sheenRoughness=e.sheenRoughness,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationTint.copy(e.attenuationTint),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularTint.copy(e.specularTint),this.specularTintMap=e.specularTintMap,this}}tz.prototype.isMeshPhysicalMaterial=!0;class nz extends So{constructor(e){super(),this.type="MeshPhongMaterial",this.color=new bt(16777215),this.specular=new bt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new bt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Rm,this.normalScale=new rt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=rS,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}nz.prototype.isMeshPhongMaterial=!0;class rz extends So{constructor(e){super(),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new bt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new bt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Rm,this.normalScale=new rt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}rz.prototype.isMeshToonMaterial=!0;class iz extends So{constructor(e){super(),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Rm,this.normalScale=new rt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}iz.prototype.isMeshNormalMaterial=!0;class oz extends So{constructor(e){super(),this.type="MeshLambertMaterial",this.color=new bt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new bt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=rS,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}oz.prototype.isMeshLambertMaterial=!0;class az extends So{constructor(e){super(),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new bt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Rm,this.normalScale=new rt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this}}az.prototype.isMeshMatcapMaterial=!0;class sz extends Vi{constructor(e){super(),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}sz.prototype.isLineDashedMaterial=!0;var f7e=Object.freeze({__proto__:null,ShadowMaterial:ez,SpriteMaterial:p2,RawShaderMaterial:U0,ShaderMaterial:wd,PointsMaterial:Lm,MeshPhysicalMaterial:tz,MeshStandardMaterial:Jp,MeshPhongMaterial:nz,MeshToonMaterial:rz,MeshNormalMaterial:iz,MeshLambertMaterial:oz,MeshDepthMaterial:aS,MeshDistanceMaterial:sS,MeshBasicMaterial:lu,MeshMatcapMaterial:az,LineDashedMaterial:sz,LineBasicMaterial:Vi,Material:So});const Ir={arraySlice:function(t,e,n){return Ir.isTypedArray(t)?new t.constructor(t.subarray(e,n!==void 0?n:t.length)):t.slice(e,n)},convertArray:function(t,e,n){return!t||!n&&t.constructor===e?t:typeof e.BYTES_PER_ELEMENT=="number"?new e(t):Array.prototype.slice.call(t)},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(t){function e(i,o){return t[i]-t[o]}const n=t.length,r=new Array(n);for(let i=0;i!==n;++i)r[i]=i;return r.sort(e),r},sortedArray:function(t,e,n){const r=t.length,i=new t.constructor(r);for(let o=0,a=0;a!==r;++o){const s=n[o]*e;for(let l=0;l!==e;++l)i[a++]=t[s+l]}return i},flattenJSON:function(t,e,n,r){let i=1,o=t[0];for(;o!==void 0&&o[r]===void 0;)o=t[i++];if(o===void 0)return;let a=o[r];if(a!==void 0)if(Array.isArray(a))do a=o[r],a!==void 0&&(e.push(o.time),n.push.apply(n,a)),o=t[i++];while(o!==void 0);else if(a.toArray!==void 0)do a=o[r],a!==void 0&&(e.push(o.time),a.toArray(n,n.length)),o=t[i++];while(o!==void 0);else do a=o[r],a!==void 0&&(e.push(o.time),n.push(a)),o=t[i++];while(o!==void 0)},subclip:function(t,e,n,r,i=30){const o=t.clone();o.name=e;const a=[];for(let l=0;l<o.tracks.length;++l){const c=o.tracks[l],u=c.getValueSize(),f=[],h=[];for(let p=0;p<c.times.length;++p){const y=c.times[p]*i;if(!(y<n||y>=r)){f.push(c.times[p]);for(let g=0;g<u;++g)h.push(c.values[p*u+g])}}f.length!==0&&(c.times=Ir.convertArray(f,c.times.constructor),c.values=Ir.convertArray(h,c.values.constructor),a.push(c))}o.tracks=a;let s=1/0;for(let l=0;l<o.tracks.length;++l)s>o.tracks[l].times[0]&&(s=o.tracks[l].times[0]);for(let l=0;l<o.tracks.length;++l)o.tracks[l].shift(-1*s);return o.resetDuration(),o},makeClipAdditive:function(t,e=0,n=t,r=30){r<=0&&(r=30);const i=n.tracks.length,o=e/r;for(let a=0;a<i;++a){const s=n.tracks[a],l=s.ValueTypeName;if(l==="bool"||l==="string")continue;const c=t.tracks.find(function(b){return b.name===s.name&&b.ValueTypeName===l});if(c===void 0)continue;let u=0;const f=s.getValueSize();s.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=f/3);let h=0;const p=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=p/3);const y=s.times.length-1;let g;if(o<=s.times[0]){const b=u,w=f-u;g=Ir.arraySlice(s.values,b,w)}else if(o>=s.times[y]){const b=y*f+u,w=b+f-u;g=Ir.arraySlice(s.values,b,w)}else{const b=s.createInterpolant(),w=u,T=f-u;b.evaluate(o),g=Ir.arraySlice(b.resultBuffer,w,T)}l==="quaternion"&&new io().fromArray(g).normalize().conjugate().toArray(g);const v=c.times.length;for(let b=0;b<v;++b){const w=b*p+h;if(l==="quaternion")io.multiplyQuaternionsFlat(c.values,w,g,0,c.values,w);else{const T=p-h*2;for(let C=0;C<T;++C)c.values[w+C]-=g[C]}}}return t.blendMode=N5,t}};class bd{constructor(e,n,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new n.constructor(r),this.sampleValues=n,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const n=this.parameterPositions;let r=this._cachedIndex,i=n[r],o=n[r-1];e:{t:{let a;n:{r:if(!(e<i)){for(let s=r+2;;){if(i===void 0){if(e<o)break r;return r=n.length,this._cachedIndex=r,this.afterEnd_(r-1,e,o)}if(r===s)break;if(o=i,i=n[++r],e<i)break t}a=n.length;break n}if(!(e>=o)){const s=n[1];e<s&&(r=2,o=s);for(let l=r-2;;){if(o===void 0)return this._cachedIndex=0,this.beforeStart_(0,e,i);if(r===l)break;if(i=o,o=n[--r-1],e>=o)break t}a=r,r=0;break n}break e}for(;r<a;){const s=r+a>>>1;e<n[s]?a=s:r=s+1}if(i=n[r],o=n[r-1],o===void 0)return this._cachedIndex=0,this.beforeStart_(0,e,i);if(i===void 0)return r=n.length,this._cachedIndex=r,this.afterEnd_(r-1,o,e)}this._cachedIndex=r,this.intervalChanged_(r,o,i)}return this.interpolate_(r,o,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const n=this.resultBuffer,r=this.sampleValues,i=this.valueSize,o=e*i;for(let a=0;a!==i;++a)n[a]=r[o+a];return n}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}bd.prototype.beforeStart_=bd.prototype.copySampleValue_;bd.prototype.afterEnd_=bd.prototype.copySampleValue_;class Ile extends bd{constructor(e,n,r,i){super(e,n,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Op,endingEnd:Op}}intervalChanged_(e,n,r){const i=this.parameterPositions;let o=e-2,a=e+1,s=i[o],l=i[a];if(s===void 0)switch(this.getSettings_().endingStart){case Lp:o=e,s=2*n-r;break;case l1:o=i.length-2,s=n+i[o]-i[o+1];break;default:o=e,s=r}if(l===void 0)switch(this.getSettings_().endingEnd){case Lp:a=e,l=2*r-n;break;case l1:a=1,l=r+i[1]-i[0];break;default:a=e-1,l=n}const c=(r-n)*.5,u=this.valueSize;this._weightPrev=c/(n-s),this._weightNext=c/(l-r),this._offsetPrev=o*u,this._offsetNext=a*u}interpolate_(e,n,r,i){const o=this.resultBuffer,a=this.sampleValues,s=this.valueSize,l=e*s,c=l-s,u=this._offsetPrev,f=this._offsetNext,h=this._weightPrev,p=this._weightNext,y=(r-n)/(i-n),g=y*y,v=g*y,b=-h*v+2*h*g-h*y,w=(1+h)*v+(-1.5-2*h)*g+(-.5+h)*y+1,T=(-1-p)*v+(1.5+p)*g+.5*y,C=p*v-p*g;for(let P=0;P!==s;++P)o[P]=b*a[u+P]+w*a[c+P]+T*a[l+P]+C*a[f+P];return o}}class lz extends bd{constructor(e,n,r,i){super(e,n,r,i)}interpolate_(e,n,r,i){const o=this.resultBuffer,a=this.sampleValues,s=this.valueSize,l=e*s,c=l-s,u=(r-n)/(i-n),f=1-u;for(let h=0;h!==s;++h)o[h]=a[c+h]*f+a[l+h]*u;return o}}class Ole extends bd{constructor(e,n,r,i){super(e,n,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class fc{constructor(e,n,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(n===void 0||n.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Ir.convertArray(n,this.TimeBufferType),this.values=Ir.convertArray(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const n=e.constructor;let r;if(n.toJSON!==this.toJSON)r=n.toJSON(e);else{r={name:e.name,times:Ir.convertArray(e.times,Array),values:Ir.convertArray(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new Ole(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new lz(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Ile(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let n;switch(e){case a1:n=this.InterpolantFactoryMethodDiscrete;break;case s1:n=this.InterpolantFactoryMethodLinear;break;case aT:n=this.InterpolantFactoryMethodSmooth;break}if(n===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=n,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return a1;case this.InterpolantFactoryMethodLinear:return s1;case this.InterpolantFactoryMethodSmooth:return aT}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const n=this.times;for(let r=0,i=n.length;r!==i;++r)n[r]+=e}return this}scale(e){if(e!==1){const n=this.times;for(let r=0,i=n.length;r!==i;++r)n[r]*=e}return this}trim(e,n){const r=this.times,i=r.length;let o=0,a=i-1;for(;o!==i&&r[o]<e;)++o;for(;a!==-1&&r[a]>n;)--a;if(++a,o!==0||a!==i){o>=a&&(a=Math.max(a,1),o=a-1);const s=this.getValueSize();this.times=Ir.arraySlice(r,o,a),this.values=Ir.arraySlice(this.values,o*s,a*s)}return this}validate(){let e=!0;const n=this.getValueSize();n-Math.floor(n)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,i=this.values,o=r.length;o===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let a=null;for(let s=0;s!==o;s++){const l=r[s];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,s,l),e=!1;break}if(a!==null&&a>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,s,l,a),e=!1;break}a=l}if(i!==void 0&&Ir.isTypedArray(i))for(let s=0,l=i.length;s!==l;++s){const c=i[s];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,s,c),e=!1;break}}return e}optimize(){const e=Ir.arraySlice(this.times),n=Ir.arraySlice(this.values),r=this.getValueSize(),i=this.getInterpolation()===aT,o=e.length-1;let a=1;for(let s=1;s<o;++s){let l=!1;const c=e[s],u=e[s+1];if(c!==u&&(s!==1||c!==e[0]))if(i)l=!0;else{const f=s*r,h=f-r,p=f+r;for(let y=0;y!==r;++y){const g=n[f+y];if(g!==n[h+y]||g!==n[p+y]){l=!0;break}}}if(l){if(s!==a){e[a]=e[s];const f=s*r,h=a*r;for(let p=0;p!==r;++p)n[h+p]=n[f+p]}++a}}if(o>0){e[a]=e[o];for(let s=o*r,l=a*r,c=0;c!==r;++c)n[l+c]=n[s+c];++a}return a!==e.length?(this.times=Ir.arraySlice(e,0,a),this.values=Ir.arraySlice(n,0,a*r)):(this.times=e,this.values=n),this}clone(){const e=Ir.arraySlice(this.times,0),n=Ir.arraySlice(this.values,0),r=this.constructor,i=new r(this.name,e,n);return i.createInterpolant=this.createInterpolant,i}}fc.prototype.TimeBufferType=Float32Array;fc.prototype.ValueBufferType=Float32Array;fc.prototype.DefaultInterpolation=s1;class Dm extends fc{}Dm.prototype.ValueTypeName="bool";Dm.prototype.ValueBufferType=Array;Dm.prototype.DefaultInterpolation=a1;Dm.prototype.InterpolantFactoryMethodLinear=void 0;Dm.prototype.InterpolantFactoryMethodSmooth=void 0;class cz extends fc{}cz.prototype.ValueTypeName="color";class p1 extends fc{}p1.prototype.ValueTypeName="number";class Lle extends bd{constructor(e,n,r,i){super(e,n,r,i)}interpolate_(e,n,r,i){const o=this.resultBuffer,a=this.sampleValues,s=this.valueSize,l=(r-n)/(i-n);let c=e*s;for(let u=c+s;c!==u;c+=4)io.slerpFlat(o,0,a,c-s,a,c,l);return o}}class $0 extends fc{InterpolantFactoryMethodLinear(e){return new Lle(this.times,this.values,this.getValueSize(),e)}}$0.prototype.ValueTypeName="quaternion";$0.prototype.DefaultInterpolation=s1;$0.prototype.InterpolantFactoryMethodSmooth=void 0;class Fm extends fc{}Fm.prototype.ValueTypeName="string";Fm.prototype.ValueBufferType=Array;Fm.prototype.DefaultInterpolation=a1;Fm.prototype.InterpolantFactoryMethodLinear=void 0;Fm.prototype.InterpolantFactoryMethodSmooth=void 0;class m1 extends fc{}m1.prototype.ValueTypeName="vector";class g1{constructor(e,n=-1,r,i=o2){this.name=e,this.tracks=r,this.duration=n,this.blendMode=i,this.uuid=Ns(),this.duration<0&&this.resetDuration()}static parse(e){const n=[],r=e.tracks,i=1/(e.fps||1);for(let a=0,s=r.length;a!==s;++a)n.push(p7e(r[a]).scale(i));const o=new this(e.name,e.duration,n,e.blendMode);return o.uuid=e.uuid,o}static toJSON(e){const n=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:n,uuid:e.uuid,blendMode:e.blendMode};for(let o=0,a=r.length;o!==a;++o)n.push(fc.toJSON(r[o]));return i}static CreateFromMorphTargetSequence(e,n,r,i){const o=n.length,a=[];for(let s=0;s<o;s++){let l=[],c=[];l.push((s+o-1)%o,s,(s+1)%o),c.push(0,1,0);const u=Ir.getKeyframeOrder(l);l=Ir.sortedArray(l,1,u),c=Ir.sortedArray(c,1,u),!i&&l[0]===0&&(l.push(o),c.push(c[0])),a.push(new p1(".morphTargetInfluences["+n[s].name+"]",l,c).scale(1/r))}return new this(e,-1,a)}static findByName(e,n){let r=e;if(!Array.isArray(e)){const i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===n)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,n,r){const i={},o=/^([\w-]*?)([\d]+)$/;for(let s=0,l=e.length;s<l;s++){const c=e[s],u=c.name.match(o);if(u&&u.length>1){const f=u[1];let h=i[f];h||(i[f]=h=[]),h.push(c)}}const a=[];for(const s in i)a.push(this.CreateFromMorphTargetSequence(s,i[s],n,r));return a}static parseAnimation(e,n){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(f,h,p,y,g){if(p.length!==0){const v=[],b=[];Ir.flattenJSON(p,v,b,y),v.length!==0&&g.push(new f(h,v,b))}},i=[],o=e.name||"default",a=e.fps||30,s=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let f=0;f<c.length;f++){const h=c[f].keys;if(!(!h||h.length===0))if(h[0].morphTargets){const p={};let y;for(y=0;y<h.length;y++)if(h[y].morphTargets)for(let g=0;g<h[y].morphTargets.length;g++)p[h[y].morphTargets[g]]=-1;for(const g in p){const v=[],b=[];for(let w=0;w!==h[y].morphTargets.length;++w){const T=h[y];v.push(T.time),b.push(T.morphTarget===g?1:0)}i.push(new p1(".morphTargetInfluence["+g+"]",v,b))}l=p.length*a}else{const p=".bones["+n[f].name+"]";r(m1,p+".position",h,"pos",i),r($0,p+".quaternion",h,"rot",i),r(m1,p+".scale",h,"scl",i)}}return i.length===0?null:new this(o,l,i,s)}resetDuration(){const e=this.tracks;let n=0;for(let r=0,i=e.length;r!==i;++r){const o=this.tracks[r];n=Math.max(n,o.times[o.times.length-1])}return this.duration=n,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let n=0;n<this.tracks.length;n++)e=e&&this.tracks[n].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let n=0;n<this.tracks.length;n++)e.push(this.tracks[n].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function h7e(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return p1;case"vector":case"vector2":case"vector3":case"vector4":return m1;case"color":return cz;case"quaternion":return $0;case"bool":case"boolean":return Dm;case"string":return Fm}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}function p7e(t){if(t.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=h7e(t.type);if(t.times===void 0){const n=[],r=[];Ir.flattenJSON(t.keys,n,r,"value"),t.times=n,t.values=r}return e.parse!==void 0?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}const dm={enabled:!1,files:{},add:function(t,e){this.enabled!==!1&&(this.files[t]=e)},get:function(t){if(this.enabled!==!1)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class uz{constructor(e,n,r){const i=this;let o=!1,a=0,s=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=n,this.onError=r,this.itemStart=function(u){s++,o===!1&&i.onStart!==void 0&&i.onStart(u,a,s),o=!0},this.itemEnd=function(u){a++,i.onProgress!==void 0&&i.onProgress(u,a,s),a===s&&(o=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(u){i.onError!==void 0&&i.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,f){return c.push(u,f),this},this.removeHandler=function(u){const f=c.indexOf(u);return f!==-1&&c.splice(f,2),this},this.getHandler=function(u){for(let f=0,h=c.length;f<h;f+=2){const p=c[f],y=c[f+1];if(p.global&&(p.lastIndex=0),p.test(u))return y}return null}}}const Dle=new uz;class la{constructor(e){this.manager=e!==void 0?e:Dle,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,n){const r=this;return new Promise(function(i,o){r.load(e,i,n,o)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const Bl={};class sc extends la{constructor(e){super(e)}load(e,n,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=this,a=dm.get(e);if(a!==void 0)return o.manager.itemStart(e),setTimeout(function(){n&&n(a),o.manager.itemEnd(e)},0),a;if(Bl[e]!==void 0){Bl[e].push({onLoad:n,onProgress:r,onError:i});return}const s=/^data:(.*?)(;base64)?,(.*)$/,l=e.match(s);let c;if(l){const u=l[1],f=!!l[2];let h=l[3];h=decodeURIComponent(h),f&&(h=atob(h));try{let p;const y=(this.responseType||"").toLowerCase();switch(y){case"arraybuffer":case"blob":const g=new Uint8Array(h.length);for(let b=0;b<h.length;b++)g[b]=h.charCodeAt(b);y==="blob"?p=new Blob([g.buffer],{type:u}):p=g.buffer;break;case"document":p=new DOMParser().parseFromString(h,u);break;case"json":p=JSON.parse(h);break;default:p=h;break}setTimeout(function(){n&&n(p),o.manager.itemEnd(e)},0)}catch(p){setTimeout(function(){i&&i(p),o.manager.itemError(e),o.manager.itemEnd(e)},0)}}else{Bl[e]=[],Bl[e].push({onLoad:n,onProgress:r,onError:i}),c=new XMLHttpRequest,c.open("GET",e,!0),c.addEventListener("load",function(u){const f=this.response,h=Bl[e];if(delete Bl[e],this.status===200||this.status===0){this.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),dm.add(e,f);for(let p=0,y=h.length;p<y;p++){const g=h[p];g.onLoad&&g.onLoad(f)}o.manager.itemEnd(e)}else{for(let p=0,y=h.length;p<y;p++){const g=h[p];g.onError&&g.onError(u)}o.manager.itemError(e),o.manager.itemEnd(e)}},!1),c.addEventListener("progress",function(u){const f=Bl[e];for(let h=0,p=f.length;h<p;h++){const y=f[h];y.onProgress&&y.onProgress(u)}},!1),c.addEventListener("error",function(u){const f=Bl[e];delete Bl[e];for(let h=0,p=f.length;h<p;h++){const y=f[h];y.onError&&y.onError(u)}o.manager.itemError(e),o.manager.itemEnd(e)},!1),c.addEventListener("abort",function(u){const f=Bl[e];delete Bl[e];for(let h=0,p=f.length;h<p;h++){const y=f[h];y.onError&&y.onError(u)}o.manager.itemError(e),o.manager.itemEnd(e)},!1),this.responseType!==void 0&&(c.responseType=this.responseType),this.withCredentials!==void 0&&(c.withCredentials=this.withCredentials),c.overrideMimeType&&c.overrideMimeType(this.mimeType!==void 0?this.mimeType:"text/plain");for(const u in this.requestHeader)c.setRequestHeader(u,this.requestHeader[u]);c.send(null)}return o.manager.itemStart(e),c}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class m7e extends la{constructor(e){super(e)}load(e,n,r,i){const o=this,a=new sc(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(s){try{n(o.parse(JSON.parse(s)))}catch(l){i?i(l):console.error(l),o.manager.itemError(e)}},r,i)}parse(e){const n=[];for(let r=0;r<e.length;r++){const i=g1.parse(e[r]);n.push(i)}return n}}class g7e extends la{constructor(e){super(e)}load(e,n,r,i){const o=this,a=[],s=new W5,l=new sc(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(o.withCredentials);let c=0;function u(f){l.load(e[f],function(h){const p=o.parse(h,!0);a[f]={width:p.width,height:p.height,format:p.format,mipmaps:p.mipmaps},c+=1,c===6&&(p.mipmapCount===1&&(s.minFilter=Xr),s.image=a,s.format=p.format,s.needsUpdate=!0,n&&n(s))},r,i)}if(Array.isArray(e))for(let f=0,h=e.length;f<h;++f)u(f);else l.load(e,function(f){const h=o.parse(f,!0);if(h.isCubemap){const p=h.mipmaps.length/h.mipmapCount;for(let y=0;y<p;y++){a[y]={mipmaps:[]};for(let g=0;g<h.mipmapCount;g++)a[y].mipmaps.push(h.mipmaps[y*h.mipmapCount+g]),a[y].format=h.format,a[y].width=h.width,a[y].height=h.height}s.image=a}else s.image.width=h.width,s.image.height=h.height,s.mipmaps=h.mipmaps;h.mipmapCount===1&&(s.minFilter=Xr),s.format=h.format,s.needsUpdate=!0,n&&n(s)},r,i);return s}}class y1 extends la{constructor(e){super(e)}load(e,n,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=this,a=dm.get(e);if(a!==void 0)return o.manager.itemStart(e),setTimeout(function(){n&&n(a),o.manager.itemEnd(e)},0),a;const s=l2("img");function l(){s.removeEventListener("load",l,!1),s.removeEventListener("error",c,!1),dm.add(e,this),n&&n(this),o.manager.itemEnd(e)}function c(u){s.removeEventListener("load",l,!1),s.removeEventListener("error",c,!1),i&&i(u),o.manager.itemError(e),o.manager.itemEnd(e)}return s.addEventListener("load",l,!1),s.addEventListener("error",c,!1),e.substr(0,5)!=="data:"&&this.crossOrigin!==void 0&&(s.crossOrigin=this.crossOrigin),o.manager.itemStart(e),s.src=e,s}}class Fle extends la{constructor(e){super(e)}load(e,n,r,i){const o=new z0,a=new y1(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);let s=0;function l(c){a.load(e[c],function(u){o.images[c]=u,s++,s===6&&(o.needsUpdate=!0,n&&n(o))},void 0,i)}for(let c=0;c<e.length;++c)l(c);return o}}class zle extends la{constructor(e){super(e)}load(e,n,r,i){const o=this,a=new Kp,s=new sc(this.manager);return s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setPath(this.path),s.setWithCredentials(o.withCredentials),s.load(e,function(l){const c=o.parse(l);c&&(c.image!==void 0?a.image=c.image:c.data!==void 0&&(a.image.width=c.width,a.image.height=c.height,a.image.data=c.data),a.wrapS=c.wrapS!==void 0?c.wrapS:$o,a.wrapT=c.wrapT!==void 0?c.wrapT:$o,a.magFilter=c.magFilter!==void 0?c.magFilter:Xr,a.minFilter=c.minFilter!==void 0?c.minFilter:Xr,a.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.encoding!==void 0&&(a.encoding=c.encoding),c.flipY!==void 0&&(a.flipY=c.flipY),c.format!==void 0&&(a.format=c.format),c.type!==void 0&&(a.type=c.type),c.mipmaps!==void 0&&(a.mipmaps=c.mipmaps,a.minFilter=Nm),c.mipmapCount===1&&(a.minFilter=Xr),c.generateMipmaps!==void 0&&(a.generateMipmaps=c.generateMipmaps),a.needsUpdate=!0,n&&n(a,c))},r,i),a}}class Ule extends la{constructor(e){super(e)}load(e,n,r,i){const o=new Hi,a=new y1(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(s){o.image=s,o.needsUpdate=!0,n!==void 0&&n(o)},r,i),o}}class lc extends An{constructor(e,n=1){super(),this.type="Light",this.color=new bt(e),this.intensity=n}dispose(){}copy(e){return super.copy(e),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const n=super.toJSON(e);return n.object.color=this.color.getHex(),n.object.intensity=this.intensity,this.groundColor!==void 0&&(n.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(n.object.distance=this.distance),this.angle!==void 0&&(n.object.angle=this.angle),this.decay!==void 0&&(n.object.decay=this.decay),this.penumbra!==void 0&&(n.object.penumbra=this.penumbra),this.shadow!==void 0&&(n.object.shadow=this.shadow.toJSON()),n}}lc.prototype.isLight=!0;class dz extends lc{constructor(e,n,r){super(e,r),this.type="HemisphereLight",this.position.copy(An.DefaultUp),this.updateMatrix(),this.groundColor=new bt(n)}copy(e){return lc.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}dz.prototype.isHemisphereLight=!0;const EY=new Ut,_Y=new ge,TY=new ge;class fz{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new rt(512,512),this.map=null,this.mapPass=null,this.matrix=new Ut,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new oS,this._frameExtents=new rt(1,1),this._viewportCount=1,this._viewports=[new Kn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const n=this.camera,r=this.matrix;_Y.setFromMatrixPosition(e.matrixWorld),n.position.copy(_Y),TY.setFromMatrixPosition(e.target.matrixWorld),n.lookAt(TY),n.updateMatrixWorld(),EY.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(EY),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(n.projectionMatrix),r.multiply(n.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class Ble extends fz{constructor(){super(new ci(50,1,.5,500)),this.focus=1}updateMatrices(e){const n=this.camera,r=c1*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,o=e.distance||n.far;(r!==n.fov||i!==n.aspect||o!==n.far)&&(n.fov=r,n.aspect=i,n.far=o,n.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}Ble.prototype.isSpotLightShadow=!0;class hz extends lc{constructor(e,n,r=0,i=Math.PI/3,o=0,a=1){super(e,n),this.type="SpotLight",this.position.copy(An.DefaultUp),this.updateMatrix(),this.target=new An,this.distance=r,this.angle=i,this.penumbra=o,this.decay=a,this.shadow=new Ble}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}hz.prototype.isSpotLight=!0;const CY=new Ut,dw=new ge,tI=new ge;class $le extends fz{constructor(){super(new ci(90,1,.5,500)),this._frameExtents=new rt(4,2),this._viewportCount=6,this._viewports=[new Kn(2,1,1,1),new Kn(0,1,1,1),new Kn(3,1,1,1),new Kn(1,1,1,1),new Kn(3,0,1,1),new Kn(1,0,1,1)],this._cubeDirections=[new ge(1,0,0),new ge(-1,0,0),new ge(0,0,1),new ge(0,0,-1),new ge(0,1,0),new ge(0,-1,0)],this._cubeUps=[new ge(0,1,0),new ge(0,1,0),new ge(0,1,0),new ge(0,1,0),new ge(0,0,1),new ge(0,0,-1)]}updateMatrices(e,n=0){const r=this.camera,i=this.matrix,o=e.distance||r.far;o!==r.far&&(r.far=o,r.updateProjectionMatrix()),dw.setFromMatrixPosition(e.matrixWorld),r.position.copy(dw),tI.copy(r.position),tI.add(this._cubeDirections[n]),r.up.copy(this._cubeUps[n]),r.lookAt(tI),r.updateMatrixWorld(),i.makeTranslation(-dw.x,-dw.y,-dw.z),CY.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(CY)}}$le.prototype.isPointLightShadow=!0;class pz extends lc{constructor(e,n,r=0,i=1){super(e,n),this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new $le}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}pz.prototype.isPointLight=!0;class Hle extends fz{constructor(){super(new ld(-5,5,5,-5,.5,500))}}Hle.prototype.isDirectionalLightShadow=!0;class mz extends lc{constructor(e,n){super(e,n),this.type="DirectionalLight",this.position.copy(An.DefaultUp),this.updateMatrix(),this.target=new An,this.shadow=new Hle}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}mz.prototype.isDirectionalLight=!0;class gz extends lc{constructor(e,n){super(e,n),this.type="AmbientLight"}}gz.prototype.isAmbientLight=!0;class yz extends lc{constructor(e,n,r=10,i=10){super(e,n),this.type="RectAreaLight",this.width=r,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const n=super.toJSON(e);return n.object.width=this.width,n.object.height=this.height,n}}yz.prototype.isRectAreaLight=!0;class vz{constructor(){this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new ge)}set(e){for(let n=0;n<9;n++)this.coefficients[n].copy(e[n]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,n){const r=e.x,i=e.y,o=e.z,a=this.coefficients;return n.copy(a[0]).multiplyScalar(.282095),n.addScaledVector(a[1],.488603*i),n.addScaledVector(a[2],.488603*o),n.addScaledVector(a[3],.488603*r),n.addScaledVector(a[4],1.092548*(r*i)),n.addScaledVector(a[5],1.092548*(i*o)),n.addScaledVector(a[6],.315392*(3*o*o-1)),n.addScaledVector(a[7],1.092548*(r*o)),n.addScaledVector(a[8],.546274*(r*r-i*i)),n}getIrradianceAt(e,n){const r=e.x,i=e.y,o=e.z,a=this.coefficients;return n.copy(a[0]).multiplyScalar(.886227),n.addScaledVector(a[1],2*.511664*i),n.addScaledVector(a[2],2*.511664*o),n.addScaledVector(a[3],2*.511664*r),n.addScaledVector(a[4],2*.429043*r*i),n.addScaledVector(a[5],2*.429043*i*o),n.addScaledVector(a[6],.743125*o*o-.247708),n.addScaledVector(a[7],2*.429043*r*o),n.addScaledVector(a[8],.429043*(r*r-i*i)),n}add(e){for(let n=0;n<9;n++)this.coefficients[n].add(e.coefficients[n]);return this}addScaledSH(e,n){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],n);return this}scale(e){for(let n=0;n<9;n++)this.coefficients[n].multiplyScalar(e);return this}lerp(e,n){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],n);return this}equals(e){for(let n=0;n<9;n++)if(!this.coefficients[n].equals(e.coefficients[n]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,n=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].fromArray(e,n+i*3);return this}toArray(e=[],n=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].toArray(e,n+i*3);return e}static getBasisAt(e,n){const r=e.x,i=e.y,o=e.z;n[0]=.282095,n[1]=.488603*i,n[2]=.488603*o,n[3]=.488603*r,n[4]=1.092548*r*i,n[5]=1.092548*i*o,n[6]=.315392*(3*o*o-1),n[7]=1.092548*r*o,n[8]=.546274*(r*r-i*i)}}vz.prototype.isSphericalHarmonics3=!0;class mS extends lc{constructor(e=new vz,n=1){super(void 0,n),this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const n=super.toJSON(e);return n.object.sh=this.sh.toArray(),n}}mS.prototype.isLightProbe=!0;class Vle extends la{constructor(e){super(e),this.textures={}}load(e,n,r,i){const o=this,a=new sc(o.manager);a.setPath(o.path),a.setRequestHeader(o.requestHeader),a.setWithCredentials(o.withCredentials),a.load(e,function(s){try{n(o.parse(JSON.parse(s)))}catch(l){i?i(l):console.error(l),o.manager.itemError(e)}},r,i)}parse(e){const n=this.textures;function r(o){return n[o]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",o),n[o]}const i=new f7e[e.type];if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenTint!==void 0&&(i.sheenTint=new bt().setHex(e.sheenTint)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularTint!==void 0&&i.specularTint!==void 0&&i.specularTint.setHex(e.specularTint),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationTint!==void 0&&i.attenuationTint!==void 0&&i.attenuationTint.setHex(e.attenuationTint),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.format!==void 0&&(i.format=e.format),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==1&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const o in e.uniforms){const a=e.uniforms[o];switch(i.uniforms[o]={},a.type){case"t":i.uniforms[o].value=r(a.value);break;case"c":i.uniforms[o].value=new bt().setHex(a.value);break;case"v2":i.uniforms[o].value=new rt().fromArray(a.value);break;case"v3":i.uniforms[o].value=new ge().fromArray(a.value);break;case"v4":i.uniforms[o].value=new Kn().fromArray(a.value);break;case"m3":i.uniforms[o].value=new zi().fromArray(a.value);break;case"m4":i.uniforms[o].value=new Ut().fromArray(a.value);break;default:i.uniforms[o].value=a.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.extensions!==void 0)for(const o in e.extensions)i.extensions[o]=e.extensions[o];if(e.shading!==void 0&&(i.flatShading=e.shading===1),e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=r(e.map)),e.matcap!==void 0&&(i.matcap=r(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=r(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=r(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=r(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let o=e.normalScale;Array.isArray(o)===!1&&(o=[o,o]),i.normalScale=new rt().fromArray(o)}return e.displacementMap!==void 0&&(i.displacementMap=r(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=r(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=r(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=r(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=r(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=r(e.specularIntensityMap)),e.specularTintMap!==void 0&&(i.specularTintMap=r(e.specularTintMap)),e.envMap!==void 0&&(i.envMap=r(e.envMap)),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=r(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=r(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=r(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=r(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=r(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new rt().fromArray(e.clearcoatNormalScale)),e.transmissionMap!==void 0&&(i.transmissionMap=r(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=r(e.thicknessMap)),i}setTextures(e){return this.textures=e,this}}class FC{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let n="";for(let r=0,i=e.length;r<i;r++)n+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(n))}catch{return n}}static extractUrlBase(e){const n=e.lastIndexOf("/");return n===-1?"./":e.substr(0,n+1)}}class E2 extends Yt{constructor(){super(),this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}clone(){return new this.constructor().copy(this)}toJSON(){const e=super.toJSON(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}E2.prototype.isInstancedBufferGeometry=!0;class Wle extends la{constructor(e){super(e)}load(e,n,r,i){const o=this,a=new sc(o.manager);a.setPath(o.path),a.setRequestHeader(o.requestHeader),a.setWithCredentials(o.withCredentials),a.load(e,function(s){try{n(o.parse(JSON.parse(s)))}catch(l){i?i(l):console.error(l),o.manager.itemError(e)}},r,i)}parse(e){const n={},r={};function i(p,y){if(n[y]!==void 0)return n[y];const v=p.interleavedBuffers[y],b=o(p,v.buffer),w=zy(v.type,b),T=new Om(w,v.stride);return T.uuid=v.uuid,n[y]=T,T}function o(p,y){if(r[y]!==void 0)return r[y];const v=p.arrayBuffers[y],b=new Uint32Array(v).buffer;return r[y]=b,b}const a=e.isInstancedBufferGeometry?new E2:new Yt,s=e.data.index;if(s!==void 0){const p=zy(s.type,s.array);a.setIndex(new Bn(p,1))}const l=e.data.attributes;for(const p in l){const y=l[p];let g;if(y.isInterleavedBufferAttribute){const v=i(e.data,y.data);g=new Qf(v,y.itemSize,y.offset,y.normalized)}else{const v=zy(y.type,y.array),b=y.isInstancedBufferAttribute?eh:Bn;g=new b(v,y.itemSize,y.normalized)}y.name!==void 0&&(g.name=y.name),y.usage!==void 0&&g.setUsage(y.usage),y.updateRange!==void 0&&(g.updateRange.offset=y.updateRange.offset,g.updateRange.count=y.updateRange.count),a.setAttribute(p,g)}const c=e.data.morphAttributes;if(c)for(const p in c){const y=c[p],g=[];for(let v=0,b=y.length;v<b;v++){const w=y[v];let T;if(w.isInterleavedBufferAttribute){const C=i(e.data,w.data);T=new Qf(C,w.itemSize,w.offset,w.normalized)}else{const C=zy(w.type,w.array);T=new Bn(C,w.itemSize,w.normalized)}w.name!==void 0&&(T.name=w.name),g.push(T)}a.morphAttributes[p]=g}e.data.morphTargetsRelative&&(a.morphTargetsRelative=!0);const f=e.data.groups||e.data.drawcalls||e.data.offsets;if(f!==void 0)for(let p=0,y=f.length;p!==y;++p){const g=f[p];a.addGroup(g.start,g.count,g.materialIndex)}const h=e.data.boundingSphere;if(h!==void 0){const p=new ge;h.center!==void 0&&p.fromArray(h.center),a.boundingSphere=new Ad(p,h.radius)}return e.name&&(a.name=e.name),e.userData&&(a.userData=e.userData),a}}class y7e extends la{constructor(e){super(e)}load(e,n,r,i){const o=this,a=this.path===""?FC.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;const s=new sc(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(l){let c=null;try{c=JSON.parse(l)}catch(f){i!==void 0&&i(f),console.error("THREE:ObjectLoader: Can't parse "+e+".",f.message);return}const u=c.metadata;if(u===void 0||u.type===void 0||u.type.toLowerCase()==="geometry"){console.error("THREE.ObjectLoader: Can't load "+e);return}o.parse(c,n)},r,i)}async loadAsync(e,n){const r=this,i=this.path===""?FC.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const o=new sc(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials);const a=await o.loadAsync(e,n),s=JSON.parse(a),l=s.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await r.parseAsync(s)}parse(e,n){const r=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),o=this.parseGeometries(e.geometries,i),a=this.parseImages(e.images,function(){n!==void 0&&n(c)}),s=this.parseTextures(e.textures,a),l=this.parseMaterials(e.materials,s),c=this.parseObject(e.object,o,l,s,r),u=this.parseSkeletons(e.skeletons,c);if(this.bindSkeletons(c,u),n!==void 0){let f=!1;for(const h in a)if(a[h]instanceof HTMLImageElement){f=!0;break}f===!1&&n(c)}return c}async parseAsync(e){const n=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),o=await this.parseImagesAsync(e.images),a=this.parseTextures(e.textures,o),s=this.parseMaterials(e.materials,a),l=this.parseObject(e.object,i,s,a,n),c=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,c),l}parseShapes(e){const n={};if(e!==void 0)for(let r=0,i=e.length;r<i;r++){const o=new Gc().fromJSON(e[r]);n[o.uuid]=o}return n}parseSkeletons(e,n){const r={},i={};if(n.traverse(function(o){o.isBone&&(i[o.uuid]=o)}),e!==void 0)for(let o=0,a=e.length;o<a;o++){const s=new v2().fromJSON(e[o],i);r[s.uuid]=s}return r}parseGeometries(e,n){const r={};if(e!==void 0){const i=new Wle;for(let o=0,a=e.length;o<a;o++){let s;const l=e[o];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":s=i.parse(l);break;case"Geometry":console.error("THREE.ObjectLoader: The legacy Geometry type is no longer supported.");break;default:l.type in SY?s=SY[l.type].fromJSON(l,n):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}s.uuid=l.uuid,l.name!==void 0&&(s.name=l.name),s.isBufferGeometry===!0&&l.userData!==void 0&&(s.userData=l.userData),r[l.uuid]=s}}return r}parseMaterials(e,n){const r={},i={};if(e!==void 0){const o=new Vle;o.setTextures(n);for(let a=0,s=e.length;a<s;a++){const l=e[a];if(l.type==="MultiMaterial"){const c=[];for(let u=0;u<l.materials.length;u++){const f=l.materials[u];r[f.uuid]===void 0&&(r[f.uuid]=o.parse(f)),c.push(r[f.uuid])}i[l.uuid]=c}else r[l.uuid]===void 0&&(r[l.uuid]=o.parse(l)),i[l.uuid]=r[l.uuid]}}return i}parseAnimations(e){const n={};if(e!==void 0)for(let r=0;r<e.length;r++){const i=e[r],o=g1.parse(i);n[o.uuid]=o}return n}parseImages(e,n){const r=this,i={};let o;function a(l){return r.manager.itemStart(l),o.load(l,function(){r.manager.itemEnd(l)},void 0,function(){r.manager.itemError(l),r.manager.itemEnd(l)})}function s(l){if(typeof l=="string"){const c=l,u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:r.resourcePath+c;return a(u)}else return l.data?{data:zy(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new uz(n);o=new y1(l),o.setCrossOrigin(this.crossOrigin);for(let c=0,u=e.length;c<u;c++){const f=e[c],h=f.url;if(Array.isArray(h)){i[f.uuid]=[];for(let p=0,y=h.length;p<y;p++){const g=h[p],v=s(g);v!==null&&(v instanceof HTMLImageElement?i[f.uuid].push(v):i[f.uuid].push(new Kp(v.data,v.width,v.height)))}}else{const p=s(f.url);p!==null&&(i[f.uuid]=p)}}}return i}async parseImagesAsync(e){const n=this,r={};let i;async function o(a){if(typeof a=="string"){const s=a,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(s)?s:n.resourcePath+s;return await i.loadAsync(l)}else return a.data?{data:zy(a.type,a.data),width:a.width,height:a.height}:null}if(e!==void 0&&e.length>0){i=new y1(this.manager),i.setCrossOrigin(this.crossOrigin);for(let a=0,s=e.length;a<s;a++){const l=e[a],c=l.url;if(Array.isArray(c)){r[l.uuid]=[];for(let u=0,f=c.length;u<f;u++){const h=c[u],p=await o(h);p!==null&&(p instanceof HTMLImageElement?r[l.uuid].push(p):r[l.uuid].push(new Kp(p.data,p.width,p.height)))}}else{const u=await o(l.url);u!==null&&(r[l.uuid]=u)}}}return r}parseTextures(e,n){function r(o,a){return typeof o=="number"?o:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",o),a[o])}const i={};if(e!==void 0)for(let o=0,a=e.length;o<a;o++){const s=e[o];s.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',s.uuid),n[s.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",s.image);let l;const c=n[s.image];Array.isArray(c)?(l=new z0(c),c.length===6&&(l.needsUpdate=!0)):(c&&c.data?l=new Kp(c.data,c.width,c.height):l=new Hi(c),c&&(l.needsUpdate=!0)),l.uuid=s.uuid,s.name!==void 0&&(l.name=s.name),s.mapping!==void 0&&(l.mapping=r(s.mapping,v7e)),s.offset!==void 0&&l.offset.fromArray(s.offset),s.repeat!==void 0&&l.repeat.fromArray(s.repeat),s.center!==void 0&&l.center.fromArray(s.center),s.rotation!==void 0&&(l.rotation=s.rotation),s.wrap!==void 0&&(l.wrapS=r(s.wrap[0],AY),l.wrapT=r(s.wrap[1],AY)),s.format!==void 0&&(l.format=s.format),s.type!==void 0&&(l.type=s.type),s.encoding!==void 0&&(l.encoding=s.encoding),s.minFilter!==void 0&&(l.minFilter=r(s.minFilter,MY)),s.magFilter!==void 0&&(l.magFilter=r(s.magFilter,MY)),s.anisotropy!==void 0&&(l.anisotropy=s.anisotropy),s.flipY!==void 0&&(l.flipY=s.flipY),s.premultiplyAlpha!==void 0&&(l.premultiplyAlpha=s.premultiplyAlpha),s.unpackAlignment!==void 0&&(l.unpackAlignment=s.unpackAlignment),i[s.uuid]=l}return i}parseObject(e,n,r,i,o){let a;function s(h){return n[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",h),n[h]}function l(h){if(h!==void 0){if(Array.isArray(h)){const p=[];for(let y=0,g=h.length;y<g;y++){const v=h[y];r[v]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",v),p.push(r[v])}return p}return r[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",h),r[h]}}function c(h){return i[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",h),i[h]}let u,f;switch(e.type){case"Scene":a=new uS,e.background!==void 0&&(Number.isInteger(e.background)?a.background=new bt(e.background):a.background=c(e.background)),e.environment!==void 0&&(a.environment=c(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?a.fog=new cS(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(a.fog=new lS(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":a=new ci(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(a.focus=e.focus),e.zoom!==void 0&&(a.zoom=e.zoom),e.filmGauge!==void 0&&(a.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(a.filmOffset=e.filmOffset),e.view!==void 0&&(a.view=Object.assign({},e.view));break;case"OrthographicCamera":a=new ld(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(a.zoom=e.zoom),e.view!==void 0&&(a.view=Object.assign({},e.view));break;case"AmbientLight":a=new gz(e.color,e.intensity);break;case"DirectionalLight":a=new mz(e.color,e.intensity);break;case"PointLight":a=new pz(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":a=new yz(e.color,e.intensity,e.width,e.height);break;case"SpotLight":a=new hz(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":a=new dz(e.color,e.groundColor,e.intensity);break;case"LightProbe":a=new mS().fromJSON(e);break;case"SkinnedMesh":u=s(e.geometry),f=l(e.material),a=new g2(u,f),e.bindMode!==void 0&&(a.bindMode=e.bindMode),e.bindMatrix!==void 0&&a.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(a.skeleton=e.skeleton);break;case"Mesh":u=s(e.geometry),f=l(e.material),a=new Kr(u,f);break;case"InstancedMesh":u=s(e.geometry),f=l(e.material);const h=e.count,p=e.instanceMatrix,y=e.instanceColor;a=new H5(u,f,h),a.instanceMatrix=new eh(new Float32Array(p.array),16),y!==void 0&&(a.instanceColor=new eh(new Float32Array(y.array),y.itemSize));break;case"LOD":a=new Cle;break;case"Line":a=new eu(s(e.geometry),l(e.material));break;case"LineLoop":a=new V5(s(e.geometry),l(e.material));break;case"LineSegments":a=new Ja(s(e.geometry),l(e.material));break;case"PointCloud":case"Points":a=new dS(s(e.geometry),l(e.material));break;case"Sprite":a=new m2(l(e.material));break;case"Group":a=new Dp;break;case"Bone":a=new y2;break;default:a=new An}if(a.uuid=e.uuid,e.name!==void 0&&(a.name=e.name),e.matrix!==void 0?(a.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(a.matrixAutoUpdate=e.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(e.position!==void 0&&a.position.fromArray(e.position),e.rotation!==void 0&&a.rotation.fromArray(e.rotation),e.quaternion!==void 0&&a.quaternion.fromArray(e.quaternion),e.scale!==void 0&&a.scale.fromArray(e.scale)),e.castShadow!==void 0&&(a.castShadow=e.castShadow),e.receiveShadow!==void 0&&(a.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(a.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(a.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(a.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&a.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(a.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(a.visible=e.visible),e.frustumCulled!==void 0&&(a.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(a.renderOrder=e.renderOrder),e.userData!==void 0&&(a.userData=e.userData),e.layers!==void 0&&(a.layers.mask=e.layers),e.children!==void 0){const h=e.children;for(let p=0;p<h.length;p++)a.add(this.parseObject(h[p],n,r,i,o))}if(e.animations!==void 0){const h=e.animations;for(let p=0;p<h.length;p++){const y=h[p];a.animations.push(o[y])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(a.autoUpdate=e.autoUpdate);const h=e.levels;for(let p=0;p<h.length;p++){const y=h[p],g=a.getObjectByProperty("uuid",y.object);g!==void 0&&a.addLevel(g,y.distance)}}return a}bindSkeletons(e,n){Object.keys(n).length!==0&&e.traverse(function(r){if(r.isSkinnedMesh===!0&&r.skeleton!==void 0){const i=n[r.skeleton];i===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",r.skeleton):r.bind(i,r.bindMatrix)}})}setTexturePath(e){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(e)}}const v7e={UVMapping:i2,CubeReflectionMapping:O0,CubeRefractionMapping:L0,EquirectangularReflectionMapping:t1,EquirectangularRefractionMapping:n1,CubeUVReflectionMapping:D0,CubeUVRefractionMapping:iS},AY={RepeatWrapping:r1,ClampToEdgeWrapping:$o,MirroredRepeatWrapping:i1},MY={NearestFilter:Fi,NearestMipmapNearestFilter:LC,NearestMipmapLinearFilter:DC,LinearFilter:Xr,LinearMipmapNearestFilter:k5,LinearMipmapLinearFilter:Nm};class Gle extends la{constructor(e){super(e),typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,n,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=this,a=dm.get(e);if(a!==void 0)return o.manager.itemStart(e),setTimeout(function(){n&&n(a),o.manager.itemEnd(e)},0),a;const s={};s.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",s.headers=this.requestHeader,fetch(e,s).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(o.options,{colorSpaceConversion:"none"}))}).then(function(l){dm.add(e,l),n&&n(l),o.manager.itemEnd(e)}).catch(function(l){i&&i(l),o.manager.itemError(e),o.manager.itemEnd(e)}),o.manager.itemStart(e)}}Gle.prototype.isImageBitmapLoader=!0;let j_;const xz={getContext:function(){return j_===void 0&&(j_=new(window.AudioContext||window.webkitAudioContext)),j_},setContext:function(t){j_=t}};class qle extends la{constructor(e){super(e)}load(e,n,r,i){const o=this,a=new sc(this.manager);a.setResponseType("arraybuffer"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(s){try{const l=s.slice(0);xz.getContext().decodeAudioData(l,function(u){n(u)})}catch(l){i?i(l):console.error(l),o.manager.itemError(e)}},r,i)}}class Yle extends mS{constructor(e,n,r=1){super(void 0,r);const i=new bt().set(e),o=new bt().set(n),a=new ge(i.r,i.g,i.b),s=new ge(o.r,o.g,o.b),l=Math.sqrt(Math.PI),c=l*Math.sqrt(.75);this.sh.coefficients[0].copy(a).add(s).multiplyScalar(l),this.sh.coefficients[1].copy(a).sub(s).multiplyScalar(c)}}Yle.prototype.isHemisphereLightProbe=!0;class Xle extends mS{constructor(e,n=1){super(void 0,n);const r=new bt().set(e);this.sh.coefficients[0].set(r.r,r.g,r.b).multiplyScalar(2*Math.sqrt(Math.PI))}}Xle.prototype.isAmbientLightProbe=!0;const PY=new Ut,kY=new Ut;class x7e{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new ci,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new ci,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const n=this._cache;if(n.focus!==e.focus||n.fov!==e.fov||n.aspect!==e.aspect*this.aspect||n.near!==e.near||n.far!==e.far||n.zoom!==e.zoom||n.eyeSep!==this.eyeSep){n.focus=e.focus,n.fov=e.fov,n.aspect=e.aspect*this.aspect,n.near=e.near,n.far=e.far,n.zoom=e.zoom,n.eyeSep=this.eyeSep;const i=e.projectionMatrix.clone(),o=n.eyeSep/2,a=o*n.near/n.focus,s=n.near*Math.tan(Xp*n.fov*.5)/n.zoom;let l,c;kY.elements[12]=-o,PY.elements[12]=o,l=-s*n.aspect+a,c=s*n.aspect+a,i.elements[0]=2*n.near/(c-l),i.elements[8]=(c+l)/(c-l),this.cameraL.projectionMatrix.copy(i),l=-s*n.aspect-a,c=s*n.aspect-a,i.elements[0]=2*n.near/(c-l),i.elements[8]=(c+l)/(c-l),this.cameraR.projectionMatrix.copy(i)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(kY),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(PY)}}class wz{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=NY(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const n=NY();e=(n-this.oldTime)/1e3,this.oldTime=n,this.elapsedTime+=e}return e}}function NY(){return(typeof performance>"u"?Date:performance).now()}const op=new ge,RY=new io,w7e=new ge,ap=new ge;class b7e extends An{constructor(){super(),this.type="AudioListener",this.context=xz.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new wz}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const n=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(op,RY,w7e),ap.set(0,0,-1).applyQuaternion(RY),n.positionX){const i=this.context.currentTime+this.timeDelta;n.positionX.linearRampToValueAtTime(op.x,i),n.positionY.linearRampToValueAtTime(op.y,i),n.positionZ.linearRampToValueAtTime(op.z,i),n.forwardX.linearRampToValueAtTime(ap.x,i),n.forwardY.linearRampToValueAtTime(ap.y,i),n.forwardZ.linearRampToValueAtTime(ap.z,i),n.upX.linearRampToValueAtTime(r.x,i),n.upY.linearRampToValueAtTime(r.y,i),n.upZ.linearRampToValueAtTime(r.z,i)}else n.setPosition(op.x,op.y,op.z),n.setOrientation(ap.x,ap.y,ap.z,r.x,r.y,r.z)}}class bz extends An{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const n=this.context.createBufferSource();return n.buffer=this.buffer,n.loop=this.loop,n.loopStart=this.loopStart,n.loopEnd=this.loopEnd,n.onended=this.onEnded.bind(this),n.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=n,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const sp=new ge,jY=new io,S7e=new ge,lp=new ge;class E7e extends bz{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,n,r){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=n,this.panner.coneOuterGain=r,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(sp,jY,S7e),lp.set(0,0,1).applyQuaternion(jY);const n=this.panner;if(n.positionX){const r=this.context.currentTime+this.listener.timeDelta;n.positionX.linearRampToValueAtTime(sp.x,r),n.positionY.linearRampToValueAtTime(sp.y,r),n.positionZ.linearRampToValueAtTime(sp.z,r),n.orientationX.linearRampToValueAtTime(lp.x,r),n.orientationY.linearRampToValueAtTime(lp.y,r),n.orientationZ.linearRampToValueAtTime(lp.z,r)}else n.setPosition(sp.x,sp.y,sp.z),n.setOrientation(lp.x,lp.y,lp.z)}}class Kle{constructor(e,n=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=n,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const n=this.getFrequencyData();for(let r=0;r<n.length;r++)e+=n[r];return e/n.length}}class Jle{constructor(e,n,r){this.binding=e,this.valueSize=r;let i,o,a;switch(n){case"quaternion":i=this._slerp,o=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,o=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,o=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=o,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,n){const r=this.buffer,i=this.valueSize,o=e*i+i;let a=this.cumulativeWeight;if(a===0){for(let s=0;s!==i;++s)r[o+s]=r[s];a=n}else{a+=n;const s=n/a;this._mixBufferRegion(r,o,0,s,i)}this.cumulativeWeight=a}accumulateAdditive(e){const n=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(n,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const n=this.valueSize,r=this.buffer,i=e*n+n,o=this.cumulativeWeight,a=this.cumulativeWeightAdditive,s=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,o<1){const l=n*this._origIndex;this._mixBufferRegion(r,i,l,1-o,n)}a>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*n,1,n);for(let l=n,c=n+n;l!==c;++l)if(r[l]!==r[l+n]){s.setValue(r,i);break}}saveOriginalState(){const e=this.binding,n=this.buffer,r=this.valueSize,i=r*this._origIndex;e.getValue(n,i);for(let o=r,a=i;o!==a;++o)n[o]=n[i+o%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,n=e+this.valueSize;for(let r=e;r<n;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,n=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[n+r]=this.buffer[e+r]}_select(e,n,r,i,o){if(i>=.5)for(let a=0;a!==o;++a)e[n+a]=e[r+a]}_slerp(e,n,r,i){io.slerpFlat(e,n,e,n,e,r,i)}_slerpAdditive(e,n,r,i,o){const a=this._workIndex*o;io.multiplyQuaternionsFlat(e,a,e,n,e,r),io.slerpFlat(e,n,e,n,e,a,i)}_lerp(e,n,r,i,o){const a=1-i;for(let s=0;s!==o;++s){const l=n+s;e[l]=e[l]*a+e[r+s]*i}}_lerpAdditive(e,n,r,i,o){for(let a=0;a!==o;++a){const s=n+a;e[s]=e[s]+e[r+a]*i}}}const Sz="\\[\\]\\.:\\/",_7e=new RegExp("["+Sz+"]","g"),Ez="[^"+Sz+"]",T7e="[^"+Sz.replace("\\.","")+"]",C7e=/((?:WC+[\/:])*)/.source.replace("WC",Ez),A7e=/(WCOD+)?/.source.replace("WCOD",T7e),M7e=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Ez),P7e=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Ez),k7e=new RegExp("^"+C7e+A7e+M7e+P7e+"$"),N7e=["material","materials","bones"];class R7e{constructor(e,n,r){const i=r||Gn.parseTrackName(n);this._targetGroup=e,this._bindings=e.subscribe_(n,i)}getValue(e,n){this.bind();const r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,n)}setValue(e,n){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,o=r.length;i!==o;++i)r[i].setValue(e,n)}bind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=e.length;n!==r;++n)e[n].bind()}unbind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=e.length;n!==r;++n)e[n].unbind()}}class Gn{constructor(e,n,r){this.path=n,this.parsedPath=r||Gn.parseTrackName(n),this.node=Gn.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,n,r){return e&&e.isAnimationObjectGroup?new Gn.Composite(e,n,r):new Gn(e,n,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(_7e,"")}static parseTrackName(e){const n=k7e.exec(e);if(!n)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const o=r.nodeName.substring(i+1);N7e.indexOf(o)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=o)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,n){if(!n||n===""||n==="."||n===-1||n===e.name||n===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(n);if(r!==void 0)return r}if(e.children){const r=function(o){for(let a=0;a<o.length;a++){const s=o[a];if(s.name===n||s.uuid===n)return s;const l=r(s.children);if(l)return l}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,n){e[n]=this.targetObject[this.propertyName]}_getValue_array(e,n){const r=this.resolvedProperty;for(let i=0,o=r.length;i!==o;++i)e[n++]=r[i]}_getValue_arrayElement(e,n){e[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,n){this.resolvedProperty.toArray(e,n)}_setValue_direct(e,n){this.targetObject[this.propertyName]=e[n]}_setValue_direct_setNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,n){const r=this.resolvedProperty;for(let i=0,o=r.length;i!==o;++i)r[i]=e[n++]}_setValue_array_setNeedsUpdate(e,n){const r=this.resolvedProperty;for(let i=0,o=r.length;i!==o;++i)r[i]=e[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,n){const r=this.resolvedProperty;for(let i=0,o=r.length;i!==o;++i)r[i]=e[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,n){this.resolvedProperty[this.propertyIndex]=e[n]}_setValue_arrayElement_setNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,n){this.resolvedProperty.fromArray(e,n)}_setValue_fromArray_setNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,n){this.bind(),this.getValue(e,n)}_setValue_unbound(e,n){this.bind(),this.setValue(e,n)}bind(){let e=this.node;const n=this.parsedPath,r=n.objectName,i=n.propertyName;let o=n.propertyIndex;if(e||(e=Gn.findNode(this.rootNode,n.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(r){let c=n.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let u=0;u<e.length;u++)if(e[u].name===c){c=u;break}break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(c!==void 0){if(e[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const a=e[i];if(a===void 0){const c=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+i+" but it wasn't found.",e);return}let s=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?s=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(s=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(o!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(e.geometry.isBufferGeometry){if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[o]!==void 0&&(o=e.morphTargetDictionary[o])}else{console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);return}}l=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=o}else a.fromArray!==void 0&&a.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(l=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][s]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Gn.Composite=R7e;Gn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Gn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Gn.prototype.GetterByBindingType=[Gn.prototype._getValue_direct,Gn.prototype._getValue_array,Gn.prototype._getValue_arrayElement,Gn.prototype._getValue_toArray];Gn.prototype.SetterByBindingTypeAndVersioning=[[Gn.prototype._setValue_direct,Gn.prototype._setValue_direct_setNeedsUpdate,Gn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Gn.prototype._setValue_array,Gn.prototype._setValue_array_setNeedsUpdate,Gn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Gn.prototype._setValue_arrayElement,Gn.prototype._setValue_arrayElement_setNeedsUpdate,Gn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Gn.prototype._setValue_fromArray,Gn.prototype._setValue_fromArray_setNeedsUpdate,Gn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Zle{constructor(){this.uuid=Ns(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let r=0,i=arguments.length;r!==i;++r)e[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}add(){const e=this._objects,n=this._indicesByUUID,r=this._paths,i=this._parsedPaths,o=this._bindings,a=o.length;let s,l=e.length,c=this.nCachedObjects_;for(let u=0,f=arguments.length;u!==f;++u){const h=arguments[u],p=h.uuid;let y=n[p];if(y===void 0){y=l++,n[p]=y,e.push(h);for(let g=0,v=a;g!==v;++g)o[g].push(new Gn(h,r[g],i[g]))}else if(y<c){s=e[y];const g=--c,v=e[g];n[v.uuid]=y,e[y]=v,n[p]=g,e[g]=h;for(let b=0,w=a;b!==w;++b){const T=o[b],C=T[g];let P=T[y];T[y]=C,P===void 0&&(P=new Gn(h,r[b],i[b])),T[g]=P}}else e[y]!==s&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c}remove(){const e=this._objects,n=this._indicesByUUID,r=this._bindings,i=r.length;let o=this.nCachedObjects_;for(let a=0,s=arguments.length;a!==s;++a){const l=arguments[a],c=l.uuid,u=n[c];if(u!==void 0&&u>=o){const f=o++,h=e[f];n[h.uuid]=u,e[u]=h,n[c]=f,e[f]=l;for(let p=0,y=i;p!==y;++p){const g=r[p],v=g[f],b=g[u];g[u]=v,g[f]=b}}}this.nCachedObjects_=o}uncache(){const e=this._objects,n=this._indicesByUUID,r=this._bindings,i=r.length;let o=this.nCachedObjects_,a=e.length;for(let s=0,l=arguments.length;s!==l;++s){const c=arguments[s],u=c.uuid,f=n[u];if(f!==void 0)if(delete n[u],f<o){const h=--o,p=e[h],y=--a,g=e[y];n[p.uuid]=f,e[f]=p,n[g.uuid]=h,e[h]=g,e.pop();for(let v=0,b=i;v!==b;++v){const w=r[v],T=w[h],C=w[y];w[f]=T,w[h]=C,w.pop()}}else{const h=--a,p=e[h];h>0&&(n[p.uuid]=f),e[f]=p,e.pop();for(let y=0,g=i;y!==g;++y){const v=r[y];v[f]=v[h],v.pop()}}}this.nCachedObjects_=o}subscribe_(e,n){const r=this._bindingsIndicesByPath;let i=r[e];const o=this._bindings;if(i!==void 0)return o[i];const a=this._paths,s=this._parsedPaths,l=this._objects,c=l.length,u=this.nCachedObjects_,f=new Array(c);i=o.length,r[e]=i,a.push(e),s.push(n),o.push(f);for(let h=u,p=l.length;h!==p;++h){const y=l[h];f[h]=new Gn(y,e,n)}return f}unsubscribe_(e){const n=this._bindingsIndicesByPath,r=n[e];if(r!==void 0){const i=this._paths,o=this._parsedPaths,a=this._bindings,s=a.length-1,l=a[s],c=e[s];n[c]=r,a[r]=l,a.pop(),o[r]=o[s],o.pop(),i[r]=i[s],i.pop()}}}Zle.prototype.isAnimationObjectGroup=!0;class j7e{constructor(e,n,r=null,i=n.blendMode){this._mixer=e,this._clip=n,this._localRoot=r,this.blendMode=i;const o=n.tracks,a=o.length,s=new Array(a),l={endingStart:Op,endingEnd:Op};for(let c=0;c!==a;++c){const u=o[c].createInterpolant(null);s[c]=u,u.settings=l}this._interpolantSettings=l,this._interpolants=s,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Gse,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,n){return this.loop=e,this.repetitions=n,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,n,r){if(e.fadeOut(n),this.fadeIn(n),r){const i=this._clip.duration,o=e._clip.duration,a=o/i,s=i/o;e.warp(1,a,n),this.warp(s,1,n)}return this}crossFadeTo(e,n,r){return e.crossFadeFrom(this,n,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,n,r){const i=this._mixer,o=i.time,a=this.timeScale;let s=this._timeScaleInterpolant;s===null&&(s=i._lendControlInterpolant(),this._timeScaleInterpolant=s);const l=s.parameterPositions,c=s.sampleValues;return l[0]=o,l[1]=o+r,c[0]=e/a,c[1]=n/a,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,n,r,i){if(!this.enabled){this._updateWeight(e);return}const o=this._startTime;if(o!==null){const l=(e-o)*r;if(l<0||r===0)return;this._startTime=null,n=r*l}n*=this._updateTimeScale(e);const a=this._updateTime(n),s=this._updateWeight(e);if(s>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case N5:for(let u=0,f=l.length;u!==f;++u)l[u].evaluate(a),c[u].accumulateAdditive(s);break;case o2:default:for(let u=0,f=l.length;u!==f;++u)l[u].evaluate(a),c[u].accumulate(i,s)}}}_updateWeight(e){let n=0;if(this.enabled){n=this.weight;const r=this._weightInterpolant;if(r!==null){const i=r.evaluate(e)[0];n*=i,e>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=n,n}_updateTimeScale(e){let n=0;if(!this.paused){n=this.timeScale;const r=this._timeScaleInterpolant;if(r!==null){const i=r.evaluate(e)[0];n*=i,e>r.parameterPositions[1]&&(this.stopWarping(),n===0?this.paused=!0:this.timeScale=n)}}return this._effectiveTimeScale=n,n}_updateTime(e){const n=this._clip.duration,r=this.loop;let i=this.time+e,o=this._loopCount;const a=r===qse;if(e===0)return o===-1?i:a&&(o&1)===1?n-i:i;if(r===Wse){o===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=n)i=n;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(o===-1&&(e>=0?(o=0,this._setEndings(!0,this.repetitions===0,a)):this._setEndings(this.repetitions===0,!0,a)),i>=n||i<0){const s=Math.floor(i/n);i-=n*s,o+=Math.abs(s);const l=this.repetitions-o;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?n:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const c=e<0;this._setEndings(c,!c,a)}else this._setEndings(!1,!1,a);this._loopCount=o,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:s})}}else this.time=i;if(a&&(o&1)===1)return n-i}return i}_setEndings(e,n,r){const i=this._interpolantSettings;r?(i.endingStart=Lp,i.endingEnd=Lp):(e?i.endingStart=this.zeroSlopeAtStart?Lp:Op:i.endingStart=l1,n?i.endingEnd=this.zeroSlopeAtEnd?Lp:Op:i.endingEnd=l1)}_scheduleFading(e,n,r){const i=this._mixer,o=i.time;let a=this._weightInterpolant;a===null&&(a=i._lendControlInterpolant(),this._weightInterpolant=a);const s=a.parameterPositions,l=a.sampleValues;return s[0]=o,l[0]=n,s[1]=o+e,l[1]=r,this}}class Qle extends mh{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,n){const r=e._localRoot||this._root,i=e._clip.tracks,o=i.length,a=e._propertyBindings,s=e._interpolants,l=r.uuid,c=this._bindingsByRootAndName;let u=c[l];u===void 0&&(u={},c[l]=u);for(let f=0;f!==o;++f){const h=i[f],p=h.name;let y=u[p];if(y!==void 0)a[f]=y;else{if(y=a[f],y!==void 0){y._cacheIndex===null&&(++y.referenceCount,this._addInactiveBinding(y,l,p));continue}const g=n&&n._propertyBindings[f].binding.parsedPath;y=new Jle(Gn.create(r,p,g),h.ValueTypeName,h.getValueSize()),++y.referenceCount,this._addInactiveBinding(y,l,p),a[f]=y}s[f].resultBuffer=y.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,i=e._clip.uuid,o=this._actionsByClip[i];this._bindAction(e,o&&o.knownActions[0]),this._addInactiveAction(e,i,r)}const n=e._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const o=n[r];o.useCount++===0&&(this._lendBinding(o),o.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const n=e._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const o=n[r];--o.useCount===0&&(o.restoreOriginalState(),this._takeBackBinding(o))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const n=e._cacheIndex;return n!==null&&n<this._nActiveActions}_addInactiveAction(e,n,r){const i=this._actions,o=this._actionsByClip;let a=o[n];if(a===void 0)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,o[n]=a;else{const s=a.knownActions;e._byClipCacheIndex=s.length,s.push(e)}e._cacheIndex=i.length,i.push(e),a.actionByRoot[r]=e}_removeInactiveAction(e){const n=this._actions,r=n[n.length-1],i=e._cacheIndex;r._cacheIndex=i,n[i]=r,n.pop(),e._cacheIndex=null;const o=e._clip.uuid,a=this._actionsByClip,s=a[o],l=s.knownActions,c=l[l.length-1],u=e._byClipCacheIndex;c._byClipCacheIndex=u,l[u]=c,l.pop(),e._byClipCacheIndex=null;const f=s.actionByRoot,h=(e._localRoot||this._root).uuid;delete f[h],l.length===0&&delete a[o],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const n=e._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const o=n[r];--o.referenceCount===0&&this._removeInactiveBinding(o)}}_lendAction(e){const n=this._actions,r=e._cacheIndex,i=this._nActiveActions++,o=n[i];e._cacheIndex=i,n[i]=e,o._cacheIndex=r,n[r]=o}_takeBackAction(e){const n=this._actions,r=e._cacheIndex,i=--this._nActiveActions,o=n[i];e._cacheIndex=i,n[i]=e,o._cacheIndex=r,n[r]=o}_addInactiveBinding(e,n,r){const i=this._bindingsByRootAndName,o=this._bindings;let a=i[n];a===void 0&&(a={},i[n]=a),a[r]=e,e._cacheIndex=o.length,o.push(e)}_removeInactiveBinding(e){const n=this._bindings,r=e.binding,i=r.rootNode.uuid,o=r.path,a=this._bindingsByRootAndName,s=a[i],l=n[n.length-1],c=e._cacheIndex;l._cacheIndex=c,n[c]=l,n.pop(),delete s[o],Object.keys(s).length===0&&delete a[i]}_lendBinding(e){const n=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,o=n[i];e._cacheIndex=i,n[i]=e,o._cacheIndex=r,n[r]=o}_takeBackBinding(e){const n=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,o=n[i];e._cacheIndex=i,n[i]=e,o._cacheIndex=r,n[r]=o}_lendControlInterpolant(){const e=this._controlInterpolants,n=this._nActiveControlInterpolants++;let r=e[n];return r===void 0&&(r=new lz(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),r.__cacheIndex=n,e[n]=r),r}_takeBackControlInterpolant(e){const n=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,o=n[i];e.__cacheIndex=i,n[i]=e,o.__cacheIndex=r,n[r]=o}clipAction(e,n,r){const i=n||this._root,o=i.uuid;let a=typeof e=="string"?g1.findByName(i,e):e;const s=a!==null?a.uuid:e,l=this._actionsByClip[s];let c=null;if(r===void 0&&(a!==null?r=a.blendMode:r=o2),l!==void 0){const f=l.actionByRoot[o];if(f!==void 0&&f.blendMode===r)return f;c=l.knownActions[0],a===null&&(a=c._clip)}if(a===null)return null;const u=new j7e(this,a,n,r);return this._bindAction(u,c),this._addInactiveAction(u,s,o),u}existingAction(e,n){const r=n||this._root,i=r.uuid,o=typeof e=="string"?g1.findByName(r,e):e,a=o?o.uuid:e,s=this._actionsByClip[a];return s!==void 0&&s.actionByRoot[i]||null}stopAllAction(){const e=this._actions,n=this._nActiveActions;for(let r=n-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const n=this._actions,r=this._nActiveActions,i=this.time+=e,o=Math.sign(e),a=this._accuIndex^=1;for(let c=0;c!==r;++c)n[c]._update(i,e,o,a);const s=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)s[c].apply(a);return this}setTime(e){this.time=0;for(let n=0;n<this._actions.length;n++)this._actions[n].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const n=this._actions,r=e.uuid,i=this._actionsByClip,o=i[r];if(o!==void 0){const a=o.knownActions;for(let s=0,l=a.length;s!==l;++s){const c=a[s];this._deactivateAction(c);const u=c._cacheIndex,f=n[n.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,f._cacheIndex=u,n[u]=f,n.pop(),this._removeInactiveBindingsForAction(c)}delete i[r]}}uncacheRoot(e){const n=e.uuid,r=this._actionsByClip;for(const a in r){const s=r[a].actionByRoot,l=s[n];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const i=this._bindingsByRootAndName,o=i[n];if(o!==void 0)for(const a in o){const s=o[a];s.restoreOriginalState(),this._removeInactiveBinding(s)}}uncacheAction(e,n){const r=this.existingAction(e,n);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}Qle.prototype._controlInterpolantsResultBuffer=new Float32Array(1);class _2{constructor(e){typeof e=="string"&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}clone(){return new _2(this.value.clone===void 0?this.value:this.value.clone())}}class ece extends Om{constructor(e,n,r=1){super(e,n),this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const n=super.clone(e);return n.meshPerAttribute=this.meshPerAttribute,n}toJSON(e){const n=super.toJSON(e);return n.isInstancedInterleavedBuffer=!0,n.meshPerAttribute=this.meshPerAttribute,n}}ece.prototype.isInstancedInterleavedBuffer=!0;class tce{constructor(e,n,r,i,o){this.buffer=e,this.type=n,this.itemSize=r,this.elementSize=i,this.count=o,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,n){return this.type=e,this.elementSize=n,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}tce.prototype.isGLBufferAttribute=!0;class nce{constructor(e,n,r=0,i=1/0){this.ray=new Md(e,n),this.near=r,this.far=i,this.camera=null,this.layers=new iv,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,n){this.ray.set(e,n)}setFromCamera(e,n){n&&n.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(n.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(n).sub(this.ray.origin).normalize(),this.camera=n):n&&n.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(n.near+n.far)/(n.near-n.far)).unproject(n),this.ray.direction.set(0,0,-1).transformDirection(n.matrixWorld),this.camera=n):console.error("THREE.Raycaster: Unsupported camera type: "+n.type)}intersectObject(e,n=!0,r=[]){return FD(e,this,r,n),r.sort(IY),r}intersectObjects(e,n=!0,r=[]){for(let i=0,o=e.length;i<o;i++)FD(e[i],this,r,n);return r.sort(IY),r}}function IY(t,e){return t.distance-e.distance}function FD(t,e,n,r){if(t.layers.test(e.layers)&&t.raycast(e,n),r===!0){const i=t.children;for(let o=0,a=i.length;o<a;o++)FD(i[o],e,n,!0)}}class zD{constructor(e=1,n=0,r=0){return this.radius=e,this.phi=n,this.theta=r,this}set(e,n,r){return this.radius=e,this.phi=n,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,r){return this.radius=Math.sqrt(e*e+n*n+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(Bo(n/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class I7e{constructor(e=1,n=0,r=0){return this.radius=e,this.theta=n,this.y=r,this}set(e,n,r){return this.radius=e,this.theta=n,this.y=r,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,r){return this.radius=Math.sqrt(e*e+r*r),this.theta=Math.atan2(e,r),this.y=n,this}clone(){return new this.constructor().copy(this)}}const OY=new rt;class H0{constructor(e=new rt(1/0,1/0),n=new rt(-1/0,-1/0)){this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromPoints(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const r=OY.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return OY.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}H0.prototype.isBox2=!0;const LY=new ge,I_=new ge;class rce{constructor(e=new ge,n=new ge){this.start=e,this.end=n}set(e,n){return this.start.copy(e),this.end.copy(n),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,n){return this.delta(n).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,n){LY.subVectors(e,this.start),I_.subVectors(this.end,this.start);const r=I_.dot(I_);let o=I_.dot(LY)/r;return n&&(o=Bo(o,0,1)),o}closestPointToPoint(e,n,r){const i=this.closestPointToPointParameter(e,n);return this.delta(r).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}class ice extends An{constructor(e){super(),this.material=e,this.render=function(){},this.hasPositions=!1,this.hasNormals=!1,this.hasColors=!1,this.hasUvs=!1,this.positionArray=null,this.normalArray=null,this.colorArray=null,this.uvArray=null,this.count=0}}ice.prototype.isImmediateRenderObject=!0;const DY=new ge;class O7e extends An{constructor(e,n){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;const r=new Yt,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let a=0,s=1,l=32;a<l;a++,s++){const c=a/l*Math.PI*2,u=s/l*Math.PI*2;i.push(Math.cos(c),Math.sin(c),1,Math.cos(u),Math.sin(u),1)}r.setAttribute("position",new Dt(i,3));const o=new Vi({fog:!1,toneMapped:!1});this.cone=new Ja(r,o),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateMatrixWorld();const e=this.light.distance?this.light.distance:1e3,n=e*Math.tan(this.light.angle);this.cone.scale.set(n,n,e),DY.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(DY),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const xf=new ge,O_=new Ut,nI=new Ut;class oce extends Ja{constructor(e){const n=ace(e),r=new Yt,i=[],o=[],a=new bt(0,0,1),s=new bt(0,1,0);for(let c=0;c<n.length;c++){const u=n[c];u.parent&&u.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),o.push(a.r,a.g,a.b),o.push(s.r,s.g,s.b))}r.setAttribute("position",new Dt(i,3)),r.setAttribute("color",new Dt(o,3));const l=new Vi({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(r,l),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=e,this.bones=n,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const n=this.bones,r=this.geometry,i=r.getAttribute("position");nI.copy(this.root.matrixWorld).invert();for(let o=0,a=0;o<n.length;o++){const s=n[o];s.parent&&s.parent.isBone&&(O_.multiplyMatrices(nI,s.matrixWorld),xf.setFromMatrixPosition(O_),i.setXYZ(a,xf.x,xf.y,xf.z),O_.multiplyMatrices(nI,s.parent.matrixWorld),xf.setFromMatrixPosition(O_),i.setXYZ(a+1,xf.x,xf.y,xf.z),a+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}}function ace(t){const e=[];t&&t.isBone&&e.push(t);for(let n=0;n<t.children.length;n++)e.push.apply(e,ace(t.children[n]));return e}class L7e extends Kr{constructor(e,n,r){const i=new um(n,4,2),o=new lu({wireframe:!0,fog:!1,toneMapped:!1});super(i,o),this.light=e,this.light.updateMatrixWorld(),this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const D7e=new ge,FY=new bt,zY=new bt;class F7e extends An{constructor(e,n,r){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r;const i=new lm(n);i.rotateY(Math.PI*.5),this.material=new lu({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const o=i.getAttribute("position"),a=new Float32Array(o.count*3);i.setAttribute("color",new Bn(a,3)),this.add(new Kr(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const n=e.geometry.getAttribute("color");FY.copy(this.light.color),zY.copy(this.light.groundColor);for(let r=0,i=n.count;r<i;r++){const o=r<i/2?FY:zY;n.setXYZ(r,o.r,o.g,o.b)}n.needsUpdate=!0}e.lookAt(D7e.setFromMatrixPosition(this.light.matrixWorld).negate())}}class sce extends Ja{constructor(e=10,n=10,r=4473924,i=8947848){r=new bt(r),i=new bt(i);const o=n/2,a=e/n,s=e/2,l=[],c=[];for(let h=0,p=0,y=-s;h<=n;h++,y+=a){l.push(-s,0,y,s,0,y),l.push(y,0,-s,y,0,s);const g=h===o?r:i;g.toArray(c,p),p+=3,g.toArray(c,p),p+=3,g.toArray(c,p),p+=3,g.toArray(c,p),p+=3}const u=new Yt;u.setAttribute("position",new Dt(l,3)),u.setAttribute("color",new Dt(c,3));const f=new Vi({vertexColors:!0,toneMapped:!1});super(u,f),this.type="GridHelper"}}class z7e extends Ja{constructor(e=10,n=16,r=8,i=64,o=4473924,a=8947848){o=new bt(o),a=new bt(a);const s=[],l=[];for(let f=0;f<=n;f++){const h=f/n*(Math.PI*2),p=Math.sin(h)*e,y=Math.cos(h)*e;s.push(0,0,0),s.push(p,0,y);const g=f&1?o:a;l.push(g.r,g.g,g.b),l.push(g.r,g.g,g.b)}for(let f=0;f<=r;f++){const h=f&1?o:a,p=e-e/r*f;for(let y=0;y<i;y++){let g=y/i*(Math.PI*2),v=Math.sin(g)*p,b=Math.cos(g)*p;s.push(v,0,b),l.push(h.r,h.g,h.b),g=(y+1)/i*(Math.PI*2),v=Math.sin(g)*p,b=Math.cos(g)*p,s.push(v,0,b),l.push(h.r,h.g,h.b)}}const c=new Yt;c.setAttribute("position",new Dt(s,3)),c.setAttribute("color",new Dt(l,3));const u=new Vi({vertexColors:!0,toneMapped:!1});super(c,u),this.type="PolarGridHelper"}}const UY=new ge,L_=new ge,BY=new ge;class U7e extends An{constructor(e,n,r){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,n===void 0&&(n=1);let i=new Yt;i.setAttribute("position",new Dt([-n,n,0,n,n,0,n,-n,0,-n,-n,0,-n,n,0],3));const o=new Vi({fog:!1,toneMapped:!1});this.lightPlane=new eu(i,o),this.add(this.lightPlane),i=new Yt,i.setAttribute("position",new Dt([0,0,0,0,0,1],3)),this.targetLine=new eu(i,o),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){UY.setFromMatrixPosition(this.light.matrixWorld),L_.setFromMatrixPosition(this.light.target.matrixWorld),BY.subVectors(L_,UY),this.lightPlane.lookAt(L_),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(L_),this.targetLine.scale.z=BY.length()}}const D_=new ge,ii=new F0;class B7e extends Ja{constructor(e){const n=new Yt,r=new Vi({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],o=[],a={},s=new bt(16755200),l=new bt(16711680),c=new bt(43775),u=new bt(16777215),f=new bt(3355443);h("n1","n2",s),h("n2","n4",s),h("n4","n3",s),h("n3","n1",s),h("f1","f2",s),h("f2","f4",s),h("f4","f3",s),h("f3","f1",s),h("n1","f1",s),h("n2","f2",s),h("n3","f3",s),h("n4","f4",s),h("p","n1",l),h("p","n2",l),h("p","n3",l),h("p","n4",l),h("u1","u2",c),h("u2","u3",c),h("u3","u1",c),h("c","t",u),h("p","c",f),h("cn1","cn2",f),h("cn3","cn4",f),h("cf1","cf2",f),h("cf3","cf4",f);function h(y,g,v){p(y,v),p(g,v)}function p(y,g){i.push(0,0,0),o.push(g.r,g.g,g.b),a[y]===void 0&&(a[y]=[]),a[y].push(i.length/3-1)}n.setAttribute("position",new Dt(i,3)),n.setAttribute("color",new Dt(o,3)),super(n,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update()}update(){const e=this.geometry,n=this.pointMap,r=1,i=1;ii.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),vi("c",n,e,ii,0,0,-1),vi("t",n,e,ii,0,0,1),vi("n1",n,e,ii,-1,-1,-1),vi("n2",n,e,ii,r,-1,-1),vi("n3",n,e,ii,-1,i,-1),vi("n4",n,e,ii,r,i,-1),vi("f1",n,e,ii,-1,-1,1),vi("f2",n,e,ii,r,-1,1),vi("f3",n,e,ii,-1,i,1),vi("f4",n,e,ii,r,i,1),vi("u1",n,e,ii,r*.7,i*1.1,-1),vi("u2",n,e,ii,-1*.7,i*1.1,-1),vi("u3",n,e,ii,0,i*2,-1),vi("cf1",n,e,ii,-1,0,1),vi("cf2",n,e,ii,r,0,1),vi("cf3",n,e,ii,0,-1,1),vi("cf4",n,e,ii,0,i,1),vi("cn1",n,e,ii,-1,0,-1),vi("cn2",n,e,ii,r,0,-1),vi("cn3",n,e,ii,0,-1,-1),vi("cn4",n,e,ii,0,i,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function vi(t,e,n,r,i,o,a){D_.set(i,o,a).unproject(r);const s=e[t];if(s!==void 0){const l=n.getAttribute("position");for(let c=0,u=s.length;c<u;c++)l.setXYZ(s[c],D_.x,D_.y,D_.z)}}const F_=new es;class lce extends Ja{constructor(e,n=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(8*3),o=new Yt;o.setIndex(new Bn(r,1)),o.setAttribute("position",new Bn(i,3)),super(o,new Vi({color:n,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&F_.setFromObject(this.object),F_.isEmpty())return;const n=F_.min,r=F_.max,i=this.geometry.attributes.position,o=i.array;o[0]=r.x,o[1]=r.y,o[2]=r.z,o[3]=n.x,o[4]=r.y,o[5]=r.z,o[6]=n.x,o[7]=n.y,o[8]=r.z,o[9]=r.x,o[10]=n.y,o[11]=r.z,o[12]=r.x,o[13]=r.y,o[14]=n.z,o[15]=n.x,o[16]=r.y,o[17]=n.z,o[18]=n.x,o[19]=n.y,o[20]=n.z,o[21]=r.x,o[22]=n.y,o[23]=n.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e){return Ja.prototype.copy.call(this,e),this.object=e.object,this}}class $7e extends Ja{constructor(e,n=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],o=new Yt;o.setIndex(new Bn(r,1)),o.setAttribute("position",new Dt(i,3)),super(o,new Vi({color:n,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const n=this.box;n.isEmpty()||(n.getCenter(this.position),n.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}}class H7e extends eu{constructor(e,n=1,r=16776960){const i=r,o=[1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],a=new Yt;a.setAttribute("position",new Dt(o,3)),a.computeBoundingSphere(),super(a,new Vi({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=n;const s=[1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],l=new Yt;l.setAttribute("position",new Dt(s,3)),l.computeBoundingSphere(),this.add(new Kr(l,new lu({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){let n=-this.plane.constant;Math.abs(n)<1e-8&&(n=1e-8),this.scale.set(.5*this.size,.5*this.size,n),this.children[0].material.side=n<0?oi:Jf,this.lookAt(this.plane.normal),super.updateMatrixWorld(e)}}const $Y=new ge;let z_,rI;class V7e extends An{constructor(e=new ge(0,0,1),n=new ge(0,0,0),r=1,i=16776960,o=r*.2,a=o*.2){super(),this.type="ArrowHelper",z_===void 0&&(z_=new Yt,z_.setAttribute("position",new Dt([0,0,0,0,1,0],3)),rI=new th(0,.5,1,5,1),rI.translate(0,-.5,0)),this.position.copy(n),this.line=new eu(z_,new Vi({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Kr(rI,new lu({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,o,a)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{$Y.set(e.z,0,-e.x).normalize();const n=Math.acos(e.y);this.quaternion.setFromAxisAngle($Y,n)}}setLength(e,n=e*.2,r=n*.2){this.line.scale.set(1,Math.max(1e-4,e-n),1),this.line.updateMatrix(),this.cone.scale.set(r,n,r),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}}class cce extends Ja{constructor(e=1){const n=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new Yt;i.setAttribute("position",new Dt(n,3)),i.setAttribute("color",new Dt(r,3));const o=new Vi({vertexColors:!0,toneMapped:!1});super(i,o),this.type="AxesHelper"}setColors(e,n,r){const i=new bt,o=this.geometry.attributes.color.array;return i.set(e),i.toArray(o,0),i.toArray(o,3),i.set(n),i.toArray(o,6),i.toArray(o,9),i.set(r),i.toArray(o,12),i.toArray(o,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class uce{constructor(){this.type="ShapePath",this.color=new bt,this.subPaths=[],this.currentPath=null}moveTo(e,n){return this.currentPath=new u1,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,n),this}lineTo(e,n){return this.currentPath.lineTo(e,n),this}quadraticCurveTo(e,n,r,i){return this.currentPath.quadraticCurveTo(e,n,r,i),this}bezierCurveTo(e,n,r,i,o,a){return this.currentPath.bezierCurveTo(e,n,r,i,o,a),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e,n){function r(w){const T=[];for(let C=0,P=w.length;C<P;C++){const M=w[C],k=new Gc;k.curves=M.curves,T.push(k)}return T}function i(w,T){const C=T.length;let P=!1;for(let M=C-1,k=0;k<C;M=k++){let I=T[M],U=T[k],z=U.x-I.x,O=U.y-I.y;if(Math.abs(O)>Number.EPSILON){if(O<0&&(I=T[k],z=-z,U=T[M],O=-O),w.y<I.y||w.y>U.y)continue;if(w.y===I.y){if(w.x===I.x)return!0}else{const B=O*(w.x-I.x)-z*(w.y-I.y);if(B===0)return!0;if(B<0)continue;P=!P}}else{if(w.y!==I.y)continue;if(U.x<=w.x&&w.x<=I.x||I.x<=w.x&&w.x<=U.x)return!0}}return P}const o=qc.isClockWise,a=this.subPaths;if(a.length===0)return[];if(n===!0)return r(a);let s,l,c;const u=[];if(a.length===1)return l=a[0],c=new Gc,c.curves=l.curves,u.push(c),u;let f=!o(a[0].getPoints());f=e?!f:f;const h=[],p=[];let y=[],g=0,v;p[g]=void 0,y[g]=[];for(let w=0,T=a.length;w<T;w++)l=a[w],v=l.getPoints(),s=o(v),s=e?!s:s,s?(!f&&p[g]&&g++,p[g]={s:new Gc,p:v},p[g].s.curves=l.curves,f&&g++,y[g]=[]):y[g].push({h:l,p:v[0]});if(!p[0])return r(a);if(p.length>1){let w=!1;const T=[];for(let C=0,P=p.length;C<P;C++)h[C]=[];for(let C=0,P=p.length;C<P;C++){const M=y[C];for(let k=0;k<M.length;k++){const I=M[k];let U=!0;for(let z=0;z<p.length;z++)i(I.p,p[z].p)&&(C!==z&&T.push({froms:C,tos:z,hole:k}),U?(U=!1,h[z].push(I)):w=!0);U&&h[C].push(I)}}T.length>0&&(w||(y=h))}let b;for(let w=0,T=p.length;w<T;w++){c=p[w].s,u.push(c),b=y[w];for(let C=0,P=b.length;C<P;C++)c.holes.push(b[C].h)}return u}}const dce=new Float32Array(1),W7e=new Int32Array(dce.buffer);class G7e{static toHalfFloat(e){e>65504&&(console.warn("THREE.DataUtils.toHalfFloat(): value exceeds 65504."),e=65504),dce[0]=e;const n=W7e[0];let r=n>>16&32768,i=n>>12&2047;const o=n>>23&255;return o<103?r:o>142?(r|=31744,r|=(o==255?0:1)&&n&8388607,r):o<113?(i|=2048,r|=(i>>114-o)+(i>>113-o&1),r):(r|=o-112<<10|i>>1,r+=i&1,r)}}const q7e=0,Y7e=1,X7e=0,K7e=1,J7e=2;function Z7e(t){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),t}function Q7e(t=[]){return console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),t.isMultiMaterial=!0,t.materials=t,t.clone=function(){return t.slice()},t}function eqe(t,e){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new dS(t,e)}function tqe(t){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new m2(t)}function nqe(t,e){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new dS(t,e)}function rqe(t){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new Lm(t)}function iqe(t){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new Lm(t)}function oqe(t){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new Lm(t)}function aqe(t,e,n){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new ge(t,e,n)}function sqe(t,e){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead."),new Bn(t,e).setUsage(Vv)}function lqe(t,e){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new ile(t,e)}function cqe(t,e){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new ole(t,e)}function uqe(t,e){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new ale(t,e)}function dqe(t,e){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new sle(t,e)}function fqe(t,e){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new c2(t,e)}function hqe(t,e){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new lle(t,e)}function pqe(t,e){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new u2(t,e)}function mqe(t,e){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new Dt(t,e)}function gqe(t,e){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new ule(t,e)}Is.create=function(t,e){return console.log("THREE.Curve.create() has been deprecated"),t.prototype=Object.create(Is.prototype),t.prototype.constructor=t,t.prototype.getPoint=e,t};u1.prototype.fromPoints=function(t){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(t)};function yqe(t){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new cce(t)}function vqe(t,e){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new lce(t,e)}function xqe(t,e){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new Ja(new q5(t.geometry),new Vi({color:e!==void 0?e:16777215}))}sce.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")};oce.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")};function wqe(t,e){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new Ja(new Q5(t.geometry),new Vi({color:e!==void 0?e:16777215}))}la.prototype.extractUrlBase=function(t){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),FC.extractUrlBase(t)};la.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}};function bqe(t){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new sc(t)}function Sqe(t){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new zle(t)}H0.prototype.center=function(t){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(t)};H0.prototype.empty=function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()};H0.prototype.isIntersectionBox=function(t){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)};H0.prototype.size=function(t){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(t)};es.prototype.center=function(t){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(t)};es.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()};es.prototype.isIntersectionBox=function(t){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)};es.prototype.isIntersectionSphere=function(t){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)};es.prototype.size=function(t){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(t)};Ad.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()};oS.prototype.setFromMatrix=function(t){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(t)};rce.prototype.center=function(t){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(t)};zi.prototype.flattenToArrayOffset=function(t,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)};zi.prototype.multiplyVector3=function(t){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)};zi.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")};zi.prototype.applyToBufferAttribute=function(t){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)};zi.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")};zi.prototype.getInverse=function(t){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(t).invert()};Ut.prototype.extractPosition=function(t){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(t)};Ut.prototype.flattenToArrayOffset=function(t,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)};Ut.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),new ge().setFromMatrixColumn(this,3)};Ut.prototype.setRotationFromQuaternion=function(t){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(t)};Ut.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")};Ut.prototype.multiplyVector3=function(t){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)};Ut.prototype.multiplyVector4=function(t){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)};Ut.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")};Ut.prototype.rotateAxis=function(t){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),t.transformDirection(this)};Ut.prototype.crossVector=function(t){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)};Ut.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")};Ut.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")};Ut.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")};Ut.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")};Ut.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")};Ut.prototype.applyToBufferAttribute=function(t){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)};Ut.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")};Ut.prototype.makeFrustum=function(t,e,n,r,i,o){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(t,e,r,n,i,o)};Ut.prototype.getInverse=function(t){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(t).invert()};Kl.prototype.isIntersectionLine=function(t){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(t)};io.prototype.multiplyVector3=function(t){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),t.applyQuaternion(this)};io.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()};Md.prototype.isIntersectionBox=function(t){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)};Md.prototype.isIntersectionPlane=function(t){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(t)};Md.prototype.isIntersectionSphere=function(t){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)};Si.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()};Si.prototype.barycoordFromPoint=function(t,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(t,e)};Si.prototype.midpoint=function(t){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(t)};Si.prototypenormal=function(t){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(t)};Si.prototype.plane=function(t){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(t)};Si.barycoordFromPoint=function(t,e,n,r,i){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Si.getBarycoord(t,e,n,r,i)};Si.normal=function(t,e,n,r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Si.getNormal(t,e,n,r)};Gc.prototype.extractAllPoints=function(t){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(t)};Gc.prototype.extrude=function(t){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new nu(this,t)};Gc.prototype.makeGeometry=function(t){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new cm(this,t)};rt.prototype.fromAttribute=function(t,e,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)};rt.prototype.distanceToManhattan=function(t){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)};rt.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()};ge.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")};ge.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")};ge.prototype.getPositionFromMatrix=function(t){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(t)};ge.prototype.getScaleFromMatrix=function(t){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(t)};ge.prototype.getColumnFromMatrix=function(t,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,t)};ge.prototype.applyProjection=function(t){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(t)};ge.prototype.fromAttribute=function(t,e,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)};ge.prototype.distanceToManhattan=function(t){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)};ge.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()};Kn.prototype.fromAttribute=function(t,e,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)};Kn.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()};An.prototype.getChildByName=function(t){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(t)};An.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")};An.prototype.translate=function(t,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,t)};An.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")};An.prototype.applyMatrix=function(t){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)};Object.defineProperties(An.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(t){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=t}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}});Kr.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")};Object.defineProperties(Kr.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),Yse},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}});g2.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")};ci.prototype.setLens=function(t,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),e!==void 0&&(this.filmGauge=e),this.setFocalLength(t)};Object.defineProperties(lc.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(t){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=t}},shadowCameraLeft:{set:function(t){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=t}},shadowCameraRight:{set:function(t){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=t}},shadowCameraTop:{set:function(t){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=t}},shadowCameraBottom:{set:function(t){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=t}},shadowCameraNear:{set:function(t){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=t}},shadowCameraFar:{set:function(t){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=t}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(t){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=t}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(t){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=t}},shadowMapHeight:{set:function(t){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=t}}});Object.defineProperties(Bn.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===Vv},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(Vv)}}});Bn.prototype.setDynamic=function(t){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(t===!0?Vv:Hv),this};Bn.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},Bn.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")};Yt.prototype.addIndex=function(t){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(t)};Yt.prototype.addAttribute=function(t,e){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),!(e&&e.isBufferAttribute)&&!(e&&e.isInterleavedBufferAttribute)?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(t,new Bn(arguments[1],arguments[2]))):t==="index"?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):this.setAttribute(t,e)};Yt.prototype.addDrawCall=function(t,e,n){n!==void 0&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(t,e)};Yt.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()};Yt.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")};Yt.prototype.removeAttribute=function(t){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(t)};Yt.prototype.applyMatrix=function(t){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)};Object.defineProperties(Yt.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}});Om.prototype.setDynamic=function(t){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(t===!0?Vv:Hv),this};Om.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")};nu.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")};nu.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")};nu.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")};uS.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")};_2.prototype.onUpdate=function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this};Object.defineProperties(So.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new bt}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=t===C5}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(t){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=t}},vertexTangents:{get:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")},set:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")}}});Object.defineProperties(wd.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(t){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=t}}});ar.prototype.clearTarget=function(t,e,n,r){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(t),this.clear(e,n,r)};ar.prototype.animate=function(t){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(t)};ar.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()};ar.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()};ar.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision};ar.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()};ar.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")};ar.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")};ar.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")};ar.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")};ar.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")};ar.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")};ar.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures};ar.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")};ar.prototype.enableScissorTest=function(t){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(t)};ar.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")};ar.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")};ar.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")};ar.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")};ar.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")};ar.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")};ar.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")};ar.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")};ar.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")};ar.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()};Object.defineProperties(ar.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=t}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=t}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(t){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=t===!0?ph:Vo}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}});Object.defineProperties(Sle.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}});function Eqe(t,e,n){return console.warn("THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options )."),new f2(t,n)}Object.defineProperties(ic.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=t}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=t}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=t}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=t}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(t){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=t}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(t){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=t}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(t){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=t}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(t){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=t}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(t){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=t}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(t){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=t}}});bz.prototype.load=function(t){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const e=this;return new qle().load(t,function(r){e.setBuffer(r)}),this};Kle.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()};d2.prototype.updateCubeMap=function(t,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(t,e)};d2.prototype.clear=function(t,e,n,r){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(t,e,n,r)};jm.crossOrigin=void 0;jm.loadTexture=function(t,e,n,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const i=new Ule;i.setCrossOrigin(this.crossOrigin);const o=i.load(t,n,void 0,r);return e&&(o.mapping=e),o};jm.loadTextureCube=function(t,e,n,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const i=new Fle;i.setCrossOrigin(this.crossOrigin);const o=i.load(t,n,void 0,r);return e&&(o.mapping=e),o};jm.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")};jm.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};function _qe(){console.error("THREE.CanvasRenderer has been removed")}function Tqe(){console.error("THREE.JSONLoader has been removed.")}const Cqe={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")}};function Aqe(){console.error("THREE.LensFlare has been moved to /examples/jsm/objects/Lensflare.js")}function Mqe(){return console.error("THREE.ParametricGeometry has been moved to /examples/jsm/geometries/ParametricGeometry.js"),new Yt}function Pqe(){return console.error("THREE.TextGeometry has been moved to /examples/jsm/geometries/TextGeometry.js"),new Yt}function kqe(){console.error("THREE.FontLoader has been moved to /examples/jsm/loaders/FontLoader.js")}function Nqe(){console.error("THREE.Font has been moved to /examples/jsm/loaders/FontLoader.js")}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:T5}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=T5);const Rqe=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:P5,AddEquation:xp,AddOperation:Yae,AdditiveAnimationBlendMode:N5,AdditiveBlending:yD,AlphaFormat:ose,AlwaysDepth:Bae,AlwaysStencilFunc:Zse,AmbientLight:gz,AmbientLightProbe:Xle,AnimationClip:g1,AnimationLoader:m7e,AnimationMixer:Qle,AnimationObjectGroup:Zle,AnimationUtils:Ir,ArcCurve:Y5,ArrayCamera:$5,ArrowHelper:V7e,Audio:bz,AudioAnalyser:Kle,AudioContext:xz,AudioListener:b7e,AudioLoader:qle,AxesHelper:cce,AxisHelper:yqe,BackSide:oi,BasicDepthPacking:Kse,BasicShadowMap:Aae,BinaryTextureLoader:Sqe,Bone:y2,BooleanKeyframeTrack:Dm,BoundingBoxHelper:vqe,Box2:H0,Box3:es,Box3Helper:$7e,BoxBufferGeometry:xd,BoxGeometry:xd,BoxHelper:lce,BufferAttribute:Bn,BufferGeometry:Yt,BufferGeometryLoader:Wle,ByteType:Qae,Cache:dm,Camera:F0,CameraHelper:B7e,CanvasRenderer:_qe,CanvasTexture:G5,CatmullRomCurve3:K5,CineonToneMapping:Jae,CircleBufferGeometry:Gv,CircleGeometry:Gv,ClampToEdgeWrapping:$o,Clock:wz,Color:bt,ColorKeyframeTrack:cz,CompressedTexture:W5,CompressedTextureLoader:g7e,ConeBufferGeometry:qv,ConeGeometry:qv,CubeCamera:d2,CubeReflectionMapping:O0,CubeRefractionMapping:L0,CubeTexture:z0,CubeTextureLoader:Fle,CubeUVReflectionMapping:D0,CubeUVRefractionMapping:iS,CubicBezierCurve:x2,CubicBezierCurve3:J5,CubicInterpolant:Ile,CullFaceBack:gD,CullFaceFront:Cae,CullFaceFrontBack:y8e,CullFaceNone:Tae,Curve:Is,CurvePath:kle,CustomBlending:Mae,CustomToneMapping:Zae,CylinderBufferGeometry:th,CylinderGeometry:th,Cylindrical:I7e,DataTexture:Kp,DataTexture2DArray:h2,DataTexture3D:B5,DataTextureLoader:zle,DataUtils:G7e,DecrementStencilOp:M8e,DecrementWrapStencilOp:k8e,DefaultLoadingManager:Dle,DepthFormat:Yp,DepthStencilFormat:$v,DepthTexture:Mle,DirectionalLight:mz,DirectionalLightHelper:U7e,DiscreteInterpolant:Ole,DodecahedronBufferGeometry:Yv,DodecahedronGeometry:Yv,DoubleSide:vd,DstAlphaFactor:Oae,DstColorFactor:Dae,DynamicBufferAttribute:sqe,DynamicCopyUsage:V8e,DynamicDrawUsage:Vv,DynamicReadUsage:B8e,EdgesGeometry:q5,EdgesHelper:xqe,EllipseCurve:fS,EqualDepth:Hae,EqualStencilFunc:I8e,EquirectangularReflectionMapping:t1,EquirectangularRefractionMapping:n1,Euler:Im,EventDispatcher:mh,ExtrudeBufferGeometry:nu,ExtrudeGeometry:nu,FaceColors:K7e,FileLoader:sc,FlatShading:C5,Float16BufferAttribute:cle,Float32Attribute:mqe,Float32BufferAttribute:Dt,Float64Attribute:gqe,Float64BufferAttribute:ule,FloatType:zc,Fog:cS,FogExp2:lS,Font:Nqe,FontLoader:kqe,FrontSide:Jf,Frustum:oS,GLBufferAttribute:tce,GLSL1:G8e,GLSL3:RD,GammaEncoding:a2,GreaterDepth:Wae,GreaterEqualDepth:Vae,GreaterEqualStencilFunc:F8e,GreaterStencilFunc:L8e,GridHelper:sce,Group:Dp,HalfFloatType:Gp,HemisphereLight:dz,HemisphereLightHelper:F7e,HemisphereLightProbe:Yle,IcosahedronBufferGeometry:Xv,IcosahedronGeometry:Xv,ImageBitmapLoader:Gle,ImageLoader:y1,ImageUtils:jm,ImmediateRenderObject:ice,IncrementStencilOp:A8e,IncrementWrapStencilOp:P8e,InstancedBufferAttribute:eh,InstancedBufferGeometry:E2,InstancedInterleavedBuffer:ece,InstancedMesh:H5,Int16Attribute:dqe,Int16BufferAttribute:sle,Int32Attribute:hqe,Int32BufferAttribute:lle,Int8Attribute:lqe,Int8BufferAttribute:ile,IntType:tse,InterleavedBuffer:Om,InterleavedBufferAttribute:Qf,Interpolant:bd,InterpolateDiscrete:a1,InterpolateLinear:s1,InterpolateSmooth:aT,InvertStencilOp:N8e,JSONLoader:Tqe,KeepStencilOp:sT,KeyframeTrack:fc,LOD:Cle,LatheBufferGeometry:Kv,LatheGeometry:Kv,Layers:iv,LensFlare:Aqe,LessDepth:$ae,LessEqualDepth:OC,LessEqualStencilFunc:O8e,LessStencilFunc:j8e,Light:lc,LightProbe:mS,Line:eu,Line3:rce,LineBasicMaterial:Vi,LineCurve:hS,LineCurve3:Ple,LineDashedMaterial:sz,LineLoop:V5,LinePieces:Y7e,LineSegments:Ja,LineStrip:q7e,LinearEncoding:Vo,LinearFilter:Xr,LinearInterpolant:lz,LinearMipMapLinearFilter:S8e,LinearMipMapNearestFilter:b8e,LinearMipmapLinearFilter:Nm,LinearMipmapNearestFilter:k5,LinearToneMapping:Xae,Loader:la,LoaderUtils:FC,LoadingManager:uz,LogLuvEncoding:Xse,LoopOnce:Wse,LoopPingPong:qse,LoopRepeat:Gse,LuminanceAlphaFormat:sse,LuminanceFormat:ase,MOUSE:mp,Material:So,MaterialLoader:Vle,Math:wq,MathUtils:wq,Matrix3:zi,Matrix4:Ut,MaxEquation:bD,Mesh:Kr,MeshBasicMaterial:lu,MeshDepthMaterial:aS,MeshDistanceMaterial:sS,MeshFaceMaterial:Z7e,MeshLambertMaterial:oz,MeshMatcapMaterial:az,MeshNormalMaterial:iz,MeshPhongMaterial:nz,MeshPhysicalMaterial:tz,MeshStandardMaterial:Jp,MeshToonMaterial:rz,MinEquation:wD,MirroredRepeatWrapping:i1,MixOperation:qae,MultiMaterial:Q7e,MultiplyBlending:xD,MultiplyOperation:rS,NearestFilter:Fi,NearestMipMapLinearFilter:w8e,NearestMipMapNearestFilter:x8e,NearestMipmapLinearFilter:DC,NearestMipmapNearestFilter:LC,NeverDepth:Uae,NeverStencilFunc:R8e,NoBlending:ad,NoColors:X7e,NoToneMapping:sd,NormalAnimationBlendMode:o2,NormalBlending:nv,NotEqualDepth:Gae,NotEqualStencilFunc:D8e,NumberKeyframeTrack:p1,Object3D:An,ObjectLoader:y7e,ObjectSpaceNormalMap:Jse,OctahedronBufferGeometry:lm,OctahedronGeometry:lm,OneFactor:Rae,OneMinusDstAlphaFactor:Lae,OneMinusDstColorFactor:Fae,OneMinusSrcAlphaFactor:M5,OneMinusSrcColorFactor:Iae,OrthographicCamera:ld,PCFShadowMap:r2,PCFSoftShadowMap:Ww,PMREMGenerator:ple,ParametricGeometry:Mqe,Particle:tqe,ParticleBasicMaterial:iqe,ParticleSystem:nqe,ParticleSystemMaterial:oqe,Path:u1,PerspectiveCamera:ci,Plane:Kl,PlaneBufferGeometry:Qc,PlaneGeometry:Qc,PlaneHelper:H7e,PointCloud:eqe,PointCloudMaterial:rqe,PointLight:pz,PointLightHelper:L7e,Points:dS,PointsMaterial:Lm,PolarGridHelper:z7e,PolyhedronBufferGeometry:tu,PolyhedronGeometry:tu,PositionalAudio:E7e,PropertyBinding:Gn,PropertyMixer:Jle,QuadraticBezierCurve:w2,QuadraticBezierCurve3:pS,Quaternion:io,QuaternionKeyframeTrack:$0,QuaternionLinearInterpolant:Lle,REVISION:T5,RGBADepthPacking:O5,RGBAFormat:ro,RGBAIntegerFormat:pse,RGBA_ASTC_10x10_Format:Ase,RGBA_ASTC_10x5_Format:_se,RGBA_ASTC_10x6_Format:Tse,RGBA_ASTC_10x8_Format:Cse,RGBA_ASTC_12x10_Format:Mse,RGBA_ASTC_12x12_Format:Pse,RGBA_ASTC_4x4_Format:gse,RGBA_ASTC_5x4_Format:yse,RGBA_ASTC_5x5_Format:vse,RGBA_ASTC_6x5_Format:xse,RGBA_ASTC_6x6_Format:wse,RGBA_ASTC_8x5_Format:bse,RGBA_ASTC_8x6_Format:Sse,RGBA_ASTC_8x8_Format:Ese,RGBA_BPTC_Format:kse,RGBA_ETC2_EAC_Format:ND,RGBA_PVRTC_2BPPV1_Format:PD,RGBA_PVRTC_4BPPV1_Format:MD,RGBA_S3TC_DXT1_Format:ED,RGBA_S3TC_DXT3_Format:_D,RGBA_S3TC_DXT5_Format:TD,RGBDEncoding:I5,RGBEEncoding:s2,RGBEFormat:lse,RGBFormat:qp,RGBIntegerFormat:hse,RGBM16Encoding:j5,RGBM7Encoding:R5,RGB_ETC1_Format:mse,RGB_ETC2_Format:kD,RGB_PVRTC_2BPPV1_Format:AD,RGB_PVRTC_4BPPV1_Format:CD,RGB_S3TC_DXT1_Format:SD,RGFormat:dse,RGIntegerFormat:fse,RawShaderMaterial:U0,Ray:Md,Raycaster:nce,RectAreaLight:yz,RedFormat:cse,RedIntegerFormat:use,ReinhardToneMapping:Kae,RepeatWrapping:r1,ReplaceStencilOp:C8e,ReverseSubtractEquation:kae,RingBufferGeometry:Jv,RingGeometry:Jv,SRGB8_ALPHA8_ASTC_10x10_Format:$se,SRGB8_ALPHA8_ASTC_10x5_Format:zse,SRGB8_ALPHA8_ASTC_10x6_Format:Use,SRGB8_ALPHA8_ASTC_10x8_Format:Bse,SRGB8_ALPHA8_ASTC_12x10_Format:Hse,SRGB8_ALPHA8_ASTC_12x12_Format:Vse,SRGB8_ALPHA8_ASTC_4x4_Format:Nse,SRGB8_ALPHA8_ASTC_5x4_Format:Rse,SRGB8_ALPHA8_ASTC_5x5_Format:jse,SRGB8_ALPHA8_ASTC_6x5_Format:Ise,SRGB8_ALPHA8_ASTC_6x6_Format:Ose,SRGB8_ALPHA8_ASTC_8x5_Format:Lse,SRGB8_ALPHA8_ASTC_8x6_Format:Dse,SRGB8_ALPHA8_ASTC_8x8_Format:Fse,Scene:uS,SceneUtils:Cqe,ShaderChunk:_n,ShaderLib:Jl,ShaderMaterial:wd,ShadowMaterial:ez,Shape:Gc,ShapeBufferGeometry:cm,ShapeGeometry:cm,ShapePath:uce,ShapeUtils:qc,ShortType:ese,Skeleton:v2,SkeletonHelper:oce,SkinnedMesh:g2,SmoothShading:v8e,Sphere:Ad,SphereBufferGeometry:um,SphereGeometry:um,Spherical:zD,SphericalHarmonics3:vz,SplineCurve:b2,SpotLight:hz,SpotLightHelper:O7e,Sprite:m2,SpriteMaterial:p2,SrcAlphaFactor:A5,SrcAlphaSaturateFactor:zae,SrcColorFactor:jae,StaticCopyUsage:H8e,StaticDrawUsage:Hv,StaticReadUsage:U8e,StereoCamera:x7e,StreamCopyUsage:W8e,StreamDrawUsage:z8e,StreamReadUsage:$8e,StringKeyframeTrack:Fm,SubtractEquation:Pae,SubtractiveBlending:vD,TOUCH:gp,TangentSpaceNormalMap:Rm,TetrahedronBufferGeometry:Zv,TetrahedronGeometry:Zv,TextGeometry:Pqe,Texture:Hi,TextureLoader:Ule,TorusBufferGeometry:Qv,TorusGeometry:Qv,TorusKnotBufferGeometry:e0,TorusKnotGeometry:e0,Triangle:Si,TriangleFanDrawMode:_8e,TriangleStripDrawMode:E8e,TrianglesDrawMode:Yse,TubeBufferGeometry:t0,TubeGeometry:t0,UVMapping:i2,Uint16Attribute:fqe,Uint16BufferAttribute:c2,Uint32Attribute:pqe,Uint32BufferAttribute:u2,Uint8Attribute:cqe,Uint8BufferAttribute:ole,Uint8ClampedAttribute:uqe,Uint8ClampedBufferAttribute:ale,Uniform:_2,UniformsLib:Ct,UniformsUtils:F5,UnsignedByteType:Zc,UnsignedInt248Type:rv,UnsignedIntType:Gw,UnsignedShort4444Type:nse,UnsignedShort5551Type:rse,UnsignedShort565Type:ise,UnsignedShortType:o1,VSMShadowMap:Ip,Vector2:rt,Vector3:ge,Vector4:Kn,VectorKeyframeTrack:m1,Vertex:aqe,VertexColors:J7e,VideoTexture:Ale,WebGL1Renderer:_le,WebGLCubeRenderTarget:f2,WebGLMultipleRenderTargets:nle,WebGLMultisampleRenderTarget:D5,WebGLRenderTarget:ic,WebGLRenderTargetCube:Eqe,WebGLRenderer:ar,WebGLUtils:Ele,WireframeGeometry:Q5,WireframeHelper:wqe,WrapAroundEnding:l1,XHRLoader:bqe,ZeroCurvatureEnding:Op,ZeroFactor:Nae,ZeroSlopeEnding:Lp,ZeroStencilOp:T8e,sRGBEncoding:ph},Symbol.toStringTag,{value:"Module"}));var iI={exports:{}},wf={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HY;function jqe(){return HY||(HY=1,wf.ConcurrentRoot=1,wf.ContinuousEventPriority=4,wf.DefaultEventPriority=16,wf.DiscreteEventPriority=1,wf.IdleEventPriority=536870912,wf.LegacyRoot=0),wf}var VY;function Iqe(){return VY||(VY=1,iI.exports=jqe()),iI.exports}var By=Iqe();function Oqe(t){let e;const n=new Set,r=(c,u)=>{const f=typeof c=="function"?c(e):c;if(f!==e){const h=e;e=u?f:Object.assign({},e,f),n.forEach(p=>p(e,h))}},i=()=>e,o=(c,u=i,f=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let h=u(e);function p(){const y=u(e);if(!f(h,y)){const g=h;c(h=y,g)}}return n.add(p),()=>n.delete(p)},l={setState:r,getState:i,subscribe:(c,u,f)=>u||f?o(c,u,f):(n.add(c),()=>n.delete(c)),destroy:()=>n.clear()};return e=t(r,i,l),l}const Lqe=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),WY=Lqe?_.useEffect:_.useLayoutEffect;function Dqe(t){const e=typeof t=="function"?Oqe(t):t,n=(r=e.getState,i=Object.is)=>{const[,o]=_.useReducer(v=>v+1,0),a=e.getState(),s=_.useRef(a),l=_.useRef(r),c=_.useRef(i),u=_.useRef(!1),f=_.useRef();f.current===void 0&&(f.current=r(a));let h,p=!1;(s.current!==a||l.current!==r||c.current!==i||u.current)&&(h=r(a),p=!i(f.current,h)),WY(()=>{p&&(f.current=h),s.current=a,l.current=r,c.current=i,u.current=!1});const y=_.useRef(a);WY(()=>{const v=()=>{try{const w=e.getState(),T=l.current(w);c.current(f.current,T)||(s.current=w,f.current=T,o())}catch{u.current=!0,o()}},b=e.subscribe(v);return e.getState()!==y.current&&v(),b},[]);const g=p?h:f.current;return _.useDebugValue(g),g};return Object.assign(n,e),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[n,e];return{next(){const i=r.length<=0;return{value:r.shift(),done:i}}}},n}const Fqe=t=>typeof t=="object"&&typeof t.then=="function",Fp=[];function fce(t,e,n=(r,i)=>r===i){if(t===e)return!0;if(!t||!e)return!1;const r=t.length;if(e.length!==r)return!1;for(let i=0;i<r;i++)if(!n(t[i],e[i]))return!1;return!0}function hce(t,e=null,n=!1,r={}){e===null&&(e=[t]);for(const o of Fp)if(fce(e,o.keys,o.equal)){if(n)return;if(Object.prototype.hasOwnProperty.call(o,"error"))throw o.error;if(Object.prototype.hasOwnProperty.call(o,"response"))return r.lifespan&&r.lifespan>0&&(o.timeout&&clearTimeout(o.timeout),o.timeout=setTimeout(o.remove,r.lifespan)),o.response;if(!n)throw o.promise}const i={keys:e,equal:r.equal,remove:()=>{const o=Fp.indexOf(i);o!==-1&&Fp.splice(o,1)},promise:(Fqe(t)?t:t(...e)).then(o=>{i.response=o,r.lifespan&&r.lifespan>0&&(i.timeout=setTimeout(i.remove,r.lifespan))}).catch(o=>i.error=o)};if(Fp.push(i),!n)throw i.promise}const pce=(t,e,n)=>hce(t,e,!1,n),zqe=(t,e,n)=>void hce(t,e,!0,n),Uqe=t=>{if(t===void 0||t.length===0)Fp.splice(0,Fp.length);else{const e=Fp.find(n=>fce(t,n.keys,n.equal));e&&e.remove()}};var oI={exports:{}},aI={exports:{}},sI={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GY;function Bqe(){return GY||(GY=1,function(t){function e(H,Y){var L=H.length;H.push(Y);e:for(;0<L;){var N=L-1>>>1,V=H[N];if(0<i(V,Y))H[N]=Y,H[L]=V,L=N;else break e}}function n(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var Y=H[0],L=H.pop();if(L!==Y){H[0]=L;e:for(var N=0,V=H.length,W=V>>>1;N<W;){var ne=2*(N+1)-1,se=H[ne],te=ne+1,ie=H[te];if(0>i(se,L))te<V&&0>i(ie,se)?(H[N]=ie,H[te]=L,N=te):(H[N]=se,H[ne]=L,N=ne);else if(te<V&&0>i(ie,L))H[N]=ie,H[te]=L,N=te;else break e}}return Y}function i(H,Y){var L=H.sortIndex-Y.sortIndex;return L!==0?L:H.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,s=a.now();t.unstable_now=function(){return a.now()-s}}var l=[],c=[],u=1,f=null,h=3,p=!1,y=!1,g=!1,v=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(H){for(var Y=n(c);Y!==null;){if(Y.callback===null)r(c);else if(Y.startTime<=H)r(c),Y.sortIndex=Y.expirationTime,e(l,Y);else break;Y=n(c)}}function C(H){if(g=!1,T(H),!y)if(n(l)!==null)y=!0,K(P);else{var Y=n(c);Y!==null&&Z(C,Y.startTime-H)}}function P(H,Y){y=!1,g&&(g=!1,b(I),I=-1),p=!0;var L=h;try{for(T(Y),f=n(l);f!==null&&(!(f.expirationTime>Y)||H&&!O());){var N=f.callback;if(typeof N=="function"){f.callback=null,h=f.priorityLevel;var V=N(f.expirationTime<=Y);Y=t.unstable_now(),typeof V=="function"?f.callback=V:f===n(l)&&r(l),T(Y)}else r(l);f=n(l)}if(f!==null)var W=!0;else{var ne=n(c);ne!==null&&Z(C,ne.startTime-Y),W=!1}return W}finally{f=null,h=L,p=!1}}var M=!1,k=null,I=-1,U=5,z=-1;function O(){return!(t.unstable_now()-z<U)}function B(){if(k!==null){var H=t.unstable_now();z=H;var Y=!0;try{Y=k(!0,H)}finally{Y?$():(M=!1,k=null)}}else M=!1}var $;if(typeof w=="function")$=function(){w(B)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,J=F.port2;F.port1.onmessage=B,$=function(){J.postMessage(null)}}else $=function(){v(B,0)};function K(H){k=H,M||(M=!0,$())}function Z(H,Y){I=v(function(){H(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_continueExecution=function(){y||p||(y=!0,K(P))},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(H){switch(h){case 1:case 2:case 3:var Y=3;break;default:Y=h}var L=h;h=Y;try{return H()}finally{h=L}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(H,Y){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var L=h;h=H;try{return Y()}finally{h=L}},t.unstable_scheduleCallback=function(H,Y,L){var N=t.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?N+L:N):L=N,H){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=L+V,H={id:u++,callback:Y,priorityLevel:H,startTime:L,expirationTime:V,sortIndex:-1},L>N?(H.sortIndex=L,e(c,H),n(l)===null&&H===n(c)&&(g?(b(I),I=-1):g=!0,Z(C,L-N))):(H.sortIndex=V,e(l,H),y||p||(y=!0,K(P))),H},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(H){var Y=h;return function(){var L=h;h=Y;try{return H.apply(this,arguments)}finally{h=L}}}}(sI)),sI}var qY;function $qe(){return qY||(qY=1,aI.exports=Bqe()),aI.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lI,YY;function Hqe(){return YY||(YY=1,lI=function(e){var n={},r=GC(),i=$qe(),o=Object.assign;function a(S){for(var E="https://reactjs.org/docs/error-decoder.html?invariant="+S,R=1;R<arguments.length;R++)E+="&args[]="+encodeURIComponent(arguments[R]);return"Minified React error #"+S+"; visit "+E+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),c=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),h=Symbol.for("react.profiler"),p=Symbol.for("react.provider"),y=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),b=Symbol.for("react.suspense_list"),w=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),C=Symbol.for("react.offscreen"),P=Symbol.iterator;function M(S){return S===null||typeof S!="object"?null:(S=P&&S[P]||S["@@iterator"],typeof S=="function"?S:null)}function k(S){if(S==null)return null;if(typeof S=="function")return S.displayName||S.name||null;if(typeof S=="string")return S;switch(S){case u:return"Fragment";case c:return"Portal";case h:return"Profiler";case f:return"StrictMode";case v:return"Suspense";case b:return"SuspenseList"}if(typeof S=="object")switch(S.$$typeof){case y:return(S.displayName||"Context")+".Consumer";case p:return(S._context.displayName||"Context")+".Provider";case g:var E=S.render;return S=S.displayName,S||(S=E.displayName||E.name||"",S=S!==""?"ForwardRef("+S+")":"ForwardRef"),S;case w:return E=S.displayName||null,E!==null?E:k(S.type)||"Memo";case T:E=S._payload,S=S._init;try{return k(S(E))}catch{}}return null}function I(S){var E=S.type;switch(S.tag){case 24:return"Cache";case 9:return(E.displayName||"Context")+".Consumer";case 10:return(E._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return S=E.render,S=S.displayName||S.name||"",E.displayName||(S!==""?"ForwardRef("+S+")":"ForwardRef");case 7:return"Fragment";case 5:return E;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return k(E);case 8:return E===f?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof E=="function")return E.displayName||E.name||null;if(typeof E=="string")return E}return null}function U(S){var E=S,R=S;if(S.alternate)for(;E.return;)E=E.return;else{S=E;do E=S,(E.flags&4098)!==0&&(R=E.return),S=E.return;while(S)}return E.tag===3?R:null}function z(S){if(U(S)!==S)throw Error(a(188))}function O(S){var E=S.alternate;if(!E){if(E=U(S),E===null)throw Error(a(188));return E!==S?null:S}for(var R=S,D=E;;){var q=R.return;if(q===null)break;var re=q.alternate;if(re===null){if(D=q.return,D!==null){R=D;continue}break}if(q.child===re.child){for(re=q.child;re;){if(re===R)return z(q),S;if(re===D)return z(q),E;re=re.sibling}throw Error(a(188))}if(R.return!==D.return)R=q,D=re;else{for(var _e=!1,Le=q.child;Le;){if(Le===R){_e=!0,R=q,D=re;break}if(Le===D){_e=!0,D=q,R=re;break}Le=Le.sibling}if(!_e){for(Le=re.child;Le;){if(Le===R){_e=!0,R=re,D=q;break}if(Le===D){_e=!0,D=re,R=q;break}Le=Le.sibling}if(!_e)throw Error(a(189))}}if(R.alternate!==D)throw Error(a(190))}if(R.tag!==3)throw Error(a(188));return R.stateNode.current===R?S:E}function B(S){return S=O(S),S!==null?$(S):null}function $(S){if(S.tag===5||S.tag===6)return S;for(S=S.child;S!==null;){var E=$(S);if(E!==null)return E;S=S.sibling}return null}function F(S){if(S.tag===5||S.tag===6)return S;for(S=S.child;S!==null;){if(S.tag!==4){var E=F(S);if(E!==null)return E}S=S.sibling}return null}var J=Array.isArray,K=e.getPublicInstance,Z=e.getRootHostContext,H=e.getChildHostContext,Y=e.prepareForCommit,L=e.resetAfterCommit,N=e.createInstance,V=e.appendInitialChild,W=e.finalizeInitialChildren,ne=e.prepareUpdate,se=e.shouldSetTextContent,te=e.createTextInstance,ie=e.scheduleTimeout,pe=e.cancelTimeout,de=e.noTimeout,ce=e.isPrimaryRenderer,he=e.supportsMutation,ee=e.supportsPersistence,xe=e.supportsHydration,be=e.getInstanceFromNode,Ae=e.preparePortalMount,Ce=e.getCurrentEventPriority,oe=e.detachDeletedInstance,ae=e.supportsMicrotasks,Se=e.scheduleMicrotask,me=e.supportsTestSelectors,ye=e.findFiberRoot,Ie=e.getBoundingRect,De=e.getTextContent,Ue=e.isHiddenSubtree,$e=e.matchAccessibilityRole,we=e.setFocusIfFocusable,fe=e.setupIntersectionObserver,ke=e.appendChild,Ne=e.appendChildToContainer,qe=e.commitTextUpdate,tt=e.commitMount,ot=e.commitUpdate,St=e.insertBefore,dt=e.insertInContainerBefore,ft=e.removeChild,Ee=e.removeChildFromContainer,Ve=e.resetTextContent,Xe=e.hideInstance,et=e.hideTextInstance,wt=e.unhideInstance,Bt=e.unhideTextInstance,en=e.clearContainer,Hn=e.cloneInstance,gr=e.createContainerChildSet,Mn=e.appendChildToContainerChildSet,Jt=e.finalizeContainerChildren,fn=e.replaceContainerChildren,Ar=e.cloneHiddenInstance,gn=e.cloneHiddenTextInstance,un=e.canHydrateInstance,ln=e.canHydrateTextInstance,Nn=e.canHydrateSuspenseInstance,Zt=e.isSuspenseInstancePending,le=e.isSuspenseInstanceFallback,Me=e.registerSuspenseInstanceRetry,Pe=e.getNextHydratableSibling,Re=e.getFirstHydratableChild,ze=e.getFirstHydratableChildWithinContainer,at=e.getFirstHydratableChildWithinSuspenseInstance,it=e.hydrateInstance,pt=e.hydrateTextInstance,Qt=e.hydrateSuspenseInstance,Pn=e.getNextHydratableInstanceAfterSuspenseInstance,cn=e.commitHydratedContainer,yn=e.commitHydratedSuspenseInstance,tr=e.clearSuspenseBoundary,ua=e.clearSuspenseBoundaryFromContainer,vn=e.shouldDeleteUnhydratedTailInstances,ns=e.didNotMatchHydratedContainerTextInstance,Vn=e.didNotMatchHydratedTextInstance,yt;function di(S){if(yt===void 0)try{throw Error()}catch(R){var E=R.stack.trim().match(/\n( *(at )?)/);yt=E&&E[1]||""}return`
`+yt+S}var Eo=!1;function Qr(S,E){if(!S||Eo)return"";Eo=!0;var R=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(E)if(E=function(){throw Error()},Object.defineProperty(E.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(E,[])}catch(mt){var D=mt}Reflect.construct(S,[],E)}else{try{E.call()}catch(mt){D=mt}S.call(E.prototype)}else{try{throw Error()}catch(mt){D=mt}S()}}catch(mt){if(mt&&D&&typeof mt.stack=="string"){for(var q=mt.stack.split(`
`),re=D.stack.split(`
`),_e=q.length-1,Le=re.length-1;1<=_e&&0<=Le&&q[_e]!==re[Le];)Le--;for(;1<=_e&&0<=Le;_e--,Le--)if(q[_e]!==re[Le]){if(_e!==1||Le!==1)do if(_e--,Le--,0>Le||q[_e]!==re[Le]){var Qe=`
`+q[_e].replace(" at new "," at ");return S.displayName&&Qe.includes("<anonymous>")&&(Qe=Qe.replace("<anonymous>",S.displayName)),Qe}while(1<=_e&&0<=Le);break}}}finally{Eo=!1,Error.prepareStackTrace=R}return(S=S?S.displayName||S.name:"")?di(S):""}var Fn=Object.prototype.hasOwnProperty,Na=[],Mr=-1;function so(S){return{current:S}}function xn(S){0>Mr||(S.current=Na[Mr],Na[Mr]=null,Mr--)}function Xn(S,E){Mr++,Na[Mr]=S.current,S.current=E}var Pr={},fi=so(Pr),_i=so(!1),Os=Pr;function _o(S,E){var R=S.type.contextTypes;if(!R)return Pr;var D=S.stateNode;if(D&&D.__reactInternalMemoizedUnmaskedChildContext===E)return D.__reactInternalMemoizedMaskedChildContext;var q={},re;for(re in R)q[re]=E[re];return D&&(S=S.stateNode,S.__reactInternalMemoizedUnmaskedChildContext=E,S.__reactInternalMemoizedMaskedChildContext=q),q}function Hr(S){return S=S.childContextTypes,S!=null}function To(){xn(_i),xn(fi)}function cl(S,E,R){if(fi.current!==Pr)throw Error(a(168));Xn(fi,E),Xn(_i,R)}function kd(S,E,R){var D=S.stateNode;if(E=E.childContextTypes,typeof D.getChildContext!="function")return R;D=D.getChildContext();for(var q in D)if(!(q in E))throw Error(a(108,I(S)||"Unknown",q));return o({},R,D)}function hc(S){return S=(S=S.stateNode)&&S.__reactInternalMemoizedMergedChildContext||Pr,Os=fi.current,Xn(fi,S),Xn(_i,_i.current),!0}function Co(S,E,R){var D=S.stateNode;if(!D)throw Error(a(169));R?(S=kd(S,E,Os),D.__reactInternalMemoizedMergedChildContext=S,xn(_i),xn(fi),Xn(fi,S)):xn(_i),Xn(_i,R)}var Wo=Math.clz32?Math.clz32:Um,pc=Math.log,rs=Math.LN2;function Um(S){return S>>>=0,S===0?32:31-(pc(S)/rs|0)|0}var is=64,En=4194304;function Ls(S){switch(S&-S){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return S&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return S&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return S}}function mc(S,E){var R=S.pendingLanes;if(R===0)return 0;var D=0,q=S.suspendedLanes,re=S.pingedLanes,_e=R&268435455;if(_e!==0){var Le=_e&~q;Le!==0?D=Ls(Le):(re&=_e,re!==0&&(D=Ls(re)))}else _e=R&~q,_e!==0?D=Ls(_e):re!==0&&(D=Ls(re));if(D===0)return 0;if(E!==0&&E!==D&&(E&q)===0&&(q=D&-D,re=E&-E,q>=re||q===16&&(re&4194240)!==0))return E;if((D&4)!==0&&(D|=R&16),E=S.entangledLanes,E!==0)for(S=S.entanglements,E&=D;0<E;)R=31-Wo(E),q=1<<R,D|=S[R],E&=~q;return D}function Nd(S,E){switch(S){case 1:case 2:case 4:return E+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return E+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Rd(S,E){for(var R=S.suspendedLanes,D=S.pingedLanes,q=S.expirationTimes,re=S.pendingLanes;0<re;){var _e=31-Wo(re),Le=1<<_e,Qe=q[_e];Qe===-1?((Le&R)===0||(Le&D)!==0)&&(q[_e]=Nd(Le,E)):Qe<=E&&(S.expiredLanes|=Le),re&=~Le}}function Ds(S){return S=S.pendingLanes&-1073741825,S!==0?S:S&1073741824?1073741824:0}function uu(S){for(var E=[],R=0;31>R;R++)E.push(S);return E}function Ra(S,E,R){S.pendingLanes|=E,E!==536870912&&(S.suspendedLanes=0,S.pingedLanes=0),S=S.eventTimes,E=31-Wo(E),S[E]=R}function os(S,E){var R=S.pendingLanes&~E;S.pendingLanes=E,S.suspendedLanes=0,S.pingedLanes=0,S.expiredLanes&=E,S.mutableReadLanes&=E,S.entangledLanes&=E,E=S.entanglements;var D=S.eventTimes;for(S=S.expirationTimes;0<R;){var q=31-Wo(R),re=1<<q;E[q]=0,D[q]=-1,S[q]=-1,R&=~re}}function Gi(S,E){var R=S.entangledLanes|=E;for(S=S.entanglements;R;){var D=31-Wo(R),q=1<<D;q&E|S[D]&E&&(S[D]|=E),R&=~q}}var nn=0;function ja(S){return S&=-S,1<S?4<S?(S&268435455)!==0?16:536870912:4:1}var da=i.unstable_scheduleCallback,Fs=i.unstable_cancelCallback,Ia=i.unstable_shouldYield,Bm=i.unstable_requestPaint,yr=i.unstable_now,as=i.unstable_ImmediatePriority,$m=i.unstable_UserBlockingPriority,lo=i.unstable_NormalPriority,gc=i.unstable_IdlePriority,yc=null,fa=null;function ul(S){if(fa&&typeof fa.onCommitFiberRoot=="function")try{fa.onCommitFiberRoot(yc,S,void 0,(S.current.flags&128)===128)}catch{}}function vc(S,E){return S===E&&(S!==0||1/S===1/E)||S!==S&&E!==E}var Ti=typeof Object.is=="function"?Object.is:vc,Ci=null,zs=!1,Oa=!1;function du(S){Ci===null?Ci=[S]:Ci.push(S)}function xc(S){zs=!0,du(S)}function co(){if(!Oa&&Ci!==null){Oa=!0;var S=0,E=nn;try{var R=Ci;for(nn=1;S<R.length;S++){var D=R[S];do D=D(!0);while(D!==null)}Ci=null,zs=!1}catch(q){throw Ci!==null&&(Ci=Ci.slice(S+1)),da(as,co),q}finally{nn=E,Oa=!1}}return null}var wc=s.ReactCurrentBatchConfig;function Go(S,E){if(Ti(S,E))return!0;if(typeof S!="object"||S===null||typeof E!="object"||E===null)return!1;var R=Object.keys(S),D=Object.keys(E);if(R.length!==D.length)return!1;for(D=0;D<R.length;D++){var q=R[D];if(!Fn.call(E,q)||!Ti(S[q],E[q]))return!1}return!0}function dl(S){switch(S.tag){case 5:return di(S.type);case 16:return di("Lazy");case 13:return di("Suspense");case 19:return di("SuspenseList");case 0:case 2:case 15:return S=Qr(S.type,!1),S;case 11:return S=Qr(S.type.render,!1),S;case 1:return S=Qr(S.type,!0),S;default:return""}}function Ai(S,E){if(S&&S.defaultProps){E=o({},E),S=S.defaultProps;for(var R in S)E[R]===void 0&&(E[R]=S[R]);return E}return E}var hi=so(null),fl=null,qo=null,hl=null;function Mi(){hl=qo=fl=null}function pl(S,E,R){ce?(Xn(hi,E._currentValue),E._currentValue=R):(Xn(hi,E._currentValue2),E._currentValue2=R)}function ei(S){var E=hi.current;xn(hi),ce?S._currentValue=E:S._currentValue2=E}function pi(S,E,R){for(;S!==null;){var D=S.alternate;if((S.childLanes&E)!==E?(S.childLanes|=E,D!==null&&(D.childLanes|=E)):D!==null&&(D.childLanes&E)!==E&&(D.childLanes|=E),S===R)break;S=S.return}}function Vr(S,E){fl=S,hl=qo=null,S=S.dependencies,S!==null&&S.firstContext!==null&&((S.lanes&E)!==0&&(Ri=!0),S.firstContext=null)}function kr(S){var E=ce?S._currentValue:S._currentValue2;if(hl!==S)if(S={context:S,memoizedValue:E,next:null},qo===null){if(fl===null)throw Error(a(308));qo=S,fl.dependencies={lanes:0,firstContext:S}}else qo=qo.next=S;return E}var Ao=null,La=!1;function jd(S){S.updateQueue={baseState:S.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Y0(S,E){S=S.updateQueue,E.updateQueue===S&&(E.updateQueue={baseState:S.baseState,firstBaseUpdate:S.firstBaseUpdate,lastBaseUpdate:S.lastBaseUpdate,shared:S.shared,effects:S.effects})}function ml(S,E){return{eventTime:S,lane:E,tag:0,payload:null,callback:null,next:null}}function bc(S,E){var R=S.updateQueue;R!==null&&(R=R.shared,Gr!==null&&(S.mode&1)!==0&&(hn&2)===0?(S=R.interleaved,S===null?(E.next=E,Ao===null?Ao=[R]:Ao.push(R)):(E.next=S.next,S.next=E),R.interleaved=E):(S=R.pending,S===null?E.next=E:(E.next=S.next,S.next=E),R.pending=E))}function Hm(S,E,R){if(E=E.updateQueue,E!==null&&(E=E.shared,(R&4194240)!==0)){var D=E.lanes;D&=S.pendingLanes,R|=D,E.lanes=R,Gi(S,R)}}function Vm(S,E){var R=S.updateQueue,D=S.alternate;if(D!==null&&(D=D.updateQueue,R===D)){var q=null,re=null;if(R=R.firstBaseUpdate,R!==null){do{var _e={eventTime:R.eventTime,lane:R.lane,tag:R.tag,payload:R.payload,callback:R.callback,next:null};re===null?q=re=_e:re=re.next=_e,R=R.next}while(R!==null);re===null?q=re=E:re=re.next=E}else q=re=E;R={baseState:D.baseState,firstBaseUpdate:q,lastBaseUpdate:re,shared:D.shared,effects:D.effects},S.updateQueue=R;return}S=R.lastBaseUpdate,S===null?R.firstBaseUpdate=E:S.next=E,R.lastBaseUpdate=E}function Wm(S,E,R,D){var q=S.updateQueue;La=!1;var re=q.firstBaseUpdate,_e=q.lastBaseUpdate,Le=q.shared.pending;if(Le!==null){q.shared.pending=null;var Qe=Le,mt=Qe.next;Qe.next=null,_e===null?re=mt:_e.next=mt,_e=Qe;var Nt=S.alternate;Nt!==null&&(Nt=Nt.updateQueue,Le=Nt.lastBaseUpdate,Le!==_e&&(Le===null?Nt.firstBaseUpdate=mt:Le.next=mt,Nt.lastBaseUpdate=Qe))}if(re!==null){var an=q.baseState;_e=0,Nt=mt=Qe=null,Le=re;do{var Vt=Le.lane,pn=Le.eventTime;if((D&Vt)===Vt){Nt!==null&&(Nt=Nt.next={eventTime:pn,lane:0,tag:Le.tag,payload:Le.payload,callback:Le.callback,next:null});e:{var Pt=S,Zi=Le;switch(Vt=E,pn=R,Zi.tag){case 1:if(Pt=Zi.payload,typeof Pt=="function"){an=Pt.call(pn,an,Vt);break e}an=Pt;break e;case 3:Pt.flags=Pt.flags&-65537|128;case 0:if(Pt=Zi.payload,Vt=typeof Pt=="function"?Pt.call(pn,an,Vt):Pt,Vt==null)break e;an=o({},an,Vt);break e;case 2:La=!0}}Le.callback!==null&&Le.lane!==0&&(S.flags|=64,Vt=q.effects,Vt===null?q.effects=[Le]:Vt.push(Le))}else pn={eventTime:pn,lane:Vt,tag:Le.tag,payload:Le.payload,callback:Le.callback,next:null},Nt===null?(mt=Nt=pn,Qe=an):Nt=Nt.next=pn,_e|=Vt;if(Le=Le.next,Le===null){if(Le=q.shared.pending,Le===null)break;Vt=Le,Le=Vt.next,Vt.next=null,q.lastBaseUpdate=Vt,q.shared.pending=null}}while(!0);if(Nt===null&&(Qe=an),q.baseState=Qe,q.firstBaseUpdate=mt,q.lastBaseUpdate=Nt,E=q.shared.interleaved,E!==null){q=E;do _e|=q.lane,q=q.next;while(q!==E)}else re===null&&(q.shared.lanes=0);Hs|=_e,S.lanes=_e,S.memoizedState=an}}function ES(S,E,R){if(S=E.effects,E.effects=null,S!==null)for(E=0;E<S.length;E++){var D=S[E],q=D.callback;if(q!==null){if(D.callback=null,D=R,typeof q!="function")throw Error(a(191,q));q.call(D)}}}var _S=new r.Component().refs;function X0(S,E,R,D){E=S.memoizedState,R=R(D,E),R=R==null?E:o({},E,R),S.memoizedState=R,S.lanes===0&&(S.updateQueue.baseState=R)}var Gm={isMounted:function(S){return(S=S._reactInternals)?U(S)===S:!1},enqueueSetState:function(S,E,R){S=S._reactInternals;var D=zn(),q=hs(S),re=ml(D,q);re.payload=E,R!=null&&(re.callback=R),bc(S,re),E=ho(S,q,D),E!==null&&Hm(E,S,q)},enqueueReplaceState:function(S,E,R){S=S._reactInternals;var D=zn(),q=hs(S),re=ml(D,q);re.tag=1,re.payload=E,R!=null&&(re.callback=R),bc(S,re),E=ho(S,q,D),E!==null&&Hm(E,S,q)},enqueueForceUpdate:function(S,E){S=S._reactInternals;var R=zn(),D=hs(S),q=ml(R,D);q.tag=2,E!=null&&(q.callback=E),bc(S,q),E=ho(S,D,R),E!==null&&Hm(E,S,D)}};function K0(S,E,R,D,q,re,_e){return S=S.stateNode,typeof S.shouldComponentUpdate=="function"?S.shouldComponentUpdate(D,re,_e):E.prototype&&E.prototype.isPureReactComponent?!Go(R,D)||!Go(q,re):!0}function TS(S,E,R){var D=!1,q=Pr,re=E.contextType;return typeof re=="object"&&re!==null?re=kr(re):(q=Hr(E)?Os:fi.current,D=E.contextTypes,re=(D=D!=null)?_o(S,q):Pr),E=new E(R,re),S.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,E.updater=Gm,S.stateNode=E,E._reactInternals=S,D&&(S=S.stateNode,S.__reactInternalMemoizedUnmaskedChildContext=q,S.__reactInternalMemoizedMaskedChildContext=re),E}function CS(S,E,R,D){S=E.state,typeof E.componentWillReceiveProps=="function"&&E.componentWillReceiveProps(R,D),typeof E.UNSAFE_componentWillReceiveProps=="function"&&E.UNSAFE_componentWillReceiveProps(R,D),E.state!==S&&Gm.enqueueReplaceState(E,E.state,null)}function J0(S,E,R,D){var q=S.stateNode;q.props=R,q.state=S.memoizedState,q.refs=_S,jd(S);var re=E.contextType;typeof re=="object"&&re!==null?q.context=kr(re):(re=Hr(E)?Os:fi.current,q.context=_o(S,re)),q.state=S.memoizedState,re=E.getDerivedStateFromProps,typeof re=="function"&&(X0(S,E,re,R),q.state=S.memoizedState),typeof E.getDerivedStateFromProps=="function"||typeof q.getSnapshotBeforeUpdate=="function"||typeof q.UNSAFE_componentWillMount!="function"&&typeof q.componentWillMount!="function"||(E=q.state,typeof q.componentWillMount=="function"&&q.componentWillMount(),typeof q.UNSAFE_componentWillMount=="function"&&q.UNSAFE_componentWillMount(),E!==q.state&&Gm.enqueueReplaceState(q,q.state,null),Wm(S,R,q,D),q.state=S.memoizedState),typeof q.componentDidMount=="function"&&(S.flags|=4194308)}var Id=[],Sc=0,qm=null,Ym=0,Da=[],ha=0,fu=null,gl=1,yl="";function hu(S,E){Id[Sc++]=Ym,Id[Sc++]=qm,qm=S,Ym=E}function AS(S,E,R){Da[ha++]=gl,Da[ha++]=yl,Da[ha++]=fu,fu=S;var D=gl;S=yl;var q=32-Wo(D)-1;D&=~(1<<q),R+=1;var re=32-Wo(E)+q;if(30<re){var _e=q-q%5;re=(D&(1<<_e)-1).toString(32),D>>=_e,q-=_e,gl=1<<32-Wo(E)+q|R<<q|D,yl=re+S}else gl=1<<re|R<<q|D,yl=S}function Z0(S){S.return!==null&&(hu(S,1),AS(S,1,0))}function Q0(S){for(;S===qm;)qm=Id[--Sc],Id[Sc]=null,Ym=Id[--Sc],Id[Sc]=null;for(;S===fu;)fu=Da[--ha],Da[ha]=null,yl=Da[--ha],Da[ha]=null,gl=Da[--ha],Da[ha]=null}var Mo=null,qi=null,vr=!1,Od=!1,Fa=null;function ex(S,E){var R=wa(5,null,null,0);R.elementType="DELETED",R.stateNode=E,R.return=S,E=S.deletions,E===null?(S.deletions=[R],S.flags|=16):E.push(R)}function tx(S,E){switch(S.tag){case 5:return E=un(E,S.type,S.pendingProps),E!==null?(S.stateNode=E,Mo=S,qi=Re(E),!0):!1;case 6:return E=ln(E,S.pendingProps),E!==null?(S.stateNode=E,Mo=S,qi=null,!0):!1;case 13:if(E=Nn(E),E!==null){var R=fu!==null?{id:gl,overflow:yl}:null;return S.memoizedState={dehydrated:E,treeContext:R,retryLane:1073741824},R=wa(18,null,null,0),R.stateNode=E,R.return=S,S.child=R,Mo=S,qi=null,!0}return!1;default:return!1}}function Xm(S){return(S.mode&1)!==0&&(S.flags&128)===0}function Ec(S){if(vr){var E=qi;if(E){var R=E;if(!tx(S,E)){if(Xm(S))throw Error(a(418));E=Pe(R);var D=Mo;E&&tx(S,E)?ex(D,R):(S.flags=S.flags&-4097|2,vr=!1,Mo=S)}}else{if(Xm(S))throw Error(a(418));S.flags=S.flags&-4097|2,vr=!1,Mo=S}}}function MS(S){for(S=S.return;S!==null&&S.tag!==5&&S.tag!==3&&S.tag!==13;)S=S.return;Mo=S}function wh(S){if(!xe||S!==Mo)return!1;if(!vr)return MS(S),vr=!0,!1;if(S.tag!==3&&(S.tag!==5||vn(S.type)&&!se(S.type,S.memoizedProps))){var E=qi;if(E){if(Xm(S)){for(S=qi;S;)S=Pe(S);throw Error(a(418))}for(;E;)ex(S,E),E=Pe(E)}}if(MS(S),S.tag===13){if(!xe)throw Error(a(316));if(S=S.memoizedState,S=S!==null?S.dehydrated:null,!S)throw Error(a(317));qi=Pn(S)}else qi=Mo?Pe(S.stateNode):null;return!0}function Ld(){xe&&(qi=Mo=null,Od=vr=!1)}function Km(S){Fa===null?Fa=[S]:Fa.push(S)}function Dd(S,E,R){if(S=R.ref,S!==null&&typeof S!="function"&&typeof S!="object"){if(R._owner){if(R=R._owner,R){if(R.tag!==1)throw Error(a(309));var D=R.stateNode}if(!D)throw Error(a(147,S));var q=D,re=""+S;return E!==null&&E.ref!==null&&typeof E.ref=="function"&&E.ref._stringRef===re?E.ref:(E=function(_e){var Le=q.refs;Le===_S&&(Le=q.refs={}),_e===null?delete Le[re]:Le[re]=_e},E._stringRef=re,E)}if(typeof S!="string")throw Error(a(284));if(!R._owner)throw Error(a(290,S))}return S}function _c(S,E){throw S=Object.prototype.toString.call(E),Error(a(31,S==="[object Object]"?"object with keys {"+Object.keys(E).join(", ")+"}":S))}function Fd(S){var E=S._init;return E(S._payload)}function PS(S){function E(Ge,Fe){if(S){var Je=Ge.deletions;Je===null?(Ge.deletions=[Fe],Ge.flags|=16):Je.push(Fe)}}function R(Ge,Fe){if(!S)return null;for(;Fe!==null;)E(Ge,Fe),Fe=Fe.sibling;return null}function D(Ge,Fe){for(Ge=new Map;Fe!==null;)Fe.key!==null?Ge.set(Fe.key,Fe):Ge.set(Fe.index,Fe),Fe=Fe.sibling;return Ge}function q(Ge,Fe){return Ge=Nl(Ge,Fe),Ge.index=0,Ge.sibling=null,Ge}function re(Ge,Fe,Je){return Ge.index=Je,S?(Je=Ge.alternate,Je!==null?(Je=Je.index,Je<Fe?(Ge.flags|=2,Fe):Je):(Ge.flags|=2,Fe)):(Ge.flags|=1048576,Fe)}function _e(Ge){return S&&Ge.alternate===null&&(Ge.flags|=2),Ge}function Le(Ge,Fe,Je,Tt){return Fe===null||Fe.tag!==6?(Fe=Eg(Je,Ge.mode,Tt),Fe.return=Ge,Fe):(Fe=q(Fe,Je),Fe.return=Ge,Fe)}function Qe(Ge,Fe,Je,Tt){var Ft=Je.type;return Ft===u?Nt(Ge,Fe,Je.props.children,Tt,Je.key):Fe!==null&&(Fe.elementType===Ft||typeof Ft=="object"&&Ft!==null&&Ft.$$typeof===T&&Fd(Ft)===Fe.type)?(Tt=q(Fe,Je.props),Tt.ref=Dd(Ge,Fe,Je),Tt.return=Ge,Tt):(Tt=Sg(Je.type,Je.key,Je.props,null,Ge.mode,Tt),Tt.ref=Dd(Ge,Fe,Je),Tt.return=Ge,Tt)}function mt(Ge,Fe,Je,Tt){return Fe===null||Fe.tag!==4||Fe.stateNode.containerInfo!==Je.containerInfo||Fe.stateNode.implementation!==Je.implementation?(Fe=_g(Je,Ge.mode,Tt),Fe.return=Ge,Fe):(Fe=q(Fe,Je.children||[]),Fe.return=Ge,Fe)}function Nt(Ge,Fe,Je,Tt,Ft){return Fe===null||Fe.tag!==7?(Fe=Ou(Je,Ge.mode,Tt,Ft),Fe.return=Ge,Fe):(Fe=q(Fe,Je),Fe.return=Ge,Fe)}function an(Ge,Fe,Je){if(typeof Fe=="string"&&Fe!==""||typeof Fe=="number")return Fe=Eg(""+Fe,Ge.mode,Je),Fe.return=Ge,Fe;if(typeof Fe=="object"&&Fe!==null){switch(Fe.$$typeof){case l:return Je=Sg(Fe.type,Fe.key,Fe.props,null,Ge.mode,Je),Je.ref=Dd(Ge,null,Fe),Je.return=Ge,Je;case c:return Fe=_g(Fe,Ge.mode,Je),Fe.return=Ge,Fe;case T:var Tt=Fe._init;return an(Ge,Tt(Fe._payload),Je)}if(J(Fe)||M(Fe))return Fe=Ou(Fe,Ge.mode,Je,null),Fe.return=Ge,Fe;_c(Ge,Fe)}return null}function Vt(Ge,Fe,Je,Tt){var Ft=Fe!==null?Fe.key:null;if(typeof Je=="string"&&Je!==""||typeof Je=="number")return Ft!==null?null:Le(Ge,Fe,""+Je,Tt);if(typeof Je=="object"&&Je!==null){switch(Je.$$typeof){case l:return Je.key===Ft?Qe(Ge,Fe,Je,Tt):null;case c:return Je.key===Ft?mt(Ge,Fe,Je,Tt):null;case T:return Ft=Je._init,Vt(Ge,Fe,Ft(Je._payload),Tt)}if(J(Je)||M(Je))return Ft!==null?null:Nt(Ge,Fe,Je,Tt,null);_c(Ge,Je)}return null}function pn(Ge,Fe,Je,Tt,Ft){if(typeof Tt=="string"&&Tt!==""||typeof Tt=="number")return Ge=Ge.get(Je)||null,Le(Fe,Ge,""+Tt,Ft);if(typeof Tt=="object"&&Tt!==null){switch(Tt.$$typeof){case l:return Ge=Ge.get(Tt.key===null?Je:Tt.key)||null,Qe(Fe,Ge,Tt,Ft);case c:return Ge=Ge.get(Tt.key===null?Je:Tt.key)||null,mt(Fe,Ge,Tt,Ft);case T:var dn=Tt._init;return pn(Ge,Fe,Je,dn(Tt._payload),Ft)}if(J(Tt)||M(Tt))return Ge=Ge.get(Je)||null,Nt(Fe,Ge,Tt,Ft,null);_c(Fe,Tt)}return null}function Pt(Ge,Fe,Je,Tt){for(var Ft=null,dn=null,sn=Fe,On=Fe=0,ni=null;sn!==null&&On<Je.length;On++){sn.index>On?(ni=sn,sn=null):ni=sn.sibling;var Rn=Vt(Ge,sn,Je[On],Tt);if(Rn===null){sn===null&&(sn=ni);break}S&&sn&&Rn.alternate===null&&E(Ge,sn),Fe=re(Rn,Fe,On),dn===null?Ft=Rn:dn.sibling=Rn,dn=Rn,sn=ni}if(On===Je.length)return R(Ge,sn),vr&&hu(Ge,On),Ft;if(sn===null){for(;On<Je.length;On++)sn=an(Ge,Je[On],Tt),sn!==null&&(Fe=re(sn,Fe,On),dn===null?Ft=sn:dn.sibling=sn,dn=sn);return vr&&hu(Ge,On),Ft}for(sn=D(Ge,sn);On<Je.length;On++)ni=pn(sn,Ge,On,Je[On],Tt),ni!==null&&(S&&ni.alternate!==null&&sn.delete(ni.key===null?On:ni.key),Fe=re(ni,Fe,On),dn===null?Ft=ni:dn.sibling=ni,dn=ni);return S&&sn.forEach(function(Rl){return E(Ge,Rl)}),vr&&hu(Ge,On),Ft}function Zi(Ge,Fe,Je,Tt){var Ft=M(Je);if(typeof Ft!="function")throw Error(a(150));if(Je=Ft.call(Je),Je==null)throw Error(a(151));for(var dn=Ft=null,sn=Fe,On=Fe=0,ni=null,Rn=Je.next();sn!==null&&!Rn.done;On++,Rn=Je.next()){sn.index>On?(ni=sn,sn=null):ni=sn.sibling;var Rl=Vt(Ge,sn,Rn.value,Tt);if(Rl===null){sn===null&&(sn=ni);break}S&&sn&&Rl.alternate===null&&E(Ge,sn),Fe=re(Rl,Fe,On),dn===null?Ft=Rl:dn.sibling=Rl,dn=Rl,sn=ni}if(Rn.done)return R(Ge,sn),vr&&hu(Ge,On),Ft;if(sn===null){for(;!Rn.done;On++,Rn=Je.next())Rn=an(Ge,Rn.value,Tt),Rn!==null&&(Fe=re(Rn,Fe,On),dn===null?Ft=Rn:dn.sibling=Rn,dn=Rn);return vr&&hu(Ge,On),Ft}for(sn=D(Ge,sn);!Rn.done;On++,Rn=Je.next())Rn=pn(sn,Ge,On,Rn.value,Tt),Rn!==null&&(S&&Rn.alternate!==null&&sn.delete(Rn.key===null?On:Rn.key),Fe=re(Rn,Fe,On),dn===null?Ft=Rn:dn.sibling=Rn,dn=Rn);return S&&sn.forEach(function(Rx){return E(Ge,Rx)}),vr&&hu(Ge,On),Ft}function ba(Ge,Fe,Je,Tt){if(typeof Je=="object"&&Je!==null&&Je.type===u&&Je.key===null&&(Je=Je.props.children),typeof Je=="object"&&Je!==null){switch(Je.$$typeof){case l:e:{for(var Ft=Je.key,dn=Fe;dn!==null;){if(dn.key===Ft){if(Ft=Je.type,Ft===u){if(dn.tag===7){R(Ge,dn.sibling),Fe=q(dn,Je.props.children),Fe.return=Ge,Ge=Fe;break e}}else if(dn.elementType===Ft||typeof Ft=="object"&&Ft!==null&&Ft.$$typeof===T&&Fd(Ft)===dn.type){R(Ge,dn.sibling),Fe=q(dn,Je.props),Fe.ref=Dd(Ge,dn,Je),Fe.return=Ge,Ge=Fe;break e}R(Ge,dn);break}else E(Ge,dn);dn=dn.sibling}Je.type===u?(Fe=Ou(Je.props.children,Ge.mode,Tt,Je.key),Fe.return=Ge,Ge=Fe):(Tt=Sg(Je.type,Je.key,Je.props,null,Ge.mode,Tt),Tt.ref=Dd(Ge,Fe,Je),Tt.return=Ge,Ge=Tt)}return _e(Ge);case c:e:{for(dn=Je.key;Fe!==null;){if(Fe.key===dn)if(Fe.tag===4&&Fe.stateNode.containerInfo===Je.containerInfo&&Fe.stateNode.implementation===Je.implementation){R(Ge,Fe.sibling),Fe=q(Fe,Je.children||[]),Fe.return=Ge,Ge=Fe;break e}else{R(Ge,Fe);break}else E(Ge,Fe);Fe=Fe.sibling}Fe=_g(Je,Ge.mode,Tt),Fe.return=Ge,Ge=Fe}return _e(Ge);case T:return dn=Je._init,ba(Ge,Fe,dn(Je._payload),Tt)}if(J(Je))return Pt(Ge,Fe,Je,Tt);if(M(Je))return Zi(Ge,Fe,Je,Tt);_c(Ge,Je)}return typeof Je=="string"&&Je!==""||typeof Je=="number"?(Je=""+Je,Fe!==null&&Fe.tag===6?(R(Ge,Fe.sibling),Fe=q(Fe,Je),Fe.return=Ge,Ge=Fe):(R(Ge,Fe),Fe=Eg(Je,Ge.mode,Tt),Fe.return=Ge,Ge=Fe),_e(Ge)):R(Ge,Fe)}return ba}var vl=PS(!0),kS=PS(!1),zd={},Yo=so(zd),pu=so(zd),mu=so(zd);function ss(S){if(S===zd)throw Error(a(174));return S}function Jm(S,E){Xn(mu,E),Xn(pu,S),Xn(Yo,zd),S=Z(E),xn(Yo),Xn(Yo,S)}function Ud(){xn(Yo),xn(pu),xn(mu)}function NS(S){var E=ss(mu.current),R=ss(Yo.current);E=H(R,S.type,E),R!==E&&(Xn(pu,S),Xn(Yo,E))}function nx(S){pu.current===S&&(xn(Yo),xn(pu))}var Nr=so(0);function Zm(S){for(var E=S;E!==null;){if(E.tag===13){var R=E.memoizedState;if(R!==null&&(R=R.dehydrated,R===null||Zt(R)||le(R)))return E}else if(E.tag===19&&E.memoizedProps.revealOrder!==void 0){if((E.flags&128)!==0)return E}else if(E.child!==null){E.child.return=E,E=E.child;continue}if(E===S)break;for(;E.sibling===null;){if(E.return===null||E.return===S)return null;E=E.return}E.sibling.return=E.return,E=E.sibling}return null}var pa=[];function gu(){for(var S=0;S<pa.length;S++){var E=pa[S];ce?E._workInProgressVersionPrimary=null:E._workInProgressVersionSecondary=null}pa.length=0}var bh=s.ReactCurrentDispatcher,ma=s.ReactCurrentBatchConfig,yu=0,Rr=null,Pi=null,ki=null,Qm=!1,Us=!1,vu=0,Sh=0;function Ni(){throw Error(a(321))}function eg(S,E){if(E===null)return!1;for(var R=0;R<E.length&&R<S.length;R++)if(!Ti(S[R],E[R]))return!1;return!0}function Bd(S,E,R,D,q,re){if(yu=re,Rr=E,E.memoizedState=null,E.updateQueue=null,E.lanes=0,bh.current=S===null||S.memoizedState===null?lx:cx,S=R(D,q),Us){re=0;do{if(Us=!1,vu=0,25<=re)throw Error(a(301));re+=1,ki=Pi=null,E.updateQueue=null,bh.current=ux,S=R(D,q)}while(Us)}if(bh.current=Wd,E=Pi!==null&&Pi.next!==null,yu=0,ki=Pi=Rr=null,Qm=!1,E)throw Error(a(300));return S}function Tc(){var S=vu!==0;return vu=0,S}function ls(){var S={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ki===null?Rr.memoizedState=ki=S:ki=ki.next=S,ki}function cs(){if(Pi===null){var S=Rr.alternate;S=S!==null?S.memoizedState:null}else S=Pi.next;var E=ki===null?Rr.memoizedState:ki.next;if(E!==null)ki=E,Pi=S;else{if(S===null)throw Error(a(310));Pi=S,S={memoizedState:Pi.memoizedState,baseState:Pi.baseState,baseQueue:Pi.baseQueue,queue:Pi.queue,next:null},ki===null?Rr.memoizedState=ki=S:ki=ki.next=S}return ki}function Bs(S,E){return typeof E=="function"?E(S):E}function Eh(S){var E=cs(),R=E.queue;if(R===null)throw Error(a(311));R.lastRenderedReducer=S;var D=Pi,q=D.baseQueue,re=R.pending;if(re!==null){if(q!==null){var _e=q.next;q.next=re.next,re.next=_e}D.baseQueue=q=re,R.pending=null}if(q!==null){re=q.next,D=D.baseState;var Le=_e=null,Qe=null,mt=re;do{var Nt=mt.lane;if((yu&Nt)===Nt)Qe!==null&&(Qe=Qe.next={lane:0,action:mt.action,hasEagerState:mt.hasEagerState,eagerState:mt.eagerState,next:null}),D=mt.hasEagerState?mt.eagerState:S(D,mt.action);else{var an={lane:Nt,action:mt.action,hasEagerState:mt.hasEagerState,eagerState:mt.eagerState,next:null};Qe===null?(Le=Qe=an,_e=D):Qe=Qe.next=an,Rr.lanes|=Nt,Hs|=Nt}mt=mt.next}while(mt!==null&&mt!==re);Qe===null?_e=D:Qe.next=Le,Ti(D,E.memoizedState)||(Ri=!0),E.memoizedState=D,E.baseState=_e,E.baseQueue=Qe,R.lastRenderedState=D}if(S=R.interleaved,S!==null){q=S;do re=q.lane,Rr.lanes|=re,Hs|=re,q=q.next;while(q!==S)}else q===null&&(R.lanes=0);return[E.memoizedState,R.dispatch]}function _h(S){var E=cs(),R=E.queue;if(R===null)throw Error(a(311));R.lastRenderedReducer=S;var D=R.dispatch,q=R.pending,re=E.memoizedState;if(q!==null){R.pending=null;var _e=q=q.next;do re=S(re,_e.action),_e=_e.next;while(_e!==q);Ti(re,E.memoizedState)||(Ri=!0),E.memoizedState=re,E.baseQueue===null&&(E.baseState=re),R.lastRenderedState=re}return[re,D]}function rx(){}function ix(S,E){var R=Rr,D=cs(),q=E(),re=!Ti(D.memoizedState,q);if(re&&(D.memoizedState=q,Ri=!0),D=D.queue,$d(xl.bind(null,R,D,S),[S]),D.getSnapshot!==E||re||ki!==null&&ki.memoizedState.tag&1){if(R.flags|=2048,Ch(9,ax.bind(null,R,D,q,E),void 0,null),Gr===null)throw Error(a(349));(yu&30)!==0||ox(R,E,q)}return q}function ox(S,E,R){S.flags|=16384,S={getSnapshot:E,value:R},E=Rr.updateQueue,E===null?(E={lastEffect:null,stores:null},Rr.updateQueue=E,E.stores=[S]):(R=E.stores,R===null?E.stores=[S]:R.push(S))}function ax(S,E,R,D){E.value=R,E.getSnapshot=D,tg(E)&&ho(S,1,-1)}function xl(S,E,R){return R(function(){tg(E)&&ho(S,1,-1)})}function tg(S){var E=S.getSnapshot;S=S.value;try{var R=E();return!Ti(S,R)}catch{return!0}}function Th(S){var E=ls();return typeof S=="function"&&(S=S()),E.memoizedState=E.baseState=S,S={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Bs,lastRenderedState:S},E.queue=S,S=S.dispatch=W2.bind(null,Rr,S),[E.memoizedState,S]}function Ch(S,E,R,D){return S={tag:S,create:E,destroy:R,deps:D,next:null},E=Rr.updateQueue,E===null?(E={lastEffect:null,stores:null},Rr.updateQueue=E,E.lastEffect=S.next=S):(R=E.lastEffect,R===null?E.lastEffect=S.next=S:(D=R.next,R.next=S,S.next=D,E.lastEffect=S)),S}function RS(){return cs().memoizedState}function Cc(S,E,R,D){var q=ls();Rr.flags|=S,q.memoizedState=Ch(1|E,R,void 0,D===void 0?null:D)}function ng(S,E,R,D){var q=cs();D=D===void 0?null:D;var re=void 0;if(Pi!==null){var _e=Pi.memoizedState;if(re=_e.destroy,D!==null&&eg(D,_e.deps)){q.memoizedState=Ch(E,R,re,D);return}}Rr.flags|=S,q.memoizedState=Ch(1|E,R,re,D)}function rg(S,E){return Cc(8390656,8,S,E)}function $d(S,E){return ng(2048,8,S,E)}function sr(S,E){return ng(4,2,S,E)}function ig(S,E){return ng(4,4,S,E)}function Ah(S,E){if(typeof E=="function")return S=S(),E(S),function(){E(null)};if(E!=null)return S=S(),E.current=S,function(){E.current=null}}function Hd(S,E,R){return R=R!=null?R.concat([S]):null,ng(4,4,Ah.bind(null,E,S),R)}function og(){}function ag(S,E){var R=cs();E=E===void 0?null:E;var D=R.memoizedState;return D!==null&&E!==null&&eg(E,D[1])?D[0]:(R.memoizedState=[S,E],S)}function Vd(S,E){var R=cs();E=E===void 0?null:E;var D=R.memoizedState;return D!==null&&E!==null&&eg(E,D[1])?D[0]:(S=S(),R.memoizedState=[S,E],S)}function sg(S,E){var R=nn;nn=R!==0&&4>R?R:4,S(!0);var D=ma.transition;ma.transition={};try{S(!1),E()}finally{nn=R,ma.transition=D}}function xu(){return cs().memoizedState}function jS(S,E,R){var D=hs(S);R={lane:D,action:R,hasEagerState:!1,eagerState:null,next:null},IS(S)?sx(E,R):(Mh(S,E,R),R=zn(),S=ho(S,D,R),S!==null&&Ph(S,E,D))}function W2(S,E,R){var D=hs(S),q={lane:D,action:R,hasEagerState:!1,eagerState:null,next:null};if(IS(S))sx(E,q);else{Mh(S,E,q);var re=S.alternate;if(S.lanes===0&&(re===null||re.lanes===0)&&(re=E.lastRenderedReducer,re!==null))try{var _e=E.lastRenderedState,Le=re(_e,R);if(q.hasEagerState=!0,q.eagerState=Le,Ti(Le,_e))return}catch{}finally{}R=zn(),S=ho(S,D,R),S!==null&&Ph(S,E,D)}}function IS(S){var E=S.alternate;return S===Rr||E!==null&&E===Rr}function sx(S,E){Us=Qm=!0;var R=S.pending;R===null?E.next=E:(E.next=R.next,R.next=E),S.pending=E}function Mh(S,E,R){Gr!==null&&(S.mode&1)!==0&&(hn&2)===0?(S=E.interleaved,S===null?(R.next=R,Ao===null?Ao=[E]:Ao.push(E)):(R.next=S.next,S.next=R),E.interleaved=R):(S=E.pending,S===null?R.next=R:(R.next=S.next,S.next=R),E.pending=R)}function Ph(S,E,R){if((R&4194240)!==0){var D=E.lanes;D&=S.pendingLanes,R|=D,E.lanes=R,Gi(S,R)}}var Wd={readContext:kr,useCallback:Ni,useContext:Ni,useEffect:Ni,useImperativeHandle:Ni,useInsertionEffect:Ni,useLayoutEffect:Ni,useMemo:Ni,useReducer:Ni,useRef:Ni,useState:Ni,useDebugValue:Ni,useDeferredValue:Ni,useTransition:Ni,useMutableSource:Ni,useSyncExternalStore:Ni,useId:Ni,unstable_isNewReconciler:!1},lx={readContext:kr,useCallback:function(S,E){return ls().memoizedState=[S,E===void 0?null:E],S},useContext:kr,useEffect:rg,useImperativeHandle:function(S,E,R){return R=R!=null?R.concat([S]):null,Cc(4194308,4,Ah.bind(null,E,S),R)},useLayoutEffect:function(S,E){return Cc(4194308,4,S,E)},useInsertionEffect:function(S,E){return Cc(4,2,S,E)},useMemo:function(S,E){var R=ls();return E=E===void 0?null:E,S=S(),R.memoizedState=[S,E],S},useReducer:function(S,E,R){var D=ls();return E=R!==void 0?R(E):E,D.memoizedState=D.baseState=E,S={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:S,lastRenderedState:E},D.queue=S,S=S.dispatch=jS.bind(null,Rr,S),[D.memoizedState,S]},useRef:function(S){var E=ls();return S={current:S},E.memoizedState=S},useState:Th,useDebugValue:og,useDeferredValue:function(S){var E=Th(S),R=E[0],D=E[1];return rg(function(){var q=ma.transition;ma.transition={};try{D(S)}finally{ma.transition=q}},[S]),R},useTransition:function(){var S=Th(!1),E=S[0];return S=sg.bind(null,S[1]),ls().memoizedState=S,[E,S]},useMutableSource:function(){},useSyncExternalStore:function(S,E,R){var D=Rr,q=ls();if(vr){if(R===void 0)throw Error(a(407));R=R()}else{if(R=E(),Gr===null)throw Error(a(349));(yu&30)!==0||ox(D,E,R)}q.memoizedState=R;var re={value:R,getSnapshot:E};return q.queue=re,rg(xl.bind(null,D,re,S),[S]),D.flags|=2048,Ch(9,ax.bind(null,D,re,R,E),void 0,null),R},useId:function(){var S=ls(),E=Gr.identifierPrefix;if(vr){var R=yl,D=gl;R=(D&~(1<<32-Wo(D)-1)).toString(32)+R,E=":"+E+"R"+R,R=vu++,0<R&&(E+="H"+R.toString(32)),E+=":"}else R=Sh++,E=":"+E+"r"+R.toString(32)+":";return S.memoizedState=E},unstable_isNewReconciler:!1},cx={readContext:kr,useCallback:ag,useContext:kr,useEffect:$d,useImperativeHandle:Hd,useInsertionEffect:sr,useLayoutEffect:ig,useMemo:Vd,useReducer:Eh,useRef:RS,useState:function(){return Eh(Bs)},useDebugValue:og,useDeferredValue:function(S){var E=Eh(Bs),R=E[0],D=E[1];return $d(function(){var q=ma.transition;ma.transition={};try{D(S)}finally{ma.transition=q}},[S]),R},useTransition:function(){var S=Eh(Bs)[0],E=cs().memoizedState;return[S,E]},useMutableSource:rx,useSyncExternalStore:ix,useId:xu,unstable_isNewReconciler:!1},ux={readContext:kr,useCallback:ag,useContext:kr,useEffect:$d,useImperativeHandle:Hd,useInsertionEffect:sr,useLayoutEffect:ig,useMemo:Vd,useReducer:_h,useRef:RS,useState:function(){return _h(Bs)},useDebugValue:og,useDeferredValue:function(S){var E=_h(Bs),R=E[0],D=E[1];return $d(function(){var q=ma.transition;ma.transition={};try{D(S)}finally{ma.transition=q}},[S]),R},useTransition:function(){var S=_h(Bs)[0],E=cs().memoizedState;return[S,E]},useMutableSource:rx,useSyncExternalStore:ix,useId:xu,unstable_isNewReconciler:!1};function dx(S,E){try{var R="",D=E;do R+=dl(D),D=D.return;while(D);var q=R}catch(re){q=`
Error generating stack: `+re.message+`
`+re.stack}return{value:S,source:E,stack:q}}function lg(S,E){try{console.error(E.value)}catch(R){setTimeout(function(){throw R})}}var G2=typeof WeakMap=="function"?WeakMap:Map;function OS(S,E,R){R=ml(-1,R),R.tag=3,R.payload={element:null};var D=E.value;return R.callback=function(){Jd||(Jd=!0,hr=D),lg(S,E)},R}function cg(S,E,R){R=ml(-1,R),R.tag=3;var D=S.type.getDerivedStateFromError;if(typeof D=="function"){var q=E.value;R.payload=function(){return D(q)},R.callback=function(){lg(S,E)}}var re=S.stateNode;return re!==null&&typeof re.componentDidCatch=="function"&&(R.callback=function(){lg(S,E),typeof D!="function"&&(fs===null?fs=new Set([this]):fs.add(this));var _e=E.stack;this.componentDidCatch(E.value,{componentStack:_e!==null?_e:""})}),R}function wl(S,E,R){var D=S.pingCache;if(D===null){D=S.pingCache=new G2;var q=new Set;D.set(E,q)}else q=D.get(E),q===void 0&&(q=new Set,D.set(E,q));q.has(R)||(q.add(R),S=Px.bind(null,S,E,R),E.then(S,S))}function fx(S){do{var E;if((E=S.tag===13)&&(E=S.memoizedState,E=E!==null?E.dehydrated!==null:!0),E)return S;S=S.return}while(S!==null);return null}function wu(S,E,R,D,q){return(S.mode&1)===0?(S===E?S.flags|=65536:(S.flags|=128,R.flags|=131072,R.flags&=-52805,R.tag===1&&(R.alternate===null?R.tag=17:(E=ml(-1,1),E.tag=2,bc(R,E))),R.lanes|=1),S):(S.flags|=65536,S.lanes=q,S)}function mi(S){S.flags|=4}function Gd(S,E){if(S!==null&&S.child===E.child)return!0;if((E.flags&16)!==0)return!1;for(S=E.child;S!==null;){if((S.flags&12854)!==0||(S.subtreeFlags&12854)!==0)return!1;S=S.sibling}return!0}var ga,bu,ug,dg;if(he)ga=function(S,E){for(var R=E.child;R!==null;){if(R.tag===5||R.tag===6)V(S,R.stateNode);else if(R.tag!==4&&R.child!==null){R.child.return=R,R=R.child;continue}if(R===E)break;for(;R.sibling===null;){if(R.return===null||R.return===E)return;R=R.return}R.sibling.return=R.return,R=R.sibling}},bu=function(){},ug=function(S,E,R,D,q){if(S=S.memoizedProps,S!==D){var re=E.stateNode,_e=ss(Yo.current);R=ne(re,R,S,D,q,_e),(E.updateQueue=R)&&mi(E)}},dg=function(S,E,R,D){R!==D&&mi(E)};else if(ee){ga=function(S,E,R,D){for(var q=E.child;q!==null;){if(q.tag===5){var re=q.stateNode;R&&D&&(re=Ar(re,q.type,q.memoizedProps,q)),V(S,re)}else if(q.tag===6)re=q.stateNode,R&&D&&(re=gn(re,q.memoizedProps,q)),V(S,re);else if(q.tag!==4){if(q.tag===22&&q.memoizedState!==null)re=q.child,re!==null&&(re.return=q),ga(S,q,!0,!0);else if(q.child!==null){q.child.return=q,q=q.child;continue}}if(q===E)break;for(;q.sibling===null;){if(q.return===null||q.return===E)return;q=q.return}q.sibling.return=q.return,q=q.sibling}};var Ac=function(S,E,R,D){for(var q=E.child;q!==null;){if(q.tag===5){var re=q.stateNode;R&&D&&(re=Ar(re,q.type,q.memoizedProps,q)),Mn(S,re)}else if(q.tag===6)re=q.stateNode,R&&D&&(re=gn(re,q.memoizedProps,q)),Mn(S,re);else if(q.tag!==4){if(q.tag===22&&q.memoizedState!==null)re=q.child,re!==null&&(re.return=q),Ac(S,q,!0,!0);else if(q.child!==null){q.child.return=q,q=q.child;continue}}if(q===E)break;for(;q.sibling===null;){if(q.return===null||q.return===E)return;q=q.return}q.sibling.return=q.return,q=q.sibling}};bu=function(S,E){var R=E.stateNode;if(!Gd(S,E)){S=R.containerInfo;var D=gr(S);Ac(D,E,!1,!1),R.pendingChildren=D,mi(E),Jt(S,D)}},ug=function(S,E,R,D,q){var re=S.stateNode,_e=S.memoizedProps;if((S=Gd(S,E))&&_e===D)E.stateNode=re;else{var Le=E.stateNode,Qe=ss(Yo.current),mt=null;_e!==D&&(mt=ne(Le,R,_e,D,q,Qe)),S&&mt===null?E.stateNode=re:(re=Hn(re,mt,R,_e,D,E,S,Le),W(re,R,D,q,Qe)&&mi(E),E.stateNode=re,S?mi(E):ga(re,E,!1,!1))}},dg=function(S,E,R,D){R!==D?(S=ss(mu.current),R=ss(Yo.current),E.stateNode=te(D,S,R,E),mi(E)):E.stateNode=S.stateNode}}else bu=function(){},ug=function(){},dg=function(){};function bl(S,E){if(!vr)switch(S.tailMode){case"hidden":E=S.tail;for(var R=null;E!==null;)E.alternate!==null&&(R=E),E=E.sibling;R===null?S.tail=null:R.sibling=null;break;case"collapsed":R=S.tail;for(var D=null;R!==null;)R.alternate!==null&&(D=R),R=R.sibling;D===null?E||S.tail===null?S.tail=null:S.tail.sibling=null:D.sibling=null}}function Wr(S){var E=S.alternate!==null&&S.alternate.child===S.child,R=0,D=0;if(E)for(var q=S.child;q!==null;)R|=q.lanes|q.childLanes,D|=q.subtreeFlags&14680064,D|=q.flags&14680064,q.return=S,q=q.sibling;else for(q=S.child;q!==null;)R|=q.lanes|q.childLanes,D|=q.subtreeFlags,D|=q.flags,q.return=S,q=q.sibling;return S.subtreeFlags|=D,S.childLanes=R,E}function fg(S,E,R){var D=E.pendingProps;switch(Q0(E),E.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wr(E),null;case 1:return Hr(E.type)&&To(),Wr(E),null;case 3:return D=E.stateNode,Ud(),xn(_i),xn(fi),gu(),D.pendingContext&&(D.context=D.pendingContext,D.pendingContext=null),(S===null||S.child===null)&&(wh(E)?mi(E):S===null||S.memoizedState.isDehydrated&&(E.flags&256)===0||(E.flags|=1024,Fa!==null&&($h(Fa),Fa=null))),bu(S,E),Wr(E),null;case 5:nx(E),R=ss(mu.current);var q=E.type;if(S!==null&&E.stateNode!=null)ug(S,E,q,D,R),S.ref!==E.ref&&(E.flags|=512,E.flags|=2097152);else{if(!D){if(E.stateNode===null)throw Error(a(166));return Wr(E),null}if(S=ss(Yo.current),wh(E)){if(!xe)throw Error(a(175));S=it(E.stateNode,E.type,E.memoizedProps,R,S,E,!Od),E.updateQueue=S,S!==null&&mi(E)}else{var re=N(q,D,R,S,E);ga(re,E,!1,!1),E.stateNode=re,W(re,q,D,R,S)&&mi(E)}E.ref!==null&&(E.flags|=512,E.flags|=2097152)}return Wr(E),null;case 6:if(S&&E.stateNode!=null)dg(S,E,S.memoizedProps,D);else{if(typeof D!="string"&&E.stateNode===null)throw Error(a(166));if(S=ss(mu.current),R=ss(Yo.current),wh(E)){if(!xe)throw Error(a(176));if(S=E.stateNode,D=E.memoizedProps,(R=pt(S,D,E,!Od))&&(q=Mo,q!==null))switch(re=(q.mode&1)!==0,q.tag){case 3:ns(q.stateNode.containerInfo,S,D,re);break;case 5:Vn(q.type,q.memoizedProps,q.stateNode,S,D,re)}R&&mi(E)}else E.stateNode=te(D,S,R,E)}return Wr(E),null;case 13:if(xn(Nr),D=E.memoizedState,vr&&qi!==null&&(E.mode&1)!==0&&(E.flags&128)===0){for(S=qi;S;)S=Pe(S);return Ld(),E.flags|=98560,E}if(D!==null&&D.dehydrated!==null){if(D=wh(E),S===null){if(!D)throw Error(a(318));if(!xe)throw Error(a(344));if(S=E.memoizedState,S=S!==null?S.dehydrated:null,!S)throw Error(a(317));Qt(S,E)}else Ld(),(E.flags&128)===0&&(E.memoizedState=null),E.flags|=4;return Wr(E),null}return Fa!==null&&($h(Fa),Fa=null),(E.flags&128)!==0?(E.lanes=R,E):(D=D!==null,R=!1,S===null?wh(E):R=S.memoizedState!==null,D&&!R&&(E.child.flags|=8192,(E.mode&1)!==0&&(S===null||(Nr.current&1)!==0?Fr===0&&(Fr=3):xg())),E.updateQueue!==null&&(E.flags|=4),Wr(E),null);case 4:return Ud(),bu(S,E),S===null&&Ae(E.stateNode.containerInfo),Wr(E),null;case 10:return ei(E.type._context),Wr(E),null;case 17:return Hr(E.type)&&To(),Wr(E),null;case 19:if(xn(Nr),q=E.memoizedState,q===null)return Wr(E),null;if(D=(E.flags&128)!==0,re=q.rendering,re===null)if(D)bl(q,!1);else{if(Fr!==0||S!==null&&(S.flags&128)!==0)for(S=E.child;S!==null;){if(re=Zm(S),re!==null){for(E.flags|=128,bl(q,!1),S=re.updateQueue,S!==null&&(E.updateQueue=S,E.flags|=4),E.subtreeFlags=0,S=R,D=E.child;D!==null;)R=D,q=S,R.flags&=14680066,re=R.alternate,re===null?(R.childLanes=0,R.lanes=q,R.child=null,R.subtreeFlags=0,R.memoizedProps=null,R.memoizedState=null,R.updateQueue=null,R.dependencies=null,R.stateNode=null):(R.childLanes=re.childLanes,R.lanes=re.lanes,R.child=re.child,R.subtreeFlags=0,R.deletions=null,R.memoizedProps=re.memoizedProps,R.memoizedState=re.memoizedState,R.updateQueue=re.updateQueue,R.type=re.type,q=re.dependencies,R.dependencies=q===null?null:{lanes:q.lanes,firstContext:q.firstContext}),D=D.sibling;return Xn(Nr,Nr.current&1|2),E.child}S=S.sibling}q.tail!==null&&yr()>kc&&(E.flags|=128,D=!0,bl(q,!1),E.lanes=4194304)}else{if(!D)if(S=Zm(re),S!==null){if(E.flags|=128,D=!0,S=S.updateQueue,S!==null&&(E.updateQueue=S,E.flags|=4),bl(q,!0),q.tail===null&&q.tailMode==="hidden"&&!re.alternate&&!vr)return Wr(E),null}else 2*yr()-q.renderingStartTime>kc&&R!==1073741824&&(E.flags|=128,D=!0,bl(q,!1),E.lanes=4194304);q.isBackwards?(re.sibling=E.child,E.child=re):(S=q.last,S!==null?S.sibling=re:E.child=re,q.last=re)}return q.tail!==null?(E=q.tail,q.rendering=E,q.tail=E.sibling,q.renderingStartTime=yr(),E.sibling=null,S=Nr.current,Xn(Nr,D?S&1|2:S&1),E):(Wr(E),null);case 22:case 23:return Hh(),D=E.memoizedState!==null,S!==null&&S.memoizedState!==null!==D&&(E.flags|=8192),D&&(E.mode&1)!==0?(fo&1073741824)!==0&&(Wr(E),he&&E.subtreeFlags&6&&(E.flags|=8192)):Wr(E),null;case 24:return null;case 25:return null}throw Error(a(156,E.tag))}var hx=s.ReactCurrentOwner,Ri=!1;function Dr(S,E,R,D){E.child=S===null?kS(E,null,R,D):vl(E,S.child,R,D)}function lr(S,E,R,D,q){R=R.render;var re=E.ref;return Vr(E,q),D=Bd(S,E,R,D,re,q),R=Tc(),S!==null&&!Ri?(E.updateQueue=S.updateQueue,E.flags&=-2053,S.lanes&=~q,Xo(S,E,q)):(vr&&R&&Z0(E),E.flags|=1,Dr(S,E,D,q),E.child)}function nr(S,E,R,D,q){if(S===null){var re=R.type;return typeof re=="function"&&!bg(re)&&re.defaultProps===void 0&&R.compare===null&&R.defaultProps===void 0?(E.tag=15,E.type=re,Sl(S,E,re,D,q)):(S=Sg(R.type,null,D,E,E.mode,q),S.ref=E.ref,S.return=E,E.child=S)}if(re=S.child,(S.lanes&q)===0){var _e=re.memoizedProps;if(R=R.compare,R=R!==null?R:Go,R(_e,D)&&S.ref===E.ref)return Xo(S,E,q)}return E.flags|=1,S=Nl(re,D),S.ref=E.ref,S.return=E,E.child=S}function Sl(S,E,R,D,q){if(S!==null&&Go(S.memoizedProps,D)&&S.ref===E.ref)if(Ri=!1,(S.lanes&q)!==0)(S.flags&131072)!==0&&(Ri=!0);else return E.lanes=S.lanes,Xo(S,E,q);return El(S,E,R,D,q)}function Yi(S,E,R){var D=E.pendingProps,q=D.children,re=S!==null?S.memoizedState:null;if(D.mode==="hidden")if((E.mode&1)===0)E.memoizedState={baseLanes:0,cachePool:null},Xn(ku,fo),fo|=R;else if((R&1073741824)!==0)E.memoizedState={baseLanes:0,cachePool:null},D=re!==null?re.baseLanes:R,Xn(ku,fo),fo|=D;else return S=re!==null?re.baseLanes|R:R,E.lanes=E.childLanes=1073741824,E.memoizedState={baseLanes:S,cachePool:null},E.updateQueue=null,Xn(ku,fo),fo|=S,null;else re!==null?(D=re.baseLanes|R,E.memoizedState=null):D=R,Xn(ku,fo),fo|=D;return Dr(S,E,q,R),E.child}function Po(S,E){var R=E.ref;(S===null&&R!==null||S!==null&&S.ref!==R)&&(E.flags|=512,E.flags|=2097152)}function El(S,E,R,D,q){var re=Hr(R)?Os:fi.current;return re=_o(E,re),Vr(E,q),R=Bd(S,E,R,D,re,q),D=Tc(),S!==null&&!Ri?(E.updateQueue=S.updateQueue,E.flags&=-2053,S.lanes&=~q,Xo(S,E,q)):(vr&&D&&Z0(E),E.flags|=1,Dr(S,E,R,q),E.child)}function Su(S,E,R,D,q){if(Hr(R)){var re=!0;hc(E)}else re=!1;if(Vr(E,q),E.stateNode===null)S!==null&&(S.alternate=null,E.alternate=null,E.flags|=2),TS(E,R,D),J0(E,R,D,q),D=!0;else if(S===null){var _e=E.stateNode,Le=E.memoizedProps;_e.props=Le;var Qe=_e.context,mt=R.contextType;typeof mt=="object"&&mt!==null?mt=kr(mt):(mt=Hr(R)?Os:fi.current,mt=_o(E,mt));var Nt=R.getDerivedStateFromProps,an=typeof Nt=="function"||typeof _e.getSnapshotBeforeUpdate=="function";an||typeof _e.UNSAFE_componentWillReceiveProps!="function"&&typeof _e.componentWillReceiveProps!="function"||(Le!==D||Qe!==mt)&&CS(E,_e,D,mt),La=!1;var Vt=E.memoizedState;_e.state=Vt,Wm(E,D,_e,q),Qe=E.memoizedState,Le!==D||Vt!==Qe||_i.current||La?(typeof Nt=="function"&&(X0(E,R,Nt,D),Qe=E.memoizedState),(Le=La||K0(E,R,Le,D,Vt,Qe,mt))?(an||typeof _e.UNSAFE_componentWillMount!="function"&&typeof _e.componentWillMount!="function"||(typeof _e.componentWillMount=="function"&&_e.componentWillMount(),typeof _e.UNSAFE_componentWillMount=="function"&&_e.UNSAFE_componentWillMount()),typeof _e.componentDidMount=="function"&&(E.flags|=4194308)):(typeof _e.componentDidMount=="function"&&(E.flags|=4194308),E.memoizedProps=D,E.memoizedState=Qe),_e.props=D,_e.state=Qe,_e.context=mt,D=Le):(typeof _e.componentDidMount=="function"&&(E.flags|=4194308),D=!1)}else{_e=E.stateNode,Y0(S,E),Le=E.memoizedProps,mt=E.type===E.elementType?Le:Ai(E.type,Le),_e.props=mt,an=E.pendingProps,Vt=_e.context,Qe=R.contextType,typeof Qe=="object"&&Qe!==null?Qe=kr(Qe):(Qe=Hr(R)?Os:fi.current,Qe=_o(E,Qe));var pn=R.getDerivedStateFromProps;(Nt=typeof pn=="function"||typeof _e.getSnapshotBeforeUpdate=="function")||typeof _e.UNSAFE_componentWillReceiveProps!="function"&&typeof _e.componentWillReceiveProps!="function"||(Le!==an||Vt!==Qe)&&CS(E,_e,D,Qe),La=!1,Vt=E.memoizedState,_e.state=Vt,Wm(E,D,_e,q);var Pt=E.memoizedState;Le!==an||Vt!==Pt||_i.current||La?(typeof pn=="function"&&(X0(E,R,pn,D),Pt=E.memoizedState),(mt=La||K0(E,R,mt,D,Vt,Pt,Qe)||!1)?(Nt||typeof _e.UNSAFE_componentWillUpdate!="function"&&typeof _e.componentWillUpdate!="function"||(typeof _e.componentWillUpdate=="function"&&_e.componentWillUpdate(D,Pt,Qe),typeof _e.UNSAFE_componentWillUpdate=="function"&&_e.UNSAFE_componentWillUpdate(D,Pt,Qe)),typeof _e.componentDidUpdate=="function"&&(E.flags|=4),typeof _e.getSnapshotBeforeUpdate=="function"&&(E.flags|=1024)):(typeof _e.componentDidUpdate!="function"||Le===S.memoizedProps&&Vt===S.memoizedState||(E.flags|=4),typeof _e.getSnapshotBeforeUpdate!="function"||Le===S.memoizedProps&&Vt===S.memoizedState||(E.flags|=1024),E.memoizedProps=D,E.memoizedState=Pt),_e.props=D,_e.state=Pt,_e.context=Qe,D=mt):(typeof _e.componentDidUpdate!="function"||Le===S.memoizedProps&&Vt===S.memoizedState||(E.flags|=4),typeof _e.getSnapshotBeforeUpdate!="function"||Le===S.memoizedProps&&Vt===S.memoizedState||(E.flags|=1024),D=!1)}return uo(S,E,R,D,re,q)}function uo(S,E,R,D,q,re){Po(S,E);var _e=(E.flags&128)!==0;if(!D&&!_e)return q&&Co(E,R,!1),Xo(S,E,re);D=E.stateNode,hx.current=E;var Le=_e&&typeof R.getDerivedStateFromError!="function"?null:D.render();return E.flags|=1,S!==null&&_e?(E.child=vl(E,S.child,null,re),E.child=vl(E,null,Le,re)):Dr(S,E,Le,re),E.memoizedState=D.state,q&&Co(E,R,!0),E.child}function kh(S){var E=S.stateNode;E.pendingContext?cl(S,E.pendingContext,E.pendingContext!==E.context):E.context&&cl(S,E.context,!1),Jm(S,E.containerInfo)}function px(S,E,R,D,q){return Ld(),Km(q),E.flags|=256,Dr(S,E,R,D),E.child}var Nh={dehydrated:null,treeContext:null,retryLane:0};function Eu(S){return{baseLanes:S,cachePool:null}}function mx(S,E,R){var D=E.pendingProps,q=Nr.current,re=!1,_e=(E.flags&128)!==0,Le;if((Le=_e)||(Le=S!==null&&S.memoizedState===null?!1:(q&2)!==0),Le?(re=!0,E.flags&=-129):(S===null||S.memoizedState!==null)&&(q|=1),Xn(Nr,q&1),S===null)return Ec(E),S=E.memoizedState,S!==null&&(S=S.dehydrated,S!==null)?((E.mode&1)===0?E.lanes=1:le(S)?E.lanes=8:E.lanes=1073741824,null):(q=D.children,S=D.fallback,re?(D=E.mode,re=E.child,q={mode:"hidden",children:q},(D&1)===0&&re!==null?(re.childLanes=0,re.pendingProps=q):re=Gh(q,D,0,null),S=Ou(S,D,R,null),re.return=E,S.return=E,re.sibling=S,E.child=re,E.child.memoizedState=Eu(R),E.memoizedState=Nh,S):us(E,q));if(q=S.memoizedState,q!==null){if(Le=q.dehydrated,Le!==null){if(_e)return E.flags&256?(E.flags&=-257,jh(S,E,R,Error(a(422)))):E.memoizedState!==null?(E.child=S.child,E.flags|=128,null):(re=D.fallback,q=E.mode,D=Gh({mode:"visible",children:D.children},q,0,null),re=Ou(re,q,R,null),re.flags|=2,D.return=E,re.return=E,D.sibling=re,E.child=D,(E.mode&1)!==0&&vl(E,S.child,null,R),E.child.memoizedState=Eu(R),E.memoizedState=Nh,re);if((E.mode&1)===0)E=jh(S,E,R,null);else if(le(Le))E=jh(S,E,R,Error(a(419)));else if(D=(R&S.childLanes)!==0,Ri||D){if(D=Gr,D!==null){switch(R&-R){case 4:re=2;break;case 16:re=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:re=32;break;case 536870912:re=268435456;break;default:re=0}D=(re&(D.suspendedLanes|R))!==0?0:re,D!==0&&D!==q.retryLane&&(q.retryLane=D,ho(S,D,-1))}xg(),E=jh(S,E,R,Error(a(421)))}else Zt(Le)?(E.flags|=128,E.child=S.child,E=US.bind(null,S),Me(Le,E),E=null):(R=q.treeContext,xe&&(qi=at(Le),Mo=E,vr=!0,Fa=null,Od=!1,R!==null&&(Da[ha++]=gl,Da[ha++]=yl,Da[ha++]=fu,gl=R.id,yl=R.overflow,fu=E)),E=us(E,E.pendingProps.children),E.flags|=4096);return E}return re?(D=hg(S,E,D.children,D.fallback,R),re=E.child,q=S.child.memoizedState,re.memoizedState=q===null?Eu(R):{baseLanes:q.baseLanes|R,cachePool:null},re.childLanes=S.childLanes&~R,E.memoizedState=Nh,D):(R=Rh(S,E,D.children,R),E.memoizedState=null,R)}return re?(D=hg(S,E,D.children,D.fallback,R),re=E.child,q=S.child.memoizedState,re.memoizedState=q===null?Eu(R):{baseLanes:q.baseLanes|R,cachePool:null},re.childLanes=S.childLanes&~R,E.memoizedState=Nh,D):(R=Rh(S,E,D.children,R),E.memoizedState=null,R)}function us(S,E){return E=Gh({mode:"visible",children:E},S.mode,0,null),E.return=S,S.child=E}function Rh(S,E,R,D){var q=S.child;return S=q.sibling,R=Nl(q,{mode:"visible",children:R}),(E.mode&1)===0&&(R.lanes=D),R.return=E,R.sibling=null,S!==null&&(D=E.deletions,D===null?(E.deletions=[S],E.flags|=16):D.push(S)),E.child=R}function hg(S,E,R,D,q){var re=E.mode;S=S.child;var _e=S.sibling,Le={mode:"hidden",children:R};return(re&1)===0&&E.child!==S?(R=E.child,R.childLanes=0,R.pendingProps=Le,E.deletions=null):(R=Nl(S,Le),R.subtreeFlags=S.subtreeFlags&14680064),_e!==null?D=Nl(_e,D):(D=Ou(D,re,q,null),D.flags|=2),D.return=E,R.return=E,R.sibling=D,E.child=R,D}function jh(S,E,R,D){return D!==null&&Km(D),vl(E,S.child,null,R),S=us(E,E.pendingProps.children),S.flags|=2,E.memoizedState=null,S}function LS(S,E,R){S.lanes|=E;var D=S.alternate;D!==null&&(D.lanes|=E),pi(S.return,E,R)}function $s(S,E,R,D,q){var re=S.memoizedState;re===null?S.memoizedState={isBackwards:E,rendering:null,renderingStartTime:0,last:D,tail:R,tailMode:q}:(re.isBackwards=E,re.rendering=null,re.renderingStartTime=0,re.last=D,re.tail=R,re.tailMode=q)}function _u(S,E,R){var D=E.pendingProps,q=D.revealOrder,re=D.tail;if(Dr(S,E,D.children,R),D=Nr.current,(D&2)!==0)D=D&1|2,E.flags|=128;else{if(S!==null&&(S.flags&128)!==0)e:for(S=E.child;S!==null;){if(S.tag===13)S.memoizedState!==null&&LS(S,R,E);else if(S.tag===19)LS(S,R,E);else if(S.child!==null){S.child.return=S,S=S.child;continue}if(S===E)break e;for(;S.sibling===null;){if(S.return===null||S.return===E)break e;S=S.return}S.sibling.return=S.return,S=S.sibling}D&=1}if(Xn(Nr,D),(E.mode&1)===0)E.memoizedState=null;else switch(q){case"forwards":for(R=E.child,q=null;R!==null;)S=R.alternate,S!==null&&Zm(S)===null&&(q=R),R=R.sibling;R=q,R===null?(q=E.child,E.child=null):(q=R.sibling,R.sibling=null),$s(E,!1,q,R,re);break;case"backwards":for(R=null,q=E.child,E.child=null;q!==null;){if(S=q.alternate,S!==null&&Zm(S)===null){E.child=q;break}S=q.sibling,q.sibling=R,R=q,q=S}$s(E,!0,R,null,re);break;case"together":$s(E,!1,null,null,void 0);break;default:E.memoizedState=null}return E.child}function Xo(S,E,R){if(S!==null&&(E.dependencies=S.dependencies),Hs|=E.lanes,(R&E.childLanes)===0)return null;if(S!==null&&E.child!==S.child)throw Error(a(153));if(E.child!==null){for(S=E.child,R=Nl(S,S.pendingProps),E.child=R,R.return=E;S.sibling!==null;)S=S.sibling,R=R.sibling=Nl(S,S.pendingProps),R.return=E;R.sibling=null}return E.child}function pg(S,E,R){switch(E.tag){case 3:kh(E),Ld();break;case 5:NS(E);break;case 1:Hr(E.type)&&hc(E);break;case 4:Jm(E,E.stateNode.containerInfo);break;case 10:pl(E,E.type._context,E.memoizedProps.value);break;case 13:var D=E.memoizedState;if(D!==null)return D.dehydrated!==null?(Xn(Nr,Nr.current&1),E.flags|=128,null):(R&E.child.childLanes)!==0?mx(S,E,R):(Xn(Nr,Nr.current&1),S=Xo(S,E,R),S!==null?S.sibling:null);Xn(Nr,Nr.current&1);break;case 19:if(D=(R&E.childLanes)!==0,(S.flags&128)!==0){if(D)return _u(S,E,R);E.flags|=128}var q=E.memoizedState;if(q!==null&&(q.rendering=null,q.tail=null,q.lastEffect=null),Xn(Nr,Nr.current),D)break;return null;case 22:case 23:return E.lanes=0,Yi(S,E,R)}return Xo(S,E,R)}function mg(S,E){switch(Q0(E),E.tag){case 1:return Hr(E.type)&&To(),S=E.flags,S&65536?(E.flags=S&-65537|128,E):null;case 3:return Ud(),xn(_i),xn(fi),gu(),S=E.flags,(S&65536)!==0&&(S&128)===0?(E.flags=S&-65537|128,E):null;case 5:return nx(E),null;case 13:if(xn(Nr),S=E.memoizedState,S!==null&&S.dehydrated!==null){if(E.alternate===null)throw Error(a(340));Ld()}return S=E.flags,S&65536?(E.flags=S&-65537|128,E):null;case 19:return xn(Nr),null;case 4:return Ud(),null;case 10:return ei(E.type._context),null;case 22:case 23:return Hh(),null;case 24:return null;default:return null}}var ko=!1,ji=!1,Tu=typeof WeakSet=="function"?WeakSet:Set,xt=null;function za(S,E){var R=S.ref;if(R!==null)if(typeof R=="function")try{R(null)}catch(D){Ro(S,E,D)}else R.current=null}function _l(S,E,R){try{R()}catch(D){Ro(S,E,D)}}var gx=!1;function yx(S,E){for(Y(S.containerInfo),xt=E;xt!==null;)if(S=xt,E=S.child,(S.subtreeFlags&1028)!==0&&E!==null)E.return=S,xt=E;else for(;xt!==null;){S=xt;try{var R=S.alternate;if((S.flags&1024)!==0)switch(S.tag){case 0:case 11:case 15:break;case 1:if(R!==null){var D=R.memoizedProps,q=R.memoizedState,re=S.stateNode,_e=re.getSnapshotBeforeUpdate(S.elementType===S.type?D:Ai(S.type,D),q);re.__reactInternalSnapshotBeforeUpdate=_e}break;case 3:he&&en(S.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(a(163))}}catch(Le){Ro(S,S.return,Le)}if(E=S.sibling,E!==null){E.return=S.return,xt=E;break}xt=S.return}return R=gx,gx=!1,R}function Tl(S,E,R){var D=E.updateQueue;if(D=D!==null?D.lastEffect:null,D!==null){var q=D=D.next;do{if((q.tag&S)===S){var re=q.destroy;q.destroy=void 0,re!==void 0&&_l(E,R,re)}q=q.next}while(q!==D)}}function Xi(S,E){if(E=E.updateQueue,E=E!==null?E.lastEffect:null,E!==null){var R=E=E.next;do{if((R.tag&S)===S){var D=R.create;R.destroy=D()}R=R.next}while(R!==E)}}function No(S){var E=S.ref;if(E!==null){var R=S.stateNode;switch(S.tag){case 5:S=K(R);break;default:S=R}typeof E=="function"?E(S):E.current=S}}function fr(S,E,R){if(fa&&typeof fa.onCommitFiberUnmount=="function")try{fa.onCommitFiberUnmount(yc,E)}catch{}switch(E.tag){case 0:case 11:case 14:case 15:if(S=E.updateQueue,S!==null&&(S=S.lastEffect,S!==null)){var D=S=S.next;do{var q=D,re=q.destroy;q=q.tag,re!==void 0&&((q&2)!==0||(q&4)!==0)&&_l(E,R,re),D=D.next}while(D!==S)}break;case 1:if(za(E,R),S=E.stateNode,typeof S.componentWillUnmount=="function")try{S.props=E.memoizedProps,S.state=E.memoizedState,S.componentWillUnmount()}catch(_e){Ro(E,R,_e)}break;case 5:za(E,R);break;case 4:he?wx(S,E,R):ee&&ee&&(E=E.stateNode.containerInfo,R=gr(E),fn(E,R))}}function Ua(S,E,R){for(var D=E;;)if(fr(S,D,R),D.child===null||he&&D.tag===4){if(D===E)break;for(;D.sibling===null;){if(D.return===null||D.return===E)return;D=D.return}D.sibling.return=D.return,D=D.sibling}else D.child.return=D,D=D.child}function vx(S){var E=S.alternate;E!==null&&(S.alternate=null,vx(E)),S.child=null,S.deletions=null,S.sibling=null,S.tag===5&&(E=S.stateNode,E!==null&&oe(E)),S.stateNode=null,S.return=null,S.dependencies=null,S.memoizedProps=null,S.memoizedState=null,S.pendingProps=null,S.stateNode=null,S.updateQueue=null}function xx(S){return S.tag===5||S.tag===3||S.tag===4}function gg(S){e:for(;;){for(;S.sibling===null;){if(S.return===null||xx(S.return))return null;S=S.return}for(S.sibling.return=S.return,S=S.sibling;S.tag!==5&&S.tag!==6&&S.tag!==18;){if(S.flags&2||S.child===null||S.tag===4)continue e;S.child.return=S,S=S.child}if(!(S.flags&2))return S.stateNode}}function yg(S){if(he){e:{for(var E=S.return;E!==null;){if(xx(E))break e;E=E.return}throw Error(a(160))}var R=E;switch(R.tag){case 5:E=R.stateNode,R.flags&32&&(Ve(E),R.flags&=-33),R=gg(S),qd(S,R,E);break;case 3:case 4:E=R.stateNode.containerInfo,R=gg(S),vg(S,R,E);break;default:throw Error(a(161))}}}function vg(S,E,R){var D=S.tag;if(D===5||D===6)S=S.stateNode,E?dt(R,S,E):Ne(R,S);else if(D!==4&&(S=S.child,S!==null))for(vg(S,E,R),S=S.sibling;S!==null;)vg(S,E,R),S=S.sibling}function qd(S,E,R){var D=S.tag;if(D===5||D===6)S=S.stateNode,E?St(R,S,E):ke(R,S);else if(D!==4&&(S=S.child,S!==null))for(qd(S,E,R),S=S.sibling;S!==null;)qd(S,E,R),S=S.sibling}function wx(S,E,R){for(var D=E,q=!1,re,_e;;){if(!q){q=D.return;e:for(;;){if(q===null)throw Error(a(160));switch(re=q.stateNode,q.tag){case 5:_e=!1;break e;case 3:re=re.containerInfo,_e=!0;break e;case 4:re=re.containerInfo,_e=!0;break e}q=q.return}q=!0}if(D.tag===5||D.tag===6)Ua(S,D,R),_e?Ee(re,D.stateNode):ft(re,D.stateNode);else if(D.tag===18)_e?ua(re,D.stateNode):tr(re,D.stateNode);else if(D.tag===4){if(D.child!==null){re=D.stateNode.containerInfo,_e=!0,D.child.return=D,D=D.child;continue}}else if(fr(S,D,R),D.child!==null){D.child.return=D,D=D.child;continue}if(D===E)break;for(;D.sibling===null;){if(D.return===null||D.return===E)return;D=D.return,D.tag===4&&(q=!1)}D.sibling.return=D.return,D=D.sibling}}function Mc(S,E){if(he){switch(E.tag){case 0:case 11:case 14:case 15:Tl(3,E,E.return),Xi(3,E),Tl(5,E,E.return);return;case 1:return;case 5:var R=E.stateNode;if(R!=null){var D=E.memoizedProps;S=S!==null?S.memoizedProps:D;var q=E.type,re=E.updateQueue;E.updateQueue=null,re!==null&&ot(R,re,q,S,D,E)}return;case 6:if(E.stateNode===null)throw Error(a(162));R=E.memoizedProps,qe(E.stateNode,S!==null?S.memoizedProps:R,R);return;case 3:xe&&S!==null&&S.memoizedState.isDehydrated&&cn(E.stateNode.containerInfo);return;case 12:return;case 13:Yd(E);return;case 19:Yd(E);return;case 17:return}throw Error(a(163))}switch(E.tag){case 0:case 11:case 14:case 15:Tl(3,E,E.return),Xi(3,E),Tl(5,E,E.return);return;case 12:return;case 13:Yd(E);return;case 19:Yd(E);return;case 3:xe&&S!==null&&S.memoizedState.isDehydrated&&cn(E.stateNode.containerInfo);break;case 22:case 23:return}e:if(ee){switch(E.tag){case 1:case 5:case 6:break e;case 3:case 4:E=E.stateNode,fn(E.containerInfo,E.pendingChildren);break e}throw Error(a(163))}}function Yd(S){var E=S.updateQueue;if(E!==null){S.updateQueue=null;var R=S.stateNode;R===null&&(R=S.stateNode=new Tu),E.forEach(function(D){var q=BS.bind(null,S,D);R.has(D)||(R.add(D),D.then(q,q))})}}function q2(S,E){for(xt=E;xt!==null;){E=xt;var R=E.deletions;if(R!==null)for(var D=0;D<R.length;D++){var q=R[D];try{var re=S;he?wx(re,q,E):Ua(re,q,E);var _e=q.alternate;_e!==null&&(_e.return=null),q.return=null}catch(Ft){Ro(q,E,Ft)}}if(R=E.child,(E.subtreeFlags&12854)!==0&&R!==null)R.return=E,xt=R;else for(;xt!==null;){E=xt;try{var Le=E.flags;if(Le&32&&he&&Ve(E.stateNode),Le&512){var Qe=E.alternate;if(Qe!==null){var mt=Qe.ref;mt!==null&&(typeof mt=="function"?mt(null):mt.current=null)}}if(Le&8192)switch(E.tag){case 13:if(E.memoizedState!==null){var Nt=E.alternate;(Nt===null||Nt.memoizedState===null)&&(Uh=yr())}break;case 22:var an=E.memoizedState!==null,Vt=E.alternate,pn=Vt!==null&&Vt.memoizedState!==null;if(R=E,he){e:if(D=R,q=an,re=null,he)for(var Pt=D;;){if(Pt.tag===5){if(re===null){re=Pt;var Zi=Pt.stateNode;q?Xe(Zi):wt(Pt.stateNode,Pt.memoizedProps)}}else if(Pt.tag===6){if(re===null){var ba=Pt.stateNode;q?et(ba):Bt(ba,Pt.memoizedProps)}}else if((Pt.tag!==22&&Pt.tag!==23||Pt.memoizedState===null||Pt===D)&&Pt.child!==null){Pt.child.return=Pt,Pt=Pt.child;continue}if(Pt===D)break;for(;Pt.sibling===null;){if(Pt.return===null||Pt.return===D)break e;re===Pt&&(re=null),Pt=Pt.return}re===Pt&&(re=null),Pt.sibling.return=Pt.return,Pt=Pt.sibling}}if(an&&!pn&&(R.mode&1)!==0){xt=R;for(var Ge=R.child;Ge!==null;){for(R=xt=Ge;xt!==null;){D=xt;var Fe=D.child;switch(D.tag){case 0:case 11:case 14:case 15:Tl(4,D,D.return);break;case 1:za(D,D.return);var Je=D.stateNode;if(typeof Je.componentWillUnmount=="function"){var Tt=D.return;try{Je.props=D.memoizedProps,Je.state=D.memoizedState,Je.componentWillUnmount()}catch(Ft){Ro(D,Tt,Ft)}}break;case 5:za(D,D.return);break;case 22:if(D.memoizedState!==null){Sx(R);continue}}Fe!==null?(Fe.return=D,xt=Fe):Sx(R)}Ge=Ge.sibling}}}switch(Le&4102){case 2:yg(E),E.flags&=-3;break;case 6:yg(E),E.flags&=-3,Mc(E.alternate,E);break;case 4096:E.flags&=-4097;break;case 4100:E.flags&=-4097,Mc(E.alternate,E);break;case 4:Mc(E.alternate,E)}}catch(Ft){Ro(E,E.return,Ft)}if(R=E.sibling,R!==null){R.return=E.return,xt=R;break}xt=E.return}}}function Ih(S,E,R){xt=S,Oh(S)}function Oh(S,E,R){for(var D=(S.mode&1)!==0;xt!==null;){var q=xt,re=q.child;if(q.tag===22&&D){var _e=q.memoizedState!==null||ko;if(!_e){var Le=q.alternate,Qe=Le!==null&&Le.memoizedState!==null||ji;Le=ko;var mt=ji;if(ko=_e,(ji=Qe)&&!mt)for(xt=q;xt!==null;)_e=xt,Qe=_e.child,_e.tag===22&&_e.memoizedState!==null?Cu(q):Qe!==null?(Qe.return=_e,xt=Qe):Cu(q);for(;re!==null;)xt=re,Oh(re),re=re.sibling;xt=q,ko=Le,ji=mt}bx(S)}else(q.subtreeFlags&8772)!==0&&re!==null?(re.return=q,xt=re):bx(S)}}function bx(S){for(;xt!==null;){var E=xt;if((E.flags&8772)!==0){var R=E.alternate;try{if((E.flags&8772)!==0)switch(E.tag){case 0:case 11:case 15:ji||Xi(5,E);break;case 1:var D=E.stateNode;if(E.flags&4&&!ji)if(R===null)D.componentDidMount();else{var q=E.elementType===E.type?R.memoizedProps:Ai(E.type,R.memoizedProps);D.componentDidUpdate(q,R.memoizedState,D.__reactInternalSnapshotBeforeUpdate)}var re=E.updateQueue;re!==null&&ES(E,re,D);break;case 3:var _e=E.updateQueue;if(_e!==null){if(R=null,E.child!==null)switch(E.child.tag){case 5:R=K(E.child.stateNode);break;case 1:R=E.child.stateNode}ES(E,_e,R)}break;case 5:var Le=E.stateNode;R===null&&E.flags&4&&tt(Le,E.type,E.memoizedProps,E);break;case 6:break;case 4:break;case 12:break;case 13:if(xe&&E.memoizedState===null){var Qe=E.alternate;if(Qe!==null){var mt=Qe.memoizedState;if(mt!==null){var Nt=mt.dehydrated;Nt!==null&&yn(Nt)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(a(163))}ji||E.flags&512&&No(E)}catch(an){Ro(E,E.return,an)}}if(E===S){xt=null;break}if(R=E.sibling,R!==null){R.return=E.return,xt=R;break}xt=E.return}}function Sx(S){for(;xt!==null;){var E=xt;if(E===S){xt=null;break}var R=E.sibling;if(R!==null){R.return=E.return,xt=R;break}xt=E.return}}function Cu(S){for(;xt!==null;){var E=xt;try{switch(E.tag){case 0:case 11:case 15:var R=E.return;try{Xi(4,E)}catch(Qe){Ro(E,R,Qe)}break;case 1:var D=E.stateNode;if(typeof D.componentDidMount=="function"){var q=E.return;try{D.componentDidMount()}catch(Qe){Ro(E,q,Qe)}}var re=E.return;try{No(E)}catch(Qe){Ro(E,re,Qe)}break;case 5:var _e=E.return;try{No(E)}catch(Qe){Ro(E,_e,Qe)}}}catch(Qe){Ro(E,E.return,Qe)}if(E===S){xt=null;break}var Le=E.sibling;if(Le!==null){Le.return=E.return,xt=Le;break}xt=E.return}}var Lh=0,Au=1,Mu=2,Cl=3,Xd=4;if(typeof Symbol=="function"&&Symbol.for){var Pu=Symbol.for;Lh=Pu("selector.component"),Au=Pu("selector.has_pseudo_class"),Mu=Pu("selector.role"),Cl=Pu("selector.test_id"),Xd=Pu("selector.text")}function Dh(S){var E=be(S);if(E!=null){if(typeof E.memoizedProps["data-testname"]!="string")throw Error(a(364));return E}if(S=ye(S),S===null)throw Error(a(362));return S.stateNode.current}function Fh(S,E){switch(E.$$typeof){case Lh:if(S.type===E.value)return!0;break;case Au:e:{E=E.value,S=[S,0];for(var R=0;R<S.length;){var D=S[R++],q=S[R++],re=E[q];if(D.tag!==5||!Ue(D)){for(;re!=null&&Fh(D,re);)q++,re=E[q];if(q===E.length){E=!0;break e}else for(D=D.child;D!==null;)S.push(D,q),D=D.sibling}}E=!1}return E;case Mu:if(S.tag===5&&$e(S.stateNode,E.value))return!0;break;case Xd:if((S.tag===5||S.tag===6)&&(S=De(S),S!==null&&0<=S.indexOf(E.value)))return!0;break;case Cl:if(S.tag===5&&(S=S.memoizedProps["data-testname"],typeof S=="string"&&S.toLowerCase()===E.value.toLowerCase()))return!0;break;default:throw Error(a(365))}return!1}function Pc(S){switch(S.$$typeof){case Lh:return"<"+(k(S.value)||"Unknown")+">";case Au:return":has("+(Pc(S)||"")+")";case Mu:return'[role="'+S.value+'"]';case Xd:return'"'+S.value+'"';case Cl:return'[data-testname="'+S.value+'"]';default:throw Error(a(365))}}function ya(S,E){var R=[];S=[S,0];for(var D=0;D<S.length;){var q=S[D++],re=S[D++],_e=E[re];if(q.tag!==5||!Ue(q)){for(;_e!=null&&Fh(q,_e);)re++,_e=E[re];if(re===E.length)R.push(q);else for(q=q.child;q!==null;)S.push(q,re),q=q.sibling}}return R}function Al(S,E){if(!me)throw Error(a(363));S=Dh(S),S=ya(S,E),E=[],S=Array.from(S);for(var R=0;R<S.length;){var D=S[R++];if(D.tag===5)Ue(D)||E.push(D.stateNode);else for(D=D.child;D!==null;)S.push(D),D=D.sibling}return E}var Ex=Math.ceil,zh=s.ReactCurrentDispatcher,ds=s.ReactCurrentOwner,Zn=s.ReactCurrentBatchConfig,hn=0,Gr=null,Qn=null,xr=0,fo=0,ku=so(0),Fr=0,Kd=null,Hs=0,va=0,Nu=0,Ml=null,ti=null,Uh=0,kc=1/0;function Ru(){kc=yr()+500}var Jd=!1,hr=null,fs=null,Zd=!1,Vs=null,ju=0,Iu=0,Pl=null,cr=-1,zr=0;function zn(){return(hn&6)!==0?yr():cr!==-1?cr:cr=yr()}function hs(S){return(S.mode&1)===0?1:(hn&2)!==0&&xr!==0?xr&-xr:wc.transition!==null?(zr===0&&(S=is,is<<=1,(is&4194240)===0&&(is=64),zr=S),zr):(S=nn,S!==0?S:Ce())}function ho(S,E,R){if(50<Iu)throw Iu=0,Pl=null,Error(a(185));var D=Nc(S,E);return D===null?null:(Ra(D,E,R),((hn&2)===0||D!==Gr)&&(D===Gr&&((hn&2)===0&&(va|=E),Fr===4&&Ji(D,xr)),Ko(D,R),E===1&&hn===0&&(S.mode&1)===0&&(Ru(),zs&&co())),D)}function Nc(S,E){S.lanes|=E;var R=S.alternate;for(R!==null&&(R.lanes|=E),R=S,S=S.return;S!==null;)S.childLanes|=E,R=S.alternate,R!==null&&(R.childLanes|=E),R=S,S=S.return;return R.tag===3?R.stateNode:null}function Ko(S,E){var R=S.callbackNode;Rd(S,E);var D=mc(S,S===Gr?xr:0);if(D===0)R!==null&&Fs(R),S.callbackNode=null,S.callbackPriority=0;else if(E=D&-D,S.callbackPriority!==E){if(R!=null&&Fs(R),E===1)S.tag===0?xc(xa.bind(null,S)):du(xa.bind(null,S)),ae?Se(function(){hn===0&&co()}):da(as,co),R=null;else{switch(ja(D)){case 1:R=as;break;case 4:R=$m;break;case 16:R=lo;break;case 536870912:R=gc;break;default:R=lo}R=wg(R,Ki.bind(null,S))}S.callbackPriority=E,S.callbackNode=R}}function Ki(S,E){if(cr=-1,zr=0,(hn&6)!==0)throw Error(a(327));var R=S.callbackNode;if(Ws()&&S.callbackNode!==R)return null;var D=mc(S,S===Gr?xr:0);if(D===0)return null;if((D&30)!==0||(D&S.expiredLanes)!==0||E)E=Vh(S,D);else{E=D;var q=hn;hn|=2;var re=Cx();(Gr!==S||xr!==E)&&(Ru(),kl(S,E));do try{FS();break}catch(Le){Tx(S,Le)}while(!0);Mi(),zh.current=re,hn=q,Qn!==null?E=0:(Gr=null,xr=0,E=Fr)}if(E!==0){if(E===2&&(q=Ds(S),q!==0&&(D=q,E=Bh(S,q))),E===1)throw R=Kd,kl(S,0),Ji(S,D),Ko(S,yr()),R;if(E===6)Ji(S,D);else{if(q=S.current.alternate,(D&30)===0&&!_x(q)&&(E=Vh(S,D),E===2&&(re=Ds(S),re!==0&&(D=re,E=Bh(S,re))),E===1))throw R=Kd,kl(S,0),Ji(S,D),Ko(S,yr()),R;switch(S.finishedWork=q,S.finishedLanes=D,E){case 0:case 1:throw Error(a(345));case 2:ps(S,ti);break;case 3:if(Ji(S,D),(D&130023424)===D&&(E=Uh+500-yr(),10<E)){if(mc(S,0)!==0)break;if(q=S.suspendedLanes,(q&D)!==D){zn(),S.pingedLanes|=S.suspendedLanes&q;break}S.timeoutHandle=ie(ps.bind(null,S,ti),E);break}ps(S,ti);break;case 4:if(Ji(S,D),(D&4194240)===D)break;for(E=S.eventTimes,q=-1;0<D;){var _e=31-Wo(D);re=1<<_e,_e=E[_e],_e>q&&(q=_e),D&=~re}if(D=q,D=yr()-D,D=(120>D?120:480>D?480:1080>D?1080:1920>D?1920:3e3>D?3e3:4320>D?4320:1960*Ex(D/1960))-D,10<D){S.timeoutHandle=ie(ps.bind(null,S,ti),D);break}ps(S,ti);break;case 5:ps(S,ti);break;default:throw Error(a(329))}}}return Ko(S,yr()),S.callbackNode===R?Ki.bind(null,S):null}function Bh(S,E){var R=Ml;return S.current.memoizedState.isDehydrated&&(kl(S,E).flags|=256),S=Vh(S,E),S!==2&&(E=ti,ti=R,E!==null&&$h(E)),S}function $h(S){ti===null?ti=S:ti.push.apply(ti,S)}function _x(S){for(var E=S;;){if(E.flags&16384){var R=E.updateQueue;if(R!==null&&(R=R.stores,R!==null))for(var D=0;D<R.length;D++){var q=R[D],re=q.getSnapshot;q=q.value;try{if(!Ti(re(),q))return!1}catch{return!1}}}if(R=E.child,E.subtreeFlags&16384&&R!==null)R.return=E,E=R;else{if(E===S)break;for(;E.sibling===null;){if(E.return===null||E.return===S)return!0;E=E.return}E.sibling.return=E.return,E=E.sibling}}return!0}function Ji(S,E){for(E&=~Nu,E&=~va,S.suspendedLanes|=E,S.pingedLanes&=~E,S=S.expirationTimes;0<E;){var R=31-Wo(E),D=1<<R;S[R]=-1,E&=~D}}function xa(S){if((hn&6)!==0)throw Error(a(327));Ws();var E=mc(S,0);if((E&1)===0)return Ko(S,yr()),null;var R=Vh(S,E);if(S.tag!==0&&R===2){var D=Ds(S);D!==0&&(E=D,R=Bh(S,D))}if(R===1)throw R=Kd,kl(S,0),Ji(S,E),Ko(S,yr()),R;if(R===6)throw Error(a(345));return S.finishedWork=S.current.alternate,S.finishedLanes=E,ps(S,ti),Ko(S,yr()),null}function Qd(S){Vs!==null&&Vs.tag===0&&(hn&6)===0&&Ws();var E=hn;hn|=1;var R=Zn.transition,D=nn;try{if(Zn.transition=null,nn=1,S)return S()}finally{nn=D,Zn.transition=R,hn=E,(hn&6)===0&&co()}}function Hh(){fo=ku.current,xn(ku)}function kl(S,E){S.finishedWork=null,S.finishedLanes=0;var R=S.timeoutHandle;if(R!==de&&(S.timeoutHandle=de,pe(R)),Qn!==null)for(R=Qn.return;R!==null;){var D=R;switch(Q0(D),D.tag){case 1:D=D.type.childContextTypes,D!=null&&To();break;case 3:Ud(),xn(_i),xn(fi),gu();break;case 5:nx(D);break;case 4:Ud();break;case 13:xn(Nr);break;case 19:xn(Nr);break;case 10:ei(D.type._context);break;case 22:case 23:Hh()}R=R.return}if(Gr=S,Qn=S=Nl(S.current,null),xr=fo=E,Fr=0,Kd=null,Nu=va=Hs=0,ti=Ml=null,Ao!==null){for(E=0;E<Ao.length;E++)if(R=Ao[E],D=R.interleaved,D!==null){R.interleaved=null;var q=D.next,re=R.pending;if(re!==null){var _e=re.next;re.next=q,D.next=_e}R.pending=D}Ao=null}return S}function Tx(S,E){do{var R=Qn;try{if(Mi(),bh.current=Wd,Qm){for(var D=Rr.memoizedState;D!==null;){var q=D.queue;q!==null&&(q.pending=null),D=D.next}Qm=!1}if(yu=0,ki=Pi=Rr=null,Us=!1,vu=0,ds.current=null,R===null||R.return===null){Fr=1,Kd=E,Qn=null;break}e:{var re=S,_e=R.return,Le=R,Qe=E;if(E=xr,Le.flags|=32768,Qe!==null&&typeof Qe=="object"&&typeof Qe.then=="function"){var mt=Qe,Nt=Le,an=Nt.tag;if((Nt.mode&1)===0&&(an===0||an===11||an===15)){var Vt=Nt.alternate;Vt?(Nt.updateQueue=Vt.updateQueue,Nt.memoizedState=Vt.memoizedState,Nt.lanes=Vt.lanes):(Nt.updateQueue=null,Nt.memoizedState=null)}var pn=fx(_e);if(pn!==null){pn.flags&=-257,wu(pn,_e,Le,re,E),pn.mode&1&&wl(re,mt,E),E=pn,Qe=mt;var Pt=E.updateQueue;if(Pt===null){var Zi=new Set;Zi.add(Qe),E.updateQueue=Zi}else Pt.add(Qe);break e}else{if((E&1)===0){wl(re,mt,E),xg();break e}Qe=Error(a(426))}}else if(vr&&Le.mode&1){var ba=fx(_e);if(ba!==null){(ba.flags&65536)===0&&(ba.flags|=256),wu(ba,_e,Le,re,E),Km(Qe);break e}}re=Qe,Fr!==4&&(Fr=2),Ml===null?Ml=[re]:Ml.push(re),Qe=dx(Qe,Le),Le=_e;do{switch(Le.tag){case 3:Le.flags|=65536,E&=-E,Le.lanes|=E;var Ge=OS(Le,Qe,E);Vm(Le,Ge);break e;case 1:re=Qe;var Fe=Le.type,Je=Le.stateNode;if((Le.flags&128)===0&&(typeof Fe.getDerivedStateFromError=="function"||Je!==null&&typeof Je.componentDidCatch=="function"&&(fs===null||!fs.has(Je)))){Le.flags|=65536,E&=-E,Le.lanes|=E;var Tt=cg(Le,re,E);Vm(Le,Tt);break e}}Le=Le.return}while(Le!==null)}Mx(R)}catch(Ft){E=Ft,Qn===R&&R!==null&&(Qn=R=R.return);continue}break}while(!0)}function Cx(){var S=zh.current;return zh.current=Wd,S===null?Wd:S}function xg(){(Fr===0||Fr===3||Fr===2)&&(Fr=4),Gr===null||(Hs&268435455)===0&&(va&268435455)===0||Ji(Gr,xr)}function Vh(S,E){var R=hn;hn|=2;var D=Cx();Gr===S&&xr===E||kl(S,E);do try{DS();break}catch(q){Tx(S,q)}while(!0);if(Mi(),hn=R,zh.current=D,Qn!==null)throw Error(a(261));return Gr=null,xr=0,Fr}function DS(){for(;Qn!==null;)Ax(Qn)}function FS(){for(;Qn!==null&&!Ia();)Ax(Qn)}function Ax(S){var E=Nx(S.alternate,S,fo);S.memoizedProps=S.pendingProps,E===null?Mx(S):Qn=E,ds.current=null}function Mx(S){var E=S;do{var R=E.alternate;if(S=E.return,(E.flags&32768)===0){if(R=fg(R,E,fo),R!==null){Qn=R;return}}else{if(R=mg(R,E),R!==null){R.flags&=32767,Qn=R;return}if(S!==null)S.flags|=32768,S.subtreeFlags=0,S.deletions=null;else{Fr=6,Qn=null;return}}if(E=E.sibling,E!==null){Qn=E;return}Qn=E=S}while(E!==null);Fr===0&&(Fr=5)}function ps(S,E){var R=nn,D=Zn.transition;try{Zn.transition=null,nn=1,zS(S,E,R)}finally{Zn.transition=D,nn=R}return null}function zS(S,E,R){do Ws();while(Vs!==null);if((hn&6)!==0)throw Error(a(327));var D=S.finishedWork,q=S.finishedLanes;if(D===null)return null;if(S.finishedWork=null,S.finishedLanes=0,D===S.current)throw Error(a(177));S.callbackNode=null,S.callbackPriority=0;var re=D.lanes|D.childLanes;if(os(S,re),S===Gr&&(Qn=Gr=null,xr=0),(D.subtreeFlags&2064)===0&&(D.flags&2064)===0||Zd||(Zd=!0,wg(lo,function(){return Ws(),null})),re=(D.flags&15990)!==0,(D.subtreeFlags&15990)!==0||re){re=Zn.transition,Zn.transition=null;var _e=nn;nn=1;var Le=hn;hn|=4,ds.current=null,yx(S,D),q2(S,D),L(S.containerInfo),S.current=D,Ih(D),Bm(),hn=Le,nn=_e,Zn.transition=re}else S.current=D;if(Zd&&(Zd=!1,Vs=S,ju=q),re=S.pendingLanes,re===0&&(fs=null),ul(D.stateNode),Ko(S,yr()),E!==null)for(R=S.onRecoverableError,D=0;D<E.length;D++)R(E[D]);if(Jd)throw Jd=!1,S=hr,hr=null,S;return(ju&1)!==0&&S.tag!==0&&Ws(),re=S.pendingLanes,(re&1)!==0?S===Pl?Iu++:(Iu=0,Pl=S):Iu=0,co(),null}function Ws(){if(Vs!==null){var S=ja(ju),E=Zn.transition,R=nn;try{if(Zn.transition=null,nn=16>S?16:S,Vs===null)var D=!1;else{if(S=Vs,Vs=null,ju=0,(hn&6)!==0)throw Error(a(331));var q=hn;for(hn|=4,xt=S.current;xt!==null;){var re=xt,_e=re.child;if((xt.flags&16)!==0){var Le=re.deletions;if(Le!==null){for(var Qe=0;Qe<Le.length;Qe++){var mt=Le[Qe];for(xt=mt;xt!==null;){var Nt=xt;switch(Nt.tag){case 0:case 11:case 15:Tl(8,Nt,re)}var an=Nt.child;if(an!==null)an.return=Nt,xt=an;else for(;xt!==null;){Nt=xt;var Vt=Nt.sibling,pn=Nt.return;if(vx(Nt),Nt===mt){xt=null;break}if(Vt!==null){Vt.return=pn,xt=Vt;break}xt=pn}}}var Pt=re.alternate;if(Pt!==null){var Zi=Pt.child;if(Zi!==null){Pt.child=null;do{var ba=Zi.sibling;Zi.sibling=null,Zi=ba}while(Zi!==null)}}xt=re}}if((re.subtreeFlags&2064)!==0&&_e!==null)_e.return=re,xt=_e;else e:for(;xt!==null;){if(re=xt,(re.flags&2048)!==0)switch(re.tag){case 0:case 11:case 15:Tl(9,re,re.return)}var Ge=re.sibling;if(Ge!==null){Ge.return=re.return,xt=Ge;break e}xt=re.return}}var Fe=S.current;for(xt=Fe;xt!==null;){_e=xt;var Je=_e.child;if((_e.subtreeFlags&2064)!==0&&Je!==null)Je.return=_e,xt=Je;else e:for(_e=Fe;xt!==null;){if(Le=xt,(Le.flags&2048)!==0)try{switch(Le.tag){case 0:case 11:case 15:Xi(9,Le)}}catch(Ft){Ro(Le,Le.return,Ft)}if(Le===_e){xt=null;break e}var Tt=Le.sibling;if(Tt!==null){Tt.return=Le.return,xt=Tt;break e}xt=Le.return}}if(hn=q,co(),fa&&typeof fa.onPostCommitFiberRoot=="function")try{fa.onPostCommitFiberRoot(yc,S)}catch{}D=!0}return D}finally{nn=R,Zn.transition=E}}return!1}function Wh(S,E,R){E=dx(R,E),E=OS(S,E,1),bc(S,E),E=zn(),S=Nc(S,1),S!==null&&(Ra(S,1,E),Ko(S,E))}function Ro(S,E,R){if(S.tag===3)Wh(S,S,R);else for(;E!==null;){if(E.tag===3){Wh(E,S,R);break}else if(E.tag===1){var D=E.stateNode;if(typeof E.type.getDerivedStateFromError=="function"||typeof D.componentDidCatch=="function"&&(fs===null||!fs.has(D))){S=dx(R,S),S=cg(E,S,1),bc(E,S),S=zn(),E=Nc(E,1),E!==null&&(Ra(E,1,S),Ko(E,S));break}}E=E.return}}function Px(S,E,R){var D=S.pingCache;D!==null&&D.delete(E),E=zn(),S.pingedLanes|=S.suspendedLanes&R,Gr===S&&(xr&R)===R&&(Fr===4||Fr===3&&(xr&130023424)===xr&&500>yr()-Uh?kl(S,0):Nu|=R),Ko(S,E)}function kx(S,E){E===0&&((S.mode&1)===0?E=1:(E=En,En<<=1,(En&130023424)===0&&(En=4194304)));var R=zn();S=Nc(S,E),S!==null&&(Ra(S,E,R),Ko(S,R))}function US(S){var E=S.memoizedState,R=0;E!==null&&(R=E.retryLane),kx(S,R)}function BS(S,E){var R=0;switch(S.tag){case 13:var D=S.stateNode,q=S.memoizedState;q!==null&&(R=q.retryLane);break;case 19:D=S.stateNode;break;default:throw Error(a(314))}D!==null&&D.delete(E),kx(S,R)}var Nx;Nx=function(S,E,R){if(S!==null)if(S.memoizedProps!==E.pendingProps||_i.current)Ri=!0;else{if((S.lanes&R)===0&&(E.flags&128)===0)return Ri=!1,pg(S,E,R);Ri=(S.flags&131072)!==0}else Ri=!1,vr&&(E.flags&1048576)!==0&&AS(E,Ym,E.index);switch(E.lanes=0,E.tag){case 2:var D=E.type;S!==null&&(S.alternate=null,E.alternate=null,E.flags|=2),S=E.pendingProps;var q=_o(E,fi.current);Vr(E,R),q=Bd(null,E,D,S,q,R);var re=Tc();return E.flags|=1,typeof q=="object"&&q!==null&&typeof q.render=="function"&&q.$$typeof===void 0?(E.tag=1,E.memoizedState=null,E.updateQueue=null,Hr(D)?(re=!0,hc(E)):re=!1,E.memoizedState=q.state!==null&&q.state!==void 0?q.state:null,jd(E),q.updater=Gm,E.stateNode=q,q._reactInternals=E,J0(E,D,S,R),E=uo(null,E,D,!0,re,R)):(E.tag=0,vr&&re&&Z0(E),Dr(null,E,q,R),E=E.child),E;case 16:D=E.elementType;e:{switch(S!==null&&(S.alternate=null,E.alternate=null,E.flags|=2),S=E.pendingProps,q=D._init,D=q(D._payload),E.type=D,q=E.tag=Y2(D),S=Ai(D,S),q){case 0:E=El(null,E,D,S,R);break e;case 1:E=Su(null,E,D,S,R);break e;case 11:E=lr(null,E,D,S,R);break e;case 14:E=nr(null,E,D,Ai(D.type,S),R);break e}throw Error(a(306,D,""))}return E;case 0:return D=E.type,q=E.pendingProps,q=E.elementType===D?q:Ai(D,q),El(S,E,D,q,R);case 1:return D=E.type,q=E.pendingProps,q=E.elementType===D?q:Ai(D,q),Su(S,E,D,q,R);case 3:e:{if(kh(E),S===null)throw Error(a(387));D=E.pendingProps,re=E.memoizedState,q=re.element,Y0(S,E),Wm(E,D,null,R);var _e=E.memoizedState;if(D=_e.element,xe&&re.isDehydrated)if(re={element:D,isDehydrated:!1,cache:_e.cache,transitions:_e.transitions},E.updateQueue.baseState=re,E.memoizedState=re,E.flags&256){q=Error(a(423)),E=px(S,E,D,R,q);break e}else if(D!==q){q=Error(a(424)),E=px(S,E,D,R,q);break e}else for(xe&&(qi=ze(E.stateNode.containerInfo),Mo=E,vr=!0,Fa=null,Od=!1),R=kS(E,null,D,R),E.child=R;R;)R.flags=R.flags&-3|4096,R=R.sibling;else{if(Ld(),D===q){E=Xo(S,E,R);break e}Dr(S,E,D,R)}E=E.child}return E;case 5:return NS(E),S===null&&Ec(E),D=E.type,q=E.pendingProps,re=S!==null?S.memoizedProps:null,_e=q.children,se(D,q)?_e=null:re!==null&&se(D,re)&&(E.flags|=32),Po(S,E),Dr(S,E,_e,R),E.child;case 6:return S===null&&Ec(E),null;case 13:return mx(S,E,R);case 4:return Jm(E,E.stateNode.containerInfo),D=E.pendingProps,S===null?E.child=vl(E,null,D,R):Dr(S,E,D,R),E.child;case 11:return D=E.type,q=E.pendingProps,q=E.elementType===D?q:Ai(D,q),lr(S,E,D,q,R);case 7:return Dr(S,E,E.pendingProps,R),E.child;case 8:return Dr(S,E,E.pendingProps.children,R),E.child;case 12:return Dr(S,E,E.pendingProps.children,R),E.child;case 10:e:{if(D=E.type._context,q=E.pendingProps,re=E.memoizedProps,_e=q.value,pl(E,D,_e),re!==null)if(Ti(re.value,_e)){if(re.children===q.children&&!_i.current){E=Xo(S,E,R);break e}}else for(re=E.child,re!==null&&(re.return=E);re!==null;){var Le=re.dependencies;if(Le!==null){_e=re.child;for(var Qe=Le.firstContext;Qe!==null;){if(Qe.context===D){if(re.tag===1){Qe=ml(-1,R&-R),Qe.tag=2;var mt=re.updateQueue;if(mt!==null){mt=mt.shared;var Nt=mt.pending;Nt===null?Qe.next=Qe:(Qe.next=Nt.next,Nt.next=Qe),mt.pending=Qe}}re.lanes|=R,Qe=re.alternate,Qe!==null&&(Qe.lanes|=R),pi(re.return,R,E),Le.lanes|=R;break}Qe=Qe.next}}else if(re.tag===10)_e=re.type===E.type?null:re.child;else if(re.tag===18){if(_e=re.return,_e===null)throw Error(a(341));_e.lanes|=R,Le=_e.alternate,Le!==null&&(Le.lanes|=R),pi(_e,R,E),_e=re.sibling}else _e=re.child;if(_e!==null)_e.return=re;else for(_e=re;_e!==null;){if(_e===E){_e=null;break}if(re=_e.sibling,re!==null){re.return=_e.return,_e=re;break}_e=_e.return}re=_e}Dr(S,E,q.children,R),E=E.child}return E;case 9:return q=E.type,D=E.pendingProps.children,Vr(E,R),q=kr(q),D=D(q),E.flags|=1,Dr(S,E,D,R),E.child;case 14:return D=E.type,q=Ai(D,E.pendingProps),q=Ai(D.type,q),nr(S,E,D,q,R);case 15:return Sl(S,E,E.type,E.pendingProps,R);case 17:return D=E.type,q=E.pendingProps,q=E.elementType===D?q:Ai(D,q),S!==null&&(S.alternate=null,E.alternate=null,E.flags|=2),E.tag=1,Hr(D)?(S=!0,hc(E)):S=!1,Vr(E,R),TS(E,D,q),J0(E,D,q,R),uo(null,E,D,!0,S,R);case 19:return _u(S,E,R);case 22:return Yi(S,E,R)}throw Error(a(156,E.tag))};function wg(S,E){return da(S,E)}function $S(S,E,R,D){this.tag=S,this.key=R,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=E,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=D,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wa(S,E,R,D){return new $S(S,E,R,D)}function bg(S){return S=S.prototype,!(!S||!S.isReactComponent)}function Y2(S){if(typeof S=="function")return bg(S)?1:0;if(S!=null){if(S=S.$$typeof,S===g)return 11;if(S===w)return 14}return 2}function Nl(S,E){var R=S.alternate;return R===null?(R=wa(S.tag,E,S.key,S.mode),R.elementType=S.elementType,R.type=S.type,R.stateNode=S.stateNode,R.alternate=S,S.alternate=R):(R.pendingProps=E,R.type=S.type,R.flags=0,R.subtreeFlags=0,R.deletions=null),R.flags=S.flags&14680064,R.childLanes=S.childLanes,R.lanes=S.lanes,R.child=S.child,R.memoizedProps=S.memoizedProps,R.memoizedState=S.memoizedState,R.updateQueue=S.updateQueue,E=S.dependencies,R.dependencies=E===null?null:{lanes:E.lanes,firstContext:E.firstContext},R.sibling=S.sibling,R.index=S.index,R.ref=S.ref,R}function Sg(S,E,R,D,q,re){var _e=2;if(D=S,typeof S=="function")bg(S)&&(_e=1);else if(typeof S=="string")_e=5;else e:switch(S){case u:return Ou(R.children,q,re,E);case f:_e=8,q|=8;break;case h:return S=wa(12,R,E,q|2),S.elementType=h,S.lanes=re,S;case v:return S=wa(13,R,E,q),S.elementType=v,S.lanes=re,S;case b:return S=wa(19,R,E,q),S.elementType=b,S.lanes=re,S;case C:return Gh(R,q,re,E);default:if(typeof S=="object"&&S!==null)switch(S.$$typeof){case p:_e=10;break e;case y:_e=9;break e;case g:_e=11;break e;case w:_e=14;break e;case T:_e=16,D=null;break e}throw Error(a(130,S==null?S:typeof S,""))}return E=wa(_e,R,E,q),E.elementType=S,E.type=D,E.lanes=re,E}function Ou(S,E,R,D){return S=wa(7,S,D,E),S.lanes=R,S}function Gh(S,E,R,D){return S=wa(22,S,D,E),S.elementType=C,S.lanes=R,S.stateNode={},S}function Eg(S,E,R){return S=wa(6,S,null,E),S.lanes=R,S}function _g(S,E,R){return E=wa(4,S.children!==null?S.children:[],S.key,E),E.lanes=R,E.stateNode={containerInfo:S.containerInfo,pendingChildren:null,implementation:S.implementation},E}function Tg(S,E,R,D,q){this.tag=E,this.containerInfo=S,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=de,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=uu(0),this.expirationTimes=uu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=uu(0),this.identifierPrefix=D,this.onRecoverableError=q,xe&&(this.mutableSourceEagerHydrationData=null)}function HS(S,E,R,D,q,re,_e,Le,Qe){return S=new Tg(S,E,R,Le,Qe),E===1?(E=1,re===!0&&(E|=8)):E=0,re=wa(3,null,null,E),S.current=re,re.stateNode=S,re.memoizedState={element:D,isDehydrated:R,cache:null,transitions:null},jd(re),S}function VS(S){if(!S)return Pr;S=S._reactInternals;e:{if(U(S)!==S||S.tag!==1)throw Error(a(170));var E=S;do{switch(E.tag){case 3:E=E.stateNode.context;break e;case 1:if(Hr(E.type)){E=E.stateNode.__reactInternalMemoizedMergedChildContext;break e}}E=E.return}while(E!==null);throw Error(a(171))}if(S.tag===1){var R=S.type;if(Hr(R))return kd(S,R,E)}return E}function WS(S){var E=S._reactInternals;if(E===void 0)throw typeof S.render=="function"?Error(a(188)):(S=Object.keys(S).join(","),Error(a(268,S)));return S=B(E),S===null?null:S.stateNode}function Ba(S,E){if(S=S.memoizedState,S!==null&&S.dehydrated!==null){var R=S.retryLane;S.retryLane=R!==0&&R<E?R:E}}function qh(S,E){Ba(S,E),(S=S.alternate)&&Ba(S,E)}function Cg(S){return S=B(S),S===null?null:S.stateNode}function GS(){return null}return n.attemptContinuousHydration=function(S){if(S.tag===13){var E=zn();ho(S,134217728,E),qh(S,134217728)}},n.attemptHydrationAtCurrentPriority=function(S){if(S.tag===13){var E=zn(),R=hs(S);ho(S,R,E),qh(S,R)}},n.attemptSynchronousHydration=function(S){switch(S.tag){case 3:var E=S.stateNode;if(E.current.memoizedState.isDehydrated){var R=Ls(E.pendingLanes);R!==0&&(Gi(E,R|1),Ko(E,yr()),(hn&6)===0&&(Ru(),co()))}break;case 13:var D=zn();Qd(function(){return ho(S,1,D)}),qh(S,1)}},n.batchedUpdates=function(S,E){var R=hn;hn|=1;try{return S(E)}finally{hn=R,hn===0&&(Ru(),zs&&co())}},n.createComponentSelector=function(S){return{$$typeof:Lh,value:S}},n.createContainer=function(S,E,R,D,q,re,_e){return HS(S,E,!1,null,R,D,q,re,_e)},n.createHasPseudoClassSelector=function(S){return{$$typeof:Au,value:S}},n.createHydrationContainer=function(S,E,R,D,q,re,_e,Le,Qe){return S=HS(R,D,!0,S,q,re,_e,Le,Qe),S.context=VS(null),R=S.current,D=zn(),q=hs(R),re=ml(D,q),re.callback=E??null,bc(R,re),S.current.lanes=q,Ra(S,q,D),Ko(S,D),S},n.createPortal=function(S,E,R){var D=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:D==null?null:""+D,children:S,containerInfo:E,implementation:R}},n.createRoleSelector=function(S){return{$$typeof:Mu,value:S}},n.createTestNameSelector=function(S){return{$$typeof:Cl,value:S}},n.createTextSelector=function(S){return{$$typeof:Xd,value:S}},n.deferredUpdates=function(S){var E=nn,R=Zn.transition;try{return Zn.transition=null,nn=16,S()}finally{nn=E,Zn.transition=R}},n.discreteUpdates=function(S,E,R,D,q){var re=nn,_e=Zn.transition;try{return Zn.transition=null,nn=1,S(E,R,D,q)}finally{nn=re,Zn.transition=_e,hn===0&&Ru()}},n.findAllNodes=Al,n.findBoundingRects=function(S,E){if(!me)throw Error(a(363));E=Al(S,E),S=[];for(var R=0;R<E.length;R++)S.push(Ie(E[R]));for(E=S.length-1;0<E;E--){R=S[E];for(var D=R.x,q=D+R.width,re=R.y,_e=re+R.height,Le=E-1;0<=Le;Le--)if(E!==Le){var Qe=S[Le],mt=Qe.x,Nt=mt+Qe.width,an=Qe.y,Vt=an+Qe.height;if(D>=mt&&re>=an&&q<=Nt&&_e<=Vt){S.splice(E,1);break}else if(D!==mt||R.width!==Qe.width||Vt<re||an>_e){if(!(re!==an||R.height!==Qe.height||Nt<D||mt>q)){mt>D&&(Qe.width+=mt-D,Qe.x=D),Nt<q&&(Qe.width=q-mt),S.splice(E,1);break}}else{an>re&&(Qe.height+=an-re,Qe.y=re),Vt<_e&&(Qe.height=_e-an),S.splice(E,1);break}}}return S},n.findHostInstance=WS,n.findHostInstanceWithNoPortals=function(S){return S=O(S),S=S!==null?F(S):null,S===null?null:S.stateNode},n.findHostInstanceWithWarning=function(S){return WS(S)},n.flushControlled=function(S){var E=hn;hn|=1;var R=Zn.transition,D=nn;try{Zn.transition=null,nn=1,S()}finally{nn=D,Zn.transition=R,hn=E,hn===0&&(Ru(),co())}},n.flushPassiveEffects=Ws,n.flushSync=Qd,n.focusWithin=function(S,E){if(!me)throw Error(a(363));for(S=Dh(S),E=ya(S,E),E=Array.from(E),S=0;S<E.length;){var R=E[S++];if(!Ue(R)){if(R.tag===5&&we(R.stateNode))return!0;for(R=R.child;R!==null;)E.push(R),R=R.sibling}}return!1},n.getCurrentUpdatePriority=function(){return nn},n.getFindAllNodesFailureDescription=function(S,E){if(!me)throw Error(a(363));var R=0,D=[];S=[Dh(S),0];for(var q=0;q<S.length;){var re=S[q++],_e=S[q++],Le=E[_e];if((re.tag!==5||!Ue(re))&&(Fh(re,Le)&&(D.push(Pc(Le)),_e++,_e>R&&(R=_e)),_e<E.length))for(re=re.child;re!==null;)S.push(re,_e),re=re.sibling}if(R<E.length){for(S=[];R<E.length;R++)S.push(Pc(E[R]));return`findAllNodes was able to match part of the selector:
  `+(D.join(" > ")+`

No matching component was found for:
  `)+S.join(" > ")}return null},n.getPublicRootInstance=function(S){if(S=S.current,!S.child)return null;switch(S.child.tag){case 5:return K(S.child.stateNode);default:return S.child.stateNode}},n.injectIntoDevTools=function(S){if(S={bundleType:S.bundleType,version:S.version,rendererPackageName:S.rendererPackageName,rendererConfig:S.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:s.ReactCurrentDispatcher,findHostInstanceByFiber:Cg,findFiberByHostInstance:S.findFiberByHostInstance||GS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")S=!1;else{var E=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(E.isDisabled||!E.supportsFiber)S=!0;else{try{yc=E.inject(S),fa=E}catch{}S=!!E.checkDCE}}return S},n.isAlreadyRendering=function(){return!1},n.observeVisibleRects=function(S,E,R,D){if(!me)throw Error(a(363));S=Al(S,E);var q=fe(S,R,D).disconnect;return{disconnect:function(){q()}}},n.registerMutableSourceForHydration=function(S,E){var R=E._getVersion;R=R(E._source),S.mutableSourceEagerHydrationData==null?S.mutableSourceEagerHydrationData=[E,R]:S.mutableSourceEagerHydrationData.push(E,R)},n.runWithPriority=function(S,E){var R=nn;try{return nn=S,E()}finally{nn=R}},n.shouldError=function(){return null},n.shouldSuspend=function(){return!1},n.updateContainer=function(S,E,R,D){var q=E.current,re=zn(),_e=hs(q);return R=VS(R),E.context===null?E.context=R:E.pendingContext=R,E=ml(re,_e),E.payload={element:S},D=D===void 0?null:D,D!==null&&(E.callback=D),bc(q,E),S=ho(q,_e,re),S!==null&&Hm(S,q,_e),_e},n}),lI}var XY;function Vqe(){return XY||(XY=1,oI.exports=Hqe()),oI.exports}var Wqe=Vqe();const Gqe=$n(Wqe);var cI={exports:{}},uI={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KY;function qqe(){return KY||(KY=1,function(t){function e(H,Y){var L=H.length;H.push(Y);e:for(;0<L;){var N=L-1>>>1,V=H[N];if(0<i(V,Y))H[N]=Y,H[L]=V,L=N;else break e}}function n(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var Y=H[0],L=H.pop();if(L!==Y){H[0]=L;e:for(var N=0,V=H.length,W=V>>>1;N<W;){var ne=2*(N+1)-1,se=H[ne],te=ne+1,ie=H[te];if(0>i(se,L))te<V&&0>i(ie,se)?(H[N]=ie,H[te]=L,N=te):(H[N]=se,H[ne]=L,N=ne);else if(te<V&&0>i(ie,L))H[N]=ie,H[te]=L,N=te;else break e}}return Y}function i(H,Y){var L=H.sortIndex-Y.sortIndex;return L!==0?L:H.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,s=a.now();t.unstable_now=function(){return a.now()-s}}var l=[],c=[],u=1,f=null,h=3,p=!1,y=!1,g=!1,v=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(H){for(var Y=n(c);Y!==null;){if(Y.callback===null)r(c);else if(Y.startTime<=H)r(c),Y.sortIndex=Y.expirationTime,e(l,Y);else break;Y=n(c)}}function C(H){if(g=!1,T(H),!y)if(n(l)!==null)y=!0,K(P);else{var Y=n(c);Y!==null&&Z(C,Y.startTime-H)}}function P(H,Y){y=!1,g&&(g=!1,b(I),I=-1),p=!0;var L=h;try{for(T(Y),f=n(l);f!==null&&(!(f.expirationTime>Y)||H&&!O());){var N=f.callback;if(typeof N=="function"){f.callback=null,h=f.priorityLevel;var V=N(f.expirationTime<=Y);Y=t.unstable_now(),typeof V=="function"?f.callback=V:f===n(l)&&r(l),T(Y)}else r(l);f=n(l)}if(f!==null)var W=!0;else{var ne=n(c);ne!==null&&Z(C,ne.startTime-Y),W=!1}return W}finally{f=null,h=L,p=!1}}var M=!1,k=null,I=-1,U=5,z=-1;function O(){return!(t.unstable_now()-z<U)}function B(){if(k!==null){var H=t.unstable_now();z=H;var Y=!0;try{Y=k(!0,H)}finally{Y?$():(M=!1,k=null)}}else M=!1}var $;if(typeof w=="function")$=function(){w(B)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,J=F.port2;F.port1.onmessage=B,$=function(){J.postMessage(null)}}else $=function(){v(B,0)};function K(H){k=H,M||(M=!0,$())}function Z(H,Y){I=v(function(){H(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_continueExecution=function(){y||p||(y=!0,K(P))},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(H){switch(h){case 1:case 2:case 3:var Y=3;break;default:Y=h}var L=h;h=Y;try{return H()}finally{h=L}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(H,Y){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var L=h;h=H;try{return Y()}finally{h=L}},t.unstable_scheduleCallback=function(H,Y,L){var N=t.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?N+L:N):L=N,H){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=L+V,H={id:u++,callback:Y,priorityLevel:H,startTime:L,expirationTime:V,sortIndex:-1},L>N?(H.sortIndex=L,e(c,H),n(l)===null&&H===n(c)&&(g?(b(I),I=-1):g=!0,Z(C,L-N))):(H.sortIndex=V,e(l,H),y||p||(y=!0,K(P))),H},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(H){var Y=h;return function(){var L=h;h=Y;try{return H.apply(this,arguments)}finally{h=L}}}}(uI)),uI}var JY;function Yqe(){return JY||(JY=1,cI.exports=qqe()),cI.exports}var ZY=Yqe();const _z={},Xqe=t=>void Object.assign(_z,t);function Kqe(t,e){function n(u,{args:f=[],attach:h,...p},y){let g=`${u[0].toUpperCase()}${u.slice(1)}`,v;if(u==="primitive"){if(p.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const b=p.object;v=Ay(b,{type:u,root:y,attach:h,primitive:!0})}else{const b=_z[g];if(!b)throw new Error(`R3F: ${g} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(f))throw new Error("R3F: The args prop must be an array!");v=Ay(new b(...f),{type:u,root:y,attach:h,memoizedProps:{args:f}})}return v.__r3f.attach===void 0&&(v.isBufferGeometry?v.__r3f.attach="geometry":v.isMaterial&&(v.__r3f.attach="material")),g!=="inject"&&hI(v,p),v}function r(u,f){let h=!1;if(f){var p,y;(p=f.__r3f)!=null&&p.attach?fI(u,f,f.__r3f.attach):f.isObject3D&&u.isObject3D&&(u.add(f),h=!0),h||(y=u.__r3f)==null||y.objects.push(f),f.__r3f||Ay(f,{}),f.__r3f.parent=u,BD(f),My(f)}}function i(u,f,h){let p=!1;if(f){var y,g;if((y=f.__r3f)!=null&&y.attach)fI(u,f,f.__r3f.attach);else if(f.isObject3D&&u.isObject3D){f.parent=u,f.dispatchEvent({type:"added"}),u.dispatchEvent({type:"childadded",child:f});const v=u.children.filter(w=>w!==f),b=v.indexOf(h);u.children=[...v.slice(0,b),f,...v.slice(b)],p=!0}p||(g=u.__r3f)==null||g.objects.push(f),f.__r3f||Ay(f,{}),f.__r3f.parent=u,BD(f),My(f)}}function o(u,f,h=!1){u&&[...u].forEach(p=>a(f,p,h))}function a(u,f,h){if(f){var p,y,g;if(f.__r3f&&(f.__r3f.parent=null),(p=u.__r3f)!=null&&p.objects&&(u.__r3f.objects=u.__r3f.objects.filter(C=>C!==f)),(y=f.__r3f)!=null&&y.attach)rX(u,f,f.__r3f.attach);else if(f.isObject3D&&u.isObject3D){var v;u.remove(f),(v=f.__r3f)!=null&&v.root&&iYe(lT(f),f)}const w=(g=f.__r3f)==null?void 0:g.primitive,T=!w&&(h===void 0?f.dispose!==null:h);if(!w){var b;o((b=f.__r3f)==null?void 0:b.objects,f,T),o(f.children,f,T)}if(delete f.__r3f,T&&f.dispose&&f.type!=="Scene"){const C=()=>{try{f.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?ZY.unstable_scheduleCallback(ZY.unstable_IdlePriority,C):C()}My(u)}}function s(u,f,h,p){var y;const g=(y=u.__r3f)==null?void 0:y.parent;if(!g)return;const v=n(f,h,u.__r3f.root);if(u.children){for(const b of u.children)b.__r3f&&r(v,b);u.children=u.children.filter(b=>!b.__r3f)}u.__r3f.objects.forEach(b=>r(v,b)),u.__r3f.objects=[],u.__r3f.autoRemovedBeforeAppend||a(g,u),v.parent&&(v.__r3f.autoRemovedBeforeAppend=!0),r(g,v),v.raycast&&v.__r3f.eventCount&&lT(v).getState().internal.interaction.push(v),[p,p.alternate].forEach(b=>{b!==null&&(b.stateNode=v,b.ref&&(typeof b.ref=="function"?b.ref(v):b.ref.current=v))})}const l=()=>{};return{reconciler:Gqe({createInstance:n,removeChild:a,appendChild:r,appendInitialChild:r,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(u,f)=>{if(!f)return;const h=u.getState().scene;h.__r3f&&(h.__r3f.root=u,r(h,f))},removeChildFromContainer:(u,f)=>{f&&a(u.getState().scene,f)},insertInContainerBefore:(u,f,h)=>{if(!f||!h)return;const p=u.getState().scene;p.__r3f&&i(p,f,h)},getRootHostContext:()=>null,getChildHostContext:u=>u,finalizeInitialChildren(u){var f;return!!((f=u==null?void 0:u.__r3f)!=null?f:{}).handlers},prepareUpdate(u,f,h,p){var y;if(((y=u==null?void 0:u.__r3f)!=null?y:{}).primitive&&p.object&&p.object!==u)return[!0];{const{args:v=[],children:b,...w}=p,{args:T=[],children:C,...P}=h;if(!Array.isArray(v))throw new Error("R3F: the args prop must be an array!");if(v.some((k,I)=>k!==T[I]))return[!0];const M=bce(u,w,P,!0);return M.changes.length?[!1,M]:null}},commitUpdate(u,[f,h],p,y,g,v){f?s(u,p,g,v):hI(u,h)},commitMount(u,f,h,p){var y;const g=(y=u.__r3f)!=null?y:{};u.raycast&&g.handlers&&g.eventCount&&lT(u).getState().internal.interaction.push(u)},getPublicInstance:u=>u,prepareForCommit:()=>null,preparePortalMount:u=>Ay(u.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(u){var f;const{attach:h,parent:p}=(f=u.__r3f)!=null?f:{};h&&p&&rX(p,u,h),u.isObject3D&&(u.visible=!1),My(u)},unhideInstance(u,f){var h;const{attach:p,parent:y}=(h=u.__r3f)!=null?h:{};p&&y&&fI(y,u,p),(u.isObject3D&&f.visible==null||f.visible)&&(u.visible=!0),My(u)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():By.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&_r.fun(performance.now)?performance.now:_r.fun(Date.now)?Date.now:()=>0,scheduleTimeout:_r.fun(setTimeout)?setTimeout:void 0,cancelTimeout:_r.fun(clearTimeout)?clearTimeout:void 0}),applyProps:hI}}var QY,eX;const dI=t=>"colorSpace"in t||"outputColorSpace"in t,mce=()=>{var t;return(t=_z.ColorManagement)!=null?t:null},gce=t=>t&&t.isOrthographicCamera,Jqe=t=>t&&t.hasOwnProperty("current"),gS=typeof window<"u"&&((QY=window.document)!=null&&QY.createElement||((eX=window.navigator)==null?void 0:eX.product)==="ReactNative")?_.useLayoutEffect:_.useEffect;function yce(t){const e=_.useRef(t);return gS(()=>void(e.current=t),[t]),e}function Zqe({set:t}){return gS(()=>(t(new Promise(()=>null)),()=>t(!1)),[t]),null}class vce extends _.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}vce.getDerivedStateFromError=()=>({error:!0});const xce="__default",tX=new Map,Qqe=t=>t&&!!t.memoized&&!!t.changes;function wce(t){var e;const n=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(t)?Math.min(Math.max(t[0],n),t[1]):t}const fw=t=>{var e;return(e=t.__r3f)==null?void 0:e.root.getState()};function lT(t){let e=t.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const _r={obj:t=>t===Object(t)&&!_r.arr(t)&&typeof t!="function",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",boo:t=>typeof t=="boolean",und:t=>t===void 0,arr:t=>Array.isArray(t),equ(t,e,{arrays:n="shallow",objects:r="reference",strict:i=!0}={}){if(typeof t!=typeof e||!!t!=!!e)return!1;if(_r.str(t)||_r.num(t)||_r.boo(t))return t===e;const o=_r.obj(t);if(o&&r==="reference")return t===e;const a=_r.arr(t);if(a&&n==="reference")return t===e;if((a||o)&&t===e)return!0;let s;for(s in t)if(!(s in e))return!1;if(o&&n==="shallow"&&r==="shallow"){for(s in i?e:t)if(!_r.equ(t[s],e[s],{strict:i,objects:"reference"}))return!1}else for(s in i?e:t)if(t[s]!==e[s])return!1;if(_r.und(s)){if(a&&t.length===0&&e.length===0||o&&Object.keys(t).length===0&&Object.keys(e).length===0)return!0;if(t!==e)return!1}return!0}};function eYe(t){const e={nodes:{},materials:{}};return t&&t.traverse(n=>{n.name&&(e.nodes[n.name]=n),n.material&&!e.materials[n.material.name]&&(e.materials[n.material.name]=n.material)}),e}function tYe(t){t.dispose&&t.type!=="Scene"&&t.dispose();for(const e in t)e.dispose==null||e.dispose(),delete t[e]}function Ay(t,e){const n=t;return n.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},t}function UD(t,e){let n=t;if(e.includes("-")){const r=e.split("-"),i=r.pop();return n=r.reduce((o,a)=>o[a],t),{target:n,key:i}}else return{target:n,key:e}}const nX=/-\d+$/;function fI(t,e,n){if(_r.str(n)){if(nX.test(n)){const o=n.replace(nX,""),{target:a,key:s}=UD(t,o);Array.isArray(a[s])||(a[s]=[])}const{target:r,key:i}=UD(t,n);e.__r3f.previousAttach=r[i],r[i]=e}else e.__r3f.previousAttach=n(t,e)}function rX(t,e,n){var r,i;if(_r.str(n)){const{target:o,key:a}=UD(t,n),s=e.__r3f.previousAttach;s===void 0?delete o[a]:o[a]=s}else(r=e.__r3f)==null||r.previousAttach==null||r.previousAttach(t,e);(i=e.__r3f)==null||delete i.previousAttach}function bce(t,{children:e,key:n,ref:r,...i},{children:o,key:a,ref:s,...l}={},c=!1){const u=t.__r3f,f=Object.entries(i),h=[];if(c){const y=Object.keys(l);for(let g=0;g<y.length;g++)i.hasOwnProperty(y[g])||f.unshift([y[g],xce+"remove"])}f.forEach(([y,g])=>{var v;if((v=t.__r3f)!=null&&v.primitive&&y==="object"||_r.equ(g,l[y]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(y))return h.push([y,g,!0,[]]);let b=[];y.includes("-")&&(b=y.split("-")),h.push([y,g,!1,b]);for(const w in i){const T=i[w];w.startsWith(`${y}-`)&&h.push([w,T,!1,w.split("-")])}});const p={...i};return u!=null&&u.memoizedProps&&u!=null&&u.memoizedProps.args&&(p.args=u.memoizedProps.args),u!=null&&u.memoizedProps&&u!=null&&u.memoizedProps.attach&&(p.attach=u.memoizedProps.attach),{memoized:p,changes:h}}function hI(t,e){var n;const r=t.__r3f,i=r==null?void 0:r.root,o=i==null||i.getState==null?void 0:i.getState(),{memoized:a,changes:s}=Qqe(e)?e:bce(t,e),l=r==null?void 0:r.eventCount;t.__r3f&&(t.__r3f.memoizedProps=a);for(let h=0;h<s.length;h++){let[p,y,g,v]=s[h];if(dI(t)){const C="srgb",P="srgb-linear";p==="encoding"?(p="colorSpace",y=y===3001?C:P):p==="outputEncoding"&&(p="outputColorSpace",y=y===3001?C:P)}let b=t,w=b[p];if(v.length&&(w=v.reduce((T,C)=>T[C],t),!(w&&w.set))){const[T,...C]=v.reverse();b=C.reverse().reduce((P,M)=>P[M],t),p=T}if(y===xce+"remove")if(b.constructor){let T=tX.get(b.constructor);T||(T=new b.constructor,tX.set(b.constructor,T)),y=T[p]}else y=0;if(g&&r)y?r.handlers[p]=y:delete r.handlers[p],r.eventCount=Object.keys(r.handlers).length;else if(w&&w.set&&(w.copy||w instanceof iv)){if(Array.isArray(y))w.fromArray?w.fromArray(y):w.set(...y);else if(w.copy&&y&&y.constructor&&w.constructor===y.constructor)w.copy(y);else if(y!==void 0){var c;const T=(c=w)==null?void 0:c.isColor;!T&&w.setScalar?w.setScalar(y):w instanceof iv&&y instanceof iv?w.mask=y.mask:w.set(y),!mce()&&o&&!o.linear&&T&&w.convertSRGBToLinear()}}else{var u;if(b[p]=y,(u=b[p])!=null&&u.isTexture&&b[p].format===ro&&b[p].type===Zc&&o){const T=b[p];dI(T)&&dI(o.gl)?T.colorSpace=o.gl.outputColorSpace:T.encoding=o.gl.outputEncoding}}My(t)}if(r&&r.parent&&t.raycast&&l!==r.eventCount){const h=lT(t).getState().internal,p=h.interaction.indexOf(t);p>-1&&h.interaction.splice(p,1),r.eventCount&&h.interaction.push(t)}return!(s.length===1&&s[0][0]==="onUpdate")&&s.length&&(n=t.__r3f)!=null&&n.parent&&BD(t),t}function My(t){var e,n;const r=(e=t.__r3f)==null||(n=e.root)==null||n.getState==null?void 0:n.getState();r&&r.internal.frames===0&&r.invalidate()}function BD(t){t.onUpdate==null||t.onUpdate(t)}function nYe(t,e){t.manual||(gce(t)?(t.left=e.width/-2,t.right=e.width/2,t.top=e.height/2,t.bottom=e.height/-2):t.aspect=e.width/e.height,t.updateProjectionMatrix(),t.updateMatrixWorld())}function U_(t){return(t.eventObject||t.object).uuid+"/"+t.index+t.instanceId}function rYe(){var t;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return By.DefaultEventPriority;switch((t=e.event)==null?void 0:t.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return By.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return By.ContinuousEventPriority;default:return By.DefaultEventPriority}}function Sce(t,e,n,r){const i=n.get(e);i&&(n.delete(e),n.size===0&&(t.delete(r),i.target.releasePointerCapture(r)))}function iYe(t,e){const{internal:n}=t.getState();n.interaction=n.interaction.filter(r=>r!==e),n.initialHits=n.initialHits.filter(r=>r!==e),n.hovered.forEach((r,i)=>{(r.eventObject===e||r.object===e)&&n.hovered.delete(i)}),n.capturedMap.forEach((r,i)=>{Sce(n.capturedMap,e,r,i)})}function oYe(t){function e(l){const{internal:c}=t.getState(),u=l.offsetX-c.initialClick[0],f=l.offsetY-c.initialClick[1];return Math.round(Math.sqrt(u*u+f*f))}function n(l){return l.filter(c=>["Move","Over","Enter","Out","Leave"].some(u=>{var f;return(f=c.__r3f)==null?void 0:f.handlers["onPointer"+u]}))}function r(l,c){const u=t.getState(),f=new Set,h=[],p=c?c(u.internal.interaction):u.internal.interaction;for(let b=0;b<p.length;b++){const w=fw(p[b]);w&&(w.raycaster.camera=void 0)}u.previousRoot||u.events.compute==null||u.events.compute(l,u);function y(b){const w=fw(b);if(!w||!w.events.enabled||w.raycaster.camera===null)return[];if(w.raycaster.camera===void 0){var T;w.events.compute==null||w.events.compute(l,w,(T=w.previousRoot)==null?void 0:T.getState()),w.raycaster.camera===void 0&&(w.raycaster.camera=null)}return w.raycaster.camera?w.raycaster.intersectObject(b,!0):[]}let g=p.flatMap(y).sort((b,w)=>{const T=fw(b.object),C=fw(w.object);return!T||!C?b.distance-w.distance:C.events.priority-T.events.priority||b.distance-w.distance}).filter(b=>{const w=U_(b);return f.has(w)?!1:(f.add(w),!0)});u.events.filter&&(g=u.events.filter(g,u));for(const b of g){let w=b.object;for(;w;){var v;(v=w.__r3f)!=null&&v.eventCount&&h.push({...b,eventObject:w}),w=w.parent}}if("pointerId"in l&&u.internal.capturedMap.has(l.pointerId))for(let b of u.internal.capturedMap.get(l.pointerId).values())f.has(U_(b.intersection))||h.push(b.intersection);return h}function i(l,c,u,f){const h=t.getState();if(l.length){const p={stopped:!1};for(const y of l){const g=fw(y.object)||h,{raycaster:v,pointer:b,camera:w,internal:T}=g,C=new ge(b.x,b.y,0).unproject(w),P=z=>{var O,B;return(O=(B=T.capturedMap.get(z))==null?void 0:B.has(y.eventObject))!=null?O:!1},M=z=>{const O={intersection:y,target:c.target};T.capturedMap.has(z)?T.capturedMap.get(z).set(y.eventObject,O):T.capturedMap.set(z,new Map([[y.eventObject,O]])),c.target.setPointerCapture(z)},k=z=>{const O=T.capturedMap.get(z);O&&Sce(T.capturedMap,y.eventObject,O,z)};let I={};for(let z in c){let O=c[z];typeof O!="function"&&(I[z]=O)}let U={...y,...I,pointer:b,intersections:l,stopped:p.stopped,delta:u,unprojectedPoint:C,ray:v.ray,camera:w,stopPropagation(){const z="pointerId"in c&&T.capturedMap.get(c.pointerId);if((!z||z.has(y.eventObject))&&(U.stopped=p.stopped=!0,T.hovered.size&&Array.from(T.hovered.values()).find(O=>O.eventObject===y.eventObject))){const O=l.slice(0,l.indexOf(y));o([...O,y])}},target:{hasPointerCapture:P,setPointerCapture:M,releasePointerCapture:k},currentTarget:{hasPointerCapture:P,setPointerCapture:M,releasePointerCapture:k},nativeEvent:c};if(f(U),p.stopped===!0)break}}return l}function o(l){const{internal:c}=t.getState();for(const u of c.hovered.values())if(!l.length||!l.find(f=>f.object===u.object&&f.index===u.index&&f.instanceId===u.instanceId)){const h=u.eventObject.__r3f,p=h==null?void 0:h.handlers;if(c.hovered.delete(U_(u)),h!=null&&h.eventCount){const y={...u,intersections:l};p.onPointerOut==null||p.onPointerOut(y),p.onPointerLeave==null||p.onPointerLeave(y)}}}function a(l,c){for(let u=0;u<c.length;u++){const f=c[u].__r3f;f==null||f.handlers.onPointerMissed==null||f.handlers.onPointerMissed(l)}}function s(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>o([]);case"onLostPointerCapture":return c=>{const{internal:u}=t.getState();"pointerId"in c&&u.capturedMap.has(c.pointerId)&&requestAnimationFrame(()=>{u.capturedMap.has(c.pointerId)&&(u.capturedMap.delete(c.pointerId),o([]))})}}return function(u){const{onPointerMissed:f,internal:h}=t.getState();h.lastEvent.current=u;const p=l==="onPointerMove",y=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",v=r(u,p?n:void 0),b=y?e(u):0;l==="onPointerDown"&&(h.initialClick=[u.offsetX,u.offsetY],h.initialHits=v.map(T=>T.eventObject)),y&&!v.length&&b<=2&&(a(u,h.interaction),f&&f(u)),p&&o(v);function w(T){const C=T.eventObject,P=C.__r3f,M=P==null?void 0:P.handlers;if(P!=null&&P.eventCount)if(p){if(M.onPointerOver||M.onPointerEnter||M.onPointerOut||M.onPointerLeave){const k=U_(T),I=h.hovered.get(k);I?I.stopped&&T.stopPropagation():(h.hovered.set(k,T),M.onPointerOver==null||M.onPointerOver(T),M.onPointerEnter==null||M.onPointerEnter(T))}M.onPointerMove==null||M.onPointerMove(T)}else{const k=M[l];k?(!y||h.initialHits.includes(C))&&(a(u,h.interaction.filter(I=>!h.initialHits.includes(I))),k(T)):y&&h.initialHits.includes(C)&&a(u,h.interaction.filter(I=>!h.initialHits.includes(I)))}}i(v,u,b,w)}}return{handlePointer:s}}const Ece=t=>!!(t!=null&&t.render),_ce=_.createContext(null),aYe=(t,e)=>{const n=Dqe((s,l)=>{const c=new ge,u=new ge,f=new ge;function h(b=l().camera,w=u,T=l().size){const{width:C,height:P,top:M,left:k}=T,I=C/P;w.isVector3?f.copy(w):f.set(...w);const U=b.getWorldPosition(c).distanceTo(f);if(gce(b))return{width:C/b.zoom,height:P/b.zoom,top:M,left:k,factor:1,distance:U,aspect:I};{const z=b.fov*Math.PI/180,O=2*Math.tan(z/2)*U,B=O*(C/P);return{width:B,height:O,top:M,left:k,factor:C/B,distance:U,aspect:I}}}let p;const y=b=>s(w=>({performance:{...w.performance,current:b}})),g=new rt;return{set:s,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(b=1)=>t(l(),b),advance:(b,w)=>e(b,w,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new wz,pointer:g,mouse:g,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const b=l();p&&clearTimeout(p),b.performance.current!==b.performance.min&&y(b.performance.min),p=setTimeout(()=>y(l().performance.max),b.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:h},setEvents:b=>s(w=>({...w,events:{...w.events,...b}})),setSize:(b,w,T,C,P)=>{const M=l().camera,k={width:b,height:w,top:C||0,left:P||0,updateStyle:T};s(I=>({size:k,viewport:{...I.viewport,...h(M,u,k)}}))},setDpr:b=>s(w=>{const T=wce(b);return{viewport:{...w.viewport,dpr:T,initialDpr:w.viewport.initialDpr||T}}}),setFrameloop:(b="always")=>{const w=l().clock;w.stop(),w.elapsedTime=0,b!=="never"&&(w.start(),w.elapsedTime=0),s(()=>({frameloop:b}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:_.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(b,w,T)=>{const C=l().internal;return C.priority=C.priority+(w>0?1:0),C.subscribers.push({ref:b,priority:w,store:T}),C.subscribers=C.subscribers.sort((P,M)=>P.priority-M.priority),()=>{const P=l().internal;P!=null&&P.subscribers&&(P.priority=P.priority-(w>0?1:0),P.subscribers=P.subscribers.filter(M=>M.ref!==b))}}}}}),r=n.getState();let i=r.size,o=r.viewport.dpr,a=r.camera;return n.subscribe(()=>{const{camera:s,size:l,viewport:c,gl:u,set:f}=n.getState();if(l.width!==i.width||l.height!==i.height||c.dpr!==o){var h;i=l,o=c.dpr,nYe(s,l),u.setPixelRatio(c.dpr);const p=(h=l.updateStyle)!=null?h:typeof HTMLCanvasElement<"u"&&u.domElement instanceof HTMLCanvasElement;u.setSize(l.width,l.height,p)}s!==a&&(a=s,f(p=>({viewport:{...p.viewport,...p.viewport.getCurrentViewport(s)}})))}),n.subscribe(s=>t(s)),n};let B_,sYe=new Set,lYe=new Set,cYe=new Set;function pI(t,e){if(t.size)for(const{callback:n}of t.values())n(e)}function hw(t,e){switch(t){case"before":return pI(sYe,e);case"after":return pI(lYe,e);case"tail":return pI(cYe,e)}}let mI,gI;function yI(t,e,n){let r=e.clock.getDelta();for(e.frameloop==="never"&&typeof t=="number"&&(r=t-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=t),mI=e.internal.subscribers,B_=0;B_<mI.length;B_++)gI=mI[B_],gI.ref.current(gI.store.getState(),r,n);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function uYe(t){let e=!1,n=!1,r,i,o;function a(c){i=requestAnimationFrame(a),e=!0,r=0,hw("before",c),n=!0;for(const f of t.values()){var u;o=f.store.getState(),o.internal.active&&(o.frameloop==="always"||o.internal.frames>0)&&!((u=o.gl.xr)!=null&&u.isPresenting)&&(r+=yI(c,o))}if(n=!1,hw("after",c),r===0)return hw("tail",c),e=!1,cancelAnimationFrame(i)}function s(c,u=1){var f;if(!c)return t.forEach(h=>s(h.store.getState(),u));(f=c.gl.xr)!=null&&f.isPresenting||!c.internal.active||c.frameloop==="never"||(u>1?c.internal.frames=Math.min(60,c.internal.frames+u):n?c.internal.frames=2:c.internal.frames=1,e||(e=!0,requestAnimationFrame(a)))}function l(c,u=!0,f,h){if(u&&hw("before",c),f)yI(c,f,h);else for(const p of t.values())yI(c,p.store.getState());u&&hw("after",c)}return{loop:a,invalidate:s,advance:l}}function Tce(){const t=_.useContext(_ce);if(!t)throw new Error("R3F: Hooks can only be used within the Canvas component!");return t}function Gu(t=n=>n,e){return Tce()(t,e)}function V0(t,e=0){const n=Tce(),r=n.getState().internal.subscribe,i=yce(t);return gS(()=>r(i,e,n),[e,r,n]),null}const iX=new WeakMap;function Cce(t,e){return function(n,...r){let i=iX.get(n);return i||(i=new n,iX.set(n,i)),t&&t(i),Promise.all(r.map(o=>new Promise((a,s)=>i.load(o,l=>{l.scene&&Object.assign(l,eYe(l.scene)),a(l)},e,l=>s(new Error(`Could not load ${o}: ${l==null?void 0:l.message}`))))))}}function Tz(t,e,n,r){const i=Array.isArray(e)?e:[e],o=pce(Cce(n,r),[t,...i],{equal:_r.equ});return Array.isArray(e)?o:o[0]}Tz.preload=function(t,e,n){const r=Array.isArray(e)?e:[e];return zqe(Cce(n),[t,...r])};Tz.clear=function(t,e){const n=Array.isArray(e)?e:[e];return Uqe([t,...n])};const n0=new Map,{invalidate:oX,advance:aX}=uYe(n0),{reconciler:zC,applyProps:py}=Kqe(n0,rYe),my={objects:"shallow",strict:!1},dYe=(t,e)=>{const n=typeof t=="function"?t(e):t;return Ece(n)?n:new ar({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...t})};function fYe(t,e){const n=typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement;if(e){const{width:r,height:i,top:o,left:a,updateStyle:s=n}=e;return{width:r,height:i,top:o,left:a,updateStyle:s}}else if(typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&t.parentElement){const{width:r,height:i,top:o,left:a}=t.parentElement.getBoundingClientRect();return{width:r,height:i,top:o,left:a,updateStyle:n}}else if(typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas)return{width:t.width,height:t.height,top:0,left:0,updateStyle:n};return{width:0,height:0,top:0,left:0}}function hYe(t){const e=n0.get(t),n=e==null?void 0:e.fiber,r=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const i=typeof reportError=="function"?reportError:console.error,o=r||aYe(oX,aX),a=n||zC.createContainer(o,By.ConcurrentRoot,null,!1,null,"",i,null);e||n0.set(t,{fiber:a,store:o});let s,l=!1,c;return{configure(u={}){let{gl:f,size:h,scene:p,events:y,onCreated:g,shadows:v=!1,linear:b=!1,flat:w=!1,legacy:T=!1,orthographic:C=!1,frameloop:P="always",dpr:M=[1,2],performance:k,raycaster:I,camera:U,onPointerMissed:z}=u,O=o.getState(),B=O.gl;O.gl||O.set({gl:B=dYe(f,t)});let $=O.raycaster;$||O.set({raycaster:$=new nce});const{params:F,...J}=I||{};if(_r.equ(J,$,my)||py($,{...J}),_r.equ(F,$.params,my)||py($,{params:{...$.params,...F}}),!O.camera||O.camera===c&&!_r.equ(c,U,my)){c=U;const L=U instanceof F0,N=L?U:C?new ld(0,0,0,0,.1,1e3):new ci(75,0,.1,1e3);L||(N.position.z=5,U&&(py(N,U),("aspect"in U||"left"in U||"right"in U||"bottom"in U||"top"in U)&&(N.manual=!0,N.updateProjectionMatrix())),!O.camera&&!(U!=null&&U.rotation)&&N.lookAt(0,0,0)),O.set({camera:N}),$.camera=N}if(!O.scene){let L;p!=null&&p.isScene?L=p:(L=new uS,p&&py(L,p)),O.set({scene:Ay(L)})}if(!O.xr){var K;const L=(W,ne)=>{const se=o.getState();se.frameloop!=="never"&&aX(W,!0,se,ne)},N=()=>{const W=o.getState();W.gl.xr.enabled=W.gl.xr.isPresenting,W.gl.xr.setAnimationLoop(W.gl.xr.isPresenting?L:null),W.gl.xr.isPresenting||oX(W)},V={connect(){const W=o.getState().gl;W.xr.addEventListener("sessionstart",N),W.xr.addEventListener("sessionend",N)},disconnect(){const W=o.getState().gl;W.xr.removeEventListener("sessionstart",N),W.xr.removeEventListener("sessionend",N)}};typeof((K=B.xr)==null?void 0:K.addEventListener)=="function"&&V.connect(),O.set({xr:V})}if(B.shadowMap){const L=B.shadowMap.enabled,N=B.shadowMap.type;if(B.shadowMap.enabled=!!v,_r.boo(v))B.shadowMap.type=Ww;else if(_r.str(v)){var Z;const V={basic:Aae,percentage:r2,soft:Ww,variance:Ip};B.shadowMap.type=(Z=V[v])!=null?Z:Ww}else _r.obj(v)&&Object.assign(B.shadowMap,v);(L!==B.shadowMap.enabled||N!==B.shadowMap.type)&&(B.shadowMap.needsUpdate=!0)}const H=mce();H&&("enabled"in H?H.enabled=!T:"legacyMode"in H&&(H.legacyMode=T)),l||py(B,{outputEncoding:b?3e3:3001,toneMapping:w?sd:P5}),O.legacy!==T&&O.set(()=>({legacy:T})),O.linear!==b&&O.set(()=>({linear:b})),O.flat!==w&&O.set(()=>({flat:w})),f&&!_r.fun(f)&&!Ece(f)&&!_r.equ(f,B,my)&&py(B,f),y&&!O.events.handlers&&O.set({events:y(o)});const Y=fYe(t,h);return _r.equ(Y,O.size,my)||O.setSize(Y.width,Y.height,Y.updateStyle,Y.top,Y.left),M&&O.viewport.dpr!==wce(M)&&O.setDpr(M),O.frameloop!==P&&O.setFrameloop(P),O.onPointerMissed||O.set({onPointerMissed:z}),k&&!_r.equ(k,O.performance,my)&&O.set(L=>({performance:{...L.performance,...k}})),s=g,l=!0,this},render(u){return l||this.configure(),zC.updateContainer(d.jsx(pYe,{store:o,children:u,onCreated:s,rootElement:t}),a,null,()=>{}),o},unmount(){Ace(t)}}}function pYe({store:t,children:e,onCreated:n,rootElement:r}){return gS(()=>{const i=t.getState();i.set(o=>({internal:{...o.internal,active:!0}})),n&&n(i),t.getState().events.connected||i.events.connect==null||i.events.connect(r)},[]),d.jsx(_ce.Provider,{value:t,children:e})}function Ace(t,e){const n=n0.get(t),r=n==null?void 0:n.fiber;if(r){const i=n==null?void 0:n.store.getState();i&&(i.internal.active=!1),zC.updateContainer(null,r,null,()=>{i&&setTimeout(()=>{try{var o,a,s,l;i.events.disconnect==null||i.events.disconnect(),(o=i.gl)==null||(a=o.renderLists)==null||a.dispose==null||a.dispose(),(s=i.gl)==null||s.forceContextLoss==null||s.forceContextLoss(),(l=i.gl)!=null&&l.xr&&i.xr.disconnect(),tYe(i),n0.delete(t)}catch{}},500)})}}zC.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:_.version});const vI={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function mYe(t){const{handlePointer:e}=oYe(t);return{priority:1,enabled:!0,compute(n,r,i){r.pointer.set(n.offsetX/r.size.width*2-1,-(n.offsetY/r.size.height)*2+1),r.raycaster.setFromCamera(r.pointer,r.camera)},connected:void 0,handlers:Object.keys(vI).reduce((n,r)=>({...n,[r]:e(r)}),{}),update:()=>{var n;const{events:r,internal:i}=t.getState();(n=i.lastEvent)!=null&&n.current&&r.handlers&&r.handlers.onPointerMove(i.lastEvent.current)},connect:n=>{var r;const{set:i,events:o}=t.getState();o.disconnect==null||o.disconnect(),i(a=>({events:{...a.events,connected:n}})),Object.entries((r=o.handlers)!=null?r:[]).forEach(([a,s])=>{const[l,c]=vI[a];n.addEventListener(l,s,{passive:c})})},disconnect:()=>{const{set:n,events:r}=t.getState();if(r.connected){var i;Object.entries((i=r.handlers)!=null?i:[]).forEach(([o,a])=>{if(r&&r.connected instanceof HTMLElement){const[s]=vI[o];r.connected.removeEventListener(s,a)}}),n(o=>({events:{...o.events,connected:void 0}}))}}}}function sX(t,e){let n;return(...r)=>{window.clearTimeout(n),n=window.setTimeout(()=>t(...r),e)}}function gYe({debounce:t,scroll:e,polyfill:n,offsetSize:r}={debounce:0,scroll:!1,offsetSize:!1}){const i=n||(typeof window>"u"?class{}:window.ResizeObserver);if(!i)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[o,a]=_.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),s=_.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:o,orientationHandler:null}),l=t?typeof t=="number"?t:t.scroll:null,c=t?typeof t=="number"?t:t.resize:null,u=_.useRef(!1);_.useEffect(()=>(u.current=!0,()=>void(u.current=!1)));const[f,h,p]=_.useMemo(()=>{const b=()=>{if(!s.current.element)return;const{left:w,top:T,width:C,height:P,bottom:M,right:k,x:I,y:U}=s.current.element.getBoundingClientRect(),z={left:w,top:T,width:C,height:P,bottom:M,right:k,x:I,y:U};s.current.element instanceof HTMLElement&&r&&(z.height=s.current.element.offsetHeight,z.width=s.current.element.offsetWidth),Object.freeze(z),u.current&&!wYe(s.current.lastBounds,z)&&a(s.current.lastBounds=z)};return[b,c?sX(b,c):b,l?sX(b,l):b]},[a,r,l,c]);function y(){s.current.scrollContainers&&(s.current.scrollContainers.forEach(b=>b.removeEventListener("scroll",p,!0)),s.current.scrollContainers=null),s.current.resizeObserver&&(s.current.resizeObserver.disconnect(),s.current.resizeObserver=null),s.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",s.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",s.current.orientationHandler))}function g(){s.current.element&&(s.current.resizeObserver=new i(p),s.current.resizeObserver.observe(s.current.element),e&&s.current.scrollContainers&&s.current.scrollContainers.forEach(b=>b.addEventListener("scroll",p,{capture:!0,passive:!0})),s.current.orientationHandler=()=>{p()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",s.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",s.current.orientationHandler))}const v=b=>{!b||b===s.current.element||(y(),s.current.element=b,s.current.scrollContainers=Mce(b),g())};return vYe(p,!!e),yYe(h),_.useEffect(()=>{y(),g()},[e,p,h]),_.useEffect(()=>y,[]),[v,o,f]}function yYe(t){_.useEffect(()=>{const e=t;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[t])}function vYe(t,e){_.useEffect(()=>{if(e){const n=t;return window.addEventListener("scroll",n,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",n,!0)}},[t,e])}function Mce(t){const e=[];if(!t||t===document.body)return e;const{overflow:n,overflowX:r,overflowY:i}=window.getComputedStyle(t);return[n,r,i].some(o=>o==="auto"||o==="scroll")&&e.push(t),[...e,...Mce(t.parentElement)]}const xYe=["x","y","top","bottom","left","right","width","height"],wYe=(t,e)=>xYe.every(n=>t[n]===e[n]);var bYe=Object.defineProperty,SYe=Object.defineProperties,EYe=Object.getOwnPropertyDescriptors,lX=Object.getOwnPropertySymbols,_Ye=Object.prototype.hasOwnProperty,TYe=Object.prototype.propertyIsEnumerable,cX=(t,e,n)=>e in t?bYe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,uX=(t,e)=>{for(var n in e||(e={}))_Ye.call(e,n)&&cX(t,n,e[n]);if(lX)for(var n of lX(e))TYe.call(e,n)&&cX(t,n,e[n]);return t},CYe=(t,e)=>SYe(t,EYe(e)),dX,fX;typeof window<"u"&&((dX=window.document)!=null&&dX.createElement||((fX=window.navigator)==null?void 0:fX.product)==="ReactNative")?_.useLayoutEffect:_.useEffect;function Pce(t,e,n){if(!t)return;if(n(t)===!0)return t;let r=t.child;for(;r;){const i=Pce(r,e,n);if(i)return i;r=r.sibling}}function kce(t){try{return Object.defineProperties(t,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return t}}const hX=console.error;console.error=function(){const t=[...arguments].join("");if(t!=null&&t.startsWith("Warning:")&&t.includes("useContext")){console.error=hX;return}return hX.apply(this,arguments)};const Cz=kce(_.createContext(null));class Nce extends _.Component{render(){return _.createElement(Cz.Provider,{value:this._reactInternals},this.props.children)}}function AYe(){const t=_.useContext(Cz);if(t===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=_.useId();return _.useMemo(()=>{for(const r of[t,t==null?void 0:t.alternate]){if(!r)continue;const i=Pce(r,!1,o=>{let a=o.memoizedState;for(;a;){if(a.memoizedState===e)return!0;a=a.next}});if(i)return i}},[t,e])}function MYe(){const t=AYe(),[e]=_.useState(()=>new Map);e.clear();let n=t;for(;n;){if(n.type&&typeof n.type=="object"){const i=n.type._context===void 0&&n.type.Provider===n.type?n.type:n.type._context;i&&i!==Cz&&!e.has(i)&&e.set(i,_.useContext(kce(i)))}n=n.return}return e}function PYe(){const t=MYe();return _.useMemo(()=>Array.from(t.keys()).reduce((e,n)=>r=>_.createElement(e,null,_.createElement(n.Provider,CYe(uX({},r),{value:t.get(n)}))),e=>_.createElement(Nce,uX({},e))),[t])}const kYe=_.forwardRef(function({children:e,fallback:n,resize:r,style:i,gl:o,events:a=mYe,eventSource:s,eventPrefix:l,shadows:c,linear:u,flat:f,legacy:h,orthographic:p,frameloop:y,dpr:g,performance:v,raycaster:b,camera:w,scene:T,onPointerMissed:C,onCreated:P,...M},k){_.useMemo(()=>Xqe(Rqe),[]);const I=PYe(),[U,z]=gYe({scroll:!0,debounce:{scroll:50,resize:0},...r}),O=_.useRef(null),B=_.useRef(null);_.useImperativeHandle(k,()=>O.current);const $=yce(C),[F,J]=_.useState(!1),[K,Z]=_.useState(!1);if(F)throw F;if(K)throw K;const H=_.useRef(null);gS(()=>{const L=O.current;z.width>0&&z.height>0&&L&&(H.current||(H.current=hYe(L)),H.current.configure({gl:o,events:a,shadows:c,linear:u,flat:f,legacy:h,orthographic:p,frameloop:y,dpr:g,performance:v,raycaster:b,camera:w,scene:T,size:z,onPointerMissed:(...N)=>$.current==null?void 0:$.current(...N),onCreated:N=>{N.events.connect==null||N.events.connect(s?Jqe(s)?s.current:s:B.current),l&&N.setEvents({compute:(V,W)=>{const ne=V[l+"X"],se=V[l+"Y"];W.pointer.set(ne/W.size.width*2-1,-(se/W.size.height)*2+1),W.raycaster.setFromCamera(W.pointer,W.camera)}}),P==null||P(N)}}),H.current.render(d.jsx(I,{children:d.jsx(vce,{set:Z,children:d.jsx(_.Suspense,{fallback:d.jsx(Zqe,{set:J}),children:e??null})})})))}),_.useEffect(()=>{const L=O.current;if(L)return()=>Ace(L)},[]);const Y=s?"none":"auto";return d.jsx("div",{ref:B,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:Y,...i},...M,children:d.jsx("div",{ref:U,style:{width:"100%",height:"100%"},children:d.jsx("canvas",{ref:O,style:{display:"block"},children:n})})})}),NYe=_.forwardRef(function(e,n){return d.jsx(Nce,{children:d.jsx(kYe,{...e,ref:n})})});var RYe=Object.defineProperty,jYe=(t,e,n)=>e in t?RYe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,IYe=(t,e,n)=>(jYe(t,e+"",n),n);class OYe{constructor(){IYe(this,"_listeners")}addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(n)===-1&&r[e].push(n)}hasEventListener(e,n){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(n)!==-1}removeEventListener(e,n){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const o=i.indexOf(n);o!==-1&&i.splice(o,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let o=0,a=i.length;o<a;o++)i[o].call(this,e);e.target=null}}}var LYe=Object.defineProperty,DYe=(t,e,n)=>e in t?LYe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,qt=(t,e,n)=>(DYe(t,typeof e!="symbol"?e+"":e,n),n);const $_=new Md,pX=new Kl,FYe=Math.cos(70*(Math.PI/180)),mX=(t,e)=>(t%e+e)%e;let zYe=class extends OYe{constructor(e,n){super(),qt(this,"object"),qt(this,"domElement"),qt(this,"enabled",!0),qt(this,"target",new ge),qt(this,"minDistance",0),qt(this,"maxDistance",1/0),qt(this,"minZoom",0),qt(this,"maxZoom",1/0),qt(this,"minPolarAngle",0),qt(this,"maxPolarAngle",Math.PI),qt(this,"minAzimuthAngle",-1/0),qt(this,"maxAzimuthAngle",1/0),qt(this,"enableDamping",!1),qt(this,"dampingFactor",.05),qt(this,"enableZoom",!0),qt(this,"zoomSpeed",1),qt(this,"enableRotate",!0),qt(this,"rotateSpeed",1),qt(this,"enablePan",!0),qt(this,"panSpeed",1),qt(this,"screenSpacePanning",!0),qt(this,"keyPanSpeed",7),qt(this,"zoomToCursor",!1),qt(this,"autoRotate",!1),qt(this,"autoRotateSpeed",2),qt(this,"reverseOrbit",!1),qt(this,"reverseHorizontalOrbit",!1),qt(this,"reverseVerticalOrbit",!1),qt(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),qt(this,"mouseButtons",{LEFT:mp.ROTATE,MIDDLE:mp.DOLLY,RIGHT:mp.PAN}),qt(this,"touches",{ONE:gp.ROTATE,TWO:gp.DOLLY_PAN}),qt(this,"target0"),qt(this,"position0"),qt(this,"zoom0"),qt(this,"_domElementKeyEvents",null),qt(this,"getPolarAngle"),qt(this,"getAzimuthalAngle"),qt(this,"setPolarAngle"),qt(this,"setAzimuthalAngle"),qt(this,"getDistance"),qt(this,"getZoomScale"),qt(this,"listenToKeyEvents"),qt(this,"stopListenToKeyEvents"),qt(this,"saveState"),qt(this,"reset"),qt(this,"update"),qt(this,"connect"),qt(this,"dispose"),qt(this,"dollyIn"),qt(this,"dollyOut"),qt(this,"getScale"),qt(this,"setScale"),this.object=e,this.domElement=n,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>u.phi,this.getAzimuthalAngle=()=>u.theta,this.setPolarAngle=Ee=>{let Ve=mX(Ee,2*Math.PI),Xe=u.phi;Xe<0&&(Xe+=2*Math.PI),Ve<0&&(Ve+=2*Math.PI);let et=Math.abs(Ve-Xe);2*Math.PI-et<et&&(Ve<Xe?Ve+=2*Math.PI:Xe+=2*Math.PI),f.phi=Ve-Xe,r.update()},this.setAzimuthalAngle=Ee=>{let Ve=mX(Ee,2*Math.PI),Xe=u.theta;Xe<0&&(Xe+=2*Math.PI),Ve<0&&(Ve+=2*Math.PI);let et=Math.abs(Ve-Xe);2*Math.PI-et<et&&(Ve<Xe?Ve+=2*Math.PI:Xe+=2*Math.PI),f.theta=Ve-Xe,r.update()},this.getDistance=()=>r.object.position.distanceTo(r.target),this.listenToKeyEvents=Ee=>{Ee.addEventListener("keydown",ke),this._domElementKeyEvents=Ee},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",ke),this._domElementKeyEvents=null},this.saveState=()=>{r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object.zoom},this.reset=()=>{r.target.copy(r.target0),r.object.position.copy(r.position0),r.object.zoom=r.zoom0,r.object.updateProjectionMatrix(),r.dispatchEvent(i),r.update(),l=s.NONE},this.update=(()=>{const Ee=new ge,Ve=new ge(0,1,0),Xe=new io().setFromUnitVectors(e.up,Ve),et=Xe.clone().invert(),wt=new ge,Bt=new io,en=2*Math.PI;return function(){const gr=r.object.position;Xe.setFromUnitVectors(e.up,Ve),et.copy(Xe).invert(),Ee.copy(gr).sub(r.target),Ee.applyQuaternion(Xe),u.setFromVector3(Ee),r.autoRotate&&l===s.NONE&&F(B()),r.enableDamping?(u.theta+=f.theta*r.dampingFactor,u.phi+=f.phi*r.dampingFactor):(u.theta+=f.theta,u.phi+=f.phi);let Mn=r.minAzimuthAngle,Jt=r.maxAzimuthAngle;isFinite(Mn)&&isFinite(Jt)&&(Mn<-Math.PI?Mn+=en:Mn>Math.PI&&(Mn-=en),Jt<-Math.PI?Jt+=en:Jt>Math.PI&&(Jt-=en),Mn<=Jt?u.theta=Math.max(Mn,Math.min(Jt,u.theta)):u.theta=u.theta>(Mn+Jt)/2?Math.max(Mn,u.theta):Math.min(Jt,u.theta)),u.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,u.phi)),u.makeSafe(),r.enableDamping===!0?r.target.addScaledVector(p,r.dampingFactor):r.target.add(p),r.zoomToCursor&&U||r.object.isOrthographicCamera?u.radius=W(u.radius):u.radius=W(u.radius*h),Ee.setFromSpherical(u),Ee.applyQuaternion(et),gr.copy(r.target).add(Ee),r.object.matrixAutoUpdate||r.object.updateMatrix(),r.object.lookAt(r.target),r.enableDamping===!0?(f.theta*=1-r.dampingFactor,f.phi*=1-r.dampingFactor,p.multiplyScalar(1-r.dampingFactor)):(f.set(0,0,0),p.set(0,0,0));let fn=!1;if(r.zoomToCursor&&U){let Ar=null;if(r.object instanceof ci&&r.object.isPerspectiveCamera){const gn=Ee.length();Ar=W(gn*h);const un=gn-Ar;r.object.position.addScaledVector(k,un),r.object.updateMatrixWorld()}else if(r.object.isOrthographicCamera){const gn=new ge(I.x,I.y,0);gn.unproject(r.object),r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/h)),r.object.updateProjectionMatrix(),fn=!0;const un=new ge(I.x,I.y,0);un.unproject(r.object),r.object.position.sub(un).add(gn),r.object.updateMatrixWorld(),Ar=Ee.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),r.zoomToCursor=!1;Ar!==null&&(r.screenSpacePanning?r.target.set(0,0,-1).transformDirection(r.object.matrix).multiplyScalar(Ar).add(r.object.position):($_.origin.copy(r.object.position),$_.direction.set(0,0,-1).transformDirection(r.object.matrix),Math.abs(r.object.up.dot($_.direction))<FYe?e.lookAt(r.target):(pX.setFromNormalAndCoplanarPoint(r.object.up,r.target),$_.intersectPlane(pX,r.target))))}else r.object instanceof ld&&r.object.isOrthographicCamera&&(fn=h!==1,fn&&(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/h)),r.object.updateProjectionMatrix()));return h=1,U=!1,fn||wt.distanceToSquared(r.object.position)>c||8*(1-Bt.dot(r.object.quaternion))>c?(r.dispatchEvent(i),wt.copy(r.object.position),Bt.copy(r.object.quaternion),fn=!1,!0):!1}})(),this.connect=Ee=>{r.domElement=Ee,r.domElement.style.touchAction="none",r.domElement.addEventListener("contextmenu",tt),r.domElement.addEventListener("pointerdown",Ie),r.domElement.addEventListener("pointercancel",Ue),r.domElement.addEventListener("wheel",fe)},this.dispose=()=>{var Ee,Ve,Xe,et,wt,Bt;r.domElement&&(r.domElement.style.touchAction="auto"),(Ee=r.domElement)==null||Ee.removeEventListener("contextmenu",tt),(Ve=r.domElement)==null||Ve.removeEventListener("pointerdown",Ie),(Xe=r.domElement)==null||Xe.removeEventListener("pointercancel",Ue),(et=r.domElement)==null||et.removeEventListener("wheel",fe),(wt=r.domElement)==null||wt.ownerDocument.removeEventListener("pointermove",De),(Bt=r.domElement)==null||Bt.ownerDocument.removeEventListener("pointerup",Ue),r._domElementKeyEvents!==null&&r._domElementKeyEvents.removeEventListener("keydown",ke)};const r=this,i={type:"change"},o={type:"start"},a={type:"end"},s={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=s.NONE;const c=1e-6,u=new zD,f=new zD;let h=1;const p=new ge,y=new rt,g=new rt,v=new rt,b=new rt,w=new rt,T=new rt,C=new rt,P=new rt,M=new rt,k=new ge,I=new rt;let U=!1;const z=[],O={};function B(){return 2*Math.PI/60/60*r.autoRotateSpeed}function $(){return Math.pow(.95,r.zoomSpeed)}function F(Ee){r.reverseOrbit||r.reverseHorizontalOrbit?f.theta+=Ee:f.theta-=Ee}function J(Ee){r.reverseOrbit||r.reverseVerticalOrbit?f.phi+=Ee:f.phi-=Ee}const K=(()=>{const Ee=new ge;return function(Xe,et){Ee.setFromMatrixColumn(et,0),Ee.multiplyScalar(-Xe),p.add(Ee)}})(),Z=(()=>{const Ee=new ge;return function(Xe,et){r.screenSpacePanning===!0?Ee.setFromMatrixColumn(et,1):(Ee.setFromMatrixColumn(et,0),Ee.crossVectors(r.object.up,Ee)),Ee.multiplyScalar(Xe),p.add(Ee)}})(),H=(()=>{const Ee=new ge;return function(Xe,et){const wt=r.domElement;if(wt&&r.object instanceof ci&&r.object.isPerspectiveCamera){const Bt=r.object.position;Ee.copy(Bt).sub(r.target);let en=Ee.length();en*=Math.tan(r.object.fov/2*Math.PI/180),K(2*Xe*en/wt.clientHeight,r.object.matrix),Z(2*et*en/wt.clientHeight,r.object.matrix)}else wt&&r.object instanceof ld&&r.object.isOrthographicCamera?(K(Xe*(r.object.right-r.object.left)/r.object.zoom/wt.clientWidth,r.object.matrix),Z(et*(r.object.top-r.object.bottom)/r.object.zoom/wt.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}})();function Y(Ee){r.object instanceof ci&&r.object.isPerspectiveCamera||r.object instanceof ld&&r.object.isOrthographicCamera?h=Ee:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function L(Ee){Y(h/Ee)}function N(Ee){Y(h*Ee)}function V(Ee){if(!r.zoomToCursor||!r.domElement)return;U=!0;const Ve=r.domElement.getBoundingClientRect(),Xe=Ee.clientX-Ve.left,et=Ee.clientY-Ve.top,wt=Ve.width,Bt=Ve.height;I.x=Xe/wt*2-1,I.y=-(et/Bt)*2+1,k.set(I.x,I.y,1).unproject(r.object).sub(r.object.position).normalize()}function W(Ee){return Math.max(r.minDistance,Math.min(r.maxDistance,Ee))}function ne(Ee){y.set(Ee.clientX,Ee.clientY)}function se(Ee){V(Ee),C.set(Ee.clientX,Ee.clientY)}function te(Ee){b.set(Ee.clientX,Ee.clientY)}function ie(Ee){g.set(Ee.clientX,Ee.clientY),v.subVectors(g,y).multiplyScalar(r.rotateSpeed);const Ve=r.domElement;Ve&&(F(2*Math.PI*v.x/Ve.clientHeight),J(2*Math.PI*v.y/Ve.clientHeight)),y.copy(g),r.update()}function pe(Ee){P.set(Ee.clientX,Ee.clientY),M.subVectors(P,C),M.y>0?L($()):M.y<0&&N($()),C.copy(P),r.update()}function de(Ee){w.set(Ee.clientX,Ee.clientY),T.subVectors(w,b).multiplyScalar(r.panSpeed),H(T.x,T.y),b.copy(w),r.update()}function ce(Ee){V(Ee),Ee.deltaY<0?N($()):Ee.deltaY>0&&L($()),r.update()}function he(Ee){let Ve=!1;switch(Ee.code){case r.keys.UP:H(0,r.keyPanSpeed),Ve=!0;break;case r.keys.BOTTOM:H(0,-r.keyPanSpeed),Ve=!0;break;case r.keys.LEFT:H(r.keyPanSpeed,0),Ve=!0;break;case r.keys.RIGHT:H(-r.keyPanSpeed,0),Ve=!0;break}Ve&&(Ee.preventDefault(),r.update())}function ee(){if(z.length==1)y.set(z[0].pageX,z[0].pageY);else{const Ee=.5*(z[0].pageX+z[1].pageX),Ve=.5*(z[0].pageY+z[1].pageY);y.set(Ee,Ve)}}function xe(){if(z.length==1)b.set(z[0].pageX,z[0].pageY);else{const Ee=.5*(z[0].pageX+z[1].pageX),Ve=.5*(z[0].pageY+z[1].pageY);b.set(Ee,Ve)}}function be(){const Ee=z[0].pageX-z[1].pageX,Ve=z[0].pageY-z[1].pageY,Xe=Math.sqrt(Ee*Ee+Ve*Ve);C.set(0,Xe)}function Ae(){r.enableZoom&&be(),r.enablePan&&xe()}function Ce(){r.enableZoom&&be(),r.enableRotate&&ee()}function oe(Ee){if(z.length==1)g.set(Ee.pageX,Ee.pageY);else{const Xe=ft(Ee),et=.5*(Ee.pageX+Xe.x),wt=.5*(Ee.pageY+Xe.y);g.set(et,wt)}v.subVectors(g,y).multiplyScalar(r.rotateSpeed);const Ve=r.domElement;Ve&&(F(2*Math.PI*v.x/Ve.clientHeight),J(2*Math.PI*v.y/Ve.clientHeight)),y.copy(g)}function ae(Ee){if(z.length==1)w.set(Ee.pageX,Ee.pageY);else{const Ve=ft(Ee),Xe=.5*(Ee.pageX+Ve.x),et=.5*(Ee.pageY+Ve.y);w.set(Xe,et)}T.subVectors(w,b).multiplyScalar(r.panSpeed),H(T.x,T.y),b.copy(w)}function Se(Ee){const Ve=ft(Ee),Xe=Ee.pageX-Ve.x,et=Ee.pageY-Ve.y,wt=Math.sqrt(Xe*Xe+et*et);P.set(0,wt),M.set(0,Math.pow(P.y/C.y,r.zoomSpeed)),L(M.y),C.copy(P)}function me(Ee){r.enableZoom&&Se(Ee),r.enablePan&&ae(Ee)}function ye(Ee){r.enableZoom&&Se(Ee),r.enableRotate&&oe(Ee)}function Ie(Ee){var Ve,Xe;r.enabled!==!1&&(z.length===0&&((Ve=r.domElement)==null||Ve.ownerDocument.addEventListener("pointermove",De),(Xe=r.domElement)==null||Xe.ownerDocument.addEventListener("pointerup",Ue)),ot(Ee),Ee.pointerType==="touch"?Ne(Ee):$e(Ee))}function De(Ee){r.enabled!==!1&&(Ee.pointerType==="touch"?qe(Ee):we(Ee))}function Ue(Ee){var Ve,Xe,et;St(Ee),z.length===0&&((Ve=r.domElement)==null||Ve.releasePointerCapture(Ee.pointerId),(Xe=r.domElement)==null||Xe.ownerDocument.removeEventListener("pointermove",De),(et=r.domElement)==null||et.ownerDocument.removeEventListener("pointerup",Ue)),r.dispatchEvent(a),l=s.NONE}function $e(Ee){let Ve;switch(Ee.button){case 0:Ve=r.mouseButtons.LEFT;break;case 1:Ve=r.mouseButtons.MIDDLE;break;case 2:Ve=r.mouseButtons.RIGHT;break;default:Ve=-1}switch(Ve){case mp.DOLLY:if(r.enableZoom===!1)return;se(Ee),l=s.DOLLY;break;case mp.ROTATE:if(Ee.ctrlKey||Ee.metaKey||Ee.shiftKey){if(r.enablePan===!1)return;te(Ee),l=s.PAN}else{if(r.enableRotate===!1)return;ne(Ee),l=s.ROTATE}break;case mp.PAN:if(Ee.ctrlKey||Ee.metaKey||Ee.shiftKey){if(r.enableRotate===!1)return;ne(Ee),l=s.ROTATE}else{if(r.enablePan===!1)return;te(Ee),l=s.PAN}break;default:l=s.NONE}l!==s.NONE&&r.dispatchEvent(o)}function we(Ee){if(r.enabled!==!1)switch(l){case s.ROTATE:if(r.enableRotate===!1)return;ie(Ee);break;case s.DOLLY:if(r.enableZoom===!1)return;pe(Ee);break;case s.PAN:if(r.enablePan===!1)return;de(Ee);break}}function fe(Ee){r.enabled===!1||r.enableZoom===!1||l!==s.NONE&&l!==s.ROTATE||(Ee.preventDefault(),r.dispatchEvent(o),ce(Ee),r.dispatchEvent(a))}function ke(Ee){r.enabled===!1||r.enablePan===!1||he(Ee)}function Ne(Ee){switch(dt(Ee),z.length){case 1:switch(r.touches.ONE){case gp.ROTATE:if(r.enableRotate===!1)return;ee(),l=s.TOUCH_ROTATE;break;case gp.PAN:if(r.enablePan===!1)return;xe(),l=s.TOUCH_PAN;break;default:l=s.NONE}break;case 2:switch(r.touches.TWO){case gp.DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;Ae(),l=s.TOUCH_DOLLY_PAN;break;case gp.DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;Ce(),l=s.TOUCH_DOLLY_ROTATE;break;default:l=s.NONE}break;default:l=s.NONE}l!==s.NONE&&r.dispatchEvent(o)}function qe(Ee){switch(dt(Ee),l){case s.TOUCH_ROTATE:if(r.enableRotate===!1)return;oe(Ee),r.update();break;case s.TOUCH_PAN:if(r.enablePan===!1)return;ae(Ee),r.update();break;case s.TOUCH_DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;me(Ee),r.update();break;case s.TOUCH_DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;ye(Ee),r.update();break;default:l=s.NONE}}function tt(Ee){r.enabled!==!1&&Ee.preventDefault()}function ot(Ee){z.push(Ee)}function St(Ee){delete O[Ee.pointerId];for(let Ve=0;Ve<z.length;Ve++)if(z[Ve].pointerId==Ee.pointerId){z.splice(Ve,1);return}}function dt(Ee){let Ve=O[Ee.pointerId];Ve===void 0&&(Ve=new rt,O[Ee.pointerId]=Ve),Ve.set(Ee.pageX,Ee.pageY)}function ft(Ee){const Ve=Ee.pointerId===z[0].pointerId?z[1]:z[0];return O[Ve.pointerId]}this.dollyIn=(Ee=$())=>{N(Ee),r.update()},this.dollyOut=(Ee=$())=>{L(Ee),r.update()},this.getScale=()=>h,this.setScale=Ee=>{Y(Ee),r.update()},this.getZoomScale=()=>$(),n!==void 0&&this.connect(n),this.update()}};function UYe(){var t=Object.create(null);function e(i,o){var a=i.id,s=i.name,l=i.dependencies;l===void 0&&(l=[]);var c=i.init;c===void 0&&(c=function(){});var u=i.getTransferables;if(u===void 0&&(u=null),!t[a])try{l=l.map(function(h){return h&&h.isWorkerModule&&(e(h,function(p){if(p instanceof Error)throw p}),h=t[h.id].value),h}),c=r("<"+s+">.init",c),u&&(u=r("<"+s+">.getTransferables",u));var f=null;typeof c=="function"?f=c.apply(void 0,l):console.error("worker module init function failed to rehydrate"),t[a]={id:a,value:f,getTransferables:u},o(f)}catch(h){h&&h.noLog||console.error(h),o(h)}}function n(i,o){var a,s=i.id,l=i.args;(!t[s]||typeof t[s].value!="function")&&o(new Error("Worker module "+s+": not found or its 'init' did not return a function"));try{var c=(a=t[s]).value.apply(a,l);c&&typeof c.then=="function"?c.then(u,function(f){return o(f instanceof Error?f:new Error(""+f))}):u(c)}catch(f){o(f)}function u(f){try{var h=t[s].getTransferables&&t[s].getTransferables(f);(!h||!Array.isArray(h)||!h.length)&&(h=void 0),o(f,h)}catch(p){console.error(p),o(p)}}}function r(i,o){var a=void 0;self.troikaDefine=function(l){return a=l};var s=URL.createObjectURL(new Blob(["/** "+i.replace(/\*/g,"")+` **/

troikaDefine(
`+o+`
)`],{type:"application/javascript"}));try{importScripts(s)}catch(l){console.error(l)}return URL.revokeObjectURL(s),delete self.troikaDefine,a}self.addEventListener("message",function(i){var o=i.data,a=o.messageId,s=o.action,l=o.data;try{s==="registerModule"&&e(l,function(c){c instanceof Error?postMessage({messageId:a,success:!1,error:c.message}):postMessage({messageId:a,success:!0,result:{isCallable:typeof c=="function"}})}),s==="callModule"&&n(l,function(c,u){c instanceof Error?postMessage({messageId:a,success:!1,error:c.message}):postMessage({messageId:a,success:!0,result:c},u||void 0)})}catch(c){postMessage({messageId:a,success:!1,error:c.stack})}})}function BYe(t){var e=function(){for(var n=[],r=arguments.length;r--;)n[r]=arguments[r];return e._getInitResult().then(function(i){if(typeof i=="function")return i.apply(void 0,n);throw new Error("Worker module function was called but `init` did not return a callable function")})};return e._getInitResult=function(){var n=t.dependencies,r=t.init;n=Array.isArray(n)?n.map(function(o){return o&&o._getInitResult?o._getInitResult():o}):[];var i=Promise.all(n).then(function(o){return r.apply(null,o)});return e._getInitResult=function(){return i},i},e}var Rce=function(){var t=!1;if(typeof window<"u"&&typeof window.document<"u")try{var e=new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"})));e.terminate(),t=!0}catch(n){console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+n.message+"]")}return Rce=function(){return t},t},$Ye=0,HYe=0,xI=!1,Kw=Object.create(null),Jw=Object.create(null),$D=Object.create(null);function yS(t){if((!t||typeof t.init!="function")&&!xI)throw new Error("requires `options.init` function");var e=t.dependencies,n=t.init,r=t.getTransferables,i=t.workerId;if(!Rce())return BYe(t);i==null&&(i="#default");var o="workerModule"+ ++$Ye,a=t.name||o,s=null;e=e&&e.map(function(c){return typeof c=="function"&&!c.workerModuleData&&(xI=!0,c=yS({workerId:i,name:"<"+a+"> function dependency: "+c.name,init:`function(){return (
`+cT(c)+`
)}`}),xI=!1),c&&c.workerModuleData&&(c=c.workerModuleData),c});function l(){for(var c=[],u=arguments.length;u--;)c[u]=arguments[u];if(!s){s=gX(i,"registerModule",l.workerModuleData);var f=function(){s=null,Jw[i].delete(f)};(Jw[i]||(Jw[i]=new Set)).add(f)}return s.then(function(h){var p=h.isCallable;if(p)return gX(i,"callModule",{id:o,args:c});throw new Error("Worker module function was called but `init` did not return a callable function")})}return l.workerModuleData={isWorkerModule:!0,id:o,name:a,dependencies:e,init:cT(n),getTransferables:r&&cT(r)},l}function VYe(t){Jw[t]&&Jw[t].forEach(function(e){e()}),Kw[t]&&(Kw[t].terminate(),delete Kw[t])}function cT(t){var e=t.toString();return!/^function/.test(e)&&/^\w+\s*\(/.test(e)&&(e="function "+e),e}function WYe(t){var e=Kw[t];if(!e){var n=cT(UYe);e=Kw[t]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+t.replace(/\*/g,"")+` **/

;(`+n+")()"],{type:"application/javascript"}))),e.onmessage=function(r){var i=r.data,o=i.messageId,a=$D[o];if(!a)throw new Error("WorkerModule response with empty or unknown messageId");delete $D[o],a(i)}}return e}function gX(t,e,n){return new Promise(function(r,i){var o=++HYe;$D[o]=function(a){a.success?r(a.result):i(new Error("Error in worker "+e+" call: "+a.error))},WYe(t).postMessage({messageId:o,action:e,data:n})})}function jce(){var t=function(e){function n(Y,L,N,V,W,ne,se,te){var ie=1-se;te.x=ie*ie*Y+2*ie*se*N+se*se*W,te.y=ie*ie*L+2*ie*se*V+se*se*ne}function r(Y,L,N,V,W,ne,se,te,ie,pe){var de=1-ie;pe.x=de*de*de*Y+3*de*de*ie*N+3*de*ie*ie*W+ie*ie*ie*se,pe.y=de*de*de*L+3*de*de*ie*V+3*de*ie*ie*ne+ie*ie*ie*te}function i(Y,L){for(var N=/([MLQCZ])([^MLQCZ]*)/g,V,W,ne,se,te;V=N.exec(Y);){var ie=V[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(pe){return parseFloat(pe)});switch(V[1]){case"M":se=W=ie[0],te=ne=ie[1];break;case"L":(ie[0]!==se||ie[1]!==te)&&L("L",se,te,se=ie[0],te=ie[1]);break;case"Q":{L("Q",se,te,se=ie[2],te=ie[3],ie[0],ie[1]);break}case"C":{L("C",se,te,se=ie[4],te=ie[5],ie[0],ie[1],ie[2],ie[3]);break}case"Z":(se!==W||te!==ne)&&L("L",se,te,W,ne);break}}}function o(Y,L,N){N===void 0&&(N=16);var V={x:0,y:0};i(Y,function(W,ne,se,te,ie,pe,de,ce,he){switch(W){case"L":L(ne,se,te,ie);break;case"Q":{for(var ee=ne,xe=se,be=1;be<N;be++)n(ne,se,pe,de,te,ie,be/(N-1),V),L(ee,xe,V.x,V.y),ee=V.x,xe=V.y;break}case"C":{for(var Ae=ne,Ce=se,oe=1;oe<N;oe++)r(ne,se,pe,de,ce,he,te,ie,oe/(N-1),V),L(Ae,Ce,V.x,V.y),Ae=V.x,Ce=V.y;break}}})}var a="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",s="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",l=new WeakMap,c={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function u(Y,L){var N=Y.getContext?Y.getContext("webgl",c):Y,V=l.get(N);if(!V){let de=function(Ae){var Ce=ne[Ae];if(!Ce&&(Ce=ne[Ae]=N.getExtension(Ae),!Ce))throw new Error(Ae+" not supported");return Ce},ce=function(Ae,Ce){var oe=N.createShader(Ce);return N.shaderSource(oe,Ae),N.compileShader(oe),oe},he=function(Ae,Ce,oe,ae){if(!se[Ae]){var Se={},me={},ye=N.createProgram();N.attachShader(ye,ce(Ce,N.VERTEX_SHADER)),N.attachShader(ye,ce(oe,N.FRAGMENT_SHADER)),N.linkProgram(ye),se[Ae]={program:ye,transaction:function(De){N.useProgram(ye),De({setUniform:function($e,we){for(var fe=[],ke=arguments.length-2;ke-- >0;)fe[ke]=arguments[ke+2];var Ne=me[we]||(me[we]=N.getUniformLocation(ye,we));N["uniform"+$e].apply(N,[Ne].concat(fe))},setAttribute:function($e,we,fe,ke,Ne){var qe=Se[$e];qe||(qe=Se[$e]={buf:N.createBuffer(),loc:N.getAttribLocation(ye,$e),data:null}),N.bindBuffer(N.ARRAY_BUFFER,qe.buf),N.vertexAttribPointer(qe.loc,we,N.FLOAT,!1,0,0),N.enableVertexAttribArray(qe.loc),W?N.vertexAttribDivisor(qe.loc,ke):de("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(qe.loc,ke),Ne!==qe.data&&(N.bufferData(N.ARRAY_BUFFER,Ne,fe),qe.data=Ne)}})}}}se[Ae].transaction(ae)},ee=function(Ae,Ce){ie++;try{N.activeTexture(N.TEXTURE0+ie);var oe=te[Ae];oe||(oe=te[Ae]=N.createTexture(),N.bindTexture(N.TEXTURE_2D,oe),N.texParameteri(N.TEXTURE_2D,N.TEXTURE_MIN_FILTER,N.NEAREST),N.texParameteri(N.TEXTURE_2D,N.TEXTURE_MAG_FILTER,N.NEAREST)),N.bindTexture(N.TEXTURE_2D,oe),Ce(oe,ie)}finally{ie--}},xe=function(Ae,Ce,oe){var ae=N.createFramebuffer();pe.push(ae),N.bindFramebuffer(N.FRAMEBUFFER,ae),N.activeTexture(N.TEXTURE0+Ce),N.bindTexture(N.TEXTURE_2D,Ae),N.framebufferTexture2D(N.FRAMEBUFFER,N.COLOR_ATTACHMENT0,N.TEXTURE_2D,Ae,0);try{oe(ae)}finally{N.deleteFramebuffer(ae),N.bindFramebuffer(N.FRAMEBUFFER,pe[--pe.length-1]||null)}},be=function(){ne={},se={},te={},ie=-1,pe.length=0};var W=typeof WebGL2RenderingContext<"u"&&N instanceof WebGL2RenderingContext,ne={},se={},te={},ie=-1,pe=[];N.canvas.addEventListener("webglcontextlost",function(Ae){be(),Ae.preventDefault()},!1),l.set(N,V={gl:N,isWebGL2:W,getExtension:de,withProgram:he,withTexture:ee,withTextureFramebuffer:xe,handleContextLoss:be})}L(V)}function f(Y,L,N,V,W,ne,se,te){se===void 0&&(se=15),te===void 0&&(te=null),u(Y,function(ie){var pe=ie.gl,de=ie.withProgram,ce=ie.withTexture;ce("copy",function(he,ee){pe.texImage2D(pe.TEXTURE_2D,0,pe.RGBA,W,ne,0,pe.RGBA,pe.UNSIGNED_BYTE,L),de("copy",a,s,function(xe){var be=xe.setUniform,Ae=xe.setAttribute;Ae("aUV",2,pe.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),be("1i","image",ee),pe.bindFramebuffer(pe.FRAMEBUFFER,te||null),pe.disable(pe.BLEND),pe.colorMask(se&8,se&4,se&2,se&1),pe.viewport(N,V,W,ne),pe.scissor(N,V,W,ne),pe.drawArrays(pe.TRIANGLES,0,3)})})})}function h(Y,L,N){var V=Y.width,W=Y.height;u(Y,function(ne){var se=ne.gl,te=new Uint8Array(V*W*4);se.readPixels(0,0,V,W,se.RGBA,se.UNSIGNED_BYTE,te),Y.width=L,Y.height=N,f(se,te,0,0,V,W)})}var p=Object.freeze({__proto__:null,withWebGLContext:u,renderImageData:f,resizeWebGLCanvasWithoutClearing:h});function y(Y,L,N,V,W,ne){ne===void 0&&(ne=1);var se=new Uint8Array(Y*L),te=V[2]-V[0],ie=V[3]-V[1],pe=[];o(N,function(Ae,Ce,oe,ae){pe.push({x1:Ae,y1:Ce,x2:oe,y2:ae,minX:Math.min(Ae,oe),minY:Math.min(Ce,ae),maxX:Math.max(Ae,oe),maxY:Math.max(Ce,ae)})}),pe.sort(function(Ae,Ce){return Ae.maxX-Ce.maxX});for(var de=0;de<Y;de++)for(var ce=0;ce<L;ce++){var he=xe(V[0]+te*(de+.5)/Y,V[1]+ie*(ce+.5)/L),ee=Math.pow(1-Math.abs(he)/W,ne)/2;he<0&&(ee=1-ee),ee=Math.max(0,Math.min(255,Math.round(ee*255))),se[ce*Y+de]=ee}return se;function xe(Ae,Ce){for(var oe=1/0,ae=1/0,Se=pe.length;Se--;){var me=pe[Se];if(me.maxX+ae<=Ae)break;if(Ae+ae>me.minX&&Ce-ae<me.maxY&&Ce+ae>me.minY){var ye=b(Ae,Ce,me.x1,me.y1,me.x2,me.y2);ye<oe&&(oe=ye,ae=Math.sqrt(oe))}}return be(Ae,Ce)&&(ae=-ae),ae}function be(Ae,Ce){for(var oe=0,ae=pe.length;ae--;){var Se=pe[ae];if(Se.maxX<=Ae)break;var me=Se.y1>Ce!=Se.y2>Ce&&Ae<(Se.x2-Se.x1)*(Ce-Se.y1)/(Se.y2-Se.y1)+Se.x1;me&&(oe+=Se.y1<Se.y2?1:-1)}return oe!==0}}function g(Y,L,N,V,W,ne,se,te,ie,pe){ne===void 0&&(ne=1),te===void 0&&(te=0),ie===void 0&&(ie=0),pe===void 0&&(pe=0),v(Y,L,N,V,W,ne,se,null,te,ie,pe)}function v(Y,L,N,V,W,ne,se,te,ie,pe,de){ne===void 0&&(ne=1),ie===void 0&&(ie=0),pe===void 0&&(pe=0),de===void 0&&(de=0);for(var ce=y(Y,L,N,V,W,ne),he=new Uint8Array(ce.length*4),ee=0;ee<ce.length;ee++)he[ee*4+de]=ce[ee];f(se,he,ie,pe,Y,L,1<<3-de,te)}function b(Y,L,N,V,W,ne){var se=W-N,te=ne-V,ie=se*se+te*te,pe=ie?Math.max(0,Math.min(1,((Y-N)*se+(L-V)*te)/ie)):0,de=Y-(N+pe*se),ce=L-(V+pe*te);return de*de+ce*ce}var w=Object.freeze({__proto__:null,generate:y,generateIntoCanvas:g,generateIntoFramebuffer:v}),T="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",C="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",P="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",M=new Float32Array([0,0,2,0,0,2]),k=null,I=!1,U={},z=new WeakMap;function O(Y){if(!I&&!J(Y))throw new Error("WebGL generation not supported")}function B(Y,L,N,V,W,ne,se){if(ne===void 0&&(ne=1),se===void 0&&(se=null),!se&&(se=k,!se)){var te=typeof OffscreenCanvas=="function"?new OffscreenCanvas(1,1):typeof document<"u"?document.createElement("canvas"):null;if(!te)throw new Error("OffscreenCanvas or DOM canvas not supported");se=k=te.getContext("webgl",{depth:!1})}O(se);var ie=new Uint8Array(Y*L*4);u(se,function(he){var ee=he.gl,xe=he.withTexture,be=he.withTextureFramebuffer;xe("readable",function(Ae,Ce){ee.texImage2D(ee.TEXTURE_2D,0,ee.RGBA,Y,L,0,ee.RGBA,ee.UNSIGNED_BYTE,null),be(Ae,Ce,function(oe){F(Y,L,N,V,W,ne,ee,oe,0,0,0),ee.readPixels(0,0,Y,L,ee.RGBA,ee.UNSIGNED_BYTE,ie)})})});for(var pe=new Uint8Array(Y*L),de=0,ce=0;de<ie.length;de+=4)pe[ce++]=ie[de];return pe}function $(Y,L,N,V,W,ne,se,te,ie,pe){ne===void 0&&(ne=1),te===void 0&&(te=0),ie===void 0&&(ie=0),pe===void 0&&(pe=0),F(Y,L,N,V,W,ne,se,null,te,ie,pe)}function F(Y,L,N,V,W,ne,se,te,ie,pe,de){ne===void 0&&(ne=1),ie===void 0&&(ie=0),pe===void 0&&(pe=0),de===void 0&&(de=0),O(se);var ce=[];o(N,function(he,ee,xe,be){ce.push(he,ee,xe,be)}),ce=new Float32Array(ce),u(se,function(he){var ee=he.gl,xe=he.isWebGL2,be=he.getExtension,Ae=he.withProgram,Ce=he.withTexture,oe=he.withTextureFramebuffer,ae=he.handleContextLoss;if(Ce("rawDistances",function(Se,me){(Y!==Se._lastWidth||L!==Se._lastHeight)&&ee.texImage2D(ee.TEXTURE_2D,0,ee.RGBA,Se._lastWidth=Y,Se._lastHeight=L,0,ee.RGBA,ee.UNSIGNED_BYTE,null),Ae("main",T,C,function(ye){var Ie=ye.setAttribute,De=ye.setUniform,Ue=!xe&&be("ANGLE_instanced_arrays"),$e=!xe&&be("EXT_blend_minmax");Ie("aUV",2,ee.STATIC_DRAW,0,M),Ie("aLineSegment",4,ee.DYNAMIC_DRAW,1,ce),De.apply(void 0,["4f","uGlyphBounds"].concat(V)),De("1f","uMaxDistance",W),De("1f","uExponent",ne),oe(Se,me,function(we){ee.enable(ee.BLEND),ee.colorMask(!0,!0,!0,!0),ee.viewport(0,0,Y,L),ee.scissor(0,0,Y,L),ee.blendFunc(ee.ONE,ee.ONE),ee.blendEquationSeparate(ee.FUNC_ADD,xe?ee.MAX:$e.MAX_EXT),ee.clear(ee.COLOR_BUFFER_BIT),xe?ee.drawArraysInstanced(ee.TRIANGLES,0,3,ce.length/4):Ue.drawArraysInstancedANGLE(ee.TRIANGLES,0,3,ce.length/4)})}),Ae("post",a,P,function(ye){ye.setAttribute("aUV",2,ee.STATIC_DRAW,0,M),ye.setUniform("1i","tex",me),ee.bindFramebuffer(ee.FRAMEBUFFER,te),ee.disable(ee.BLEND),ee.colorMask(de===0,de===1,de===2,de===3),ee.viewport(ie,pe,Y,L),ee.scissor(ie,pe,Y,L),ee.drawArrays(ee.TRIANGLES,0,3)})}),ee.isContextLost())throw ae(),new Error("webgl context lost")})}function J(Y){var L=!Y||Y===k?U:Y.canvas||Y,N=z.get(L);if(N===void 0){I=!0;var V=null;try{var W=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],ne=B(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,Y);N=ne&&W.length===ne.length&&ne.every(function(se,te){return se===W[te]}),N||(V="bad trial run results",console.info(W,ne))}catch(se){N=!1,V=se.message}V&&console.warn("WebGL SDF generation not supported:",V),I=!1,z.set(L,N)}return N}var K=Object.freeze({__proto__:null,generate:B,generateIntoCanvas:$,generateIntoFramebuffer:F,isSupported:J});function Z(Y,L,N,V,W,ne){W===void 0&&(W=Math.max(V[2]-V[0],V[3]-V[1])/2),ne===void 0&&(ne=1);try{return B.apply(K,arguments)}catch(se){return console.info("WebGL SDF generation failed, falling back to JS",se),y.apply(w,arguments)}}function H(Y,L,N,V,W,ne,se,te,ie,pe){W===void 0&&(W=Math.max(V[2]-V[0],V[3]-V[1])/2),ne===void 0&&(ne=1),te===void 0&&(te=0),ie===void 0&&(ie=0),pe===void 0&&(pe=0);try{return $.apply(K,arguments)}catch(de){return console.info("WebGL SDF generation failed, falling back to JS",de),g.apply(w,arguments)}}return e.forEachPathCommand=i,e.generate=Z,e.generateIntoCanvas=H,e.javascript=w,e.pathToLineSegments=o,e.webgl=K,e.webglUtils=p,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return t}function GYe(){var t=function(e){var n={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},r={},i={};r.L=1,i[1]="L",Object.keys(n).forEach(function(ae,Se){r[ae]=1<<Se+1,i[r[ae]]=ae}),Object.freeze(r);var o=r.LRI|r.RLI|r.FSI,a=r.L|r.R|r.AL,s=r.B|r.S|r.WS|r.ON|r.FSI|r.LRI|r.RLI|r.PDI,l=r.BN|r.RLE|r.LRE|r.RLO|r.LRO|r.PDF,c=r.S|r.WS|r.B|o|r.PDI|l,u=null;function f(){if(!u){u=new Map;var ae=function(me){if(n.hasOwnProperty(me)){var ye=0;n[me].split(",").forEach(function(Ie){var De=Ie.split("+"),Ue=De[0],$e=De[1];Ue=parseInt(Ue,36),$e=$e?parseInt($e,36):0,u.set(ye+=Ue,r[me]);for(var we=0;we<$e;we++)u.set(++ye,r[me])})}};for(var Se in n)ae(Se)}}function h(ae){return f(),u.get(ae.codePointAt(0))||r.L}function p(ae){return i[h(ae)]}var y={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function g(ae,Se){var me=36,ye=0,Ie=new Map,De=Se&&new Map,Ue;return ae.split(",").forEach(function $e(we){if(we.indexOf("+")!==-1)for(var fe=+we;fe--;)$e(Ue);else{Ue=we;var ke=we.split(">"),Ne=ke[0],qe=ke[1];Ne=String.fromCodePoint(ye+=parseInt(Ne,me)),qe=String.fromCodePoint(ye+=parseInt(qe,me)),Ie.set(Ne,qe),Se&&De.set(qe,Ne)}}),{map:Ie,reverseMap:De}}var v,b,w;function T(){if(!v){var ae=g(y.pairs,!0),Se=ae.map,me=ae.reverseMap;v=Se,b=me,w=g(y.canonical,!1).map}}function C(ae){return T(),v.get(ae)||null}function P(ae){return T(),b.get(ae)||null}function M(ae){return T(),w.get(ae)||null}var k=r.L,I=r.R,U=r.EN,z=r.ES,O=r.ET,B=r.AN,$=r.CS,F=r.B,J=r.S,K=r.ON,Z=r.BN,H=r.NSM,Y=r.AL,L=r.LRO,N=r.RLO,V=r.LRE,W=r.RLE,ne=r.PDF,se=r.LRI,te=r.RLI,ie=r.FSI,pe=r.PDI;function de(ae,Se){for(var me=125,ye=new Uint32Array(ae.length),Ie=0;Ie<ae.length;Ie++)ye[Ie]=h(ae[Ie]);var De=new Map;function Ue(ei,pi){var Vr=ye[ei];ye[ei]=pi,De.set(Vr,De.get(Vr)-1),Vr&s&&De.set(s,De.get(s)-1),De.set(pi,(De.get(pi)||0)+1),pi&s&&De.set(s,(De.get(s)||0)+1)}for(var $e=new Uint8Array(ae.length),we=new Map,fe=[],ke=null,Ne=0;Ne<ae.length;Ne++)ke||fe.push(ke={start:Ne,end:ae.length-1,level:Se==="rtl"?1:Se==="ltr"?0:Mi(Ne,!1)}),ye[Ne]&F&&(ke.end=Ne,ke=null);for(var qe=W|V|N|L|o|pe|ne|F,tt=function(ei){return ei+(ei&1?1:2)},ot=function(ei){return ei+(ei&1?2:1)},St=0;St<fe.length;St++){ke=fe[St];var dt=[{_level:ke.level,_override:0,_isolate:0}],ft=void 0,Ee=0,Ve=0,Xe=0;De.clear();for(var et=ke.start;et<=ke.end;et++){var wt=ye[et];if(ft=dt[dt.length-1],De.set(wt,(De.get(wt)||0)+1),wt&s&&De.set(s,(De.get(s)||0)+1),wt&qe)if(wt&(W|V)){$e[et]=ft._level;var Bt=(wt===W?ot:tt)(ft._level);Bt<=me&&!Ee&&!Ve?dt.push({_level:Bt,_override:0,_isolate:0}):Ee||Ve++}else if(wt&(N|L)){$e[et]=ft._level;var en=(wt===N?ot:tt)(ft._level);en<=me&&!Ee&&!Ve?dt.push({_level:en,_override:wt&N?I:k,_isolate:0}):Ee||Ve++}else if(wt&o){wt&ie&&(wt=Mi(et+1,!0)===1?te:se),$e[et]=ft._level,ft._override&&Ue(et,ft._override);var Hn=(wt===te?ot:tt)(ft._level);Hn<=me&&Ee===0&&Ve===0?(Xe++,dt.push({_level:Hn,_override:0,_isolate:1,_isolInitIndex:et})):Ee++}else if(wt&pe){if(Ee>0)Ee--;else if(Xe>0){for(Ve=0;!dt[dt.length-1]._isolate;)dt.pop();var gr=dt[dt.length-1]._isolInitIndex;gr!=null&&(we.set(gr,et),we.set(et,gr)),dt.pop(),Xe--}ft=dt[dt.length-1],$e[et]=ft._level,ft._override&&Ue(et,ft._override)}else wt&ne?(Ee===0&&(Ve>0?Ve--:!ft._isolate&&dt.length>1&&(dt.pop(),ft=dt[dt.length-1])),$e[et]=ft._level):wt&F&&($e[et]=ke.level);else $e[et]=ft._level,ft._override&&wt!==Z&&Ue(et,ft._override)}for(var Mn=[],Jt=null,fn=ke.start;fn<=ke.end;fn++){var Ar=ye[fn];if(!(Ar&l)){var gn=$e[fn],un=Ar&o,ln=Ar===pe;Jt&&gn===Jt._level?(Jt._end=fn,Jt._endsWithIsolInit=un):Mn.push(Jt={_start:fn,_end:fn,_level:gn,_startsWithPDI:ln,_endsWithIsolInit:un})}}for(var Nn=[],Zt=0;Zt<Mn.length;Zt++){var le=Mn[Zt];if(!le._startsWithPDI||le._startsWithPDI&&!we.has(le._start)){for(var Me=[Jt=le],Pe=void 0;Jt&&Jt._endsWithIsolInit&&(Pe=we.get(Jt._end))!=null;)for(var Re=Zt+1;Re<Mn.length;Re++)if(Mn[Re]._start===Pe){Me.push(Jt=Mn[Re]);break}for(var ze=[],at=0;at<Me.length;at++)for(var it=Me[at],pt=it._start;pt<=it._end;pt++)ze.push(pt);for(var Qt=$e[ze[0]],Pn=ke.level,cn=ze[0]-1;cn>=0;cn--)if(!(ye[cn]&l)){Pn=$e[cn];break}var yn=ze[ze.length-1],tr=$e[yn],ua=ke.level;if(!(ye[yn]&o)){for(var vn=yn+1;vn<=ke.end;vn++)if(!(ye[vn]&l)){ua=$e[vn];break}}Nn.push({_seqIndices:ze,_sosType:Math.max(Pn,Qt)%2?I:k,_eosType:Math.max(ua,tr)%2?I:k})}}for(var ns=0;ns<Nn.length;ns++){var Vn=Nn[ns],yt=Vn._seqIndices,di=Vn._sosType,Eo=Vn._eosType,Qr=$e[yt[0]]&1?I:k;if(De.get(H))for(var Fn=0;Fn<yt.length;Fn++){var Na=yt[Fn];if(ye[Na]&H){for(var Mr=di,so=Fn-1;so>=0;so--)if(!(ye[yt[so]]&l)){Mr=ye[yt[so]];break}Ue(Na,Mr&(o|pe)?K:Mr)}}if(De.get(U))for(var xn=0;xn<yt.length;xn++){var Xn=yt[xn];if(ye[Xn]&U)for(var Pr=xn-1;Pr>=-1;Pr--){var fi=Pr===-1?di:ye[yt[Pr]];if(fi&a){fi===Y&&Ue(Xn,B);break}}}if(De.get(Y))for(var _i=0;_i<yt.length;_i++){var Os=yt[_i];ye[Os]&Y&&Ue(Os,I)}if(De.get(z)||De.get($))for(var _o=1;_o<yt.length-1;_o++){var Hr=yt[_o];if(ye[Hr]&(z|$)){for(var To=0,cl=0,kd=_o-1;kd>=0&&(To=ye[yt[kd]],!!(To&l));kd--);for(var hc=_o+1;hc<yt.length&&(cl=ye[yt[hc]],!!(cl&l));hc++);To===cl&&(ye[Hr]===z?To===U:To&(U|B))&&Ue(Hr,To)}}if(De.get(U))for(var Co=0;Co<yt.length;Co++){var Wo=yt[Co];if(ye[Wo]&U){for(var pc=Co-1;pc>=0&&ye[yt[pc]]&(O|l);pc--)Ue(yt[pc],U);for(Co++;Co<yt.length&&ye[yt[Co]]&(O|l|U);Co++)ye[yt[Co]]!==U&&Ue(yt[Co],U)}}if(De.get(O)||De.get(z)||De.get($))for(var rs=0;rs<yt.length;rs++){var Um=yt[rs];if(ye[Um]&(O|z|$)){Ue(Um,K);for(var is=rs-1;is>=0&&ye[yt[is]]&l;is--)Ue(yt[is],K);for(var En=rs+1;En<yt.length&&ye[yt[En]]&l;En++)Ue(yt[En],K)}}if(De.get(U))for(var Ls=0,mc=di;Ls<yt.length;Ls++){var Nd=yt[Ls],Rd=ye[Nd];Rd&U?mc===k&&Ue(Nd,k):Rd&a&&(mc=Rd)}if(De.get(s)){var Ds=I|U|B,uu=Ds|k,Ra=[];{for(var os=[],Gi=0;Gi<yt.length;Gi++)if(ye[yt[Gi]]&s){var nn=ae[yt[Gi]],ja=void 0;if(C(nn)!==null)if(os.length<63)os.push({char:nn,seqIndex:Gi});else break;else if((ja=P(nn))!==null)for(var da=os.length-1;da>=0;da--){var Fs=os[da].char;if(Fs===ja||Fs===P(M(nn))||C(M(Fs))===nn){Ra.push([os[da].seqIndex,Gi]),os.length=da;break}}}Ra.sort(function(ei,pi){return ei[0]-pi[0]})}for(var Ia=0;Ia<Ra.length;Ia++){for(var Bm=Ra[Ia],yr=Bm[0],as=Bm[1],$m=!1,lo=0,gc=yr+1;gc<as;gc++){var yc=yt[gc];if(ye[yc]&uu){$m=!0;var fa=ye[yc]&Ds?I:k;if(fa===Qr){lo=fa;break}}}if($m&&!lo){lo=di;for(var ul=yr-1;ul>=0;ul--){var vc=yt[ul];if(ye[vc]&uu){var Ti=ye[vc]&Ds?I:k;Ti!==Qr?lo=Ti:lo=Qr;break}}}if(lo){if(ye[yt[yr]]=ye[yt[as]]=lo,lo!==Qr){for(var Ci=yr+1;Ci<yt.length;Ci++)if(!(ye[yt[Ci]]&l)){h(ae[yt[Ci]])&H&&(ye[yt[Ci]]=lo);break}}if(lo!==Qr){for(var zs=as+1;zs<yt.length;zs++)if(!(ye[yt[zs]]&l)){h(ae[yt[zs]])&H&&(ye[yt[zs]]=lo);break}}}}for(var Oa=0;Oa<yt.length;Oa++)if(ye[yt[Oa]]&s){for(var du=Oa,xc=Oa,co=di,wc=Oa-1;wc>=0;wc--)if(ye[yt[wc]]&l)du=wc;else{co=ye[yt[wc]]&Ds?I:k;break}for(var Go=Eo,dl=Oa+1;dl<yt.length;dl++)if(ye[yt[dl]]&(s|l))xc=dl;else{Go=ye[yt[dl]]&Ds?I:k;break}for(var Ai=du;Ai<=xc;Ai++)ye[yt[Ai]]=co===Go?co:Qr;Oa=xc}}}for(var hi=ke.start;hi<=ke.end;hi++){var fl=$e[hi],qo=ye[hi];if(fl&1?qo&(k|U|B)&&$e[hi]++:qo&I?$e[hi]++:qo&(B|U)&&($e[hi]+=2),qo&l&&($e[hi]=hi===0?ke.level:$e[hi-1]),hi===ke.end||h(ae[hi])&(J|F))for(var hl=hi;hl>=0&&h(ae[hl])&c;hl--)$e[hl]=ke.level}}return{levels:$e,paragraphs:fe};function Mi(ei,pi){for(var Vr=ei;Vr<ae.length;Vr++){var kr=ye[Vr];if(kr&(I|Y))return 1;if(kr&(F|k)||pi&&kr===pe)return 0;if(kr&o){var Ao=pl(Vr);Vr=Ao===-1?ae.length:Ao}}return 0}function pl(ei){for(var pi=1,Vr=ei+1;Vr<ae.length;Vr++){var kr=ye[Vr];if(kr&F)break;if(kr&pe){if(--pi===0)return Vr}else kr&o&&pi++}return-1}}var ce="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",he;function ee(){if(!he){var ae=g(ce,!0),Se=ae.map,me=ae.reverseMap;me.forEach(function(ye,Ie){Se.set(Ie,ye)}),he=Se}}function xe(ae){return ee(),he.get(ae)||null}function be(ae,Se,me,ye){var Ie=ae.length;me=Math.max(0,me==null?0:+me),ye=Math.min(Ie-1,ye==null?Ie-1:+ye);for(var De=new Map,Ue=me;Ue<=ye;Ue++)if(Se[Ue]&1){var $e=xe(ae[Ue]);$e!==null&&De.set(Ue,$e)}return De}function Ae(ae,Se,me,ye){var Ie=ae.length;me=Math.max(0,me==null?0:+me),ye=Math.min(Ie-1,ye==null?Ie-1:+ye);var De=[];return Se.paragraphs.forEach(function(Ue){var $e=Math.max(me,Ue.start),we=Math.min(ye,Ue.end);if($e<we){for(var fe=Se.levels.slice($e,we+1),ke=we;ke>=$e&&h(ae[ke])&c;ke--)fe[ke]=Ue.level;for(var Ne=Ue.level,qe=1/0,tt=0;tt<fe.length;tt++){var ot=fe[tt];ot>Ne&&(Ne=ot),ot<qe&&(qe=ot|1)}for(var St=Ne;St>=qe;St--)for(var dt=0;dt<fe.length;dt++)if(fe[dt]>=St){for(var ft=dt;dt+1<fe.length&&fe[dt+1]>=St;)dt++;dt>ft&&De.push([ft+$e,dt+$e])}}}),De}function Ce(ae,Se,me,ye){var Ie=oe(ae,Se,me,ye),De=[].concat(ae);return Ie.forEach(function(Ue,$e){De[$e]=(Se.levels[Ue]&1?xe(ae[Ue]):null)||ae[Ue]}),De.join("")}function oe(ae,Se,me,ye){for(var Ie=Ae(ae,Se,me,ye),De=[],Ue=0;Ue<ae.length;Ue++)De[Ue]=Ue;return Ie.forEach(function($e){for(var we=$e[0],fe=$e[1],ke=De.slice(we,fe+1),Ne=ke.length;Ne--;)De[fe-Ne]=ke[Ne]}),De}return e.closingToOpeningBracket=P,e.getBidiCharType=h,e.getBidiCharTypeName=p,e.getCanonicalBracket=M,e.getEmbeddingLevels=de,e.getMirroredCharacter=xe,e.getMirroredCharactersMap=be,e.getReorderSegments=Ae,e.getReorderedIndices=oe,e.getReorderedString=Ce,e.openingToClosingBracket=C,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return t}const Ice=/\bvoid\s+main\s*\(\s*\)\s*{/g;function HD(t){const e=/^[ \t]*#include +<([\w\d./]+)>/gm;function n(r,i){let o=_n[i];return o?HD(o):r}return t.replace(e,n)}const Lo=[];for(let t=0;t<256;t++)Lo[t]=(t<16?"0":"")+t.toString(16);function qYe(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(Lo[t&255]+Lo[t>>8&255]+Lo[t>>16&255]+Lo[t>>24&255]+"-"+Lo[e&255]+Lo[e>>8&255]+"-"+Lo[e>>16&15|64]+Lo[e>>24&255]+"-"+Lo[n&63|128]+Lo[n>>8&255]+"-"+Lo[n>>16&255]+Lo[n>>24&255]+Lo[r&255]+Lo[r>>8&255]+Lo[r>>16&255]+Lo[r>>24&255]).toUpperCase()}const cp=Object.assign||function(){let t=arguments[0];for(let e=1,n=arguments.length;e<n;e++){let r=arguments[e];if(r)for(let i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},YYe=Date.now(),yX=new WeakMap,vX=new Map;let XYe=1e10;function VD(t,e){const n=QYe(e);let r=yX.get(t);if(r||yX.set(t,r=Object.create(null)),r[n])return new r[n];const i=`_onBeforeCompile${n}`,o=function(c,u){t.onBeforeCompile.call(this,c,u);const f=this.customProgramCacheKey()+"|"+c.vertexShader+"|"+c.fragmentShader;let h=vX[f];if(!h){const p=KYe(this,c,e,n);h=vX[f]=p}c.vertexShader=h.vertexShader,c.fragmentShader=h.fragmentShader,cp(c.uniforms,this.uniforms),e.timeUniform&&(c.uniforms[e.timeUniform]={get value(){return Date.now()-YYe}}),this[i]&&this[i](c)},a=function(){return s(e.chained?t:t.clone())},s=function(c){const u=Object.create(c,l);return Object.defineProperty(u,"baseMaterial",{value:t}),Object.defineProperty(u,"id",{value:XYe++}),u.uuid=qYe(),u.uniforms=cp({},c.uniforms,e.uniforms),u.defines=cp({},c.defines,e.defines),u.defines[`TROIKA_DERIVED_MATERIAL_${n}`]="",u.extensions=cp({},c.extensions,e.extensions),u._listeners=void 0,u},l={constructor:{value:a},isDerivedMaterial:{value:!0},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return t.customProgramCacheKey()+"|"+n}},onBeforeCompile:{get(){return o},set(c){this[i]=c}},copy:{writable:!0,configurable:!0,value:function(c){return t.copy.call(this,c),!t.isShaderMaterial&&!t.isDerivedMaterial&&(cp(this.extensions,c.extensions),cp(this.defines,c.defines),cp(this.uniforms,F5.clone(c.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const c=new t.constructor;return s(c).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let c=this._depthMaterial;return c||(c=this._depthMaterial=VD(t.isDerivedMaterial?t.getDepthMaterial():new aS({depthPacking:O5}),e),c.defines.IS_DEPTH_MATERIAL="",c.uniforms=this.uniforms),c}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let c=this._distanceMaterial;return c||(c=this._distanceMaterial=VD(t.isDerivedMaterial?t.getDistanceMaterial():new sS,e),c.defines.IS_DISTANCE_MATERIAL="",c.uniforms=this.uniforms),c}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:c,_distanceMaterial:u}=this;c&&c.dispose(),u&&u.dispose(),t.dispose.call(this)}}};return r[n]=a,new a}function KYe(t,{vertexShader:e,fragmentShader:n},r,i){let{vertexDefs:o,vertexMainIntro:a,vertexMainOutro:s,vertexTransform:l,fragmentDefs:c,fragmentMainIntro:u,fragmentMainOutro:f,fragmentColorTransform:h,customRewriter:p,timeUniform:y}=r;if(o=o||"",a=a||"",s=s||"",c=c||"",u=u||"",f=f||"",(l||p)&&(e=HD(e)),(h||p)&&(n=n.replace(/^[ \t]*#include <((?:tonemapping|encodings|fog|premultiplied_alpha|dithering)_fragment)>/gm,`
//!BEGIN_POST_CHUNK $1
$&
//!END_POST_CHUNK
`),n=HD(n)),p){let g=p({vertexShader:e,fragmentShader:n});e=g.vertexShader,n=g.fragmentShader}if(h){let g=[];n=n.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,v=>(g.push(v),"")),f=`${h}
${g.join(`
`)}
${f}`}if(y){const g=`
uniform float ${y};
`;o=g+o,c=g+c}return l&&(e=`vec3 troika_position_${i};
vec3 troika_normal_${i};
vec2 troika_uv_${i};
${e}
`,o=`${o}
void troikaVertexTransform${i}(inout vec3 position, inout vec3 normal, inout vec2 uv) {
  ${l}
}
`,a=`
troika_position_${i} = vec3(position);
troika_normal_${i} = vec3(normal);
troika_uv_${i} = vec2(uv);
troikaVertexTransform${i}(troika_position_${i}, troika_normal_${i}, troika_uv_${i});
${a}
`,e=e.replace(/\b(position|normal|uv)\b/g,(g,v,b,w)=>/\battribute\s+vec[23]\s+$/.test(w.substr(0,b))?v:`troika_${v}_${i}`),t.map&&t.map.channel>0||(e=e.replace(/\bMAP_UV\b/g,`troika_uv_${i}`))),e=xX(e,i,o,a,s),n=xX(n,i,c,u,f),{vertexShader:e,fragmentShader:n}}function xX(t,e,n,r,i){return(r||i||n)&&(t=t.replace(Ice,`
${n}
void troikaOrigMain${e}() {`),t+=`
void main() {
  ${r}
  troikaOrigMain${e}();
  ${i}
}`),t}function JYe(t,e){return t==="uniforms"?void 0:typeof e=="function"?e.toString():e}let ZYe=0;const wX=new Map;function QYe(t){const e=JSON.stringify(t,JYe);let n=wX.get(e);return n==null&&wX.set(e,n=++ZYe),n}function eXe(t,e,n){const{defaultFontURL:r}=n,i=Object.create(null),o=1/0,a=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,s="[^\\S\\u00A0]",l=new RegExp(`${s}|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]`);function c(w,T){function C(){const P=M=>{console.error(`Failure loading font ${w}${w===r?"":"; trying fallback"}`,M),w!==r&&(w=r,C())};try{const M=new XMLHttpRequest;M.open("get",w,!0),M.responseType="arraybuffer",M.onload=function(){if(M.status>=400)P(new Error(M.statusText));else if(M.status>0)try{const k=t(M.response);T(k)}catch(k){P(k)}},M.onerror=P,M.send()}catch(M){P(M)}}C()}function u(w,T){w||(w=r);let C=i[w];C?C.pending?C.pending.push(T):T(C):(i[w]={pending:[T]},c(w,P=>{let M=i[w].pending;i[w]=P,M.forEach(k=>k(P))}))}function f({text:w="",font:T=r,sdfGlyphSize:C=64,fontSize:P=1,letterSpacing:M=0,lineHeight:k="normal",maxWidth:I=o,direction:U,textAlign:z="left",textIndent:O=0,whiteSpace:B="normal",overflowWrap:$="normal",anchorX:F=0,anchorY:J=0,includeCaretPositions:K=!1,chunkedBoundsSize:Z=8192,colorRanges:H=null},Y,L=!1){const N=g(),V={fontLoad:0,typesetting:0};w.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),w=w.replace(/\r\n/g,`
`).replace(/\r/g,`
`)),P=+P,M=+M,I=+I,k=k||"normal",O=+O,u(T,W=>{const ne=isFinite(I);let se=null,te=null,ie=null,pe=null,de=null,ce=null,he=null,ee=0,xe=0,be=B!=="nowrap";const{ascender:Ae,descender:Ce,unitsPerEm:oe,lineGap:ae,capHeight:Se,xHeight:me}=W;V.fontLoad=g()-N;const ye=g(),Ie=P/oe;k==="normal"&&(k=(Ae-Ce+ae)/oe),k=k*P;const De=(k-(Ae-Ce)*Ie)/2,Ue=-(Ae*Ie+De),$e=Math.min(k,(Ae-Ce)*Ie),we=(Ae+Ce)/2*Ie-$e/2;let fe=O,ke=new v;const Ne=[ke];W.forEachGlyph(w,P,M,(ot,St,dt)=>{const ft=w.charAt(dt),Ee=ot.advanceWidth*Ie,Ve=ke.count;let Xe;if("isEmpty"in ot||(ot.isWhitespace=!!ft&&new RegExp(s).test(ft),ot.canBreakAfter=!!ft&&l.test(ft),ot.isEmpty=ot.xMin===ot.xMax||ot.yMin===ot.yMax||a.test(ft)),!ot.isWhitespace&&!ot.isEmpty&&xe++,be&&ne&&!ot.isWhitespace&&St+Ee+fe>I&&Ve){if(ke.glyphAt(Ve-1).glyphObj.canBreakAfter)Xe=new v,fe=-St;else for(let wt=Ve;wt--;)if(wt===0&&$==="break-word"){Xe=new v,fe=-St;break}else if(ke.glyphAt(wt).glyphObj.canBreakAfter){Xe=ke.splitAt(wt+1);const Bt=Xe.glyphAt(0).x;fe-=Bt;for(let en=Xe.count;en--;)Xe.glyphAt(en).x-=Bt;break}Xe&&(ke.isSoftWrapped=!0,ke=Xe,Ne.push(ke),ee=I)}let et=ke.glyphAt(ke.count);et.glyphObj=ot,et.x=St+fe,et.width=Ee,et.charIndex=dt,ft===`
`&&(ke=new v,Ne.push(ke),fe=-(St+Ee+M*P)+O)}),Ne.forEach(ot=>{for(let St=ot.count;St--;){let{glyphObj:dt,x:ft,width:Ee}=ot.glyphAt(St);if(!dt.isWhitespace){ot.width=ft+Ee,ot.width>ee&&(ee=ot.width);return}}});let qe=0,tt=0;if(F&&(typeof F=="number"?qe=-F:typeof F=="string"&&(qe=-ee*(F==="left"?0:F==="center"?.5:F==="right"?1:p(F)))),J){if(typeof J=="number")tt=-J;else if(typeof J=="string"){let ot=Ne.length*k;tt=J==="top"?0:J==="top-baseline"?-Ue:J==="top-cap"?-Ue-Se*Ie:J==="top-ex"?-Ue-me*Ie:J==="middle"?ot/2:J==="bottom"?ot:J==="bottom-baseline"?ot-De+Ce*Ie:p(J)*ot}}if(!L){const ot=e.getEmbeddingLevels(w,U);se=new Uint16Array(xe),te=new Float32Array(xe*2),ie={},ce=[o,o,-o,-o],he=[];let St=Ue;K&&(de=new Float32Array(w.length*3)),H&&(pe=new Uint8Array(xe*3));let dt=0,ft=-1,Ee=-1,Ve,Xe;if(Ne.forEach((et,wt)=>{let{count:Bt,width:en}=et;if(Bt>0){let Hn=0;for(let gn=Bt;gn--&&et.glyphAt(gn).glyphObj.isWhitespace;)Hn++;let gr=0,Mn=0;if(z==="center")gr=(ee-en)/2;else if(z==="right")gr=ee-en;else if(z==="justify"&&et.isSoftWrapped){let gn=0;for(let un=Bt-Hn;un--;)et.glyphAt(un).glyphObj.isWhitespace&&gn++;Mn=(ee-en)/gn}if(Mn||gr){let gn=0;for(let un=0;un<Bt;un++){let ln=et.glyphAt(un);const Nn=ln.glyphObj;ln.x+=gr+gn,Mn!==0&&Nn.isWhitespace&&un<Bt-Hn&&(gn+=Mn,ln.width+=Mn)}}const Jt=e.getReorderSegments(w,ot,et.glyphAt(0).charIndex,et.glyphAt(et.count-1).charIndex);for(let gn=0;gn<Jt.length;gn++){const[un,ln]=Jt[gn];let Nn=1/0,Zt=-1/0;for(let le=0;le<Bt;le++)if(et.glyphAt(le).charIndex>=un){let Me=le,Pe=le;for(;Pe<Bt;Pe++){let Re=et.glyphAt(Pe);if(Re.charIndex>ln)break;Pe<Bt-Hn&&(Nn=Math.min(Nn,Re.x),Zt=Math.max(Zt,Re.x+Re.width))}for(let Re=Me;Re<Pe;Re++){const ze=et.glyphAt(Re);ze.x=Zt-(ze.x+ze.width-Nn)}break}}let fn;const Ar=gn=>fn=gn;for(let gn=0;gn<Bt;gn++){let un=et.glyphAt(gn);fn=un.glyphObj;const ln=fn.index,Nn=ot.levels[un.charIndex]&1;if(Nn){const Zt=e.getMirroredCharacter(w[un.charIndex]);Zt&&W.forEachGlyph(Zt,0,0,Ar)}if(K){const{charIndex:Zt}=un,le=un.x+qe,Me=un.x+un.width+qe;de[Zt*3]=Nn?Me:le,de[Zt*3+1]=Nn?le:Me,de[Zt*3+2]=St+we+tt;const Pe=Zt-ft;Pe>1&&y(de,ft,Pe),ft=Zt}if(H){const{charIndex:Zt}=un;for(;Zt>Ee;)Ee++,H.hasOwnProperty(Ee)&&(Xe=H[Ee])}if(!fn.isWhitespace&&!fn.isEmpty){const Zt=dt++;ie[ln]||(ie[ln]={path:fn.path,pathBounds:[fn.xMin,fn.yMin,fn.xMax,fn.yMax]});const le=un.x+qe,Me=St+tt;te[Zt*2]=le,te[Zt*2+1]=Me;const Pe=le+fn.xMin*Ie,Re=Me+fn.yMin*Ie,ze=le+fn.xMax*Ie,at=Me+fn.yMax*Ie;Pe<ce[0]&&(ce[0]=Pe),Re<ce[1]&&(ce[1]=Re),ze>ce[2]&&(ce[2]=ze),at>ce[3]&&(ce[3]=at),Zt%Z===0&&(Ve={start:Zt,end:Zt,rect:[o,o,-o,-o]},he.push(Ve)),Ve.end++;const it=Ve.rect;if(Pe<it[0]&&(it[0]=Pe),Re<it[1]&&(it[1]=Re),ze>it[2]&&(it[2]=ze),at>it[3]&&(it[3]=at),se[Zt]=ln,H){const pt=Zt*3;pe[pt]=Xe>>16&255,pe[pt+1]=Xe>>8&255,pe[pt+2]=Xe&255}}}}St-=k}),de){const et=w.length-ft;et>1&&y(de,ft,et)}}V.typesetting=g()-ye,Y({glyphIds:se,glyphPositions:te,glyphData:ie,caretPositions:de,caretHeight:$e,glyphColors:pe,chunkedBounds:he,fontSize:P,unitsPerEm:oe,ascender:Ae*Ie,descender:Ce*Ie,capHeight:Se*Ie,xHeight:me*Ie,lineHeight:k,topBaseline:Ue,blockBounds:[qe,tt-Ne.length*k,qe+ee,tt],visibleBounds:ce,timings:V})})}function h(w,T){f(w,C=>{const[P,M,k,I]=C.blockBounds;T({width:k-P,height:I-M})},{})}function p(w){let T=w.match(/^([\d.]+)%$/),C=T?parseFloat(T[1]):NaN;return isNaN(C)?0:C/100}function y(w,T,C){const P=w[T*3],M=w[T*3+1],k=w[T*3+2],I=(M-P)/C;for(let U=0;U<C;U++){const z=(T+U)*3;w[z]=P+I*U,w[z+1]=P+I*(U+1),w[z+2]=k}}function g(){return(self.performance||Date).now()}function v(){this.data=[]}const b=["glyphObj","x","width","charIndex"];return v.prototype={width:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/b.length)},glyphAt(w){let T=v.flyweight;return T.data=this.data,T.index=w,T},splitAt(w){let T=new v;return T.data=this.data.splice(w*b.length),T}},v.flyweight=b.reduce((w,T,C,P)=>(Object.defineProperty(w,T,{get(){return this.data[this.index*b.length+C]},set(M){this.data[this.index*b.length+C]=M}}),w),{data:null,index:0}),{typeset:f,measure:h,loadFont:u}}const Zp=()=>(self.performance||Date).now(),T2=jce();let bX;function tXe(t,e,n,r,i,o,a,s,l,c,u=!0){return u?rXe(t,e,n,r,i,o,a,s,l,c).then(null,f=>(bX||(console.warn("WebGL SDF generation failed, falling back to JS",f),bX=!0),EX(t,e,n,r,i,o,a,s,l,c))):EX(t,e,n,r,i,o,a,s,l,c)}const uT=[],nXe=5;let WD=0;function Oce(){const t=Zp();for(;uT.length&&Zp()-t<nXe;)uT.shift()();WD=uT.length?setTimeout(Oce,0):0}const rXe=(...t)=>new Promise((e,n)=>{uT.push(()=>{const r=Zp();try{T2.webgl.generateIntoCanvas(...t),e({timing:Zp()-r})}catch(i){n(i)}}),WD||(WD=setTimeout(Oce,0))}),iXe=4,oXe=2e3,SX={};let aXe=0;function EX(t,e,n,r,i,o,a,s,l,c){const u="TroikaTextSDFGenerator_JS_"+aXe++%iXe;let f=SX[u];return f||(f=SX[u]={workerModule:yS({name:u,workerId:u,dependencies:[jce,Zp],init(h,p){const y=h().javascript.generate;return function(...g){const v=p();return{textureData:y(...g),timing:p()-v}}},getTransferables(h){return[h.textureData.buffer]}}),requests:0,idleTimer:null}),f.requests++,clearTimeout(f.idleTimer),f.workerModule(t,e,n,r,i,o).then(({textureData:h,timing:p})=>{const y=Zp(),g=new Uint8Array(h.length*4);for(let v=0;v<h.length;v++)g[v*4+c]=h[v];return T2.webglUtils.renderImageData(a,g,s,l,t,e,1<<3-c),p+=Zp()-y,--f.requests===0&&(f.idleTimer=setTimeout(()=>{VYe(u)},oXe)),{timing:p}})}function sXe(t){t._warm||(T2.webgl.isSupported(t),t._warm=!0)}const lXe=T2.webglUtils.resizeWebGLCanvasWithoutClearing;/*!
Custom build of Typr.ts (https://github.com/fredli74/Typr.ts) for use in Troika text rendering.
Original MIT license applies: https://github.com/fredli74/Typr.ts/blob/master/LICENSE
*/function cXe(){return typeof window>"u"&&(self.window=self),function(t){var e={parse:function(i){var o=e._bin,a=new Uint8Array(i);if(o.readASCII(a,0,4)=="ttcf"){var s=4;o.readUshort(a,s),s+=2,o.readUshort(a,s),s+=2;var l=o.readUint(a,s);s+=4;for(var c=[],u=0;u<l;u++){var f=o.readUint(a,s);s+=4,c.push(e._readFont(a,f))}return c}return[e._readFont(a,0)]},_readFont:function(i,o){var a=e._bin,s=o;a.readFixed(i,o),o+=4;var l=a.readUshort(i,o);o+=2,a.readUshort(i,o),o+=2,a.readUshort(i,o),o+=2,a.readUshort(i,o),o+=2;for(var c=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GPOS","GSUB","SVG "],u={_data:i,_offset:s},f={},h=0;h<l;h++){var p=a.readASCII(i,o,4);o+=4,a.readUint(i,o),o+=4;var y=a.readUint(i,o);o+=4;var g=a.readUint(i,o);o+=4,f[p]={offset:y,length:g}}for(h=0;h<c.length;h++){var v=c[h];f[v]&&(u[v.trim()]=e[v.trim()].parse(i,f[v].offset,f[v].length,u))}return u},_tabOffset:function(i,o,a){for(var s=e._bin,l=s.readUshort(i,a+4),c=a+12,u=0;u<l;u++){var f=s.readASCII(i,c,4);c+=4,s.readUint(i,c),c+=4;var h=s.readUint(i,c);if(c+=4,s.readUint(i,c),c+=4,f==o)return h}return 0}};e._bin={readFixed:function(i,o){return(i[o]<<8|i[o+1])+(i[o+2]<<8|i[o+3])/65540},readF2dot14:function(i,o){return e._bin.readShort(i,o)/16384},readInt:function(i,o){return e._bin._view(i).getInt32(o)},readInt8:function(i,o){return e._bin._view(i).getInt8(o)},readShort:function(i,o){return e._bin._view(i).getInt16(o)},readUshort:function(i,o){return e._bin._view(i).getUint16(o)},readUshorts:function(i,o,a){for(var s=[],l=0;l<a;l++)s.push(e._bin.readUshort(i,o+2*l));return s},readUint:function(i,o){return e._bin._view(i).getUint32(o)},readUint64:function(i,o){return 4294967296*e._bin.readUint(i,o)+e._bin.readUint(i,o+4)},readASCII:function(i,o,a){for(var s="",l=0;l<a;l++)s+=String.fromCharCode(i[o+l]);return s},readUnicode:function(i,o,a){for(var s="",l=0;l<a;l++){var c=i[o++]<<8|i[o++];s+=String.fromCharCode(c)}return s},_tdec:typeof window<"u"&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(i,o,a){var s=e._bin._tdec;return s&&o==0&&a==i.length?s.decode(i):e._bin.readASCII(i,o,a)},readBytes:function(i,o,a){for(var s=[],l=0;l<a;l++)s.push(i[o+l]);return s},readASCIIArray:function(i,o,a){for(var s=[],l=0;l<a;l++)s.push(String.fromCharCode(i[o+l]));return s},_view:function(i){return i._dataView||(i._dataView=i.buffer?new DataView(i.buffer,i.byteOffset,i.byteLength):new DataView(new Uint8Array(i).buffer))}},e._lctf={},e._lctf.parse=function(i,o,a,s,l){var c=e._bin,u={},f=o;c.readFixed(i,o),o+=4;var h=c.readUshort(i,o);o+=2;var p=c.readUshort(i,o);o+=2;var y=c.readUshort(i,o);return o+=2,u.scriptList=e._lctf.readScriptList(i,f+h),u.featureList=e._lctf.readFeatureList(i,f+p),u.lookupList=e._lctf.readLookupList(i,f+y,l),u},e._lctf.readLookupList=function(i,o,a){var s=e._bin,l=o,c=[],u=s.readUshort(i,o);o+=2;for(var f=0;f<u;f++){var h=s.readUshort(i,o);o+=2;var p=e._lctf.readLookupTable(i,l+h,a);c.push(p)}return c},e._lctf.readLookupTable=function(i,o,a){var s=e._bin,l=o,c={tabs:[]};c.ltype=s.readUshort(i,o),o+=2,c.flag=s.readUshort(i,o),o+=2;var u=s.readUshort(i,o);o+=2;for(var f=c.ltype,h=0;h<u;h++){var p=s.readUshort(i,o);o+=2;var y=a(i,f,l+p,c);c.tabs.push(y)}return c},e._lctf.numOfOnes=function(i){for(var o=0,a=0;a<32;a++)(i>>>a&1)!=0&&o++;return o},e._lctf.readClassDef=function(i,o){var a=e._bin,s=[],l=a.readUshort(i,o);if(o+=2,l==1){var c=a.readUshort(i,o);o+=2;var u=a.readUshort(i,o);o+=2;for(var f=0;f<u;f++)s.push(c+f),s.push(c+f),s.push(a.readUshort(i,o)),o+=2}if(l==2){var h=a.readUshort(i,o);for(o+=2,f=0;f<h;f++)s.push(a.readUshort(i,o)),o+=2,s.push(a.readUshort(i,o)),o+=2,s.push(a.readUshort(i,o)),o+=2}return s},e._lctf.getInterval=function(i,o){for(var a=0;a<i.length;a+=3){var s=i[a],l=i[a+1];if(i[a+2],s<=o&&o<=l)return a}return-1},e._lctf.readCoverage=function(i,o){var a=e._bin,s={};s.fmt=a.readUshort(i,o),o+=2;var l=a.readUshort(i,o);return o+=2,s.fmt==1&&(s.tab=a.readUshorts(i,o,l)),s.fmt==2&&(s.tab=a.readUshorts(i,o,3*l)),s},e._lctf.coverageIndex=function(i,o){var a=i.tab;if(i.fmt==1)return a.indexOf(o);if(i.fmt==2){var s=e._lctf.getInterval(a,o);if(s!=-1)return a[s+2]+(o-a[s])}return-1},e._lctf.readFeatureList=function(i,o){var a=e._bin,s=o,l=[],c=a.readUshort(i,o);o+=2;for(var u=0;u<c;u++){var f=a.readASCII(i,o,4);o+=4;var h=a.readUshort(i,o);o+=2;var p=e._lctf.readFeatureTable(i,s+h);p.tag=f.trim(),l.push(p)}return l},e._lctf.readFeatureTable=function(i,o){var a=e._bin,s=o,l={},c=a.readUshort(i,o);o+=2,c>0&&(l.featureParams=s+c);var u=a.readUshort(i,o);o+=2,l.tab=[];for(var f=0;f<u;f++)l.tab.push(a.readUshort(i,o+2*f));return l},e._lctf.readScriptList=function(i,o){var a=e._bin,s=o,l={},c=a.readUshort(i,o);o+=2;for(var u=0;u<c;u++){var f=a.readASCII(i,o,4);o+=4;var h=a.readUshort(i,o);o+=2,l[f.trim()]=e._lctf.readScriptTable(i,s+h)}return l},e._lctf.readScriptTable=function(i,o){var a=e._bin,s=o,l={},c=a.readUshort(i,o);o+=2,l.default=e._lctf.readLangSysTable(i,s+c);var u=a.readUshort(i,o);o+=2;for(var f=0;f<u;f++){var h=a.readASCII(i,o,4);o+=4;var p=a.readUshort(i,o);o+=2,l[h.trim()]=e._lctf.readLangSysTable(i,s+p)}return l},e._lctf.readLangSysTable=function(i,o){var a=e._bin,s={};a.readUshort(i,o),o+=2,s.reqFeature=a.readUshort(i,o),o+=2;var l=a.readUshort(i,o);return o+=2,s.features=a.readUshorts(i,o,l),s},e.CFF={},e.CFF.parse=function(i,o,a){var s=e._bin;(i=new Uint8Array(i.buffer,o,a))[o=0],i[++o],i[++o],i[++o],o++;var l=[];o=e.CFF.readIndex(i,o,l);for(var c=[],u=0;u<l.length-1;u++)c.push(s.readASCII(i,o+l[u],l[u+1]-l[u]));o+=l[l.length-1];var f=[];o=e.CFF.readIndex(i,o,f);var h=[];for(u=0;u<f.length-1;u++)h.push(e.CFF.readDict(i,o+f[u],o+f[u+1]));o+=f[f.length-1];var p=h[0],y=[];o=e.CFF.readIndex(i,o,y);var g=[];for(u=0;u<y.length-1;u++)g.push(s.readASCII(i,o+y[u],y[u+1]-y[u]));if(o+=y[y.length-1],e.CFF.readSubrs(i,o,p),p.CharStrings){o=p.CharStrings,y=[],o=e.CFF.readIndex(i,o,y);var v=[];for(u=0;u<y.length-1;u++)v.push(s.readBytes(i,o+y[u],y[u+1]-y[u]));p.CharStrings=v}if(p.ROS){o=p.FDArray;var b=[];for(o=e.CFF.readIndex(i,o,b),p.FDArray=[],u=0;u<b.length-1;u++){var w=e.CFF.readDict(i,o+b[u],o+b[u+1]);e.CFF._readFDict(i,w,g),p.FDArray.push(w)}o+=b[b.length-1],o=p.FDSelect,p.FDSelect=[];var T=i[o];if(o++,T!=3)throw T;var C=s.readUshort(i,o);for(o+=2,u=0;u<C+1;u++)p.FDSelect.push(s.readUshort(i,o),i[o+2]),o+=3}return p.Encoding&&(p.Encoding=e.CFF.readEncoding(i,p.Encoding,p.CharStrings.length)),p.charset&&(p.charset=e.CFF.readCharset(i,p.charset,p.CharStrings.length)),e.CFF._readFDict(i,p,g),p},e.CFF._readFDict=function(i,o,a){var s;for(var l in o.Private&&(s=o.Private[1],o.Private=e.CFF.readDict(i,s,s+o.Private[0]),o.Private.Subrs&&e.CFF.readSubrs(i,s+o.Private.Subrs,o.Private)),o)["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(l)!=-1&&(o[l]=a[o[l]-426+35])},e.CFF.readSubrs=function(i,o,a){var s=e._bin,l=[];o=e.CFF.readIndex(i,o,l);var c,u=l.length;c=u<1240?107:u<33900?1131:32768,a.Bias=c,a.Subrs=[];for(var f=0;f<l.length-1;f++)a.Subrs.push(s.readBytes(i,o+l[f],l[f+1]-l[f]))},e.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],e.CFF.glyphByUnicode=function(i,o){for(var a=0;a<i.charset.length;a++)if(i.charset[a]==o)return a;return-1},e.CFF.glyphBySE=function(i,o){return o<0||o>255?-1:e.CFF.glyphByUnicode(i,e.CFF.tableSE[o])},e.CFF.readEncoding=function(i,o,a){e._bin;var s=[".notdef"],l=i[o];if(o++,l!=0)throw"error: unknown encoding format: "+l;var c=i[o];o++;for(var u=0;u<c;u++)s.push(i[o+u]);return s},e.CFF.readCharset=function(i,o,a){var s=e._bin,l=[".notdef"],c=i[o];if(o++,c==0)for(var u=0;u<a;u++){var f=s.readUshort(i,o);o+=2,l.push(f)}else{if(c!=1&&c!=2)throw"error: format: "+c;for(;l.length<a;){f=s.readUshort(i,o),o+=2;var h=0;for(c==1?(h=i[o],o++):(h=s.readUshort(i,o),o+=2),u=0;u<=h;u++)l.push(f),f++}}return l},e.CFF.readIndex=function(i,o,a){var s=e._bin,l=s.readUshort(i,o)+1,c=i[o+=2];if(o++,c==1)for(var u=0;u<l;u++)a.push(i[o+u]);else if(c==2)for(u=0;u<l;u++)a.push(s.readUshort(i,o+2*u));else if(c==3)for(u=0;u<l;u++)a.push(16777215&s.readUint(i,o+3*u-1));else if(l!=1)throw"unsupported offset size: "+c+", count: "+l;return(o+=l*c)-1},e.CFF.getCharString=function(i,o,a){var s=e._bin,l=i[o],c=i[o+1];i[o+2],i[o+3],i[o+4];var u=1,f=null,h=null;l<=20&&(f=l,u=1),l==12&&(f=100*l+c,u=2),21<=l&&l<=27&&(f=l,u=1),l==28&&(h=s.readShort(i,o+1),u=3),29<=l&&l<=31&&(f=l,u=1),32<=l&&l<=246&&(h=l-139,u=1),247<=l&&l<=250&&(h=256*(l-247)+c+108,u=2),251<=l&&l<=254&&(h=256*-(l-251)-c-108,u=2),l==255&&(h=s.readInt(i,o+1)/65535,u=5),a.val=h??"o"+f,a.size=u},e.CFF.readCharString=function(i,o,a){for(var s=o+a,l=e._bin,c=[];o<s;){var u=i[o],f=i[o+1];i[o+2],i[o+3],i[o+4];var h=1,p=null,y=null;u<=20&&(p=u,h=1),u==12&&(p=100*u+f,h=2),u!=19&&u!=20||(p=u,h=2),21<=u&&u<=27&&(p=u,h=1),u==28&&(y=l.readShort(i,o+1),h=3),29<=u&&u<=31&&(p=u,h=1),32<=u&&u<=246&&(y=u-139,h=1),247<=u&&u<=250&&(y=256*(u-247)+f+108,h=2),251<=u&&u<=254&&(y=256*-(u-251)-f-108,h=2),u==255&&(y=l.readInt(i,o+1)/65535,h=5),c.push(y??"o"+p),o+=h}return c},e.CFF.readDict=function(i,o,a){for(var s=e._bin,l={},c=[];o<a;){var u=i[o],f=i[o+1];i[o+2],i[o+3],i[o+4];var h=1,p=null,y=null;if(u==28&&(y=s.readShort(i,o+1),h=3),u==29&&(y=s.readInt(i,o+1),h=5),32<=u&&u<=246&&(y=u-139,h=1),247<=u&&u<=250&&(y=256*(u-247)+f+108,h=2),251<=u&&u<=254&&(y=256*-(u-251)-f-108,h=2),u==255)throw y=s.readInt(i,o+1)/65535,h=5,"unknown number";if(u==30){var g=[];for(h=1;;){var v=i[o+h];h++;var b=v>>4,w=15&v;if(b!=15&&g.push(b),w!=15&&g.push(w),w==15)break}for(var T="",C=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],P=0;P<g.length;P++)T+=C[g[P]];y=parseFloat(T)}u<=21&&(p=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][u],h=1,u==12&&(p=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][f],h=2)),p!=null?(l[p]=c.length==1?c[0]:c,c=[]):c.push(y),o+=h}return l},e.cmap={},e.cmap.parse=function(i,o,a){i=new Uint8Array(i.buffer,o,a),o=0;var s=e._bin,l={};s.readUshort(i,o),o+=2;var c=s.readUshort(i,o);o+=2;var u=[];l.tables=[];for(var f=0;f<c;f++){var h=s.readUshort(i,o);o+=2;var p=s.readUshort(i,o);o+=2;var y=s.readUint(i,o);o+=4;var g="p"+h+"e"+p,v=u.indexOf(y);if(v==-1){var b;v=l.tables.length,u.push(y);var w=s.readUshort(i,y);w==0?b=e.cmap.parse0(i,y):w==4?b=e.cmap.parse4(i,y):w==6?b=e.cmap.parse6(i,y):w==12?b=e.cmap.parse12(i,y):console.debug("unknown format: "+w,h,p,y),l.tables.push(b)}if(l[g]!=null)throw"multiple tables for one platform+encoding";l[g]=v}return l},e.cmap.parse0=function(i,o){var a=e._bin,s={};s.format=a.readUshort(i,o),o+=2;var l=a.readUshort(i,o);o+=2,a.readUshort(i,o),o+=2,s.map=[];for(var c=0;c<l-6;c++)s.map.push(i[o+c]);return s},e.cmap.parse4=function(i,o){var a=e._bin,s=o,l={};l.format=a.readUshort(i,o),o+=2;var c=a.readUshort(i,o);o+=2,a.readUshort(i,o),o+=2;var u=a.readUshort(i,o);o+=2;var f=u/2;l.searchRange=a.readUshort(i,o),o+=2,l.entrySelector=a.readUshort(i,o),o+=2,l.rangeShift=a.readUshort(i,o),o+=2,l.endCount=a.readUshorts(i,o,f),o+=2*f,o+=2,l.startCount=a.readUshorts(i,o,f),o+=2*f,l.idDelta=[];for(var h=0;h<f;h++)l.idDelta.push(a.readShort(i,o)),o+=2;for(l.idRangeOffset=a.readUshorts(i,o,f),o+=2*f,l.glyphIdArray=[];o<s+c;)l.glyphIdArray.push(a.readUshort(i,o)),o+=2;return l},e.cmap.parse6=function(i,o){var a=e._bin,s={};s.format=a.readUshort(i,o),o+=2,a.readUshort(i,o),o+=2,a.readUshort(i,o),o+=2,s.firstCode=a.readUshort(i,o),o+=2;var l=a.readUshort(i,o);o+=2,s.glyphIdArray=[];for(var c=0;c<l;c++)s.glyphIdArray.push(a.readUshort(i,o)),o+=2;return s},e.cmap.parse12=function(i,o){var a=e._bin,s={};s.format=a.readUshort(i,o),o+=2,o+=2,a.readUint(i,o),o+=4,a.readUint(i,o),o+=4;var l=a.readUint(i,o);o+=4,s.groups=[];for(var c=0;c<l;c++){var u=o+12*c,f=a.readUint(i,u+0),h=a.readUint(i,u+4),p=a.readUint(i,u+8);s.groups.push([f,h,p])}return s},e.glyf={},e.glyf.parse=function(i,o,a,s){for(var l=[],c=0;c<s.maxp.numGlyphs;c++)l.push(null);return l},e.glyf._parseGlyf=function(i,o){var a=e._bin,s=i._data,l=e._tabOffset(s,"glyf",i._offset)+i.loca[o];if(i.loca[o]==i.loca[o+1])return null;var c={};if(c.noc=a.readShort(s,l),l+=2,c.xMin=a.readShort(s,l),l+=2,c.yMin=a.readShort(s,l),l+=2,c.xMax=a.readShort(s,l),l+=2,c.yMax=a.readShort(s,l),l+=2,c.xMin>=c.xMax||c.yMin>=c.yMax)return null;if(c.noc>0){c.endPts=[];for(var u=0;u<c.noc;u++)c.endPts.push(a.readUshort(s,l)),l+=2;var f=a.readUshort(s,l);if(l+=2,s.length-l<f)return null;c.instructions=a.readBytes(s,l,f),l+=f;var h=c.endPts[c.noc-1]+1;for(c.flags=[],u=0;u<h;u++){var p=s[l];if(l++,c.flags.push(p),(8&p)!=0){var y=s[l];l++;for(var g=0;g<y;g++)c.flags.push(p),u++}}for(c.xs=[],u=0;u<h;u++){var v=(2&c.flags[u])!=0,b=(16&c.flags[u])!=0;v?(c.xs.push(b?s[l]:-s[l]),l++):b?c.xs.push(0):(c.xs.push(a.readShort(s,l)),l+=2)}for(c.ys=[],u=0;u<h;u++)v=(4&c.flags[u])!=0,b=(32&c.flags[u])!=0,v?(c.ys.push(b?s[l]:-s[l]),l++):b?c.ys.push(0):(c.ys.push(a.readShort(s,l)),l+=2);var w=0,T=0;for(u=0;u<h;u++)w+=c.xs[u],T+=c.ys[u],c.xs[u]=w,c.ys[u]=T}else{var C;c.parts=[];do{C=a.readUshort(s,l),l+=2;var P={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(c.parts.push(P),P.glyphIndex=a.readUshort(s,l),l+=2,1&C){var M=a.readShort(s,l);l+=2;var k=a.readShort(s,l);l+=2}else M=a.readInt8(s,l),l++,k=a.readInt8(s,l),l++;2&C?(P.m.tx=M,P.m.ty=k):(P.p1=M,P.p2=k),8&C?(P.m.a=P.m.d=a.readF2dot14(s,l),l+=2):64&C?(P.m.a=a.readF2dot14(s,l),l+=2,P.m.d=a.readF2dot14(s,l),l+=2):128&C&&(P.m.a=a.readF2dot14(s,l),l+=2,P.m.b=a.readF2dot14(s,l),l+=2,P.m.c=a.readF2dot14(s,l),l+=2,P.m.d=a.readF2dot14(s,l),l+=2)}while(32&C);if(256&C){var I=a.readUshort(s,l);for(l+=2,c.instr=[],u=0;u<I;u++)c.instr.push(s[l]),l++}}return c},e.GPOS={},e.GPOS.parse=function(i,o,a,s){return e._lctf.parse(i,o,a,s,e.GPOS.subt)},e.GPOS.subt=function(i,o,a,s){var l=e._bin,c=a,u={};if(u.fmt=l.readUshort(i,a),a+=2,o==1||o==2||o==3||o==7||o==8&&u.fmt<=2){var f=l.readUshort(i,a);a+=2,u.coverage=e._lctf.readCoverage(i,f+c)}if(o==1&&u.fmt==1){var h=l.readUshort(i,a);a+=2;var p=e._lctf.numOfOnes(h);h!=0&&(u.pos=e.GPOS.readValueRecord(i,a,h))}else if(o==2&&u.fmt>=1&&u.fmt<=2){h=l.readUshort(i,a),a+=2;var y=l.readUshort(i,a);a+=2,p=e._lctf.numOfOnes(h);var g=e._lctf.numOfOnes(y);if(u.fmt==1){u.pairsets=[];var v=l.readUshort(i,a);a+=2;for(var b=0;b<v;b++){var w=c+l.readUshort(i,a);a+=2;var T=l.readUshort(i,w);w+=2;for(var C=[],P=0;P<T;P++){var M=l.readUshort(i,w);w+=2,h!=0&&(B=e.GPOS.readValueRecord(i,w,h),w+=2*p),y!=0&&($=e.GPOS.readValueRecord(i,w,y),w+=2*g),C.push({gid2:M,val1:B,val2:$})}u.pairsets.push(C)}}if(u.fmt==2){var k=l.readUshort(i,a);a+=2;var I=l.readUshort(i,a);a+=2;var U=l.readUshort(i,a);a+=2;var z=l.readUshort(i,a);for(a+=2,u.classDef1=e._lctf.readClassDef(i,c+k),u.classDef2=e._lctf.readClassDef(i,c+I),u.matrix=[],b=0;b<U;b++){var O=[];for(P=0;P<z;P++){var B=null,$=null;h!=0&&(B=e.GPOS.readValueRecord(i,a,h),a+=2*p),y!=0&&($=e.GPOS.readValueRecord(i,a,y),a+=2*g),O.push({val1:B,val2:$})}u.matrix.push(O)}}}else{if(o==9&&u.fmt==1){var F=l.readUshort(i,a);a+=2;var J=l.readUint(i,a);if(a+=4,s.ltype==9)s.ltype=F;else if(s.ltype!=F)throw"invalid extension substitution";return e.GPOS.subt(i,s.ltype,c+J)}console.debug("unsupported GPOS table LookupType",o,"format",u.fmt)}return u},e.GPOS.readValueRecord=function(i,o,a){var s=e._bin,l=[];return l.push(1&a?s.readShort(i,o):0),o+=1&a?2:0,l.push(2&a?s.readShort(i,o):0),o+=2&a?2:0,l.push(4&a?s.readShort(i,o):0),o+=4&a?2:0,l.push(8&a?s.readShort(i,o):0),o+=8&a?2:0,l},e.GSUB={},e.GSUB.parse=function(i,o,a,s){return e._lctf.parse(i,o,a,s,e.GSUB.subt)},e.GSUB.subt=function(i,o,a,s){var l=e._bin,c=a,u={};if(u.fmt=l.readUshort(i,a),a+=2,o!=1&&o!=4&&o!=5&&o!=6)return null;if(o==1||o==4||o==5&&u.fmt<=2||o==6&&u.fmt<=2){var f=l.readUshort(i,a);a+=2,u.coverage=e._lctf.readCoverage(i,c+f)}if(o==1&&u.fmt>=1&&u.fmt<=2){if(u.fmt==1)u.delta=l.readShort(i,a),a+=2;else if(u.fmt==2){var h=l.readUshort(i,a);a+=2,u.newg=l.readUshorts(i,a,h),a+=2*u.newg.length}}else if(o==4){u.vals=[],h=l.readUshort(i,a),a+=2;for(var p=0;p<h;p++){var y=l.readUshort(i,a);a+=2,u.vals.push(e.GSUB.readLigatureSet(i,c+y))}}else if(o==5&&u.fmt==2){if(u.fmt==2){var g=l.readUshort(i,a);a+=2,u.cDef=e._lctf.readClassDef(i,c+g),u.scset=[];var v=l.readUshort(i,a);for(a+=2,p=0;p<v;p++){var b=l.readUshort(i,a);a+=2,u.scset.push(b==0?null:e.GSUB.readSubClassSet(i,c+b))}}}else if(o==6&&u.fmt==3){if(u.fmt==3){for(p=0;p<3;p++){h=l.readUshort(i,a),a+=2;for(var w=[],T=0;T<h;T++)w.push(e._lctf.readCoverage(i,c+l.readUshort(i,a+2*T)));a+=2*h,p==0&&(u.backCvg=w),p==1&&(u.inptCvg=w),p==2&&(u.ahedCvg=w)}h=l.readUshort(i,a),a+=2,u.lookupRec=e.GSUB.readSubstLookupRecords(i,a,h)}}else{if(o==7&&u.fmt==1){var C=l.readUshort(i,a);a+=2;var P=l.readUint(i,a);if(a+=4,s.ltype==9)s.ltype=C;else if(s.ltype!=C)throw"invalid extension substitution";return e.GSUB.subt(i,s.ltype,c+P)}console.debug("unsupported GSUB table LookupType",o,"format",u.fmt)}return u},e.GSUB.readSubClassSet=function(i,o){var a=e._bin.readUshort,s=o,l=[],c=a(i,o);o+=2;for(var u=0;u<c;u++){var f=a(i,o);o+=2,l.push(e.GSUB.readSubClassRule(i,s+f))}return l},e.GSUB.readSubClassRule=function(i,o){var a=e._bin.readUshort,s={},l=a(i,o),c=a(i,o+=2);o+=2,s.input=[];for(var u=0;u<l-1;u++)s.input.push(a(i,o)),o+=2;return s.substLookupRecords=e.GSUB.readSubstLookupRecords(i,o,c),s},e.GSUB.readSubstLookupRecords=function(i,o,a){for(var s=e._bin.readUshort,l=[],c=0;c<a;c++)l.push(s(i,o),s(i,o+2)),o+=4;return l},e.GSUB.readChainSubClassSet=function(i,o){var a=e._bin,s=o,l=[],c=a.readUshort(i,o);o+=2;for(var u=0;u<c;u++){var f=a.readUshort(i,o);o+=2,l.push(e.GSUB.readChainSubClassRule(i,s+f))}return l},e.GSUB.readChainSubClassRule=function(i,o){for(var a=e._bin,s={},l=["backtrack","input","lookahead"],c=0;c<l.length;c++){var u=a.readUshort(i,o);o+=2,c==1&&u--,s[l[c]]=a.readUshorts(i,o,u),o+=2*s[l[c]].length}return u=a.readUshort(i,o),o+=2,s.subst=a.readUshorts(i,o,2*u),o+=2*s.subst.length,s},e.GSUB.readLigatureSet=function(i,o){var a=e._bin,s=o,l=[],c=a.readUshort(i,o);o+=2;for(var u=0;u<c;u++){var f=a.readUshort(i,o);o+=2,l.push(e.GSUB.readLigature(i,s+f))}return l},e.GSUB.readLigature=function(i,o){var a=e._bin,s={chain:[]};s.nglyph=a.readUshort(i,o),o+=2;var l=a.readUshort(i,o);o+=2;for(var c=0;c<l-1;c++)s.chain.push(a.readUshort(i,o)),o+=2;return s},e.head={},e.head.parse=function(i,o,a){var s=e._bin,l={};return s.readFixed(i,o),o+=4,l.fontRevision=s.readFixed(i,o),o+=4,s.readUint(i,o),o+=4,s.readUint(i,o),o+=4,l.flags=s.readUshort(i,o),o+=2,l.unitsPerEm=s.readUshort(i,o),o+=2,l.created=s.readUint64(i,o),o+=8,l.modified=s.readUint64(i,o),o+=8,l.xMin=s.readShort(i,o),o+=2,l.yMin=s.readShort(i,o),o+=2,l.xMax=s.readShort(i,o),o+=2,l.yMax=s.readShort(i,o),o+=2,l.macStyle=s.readUshort(i,o),o+=2,l.lowestRecPPEM=s.readUshort(i,o),o+=2,l.fontDirectionHint=s.readShort(i,o),o+=2,l.indexToLocFormat=s.readShort(i,o),o+=2,l.glyphDataFormat=s.readShort(i,o),o+=2,l},e.hhea={},e.hhea.parse=function(i,o,a){var s=e._bin,l={};return s.readFixed(i,o),o+=4,l.ascender=s.readShort(i,o),o+=2,l.descender=s.readShort(i,o),o+=2,l.lineGap=s.readShort(i,o),o+=2,l.advanceWidthMax=s.readUshort(i,o),o+=2,l.minLeftSideBearing=s.readShort(i,o),o+=2,l.minRightSideBearing=s.readShort(i,o),o+=2,l.xMaxExtent=s.readShort(i,o),o+=2,l.caretSlopeRise=s.readShort(i,o),o+=2,l.caretSlopeRun=s.readShort(i,o),o+=2,l.caretOffset=s.readShort(i,o),o+=2,o+=8,l.metricDataFormat=s.readShort(i,o),o+=2,l.numberOfHMetrics=s.readUshort(i,o),o+=2,l},e.hmtx={},e.hmtx.parse=function(i,o,a,s){for(var l=e._bin,c={aWidth:[],lsBearing:[]},u=0,f=0,h=0;h<s.maxp.numGlyphs;h++)h<s.hhea.numberOfHMetrics&&(u=l.readUshort(i,o),o+=2,f=l.readShort(i,o),o+=2),c.aWidth.push(u),c.lsBearing.push(f);return c},e.kern={},e.kern.parse=function(i,o,a,s){var l=e._bin,c=l.readUshort(i,o);if(o+=2,c==1)return e.kern.parseV1(i,o-2,a,s);var u=l.readUshort(i,o);o+=2;for(var f={glyph1:[],rval:[]},h=0;h<u;h++){o+=2,a=l.readUshort(i,o),o+=2;var p=l.readUshort(i,o);o+=2;var y=p>>>8;if((y&=15)!=0)throw"unknown kern table format: "+y;o=e.kern.readFormat0(i,o,f)}return f},e.kern.parseV1=function(i,o,a,s){var l=e._bin;l.readFixed(i,o),o+=4;var c=l.readUint(i,o);o+=4;for(var u={glyph1:[],rval:[]},f=0;f<c;f++){l.readUint(i,o),o+=4;var h=l.readUshort(i,o);o+=2,l.readUshort(i,o),o+=2;var p=h>>>8;if((p&=15)!=0)throw"unknown kern table format: "+p;o=e.kern.readFormat0(i,o,u)}return u},e.kern.readFormat0=function(i,o,a){var s=e._bin,l=-1,c=s.readUshort(i,o);o+=2,s.readUshort(i,o),o+=2,s.readUshort(i,o),o+=2,s.readUshort(i,o),o+=2;for(var u=0;u<c;u++){var f=s.readUshort(i,o);o+=2;var h=s.readUshort(i,o);o+=2;var p=s.readShort(i,o);o+=2,f!=l&&(a.glyph1.push(f),a.rval.push({glyph2:[],vals:[]}));var y=a.rval[a.rval.length-1];y.glyph2.push(h),y.vals.push(p),l=f}return o},e.loca={},e.loca.parse=function(i,o,a,s){var l=e._bin,c=[],u=s.head.indexToLocFormat,f=s.maxp.numGlyphs+1;if(u==0)for(var h=0;h<f;h++)c.push(l.readUshort(i,o+(h<<1))<<1);if(u==1)for(h=0;h<f;h++)c.push(l.readUint(i,o+(h<<2)));return c},e.maxp={},e.maxp.parse=function(i,o,a){var s=e._bin,l={},c=s.readUint(i,o);return o+=4,l.numGlyphs=s.readUshort(i,o),o+=2,c==65536&&(l.maxPoints=s.readUshort(i,o),o+=2,l.maxContours=s.readUshort(i,o),o+=2,l.maxCompositePoints=s.readUshort(i,o),o+=2,l.maxCompositeContours=s.readUshort(i,o),o+=2,l.maxZones=s.readUshort(i,o),o+=2,l.maxTwilightPoints=s.readUshort(i,o),o+=2,l.maxStorage=s.readUshort(i,o),o+=2,l.maxFunctionDefs=s.readUshort(i,o),o+=2,l.maxInstructionDefs=s.readUshort(i,o),o+=2,l.maxStackElements=s.readUshort(i,o),o+=2,l.maxSizeOfInstructions=s.readUshort(i,o),o+=2,l.maxComponentElements=s.readUshort(i,o),o+=2,l.maxComponentDepth=s.readUshort(i,o),o+=2),l},e.name={},e.name.parse=function(i,o,a){var s=e._bin,l={};s.readUshort(i,o),o+=2;var c=s.readUshort(i,o);o+=2,s.readUshort(i,o);for(var u,f=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],h=o+=2,p=0;p<c;p++){var y=s.readUshort(i,o);o+=2;var g=s.readUshort(i,o);o+=2;var v=s.readUshort(i,o);o+=2;var b=s.readUshort(i,o);o+=2;var w=s.readUshort(i,o);o+=2;var T=s.readUshort(i,o);o+=2;var C,P=f[b],M=h+12*c+T;if(y==0)C=s.readUnicode(i,M,w/2);else if(y==3&&g==0)C=s.readUnicode(i,M,w/2);else if(g==0)C=s.readASCII(i,M,w);else if(g==1)C=s.readUnicode(i,M,w/2);else if(g==3)C=s.readUnicode(i,M,w/2);else{if(y!=1)throw"unknown encoding "+g+", platformID: "+y;C=s.readASCII(i,M,w),console.debug("reading unknown MAC encoding "+g+" as ASCII")}var k="p"+y+","+v.toString(16);l[k]==null&&(l[k]={}),l[k][P!==void 0?P:b]=C,l[k]._lang=v}for(var I in l)if(l[I].postScriptName!=null&&l[I]._lang==1033)return l[I];for(var I in l)if(l[I].postScriptName!=null&&l[I]._lang==0)return l[I];for(var I in l)if(l[I].postScriptName!=null&&l[I]._lang==3084)return l[I];for(var I in l)if(l[I].postScriptName!=null)return l[I];for(var I in l){u=I;break}return console.debug("returning name table with languageID "+l[u]._lang),l[u]},e["OS/2"]={},e["OS/2"].parse=function(i,o,a){var s=e._bin.readUshort(i,o);o+=2;var l={};if(s==0)e["OS/2"].version0(i,o,l);else if(s==1)e["OS/2"].version1(i,o,l);else if(s==2||s==3||s==4)e["OS/2"].version2(i,o,l);else{if(s!=5)throw"unknown OS/2 table version: "+s;e["OS/2"].version5(i,o,l)}return l},e["OS/2"].version0=function(i,o,a){var s=e._bin;return a.xAvgCharWidth=s.readShort(i,o),o+=2,a.usWeightClass=s.readUshort(i,o),o+=2,a.usWidthClass=s.readUshort(i,o),o+=2,a.fsType=s.readUshort(i,o),o+=2,a.ySubscriptXSize=s.readShort(i,o),o+=2,a.ySubscriptYSize=s.readShort(i,o),o+=2,a.ySubscriptXOffset=s.readShort(i,o),o+=2,a.ySubscriptYOffset=s.readShort(i,o),o+=2,a.ySuperscriptXSize=s.readShort(i,o),o+=2,a.ySuperscriptYSize=s.readShort(i,o),o+=2,a.ySuperscriptXOffset=s.readShort(i,o),o+=2,a.ySuperscriptYOffset=s.readShort(i,o),o+=2,a.yStrikeoutSize=s.readShort(i,o),o+=2,a.yStrikeoutPosition=s.readShort(i,o),o+=2,a.sFamilyClass=s.readShort(i,o),o+=2,a.panose=s.readBytes(i,o,10),o+=10,a.ulUnicodeRange1=s.readUint(i,o),o+=4,a.ulUnicodeRange2=s.readUint(i,o),o+=4,a.ulUnicodeRange3=s.readUint(i,o),o+=4,a.ulUnicodeRange4=s.readUint(i,o),o+=4,a.achVendID=[s.readInt8(i,o),s.readInt8(i,o+1),s.readInt8(i,o+2),s.readInt8(i,o+3)],o+=4,a.fsSelection=s.readUshort(i,o),o+=2,a.usFirstCharIndex=s.readUshort(i,o),o+=2,a.usLastCharIndex=s.readUshort(i,o),o+=2,a.sTypoAscender=s.readShort(i,o),o+=2,a.sTypoDescender=s.readShort(i,o),o+=2,a.sTypoLineGap=s.readShort(i,o),o+=2,a.usWinAscent=s.readUshort(i,o),o+=2,a.usWinDescent=s.readUshort(i,o),o+=2},e["OS/2"].version1=function(i,o,a){var s=e._bin;return o=e["OS/2"].version0(i,o,a),a.ulCodePageRange1=s.readUint(i,o),o+=4,a.ulCodePageRange2=s.readUint(i,o),o+=4},e["OS/2"].version2=function(i,o,a){var s=e._bin;return o=e["OS/2"].version1(i,o,a),a.sxHeight=s.readShort(i,o),o+=2,a.sCapHeight=s.readShort(i,o),o+=2,a.usDefault=s.readUshort(i,o),o+=2,a.usBreak=s.readUshort(i,o),o+=2,a.usMaxContext=s.readUshort(i,o),o+=2},e["OS/2"].version5=function(i,o,a){var s=e._bin;return o=e["OS/2"].version2(i,o,a),a.usLowerOpticalPointSize=s.readUshort(i,o),o+=2,a.usUpperOpticalPointSize=s.readUshort(i,o),o+=2},e.post={},e.post.parse=function(i,o,a){var s=e._bin,l={};return l.version=s.readFixed(i,o),o+=4,l.italicAngle=s.readFixed(i,o),o+=4,l.underlinePosition=s.readShort(i,o),o+=2,l.underlineThickness=s.readShort(i,o),o+=2,l},e==null&&(e={}),e.U==null&&(e.U={}),e.U.codeToGlyph=function(i,o){var a=i.cmap,s=-1;if(a.p0e4!=null?s=a.p0e4:a.p3e1!=null?s=a.p3e1:a.p1e0!=null?s=a.p1e0:a.p0e3!=null&&(s=a.p0e3),s==-1)throw"no familiar platform and encoding!";var l=a.tables[s];if(l.format==0)return o>=l.map.length?0:l.map[o];if(l.format==4){for(var c=-1,u=0;u<l.endCount.length;u++)if(o<=l.endCount[u]){c=u;break}return c==-1||l.startCount[c]>o?0:65535&(l.idRangeOffset[c]!=0?l.glyphIdArray[o-l.startCount[c]+(l.idRangeOffset[c]>>1)-(l.idRangeOffset.length-c)]:o+l.idDelta[c])}if(l.format==12){if(o>l.groups[l.groups.length-1][1])return 0;for(u=0;u<l.groups.length;u++){var f=l.groups[u];if(f[0]<=o&&o<=f[1])return f[2]+(o-f[0])}return 0}throw"unknown cmap table format "+l.format},e.U.glyphToPath=function(i,o){var a={cmds:[],crds:[]};if(i.SVG&&i.SVG.entries[o]){var s=i.SVG.entries[o];return s==null?a:(typeof s=="string"&&(s=e.SVG.toPath(s),i.SVG.entries[o]=s),s)}if(i.CFF){var l={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:i.CFF.Private?i.CFF.Private.defaultWidthX:0,open:!1},c=i.CFF,u=i.CFF.Private;if(c.ROS){for(var f=0;c.FDSelect[f+2]<=o;)f+=2;u=c.FDArray[c.FDSelect[f+1]].Private}e.U._drawCFF(i.CFF.CharStrings[o],l,c,u,a)}else i.glyf&&e.U._drawGlyf(o,i,a);return a},e.U._drawGlyf=function(i,o,a){var s=o.glyf[i];s==null&&(s=o.glyf[i]=e.glyf._parseGlyf(o,i)),s!=null&&(s.noc>-1?e.U._simpleGlyph(s,a):e.U._compoGlyph(s,o,a))},e.U._simpleGlyph=function(i,o){for(var a=0;a<i.noc;a++){for(var s=a==0?0:i.endPts[a-1]+1,l=i.endPts[a],c=s;c<=l;c++){var u=c==s?l:c-1,f=c==l?s:c+1,h=1&i.flags[c],p=1&i.flags[u],y=1&i.flags[f],g=i.xs[c],v=i.ys[c];if(c==s)if(h){if(!p){e.U.P.moveTo(o,g,v);continue}e.U.P.moveTo(o,i.xs[u],i.ys[u])}else p?e.U.P.moveTo(o,i.xs[u],i.ys[u]):e.U.P.moveTo(o,(i.xs[u]+g)/2,(i.ys[u]+v)/2);h?p&&e.U.P.lineTo(o,g,v):y?e.U.P.qcurveTo(o,g,v,i.xs[f],i.ys[f]):e.U.P.qcurveTo(o,g,v,(g+i.xs[f])/2,(v+i.ys[f])/2)}e.U.P.closePath(o)}},e.U._compoGlyph=function(i,o,a){for(var s=0;s<i.parts.length;s++){var l={cmds:[],crds:[]},c=i.parts[s];e.U._drawGlyf(c.glyphIndex,o,l);for(var u=c.m,f=0;f<l.crds.length;f+=2){var h=l.crds[f],p=l.crds[f+1];a.crds.push(h*u.a+p*u.b+u.tx),a.crds.push(h*u.c+p*u.d+u.ty)}for(f=0;f<l.cmds.length;f++)a.cmds.push(l.cmds[f])}},e.U._getGlyphClass=function(i,o){var a=e._lctf.getInterval(o,i);return a==-1?0:o[a+2]},e.U.getPairAdjustment=function(i,o,a){var s=!1;if(i.GPOS)for(var l=i.GPOS,c=l.lookupList,u=l.featureList,f=[],h=0;h<u.length;h++){var p=u[h];if(p.tag=="kern"){s=!0;for(var y=0;y<p.tab.length;y++)if(!f[p.tab[y]]){f[p.tab[y]]=!0;for(var g=c[p.tab[y]],v=0;v<g.tabs.length;v++)if(g.tabs[v]!=null){var b,w=g.tabs[v];if((!w.coverage||(b=e._lctf.coverageIndex(w.coverage,o))!=-1)&&g.ltype!=1){if(g.ltype==2){var T=null;if(w.fmt==1){var C=w.pairsets[b];for(h=0;h<C.length;h++)C[h].gid2==a&&(T=C[h])}else if(w.fmt==2){var P=e.U._getGlyphClass(o,w.classDef1),M=e.U._getGlyphClass(a,w.classDef2);T=w.matrix[P][M]}if(T){var k=0;return T.val1&&T.val1[2]&&(k+=T.val1[2]),T.val2&&T.val2[0]&&(k+=T.val2[0]),k}}}}}}}if(i.kern&&!s){var I=i.kern.glyph1.indexOf(o);if(I!=-1){var U=i.kern.rval[I].glyph2.indexOf(a);if(U!=-1)return i.kern.rval[I].vals[U]}}return 0},e.U._applySubs=function(i,o,a,s){for(var l=i.length-o-1,c=0;c<a.tabs.length;c++)if(a.tabs[c]!=null){var u,f=a.tabs[c];if(!f.coverage||(u=e._lctf.coverageIndex(f.coverage,i[o]))!=-1){if(a.ltype==1)i[o],f.fmt==1?i[o]=i[o]+f.delta:i[o]=f.newg[u];else if(a.ltype==4)for(var h=f.vals[u],p=0;p<h.length;p++){var y=h[p],g=y.chain.length;if(!(g>l)){for(var v=!0,b=0,w=0;w<g;w++){for(;i[o+b+(1+w)]==-1;)b++;y.chain[w]!=i[o+b+(1+w)]&&(v=!1)}if(v){for(i[o]=y.nglyph,w=0;w<g+b;w++)i[o+w+1]=-1;break}}}else if(a.ltype==5&&f.fmt==2)for(var T=e._lctf.getInterval(f.cDef,i[o]),C=f.cDef[T+2],P=f.scset[C],M=0;M<P.length;M++){var k=P[M],I=k.input;if(!(I.length>l)){for(v=!0,w=0;w<I.length;w++){var U=e._lctf.getInterval(f.cDef,i[o+1+w]);if(T==-1&&f.cDef[U+2]!=I[w]){v=!1;break}}if(v){var z=k.substLookupRecords;for(p=0;p<z.length;p+=2)z[p],z[p+1]}}}else if(a.ltype==6&&f.fmt==3){if(!e.U._glsCovered(i,f.backCvg,o-f.backCvg.length)||!e.U._glsCovered(i,f.inptCvg,o)||!e.U._glsCovered(i,f.ahedCvg,o+f.inptCvg.length))continue;var O=f.lookupRec;for(M=0;M<O.length;M+=2){T=O[M];var B=s[O[M+1]];e.U._applySubs(i,o+T,B,s)}}}}},e.U._glsCovered=function(i,o,a){for(var s=0;s<o.length;s++)if(e._lctf.coverageIndex(o[s],i[a+s])==-1)return!1;return!0},e.U.glyphsToPath=function(i,o,a){for(var s={cmds:[],crds:[]},l=0,c=0;c<o.length;c++){var u=o[c];if(u!=-1){for(var f=c<o.length-1&&o[c+1]!=-1?o[c+1]:0,h=e.U.glyphToPath(i,u),p=0;p<h.crds.length;p+=2)s.crds.push(h.crds[p]+l),s.crds.push(h.crds[p+1]);for(a&&s.cmds.push(a),p=0;p<h.cmds.length;p++)s.cmds.push(h.cmds[p]);a&&s.cmds.push("X"),l+=i.hmtx.aWidth[u],c<o.length-1&&(l+=e.U.getPairAdjustment(i,u,f))}}return s},e.U.P={},e.U.P.moveTo=function(i,o,a){i.cmds.push("M"),i.crds.push(o,a)},e.U.P.lineTo=function(i,o,a){i.cmds.push("L"),i.crds.push(o,a)},e.U.P.curveTo=function(i,o,a,s,l,c,u){i.cmds.push("C"),i.crds.push(o,a,s,l,c,u)},e.U.P.qcurveTo=function(i,o,a,s,l){i.cmds.push("Q"),i.crds.push(o,a,s,l)},e.U.P.closePath=function(i){i.cmds.push("Z")},e.U._drawCFF=function(i,o,a,s,l){for(var c=o.stack,u=o.nStems,f=o.haveWidth,h=o.width,p=o.open,y=0,g=o.x,v=o.y,b=0,w=0,T=0,C=0,P=0,M=0,k=0,I=0,U=0,z=0,O={val:0,size:0};y<i.length;){e.CFF.getCharString(i,y,O);var B=O.val;if(y+=O.size,B=="o1"||B=="o18")c.length%2!=0&&!f&&(h=c.shift()+s.nominalWidthX),u+=c.length>>1,c.length=0,f=!0;else if(B=="o3"||B=="o23")c.length%2!=0&&!f&&(h=c.shift()+s.nominalWidthX),u+=c.length>>1,c.length=0,f=!0;else if(B=="o4")c.length>1&&!f&&(h=c.shift()+s.nominalWidthX,f=!0),p&&e.U.P.closePath(l),v+=c.pop(),e.U.P.moveTo(l,g,v),p=!0;else if(B=="o5")for(;c.length>0;)g+=c.shift(),v+=c.shift(),e.U.P.lineTo(l,g,v);else if(B=="o6"||B=="o7")for(var $=c.length,F=B=="o6",J=0;J<$;J++){var K=c.shift();F?g+=K:v+=K,F=!F,e.U.P.lineTo(l,g,v)}else if(B=="o8"||B=="o24"){$=c.length;for(var Z=0;Z+6<=$;)b=g+c.shift(),w=v+c.shift(),T=b+c.shift(),C=w+c.shift(),g=T+c.shift(),v=C+c.shift(),e.U.P.curveTo(l,b,w,T,C,g,v),Z+=6;B=="o24"&&(g+=c.shift(),v+=c.shift(),e.U.P.lineTo(l,g,v))}else{if(B=="o11")break;if(B=="o1234"||B=="o1235"||B=="o1236"||B=="o1237")B=="o1234"&&(w=v,T=(b=g+c.shift())+c.shift(),z=C=w+c.shift(),M=C,I=v,g=(k=(P=(U=T+c.shift())+c.shift())+c.shift())+c.shift(),e.U.P.curveTo(l,b,w,T,C,U,z),e.U.P.curveTo(l,P,M,k,I,g,v)),B=="o1235"&&(b=g+c.shift(),w=v+c.shift(),T=b+c.shift(),C=w+c.shift(),U=T+c.shift(),z=C+c.shift(),P=U+c.shift(),M=z+c.shift(),k=P+c.shift(),I=M+c.shift(),g=k+c.shift(),v=I+c.shift(),c.shift(),e.U.P.curveTo(l,b,w,T,C,U,z),e.U.P.curveTo(l,P,M,k,I,g,v)),B=="o1236"&&(b=g+c.shift(),w=v+c.shift(),T=b+c.shift(),z=C=w+c.shift(),M=C,k=(P=(U=T+c.shift())+c.shift())+c.shift(),I=M+c.shift(),g=k+c.shift(),e.U.P.curveTo(l,b,w,T,C,U,z),e.U.P.curveTo(l,P,M,k,I,g,v)),B=="o1237"&&(b=g+c.shift(),w=v+c.shift(),T=b+c.shift(),C=w+c.shift(),U=T+c.shift(),z=C+c.shift(),P=U+c.shift(),M=z+c.shift(),k=P+c.shift(),I=M+c.shift(),Math.abs(k-g)>Math.abs(I-v)?g=k+c.shift():v=I+c.shift(),e.U.P.curveTo(l,b,w,T,C,U,z),e.U.P.curveTo(l,P,M,k,I,g,v));else if(B=="o14"){if(c.length>0&&!f&&(h=c.shift()+a.nominalWidthX,f=!0),c.length==4){var H=c.shift(),Y=c.shift(),L=c.shift(),N=c.shift(),V=e.CFF.glyphBySE(a,L),W=e.CFF.glyphBySE(a,N);e.U._drawCFF(a.CharStrings[V],o,a,s,l),o.x=H,o.y=Y,e.U._drawCFF(a.CharStrings[W],o,a,s,l)}p&&(e.U.P.closePath(l),p=!1)}else if(B=="o19"||B=="o20")c.length%2!=0&&!f&&(h=c.shift()+s.nominalWidthX),u+=c.length>>1,c.length=0,f=!0,y+=u+7>>3;else if(B=="o21")c.length>2&&!f&&(h=c.shift()+s.nominalWidthX,f=!0),v+=c.pop(),g+=c.pop(),p&&e.U.P.closePath(l),e.U.P.moveTo(l,g,v),p=!0;else if(B=="o22")c.length>1&&!f&&(h=c.shift()+s.nominalWidthX,f=!0),g+=c.pop(),p&&e.U.P.closePath(l),e.U.P.moveTo(l,g,v),p=!0;else if(B=="o25"){for(;c.length>6;)g+=c.shift(),v+=c.shift(),e.U.P.lineTo(l,g,v);b=g+c.shift(),w=v+c.shift(),T=b+c.shift(),C=w+c.shift(),g=T+c.shift(),v=C+c.shift(),e.U.P.curveTo(l,b,w,T,C,g,v)}else if(B=="o26")for(c.length%2&&(g+=c.shift());c.length>0;)b=g,w=v+c.shift(),g=T=b+c.shift(),v=(C=w+c.shift())+c.shift(),e.U.P.curveTo(l,b,w,T,C,g,v);else if(B=="o27")for(c.length%2&&(v+=c.shift());c.length>0;)w=v,T=(b=g+c.shift())+c.shift(),C=w+c.shift(),g=T+c.shift(),v=C,e.U.P.curveTo(l,b,w,T,C,g,v);else if(B=="o10"||B=="o29"){var ne=B=="o10"?s:a;if(c.length==0)console.debug("error: empty stack");else{var se=c.pop(),te=ne.Subrs[se+ne.Bias];o.x=g,o.y=v,o.nStems=u,o.haveWidth=f,o.width=h,o.open=p,e.U._drawCFF(te,o,a,s,l),g=o.x,v=o.y,u=o.nStems,f=o.haveWidth,h=o.width,p=o.open}}else if(B=="o30"||B=="o31"){var ie=c.length,pe=(Z=0,B=="o31");for(Z+=ie-($=-3&ie);Z<$;)pe?(w=v,T=(b=g+c.shift())+c.shift(),v=(C=w+c.shift())+c.shift(),$-Z==5?(g=T+c.shift(),Z++):g=T,pe=!1):(b=g,w=v+c.shift(),T=b+c.shift(),C=w+c.shift(),g=T+c.shift(),$-Z==5?(v=C+c.shift(),Z++):v=C,pe=!0),e.U.P.curveTo(l,b,w,T,C,g,v),Z+=4}else{if((B+"").charAt(0)=="o")throw console.debug("Unknown operation: "+B,i),B;c.push(B)}}}o.x=g,o.y=v,o.nStems=u,o.haveWidth=f,o.width=h,o.open=p};var n=e,r={Typr:n};return t.Typr=n,t.default=r,Object.defineProperty(t,"__esModule",{value:!0}),t}({}).Typr}/*!
Custom bundle of woff2otf (https://github.com/arty-name/woff2otf) with fflate
(https://github.com/101arrowz/fflate) for use in Troika text rendering. 
Original licenses apply: 
- fflate: https://github.com/101arrowz/fflate/blob/master/LICENSE (MIT)
- woff2otf.js: https://github.com/arty-name/woff2otf/blob/master/woff2otf.js (Apache2)
*/function uXe(){return function(t){var e=Uint8Array,n=Uint16Array,r=Uint32Array,i=new e([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),o=new e([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),a=new e([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=function(B,$){for(var F=new n(31),J=0;J<31;++J)F[J]=$+=1<<B[J-1];var K=new r(F[30]);for(J=1;J<30;++J)for(var Z=F[J];Z<F[J+1];++Z)K[Z]=Z-F[J]<<5|J;return[F,K]},l=s(i,2),c=l[0],u=l[1];c[28]=258,u[258]=28;for(var f=s(o,0)[0],h=new n(32768),p=0;p<32768;++p){var y=(43690&p)>>>1|(21845&p)<<1;y=(61680&(y=(52428&y)>>>2|(13107&y)<<2))>>>4|(3855&y)<<4,h[p]=((65280&y)>>>8|(255&y)<<8)>>>1}var g=function(B,$,F){for(var J=B.length,K=0,Z=new n($);K<J;++K)++Z[B[K]-1];var H,Y=new n($);for(K=0;K<$;++K)Y[K]=Y[K-1]+Z[K-1]<<1;{H=new n(1<<$);var L=15-$;for(K=0;K<J;++K)if(B[K])for(var N=K<<4|B[K],V=$-B[K],W=Y[B[K]-1]++<<V,ne=W|(1<<V)-1;W<=ne;++W)H[h[W]>>>L]=N}return H},v=new e(288);for(p=0;p<144;++p)v[p]=8;for(p=144;p<256;++p)v[p]=9;for(p=256;p<280;++p)v[p]=7;for(p=280;p<288;++p)v[p]=8;var b=new e(32);for(p=0;p<32;++p)b[p]=5;var w=g(v,9),T=g(b,5),C=function(B){for(var $=B[0],F=1;F<B.length;++F)B[F]>$&&($=B[F]);return $},P=function(B,$,F){var J=$/8|0;return(B[J]|B[J+1]<<8)>>(7&$)&F},M=function(B,$){var F=$/8|0;return(B[F]|B[F+1]<<8|B[F+2]<<16)>>(7&$)},k=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],I=function(B,$,F){var J=new Error($||k[B]);if(J.code=B,Error.captureStackTrace&&Error.captureStackTrace(J,I),!F)throw J;return J},U=function(B,$,F){var J=B.length;if(!J||F&&!F.l&&J<5)return $||new e(0);var K=!$||F,Z=!F||F.i;F||(F={}),$||($=new e(3*J));var H,Y=function(ft){var Ee=$.length;if(ft>Ee){var Ve=new e(Math.max(2*Ee,ft));Ve.set($),$=Ve}},L=F.f||0,N=F.p||0,V=F.b||0,W=F.l,ne=F.d,se=F.m,te=F.n,ie=8*J;do{if(!W){F.f=L=P(B,N,1);var pe=P(B,N+1,3);if(N+=3,!pe){var de=B[(me=((H=N)/8|0)+(7&H&&1)+4)-4]|B[me-3]<<8,ce=me+de;if(ce>J){Z&&I(0);break}K&&Y(V+de),$.set(B.subarray(me,ce),V),F.b=V+=de,F.p=N=8*ce;continue}if(pe==1)W=w,ne=T,se=9,te=5;else if(pe==2){var he=P(B,N,31)+257,ee=P(B,N+10,15)+4,xe=he+P(B,N+5,31)+1;N+=14;for(var be=new e(xe),Ae=new e(19),Ce=0;Ce<ee;++Ce)Ae[a[Ce]]=P(B,N+3*Ce,7);N+=3*ee;var oe=C(Ae),ae=(1<<oe)-1,Se=g(Ae,oe);for(Ce=0;Ce<xe;){var me,ye=Se[P(B,N,ae)];if(N+=15&ye,(me=ye>>>4)<16)be[Ce++]=me;else{var Ie=0,De=0;for(me==16?(De=3+P(B,N,3),N+=2,Ie=be[Ce-1]):me==17?(De=3+P(B,N,7),N+=3):me==18&&(De=11+P(B,N,127),N+=7);De--;)be[Ce++]=Ie}}var Ue=be.subarray(0,he),$e=be.subarray(he);se=C(Ue),te=C($e),W=g(Ue,se),ne=g($e,te)}else I(1);if(N>ie){Z&&I(0);break}}K&&Y(V+131072);for(var we=(1<<se)-1,fe=(1<<te)-1,ke=N;;ke=N){var Ne=(Ie=W[M(B,N)&we])>>>4;if((N+=15&Ie)>ie){Z&&I(0);break}if(Ie||I(2),Ne<256)$[V++]=Ne;else{if(Ne==256){ke=N,W=null;break}var qe=Ne-254;if(Ne>264){var tt=i[Ce=Ne-257];qe=P(B,N,(1<<tt)-1)+c[Ce],N+=tt}var ot=ne[M(B,N)&fe],St=ot>>>4;if(ot||I(3),N+=15&ot,$e=f[St],St>3&&(tt=o[St],$e+=M(B,N)&(1<<tt)-1,N+=tt),N>ie){Z&&I(0);break}K&&Y(V+131072);for(var dt=V+qe;V<dt;V+=4)$[V]=$[V-$e],$[V+1]=$[V+1-$e],$[V+2]=$[V+2-$e],$[V+3]=$[V+3-$e];V=dt}}F.l=W,F.p=ke,F.b=V,W&&(L=1,F.m=se,F.d=ne,F.n=te)}while(!L);return V==$.length?$:function(ft,Ee,Ve){(Ve==null||Ve>ft.length)&&(Ve=ft.length);var Xe=new(ft instanceof n?n:ft instanceof r?r:e)(Ve-Ee);return Xe.set(ft.subarray(Ee,Ve)),Xe}($,0,V)},z=new e(0),O=typeof TextDecoder<"u"&&new TextDecoder;try{O.decode(z,{stream:!0})}catch{}return t.convert_streams=function(B){var $=new DataView(B),F=0;function J(){var he=$.getUint16(F);return F+=2,he}function K(){var he=$.getUint32(F);return F+=4,he}function Z(he){de.setUint16(ce,he),ce+=2}function H(he){de.setUint32(ce,he),ce+=4}for(var Y={signature:K(),flavor:K(),length:K(),numTables:J(),reserved:J(),totalSfntSize:K(),majorVersion:J(),minorVersion:J(),metaOffset:K(),metaLength:K(),metaOrigLength:K(),privOffset:K(),privLength:K()},L=0;Math.pow(2,L)<=Y.numTables;)L++;L--;for(var N=16*Math.pow(2,L),V=16*Y.numTables-N,W=12,ne=[],se=0;se<Y.numTables;se++)ne.push({tag:K(),offset:K(),compLength:K(),origLength:K(),origChecksum:K()}),W+=16;var te,ie=new Uint8Array(12+16*ne.length+ne.reduce(function(he,ee){return he+ee.origLength+4},0)),pe=ie.buffer,de=new DataView(pe),ce=0;return H(Y.flavor),Z(Y.numTables),Z(N),Z(L),Z(V),ne.forEach(function(he){H(he.tag),H(he.origChecksum),H(W),H(he.origLength),he.outOffset=W,(W+=he.origLength)%4!=0&&(W+=4-W%4)}),ne.forEach(function(he){var ee,xe=B.slice(he.offset,he.offset+he.compLength);if(he.compLength!=he.origLength){var be=new Uint8Array(he.origLength);ee=new Uint8Array(xe,2),U(ee,be)}else be=new Uint8Array(xe);ie.set(be,he.outOffset);var Ae=0;(W=he.outOffset+he.origLength)%4!=0&&(Ae=4-W%4),ie.set(new Uint8Array(Ae).buffer,he.outOffset+he.origLength),te=W+Ae}),pe.slice(0,te)},Object.defineProperty(t,"__esModule",{value:!0}),t}({}).convert_streams}function dXe(t,e){const n={M:2,L:2,Q:4,C:6,Z:0},r={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},i=1,o=2,a=4,s=8,l=16,c=32;let u;function f(P){if(!u){const M={R:o,L:i,D:a,C:l,U:c,T:s};u=new Map;for(let k in r){let I=0;r[k].split(",").forEach(U=>{let[z,O]=U.split("+");z=parseInt(z,36),O=O?parseInt(O,36):0,u.set(I+=z,M[k]);for(let B=O;B--;)u.set(++I,M[k])})}}return u.get(P)||c}const h=1,p=2,y=3,g=4,v=[null,"isol","init","fina","medi"];function b(P){const M=new Uint8Array(P.length);let k=c,I=h,U=-1;for(let z=0;z<P.length;z++){const O=P.codePointAt(z);let B=f(O)|0,$=h;B&s||(k&(i|a|l)?B&(o|a|l)?($=y,(I===h||I===y)&&M[U]++):B&(i|c)&&(I===p||I===g)&&M[U]--:k&(o|c)&&(I===p||I===g)&&M[U]--,I=M[z]=$,k=B,U=z,O>65535&&z++)}return M}function w(P,M){const k=[];for(let U=0;U<M.length;U++){const z=M.codePointAt(U);z>65535&&U++,k.push(t.U.codeToGlyph(P,z))}const I=P.GSUB;if(I){const{lookupList:U,featureList:z}=I;let O;const B=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws)$/,$=[];z.forEach(F=>{if(B.test(F.tag))for(let J=0;J<F.tab.length;J++){if($[F.tab[J]])continue;$[F.tab[J]]=!0;const K=U[F.tab[J]],Z=/^(isol|init|fina|medi)$/.test(F.tag);Z&&!O&&(O=b(M));for(let H=0;H<k.length;H++)(!O||!Z||v[O[H]]===F.tag)&&t.U._applySubs(k,H,K,U)}})}return k}function T(...P){for(let M=0;M<P.length;M++)if(typeof P[M]=="number")return P[M]}function C(P){const M=Object.create(null),k=P["OS/2"],I=P.hhea,U=P.head.unitsPerEm,z=T(k&&k.sTypoAscender,I&&I.ascender,U),O={unitsPerEm:U,ascender:z,descender:T(k&&k.sTypoDescender,I&&I.descender,0),capHeight:T(k&&k.sCapHeight,z),xHeight:T(k&&k.sxHeight,z),lineGap:T(k&&k.sTypoLineGap,I&&I.lineGap),forEachGlyph(B,$,F,J){let K=0;const Z=1/O.unitsPerEm*$,H=w(P,B);let Y=0,L=-1;return H.forEach((N,V)=>{if(N!==-1){let W=M[N];if(!W){const{cmds:ne,crds:se}=t.U.glyphToPath(P,N);let te="",ie=0;for(let ee=0,xe=ne.length;ee<xe;ee++){const be=n[ne[ee]];te+=ne[ee];for(let Ae=1;Ae<=be;Ae++)te+=(Ae>1?",":"")+se[ie++]}let pe,de,ce,he;if(se.length){pe=de=1/0,ce=he=-1/0;for(let ee=0,xe=se.length;ee<xe;ee+=2){let be=se[ee],Ae=se[ee+1];be<pe&&(pe=be),Ae<de&&(de=Ae),be>ce&&(ce=be),Ae>he&&(he=Ae)}}else pe=ce=de=he=0;W=M[N]={index:N,advanceWidth:P.hmtx.aWidth[N],xMin:pe,yMin:de,xMax:ce,yMax:he,path:te,pathCommandCount:ne.length}}L!==-1&&(K+=t.U.getPairAdjustment(P,L,N)*Z),J.call(null,W,K,Y),W.advanceWidth&&(K+=W.advanceWidth*Z),F&&(K+=F*$),L=N}Y+=B.codePointAt(Y)>65535?2:1}),K}};return O}return function(M){const k=new Uint8Array(M,0,4),I=t._bin.readASCII(k,0,4);if(I==="wOFF")M=e(M);else if(I==="wOF2")throw new Error("woff2 fonts not supported");return C(t.parse(M)[0])}}const fXe=yS({name:"Typr Font Parser",dependencies:[cXe,uXe,dXe],init(t,e,n){const r=t(),i=e();return n(r,i)}}),$y={defaultFontURL:"https://fonts.gstatic.com/s/roboto/v18/KFOmCnqEu92Fr1Mu4mxM.woff",sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},hXe=new bt;function gy(){return(self.performance||Date).now()}const _X=Object.create(null);function Lce(t,e){t=gXe({},t);const n=gy();if(t.font=yXe(t.font||$y.defaultFontURL),t.text=""+t.text,t.sdfGlyphSize=t.sdfGlyphSize||$y.sdfGlyphSize,t.colorRanges!=null){let f={};for(let h in t.colorRanges)if(t.colorRanges.hasOwnProperty(h)){let p=t.colorRanges[h];typeof p!="number"&&(p=hXe.set(p).getHex()),f[h]=p}t.colorRanges=f}Object.freeze(t);const{textureWidth:r,sdfExponent:i}=$y,{sdfGlyphSize:o}=t,a=r/o*4;let s=_X[o];if(!s){const f=document.createElement("canvas");f.width=r,f.height=o*256/a,s=_X[o]={glyphCount:0,sdfGlyphSize:o,sdfCanvas:f,sdfTexture:new Hi(f,void 0,void 0,void 0,Xr,Xr),contextLost:!1,glyphsByFont:new Map},s.sdfTexture.generateMipmaps=!1,pXe(s)}const{sdfTexture:l,sdfCanvas:c}=s;let u=s.glyphsByFont.get(t.font);u||s.glyphsByFont.set(t.font,u=new Map),xXe(t).then(f=>{const{glyphIds:h,glyphPositions:p,fontSize:y,unitsPerEm:g,timings:v}=f,b=[],w=new Float32Array(h.length*4),T=y/g;let C=0,P=0;const M=gy();h.forEach((O,B)=>{let $=u.get(O);if(!$){const{path:Z,pathBounds:H}=f.glyphData[O],Y=Math.max(H[2]-H[0],H[3]-H[1])/o*($y.sdfMargin*o+.5),L=s.glyphCount++,N=[H[0]-Y,H[1]-Y,H[2]+Y,H[3]+Y];u.set(O,$={path:Z,atlasIndex:L,sdfViewBox:N}),b.push($)}const{sdfViewBox:F}=$,J=p[P++],K=p[P++];w[C++]=J+F[0]*T,w[C++]=K+F[1]*T,w[C++]=J+F[2]*T,w[C++]=K+F[3]*T,h[B]=$.atlasIndex}),v.quads=(v.quads||0)+(gy()-M);const k=gy();v.sdf={};const I=c.height,U=Math.ceil(s.glyphCount/a),z=Math.pow(2,Math.ceil(Math.log2(U*o)));z>I&&(console.info(`Increasing SDF texture size ${I}->${z}`),lXe(c,r,z),l.dispose()),Promise.all(b.map(O=>Dce(O,s,t.gpuAccelerateSDF).then(({timing:B})=>{v.sdf[O.atlasIndex]=B}))).then(()=>{b.length&&!s.contextLost&&(Fce(s),l.needsUpdate=!0),v.sdfTotal=gy()-k,v.total=gy()-n,e(Object.freeze({parameters:t,sdfTexture:l,sdfGlyphSize:o,sdfExponent:i,glyphBounds:w,glyphAtlasIndices:h,glyphColors:f.glyphColors,caretPositions:f.caretPositions,caretHeight:f.caretHeight,chunkedBounds:f.chunkedBounds,ascender:f.ascender,descender:f.descender,lineHeight:f.lineHeight,capHeight:f.capHeight,xHeight:f.xHeight,topBaseline:f.topBaseline,blockBounds:f.blockBounds,visibleBounds:f.visibleBounds,timings:f.timings}))})}),Promise.resolve().then(()=>{s.contextLost||sXe(c)})}function Dce({path:t,atlasIndex:e,sdfViewBox:n},{sdfGlyphSize:r,sdfCanvas:i,contextLost:o},a){if(o)return Promise.resolve({timing:-1});const{textureWidth:s,sdfExponent:l}=$y,c=Math.max(n[2]-n[0],n[3]-n[1]),u=Math.floor(e/4),f=u%(s/r)*r,h=Math.floor(u/(s/r))*r,p=e%4;return tXe(r,r,t,n,c,l,i,f,h,p,a)}function pXe(t){const e=t.sdfCanvas;e.addEventListener("webglcontextlost",n=>{console.log("Context Lost",n),n.preventDefault(),t.contextLost=!0}),e.addEventListener("webglcontextrestored",n=>{console.log("Context Restored",n),t.contextLost=!1;const r=[];t.glyphsByFont.forEach(i=>{i.forEach(o=>{r.push(Dce(o,t,!0))})}),Promise.all(r).then(()=>{Fce(t),t.sdfTexture.needsUpdate=!0})})}function mXe({font:t,characters:e,sdfGlyphSize:n},r){let i=Array.isArray(e)?e.join(`
`):""+e;Lce({font:t,sdfGlyphSize:n,text:i},r)}function gXe(t,e){for(let n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}let H_;function yXe(t){return H_||(H_=typeof document>"u"?{}:document.createElement("a")),H_.href=t,H_.href}function Fce(t){if(typeof createImageBitmap!="function"){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:e,sdfTexture:n}=t,{width:r,height:i}=e,o=t.sdfCanvas.getContext("webgl");let a=n.image.data;(!a||a.length!==r*i*4)&&(a=new Uint8Array(r*i*4),n.image={width:r,height:i,data:a},n.flipY=!1,n.isDataTexture=!0),o.readPixels(0,0,r,i,o.RGBA,o.UNSIGNED_BYTE,a)}}const vXe=yS({name:"Typesetter",dependencies:[$y,fXe,eXe,GYe],init(t,e,n,r){const{defaultFontURL:i}=t;return n(e,r(),{defaultFontURL:i})}}),xXe=yS({name:"Typesetter",dependencies:[vXe],init(t){return function(e){return new Promise(n=>{t.typeset(e,n)})}},getTransferables(t){const e=[t.glyphPositions.buffer,t.glyphIds.buffer];return t.caretPositions&&e.push(t.caretPositions.buffer),t.glyphColors&&e.push(t.glyphColors.buffer),e}}),TX={};function wXe(t){let e=TX[t];if(!e){const n=new Qc(1,1,t,t),r=n.clone(),i=n.attributes,o=r.attributes,a=new Yt,s=i.uv.count;for(let l=0;l<s;l++)o.position.array[l*3]*=-1,o.normal.array[l*3+2]*=-1;["position","normal","uv"].forEach(l=>{a.setAttribute(l,new Dt([...i[l].array,...o[l].array],i[l].itemSize))}),a.setIndex([...n.index.array,...r.index.array.map(l=>l+s)]),a.translate(.5,.5,0),e=TX[t]=a}return e}const bXe="aTroikaGlyphBounds",CX="aTroikaGlyphIndex",SXe="aTroikaGlyphColor";class EXe extends E2{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new Ad,this.boundingBox=new es}computeBoundingSphere(){}computeBoundingBox(){}setSide(e){const n=this.getIndex().count;this.setDrawRange(e===oi?n/2:0,e===vd?n:n/2)}set detail(e){if(e!==this._detail){this._detail=e,(typeof e!="number"||e<1)&&(e=1);let n=wXe(e);["position","normal","uv"].forEach(r=>{this.attributes[r]=n.attributes[r].clone()}),this.setIndex(n.getIndex().clone())}}get detail(){return this._detail}set curveRadius(e){e!==this._curveRadius&&(this._curveRadius=e,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(e,n,r,i,o){wI(this,bXe,e,4),wI(this,CX,n,1),wI(this,SXe,o,3),this._blockBounds=r,this._chunkedBounds=i,this.instanceCount=n.length,this._updateBounds()}_updateBounds(){const e=this._blockBounds;if(e){const{curveRadius:n,boundingBox:r}=this;if(n){const{PI:i,floor:o,min:a,max:s,sin:l,cos:c}=Math,u=i/2,f=i*2,h=Math.abs(n),p=e[0]/h,y=e[2]/h,g=o((p+u)/f)!==o((y+u)/f)?-h:a(l(p)*h,l(y)*h),v=o((p-u)/f)!==o((y-u)/f)?h:s(l(p)*h,l(y)*h),b=o((p+i)/f)!==o((y+i)/f)?h*2:s(h-c(p)*h,h-c(y)*h);r.min.set(g,e[1],n<0?-b:0),r.max.set(v,e[3],n<0?0:b)}else r.min.set(e[0],e[1],0),r.max.set(e[2],e[3],0);r.getBoundingSphere(this.boundingSphere)}}applyClipRect(e){let n=this.getAttribute(CX).count,r=this._chunkedBounds;if(r)for(let i=r.length;i--;){n=r[i].end;let o=r[i].rect;if(o[1]<e.w&&o[3]>e.y&&o[0]<e.z&&o[2]>e.x)break}this.instanceCount=n}}function wI(t,e,n,r){const i=t.getAttribute(e);n?i&&i.array.length===n.length?(i.array.set(n),i.needsUpdate=!0):(t.setAttribute(e,new eh(n,r)),delete t._maxInstanceCount,t.dispose()):i&&t.deleteAttribute(e)}const _Xe=`
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform vec4 uTroikaTotalBounds;
uniform vec4 uTroikaClipRect;
uniform mat3 uTroikaOrient;
uniform bool uTroikaUseGlyphColors;
uniform float uTroikaDistanceOffset;
uniform float uTroikaBlurRadius;
uniform vec2 uTroikaPositionOffset;
uniform float uTroikaCurveRadius;
attribute vec4 aTroikaGlyphBounds;
attribute float aTroikaGlyphIndex;
attribute vec3 aTroikaGlyphColor;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec3 vTroikaGlyphColor;
varying vec2 vTroikaGlyphDimensions;
`,TXe=`
vec4 bounds = aTroikaGlyphBounds;
bounds.xz += uTroikaPositionOffset.x;
bounds.yw -= uTroikaPositionOffset.y;

vec4 outlineBounds = vec4(
  bounds.xy - uTroikaDistanceOffset - uTroikaBlurRadius,
  bounds.zw + uTroikaDistanceOffset + uTroikaBlurRadius
);
vec4 clippedBounds = vec4(
  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),
  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)
);

vec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);

position.xy = mix(bounds.xy, bounds.zw, clippedXY);

uv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);

float rad = uTroikaCurveRadius;
if (rad != 0.0) {
  float angle = position.x / rad;
  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);
  normal.xz = vec2(sin(angle), cos(angle));
}
  
position = uTroikaOrient * position;
normal = uTroikaOrient * normal;

vTroikaGlyphUV = clippedXY.xy;
vTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);


float txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;
vec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;
vec2 txStartUV = txUvPerSquare * vec2(
  mod(floor(aTroikaGlyphIndex / 4.0), txCols),
  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)
);
vTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);
vTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);
`,CXe=`
uniform sampler2D uTroikaSDFTexture;
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform float uTroikaSDFExponent;
uniform float uTroikaDistanceOffset;
uniform float uTroikaFillOpacity;
uniform float uTroikaOutlineOpacity;
uniform float uTroikaBlurRadius;
uniform vec3 uTroikaStrokeColor;
uniform float uTroikaStrokeWidth;
uniform float uTroikaStrokeOpacity;
uniform bool uTroikaSDFDebug;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec2 vTroikaGlyphDimensions;

float troikaSdfValueToSignedDistance(float alpha) {
  // Inverse of exponential encoding in webgl-sdf-generator
  
  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);
  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;
  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);
  return signedDist;
}

float troikaGlyphUvToSdfValue(vec2 glyphUV) {
  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);
  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);
  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1
  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;
}

float troikaGlyphUvToDistance(vec2 uv) {
  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));
}

float troikaGetAADist() {
  
  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300
  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;
  #else
  return vTroikaGlyphDimensions.x / 64.0;
  #endif
}

float troikaGetFragDistValue() {
  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);
  float distance = troikaGlyphUvToDistance(clampedGlyphUV);
 
  // Extrapolate distance when outside bounds:
  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : 
    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);

  

  return distance;
}

float troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {
  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)
  float alpha = step(-distanceOffset, -distance);
  #else

  float alpha = smoothstep(
    distanceOffset + aaDist,
    distanceOffset - aaDist,
    distance
  );
  #endif

  return alpha;
}
`,AXe=`
float aaDist = troikaGetAADist();
float fragDistance = troikaGetFragDistValue();
float edgeAlpha = uTroikaSDFDebug ?
  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :
  troikaGetEdgeAlpha(fragDistance, uTroikaDistanceOffset, max(aaDist, uTroikaBlurRadius));

#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)
vec4 fillRGBA = gl_FragColor;
fillRGBA.a *= uTroikaFillOpacity;
vec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);
if (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;
gl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(
  -uTroikaStrokeWidth - aaDist,
  -uTroikaStrokeWidth + aaDist,
  fragDistance
));
gl_FragColor.a *= edgeAlpha;
#endif

if (edgeAlpha == 0.0) {
  discard;
}
`;function MXe(t){const e=VD(t,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new rt},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new Kn(0,0,0,0)},uTroikaClipRect:{value:new Kn(0,0,0,0)},uTroikaDistanceOffset:{value:0},uTroikaOutlineOpacity:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new rt},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new bt},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new zi},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:_Xe,vertexTransform:TXe,fragmentDefs:CXe,fragmentColorTransform:AXe,customRewriter({vertexShader:n,fragmentShader:r}){let i=/\buniform\s+vec3\s+diffuse\b/;return i.test(r)&&(r=r.replace(i,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),i.test(n)||(n=n.replace(Ice,`uniform vec3 diffuse;
$&
vTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;
`))),{vertexShader:n,fragmentShader:r}}});return e.transparent=!0,Object.defineProperties(e,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),e}const Az=new lu({color:16777215,side:vd,transparent:!0}),AX=8421504,MX=new Ut,V_=new ge,bI=new ge,pw=[],PXe=new ge,SI="+x+y";function PX(t){return Array.isArray(t)?t[0]:t}let zce=()=>{const t=new Kr(new Qc(1,1),Az);return zce=()=>t,t},Uce=()=>{const t=new Kr(new Qc(1,1,32,1),Az);return Uce=()=>t,t};const kXe={type:"syncstart"},NXe={type:"synccomplete"},Bce=["font","fontSize","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],RXe=Bce.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");let $ce=class extends Kr{constructor(){const e=new EXe;super(e,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.fontSize=.1,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=AX,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=SI,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(e){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(e):(this._isSyncing=!0,this.dispatchEvent(kXe),Lce({text:this.text,font:this.font,fontSize:this.fontSize||.1,letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF},n=>{this._isSyncing=!1,this._textRenderInfo=n,this.geometry.updateGlyphs(n.glyphBounds,n.glyphAtlasIndices,n.blockBounds,n.chunkedBounds,n.glyphColors);const r=this._queuedSyncs;r&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{r.forEach(i=>i&&i())})),this.dispatchEvent(NXe),e&&e()})))}onBeforeRender(e,n,r,i,o,a){this.sync(),o.isTroikaTextMaterial&&this._prepareForRender(o),o._hadOwnSide=o.hasOwnProperty("side"),this.geometry.setSide(o._actualSide=o.side),o.side=Jf}onAfterRender(e,n,r,i,o,a){o._hadOwnSide?o.side=o._actualSide:delete o.side}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}get material(){let e=this._derivedMaterial;const n=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=Az.clone());if((!e||e.baseMaterial!==n)&&(e=this._derivedMaterial=MXe(n),n.addEventListener("dispose",function r(){n.removeEventListener("dispose",r),e.dispose()})),this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY){let r=e._outlineMtl;return r||(r=e._outlineMtl=Object.create(e,{id:{value:e.id+.1}}),r.isTextOutlineMaterial=!0,r.depthWrite=!1,r.map=null,e.addEventListener("dispose",function i(){e.removeEventListener("dispose",i),r.dispose()})),[r,e]}else return e}set material(e){e&&e.isTroikaTextMaterial?(this._derivedMaterial=e,this._baseMaterial=e.baseMaterial):this._baseMaterial=e}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(e){this.geometry.detail=e}get curveRadius(){return this.geometry.curveRadius}set curveRadius(e){this.geometry.curveRadius=e}get customDepthMaterial(){return PX(this.material).getDepthMaterial()}get customDistanceMaterial(){return PX(this.material).getDistanceMaterial()}_prepareForRender(e){const n=e.isTextOutlineMaterial,r=e.uniforms,i=this.textRenderInfo;if(i){const{sdfTexture:s,blockBounds:l}=i;r.uTroikaSDFTexture.value=s,r.uTroikaSDFTextureSize.value.set(s.image.width,s.image.height),r.uTroikaSDFGlyphSize.value=i.sdfGlyphSize,r.uTroikaSDFExponent.value=i.sdfExponent,r.uTroikaTotalBounds.value.fromArray(l),r.uTroikaUseGlyphColors.value=!n&&!!i.glyphColors;let c=0,u=0,f=0,h,p,y,g=0,v=0;if(n){let{outlineWidth:w,outlineOffsetX:T,outlineOffsetY:C,outlineBlur:P,outlineOpacity:M}=this;c=this._parsePercent(w)||0,u=Math.max(0,this._parsePercent(P)||0),h=M,g=this._parsePercent(T)||0,v=this._parsePercent(C)||0}else f=Math.max(0,this._parsePercent(this.strokeWidth)||0),f&&(y=this.strokeColor,r.uTroikaStrokeColor.value.set(y??AX),p=this.strokeOpacity,p==null&&(p=1)),h=this.fillOpacity;r.uTroikaDistanceOffset.value=c,r.uTroikaPositionOffset.value.set(g,v),r.uTroikaBlurRadius.value=u,r.uTroikaStrokeWidth.value=f,r.uTroikaStrokeOpacity.value=p,r.uTroikaFillOpacity.value=h??1,r.uTroikaCurveRadius.value=this.curveRadius||0;let b=this.clipRect;if(b&&Array.isArray(b)&&b.length===4)r.uTroikaClipRect.value.fromArray(b);else{const w=(this.fontSize||.1)*100;r.uTroikaClipRect.value.set(l[0]-w,l[1]-w,l[2]+w,l[3]+w)}this.geometry.applyClipRect(r.uTroikaClipRect.value)}r.uTroikaSDFDebug.value=!!this.debugSDF,e.polygonOffset=!!this.depthOffset,e.polygonOffsetFactor=e.polygonOffsetUnits=this.depthOffset||0;const o=n?this.outlineColor||0:this.color;if(o==null)delete e.color;else{const s=e.hasOwnProperty("color")?e.color:e.color=new bt;(o!==s._input||typeof o=="object")&&s.set(s._input=o)}let a=this.orientation||SI;if(a!==e._orientation){let s=r.uTroikaOrient.value;a=a.replace(/[^-+xyz]/g,"");let l=a!==SI&&a.match(/^([-+])([xyz])([-+])([xyz])$/);if(l){let[,c,u,f,h]=l;V_.set(0,0,0)[u]=c==="-"?1:-1,bI.set(0,0,0)[h]=f==="-"?-1:1,MX.lookAt(PXe,V_.cross(bI),bI),s.setFromMatrix4(MX)}else s.identity();e._orientation=a}}_parsePercent(e){if(typeof e=="string"){let n=e.match(/^(-?[\d.]+)%$/),r=n?parseFloat(n[1]):NaN;e=(isNaN(r)?0:r/100)*this.fontSize}return e}localPositionToTextCoords(e,n=new rt){n.copy(e);const r=this.curveRadius;return r&&(n.x=Math.atan2(e.x,Math.abs(r)-Math.abs(e.z))*Math.abs(r)),n}worldPositionToTextCoords(e,n=new rt){return V_.copy(e),this.localPositionToTextCoords(this.worldToLocal(V_),n)}raycast(e,n){const{textRenderInfo:r,curveRadius:i}=this;if(r){const o=r.blockBounds,a=i?Uce():zce(),s=a.geometry,{position:l,uv:c}=s.attributes;for(let u=0;u<c.count;u++){let f=o[0]+c.getX(u)*(o[2]-o[0]);const h=o[1]+c.getY(u)*(o[3]-o[1]);let p=0;i&&(p=i-Math.cos(f/i)*i,f=Math.sin(f/i)*i),l.setXYZ(u,f,h,p)}s.boundingSphere=this.geometry.boundingSphere,s.boundingBox=this.geometry.boundingBox,a.matrixWorld=this.matrixWorld,a.material.side=this.material.side,pw.length=0,a.raycast(e,pw);for(let u=0;u<pw.length;u++)pw[u].object=this,n.push(pw[u])}}copy(e){const n=this.geometry;return super.copy(e),this.geometry=n,RXe.forEach(r=>{this[r]=e[r]}),this}clone(){return new this.constructor().copy(this)}};Bce.forEach(t=>{const e="_private_"+t;Object.defineProperty($ce.prototype,t,{get(){return this[e]},set(n){n!==this[e]&&(this[e]=n,this._needsSync=!0)}})});const jXe=_.forwardRef(({sdfGlyphSize:t=64,anchorX:e="center",anchorY:n="middle",font:r,fontSize:i=1,children:o,characters:a,onSync:s,...l},c)=>{const u=Gu(({invalidate:y})=>y),[f]=_.useState(()=>new $ce),[h,p]=_.useMemo(()=>{const y=[];let g="";return _.Children.forEach(o,v=>{typeof v=="string"||typeof v=="number"?g+=v:y.push(v)}),[y,g]},[o]);return pce(()=>new Promise(y=>mXe({font:r,characters:a},y)),["troika-text",r,a]),_.useLayoutEffect(()=>void f.sync(()=>{u(),s&&s(f)})),_.useEffect(()=>()=>f.dispose(),[f]),_.createElement("primitive",yC({object:f,ref:c,font:r,text:p,anchorX:e,anchorY:n,fontSize:i,sdfGlyphSize:t},l),h)}),IXe=_.forwardRef(({makeDefault:t,camera:e,regress:n,domElement:r,enableDamping:i=!0,keyEvents:o=!1,onChange:a,onStart:s,onEnd:l,...c},u)=>{const f=Gu(M=>M.invalidate),h=Gu(M=>M.camera),p=Gu(M=>M.gl),y=Gu(M=>M.events),g=Gu(M=>M.setEvents),v=Gu(M=>M.set),b=Gu(M=>M.get),w=Gu(M=>M.performance),T=e||h,C=r||y.connected||p.domElement,P=_.useMemo(()=>new zYe(T),[T]);return V0(()=>{P.enabled&&P.update()},-1),_.useEffect(()=>(o&&P.connect(o===!0?C:o),P.connect(C),()=>void P.dispose()),[o,C,n,P,f]),_.useEffect(()=>{const M=U=>{f(),n&&w.regress(),a&&a(U)},k=U=>{s&&s(U)},I=U=>{l&&l(U)};return P.addEventListener("change",M),P.addEventListener("start",k),P.addEventListener("end",I),()=>{P.removeEventListener("start",k),P.removeEventListener("end",I),P.removeEventListener("change",M)}},[a,s,l,P,f,g]),_.useEffect(()=>{if(t){const M=b().controls;return v({controls:P}),()=>v({controls:M})}},[t,P]),_.createElement("primitive",yC({ref:u,object:P,enableDamping:i},c))});class OXe{constructor(){Mt(this,"fonts",[{name:"Helvetiker",url:"https://threejs.org/examples/fonts/helvetiker_regular.typeface.json",scripts:["latin"],fallback:"Arial, sans-serif"},{name:"Noto Sans Devanagari",url:"https://cdn.jsdelivr.net/gh/mrdoob/three.js@dev/examples/fonts/noto_sans_devanagari_regular.typeface.json",scripts:["devanagari"],fallback:"Noto Sans Devanagari, Arial, sans-serif"}]);Mt(this,"fontCache",new Map);Mt(this,"loadingPromises",new Map)}detectScript(e){return e&&/[\u0900-\u097F]/.test(e)?"devanagari":"latin"}getFontConfig(e){const n=this.detectScript(e),r=this.fonts.find(o=>o.scripts.includes(n)),i=this.fonts.find(o=>o.scripts.includes("latin"));return r||i||this.fonts[0]}async loadFont(e){const n=this.getFontConfig(e);if(this.fontCache.has(n.url))return this.fontCache.get(n.url);if(this.loadingPromises.has(n.url))return this.loadingPromises.get(n.url);const r=this.loadFontFromUrl(n.url);this.loadingPromises.set(n.url,r);try{const i=await r;return this.fontCache.set(n.url,i),this.loadingPromises.delete(n.url),console.log(`[EnhancedFontService] Successfully loaded font: ${n.name}`),i}catch(i){throw this.loadingPromises.delete(n.url),console.error(`[EnhancedFontService] Failed to load font: ${n.name}`,i),i}}async loadFontFromUrl(e){return new Promise((n,r)=>{new window.THREE.FontLoader().load(e,o=>n(o),void 0,o=>r(o))})}getFallbackFont(e){return this.getFontConfig(e).fallback||"Arial, sans-serif"}isComplexScript(e){return this.detectScript(e)!=="latin"}}const GD=new OXe,LXe=({text:t,position:e,color:n="#000000",size:r=.4,visible:i=!0,renderOrder:o=10,bold:a=!1,maxWidth:s=25,enableWrapping:l=!1})=>{const c=_.useRef(null),[u,f]=_.useState(null),[h]=_.useState(()=>!t||typeof t!="string"?"Node":t.trim()||"Node");if(_.useEffect(()=>{const g=document.createElement("canvas"),v=g.getContext("2d");if(!v)return;const b=h.split(`
`).filter(z=>z.trim().length>0),w=b.length,T=512;g.width=T,g.height=T;const C=GD.getFallbackFont(h),P=Math.floor(T*.12);console.log(`[CanvasTextRenderer] PLAN IMPLEMENTATION: Using fontSize: ${P}px for size prop: ${r}, lines: ${w}`),v.fillStyle="rgba(255, 255, 255, 0)",v.fillRect(0,0,g.width,g.height),v.fillStyle=n,v.font=`${a?"bold":"normal"} ${P}px ${C}`,v.textAlign="center",v.textBaseline="middle",v.imageSmoothingEnabled=!0,v.imageSmoothingQuality="high";const M=P*1.2,k=w*M,I=g.height/2-k/2+M/2;b.forEach((z,O)=>{const B=I+O*M;n!=="#000000"&&(v.strokeStyle="#000000",v.lineWidth=Math.max(1,r*.8),v.strokeText(z,g.width/2,B)),v.fillText(z,g.width/2,B)});const U=new G5(g);return U.needsUpdate=!0,U.generateMipmaps=!1,U.minFilter=Xr,U.magFilter=Xr,U.format=ro,f(U),console.log(`[CanvasTextRenderer] PLAN IMPLEMENTATION: Created crisp texture for: "${h}" (${w} lines) with color: ${n}, NO stroke for black text`),()=>{U.dispose()}},[h,n,a,r]),V0(({camera:g})=>{if(c.current&&i)try{c.current.quaternion.copy(g.quaternion),c.current.material&&(c.current.material.depthTest=!1,c.current.renderOrder=o)}catch(v){console.warn("[CanvasTextRenderer] Billboard error:",v)}}),!i||!u)return null;const p=r*2,y=r*2;return console.log(`[CanvasTextRenderer] PLAN IMPLEMENTATION: Using consistent plane dimensions: ${p} x ${y} for size prop: ${r}`),d.jsxs("mesh",{ref:c,position:e,renderOrder:o,children:[d.jsx("planeGeometry",{args:[p,y]}),d.jsx("meshBasicMaterial",{map:u,transparent:!0,alphaTest:.1,depthTest:!1,opacity:1,premultipliedAlpha:!1})]})};class DXe extends la{constructor(e){super(e)}load(e,n,r,i){const o=this,a=new sc(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(o.withCredentials),a.load(e,function(s){let l;try{l=JSON.parse(s)}catch{console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),l=JSON.parse(s.substring(65,s.length-2))}const c=o.parse(l);n&&n(c)},r,i)}parse(e){return new Hce(e)}}class Hce{constructor(e){this.type="Font",this.data=e}generateShapes(e,n=100){const r=[],i=FXe(e,n,this.data);for(let o=0,a=i.length;o<a;o++)Array.prototype.push.apply(r,i[o].toShapes());return r}}function FXe(t,e,n){const r=Array.from(t),i=e/n.resolution,o=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*i,a=[];let s=0,l=0;for(let c=0;c<r.length;c++){const u=r[c];if(u===`
`)s=0,l-=o;else{const f=zXe(u,i,s,l,n);s+=f.offsetX,a.push(f.path)}}return a}function zXe(t,e,n,r,i){const o=i.glyphs[t]||i.glyphs["?"];if(!o){console.error('THREE.Font: character "'+t+'" does not exists in font family '+i.familyName+".");return}const a=new uce;let s,l,c,u,f,h,p,y;if(o.o){const g=o._cachedOutline||(o._cachedOutline=o.o.split(" "));for(let v=0,b=g.length;v<b;)switch(g[v++]){case"m":s=g[v++]*e+n,l=g[v++]*e+r,a.moveTo(s,l);break;case"l":s=g[v++]*e+n,l=g[v++]*e+r,a.lineTo(s,l);break;case"q":c=g[v++]*e+n,u=g[v++]*e+r,f=g[v++]*e+n,h=g[v++]*e+r,a.quadraticCurveTo(f,h,c,u);break;case"b":c=g[v++]*e+n,u=g[v++]*e+r,f=g[v++]*e+n,h=g[v++]*e+r,p=g[v++]*e+n,y=g[v++]*e+r,a.bezierCurveTo(f,h,p,y,c,u);break}}return{offsetX:o.ha*e,path:a}}Hce.prototype.isFont=!0;class UXe{constructor(){Mt(this,"fonts",[{name:"Helvetiker",url:"https://threejs.org/examples/fonts/helvetiker_regular.typeface.json",scripts:["latin"]},{name:"Noto Sans Devanagari",url:"https://cdn.jsdelivr.net/gh/mrdoob/three.js@dev/examples/fonts/noto_sans_devanagari_regular.typeface.json",scripts:["devanagari"]}])}detectScript(e){return e&&/[\u0900-\u097F]/.test(e)?"devanagari":"latin"}getFontUrl(e){const n=this.detectScript(e),r=this.fonts.find(a=>a.scripts.includes(n)),i=this.fonts.find(a=>a.scripts.includes("latin")),o=(r==null?void 0:r.url)||(i==null?void 0:i.url)||this.fonts[0].url;return console.log(`[SimplifiedFontService] Text: "${e}" -> Script: ${n} -> URL: ${o}`),o}}const BXe=new UXe,Vce=({text:t,position:e,color:n="#000000",size:r=.4,visible:i=!0,renderOrder:o=10,bold:a=!1,outlineWidth:s=.02,outlineColor:l="#f5f5f5",maxWidth:c=25,enableWrapping:u=!1})=>{const f=_.useRef(null),[h]=_.useState(()=>!t||typeof t!="string"?"Node":t.trim()||"Node"),p=BXe.getFontUrl(h),y=Tz(DXe,p);if(V0(({camera:T})=>{if(f.current&&i)try{f.current.quaternion.copy(T.quaternion),f.current.material&&(f.current.material.depthTest=!1,f.current.renderOrder=o)}catch(C){console.warn("[SimpleText] Billboard error:",C)}}),!i||!y)return null;const g=h.includes(`
`),v=n!=="#000000",b=v?s:0,w=v?n==="#ffffff"?"#000000":l:void 0;return console.log(`[SimpleText] FIXED FONT SIZE IMPLEMENTATION: Rendering "${h}" with FIXED fontSize: ${r}, color: ${n}, NO OUTLINE for black text: ${!v}, frustumCulled: false, sizeAttenuation: false`),d.jsx(jXe,{ref:f,position:e,color:n,fontSize:r,anchorX:"center",anchorY:"middle",maxWidth:u?c:void 0,textAlign:"center",font:y,fontWeight:a?"bold":"normal","material-transparent":!0,"material-depthTest":!1,"material-opacity":1,"material-sizeAttenuation":!1,renderOrder:o,outlineWidth:b,outlineColor:w,whiteSpace:u||g?"normal":"nowrap",lineHeight:1.2,frustumCulled:!1,children:h})},$Xe=(t,e=18,n=3)=>{if(!t||typeof t!="string")return{lines:["Node"],totalLines:1,longestLineLength:4};const r=t.trim();if(r.length===0)return{lines:["Node"],totalLines:1,longestLineLength:4};if(r.length<=e)return{lines:[r],totalLines:1,longestLineLength:r.length};const i=[],o=r.split(/\s+/);let a="";for(const l of o){if(a.length+l.length+1>e)if(a.length>0&&(i.push(a.trim()),a=""),l.length>e){const c=HXe(l,e);if(i.push(...c.slice(0,n-i.length)),i.length>=n)break}else a=l;else a=a.length>0?`${a} ${l}`:l;if(i.length>=n)break}if(a.length>0&&i.length<n&&i.push(a.trim()),i.length===n&&o.length>i.join(" ").split(" ").length){const l=i[i.length-1];l.length>e-3?i[i.length-1]=l.substring(0,e-3)+"...":i[i.length-1]=l+"..."}const s=Math.max(...i.map(l=>l.length));return{lines:i,totalLines:i.length,longestLineLength:s}},HXe=(t,e)=>{const n=[];let r=t;for(;r.length>e;){const i=VXe(r,e);i>0?(n.push(r.substring(0,i)),r=r.substring(i)):(n.push(r.substring(0,e)),r=r.substring(e))}return r.length>0&&n.push(r),n},VXe=(t,e)=>{const n=["-","_","."];let r=-1;for(let i=Math.min(e,t.length)-1;i>0;i--)if(n.includes(t[i])){r=i+1;break}return r},WXe=(t,e=.4)=>{const r=t.longestLineLength*.6*e,i=e*.5;return Math.max(r+i,e*5)},GXe=({text:t,position:e,color:n="#000000",size:r=.4,visible:i=!0,renderOrder:o=10,bold:a=!1,outlineWidth:s=0,outlineColor:l,maxWidth:c=25,enableWrapping:u=!1,maxCharsPerLine:f=18,maxLines:h=3})=>{const[p,y]=_.useState(!1),[g,v]=_.useState(!1),[b,w]=_.useState(!1),[T,C]=_.useState(""),[P,M]=_.useState(c);return _.useEffect(()=>{(async()=>{try{let I=t,U=c;if(u){const $=$Xe(t,f,h);I=$.lines.join(`
`),U=WXe($,r),console.log(`[SmartTextRenderer] Text wrapped: "${t}" -> "${I}" (${$.totalLines} lines, maxWidth: ${U})`)}C(I),M(U);const z=GD.isComplexScript(I),O=I.includes(`
`);if(z)console.log(`[SmartTextRenderer] PLAN IMPLEMENTATION: Using Canvas renderer for complex script: "${I}"`),y(!0),v(!0);else{console.log(`[SmartTextRenderer] PLAN IMPLEMENTATION: Using Three.js renderer for: "${I}" (multiline: ${O}, size: ${r}) - CRISP FONT RENDERING`);try{await GD.loadFont(I),y(!1),v(!0),console.log(`[SmartTextRenderer] Three.js font loaded successfully for: "${I}" with crisp rendering`)}catch($){console.warn(`[SmartTextRenderer] Three.js font loading failed for: "${I}", falling back to Canvas`,$),y(!0),v(!0)}}}catch(I){console.error(`[SmartTextRenderer] Error initializing renderer for: "${t}"`,I),w(!0)}})()},[t,r,u,f,h,c]),!i||b||!g?null:(console.log(`[SmartTextRenderer] PLAN IMPLEMENTATION: Using ${p?"Canvas":"Three.js"} renderer for CRISP text: "${T}" with size: ${r}, color: ${n}`),p?d.jsx(LXe,{text:T,position:e,color:n,size:r,visible:i,renderOrder:o,bold:a,maxWidth:P,enableWrapping:u}):d.jsx(Vce,{text:T,position:e,color:n,size:r,visible:i,renderOrder:o,bold:a,outlineWidth:s,outlineColor:l,maxWidth:P,enableWrapping:u}))},qXe=({text:t,position:e,color:n="#000000",size:r=.4,visible:i=!0,renderOrder:o=10,bold:a=!1,outlineWidth:s=0,outlineColor:l,maxWidth:c=25,enableWrapping:u=!1,maxCharsPerLine:f=18,maxLines:h=3,sourceLanguage:p="en",onTranslationComplete:y,coordinatedTranslation:g,useCoordinatedTranslation:v=!1})=>{const{currentLanguage:b,getCachedTranslation:w,translate:T}=In(),[C,P]=_.useState(t),[M,k]=_.useState(!1),[I,U]=_.useState(!1);return _.useEffect(()=>{(async()=>{if(v&&g){console.log(`[TranslatableText3D] ENHANCED APP-LEVEL ATOMIC: Using coordinated translation for "${t}": "${g}"`),P(g),y==null||y(g),U(!0);return}if(!t||b===p){P(t),y==null||y(t),U(!0);return}if(v&&!g){console.log(`[TranslatableText3D] ENHANCED APP-LEVEL FALLBACK: No coordinated translation available for "${t}", checking app-level cache with improved error handling`);const O=w(t);if(O){console.log(`[TranslatableText3D] ENHANCED APP-LEVEL FALLBACK: Using app-level cached translation for "${t}": "${O}"`),P(O),y==null||y(O),U(!0);return}console.log(`[TranslatableText3D] ENHANCED APP-LEVEL FALLBACK: No cache available, using original text for "${t}" to maintain consistency`),P(t),y==null||y(t),U(!0);return}if(!v){const O=w(t);if(O){console.log(`[TranslatableText3D] ENHANCED APP-LEVEL: Using app-level cached translation for "${t}": "${O}"`),P(O),y==null||y(O),U(!0);return}if(I){console.log(`[TranslatableText3D] ENHANCED APP-LEVEL: Translation already attempted for "${t}", using original to avoid loops`),P(t),y==null||y(t);return}if(!T){console.log(`[TranslatableText3D] ENHANCED APP-LEVEL: No translation function available, using original text for "${t}"`),P(t),y==null||y(t),U(!0);return}console.log(`[TranslatableText3D] ENHANCED APP-LEVEL: No cache found, translating "${t}" from ${p} to ${b} with enhanced error handling`);try{k(!0);const B=await T(t,p);B&&B!==t?(console.log(`[TranslatableText3D] ENHANCED APP-LEVEL: Translation successful: "${t}" -> "${B}"`),P(B),y==null||y(B)):(console.log(`[TranslatableText3D] ENHANCED APP-LEVEL: Using original text for "${t}" (same as result or null)`),P(t),y==null||y(t))}catch(B){console.error(`[TranslatableText3D] ENHANCED APP-LEVEL: Translation failed for "${t}":`,B),P(t),y==null||y(t)}finally{k(!1),U(!0)}}})()},[t,b,p,T,w,y,I,g,v]),d.jsx(GXe,{text:C,position:e,color:M?"#888888":n,size:r,visible:i,renderOrder:o,bold:a,outlineWidth:s,outlineColor:l,maxWidth:c,enableWrapping:u,maxCharsPerLine:f,maxLines:h})},YXe=({id:t,type:e,position:n,isHighlighted:r,isSelected:i,shouldShowLabel:o,cameraZoom:a=45,themeHex:s,nodeScale:l=1,connectionPercentage:c=0,showPercentage:u=!1,effectiveTheme:f="light",isInstantMode:h=!1,coordinatedTranslation:p})=>{_.useEffect(()=>{const M=k=>{var I,U;((I=k.detail)==null?void 0:I.step)===9&&((U=k.detail)!=null&&U.forceShowLabels)&&console.log(`[DirectNodeLabel] Tutorial step 9 debug: forcing label visibility for ${t}`)};return window.addEventListener("tutorial-soul-net-debug",M),()=>{window.removeEventListener("tutorial-soul-net-debug",M)}},[t,o]),console.log(h?`[DirectNodeLabel] APP-LEVEL INSTANT MODE: ${t} with coordinated translation: "${p}" - NO LOADING DELAY`:`[DirectNodeLabel] APP-LEVEL ENHANCED POSITIONING: ${t} with coordinated translation: "${p}"`);const y=_.useMemo(()=>{const k=1.4*Math.max(.8,Math.min(2.5,l));return console.log(h?`[DirectNodeLabel] APP-LEVEL INSTANT: Enhanced label offset for ${t} (${e}): ${k} (scale: ${l}) - UNIFORM POSITIONING`:`[DirectNodeLabel] APP-LEVEL: Enhanced label offset for ${t} (${e}): ${k} (scale: ${l}) - UNIFORM POSITIONING`),[0,k,0]},[e,l,t,h]),g=_.useMemo(()=>(console.log(h?`[DirectNodeLabel] FIXED FONT SIZE INSTANT: ${t} uses FIXED size ${3.2} (no zoom dependency, no state dependency)`:`[DirectNodeLabel] FIXED FONT SIZE: ${t} uses FIXED size ${3.2} (no zoom dependency, no state dependency)`),3.2),[t,h]),v=_.useMemo(()=>(console.log(`[DirectNodeLabel] FIXED PERCENTAGE SIZE: ${t} uses FIXED percentage size ${.9}`),.9),[t]),b=_.useMemo(()=>{const M=f==="dark"?"#ffffff":"#000000";return console.log(h?`[DirectNodeLabel] APP-LEVEL INSTANT: SOLID TEXT COLOR for ${t}: ${M} (theme: ${f})`:`[DirectNodeLabel] APP-LEVEL: SOLID TEXT COLOR for ${t}: ${M} (theme: ${f})`),M},[f,t,h]),w=_.useMemo(()=>{const M=f==="dark"?"#ffffff":"#000000";return console.log(`[DirectNodeLabel] APP-LEVEL: SOLID PERCENTAGE COLOR for ${t}: ${M} (theme: ${f})`),M},[f,t]),T=[n[0]+y[0],n[1]+y[1],n[2]+y[2]],C=_.useMemo(()=>{const M=(e==="entity"?2:2.5)*l;return[n[0]+M,n[1]+0,n[2]+.5]},[n,e,l]),P=_.useMemo(()=>document.body.getAttribute("data-current-step")==="9"?(console.log(`[DirectNodeLabel] APP-LEVEL: Tutorial step 9 detected, forcing label visibility for ${t}`),!0):o,[o,t]);return!P||!t?(console.log(h?`[DirectNodeLabel] APP-LEVEL INSTANT: Not rendering label for ${t}: shouldShow=${P}, text="${t}"`:`[DirectNodeLabel] APP-LEVEL: Not rendering label for ${t}: shouldShow=${P}, text="${t}"`),null):(u&&c>0&&(h?console.log(`[DirectNodeLabel] APP-LEVEL INSTANT MODE - SIDE POSITIONING - PERCENTAGE: ${t} (${e}) shows ${c}% on the side at`,C,"- NO LOADING DELAY"):console.log(`[DirectNodeLabel] APP-LEVEL ENHANCED SIDE POSITIONING - PERCENTAGE: ${t} (${e}) shows ${c}% on the side at`,C)),h?console.log(`[DirectNodeLabel] FIXED FONT INSTANT MODE - MAIN TEXT: "${t}" at position`,T,"with FIXED size:",g,"color:",b,"- NO LOADING DELAY - APP-LEVEL TRANSLATION"):console.log(`[DirectNodeLabel] FIXED FONT - MAIN TEXT: "${t}" at position`,T,"with FIXED size:",g,"color:",b,"- APP-LEVEL TRANSLATION"),d.jsxs(d.Fragment,{children:[d.jsx(qXe,{text:t,position:T,color:b,size:g,visible:!0,renderOrder:15,bold:r||i,outlineWidth:0,outlineColor:void 0,maxWidth:600,enableWrapping:!0,maxCharsPerLine:18,maxLines:3,sourceLanguage:"en",coordinatedTranslation:p,useCoordinatedTranslation:!!p}),u&&c>0&&d.jsx(Vce,{text:`${c}%`,position:C,color:w,size:v,visible:!0,renderOrder:16,bold:!0,outlineWidth:0,outlineColor:void 0,maxWidth:200,enableWrapping:!1})]}))};function Wce(){const{colorTheme:t,customColor:e}=Zr();switch(t){case"Default":return"#3b82f6";case"Calm":return"#8b5cf6";case"Soothing":return"#FFDEE2";case"Energy":return"#f59e0b";case"Focus":return"#10b981";case"Custom":return e||"#3b82f6";default:return"#3b82f6"}}const XXe=({node:t,isSelected:e,onClick:n,highlightedNodes:r,showLabel:i,dimmed:o,themeHex:a,selectedNodeId:s,cameraZoom:l,isHighlighted:c,connectionPercentage:u=0,showPercentage:f=!1,forceShowLabels:h=!1,effectiveTheme:p="light",isInstantMode:y=!1,getCoordinatedTranslation:g})=>{const v=_.useRef(null);Wce();const[b,w]=_.useState(0),[T,C]=_.useState(!1);_.useEffect(()=>{const B=setTimeout(()=>{C(!0)},100);return()=>clearTimeout(B)},[]);const P=_.useMemo(()=>{if(g){const B=g(t.id);return console.log(y?`[Node] ENHANCED COORDINATED INSTANT: Got coordinated translation for ${t.id}: "${B}" - NO LOADING DELAY`:`[Node] ENHANCED COORDINATED: Got coordinated translation for ${t.id}: "${B}"`),B}console.log(y?`[Node] ENHANCED COORDINATED INSTANT: No coordinated translation function available for ${t.id} - NO LOADING DELAY`:`[Node] ENHANCED COORDINATED: No coordinated translation function available for ${t.id}`)},[t.id,g,y]),M=_.useMemo(()=>e?t.type==="entity"?new bt("#14532d"):new bt("#b45309"):c||!o&&!e?t.type==="entity"?new bt("#15803d"):new bt("#d97706"):new bt(o?"#3a3a3a":"#cccccc"),[e,c,o,t.type]),k=_.useMemo(()=>e?1.15*1.6:c?1.15*1.3:o?1.15*.6:1.15,[e,c,o]),I=_.useMemo(()=>e?1:c?.9:o?.05:.8,[e,c,o]);V0((B,$)=>{if(!(!v.current||!T))try{if(w(F=>F+$),c){const F=e?.25:u>0?u*.003:.15,J=Math.sin(b*2.5)*F+1,K=k*J;if(v.current.scale.lerp(new ge(K,K,K),.1),v.current.material instanceof Jp){const Z=e?1+Math.sin(b*3)*.3:.7+(u>0?u*.005:.2)+Math.sin(b*3)*.2;v.current.material.emissiveIntensity=Math.max(0,Math.min(2,Z))}}else{const F=o?k*.8:k;v.current.scale.lerp(new ge(F,F,F),.1),v.current.material instanceof Jp&&(v.current.material.emissiveIntensity=o?0:.1)}v.current.material.color.lerp(M,.1),v.current.material instanceof Jp&&(v.current.material.opacity=I)}catch(F){console.warn("Node pulsing animation error:",F)}});const U=B=>{B.stopPropagation(),n(t.id,B)},z=_.useMemo(()=>o?!1:h||i||e||c,[h,i,e,c,o]);f&&u>0&&console.log(y?`[Node] ENHANCED COORDINATED PULSATING INSTANT MODE: ${t.id} (${t.type}) displays percentage: ${u}% with coordinated translation: "${P}" - NO LOADING DELAY`:`[Node] ENHANCED COORDINATED PULSATING: ${t.id} (${t.type}) should display percentage: ${u}% with coordinated translation: "${P}"`),console.log(y?`[Node] ENHANCED DARKER COLORS INSTANT MODE: Rendering ${t.type} node ${t.id} with ${e?"SELECTED":"DEFAULT"} DARKER ${t.type==="entity"?"GREEN":"GOLDEN"} color, enhanced coordinated translation: "${P}", base scale ${k.toFixed(2)} - NO LOADING DELAY`:`[Node] ENHANCED DARKER COLORS: Rendering ${t.type} node ${t.id} with ${e?"SELECTED":"DEFAULT"} DARKER ${t.type==="entity"?"GREEN":"GOLDEN"} color, enhanced coordinated translation: "${P}", base scale ${k.toFixed(2)}`);const O=()=>t.type==="emotion"?d.jsx("boxGeometry",{args:[1.6,1.6,1.6]}):d.jsx("sphereGeometry",{args:[.8,32,32]});return T?d.jsxs("group",{children:[d.jsxs("mesh",{ref:v,position:t.position,onClick:U,scale:[k,k,k],children:[O(),d.jsx("meshStandardMaterial",{color:M,metalness:.3,roughness:.8,transparent:!0,opacity:I,emissive:M,emissiveIntensity:c?1.2:o?0:.1})]}),z&&d.jsx(YXe,{id:t.id,type:t.type,position:t.position,isHighlighted:c,isSelected:e,shouldShowLabel:z,cameraZoom:l,themeHex:a,nodeScale:k,connectionPercentage:u,showPercentage:f,effectiveTheme:p,isInstantMode:y,coordinatedTranslation:P})]}):null},kX=(t,e,n,r=1)=>{const o=(n==="entity"?.7:.55)*r,a=e.clone().normalize();return t.clone().add(a.multiplyScalar(o))},KXe=({start:t,end:e,value:n,isHighlighted:r,dimmed:i,maxThickness:o=5,startNodeType:a="entity",endNodeType:s="emotion",startNodeScale:l=1,endNodeScale:c=1})=>{const{theme:u}=Zr(),f=_.useRef(null),h=_.useRef(null),p=_.useMemo(()=>{try{const C=new ge(...t),P=new ge(...e),M=P.clone().sub(C),k=C.clone().sub(P),I=kX(C,M,a,l),U=kX(P,k,s,c),z=I.clone().add(U).multiplyScalar(.5),O=.5;return z.y+=O,new pS(I,z,U).getPoints(30)}catch(C){return console.error("Error creating edge points:",C),[new ge(0,0,0),new ge(0,.1,0)]}},[t,e,a,s,l,c]),y=_.useMemo(()=>new Yt().setFromPoints(p),[p]),g=_.useMemo(()=>r?"#ffffff":i?u==="light"?"#4a4a4a":"#3a3a3a":u==="light"?"#555555":"#888888",[r,i,u]),v=_.useMemo(()=>r?.95:i?u==="light"?.06:.05:u==="light"?.25:.08,[r,i,u]);V0(()=>{try{if(!h.current||!h.current.material)return;h.current.material instanceof Vi&&(h.current.material.opacity=v,h.current.material.color.set(g))}catch(C){console.error("Error in Edge useFrame:",C)}});const w=(r?2.5:.3)+n*(r?o*1.5:o*.1),T=_.useMemo(()=>new Vi({color:g,transparent:!0,opacity:v,linewidth:w,depthWrite:!1,depthTest:!0}),[g,v,w]);return d.jsx("group",{ref:f,children:d.jsx("primitive",{object:new eu(y,T),ref:h,renderOrder:10})})},JXe=({data:t,selectedNode:e,onNodeClick:n,themeHex:r,isFullScreen:i,shouldShowLabels:o,getInstantConnectionPercentage:a=()=>0,getInstantTranslation:s=u=>u,getInstantNodeConnections:l=()=>({connectedNodes:[],totalStrength:0,averageStrength:0}),isInstantReady:c=!1})=>{const[u,f]=_.useState(new Set),[h,p]=_.useState(new Set),[y,g]=_.useState(45),{theme:v,systemTheme:b}=Zr(),w=v==="system"?b:v;console.log(`[SimplifiedSoulNetVisualization] COORDINATED THEME: Using app theme context - theme: ${v}, systemTheme: ${b}, effective: ${w}`),console.log(`[SimplifiedSoulNetVisualization] COORDINATED INSTANT MODE: Rendering with ${t.nodes.length} nodes, instantReady: ${c}`),V0(({camera:C})=>{const P=C.position.length();Math.abs(P-y)>.1&&g(P)}),_.useEffect(()=>{if(e){const C=new Set,P=new Set;if(c){const M=l(e);M.connectedNodes.forEach(k=>{C.add(k)}),C.add(e),console.log(`[SimplifiedSoulNetVisualization] COORDINATED INSTANT: Using precomputed connections for ${e}:`,M.connectedNodes)}else t.links.forEach(M=>{(M.source===e||M.target===e)&&(C.add(M.source),C.add(M.target))});t.nodes.forEach(M=>{C.has(M.id)||P.add(M.id)}),f(C),p(P),console.log(`[SimplifiedSoulNetVisualization] COORDINATED ENHANCED HIERARCHY: Selected ${e}, highlighting ${C.size} nodes, dimming ${P.size} nodes`)}else f(new Set),p(new Set)},[e,t.links,t.nodes,c,l]);const T=_.useCallback(C=>t.nodes.find(P=>P.id===C),[t.nodes]);return d.jsxs(d.Fragment,{children:[d.jsx("ambientLight",{intensity:.8}),d.jsx("directionalLight",{position:[10,10,5],intensity:1.2}),d.jsx(IXe,{enablePan:!0,enableZoom:!0,enableRotate:!0,minDistance:15,maxDistance:120,enableDamping:!0,dampingFactor:.05}),t.nodes.map(C=>{const P=u.has(C.id),M=h.has(C.id),k=e&&P&&e!==C.id?a(e,C.id):0,I=e!==null&&P&&e!==C.id&&k>0;return console.log(`[SimplifiedSoulNetVisualization] COORDINATED ENHANCED HIERARCHY: Node ${C.id} - highlighted: ${P}, dimmed: ${M}, percentage: ${k}%`),d.jsx(XXe,{node:C,isSelected:e===C.id,onClick:n,highlightedNodes:u,showLabel:o&&!M,dimmed:M,themeHex:r,selectedNodeId:e,cameraZoom:y,isHighlighted:P,connectionPercentage:k,showPercentage:I,forceShowLabels:!1,effectiveTheme:w,isInstantMode:c,getCoordinatedTranslation:s},C.id)}),t.links.map((C,P)=>{const M=T(C.source),k=T(C.target);if(!M||!k)return console.warn(`[SimplifiedSoulNetVisualization] COORDINATED: Missing node for link: ${C.source} -> ${C.target}`),null;const I=e!==null&&u.has(C.source)&&u.has(C.target),U=e!==null&&(h.has(C.source)||h.has(C.target));return d.jsx(KXe,{start:M.position,end:k.position,value:C.value,isHighlighted:I,dimmed:U,startNodeType:M.type,endNodeType:k.type},`${C.source}-${C.target}-${P}`)})]})};class ZXe extends _.Component{constructor(n){super(n);Mt(this,"retryTimeoutRef",null);Mt(this,"handleRetry",()=>{this.setState({hasError:!1,error:null,errorCount:0})});this.state={hasError:!1,error:null,errorCount:0}}static getDerivedStateFromError(n){return console.error("[RenderingErrorBoundary] Caught error:",n),{hasError:!0,error:n,errorCount:1}}componentDidCatch(n,r){console.error("[RenderingErrorBoundary] Error details:",n,r),this.props.onError&&this.props.onError(n,r),(n.message.includes("removeChild")||n.message.includes("appendChild")||n.message.includes("Three.js")||n.message.includes("WebGL")||this.state.errorCount<3)&&(console.log("[RenderingErrorBoundary] Attempting auto-recovery..."),this.retryTimeoutRef=setTimeout(()=>{this.setState({hasError:!1,error:null})},1e3))}componentWillUnmount(){this.retryTimeoutRef&&clearTimeout(this.retryTimeoutRef)}render(){return this.state.hasError?this.props.fallback||d.jsx("div",{className:"flex items-center justify-center p-8 bg-gray-100 dark:bg-gray-800 rounded-lg",children:d.jsxs("div",{className:"text-center",children:[d.jsx("h3",{className:"text-lg font-medium mb-2",children:"Visualization Error"}),d.jsxs("p",{className:"text-muted-foreground mb-4",children:["The 3D visualization encountered an error.",this.state.errorCount>2&&" Switching to simplified mode."]}),d.jsxs("div",{className:"space-x-2",children:[d.jsx("button",{className:"px-4 py-2 bg-primary text-white rounded",onClick:this.handleRetry,children:"Retry"}),d.jsx("button",{className:"px-4 py-2 bg-gray-600 text-white rounded",onClick:()=>window.location.reload(),children:"Reload Page"})]}),this.state.error&&d.jsxs("details",{className:"mt-4 text-left",children:[d.jsx("summary",{className:"cursor-pointer text-sm",children:"Error Details"}),d.jsx("pre",{className:"text-xs mt-2 p-2 bg-background rounded max-w-md overflow-auto",children:this.state.error.toString()})]})]})}):this.props.children}}const QXe=()=>d.jsxs("div",{className:He("bg-background rounded-xl shadow-sm border w-full p-6 md:p-8","flex flex-col items-center justify-center py-16"),children:[d.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-primary mb-4"}),d.jsx("p",{className:"text-muted-foreground",children:d.jsx(Q,{text:"Loading visualization..."})})]}),eKe=()=>d.jsxs("div",{className:He("bg-background rounded-xl shadow-sm border w-full p-6 md:p-8","flex flex-col items-center justify-center py-16"),children:[d.jsx("div",{className:"w-16 h-16 bg-muted rounded-full flex items-center justify-center mb-4",children:d.jsx("span",{className:"text-2xl",children:""})}),d.jsx("h3",{className:"text-xl font-semibold mb-2",children:d.jsx(Q,{text:"No connections found"})}),d.jsx("p",{className:"text-muted-foreground text-center max-w-md",children:d.jsx(Q,{text:"Add more journal entries to visualize connections between entities and emotions in your journaling."})})]}),tKe=({isFullScreen:t,toggleFullScreen:e,children:n})=>(_.useEffect(()=>{const r=i=>{i.key==="Escape"&&t&&e()};return window.addEventListener("keydown",r),t&&(document.body.style.overflow="hidden"),()=>{window.removeEventListener("keydown",r),document.body.style.overflow=""}},[t,e]),d.jsxs("div",{className:He("relative rounded-lg overflow-hidden transition-all duration-300 ease-in-out",t?"fixed top-0 left-0 w-screen h-screen z-[9999] bg-background/95 backdrop-blur-sm m-0 p-0":"w-full h-[400px] md:h-[500px] bg-background/50"),children:[d.jsxs("button",{onClick:e,className:He("absolute z-[10000] bg-background/80 backdrop-blur-sm rounded-full text-foreground/90 hover:text-foreground transition-colors",t?"top-6 right-6 p-3":"top-4 right-4 p-1.5"),"aria-label":t?"Exit fullscreen":"Enter fullscreen",title:t?"Exit fullscreen":"Enter fullscreen",children:[t?d.jsx(cc,{className:"h-6 w-6"}):d.jsx(P0e,{className:"h-5 w-5"}),d.jsx("span",{className:"sr-only",children:d.jsx(Q,{text:t?"Exit fullscreen":"Enter fullscreen"})})]}),d.jsx("div",{className:He("flex items-center justify-center h-full w-full",t&&"pt-0"),children:n})]})),nKe=()=>d.jsxs("div",{className:"text-center mb-6",children:[d.jsx("h2",{className:"text-lg font-semibold mb-1",children:d.jsx(Q,{text:"Soul-Net",forceTranslate:!0})}),d.jsx("p",{className:"text-sm text-muted-foreground px-4",children:d.jsx(Q,{text:"Explore connections between life areas and emotions in your journal",forceTranslate:!0})})]}),rKe=(t,e)=>{const{currentLanguage:n,getCachedTranslation:r}=In(),i=_.useMemo(()=>{if(!t)return"";const $=`${t}-${e}-${n}`;return console.log(`[useInstantSoulNetData] CACHE KEY: ${$}`),$},[t,e,n]),[o,a]=_.useState({nodes:[],links:[]}),[s,l]=_.useState(new Map),[c,u]=_.useState(new Map),[f,h]=_.useState(new Map),[p,y]=_.useState(!0),[g,v]=_.useState(null),[b,w]=_.useState(!1),[T,C]=_.useState(!1),[P,M]=_.useState(0),[k,I]=_.useState(!1);_.useEffect(()=>{if(console.log(`[useInstantSoulNetData] PARAMETERS CHANGED: timeRange=${e}, language=${n}, userId=${t}`),!t){console.log("[useInstantSoulNetData] NO USER ID - resetting to empty state"),a({nodes:[],links:[]}),l(new Map),u(new Map),h(new Map),w(!1),I(!1),C(!1),M(0),y(!1),v(null);return}console.log("[useInstantSoulNetData] RESETTING STATE for fresh data"),a({nodes:[],links:[]}),l(new Map),u(new Map),h(new Map),w(!1),I(!1),C(!1),M(0),y(!0),v(null),console.log(`[useInstantSoulNetData] CLEARING OTHER CACHES: keeping ${e} for ${n}`),Uo.clearTimeRangeCache(t,e,n);const $=Uo.getInstantData(i);$&&$.data.translationComplete?(console.log(`[useInstantSoulNetData] FOUND VALID CACHE: ${i}`),a({nodes:$.data.nodes,links:$.data.links}),l($.data.translations),u($.data.connectionPercentages),h($.data.nodeConnectionData),w(!0),I(!0),C(!1),M(100),y(!1)):console.log(`[useInstantSoulNetData] NO VALID CACHE: will fetch fresh data for ${i}`)},[t,e,n,i]);const U=_.useCallback(async()=>{if(!t||!i){console.log("[useInstantSoulNetData] FETCH SKIP: missing userId or cacheKey"),y(!1);return}console.log(`[useInstantSoulNetData] FETCH START: ${i}`);const $=Uo.getInstantData(i);if($&&$.data.translationComplete){console.log(`[useInstantSoulNetData] FETCH SKIP: found valid cache ${i}`),a({nodes:$.data.nodes,links:$.data.links}),l($.data.translations),u($.data.connectionPercentages),h($.data.nodeConnectionData),w(!0),I(!0),C(!1),M(100),y(!1);return}try{v(null),y(!0),console.log(`[useInstantSoulNetData] FETCHING FRESH: userId=${t}, timeRange=${e}, language=${n}`);const F=await Uo.preloadInstantData(t,e,n);F?(console.log(`[useInstantSoulNetData] FETCH SUCCESS: ${F.nodes.length} nodes, complete=${F.translationComplete}`),a({nodes:F.nodes,links:F.links}),l(F.translations),u(F.connectionPercentages),h(F.nodeConnectionData),w(!0),I(F.translationComplete),C(!F.translationComplete),M(F.translationProgress)):(console.log("[useInstantSoulNetData] FETCH EMPTY: no data for current parameters"),a({nodes:[],links:[]}),l(new Map),u(new Map),h(new Map),w(!0),I(!0),C(!1),M(100))}catch(F){console.error("[useInstantSoulNetData] FETCH ERROR:",F),v(F instanceof Error?F:new Error("Failed to fetch data")),C(!1),M(100)}finally{y(!1)}},[t,e,n,i]);_.useEffect(()=>{U()},[U]);const z=_.useCallback(($,F)=>{if(!$||$===F||c.size===0)return 0;const J=`${$}-${F}`;return c.get(J)||0},[c]),O=_.useCallback($=>{if(n==="en")return $;if(k){const F=s.get($);if(F)return F}if(!T){const F=r($);if(F)return F}return $},[n,s,r,k,T]),B=_.useCallback($=>f.get($)||{connectedNodes:[],totalStrength:0,averageStrength:0},[f]);return console.log(`[useInstantSoulNetData] STATE: key=${i}, nodes=${o.nodes.length}, loading=${p}, ready=${b}, complete=${k}, translating=${T}`),{graphData:o,translations:s,connectionPercentages:c,nodeConnectionData:f,loading:p,error:g,isInstantReady:b,isTranslating:T,translationProgress:P,translationComplete:k,getInstantConnectionPercentage:z,getInstantTranslation:O,getInstantNodeConnections:B}},iKe=({progress:t})=>d.jsx("div",{className:"bg-background rounded-xl shadow-sm border w-full p-6",children:d.jsxs("div",{className:"flex flex-col items-center justify-center py-12 space-y-4",children:[d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"}),d.jsx("h3",{className:"text-lg font-medium",children:d.jsx(Q,{text:"Translating Soul-Net...",forceTranslate:!0,enableFontScaling:!0,scalingContext:"general"})}),d.jsx("div",{className:"w-64 bg-gray-200 rounded-full h-2",children:d.jsx("div",{className:"bg-primary h-2 rounded-full transition-all duration-300",style:{width:`${t}%`}})}),d.jsx("p",{className:"text-sm text-muted-foreground",children:d.jsx(Q,{text:`${t}% complete`,forceTranslate:!1,enableFontScaling:!0,scalingContext:"general"})})]})}),oKe=({userId:t,timeRange:e})=>{const[n,r]=_.useState(!1),[i,o]=_.useState(null),[a,s]=_.useState(0),[l,c]=_.useState(!1),u=ui(),f=Wce(),[h,p]=_.useState(null),{currentLanguage:y}=In(),g=_.useRef(!1),v=_.useRef(e),b=_.useRef(y);_.useEffect(()=>{(v.current!==e||b.current!==y)&&(console.log(`[SoulNet] PARAMETER CHANGE: timeRange ${v.current} -> ${e}, language ${b.current} -> ${y}`),c(!1),g.current=!1,p(null),v.current=e,b.current=y)},[e,y]),_.useEffect(()=>{console.log("[SoulNet] INITIALIZING: Setting up enhanced translation service"),Uo.setAppLevelTranslationService(ZC)},[]);const{graphData:w,loading:T,error:C,isInstantReady:P,isTranslating:M,translationProgress:k,translationComplete:I,getInstantConnectionPercentage:U,getInstantTranslation:z,getInstantNodeConnections:O}=rKe(t,e);console.log("[SoulNet] ENHANCED STATE",{userId:t,timeRange:e,currentLanguage:y,nodesCount:w.nodes.length,isInstantReady:P,loading:T,isTranslating:M,translationProgress:k,translationComplete:I,renderingReady:l,renderingInitialized:g.current}),_.useEffect(()=>{P&&I&&w.nodes.length>0&&!g.current&&!T&&!M&&(console.log("[SoulNet] INITIALIZING RENDERING: All conditions met"),c(!0),g.current=!0),(C||w.nodes.length===0&&!T&&!M)&&g.current&&(console.log("[SoulNet] RESETTING RENDERING: Data issues detected",{hasError:!!C,nodesCount:w.nodes.length,loading:T,isTranslating:M}),c(!1),g.current=!1)},[P,I,w.nodes.length,T,C,M]);const B=_.useCallback(()=>{t&&(console.log("[SoulNet] MANUAL REFRESH: Forcing cache invalidation"),Uo.forceInvalidateCache(t,e,y),c(!1),g.current=!1,p(null),o(null),s(0),window.location.reload())},[t,e,y]),$=_.useCallback(H=>{console.log(`[SoulNet] NODE SELECTED: ${H}`),h===H?p(null):(p(H),navigator.vibrate&&navigator.vibrate(50))},[h]),F=_.useCallback(()=>{r(H=>(H||p(null),console.log(`[SoulNet] FULLSCREEN TOGGLE: ${!H}`),!H))},[]),J=_.useCallback(H=>{console.error("[SoulNet] CANVAS ERROR:",H),o(H),s(Y=>Y+1),c(!1),g.current=!1},[]),K=_.useCallback(()=>{o(null),s(0),g.current=!1},[]);if(M&&!I)return console.log("[SoulNet] SHOWING TRANSLATION LOADING"),d.jsxs("div",{className:"bg-background rounded-xl shadow-sm border w-full p-6",children:[d.jsx(iKe,{progress:k}),d.jsx("div",{className:"mt-4 text-center",children:d.jsx("button",{onClick:B,className:"text-sm text-muted-foreground hover:text-primary underline",children:d.jsx(Q,{text:"Force refresh if stuck",forceTranslate:!0,enableFontScaling:!0,scalingContext:"general"})})})]});if(T&&!P&&w.nodes.length===0)return console.log("[SoulNet] SHOWING GENERAL LOADING"),d.jsxs("div",{className:"bg-background rounded-xl shadow-sm border w-full p-6",children:[d.jsx(QXe,{}),d.jsx("div",{className:"mt-4 text-center",children:d.jsx("button",{onClick:B,className:"text-sm text-muted-foreground hover:text-primary underline",children:d.jsx(Q,{text:"Force refresh",forceTranslate:!0,enableFontScaling:!0,scalingContext:"general"})})})]});if(C)return d.jsxs("div",{className:"bg-background rounded-xl shadow-sm border w-full p-6",children:[d.jsx("h2",{className:"text-xl font-semibold text-red-600 mb-4",children:d.jsx(Q,{text:"Error Loading Soul-Net",forceTranslate:!0,enableFontScaling:!0,scalingContext:"general"})}),d.jsx("p",{className:"text-muted-foreground mb-4",children:C.message}),d.jsxs("div",{className:"space-x-2",children:[d.jsx("button",{className:"px-4 py-2 bg-primary text-white rounded-md",onClick:K,children:d.jsx(Q,{text:"Retry",forceTranslate:!0,enableFontScaling:!0,scalingContext:"general"})}),d.jsx("button",{className:"px-4 py-2 bg-gray-600 text-white rounded-md",onClick:B,children:d.jsx(Q,{text:"Force Refresh",forceTranslate:!0,enableFontScaling:!0,scalingContext:"general"})})]})]});if(w.nodes.length===0)return d.jsx(eKe,{});if(i&&a>2)return d.jsxs("div",{className:"bg-background rounded-xl shadow-sm border w-full p-6",children:[d.jsx("h2",{className:"text-xl font-semibold mb-4",children:d.jsx(Q,{text:"Soul-Net Visualization",forceTranslate:!0,enableFontScaling:!0,scalingContext:"general"})}),d.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:[d.jsx("h3",{className:"font-medium text-yellow-800 dark:text-yellow-300 mb-2",children:d.jsx(Q,{text:"3D Visualization Unavailable",forceTranslate:!0,enableFontScaling:!0,scalingContext:"general"})}),d.jsx("p",{className:"text-yellow-700 dark:text-yellow-400 mb-3",children:d.jsx(Q,{text:"The 3D visualization is experiencing technical difficulties. Your data is safe and you can try again.",forceTranslate:!0,enableFontScaling:!0,scalingContext:"general"})}),d.jsxs("div",{className:"space-x-2",children:[d.jsx("button",{className:"px-4 py-2 bg-yellow-600 text-white rounded hover:bg-yellow-700",onClick:K,children:d.jsx(Q,{text:"Try Again",forceTranslate:!0,enableFontScaling:!0,scalingContext:"general"})}),d.jsx("button",{className:"px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700",onClick:()=>window.location.reload(),children:d.jsx(Q,{text:"Reload Page",forceTranslate:!0,enableFontScaling:!0,scalingContext:"general"})})]})]})]});const Z=()=>u?d.jsx(Q,{text:"Drag to rotate  Pinch to zoom  Tap a node to highlight connections",forceTranslate:!0,enableFontScaling:!0,scalingContext:"general"}):d.jsx(Q,{text:"Drag to rotate  Scroll to zoom  Click a node to highlight connections",forceTranslate:!0,enableFontScaling:!0,scalingContext:"general"});return console.log(`[SoulNet] FINAL RENDER: ${w.nodes.length} nodes, ${w.links.length} links, renderingReady: ${l}`),d.jsxs("div",{className:He("bg-background rounded-xl shadow-sm border w-full",u?"p-0":"p-6 md:p-8"),children:[!n&&d.jsx(nKe,{}),d.jsx(tKe,{isFullScreen:n,toggleFullScreen:F,children:d.jsx(ZXe,{onError:J,fallback:d.jsx("div",{className:"flex items-center justify-center p-10 bg-gray-100 dark:bg-gray-800 rounded-lg",children:d.jsxs("div",{className:"text-center",children:[d.jsx("h3",{className:"text-lg font-medium",children:d.jsx(Q,{text:"Visualization Error",forceTranslate:!0,enableFontScaling:!0,scalingContext:"general"})}),d.jsx("p",{className:"text-muted-foreground mt-2",children:d.jsx(Q,{text:"The 3D visualization encountered an error.",forceTranslate:!0,enableFontScaling:!0,scalingContext:"general"})}),d.jsxs("div",{className:"space-x-2 mt-4",children:[d.jsx("button",{className:"px-4 py-2 bg-primary text-white rounded-lg",onClick:K,children:d.jsx(Q,{text:"Retry",forceTranslate:!0,enableFontScaling:!0,scalingContext:"general"})}),d.jsx("button",{className:"px-4 py-2 bg-gray-600 text-white rounded-lg",onClick:B,children:d.jsx(Q,{text:"Force Refresh",forceTranslate:!0,enableFontScaling:!0,scalingContext:"general"})})]})]})}),children:l&&I&&d.jsx(NYe,{style:{width:"100%",height:"100%",maxWidth:n?"none":"800px",maxHeight:n?"none":"500px",position:"relative",zIndex:5,transition:"all 0.3s ease-in-out"},camera:{position:[0,0,n?40:45],near:1,far:1e3,fov:n?60:50},onPointerMissed:()=>p(null),gl:{preserveDrawingBuffer:!0,antialias:!u,powerPreference:"high-performance",alpha:!0,depth:!0,stencil:!1,precision:u?"mediump":"highp"},children:d.jsx(JXe,{data:w,selectedNode:h,onNodeClick:$,themeHex:f,isFullScreen:n,shouldShowLabels:!0,getInstantConnectionPercentage:U,getInstantTranslation:z,getInstantNodeConnections:O,isInstantReady:P})})})}),!n&&d.jsx("div",{className:"w-full text-center mt-2 px-4 md:px-8",children:d.jsx("p",{className:"text-xs text-muted-foreground",children:Z()})})]})};function aKe({timeRange:t,chartInsightsData:e,emotionChartDate:n,moodCalendarDate:r,onEmotionChartNavigate:i,onMoodCalendarNavigate:o,userId:a}){const s=ui(),l=()=>{const c=e.allEntries||[];return c.length===0?[]:c.filter(u=>u.created_at&&u.sentiment!==void 0&&u.sentiment!==null).map(u=>({date:new Date(u.created_at),sentiment:parseFloat(u.sentiment||0)||0})).filter(u=>!isNaN(u.sentiment)&&!isNaN(u.date.getTime()))};return d.jsxs(d.Fragment,{children:[d.jsx(Ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.3},className:He("bg-background rounded-xl shadow-sm mb-8 border w-full mx-auto",s?"p-4 md:p-8":"p-6 md:p-8"),whileHover:{boxShadow:"0 10px 25px -5px rgba(0, 0, 0, 0.1)"},children:d.jsx(f8e,{timeframe:t,aggregatedData:e.aggregatedEmotionData,currentDate:n,onTimeRangeNavigate:i})}),d.jsx(Ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.4},className:He("mb-8",s?"px-2":"px-0"),children:d.jsx(g8e,{sentimentData:l(),timeRange:t,currentDate:r,onTimeRangeNavigate:o})}),d.jsx(Ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.5},className:He("mb-8",s?"px-2":"px-0"),children:d.jsx(oKe,{userId:a,timeRange:t})})]})}function sKe(){return d.jsxs("div",{className:"bg-background rounded-xl p-8 text-center border mx-2",children:[d.jsx("h2",{className:"text-xl font-semibold mb-4",children:d.jsx(Tn,{text:"No journal data available",forceTranslate:!0,enableFontScaling:!0,scalingContext:"general",usePageTranslation:!0})}),d.jsx("p",{className:"text-muted-foreground mb-6",children:d.jsx(Tn,{text:"Start recording journal entries to see your emotional insights.",forceTranslate:!0,enableFontScaling:!0,scalingContext:"general",usePageTranslation:!0})}),d.jsx(ct,{onClick:()=>window.location.href="/journal",children:d.jsx(Tn,{text:"Go to Journal",forceTranslate:!0,enableFontScaling:!0,scalingContext:"compact",usePageTranslation:!0})})]})}function lKe(){return d.jsx("div",{className:"flex justify-center py-20",children:d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})})}function cKe(){const{user:t}=or(),{prefetchTranslationsForRoute:e}=In(),[n,r]=_.useState("week"),[i,o]=_.useState(new Date),[a,s]=_.useState(new Date),[l,c]=_.useState(!1),u=_.useRef(null),f=_.useRef(0),h=ui(),{statsInsightsData:p,chartInsightsData:y,loading:g,refreshing:v,refreshCache:b}=qPe(t==null?void 0:t.id,n,i);_.useEffect(()=>{e&&e("/insights").catch(console.error)},[e]),_.useEffect(()=>{const M=()=>{f.current=window.scrollY;const k=h?40:90,I=window.scrollY>k;l!==I&&c(I)};return window.addEventListener("scroll",M),M(),()=>window.removeEventListener("scroll",M)},[h,l]),_.useEffect(()=>{o(new Date),s(new Date)},[n]);const w=M=>{o(M)},T=M=>{s(M)},C=M=>{M&&(f.current=window.scrollY,r(M),o(new Date),s(new Date),setTimeout(()=>{window.scrollTo({top:f.current})},10))};_.useEffect(()=>{g||setTimeout(()=>{window.scrollTo({top:f.current})},100)},[g,p]);const P=p.entries.length>0||p.allEntries.length>0;return d.jsxs("div",{className:"min-h-screen pb-20 insights-container",children:[d.jsx(rke,{}),l&&d.jsx("div",{className:"fixed top-0 left-0 right-0 z-50 py-3 px-4 bg-background border-b shadow-sm flex justify-center insights-sticky-header",children:d.jsx("div",{className:He("w-full flex justify-end",h?"max-w-full px-1":"max-w-5xl"),children:d.jsx(N8,{timeRange:n,onTimeRangeChange:C,refreshing:v,onRefresh:b})})}),d.jsxs("div",{className:He(h?"w-full px-0":"max-w-5xl mx-auto px-4","pt-4 md:pt-8 insights-page-content",h?"mt-2":"mt-4",l&&h?"pt-16":""),children:[d.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8 px-2",children:[d.jsx(cke,{}),d.jsx("div",{className:He("mt-4 md:mt-0",l?"opacity-0 h-0 overflow-hidden":"opacity-100"),ref:u,children:d.jsx(N8,{timeRange:n,onTimeRangeChange:C,refreshing:v,onRefresh:b})})]}),g?d.jsx(lKe,{}):P?d.jsxs(d.Fragment,{children:[d.jsx(vke,{timeRange:n,insightsData:p}),d.jsx(aKe,{timeRange:n,chartInsightsData:y,emotionChartDate:i,moodCalendarDate:a,onEmotionChartNavigate:w,onMoodCalendarNavigate:T,userId:t==null?void 0:t.id})]}):d.jsx(sKe,{})]})]})}function uKe(){return d.jsx(OT,{feature:"insights",children:d.jsx(Kne,{children:d.jsx(ZMe,{children:d.jsx(cKe,{})})})})}const dKe=({onSendMessage:t,isLoading:e,userId:n})=>{const[r,i]=_.useState(""),[o,a]=_.useState("Type your message..."),s=ui(),l=_.useRef(null),c=_.useRef(null),{isActive:u,isInStep:f,tutorialCompleted:h}=ka(),{translate:p,currentLanguage:y}=In(),g=u&&f(5);if(_.useEffect(()=>{(async()=>{try{if(y==="en")a("Type your message...");else{const C=await p("Type your message...");a(C||"Type your message...")}}catch(C){console.error("Error translating placeholder:",C),a("Type your message...")}})()},[y,p]),_.useEffect(()=>{const T=()=>{c.current&&(g?(c.current.style.opacity="0",c.current.style.pointerEvents="none",c.current.style.height="0",c.current.style.visibility="hidden",c.current.style.overflow="hidden",c.current.style.margin="0",c.current.style.padding="0",c.current.style.backgroundColor="transparent",c.current.style.border="none",c.current.style.boxShadow="none"):(c.current.style.opacity="1",c.current.style.pointerEvents="auto",c.current.style.cursor="text",c.current.style.display="block",c.current.style.visibility="visible",c.current.style.height="auto",c.current.style.zIndex="20",c.current.style.margin="",c.current.style.padding="",c.current.style.backgroundColor="",c.current.style.border="",c.current.style.boxShadow=""))};T();const C=setTimeout(T,300);return()=>{clearTimeout(C)}},[e,g,h]),g)return d.jsx("div",{ref:c,className:"chat-input-container opacity-0 h-0 overflow-hidden",style:{height:"0",padding:0,margin:0,border:"none",backgroundColor:"transparent"}});const v=T=>{T.preventDefault(),r.trim()&&(t(r),i(""),l.current&&(l.current.style.height="auto"))},b=T=>{T.style.height="auto",T.style.height=`${Math.min(T.scrollHeight,120)}px`},w=T=>{i(T.target.value),b(T.target)};return d.jsx("div",{className:"chat-input-container w-full",style:{marginBottom:"5px",position:"relative",zIndex:20},ref:c,children:d.jsxs("form",{onSubmit:v,className:"relative flex items-center w-full",children:[d.jsx("div",{className:"flex items-center w-full relative",children:d.jsx(uF,{ref:l,value:r,onChange:w,placeholder:o,className:"min-h-[24px] h-[32px] text-sm md:text-base resize-none rounded-full pl-4 pr-12 py-0 shadow-sm border-muted bg-background text-foreground overflow-hidden",disabled:e,onKeyDown:T=>{T.key==="Enter"&&!T.shiftKey&&(T.preventDefault(),v(T))},onFocus:()=>{s&&setTimeout(()=>{var T;window.scrollTo({top:document.body.scrollHeight,behavior:"smooth"}),(T=l.current)==null||T.scrollIntoView({behavior:"smooth"})},300)}})}),d.jsx("div",{className:"absolute right-2 top-1/2 transform -translate-y-1/2 flex items-center",children:d.jsx(ct,{type:"submit",size:s?"sm":"default",className:"rounded-full h-7 w-7 p-0 bg-primary text-primary-foreground",disabled:e,children:d.jsx(kJ,{className:"h-3 w-3"})})})]})})};var Mz="Avatar",[fKe,Pot]=sa(Mz),[hKe,Gce]=fKe(Mz),qce=_.forwardRef((t,e)=>{const{__scopeAvatar:n,...r}=t,[i,o]=_.useState("idle");return d.jsx(hKe,{scope:n,imageLoadingStatus:i,onImageLoadingStatusChange:o,children:d.jsx(At.span,{...r,ref:e})})});qce.displayName=Mz;var Yce="AvatarImage",Xce=_.forwardRef((t,e)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:i=()=>{},...o}=t,a=Gce(Yce,n),s=pKe(r,o.referrerPolicy),l=Br(c=>{i(c),a.onImageLoadingStatusChange(c)});return $i(()=>{s!=="idle"&&l(s)},[s,l]),s==="loaded"?d.jsx(At.img,{...o,ref:e,src:r}):null});Xce.displayName=Yce;var Kce="AvatarFallback",Jce=_.forwardRef((t,e)=>{const{__scopeAvatar:n,delayMs:r,...i}=t,o=Gce(Kce,n),[a,s]=_.useState(r===void 0);return _.useEffect(()=>{if(r!==void 0){const l=window.setTimeout(()=>s(!0),r);return()=>window.clearTimeout(l)}},[r]),a&&o.imageLoadingStatus!=="loaded"?d.jsx(At.span,{...i,ref:e}):null});Jce.displayName=Kce;function pKe(t,e){const[n,r]=_.useState("idle");return $i(()=>{if(!t){r("error");return}let i=!0;const o=new window.Image,a=s=>()=>{i&&r(s)};return r("loading"),o.onload=a("loaded"),o.onerror=a("error"),o.src=t,e&&(o.referrerPolicy=e),()=>{i=!1}},[t,e]),n}var Zce=qce,Qce=Xce,eue=Jce;const tue=t=>t?t.includes("googleusercontent.com")||t.includes("lh3.googleusercontent.com"):!1,mKe=(t,e=192)=>{if(!t||!tue(t))return t;try{const n=new URL(t);return n.searchParams.delete("sz"),n.searchParams.delete("s"),n.searchParams.set("sz",e.toString()),n.toString()}catch(n){return console.warn("Failed to optimize Google avatar URL:",n),t}},gKe=(t,e=192)=>{if(t)return tue(t)?mKe(t,e):t},C2=_.forwardRef(({className:t,...e},n)=>d.jsx(Zce,{ref:n,className:He("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));C2.displayName=Zce.displayName;const A2=_.forwardRef(({className:t,src:e,optimizeSize:n,...r},i)=>{const o=_.useMemo(()=>e&&gKe(e,n),[e,n]);return d.jsx(Qce,{ref:i,className:He("aspect-square h-full w-full",t),src:o,...r})});A2.displayName=Qce.displayName;const M2=_.forwardRef(({className:t,...e},n)=>d.jsx(eue,{ref:n,className:He("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));M2.displayName=eue.displayName;function yKe(t,e){const n={};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const vKe=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,xKe=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,wKe={};function NX(t,e){return(wKe.jsx?xKe:vKe).test(t)}const bKe=/[ \t\n\f\r]/g;function SKe(t){return typeof t=="object"?t.type==="text"?RX(t.value):!1:RX(t)}function RX(t){return t.replace(bKe,"")===""}class vS{constructor(e,n,r){this.normal=n,this.property=e,r&&(this.space=r)}}vS.prototype.normal={};vS.prototype.property={};vS.prototype.space=void 0;function nue(t,e){const n={},r={};for(const i of t)Object.assign(n,i.property),Object.assign(r,i.normal);return new vS(n,r,e)}function qD(t){return t.toLowerCase()}class ts{constructor(e,n){this.attribute=n,this.property=e}}ts.prototype.attribute="";ts.prototype.booleanish=!1;ts.prototype.boolean=!1;ts.prototype.commaOrSpaceSeparated=!1;ts.prototype.commaSeparated=!1;ts.prototype.defined=!1;ts.prototype.mustUseProperty=!1;ts.prototype.number=!1;ts.prototype.overloadedBoolean=!1;ts.prototype.property="";ts.prototype.spaceSeparated=!1;ts.prototype.space=void 0;let EKe=0;const mn=zm(),Li=zm(),rue=zm(),gt=zm(),Sr=zm(),av=zm(),xs=zm();function zm(){return 2**++EKe}const YD=Object.freeze(Object.defineProperty({__proto__:null,boolean:mn,booleanish:Li,commaOrSpaceSeparated:xs,commaSeparated:av,number:gt,overloadedBoolean:rue,spaceSeparated:Sr},Symbol.toStringTag,{value:"Module"})),EI=Object.keys(YD);class Pz extends ts{constructor(e,n,r,i){let o=-1;if(super(e,n),jX(this,"space",i),typeof r=="number")for(;++o<EI.length;){const a=EI[o];jX(this,EI[o],(r&YD[a])===YD[a])}}}Pz.prototype.defined=!0;function jX(t,e,n){n&&(t[e]=n)}function W0(t){const e={},n={};for(const[r,i]of Object.entries(t.properties)){const o=new Pz(r,t.transform(t.attributes||{},r),i,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(o.mustUseProperty=!0),e[r]=o,n[qD(r)]=r,n[qD(o.attribute)]=r}return new vS(e,n,t.space)}const iue=W0({properties:{ariaActiveDescendant:null,ariaAtomic:Li,ariaAutoComplete:null,ariaBusy:Li,ariaChecked:Li,ariaColCount:gt,ariaColIndex:gt,ariaColSpan:gt,ariaControls:Sr,ariaCurrent:null,ariaDescribedBy:Sr,ariaDetails:null,ariaDisabled:Li,ariaDropEffect:Sr,ariaErrorMessage:null,ariaExpanded:Li,ariaFlowTo:Sr,ariaGrabbed:Li,ariaHasPopup:null,ariaHidden:Li,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Sr,ariaLevel:gt,ariaLive:null,ariaModal:Li,ariaMultiLine:Li,ariaMultiSelectable:Li,ariaOrientation:null,ariaOwns:Sr,ariaPlaceholder:null,ariaPosInSet:gt,ariaPressed:Li,ariaReadOnly:Li,ariaRelevant:null,ariaRequired:Li,ariaRoleDescription:Sr,ariaRowCount:gt,ariaRowIndex:gt,ariaRowSpan:gt,ariaSelected:Li,ariaSetSize:gt,ariaSort:null,ariaValueMax:gt,ariaValueMin:gt,ariaValueNow:gt,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function oue(t,e){return e in t?t[e]:e}function aue(t,e){return oue(t,e.toLowerCase())}const _Ke=W0({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:av,acceptCharset:Sr,accessKey:Sr,action:null,allow:null,allowFullScreen:mn,allowPaymentRequest:mn,allowUserMedia:mn,alt:null,as:null,async:mn,autoCapitalize:null,autoComplete:Sr,autoFocus:mn,autoPlay:mn,blocking:Sr,capture:null,charSet:null,checked:mn,cite:null,className:Sr,cols:gt,colSpan:null,content:null,contentEditable:Li,controls:mn,controlsList:Sr,coords:gt|av,crossOrigin:null,data:null,dateTime:null,decoding:null,default:mn,defer:mn,dir:null,dirName:null,disabled:mn,download:rue,draggable:Li,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:mn,formTarget:null,headers:Sr,height:gt,hidden:mn,high:gt,href:null,hrefLang:null,htmlFor:Sr,httpEquiv:Sr,id:null,imageSizes:null,imageSrcSet:null,inert:mn,inputMode:null,integrity:null,is:null,isMap:mn,itemId:null,itemProp:Sr,itemRef:Sr,itemScope:mn,itemType:Sr,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:mn,low:gt,manifest:null,max:null,maxLength:gt,media:null,method:null,min:null,minLength:gt,multiple:mn,muted:mn,name:null,nonce:null,noModule:mn,noValidate:mn,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:mn,optimum:gt,pattern:null,ping:Sr,placeholder:null,playsInline:mn,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:mn,referrerPolicy:null,rel:Sr,required:mn,reversed:mn,rows:gt,rowSpan:gt,sandbox:Sr,scope:null,scoped:mn,seamless:mn,selected:mn,shadowRootClonable:mn,shadowRootDelegatesFocus:mn,shadowRootMode:null,shape:null,size:gt,sizes:null,slot:null,span:gt,spellCheck:Li,src:null,srcDoc:null,srcLang:null,srcSet:null,start:gt,step:null,style:null,tabIndex:gt,target:null,title:null,translate:null,type:null,typeMustMatch:mn,useMap:null,value:Li,width:gt,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Sr,axis:null,background:null,bgColor:null,border:gt,borderColor:null,bottomMargin:gt,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:mn,declare:mn,event:null,face:null,frame:null,frameBorder:null,hSpace:gt,leftMargin:gt,link:null,longDesc:null,lowSrc:null,marginHeight:gt,marginWidth:gt,noResize:mn,noHref:mn,noShade:mn,noWrap:mn,object:null,profile:null,prompt:null,rev:null,rightMargin:gt,rules:null,scheme:null,scrolling:Li,standby:null,summary:null,text:null,topMargin:gt,valueType:null,version:null,vAlign:null,vLink:null,vSpace:gt,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:mn,disableRemotePlayback:mn,prefix:null,property:null,results:gt,security:null,unselectable:null},space:"html",transform:aue}),TKe=W0({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:xs,accentHeight:gt,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:gt,amplitude:gt,arabicForm:null,ascent:gt,attributeName:null,attributeType:null,azimuth:gt,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:gt,by:null,calcMode:null,capHeight:gt,className:Sr,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:gt,diffuseConstant:gt,direction:null,display:null,dur:null,divisor:gt,dominantBaseline:null,download:mn,dx:null,dy:null,edgeMode:null,editable:null,elevation:gt,enableBackground:null,end:null,event:null,exponent:gt,externalResourcesRequired:null,fill:null,fillOpacity:gt,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:av,g2:av,glyphName:av,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:gt,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:gt,horizOriginX:gt,horizOriginY:gt,id:null,ideographic:gt,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:gt,k:gt,k1:gt,k2:gt,k3:gt,k4:gt,kernelMatrix:xs,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:gt,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:gt,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:gt,overlineThickness:gt,paintOrder:null,panose1:null,path:null,pathLength:gt,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Sr,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:gt,pointsAtY:gt,pointsAtZ:gt,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:xs,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:xs,rev:xs,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:xs,requiredFeatures:xs,requiredFonts:xs,requiredFormats:xs,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:gt,specularExponent:gt,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:gt,strikethroughThickness:gt,string:null,stroke:null,strokeDashArray:xs,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:gt,strokeOpacity:gt,strokeWidth:null,style:null,surfaceScale:gt,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:xs,tabIndex:gt,tableValues:null,target:null,targetX:gt,targetY:gt,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:xs,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:gt,underlineThickness:gt,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:gt,values:null,vAlphabetic:gt,vMathematical:gt,vectorEffect:null,vHanging:gt,vIdeographic:gt,version:null,vertAdvY:gt,vertOriginX:gt,vertOriginY:gt,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:gt,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:oue}),sue=W0({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),lue=W0({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:aue}),cue=W0({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),CKe={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},AKe=/[A-Z]/g,IX=/-[a-z]/g,MKe=/^data[-\w.:]+$/i;function PKe(t,e){const n=qD(e);let r=e,i=ts;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&MKe.test(e)){if(e.charAt(4)==="-"){const o=e.slice(5).replace(IX,NKe);r="data"+o.charAt(0).toUpperCase()+o.slice(1)}else{const o=e.slice(4);if(!IX.test(o)){let a=o.replace(AKe,kKe);a.charAt(0)!=="-"&&(a="-"+a),e="data"+a}}i=Pz}return new i(r,e)}function kKe(t){return"-"+t.toLowerCase()}function NKe(t){return t.charAt(1).toUpperCase()}const RKe=nue([iue,_Ke,sue,lue,cue],"html"),kz=nue([iue,TKe,sue,lue,cue],"svg");function jKe(t){return t.join(" ").trim()}var yy={},_I,OX;function IKe(){if(OX)return _I;OX=1;var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,n=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,i=/^:\s*/,o=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,a=/^[;\s]*/,s=/^\s+|\s+$/g,l=`
`,c="/",u="*",f="",h="comment",p="declaration";_I=function(g,v){if(typeof g!="string")throw new TypeError("First argument must be a string");if(!g)return[];v=v||{};var b=1,w=1;function T($){var F=$.match(e);F&&(b+=F.length);var J=$.lastIndexOf(l);w=~J?$.length-J:w+$.length}function C(){var $={line:b,column:w};return function(F){return F.position=new P($),I(),F}}function P($){this.start=$,this.end={line:b,column:w},this.source=v.source}P.prototype.content=g;function M($){var F=new Error(v.source+":"+b+":"+w+": "+$);if(F.reason=$,F.filename=v.source,F.line=b,F.column=w,F.source=g,!v.silent)throw F}function k($){var F=$.exec(g);if(F){var J=F[0];return T(J),g=g.slice(J.length),F}}function I(){k(n)}function U($){var F;for($=$||[];F=z();)F!==!1&&$.push(F);return $}function z(){var $=C();if(!(c!=g.charAt(0)||u!=g.charAt(1))){for(var F=2;f!=g.charAt(F)&&(u!=g.charAt(F)||c!=g.charAt(F+1));)++F;if(F+=2,f===g.charAt(F-1))return M("End of comment missing");var J=g.slice(2,F-2);return w+=2,T(J),g=g.slice(F),w+=2,$({type:h,comment:J})}}function O(){var $=C(),F=k(r);if(F){if(z(),!k(i))return M("property missing ':'");var J=k(o),K=$({type:p,property:y(F[0].replace(t,f)),value:J?y(J[0].replace(t,f)):f});return k(a),K}}function B(){var $=[];U($);for(var F;F=O();)F!==!1&&($.push(F),U($));return $}return I(),B()};function y(g){return g?g.replace(s,f):f}return _I}var LX;function OKe(){if(LX)return yy;LX=1;var t=yy&&yy.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(yy,"__esModule",{value:!0}),yy.default=n;var e=t(IKe());function n(r,i){var o=null;if(!r||typeof r!="string")return o;var a=(0,e.default)(r),s=typeof i=="function";return a.forEach(function(l){if(l.type==="declaration"){var c=l.property,u=l.value;s?i(c,u,l):u&&(o=o||{},o[c]=u)}}),o}return yy}var mw={},DX;function LKe(){if(DX)return mw;DX=1,Object.defineProperty(mw,"__esModule",{value:!0}),mw.camelCase=void 0;var t=/^--[a-zA-Z0-9_-]+$/,e=/-([a-z])/g,n=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,i=/^-(ms)-/,o=function(c){return!c||n.test(c)||t.test(c)},a=function(c,u){return u.toUpperCase()},s=function(c,u){return"".concat(u,"-")},l=function(c,u){return u===void 0&&(u={}),o(c)?c:(c=c.toLowerCase(),u.reactCompat?c=c.replace(i,s):c=c.replace(r,s),c.replace(e,a))};return mw.camelCase=l,mw}var gw,FX;function DKe(){if(FX)return gw;FX=1;var t=gw&&gw.__importDefault||function(i){return i&&i.__esModule?i:{default:i}},e=t(OKe()),n=LKe();function r(i,o){var a={};return!i||typeof i!="string"||(0,e.default)(i,function(s,l){s&&l&&(a[(0,n.camelCase)(s,o)]=l)}),a}return r.default=r,gw=r,gw}var FKe=DKe();const zKe=$n(FKe),uue=due("end"),Nz=due("start");function due(t){return e;function e(n){const r=n&&n.position&&n.position[t]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function UKe(t){const e=Nz(t),n=uue(t);if(e&&n)return{start:e,end:n}}function Zw(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?zX(t.position):"start"in t||"end"in t?zX(t):"line"in t||"column"in t?XD(t):""}function XD(t){return UX(t&&t.line)+":"+UX(t&&t.column)}function zX(t){return XD(t&&t.start)+"-"+XD(t&&t.end)}function UX(t){return t&&typeof t=="number"?t:1}class ca extends Error{constructor(e,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",o={},a=!1;if(n&&("line"in n&&"column"in n?o={place:n}:"start"in n&&"end"in n?o={place:n}:"type"in n?o={ancestors:[n],place:n.position}:o={...n}),typeof e=="string"?i=e:!o.cause&&e&&(a=!0,i=e.message,o.cause=e),!o.ruleId&&!o.source&&typeof r=="string"){const l=r.indexOf(":");l===-1?o.ruleId=r:(o.source=r.slice(0,l),o.ruleId=r.slice(l+1))}if(!o.place&&o.ancestors&&o.ancestors){const l=o.ancestors[o.ancestors.length-1];l&&(o.place=l.position)}const s=o.place&&"start"in o.place?o.place.start:o.place;this.ancestors=o.ancestors||void 0,this.cause=o.cause||void 0,this.column=s?s.column:void 0,this.fatal=void 0,this.file,this.message=i,this.line=s?s.line:void 0,this.name=Zw(o.place)||"1:1",this.place=o.place||void 0,this.reason=this.message,this.ruleId=o.ruleId||void 0,this.source=o.source||void 0,this.stack=a&&o.cause&&typeof o.cause.stack=="string"?o.cause.stack:"",this.actual,this.expected,this.note,this.url}}ca.prototype.file="";ca.prototype.name="";ca.prototype.reason="";ca.prototype.message="";ca.prototype.stack="";ca.prototype.column=void 0;ca.prototype.line=void 0;ca.prototype.ancestors=void 0;ca.prototype.cause=void 0;ca.prototype.fatal=void 0;ca.prototype.place=void 0;ca.prototype.ruleId=void 0;ca.prototype.source=void 0;const Rz={}.hasOwnProperty,BKe=new Map,$Ke=/[A-Z]/g,HKe=new Set(["table","tbody","thead","tfoot","tr"]),VKe=new Set(["td","th"]),fue="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function WKe(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let r;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=QKe(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=ZKe(n,e.jsx,e.jsxs)}const i={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:r,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?kz:RKe,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},o=hue(i,t,void 0);return o&&typeof o!="string"?o:i.create(t,i.Fragment,{children:o||void 0},void 0)}function hue(t,e,n){if(e.type==="element")return GKe(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return qKe(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return XKe(t,e,n);if(e.type==="mdxjsEsm")return YKe(t,e);if(e.type==="root")return KKe(t,e,n);if(e.type==="text")return JKe(t,e)}function GKe(t,e,n){const r=t.schema;let i=r;e.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=kz,t.schema=i),t.ancestors.push(e);const o=mue(t,e.tagName,!1),a=eJe(t,e);let s=Iz(t,e);return HKe.has(e.tagName)&&(s=s.filter(function(l){return typeof l=="string"?!SKe(l):!0})),pue(t,a,o,e),jz(a,s),t.ancestors.pop(),t.schema=r,t.create(e,o,a,n)}function qKe(t,e){if(e.data&&e.data.estree&&t.evaluater){const r=e.data.estree.body[0];return r.type,t.evaluater.evaluateExpression(r.expression)}v1(t,e.position)}function YKe(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);v1(t,e.position)}function XKe(t,e,n){const r=t.schema;let i=r;e.name==="svg"&&r.space==="html"&&(i=kz,t.schema=i),t.ancestors.push(e);const o=e.name===null?t.Fragment:mue(t,e.name,!0),a=tJe(t,e),s=Iz(t,e);return pue(t,a,o,e),jz(a,s),t.ancestors.pop(),t.schema=r,t.create(e,o,a,n)}function KKe(t,e,n){const r={};return jz(r,Iz(t,e)),t.create(e,t.Fragment,r,n)}function JKe(t,e){return e.value}function pue(t,e,n,r){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=r)}function jz(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function ZKe(t,e,n){return r;function r(i,o,a,s){const c=Array.isArray(a.children)?n:e;return s?c(o,a,s):c(o,a)}}function QKe(t,e){return n;function n(r,i,o,a){const s=Array.isArray(o.children),l=Nz(r);return e(i,o,a,s,{columnNumber:l?l.column-1:void 0,fileName:t,lineNumber:l?l.line:void 0},void 0)}}function eJe(t,e){const n={};let r,i;for(i in e.properties)if(i!=="children"&&Rz.call(e.properties,i)){const o=nJe(t,i,e.properties[i]);if(o){const[a,s]=o;t.tableCellAlignToStyle&&a==="align"&&typeof s=="string"&&VKe.has(e.tagName)?r=s:n[a]=s}}if(r){const o=n.style||(n.style={});o[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function tJe(t,e){const n={};for(const r of e.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&t.evaluater){const o=r.data.estree.body[0];o.type;const a=o.expression;a.type;const s=a.properties[0];s.type,Object.assign(n,t.evaluater.evaluateExpression(s.argument))}else v1(t,e.position);else{const i=r.name;let o;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&t.evaluater){const s=r.value.data.estree.body[0];s.type,o=t.evaluater.evaluateExpression(s.expression)}else v1(t,e.position);else o=r.value===null?!0:r.value;n[i]=o}return n}function Iz(t,e){const n=[];let r=-1;const i=t.passKeys?new Map:BKe;for(;++r<e.children.length;){const o=e.children[r];let a;if(t.passKeys){const l=o.type==="element"?o.tagName:o.type==="mdxJsxFlowElement"||o.type==="mdxJsxTextElement"?o.name:void 0;if(l){const c=i.get(l)||0;a=l+"-"+c,i.set(l,c+1)}}const s=hue(t,o,a);s!==void 0&&n.push(s)}return n}function nJe(t,e,n){const r=PKe(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?yKe(n):jKe(n)),r.property==="style"){let i=typeof n=="object"?n:rJe(t,String(n));return t.stylePropertyNameCase==="css"&&(i=iJe(i)),["style",i]}return[t.elementAttributeNameCase==="react"&&r.space?CKe[r.property]||r.property:r.attribute,n]}}function rJe(t,e){try{return zKe(e,{reactCompat:!0})}catch(n){if(t.ignoreInvalidStyle)return{};const r=n,i=new ca("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw i.file=t.filePath||void 0,i.url=fue+"#cannot-parse-style-attribute",i}}function mue(t,e,n){let r;if(!n)r={type:"Literal",value:e};else if(e.includes(".")){const i=e.split(".");let o=-1,a;for(;++o<i.length;){const s=NX(i[o])?{type:"Identifier",name:i[o]}:{type:"Literal",value:i[o]};a=a?{type:"MemberExpression",object:a,property:s,computed:!!(o&&s.type==="Literal"),optional:!1}:s}r=a}else r=NX(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(r.type==="Literal"){const i=r.value;return Rz.call(t.components,i)?t.components[i]:i}if(t.evaluater)return t.evaluater.evaluateExpression(r);v1(t)}function v1(t,e){const n=new ca("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=fue+"#cannot-handle-mdx-estrees-without-createevaluater",n}function iJe(t){const e={};let n;for(n in t)Rz.call(t,n)&&(e[oJe(n)]=t[n]);return e}function oJe(t){let e=t.replace($Ke,aJe);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function aJe(t){return"-"+t.toLowerCase()}const TI={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},sJe={};function lJe(t,e){const n=sJe,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return gue(t,r,i)}function gue(t,e,n){if(cJe(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return BX(t.children,e,n)}return Array.isArray(t)?BX(t,e,n):""}function BX(t,e,n){const r=[];let i=-1;for(;++i<t.length;)r[i]=gue(t[i],e,n);return r.join("")}function cJe(t){return!!(t&&typeof t=="object")}const $X=document.createElement("i");function Oz(t){const e="&"+t+";";$X.innerHTML=e;const n=$X.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function ru(t,e,n,r){const i=t.length;let o=0,a;if(e<0?e=-e>i?0:i+e:e=e>i?i:e,n=n>0?n:0,r.length<1e4)a=Array.from(r),a.unshift(e,n),t.splice(...a);else for(n&&t.splice(e,n);o<r.length;)a=r.slice(o,o+1e4),a.unshift(e,0),t.splice(...a),o+=1e4,e+=1e4}function el(t,e){return t.length>0?(ru(t,t.length,0,e),t):e}const HX={}.hasOwnProperty;function uJe(t){const e={};let n=-1;for(;++n<t.length;)dJe(e,t[n]);return e}function dJe(t,e){let n;for(n in e){const i=(HX.call(t,n)?t[n]:void 0)||(t[n]={}),o=e[n];let a;if(o)for(a in o){HX.call(i,a)||(i[a]=[]);const s=o[a];fJe(i[a],Array.isArray(s)?s:s?[s]:[])}}}function fJe(t,e){let n=-1;const r=[];for(;++n<e.length;)(e[n].add==="after"?t:r).push(e[n]);ru(t,0,0,r)}function yue(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function sv(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Uc=gh(/[A-Za-z]/),Ms=gh(/[\dA-Za-z]/),hJe=gh(/[#-'*+\--9=?A-Z^-~]/);function KD(t){return t!==null&&(t<32||t===127)}const JD=gh(/\d/),pJe=gh(/[\dA-Fa-f]/),mJe=gh(/[!-/:-@[-`{-~]/);function on(t){return t!==null&&t<-2}function Ka(t){return t!==null&&(t<0||t===32)}function Jn(t){return t===-2||t===-1||t===32}const gJe=gh(new RegExp("\\p{P}|\\p{S}","u")),yJe=gh(/\s/);function gh(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function G0(t){const e=[];let n=-1,r=0,i=0;for(;++n<t.length;){const o=t.charCodeAt(n);let a="";if(o===37&&Ms(t.charCodeAt(n+1))&&Ms(t.charCodeAt(n+2)))i=2;else if(o<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(o))||(a=String.fromCharCode(o));else if(o>55295&&o<57344){const s=t.charCodeAt(n+1);o<56320&&s>56319&&s<57344?(a=String.fromCharCode(o,s),i=1):a=""}else a=String.fromCharCode(o);a&&(e.push(t.slice(r,n),encodeURIComponent(a)),r=n+i+1,a=""),i&&(n+=i,i=0)}return e.join("")+t.slice(r)}function Tr(t,e,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let o=0;return a;function a(l){return Jn(l)?(t.enter(n),s(l)):e(l)}function s(l){return Jn(l)&&o++<i?(t.consume(l),s):(t.exit(n),e(l))}}const vJe={tokenize:xJe};function xJe(t){const e=t.attempt(this.parser.constructs.contentInitial,r,i);let n;return e;function r(s){if(s===null){t.consume(s);return}return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),Tr(t,e,"linePrefix")}function i(s){return t.enter("paragraph"),o(s)}function o(s){const l=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=l),n=l,a(s)}function a(s){if(s===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(s);return}return on(s)?(t.consume(s),t.exit("chunkText"),o):(t.consume(s),a)}}const wJe={tokenize:bJe},VX={tokenize:SJe};function bJe(t){const e=this,n=[];let r=0,i,o,a;return s;function s(T){if(r<n.length){const C=n[r];return e.containerState=C[1],t.attempt(C[0].continuation,l,c)(T)}return c(T)}function l(T){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,i&&w();const C=e.events.length;let P=C,M;for(;P--;)if(e.events[P][0]==="exit"&&e.events[P][1].type==="chunkFlow"){M=e.events[P][1].end;break}b(r);let k=C;for(;k<e.events.length;)e.events[k][1].end={...M},k++;return ru(e.events,P+1,0,e.events.slice(C)),e.events.length=k,c(T)}return s(T)}function c(T){if(r===n.length){if(!i)return h(T);if(i.currentConstruct&&i.currentConstruct.concrete)return y(T);e.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(VX,u,f)(T)}function u(T){return i&&w(),b(r),h(T)}function f(T){return e.parser.lazy[e.now().line]=r!==n.length,a=e.now().offset,y(T)}function h(T){return e.containerState={},t.attempt(VX,p,y)(T)}function p(T){return r++,n.push([e.currentConstruct,e.containerState]),h(T)}function y(T){if(T===null){i&&w(),b(0),t.consume(T);return}return i=i||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:o}),g(T)}function g(T){if(T===null){v(t.exit("chunkFlow"),!0),b(0),t.consume(T);return}return on(T)?(t.consume(T),v(t.exit("chunkFlow")),r=0,e.interrupt=void 0,s):(t.consume(T),g)}function v(T,C){const P=e.sliceStream(T);if(C&&P.push(null),T.previous=o,o&&(o.next=T),o=T,i.defineSkip(T.start),i.write(P),e.parser.lazy[T.start.line]){let M=i.events.length;for(;M--;)if(i.events[M][1].start.offset<a&&(!i.events[M][1].end||i.events[M][1].end.offset>a))return;const k=e.events.length;let I=k,U,z;for(;I--;)if(e.events[I][0]==="exit"&&e.events[I][1].type==="chunkFlow"){if(U){z=e.events[I][1].end;break}U=!0}for(b(r),M=k;M<e.events.length;)e.events[M][1].end={...z},M++;ru(e.events,I+1,0,e.events.slice(k)),e.events.length=M}}function b(T){let C=n.length;for(;C-- >T;){const P=n[C];e.containerState=P[1],P[0].exit.call(e,t)}n.length=T}function w(){i.write([null]),o=void 0,i=void 0,e.containerState._closeFlow=void 0}}function SJe(t,e,n){return Tr(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function WX(t){if(t===null||Ka(t)||yJe(t))return 1;if(gJe(t))return 2}function Lz(t,e,n){const r=[];let i=-1;for(;++i<t.length;){const o=t[i].resolveAll;o&&!r.includes(o)&&(e=o(e,n),r.push(o))}return e}const ZD={name:"attention",resolveAll:EJe,tokenize:_Je};function EJe(t,e){let n=-1,r,i,o,a,s,l,c,u;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(r=n;r--;)if(t[r][0]==="exit"&&t[r][1].type==="attentionSequence"&&t[r][1]._open&&e.sliceSerialize(t[r][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[r][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[r][1].end.offset-t[r][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;l=t[r][1].end.offset-t[r][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const f={...t[r][1].end},h={...t[n][1].start};GX(f,-l),GX(h,l),a={type:l>1?"strongSequence":"emphasisSequence",start:f,end:{...t[r][1].end}},s={type:l>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:h},o={type:l>1?"strongText":"emphasisText",start:{...t[r][1].end},end:{...t[n][1].start}},i={type:l>1?"strong":"emphasis",start:{...a.start},end:{...s.end}},t[r][1].end={...a.start},t[n][1].start={...s.end},c=[],t[r][1].end.offset-t[r][1].start.offset&&(c=el(c,[["enter",t[r][1],e],["exit",t[r][1],e]])),c=el(c,[["enter",i,e],["enter",a,e],["exit",a,e],["enter",o,e]]),c=el(c,Lz(e.parser.constructs.insideSpan.null,t.slice(r+1,n),e)),c=el(c,[["exit",o,e],["enter",s,e],["exit",s,e],["exit",i,e]]),t[n][1].end.offset-t[n][1].start.offset?(u=2,c=el(c,[["enter",t[n][1],e],["exit",t[n][1],e]])):u=0,ru(t,r-1,n-r+3,c),n=r+c.length-u-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function _Je(t,e){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=WX(r);let o;return a;function a(l){return o=l,t.enter("attentionSequence"),s(l)}function s(l){if(l===o)return t.consume(l),s;const c=t.exit("attentionSequence"),u=WX(l),f=!u||u===2&&i||n.includes(l),h=!i||i===2&&u||n.includes(r);return c._open=!!(o===42?f:f&&(i||!h)),c._close=!!(o===42?h:h&&(u||!f)),e(l)}}function GX(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const TJe={name:"autolink",tokenize:CJe};function CJe(t,e,n){let r=0;return i;function i(p){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(p),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),o}function o(p){return Uc(p)?(t.consume(p),a):p===64?n(p):c(p)}function a(p){return p===43||p===45||p===46||Ms(p)?(r=1,s(p)):c(p)}function s(p){return p===58?(t.consume(p),r=0,l):(p===43||p===45||p===46||Ms(p))&&r++<32?(t.consume(p),s):(r=0,c(p))}function l(p){return p===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(p),t.exit("autolinkMarker"),t.exit("autolink"),e):p===null||p===32||p===60||KD(p)?n(p):(t.consume(p),l)}function c(p){return p===64?(t.consume(p),u):hJe(p)?(t.consume(p),c):n(p)}function u(p){return Ms(p)?f(p):n(p)}function f(p){return p===46?(t.consume(p),r=0,u):p===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(p),t.exit("autolinkMarker"),t.exit("autolink"),e):h(p)}function h(p){if((p===45||Ms(p))&&r++<63){const y=p===45?h:f;return t.consume(p),y}return n(p)}}const P2={partial:!0,tokenize:AJe};function AJe(t,e,n){return r;function r(o){return Jn(o)?Tr(t,i,"linePrefix")(o):i(o)}function i(o){return o===null||on(o)?e(o):n(o)}}const vue={continuation:{tokenize:PJe},exit:kJe,name:"blockQuote",tokenize:MJe};function MJe(t,e,n){const r=this;return i;function i(a){if(a===62){const s=r.containerState;return s.open||(t.enter("blockQuote",{_container:!0}),s.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(a),t.exit("blockQuoteMarker"),o}return n(a)}function o(a){return Jn(a)?(t.enter("blockQuotePrefixWhitespace"),t.consume(a),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(a))}}function PJe(t,e,n){const r=this;return i;function i(a){return Jn(a)?Tr(t,o,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a):o(a)}function o(a){return t.attempt(vue,e,n)(a)}}function kJe(t){t.exit("blockQuote")}const xue={name:"characterEscape",tokenize:NJe};function NJe(t,e,n){return r;function r(o){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(o),t.exit("escapeMarker"),i}function i(o){return mJe(o)?(t.enter("characterEscapeValue"),t.consume(o),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(o)}}const wue={name:"characterReference",tokenize:RJe};function RJe(t,e,n){const r=this;let i=0,o,a;return s;function s(f){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(f),t.exit("characterReferenceMarker"),l}function l(f){return f===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(f),t.exit("characterReferenceMarkerNumeric"),c):(t.enter("characterReferenceValue"),o=31,a=Ms,u(f))}function c(f){return f===88||f===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(f),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),o=6,a=pJe,u):(t.enter("characterReferenceValue"),o=7,a=JD,u(f))}function u(f){if(f===59&&i){const h=t.exit("characterReferenceValue");return a===Ms&&!Oz(r.sliceSerialize(h))?n(f):(t.enter("characterReferenceMarker"),t.consume(f),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return a(f)&&i++<o?(t.consume(f),u):n(f)}}const qX={partial:!0,tokenize:IJe},YX={concrete:!0,name:"codeFenced",tokenize:jJe};function jJe(t,e,n){const r=this,i={partial:!0,tokenize:P};let o=0,a=0,s;return l;function l(M){return c(M)}function c(M){const k=r.events[r.events.length-1];return o=k&&k[1].type==="linePrefix"?k[2].sliceSerialize(k[1],!0).length:0,s=M,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),u(M)}function u(M){return M===s?(a++,t.consume(M),u):a<3?n(M):(t.exit("codeFencedFenceSequence"),Jn(M)?Tr(t,f,"whitespace")(M):f(M))}function f(M){return M===null||on(M)?(t.exit("codeFencedFence"),r.interrupt?e(M):t.check(qX,g,C)(M)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),h(M))}function h(M){return M===null||on(M)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),f(M)):Jn(M)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),Tr(t,p,"whitespace")(M)):M===96&&M===s?n(M):(t.consume(M),h)}function p(M){return M===null||on(M)?f(M):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),y(M))}function y(M){return M===null||on(M)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),f(M)):M===96&&M===s?n(M):(t.consume(M),y)}function g(M){return t.attempt(i,C,v)(M)}function v(M){return t.enter("lineEnding"),t.consume(M),t.exit("lineEnding"),b}function b(M){return o>0&&Jn(M)?Tr(t,w,"linePrefix",o+1)(M):w(M)}function w(M){return M===null||on(M)?t.check(qX,g,C)(M):(t.enter("codeFlowValue"),T(M))}function T(M){return M===null||on(M)?(t.exit("codeFlowValue"),w(M)):(t.consume(M),T)}function C(M){return t.exit("codeFenced"),e(M)}function P(M,k,I){let U=0;return z;function z(J){return M.enter("lineEnding"),M.consume(J),M.exit("lineEnding"),O}function O(J){return M.enter("codeFencedFence"),Jn(J)?Tr(M,B,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(J):B(J)}function B(J){return J===s?(M.enter("codeFencedFenceSequence"),$(J)):I(J)}function $(J){return J===s?(U++,M.consume(J),$):U>=a?(M.exit("codeFencedFenceSequence"),Jn(J)?Tr(M,F,"whitespace")(J):F(J)):I(J)}function F(J){return J===null||on(J)?(M.exit("codeFencedFence"),k(J)):I(J)}}}function IJe(t,e,n){const r=this;return i;function i(a){return a===null?n(a):(t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),o)}function o(a){return r.parser.lazy[r.now().line]?n(a):e(a)}}const CI={name:"codeIndented",tokenize:LJe},OJe={partial:!0,tokenize:DJe};function LJe(t,e,n){const r=this;return i;function i(c){return t.enter("codeIndented"),Tr(t,o,"linePrefix",5)(c)}function o(c){const u=r.events[r.events.length-1];return u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?a(c):n(c)}function a(c){return c===null?l(c):on(c)?t.attempt(OJe,a,l)(c):(t.enter("codeFlowValue"),s(c))}function s(c){return c===null||on(c)?(t.exit("codeFlowValue"),a(c)):(t.consume(c),s)}function l(c){return t.exit("codeIndented"),e(c)}}function DJe(t,e,n){const r=this;return i;function i(a){return r.parser.lazy[r.now().line]?n(a):on(a)?(t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),i):Tr(t,o,"linePrefix",5)(a)}function o(a){const s=r.events[r.events.length-1];return s&&s[1].type==="linePrefix"&&s[2].sliceSerialize(s[1],!0).length>=4?e(a):on(a)?i(a):n(a)}}const FJe={name:"codeText",previous:UJe,resolve:zJe,tokenize:BJe};function zJe(t){let e=t.length-4,n=3,r,i;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(r=n;++r<e;)if(t[r][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(r=n-1,e++;++r<=e;)i===void 0?r!==e&&t[r][1].type!=="lineEnding"&&(i=r):(r===e||t[r][1].type==="lineEnding")&&(t[i][1].type="codeTextData",r!==i+2&&(t[i][1].end=t[r-1][1].end,t.splice(i+2,r-i-2),e-=r-i-2,r=i+2),i=void 0);return t}function UJe(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function BJe(t,e,n){let r=0,i,o;return a;function a(f){return t.enter("codeText"),t.enter("codeTextSequence"),s(f)}function s(f){return f===96?(t.consume(f),r++,s):(t.exit("codeTextSequence"),l(f))}function l(f){return f===null?n(f):f===32?(t.enter("space"),t.consume(f),t.exit("space"),l):f===96?(o=t.enter("codeTextSequence"),i=0,u(f)):on(f)?(t.enter("lineEnding"),t.consume(f),t.exit("lineEnding"),l):(t.enter("codeTextData"),c(f))}function c(f){return f===null||f===32||f===96||on(f)?(t.exit("codeTextData"),l(f)):(t.consume(f),c)}function u(f){return f===96?(t.consume(f),i++,u):i===r?(t.exit("codeTextSequence"),t.exit("codeText"),e(f)):(o.type="codeTextData",c(f))}}class $Je{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(e,r):e>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(e,n,r){const i=n||0;this.setCursor(Math.trunc(e));const o=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&yw(this.left,r),o.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),yw(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),yw(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);yw(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);yw(this.left,n.reverse())}}}function yw(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function bue(t){const e={};let n=-1,r,i,o,a,s,l,c;const u=new $Je(t);for(;++n<u.length;){for(;n in e;)n=e[n];if(r=u.get(n),n&&r[1].type==="chunkFlow"&&u.get(n-1)[1].type==="listItemPrefix"&&(l=r[1]._tokenizer.events,o=0,o<l.length&&l[o][1].type==="lineEndingBlank"&&(o+=2),o<l.length&&l[o][1].type==="content"))for(;++o<l.length&&l[o][1].type!=="content";)l[o][1].type==="chunkText"&&(l[o][1]._isInFirstContentOfListItem=!0,o++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,HJe(u,n)),n=e[n],c=!0);else if(r[1]._container){for(o=n,i=void 0;o--;)if(a=u.get(o),a[1].type==="lineEnding"||a[1].type==="lineEndingBlank")a[0]==="enter"&&(i&&(u.get(i)[1].type="lineEndingBlank"),a[1].type="lineEnding",i=o);else if(!(a[1].type==="linePrefix"||a[1].type==="listItemIndent"))break;i&&(r[1].end={...u.get(i)[1].start},s=u.slice(i,n),s.unshift(r),u.splice(i,n-i+1,s))}}return ru(t,0,Number.POSITIVE_INFINITY,u.slice(0)),!c}function HJe(t,e){const n=t.get(e)[1],r=t.get(e)[2];let i=e-1;const o=[];let a=n._tokenizer;a||(a=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(a._contentTypeTextTrailing=!0));const s=a.events,l=[],c={};let u,f,h=-1,p=n,y=0,g=0;const v=[g];for(;p;){for(;t.get(++i)[1]!==p;);o.push(i),p._tokenizer||(u=r.sliceStream(p),p.next||u.push(null),f&&a.defineSkip(p.start),p._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=!0),a.write(u),p._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=void 0)),f=p,p=p.next}for(p=n;++h<s.length;)s[h][0]==="exit"&&s[h-1][0]==="enter"&&s[h][1].type===s[h-1][1].type&&s[h][1].start.line!==s[h][1].end.line&&(g=h+1,v.push(g),p._tokenizer=void 0,p.previous=void 0,p=p.next);for(a.events=[],p?(p._tokenizer=void 0,p.previous=void 0):v.pop(),h=v.length;h--;){const b=s.slice(v[h],v[h+1]),w=o.pop();l.push([w,w+b.length-1]),t.splice(w,2,b)}for(l.reverse(),h=-1;++h<l.length;)c[y+l[h][0]]=y+l[h][1],y+=l[h][1]-l[h][0]-1;return c}const VJe={resolve:GJe,tokenize:qJe},WJe={partial:!0,tokenize:YJe};function GJe(t){return bue(t),t}function qJe(t,e){let n;return r;function r(s){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),i(s)}function i(s){return s===null?o(s):on(s)?t.check(WJe,a,o)(s):(t.consume(s),i)}function o(s){return t.exit("chunkContent"),t.exit("content"),e(s)}function a(s){return t.consume(s),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function YJe(t,e,n){const r=this;return i;function i(a){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),Tr(t,o,"linePrefix")}function o(a){if(a===null||on(a))return n(a);const s=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&s&&s[1].type==="linePrefix"&&s[2].sliceSerialize(s[1],!0).length>=4?e(a):t.interrupt(r.parser.constructs.flow,n,e)(a)}}function Sue(t,e,n,r,i,o,a,s,l){const c=l||Number.POSITIVE_INFINITY;let u=0;return f;function f(b){return b===60?(t.enter(r),t.enter(i),t.enter(o),t.consume(b),t.exit(o),h):b===null||b===32||b===41||KD(b)?n(b):(t.enter(r),t.enter(a),t.enter(s),t.enter("chunkString",{contentType:"string"}),g(b))}function h(b){return b===62?(t.enter(o),t.consume(b),t.exit(o),t.exit(i),t.exit(r),e):(t.enter(s),t.enter("chunkString",{contentType:"string"}),p(b))}function p(b){return b===62?(t.exit("chunkString"),t.exit(s),h(b)):b===null||b===60||on(b)?n(b):(t.consume(b),b===92?y:p)}function y(b){return b===60||b===62||b===92?(t.consume(b),p):p(b)}function g(b){return!u&&(b===null||b===41||Ka(b))?(t.exit("chunkString"),t.exit(s),t.exit(a),t.exit(r),e(b)):u<c&&b===40?(t.consume(b),u++,g):b===41?(t.consume(b),u--,g):b===null||b===32||b===40||KD(b)?n(b):(t.consume(b),b===92?v:g)}function v(b){return b===40||b===41||b===92?(t.consume(b),g):g(b)}}function Eue(t,e,n,r,i,o){const a=this;let s=0,l;return c;function c(p){return t.enter(r),t.enter(i),t.consume(p),t.exit(i),t.enter(o),u}function u(p){return s>999||p===null||p===91||p===93&&!l||p===94&&!s&&"_hiddenFootnoteSupport"in a.parser.constructs?n(p):p===93?(t.exit(o),t.enter(i),t.consume(p),t.exit(i),t.exit(r),e):on(p)?(t.enter("lineEnding"),t.consume(p),t.exit("lineEnding"),u):(t.enter("chunkString",{contentType:"string"}),f(p))}function f(p){return p===null||p===91||p===93||on(p)||s++>999?(t.exit("chunkString"),u(p)):(t.consume(p),l||(l=!Jn(p)),p===92?h:f)}function h(p){return p===91||p===92||p===93?(t.consume(p),s++,f):f(p)}}function _ue(t,e,n,r,i,o){let a;return s;function s(h){return h===34||h===39||h===40?(t.enter(r),t.enter(i),t.consume(h),t.exit(i),a=h===40?41:h,l):n(h)}function l(h){return h===a?(t.enter(i),t.consume(h),t.exit(i),t.exit(r),e):(t.enter(o),c(h))}function c(h){return h===a?(t.exit(o),l(a)):h===null?n(h):on(h)?(t.enter("lineEnding"),t.consume(h),t.exit("lineEnding"),Tr(t,c,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),u(h))}function u(h){return h===a||h===null||on(h)?(t.exit("chunkString"),c(h)):(t.consume(h),h===92?f:u)}function f(h){return h===a||h===92?(t.consume(h),u):u(h)}}function Qw(t,e){let n;return r;function r(i){return on(i)?(t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),n=!0,r):Jn(i)?Tr(t,r,n?"linePrefix":"lineSuffix")(i):e(i)}}const XJe={name:"definition",tokenize:JJe},KJe={partial:!0,tokenize:ZJe};function JJe(t,e,n){const r=this;let i;return o;function o(p){return t.enter("definition"),a(p)}function a(p){return Eue.call(r,t,s,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(p)}function s(p){return i=sv(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),p===58?(t.enter("definitionMarker"),t.consume(p),t.exit("definitionMarker"),l):n(p)}function l(p){return Ka(p)?Qw(t,c)(p):c(p)}function c(p){return Sue(t,u,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(p)}function u(p){return t.attempt(KJe,f,f)(p)}function f(p){return Jn(p)?Tr(t,h,"whitespace")(p):h(p)}function h(p){return p===null||on(p)?(t.exit("definition"),r.parser.defined.push(i),e(p)):n(p)}}function ZJe(t,e,n){return r;function r(s){return Ka(s)?Qw(t,i)(s):n(s)}function i(s){return _ue(t,o,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(s)}function o(s){return Jn(s)?Tr(t,a,"whitespace")(s):a(s)}function a(s){return s===null||on(s)?e(s):n(s)}}const QJe={name:"hardBreakEscape",tokenize:eZe};function eZe(t,e,n){return r;function r(o){return t.enter("hardBreakEscape"),t.consume(o),i}function i(o){return on(o)?(t.exit("hardBreakEscape"),e(o)):n(o)}}const tZe={name:"headingAtx",resolve:nZe,tokenize:rZe};function nZe(t,e){let n=t.length-2,r=3,i,o;return t[r][1].type==="whitespace"&&(r+=2),n-2>r&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&t[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:t[r][1].start,end:t[n][1].end},o={type:"chunkText",start:t[r][1].start,end:t[n][1].end,contentType:"text"},ru(t,r,n-r+1,[["enter",i,e],["enter",o,e],["exit",o,e],["exit",i,e]])),t}function rZe(t,e,n){let r=0;return i;function i(u){return t.enter("atxHeading"),o(u)}function o(u){return t.enter("atxHeadingSequence"),a(u)}function a(u){return u===35&&r++<6?(t.consume(u),a):u===null||Ka(u)?(t.exit("atxHeadingSequence"),s(u)):n(u)}function s(u){return u===35?(t.enter("atxHeadingSequence"),l(u)):u===null||on(u)?(t.exit("atxHeading"),e(u)):Jn(u)?Tr(t,s,"whitespace")(u):(t.enter("atxHeadingText"),c(u))}function l(u){return u===35?(t.consume(u),l):(t.exit("atxHeadingSequence"),s(u))}function c(u){return u===null||u===35||Ka(u)?(t.exit("atxHeadingText"),s(u)):(t.consume(u),c)}}const iZe=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],XX=["pre","script","style","textarea"],oZe={concrete:!0,name:"htmlFlow",resolveTo:lZe,tokenize:cZe},aZe={partial:!0,tokenize:dZe},sZe={partial:!0,tokenize:uZe};function lZe(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function cZe(t,e,n){const r=this;let i,o,a,s,l;return c;function c(W){return u(W)}function u(W){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(W),f}function f(W){return W===33?(t.consume(W),h):W===47?(t.consume(W),o=!0,g):W===63?(t.consume(W),i=3,r.interrupt?e:L):Uc(W)?(t.consume(W),a=String.fromCharCode(W),v):n(W)}function h(W){return W===45?(t.consume(W),i=2,p):W===91?(t.consume(W),i=5,s=0,y):Uc(W)?(t.consume(W),i=4,r.interrupt?e:L):n(W)}function p(W){return W===45?(t.consume(W),r.interrupt?e:L):n(W)}function y(W){const ne="CDATA[";return W===ne.charCodeAt(s++)?(t.consume(W),s===ne.length?r.interrupt?e:B:y):n(W)}function g(W){return Uc(W)?(t.consume(W),a=String.fromCharCode(W),v):n(W)}function v(W){if(W===null||W===47||W===62||Ka(W)){const ne=W===47,se=a.toLowerCase();return!ne&&!o&&XX.includes(se)?(i=1,r.interrupt?e(W):B(W)):iZe.includes(a.toLowerCase())?(i=6,ne?(t.consume(W),b):r.interrupt?e(W):B(W)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(W):o?w(W):T(W))}return W===45||Ms(W)?(t.consume(W),a+=String.fromCharCode(W),v):n(W)}function b(W){return W===62?(t.consume(W),r.interrupt?e:B):n(W)}function w(W){return Jn(W)?(t.consume(W),w):z(W)}function T(W){return W===47?(t.consume(W),z):W===58||W===95||Uc(W)?(t.consume(W),C):Jn(W)?(t.consume(W),T):z(W)}function C(W){return W===45||W===46||W===58||W===95||Ms(W)?(t.consume(W),C):P(W)}function P(W){return W===61?(t.consume(W),M):Jn(W)?(t.consume(W),P):T(W)}function M(W){return W===null||W===60||W===61||W===62||W===96?n(W):W===34||W===39?(t.consume(W),l=W,k):Jn(W)?(t.consume(W),M):I(W)}function k(W){return W===l?(t.consume(W),l=null,U):W===null||on(W)?n(W):(t.consume(W),k)}function I(W){return W===null||W===34||W===39||W===47||W===60||W===61||W===62||W===96||Ka(W)?P(W):(t.consume(W),I)}function U(W){return W===47||W===62||Jn(W)?T(W):n(W)}function z(W){return W===62?(t.consume(W),O):n(W)}function O(W){return W===null||on(W)?B(W):Jn(W)?(t.consume(W),O):n(W)}function B(W){return W===45&&i===2?(t.consume(W),K):W===60&&i===1?(t.consume(W),Z):W===62&&i===4?(t.consume(W),N):W===63&&i===3?(t.consume(W),L):W===93&&i===5?(t.consume(W),Y):on(W)&&(i===6||i===7)?(t.exit("htmlFlowData"),t.check(aZe,V,$)(W)):W===null||on(W)?(t.exit("htmlFlowData"),$(W)):(t.consume(W),B)}function $(W){return t.check(sZe,F,V)(W)}function F(W){return t.enter("lineEnding"),t.consume(W),t.exit("lineEnding"),J}function J(W){return W===null||on(W)?$(W):(t.enter("htmlFlowData"),B(W))}function K(W){return W===45?(t.consume(W),L):B(W)}function Z(W){return W===47?(t.consume(W),a="",H):B(W)}function H(W){if(W===62){const ne=a.toLowerCase();return XX.includes(ne)?(t.consume(W),N):B(W)}return Uc(W)&&a.length<8?(t.consume(W),a+=String.fromCharCode(W),H):B(W)}function Y(W){return W===93?(t.consume(W),L):B(W)}function L(W){return W===62?(t.consume(W),N):W===45&&i===2?(t.consume(W),L):B(W)}function N(W){return W===null||on(W)?(t.exit("htmlFlowData"),V(W)):(t.consume(W),N)}function V(W){return t.exit("htmlFlow"),e(W)}}function uZe(t,e,n){const r=this;return i;function i(a){return on(a)?(t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),o):n(a)}function o(a){return r.parser.lazy[r.now().line]?n(a):e(a)}}function dZe(t,e,n){return r;function r(i){return t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),t.attempt(P2,e,n)}}const fZe={name:"htmlText",tokenize:hZe};function hZe(t,e,n){const r=this;let i,o,a;return s;function s(L){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(L),l}function l(L){return L===33?(t.consume(L),c):L===47?(t.consume(L),P):L===63?(t.consume(L),T):Uc(L)?(t.consume(L),I):n(L)}function c(L){return L===45?(t.consume(L),u):L===91?(t.consume(L),o=0,y):Uc(L)?(t.consume(L),w):n(L)}function u(L){return L===45?(t.consume(L),p):n(L)}function f(L){return L===null?n(L):L===45?(t.consume(L),h):on(L)?(a=f,Z(L)):(t.consume(L),f)}function h(L){return L===45?(t.consume(L),p):f(L)}function p(L){return L===62?K(L):L===45?h(L):f(L)}function y(L){const N="CDATA[";return L===N.charCodeAt(o++)?(t.consume(L),o===N.length?g:y):n(L)}function g(L){return L===null?n(L):L===93?(t.consume(L),v):on(L)?(a=g,Z(L)):(t.consume(L),g)}function v(L){return L===93?(t.consume(L),b):g(L)}function b(L){return L===62?K(L):L===93?(t.consume(L),b):g(L)}function w(L){return L===null||L===62?K(L):on(L)?(a=w,Z(L)):(t.consume(L),w)}function T(L){return L===null?n(L):L===63?(t.consume(L),C):on(L)?(a=T,Z(L)):(t.consume(L),T)}function C(L){return L===62?K(L):T(L)}function P(L){return Uc(L)?(t.consume(L),M):n(L)}function M(L){return L===45||Ms(L)?(t.consume(L),M):k(L)}function k(L){return on(L)?(a=k,Z(L)):Jn(L)?(t.consume(L),k):K(L)}function I(L){return L===45||Ms(L)?(t.consume(L),I):L===47||L===62||Ka(L)?U(L):n(L)}function U(L){return L===47?(t.consume(L),K):L===58||L===95||Uc(L)?(t.consume(L),z):on(L)?(a=U,Z(L)):Jn(L)?(t.consume(L),U):K(L)}function z(L){return L===45||L===46||L===58||L===95||Ms(L)?(t.consume(L),z):O(L)}function O(L){return L===61?(t.consume(L),B):on(L)?(a=O,Z(L)):Jn(L)?(t.consume(L),O):U(L)}function B(L){return L===null||L===60||L===61||L===62||L===96?n(L):L===34||L===39?(t.consume(L),i=L,$):on(L)?(a=B,Z(L)):Jn(L)?(t.consume(L),B):(t.consume(L),F)}function $(L){return L===i?(t.consume(L),i=void 0,J):L===null?n(L):on(L)?(a=$,Z(L)):(t.consume(L),$)}function F(L){return L===null||L===34||L===39||L===60||L===61||L===96?n(L):L===47||L===62||Ka(L)?U(L):(t.consume(L),F)}function J(L){return L===47||L===62||Ka(L)?U(L):n(L)}function K(L){return L===62?(t.consume(L),t.exit("htmlTextData"),t.exit("htmlText"),e):n(L)}function Z(L){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(L),t.exit("lineEnding"),H}function H(L){return Jn(L)?Tr(t,Y,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(L):Y(L)}function Y(L){return t.enter("htmlTextData"),a(L)}}const Dz={name:"labelEnd",resolveAll:yZe,resolveTo:vZe,tokenize:xZe},pZe={tokenize:wZe},mZe={tokenize:bZe},gZe={tokenize:SZe};function yZe(t){let e=-1;const n=[];for(;++e<t.length;){const r=t[e][1];if(n.push(t[e]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",e+=i}}return t.length!==n.length&&ru(t,0,t.length,n),t}function vZe(t,e){let n=t.length,r=0,i,o,a,s;for(;n--;)if(i=t[n][1],o){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;t[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(a){if(t[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(o=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(a=n);const l={type:t[o][1].type==="labelLink"?"link":"image",start:{...t[o][1].start},end:{...t[t.length-1][1].end}},c={type:"label",start:{...t[o][1].start},end:{...t[a][1].end}},u={type:"labelText",start:{...t[o+r+2][1].end},end:{...t[a-2][1].start}};return s=[["enter",l,e],["enter",c,e]],s=el(s,t.slice(o+1,o+r+3)),s=el(s,[["enter",u,e]]),s=el(s,Lz(e.parser.constructs.insideSpan.null,t.slice(o+r+4,a-3),e)),s=el(s,[["exit",u,e],t[a-2],t[a-1],["exit",c,e]]),s=el(s,t.slice(a+1)),s=el(s,[["exit",l,e]]),ru(t,o,t.length,s),t}function xZe(t,e,n){const r=this;let i=r.events.length,o,a;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){o=r.events[i][1];break}return s;function s(h){return o?o._inactive?f(h):(a=r.parser.defined.includes(sv(r.sliceSerialize({start:o.end,end:r.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(h),t.exit("labelMarker"),t.exit("labelEnd"),l):n(h)}function l(h){return h===40?t.attempt(pZe,u,a?u:f)(h):h===91?t.attempt(mZe,u,a?c:f)(h):a?u(h):f(h)}function c(h){return t.attempt(gZe,u,f)(h)}function u(h){return e(h)}function f(h){return o._balanced=!0,n(h)}}function wZe(t,e,n){return r;function r(f){return t.enter("resource"),t.enter("resourceMarker"),t.consume(f),t.exit("resourceMarker"),i}function i(f){return Ka(f)?Qw(t,o)(f):o(f)}function o(f){return f===41?u(f):Sue(t,a,s,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(f)}function a(f){return Ka(f)?Qw(t,l)(f):u(f)}function s(f){return n(f)}function l(f){return f===34||f===39||f===40?_ue(t,c,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(f):u(f)}function c(f){return Ka(f)?Qw(t,u)(f):u(f)}function u(f){return f===41?(t.enter("resourceMarker"),t.consume(f),t.exit("resourceMarker"),t.exit("resource"),e):n(f)}}function bZe(t,e,n){const r=this;return i;function i(s){return Eue.call(r,t,o,a,"reference","referenceMarker","referenceString")(s)}function o(s){return r.parser.defined.includes(sv(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(s):n(s)}function a(s){return n(s)}}function SZe(t,e,n){return r;function r(o){return t.enter("reference"),t.enter("referenceMarker"),t.consume(o),t.exit("referenceMarker"),i}function i(o){return o===93?(t.enter("referenceMarker"),t.consume(o),t.exit("referenceMarker"),t.exit("reference"),e):n(o)}}const EZe={name:"labelStartImage",resolveAll:Dz.resolveAll,tokenize:_Ze};function _Ze(t,e,n){const r=this;return i;function i(s){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(s),t.exit("labelImageMarker"),o}function o(s){return s===91?(t.enter("labelMarker"),t.consume(s),t.exit("labelMarker"),t.exit("labelImage"),a):n(s)}function a(s){return s===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(s):e(s)}}const TZe={name:"labelStartLink",resolveAll:Dz.resolveAll,tokenize:CZe};function CZe(t,e,n){const r=this;return i;function i(a){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(a),t.exit("labelMarker"),t.exit("labelLink"),o}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):e(a)}}const AI={name:"lineEnding",tokenize:AZe};function AZe(t,e){return n;function n(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),Tr(t,e,"linePrefix")}}const dT={name:"thematicBreak",tokenize:MZe};function MZe(t,e,n){let r=0,i;return o;function o(c){return t.enter("thematicBreak"),a(c)}function a(c){return i=c,s(c)}function s(c){return c===i?(t.enter("thematicBreakSequence"),l(c)):r>=3&&(c===null||on(c))?(t.exit("thematicBreak"),e(c)):n(c)}function l(c){return c===i?(t.consume(c),r++,l):(t.exit("thematicBreakSequence"),Jn(c)?Tr(t,s,"whitespace")(c):s(c))}}const Ga={continuation:{tokenize:RZe},exit:IZe,name:"list",tokenize:NZe},PZe={partial:!0,tokenize:OZe},kZe={partial:!0,tokenize:jZe};function NZe(t,e,n){const r=this,i=r.events[r.events.length-1];let o=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,a=0;return s;function s(p){const y=r.containerState.type||(p===42||p===43||p===45?"listUnordered":"listOrdered");if(y==="listUnordered"?!r.containerState.marker||p===r.containerState.marker:JD(p)){if(r.containerState.type||(r.containerState.type=y,t.enter(y,{_container:!0})),y==="listUnordered")return t.enter("listItemPrefix"),p===42||p===45?t.check(dT,n,c)(p):c(p);if(!r.interrupt||p===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),l(p)}return n(p)}function l(p){return JD(p)&&++a<10?(t.consume(p),l):(!r.interrupt||a<2)&&(r.containerState.marker?p===r.containerState.marker:p===41||p===46)?(t.exit("listItemValue"),c(p)):n(p)}function c(p){return t.enter("listItemMarker"),t.consume(p),t.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||p,t.check(P2,r.interrupt?n:u,t.attempt(PZe,h,f))}function u(p){return r.containerState.initialBlankLine=!0,o++,h(p)}function f(p){return Jn(p)?(t.enter("listItemPrefixWhitespace"),t.consume(p),t.exit("listItemPrefixWhitespace"),h):n(p)}function h(p){return r.containerState.size=o+r.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(p)}}function RZe(t,e,n){const r=this;return r.containerState._closeFlow=void 0,t.check(P2,i,o);function i(s){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Tr(t,e,"listItemIndent",r.containerState.size+1)(s)}function o(s){return r.containerState.furtherBlankLines||!Jn(s)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,a(s)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,t.attempt(kZe,e,a)(s))}function a(s){return r.containerState._closeFlow=!0,r.interrupt=void 0,Tr(t,t.attempt(Ga,e,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(s)}}function jZe(t,e,n){const r=this;return Tr(t,i,"listItemIndent",r.containerState.size+1);function i(o){const a=r.events[r.events.length-1];return a&&a[1].type==="listItemIndent"&&a[2].sliceSerialize(a[1],!0).length===r.containerState.size?e(o):n(o)}}function IZe(t){t.exit(this.containerState.type)}function OZe(t,e,n){const r=this;return Tr(t,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(o){const a=r.events[r.events.length-1];return!Jn(o)&&a&&a[1].type==="listItemPrefixWhitespace"?e(o):n(o)}}const KX={name:"setextUnderline",resolveTo:LZe,tokenize:DZe};function LZe(t,e){let n=t.length,r,i,o;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){r=n;break}t[n][1].type==="paragraph"&&(i=n)}else t[n][1].type==="content"&&t.splice(n,1),!o&&t[n][1].type==="definition"&&(o=n);const a={type:"setextHeading",start:{...t[r][1].start},end:{...t[t.length-1][1].end}};return t[i][1].type="setextHeadingText",o?(t.splice(i,0,["enter",a,e]),t.splice(o+1,0,["exit",t[r][1],e]),t[r][1].end={...t[o][1].end}):t[r][1]=a,t.push(["exit",a,e]),t}function DZe(t,e,n){const r=this;let i;return o;function o(c){let u=r.events.length,f;for(;u--;)if(r.events[u][1].type!=="lineEnding"&&r.events[u][1].type!=="linePrefix"&&r.events[u][1].type!=="content"){f=r.events[u][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||f)?(t.enter("setextHeadingLine"),i=c,a(c)):n(c)}function a(c){return t.enter("setextHeadingLineSequence"),s(c)}function s(c){return c===i?(t.consume(c),s):(t.exit("setextHeadingLineSequence"),Jn(c)?Tr(t,l,"lineSuffix")(c):l(c))}function l(c){return c===null||on(c)?(t.exit("setextHeadingLine"),e(c)):n(c)}}const FZe={tokenize:zZe};function zZe(t){const e=this,n=t.attempt(P2,r,t.attempt(this.parser.constructs.flowInitial,i,Tr(t,t.attempt(this.parser.constructs.flow,i,t.attempt(VJe,i)),"linePrefix")));return n;function r(o){if(o===null){t.consume(o);return}return t.enter("lineEndingBlank"),t.consume(o),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function i(o){if(o===null){t.consume(o);return}return t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const UZe={resolveAll:Cue()},BZe=Tue("string"),$Ze=Tue("text");function Tue(t){return{resolveAll:Cue(t==="text"?HZe:void 0),tokenize:e};function e(n){const r=this,i=this.parser.constructs[t],o=n.attempt(i,a,s);return a;function a(u){return c(u)?o(u):s(u)}function s(u){if(u===null){n.consume(u);return}return n.enter("data"),n.consume(u),l}function l(u){return c(u)?(n.exit("data"),o(u)):(n.consume(u),l)}function c(u){if(u===null)return!0;const f=i[u];let h=-1;if(f)for(;++h<f.length;){const p=f[h];if(!p.previous||p.previous.call(r,r.previous))return!0}return!1}}}function Cue(t){return e;function e(n,r){let i=-1,o;for(;++i<=n.length;)o===void 0?n[i]&&n[i][1].type==="data"&&(o=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==o+2&&(n[o][1].end=n[i-1][1].end,n.splice(o+2,i-o-2),i=o+2),o=void 0);return t?t(n,r):n}}function HZe(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const r=t[n-1][1],i=e.sliceStream(r);let o=i.length,a=-1,s=0,l;for(;o--;){const c=i[o];if(typeof c=="string"){for(a=c.length;c.charCodeAt(a-1)===32;)s++,a--;if(a)break;a=-1}else if(c===-2)l=!0,s++;else if(c!==-1){o++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(s=0),s){const c={type:n===t.length||l||s<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:o?a:r.start._bufferIndex+a,_index:r.start._index+o,line:r.end.line,column:r.end.column-s,offset:r.end.offset-s},end:{...r.end}};r.end={...c.start},r.start.offset===r.end.offset?Object.assign(r,c):(t.splice(n,0,["enter",c,e],["exit",c,e]),n+=2)}n++}return t}const VZe={42:Ga,43:Ga,45:Ga,48:Ga,49:Ga,50:Ga,51:Ga,52:Ga,53:Ga,54:Ga,55:Ga,56:Ga,57:Ga,62:vue},WZe={91:XJe},GZe={[-2]:CI,[-1]:CI,32:CI},qZe={35:tZe,42:dT,45:[KX,dT],60:oZe,61:KX,95:dT,96:YX,126:YX},YZe={38:wue,92:xue},XZe={[-5]:AI,[-4]:AI,[-3]:AI,33:EZe,38:wue,42:ZD,60:[TJe,fZe],91:TZe,92:[QJe,xue],93:Dz,95:ZD,96:FJe},KZe={null:[ZD,UZe]},JZe={null:[42,95]},ZZe={null:[]},QZe=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:JZe,contentInitial:WZe,disable:ZZe,document:VZe,flow:qZe,flowInitial:GZe,insideSpan:KZe,string:YZe,text:XZe},Symbol.toStringTag,{value:"Module"}));function eQe(t,e,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const i={},o=[];let a=[],s=[];const l={attempt:k(P),check:k(M),consume:w,enter:T,exit:C,interrupt:k(M,{interrupt:!0})},c={code:null,containerState:{},defineSkip:g,events:[],now:y,parser:t,previous:null,sliceSerialize:h,sliceStream:p,write:f};let u=e.tokenize.call(c,l);return e.resolveAll&&o.push(e),c;function f(O){return a=el(a,O),v(),a[a.length-1]!==null?[]:(I(e,0),c.events=Lz(o,c.events,c),c.events)}function h(O,B){return nQe(p(O),B)}function p(O){return tQe(a,O)}function y(){const{_bufferIndex:O,_index:B,line:$,column:F,offset:J}=r;return{_bufferIndex:O,_index:B,line:$,column:F,offset:J}}function g(O){i[O.line]=O.column,z()}function v(){let O;for(;r._index<a.length;){const B=a[r._index];if(typeof B=="string")for(O=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===O&&r._bufferIndex<B.length;)b(B.charCodeAt(r._bufferIndex));else b(B)}}function b(O){u=u(O)}function w(O){on(O)?(r.line++,r.column=1,r.offset+=O===-3?2:1,z()):O!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===a[r._index].length&&(r._bufferIndex=-1,r._index++)),c.previous=O}function T(O,B){const $=B||{};return $.type=O,$.start=y(),c.events.push(["enter",$,c]),s.push($),$}function C(O){const B=s.pop();return B.end=y(),c.events.push(["exit",B,c]),B}function P(O,B){I(O,B.from)}function M(O,B){B.restore()}function k(O,B){return $;function $(F,J,K){let Z,H,Y,L;return Array.isArray(F)?V(F):"tokenize"in F?V([F]):N(F);function N(te){return ie;function ie(pe){const de=pe!==null&&te[pe],ce=pe!==null&&te.null,he=[...Array.isArray(de)?de:de?[de]:[],...Array.isArray(ce)?ce:ce?[ce]:[]];return V(he)(pe)}}function V(te){return Z=te,H=0,te.length===0?K:W(te[H])}function W(te){return ie;function ie(pe){return L=U(),Y=te,te.partial||(c.currentConstruct=te),te.name&&c.parser.constructs.disable.null.includes(te.name)?se():te.tokenize.call(B?Object.assign(Object.create(c),B):c,l,ne,se)(pe)}}function ne(te){return O(Y,L),J}function se(te){return L.restore(),++H<Z.length?W(Z[H]):K}}}function I(O,B){O.resolveAll&&!o.includes(O)&&o.push(O),O.resolve&&ru(c.events,B,c.events.length-B,O.resolve(c.events.slice(B),c)),O.resolveTo&&(c.events=O.resolveTo(c.events,c))}function U(){const O=y(),B=c.previous,$=c.currentConstruct,F=c.events.length,J=Array.from(s);return{from:F,restore:K};function K(){r=O,c.previous=B,c.currentConstruct=$,c.events.length=F,s=J,z()}}function z(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function tQe(t,e){const n=e.start._index,r=e.start._bufferIndex,i=e.end._index,o=e.end._bufferIndex;let a;if(n===i)a=[t[n].slice(r,o)];else{if(a=t.slice(n,i),r>-1){const s=a[0];typeof s=="string"?a[0]=s.slice(r):a.shift()}o>0&&a.push(t[i].slice(0,o))}return a}function nQe(t,e){let n=-1;const r=[];let i;for(;++n<t.length;){const o=t[n];let a;if(typeof o=="string")a=o;else switch(o){case-5:{a="\r";break}case-4:{a=`
`;break}case-3:{a=`\r
`;break}case-2:{a=e?" ":"	";break}case-1:{if(!e&&i)continue;a=" ";break}default:a=String.fromCharCode(o)}i=o===-2,r.push(a)}return r.join("")}function rQe(t){const r={constructs:uJe([QZe,...(t||{}).extensions||[]]),content:i(vJe),defined:[],document:i(wJe),flow:i(FZe),lazy:{},string:i(BZe),text:i($Ze)};return r;function i(o){return a;function a(s){return eQe(r,o,s)}}}function iQe(t){for(;!bue(t););return t}const JX=/[\0\t\n\r]/g;function oQe(){let t=1,e="",n=!0,r;return i;function i(o,a,s){const l=[];let c,u,f,h,p;for(o=e+(typeof o=="string"?o.toString():new TextDecoder(a||void 0).decode(o)),f=0,e="",n&&(o.charCodeAt(0)===65279&&f++,n=void 0);f<o.length;){if(JX.lastIndex=f,c=JX.exec(o),h=c&&c.index!==void 0?c.index:o.length,p=o.charCodeAt(h),!c){e=o.slice(f);break}if(p===10&&f===h&&r)l.push(-3),r=void 0;else switch(r&&(l.push(-5),r=void 0),f<h&&(l.push(o.slice(f,h)),t+=h-f),p){case 0:{l.push(65533),t++;break}case 9:{for(u=Math.ceil(t/4)*4,l.push(-2);t++<u;)l.push(-1);break}case 10:{l.push(-4),t=1;break}default:r=!0,t=1}f=h+1}return s&&(r&&l.push(-5),e&&l.push(e),l.push(null)),l}}const aQe=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function sQe(t){return t.replace(aQe,lQe)}function lQe(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),o=i===120||i===88;return yue(n.slice(o?2:1),o?16:10)}return Oz(n)||t}const Aue={}.hasOwnProperty;function cQe(t,e,n){return typeof e!="string"&&(n=e,e=void 0),uQe(n)(iQe(rQe(n).document().write(oQe()(t,e,!0))))}function uQe(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:o(Se),autolinkProtocol:U,autolinkEmail:U,atxHeading:o(Ae),blockQuote:o(ce),characterEscape:U,characterReference:U,codeFenced:o(he),codeFencedFenceInfo:a,codeFencedFenceMeta:a,codeIndented:o(he,a),codeText:o(ee,a),codeTextData:U,data:U,codeFlowValue:U,definition:o(xe),definitionDestinationString:a,definitionLabelString:a,definitionTitleString:a,emphasis:o(be),hardBreakEscape:o(Ce),hardBreakTrailing:o(Ce),htmlFlow:o(oe,a),htmlFlowData:U,htmlText:o(oe,a),htmlTextData:U,image:o(ae),label:a,link:o(Se),listItem:o(ye),listItemValue:h,listOrdered:o(me,f),listUnordered:o(me),paragraph:o(Ie),reference:W,referenceString:a,resourceDestinationString:a,resourceTitleString:a,setextHeading:o(Ae),strong:o(De),thematicBreak:o($e)},exit:{atxHeading:l(),atxHeadingSequence:P,autolink:l(),autolinkEmail:de,autolinkProtocol:pe,blockQuote:l(),characterEscapeValue:z,characterReferenceMarkerHexadecimal:se,characterReferenceMarkerNumeric:se,characterReferenceValue:te,characterReference:ie,codeFenced:l(v),codeFencedFence:g,codeFencedFenceInfo:p,codeFencedFenceMeta:y,codeFlowValue:z,codeIndented:l(b),codeText:l(J),codeTextData:z,data:z,definition:l(),definitionDestinationString:C,definitionLabelString:w,definitionTitleString:T,emphasis:l(),hardBreakEscape:l(B),hardBreakTrailing:l(B),htmlFlow:l($),htmlFlowData:z,htmlText:l(F),htmlTextData:z,image:l(Z),label:Y,labelText:H,lineEnding:O,link:l(K),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:ne,resourceDestinationString:L,resourceTitleString:N,resource:V,setextHeading:l(I),setextHeadingLineSequence:k,setextHeadingText:M,strong:l(),thematicBreak:l()}};Mue(e,(t||{}).mdastExtensions||[]);const n={};return r;function r(we){let fe={type:"root",children:[]};const ke={stack:[fe],tokenStack:[],config:e,enter:s,exit:c,buffer:a,resume:u,data:n},Ne=[];let qe=-1;for(;++qe<we.length;)if(we[qe][1].type==="listOrdered"||we[qe][1].type==="listUnordered")if(we[qe][0]==="enter")Ne.push(qe);else{const tt=Ne.pop();qe=i(we,tt,qe)}for(qe=-1;++qe<we.length;){const tt=e[we[qe][0]];Aue.call(tt,we[qe][1].type)&&tt[we[qe][1].type].call(Object.assign({sliceSerialize:we[qe][2].sliceSerialize},ke),we[qe][1])}if(ke.tokenStack.length>0){const tt=ke.tokenStack[ke.tokenStack.length-1];(tt[1]||ZX).call(ke,void 0,tt[0])}for(fe.position={start:bf(we.length>0?we[0][1].start:{line:1,column:1,offset:0}),end:bf(we.length>0?we[we.length-2][1].end:{line:1,column:1,offset:0})},qe=-1;++qe<e.transforms.length;)fe=e.transforms[qe](fe)||fe;return fe}function i(we,fe,ke){let Ne=fe-1,qe=-1,tt=!1,ot,St,dt,ft;for(;++Ne<=ke;){const Ee=we[Ne];switch(Ee[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Ee[0]==="enter"?qe++:qe--,ft=void 0;break}case"lineEndingBlank":{Ee[0]==="enter"&&(ot&&!ft&&!qe&&!dt&&(dt=Ne),ft=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:ft=void 0}if(!qe&&Ee[0]==="enter"&&Ee[1].type==="listItemPrefix"||qe===-1&&Ee[0]==="exit"&&(Ee[1].type==="listUnordered"||Ee[1].type==="listOrdered")){if(ot){let Ve=Ne;for(St=void 0;Ve--;){const Xe=we[Ve];if(Xe[1].type==="lineEnding"||Xe[1].type==="lineEndingBlank"){if(Xe[0]==="exit")continue;St&&(we[St][1].type="lineEndingBlank",tt=!0),Xe[1].type="lineEnding",St=Ve}else if(!(Xe[1].type==="linePrefix"||Xe[1].type==="blockQuotePrefix"||Xe[1].type==="blockQuotePrefixWhitespace"||Xe[1].type==="blockQuoteMarker"||Xe[1].type==="listItemIndent"))break}dt&&(!St||dt<St)&&(ot._spread=!0),ot.end=Object.assign({},St?we[St][1].start:Ee[1].end),we.splice(St||Ne,0,["exit",ot,Ee[2]]),Ne++,ke++}if(Ee[1].type==="listItemPrefix"){const Ve={type:"listItem",_spread:!1,start:Object.assign({},Ee[1].start),end:void 0};ot=Ve,we.splice(Ne,0,["enter",Ve,Ee[2]]),Ne++,ke++,dt=void 0,ft=!0}}}return we[fe][1]._spread=tt,ke}function o(we,fe){return ke;function ke(Ne){s.call(this,we(Ne),Ne),fe&&fe.call(this,Ne)}}function a(){this.stack.push({type:"fragment",children:[]})}function s(we,fe,ke){this.stack[this.stack.length-1].children.push(we),this.stack.push(we),this.tokenStack.push([fe,ke||void 0]),we.position={start:bf(fe.start),end:void 0}}function l(we){return fe;function fe(ke){we&&we.call(this,ke),c.call(this,ke)}}function c(we,fe){const ke=this.stack.pop(),Ne=this.tokenStack.pop();if(Ne)Ne[0].type!==we.type&&(fe?fe.call(this,we,Ne[0]):(Ne[1]||ZX).call(this,we,Ne[0]));else throw new Error("Cannot close `"+we.type+"` ("+Zw({start:we.start,end:we.end})+"): its not open");ke.position.end=bf(we.end)}function u(){return lJe(this.stack.pop())}function f(){this.data.expectingFirstListItemValue=!0}function h(we){if(this.data.expectingFirstListItemValue){const fe=this.stack[this.stack.length-2];fe.start=Number.parseInt(this.sliceSerialize(we),10),this.data.expectingFirstListItemValue=void 0}}function p(){const we=this.resume(),fe=this.stack[this.stack.length-1];fe.lang=we}function y(){const we=this.resume(),fe=this.stack[this.stack.length-1];fe.meta=we}function g(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function v(){const we=this.resume(),fe=this.stack[this.stack.length-1];fe.value=we.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function b(){const we=this.resume(),fe=this.stack[this.stack.length-1];fe.value=we.replace(/(\r?\n|\r)$/g,"")}function w(we){const fe=this.resume(),ke=this.stack[this.stack.length-1];ke.label=fe,ke.identifier=sv(this.sliceSerialize(we)).toLowerCase()}function T(){const we=this.resume(),fe=this.stack[this.stack.length-1];fe.title=we}function C(){const we=this.resume(),fe=this.stack[this.stack.length-1];fe.url=we}function P(we){const fe=this.stack[this.stack.length-1];if(!fe.depth){const ke=this.sliceSerialize(we).length;fe.depth=ke}}function M(){this.data.setextHeadingSlurpLineEnding=!0}function k(we){const fe=this.stack[this.stack.length-1];fe.depth=this.sliceSerialize(we).codePointAt(0)===61?1:2}function I(){this.data.setextHeadingSlurpLineEnding=void 0}function U(we){const ke=this.stack[this.stack.length-1].children;let Ne=ke[ke.length-1];(!Ne||Ne.type!=="text")&&(Ne=Ue(),Ne.position={start:bf(we.start),end:void 0},ke.push(Ne)),this.stack.push(Ne)}function z(we){const fe=this.stack.pop();fe.value+=this.sliceSerialize(we),fe.position.end=bf(we.end)}function O(we){const fe=this.stack[this.stack.length-1];if(this.data.atHardBreak){const ke=fe.children[fe.children.length-1];ke.position.end=bf(we.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(fe.type)&&(U.call(this,we),z.call(this,we))}function B(){this.data.atHardBreak=!0}function $(){const we=this.resume(),fe=this.stack[this.stack.length-1];fe.value=we}function F(){const we=this.resume(),fe=this.stack[this.stack.length-1];fe.value=we}function J(){const we=this.resume(),fe=this.stack[this.stack.length-1];fe.value=we}function K(){const we=this.stack[this.stack.length-1];if(this.data.inReference){const fe=this.data.referenceType||"shortcut";we.type+="Reference",we.referenceType=fe,delete we.url,delete we.title}else delete we.identifier,delete we.label;this.data.referenceType=void 0}function Z(){const we=this.stack[this.stack.length-1];if(this.data.inReference){const fe=this.data.referenceType||"shortcut";we.type+="Reference",we.referenceType=fe,delete we.url,delete we.title}else delete we.identifier,delete we.label;this.data.referenceType=void 0}function H(we){const fe=this.sliceSerialize(we),ke=this.stack[this.stack.length-2];ke.label=sQe(fe),ke.identifier=sv(fe).toLowerCase()}function Y(){const we=this.stack[this.stack.length-1],fe=this.resume(),ke=this.stack[this.stack.length-1];if(this.data.inReference=!0,ke.type==="link"){const Ne=we.children;ke.children=Ne}else ke.alt=fe}function L(){const we=this.resume(),fe=this.stack[this.stack.length-1];fe.url=we}function N(){const we=this.resume(),fe=this.stack[this.stack.length-1];fe.title=we}function V(){this.data.inReference=void 0}function W(){this.data.referenceType="collapsed"}function ne(we){const fe=this.resume(),ke=this.stack[this.stack.length-1];ke.label=fe,ke.identifier=sv(this.sliceSerialize(we)).toLowerCase(),this.data.referenceType="full"}function se(we){this.data.characterReferenceType=we.type}function te(we){const fe=this.sliceSerialize(we),ke=this.data.characterReferenceType;let Ne;ke?(Ne=yue(fe,ke==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Ne=Oz(fe);const qe=this.stack[this.stack.length-1];qe.value+=Ne}function ie(we){const fe=this.stack.pop();fe.position.end=bf(we.end)}function pe(we){z.call(this,we);const fe=this.stack[this.stack.length-1];fe.url=this.sliceSerialize(we)}function de(we){z.call(this,we);const fe=this.stack[this.stack.length-1];fe.url="mailto:"+this.sliceSerialize(we)}function ce(){return{type:"blockquote",children:[]}}function he(){return{type:"code",lang:null,meta:null,value:""}}function ee(){return{type:"inlineCode",value:""}}function xe(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function be(){return{type:"emphasis",children:[]}}function Ae(){return{type:"heading",depth:0,children:[]}}function Ce(){return{type:"break"}}function oe(){return{type:"html",value:""}}function ae(){return{type:"image",title:null,url:"",alt:null}}function Se(){return{type:"link",title:null,url:"",children:[]}}function me(we){return{type:"list",ordered:we.type==="listOrdered",start:null,spread:we._spread,children:[]}}function ye(we){return{type:"listItem",spread:we._spread,checked:null,children:[]}}function Ie(){return{type:"paragraph",children:[]}}function De(){return{type:"strong",children:[]}}function Ue(){return{type:"text",value:""}}function $e(){return{type:"thematicBreak"}}}function bf(t){return{line:t.line,column:t.column,offset:t.offset}}function Mue(t,e){let n=-1;for(;++n<e.length;){const r=e[n];Array.isArray(r)?Mue(t,r):dQe(t,r)}}function dQe(t,e){let n;for(n in e)if(Aue.call(e,n))switch(n){case"canContainEols":{const r=e[n];r&&t[n].push(...r);break}case"transforms":{const r=e[n];r&&t[n].push(...r);break}case"enter":case"exit":{const r=e[n];r&&Object.assign(t[n],r);break}}}function ZX(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+Zw({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+Zw({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+Zw({start:e.start,end:e.end})+") is still open")}function fQe(t){const e=this;e.parser=n;function n(r){return cQe(r,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function hQe(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function pQe(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function mQe(t,e){const n=e.value?e.value+`
`:"",r={};e.lang&&(r.className=["language-"+e.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return e.meta&&(i.data={meta:e.meta}),t.patch(e,i),i=t.applyData(e,i),i={type:"element",tagName:"pre",properties:{},children:[i]},t.patch(e,i),i}function gQe(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function yQe(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function vQe(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",r=String(e.identifier).toUpperCase(),i=G0(r.toLowerCase()),o=t.footnoteOrder.indexOf(r);let a,s=t.footnoteCounts.get(r);s===void 0?(s=0,t.footnoteOrder.push(r),a=t.footnoteOrder.length):a=o+1,s+=1,t.footnoteCounts.set(r,s);const l={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(s>1?"-"+s:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(a)}]};t.patch(e,l);const c={type:"element",tagName:"sup",properties:{},children:[l]};return t.patch(e,c),t.applyData(e,c)}function xQe(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function wQe(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function Pue(t,e){const n=e.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+r}];const i=t.all(e),o=i[0];o&&o.type==="text"?o.value="["+o.value:i.unshift({type:"text",value:"["});const a=i[i.length-1];return a&&a.type==="text"?a.value+=r:i.push({type:"text",value:r}),i}function bQe(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return Pue(t,e);const i={src:G0(r.url||""),alt:e.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const o={type:"element",tagName:"img",properties:i,children:[]};return t.patch(e,o),t.applyData(e,o)}function SQe(t,e){const n={src:G0(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,r),t.applyData(e,r)}function EQe(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,r),t.applyData(e,r)}function _Qe(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return Pue(t,e);const i={href:G0(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const o={type:"element",tagName:"a",properties:i,children:t.all(e)};return t.patch(e,o),t.applyData(e,o)}function TQe(t,e){const n={href:G0(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function CQe(t,e,n){const r=t.all(e),i=n?AQe(n):kue(e),o={},a=[];if(typeof e.checked=="boolean"){const u=r[0];let f;u&&u.type==="element"&&u.tagName==="p"?f=u:(f={type:"element",tagName:"p",properties:{},children:[]},r.unshift(f)),f.children.length>0&&f.children.unshift({type:"text",value:" "}),f.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),o.className=["task-list-item"]}let s=-1;for(;++s<r.length;){const u=r[s];(i||s!==0||u.type!=="element"||u.tagName!=="p")&&a.push({type:"text",value:`
`}),u.type==="element"&&u.tagName==="p"&&!i?a.push(...u.children):a.push(u)}const l=r[r.length-1];l&&(i||l.type!=="element"||l.tagName!=="p")&&a.push({type:"text",value:`
`});const c={type:"element",tagName:"li",properties:o,children:a};return t.patch(e,c),t.applyData(e,c)}function AQe(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let r=-1;for(;!e&&++r<n.length;)e=kue(n[r])}return e}function kue(t){const e=t.spread;return e??t.children.length>1}function MQe(t,e){const n={},r=t.all(e);let i=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++i<r.length;){const a=r[i];if(a.type==="element"&&a.tagName==="li"&&a.properties&&Array.isArray(a.properties.className)&&a.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const o={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(r,!0)};return t.patch(e,o),t.applyData(e,o)}function PQe(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function kQe(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function NQe(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function RQe(t,e){const n=t.all(e),r=n.shift(),i=[];if(r){const a={type:"element",tagName:"thead",properties:{},children:t.wrap([r],!0)};t.patch(e.children[0],a),i.push(a)}if(n.length>0){const a={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},s=Nz(e.children[1]),l=uue(e.children[e.children.length-1]);s&&l&&(a.position={start:s,end:l}),i.push(a)}const o={type:"element",tagName:"table",properties:{},children:t.wrap(i,!0)};return t.patch(e,o),t.applyData(e,o)}function jQe(t,e,n){const r=n?n.children:void 0,o=(r?r.indexOf(e):1)===0?"th":"td",a=n&&n.type==="table"?n.align:void 0,s=a?a.length:e.children.length;let l=-1;const c=[];for(;++l<s;){const f=e.children[l],h={},p=a?a[l]:void 0;p&&(h.align=p);let y={type:"element",tagName:o,properties:h,children:[]};f&&(y.children=t.all(f),t.patch(f,y),y=t.applyData(f,y)),c.push(y)}const u={type:"element",tagName:"tr",properties:{},children:t.wrap(c,!0)};return t.patch(e,u),t.applyData(e,u)}function IQe(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const QX=9,eK=32;function OQe(t){const e=String(t),n=/\r?\n|\r/g;let r=n.exec(e),i=0;const o=[];for(;r;)o.push(tK(e.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(e);return o.push(tK(e.slice(i),i>0,!1)),o.join("")}function tK(t,e,n){let r=0,i=t.length;if(e){let o=t.codePointAt(r);for(;o===QX||o===eK;)r++,o=t.codePointAt(r)}if(n){let o=t.codePointAt(i-1);for(;o===QX||o===eK;)i--,o=t.codePointAt(i-1)}return i>r?t.slice(r,i):""}function LQe(t,e){const n={type:"text",value:OQe(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function DQe(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const FQe={blockquote:hQe,break:pQe,code:mQe,delete:gQe,emphasis:yQe,footnoteReference:vQe,heading:xQe,html:wQe,imageReference:bQe,image:SQe,inlineCode:EQe,linkReference:_Qe,link:TQe,listItem:CQe,list:MQe,paragraph:PQe,root:kQe,strong:NQe,table:RQe,tableCell:IQe,tableRow:jQe,text:LQe,thematicBreak:DQe,toml:W_,yaml:W_,definition:W_,footnoteDefinition:W_};function W_(){}const Nue=-1,k2=0,eb=1,UC=2,Fz=3,zz=4,Uz=5,Bz=6,Rue=7,jue=8,nK=typeof self=="object"?self:globalThis,zQe=(t,e)=>{const n=(i,o)=>(t.set(o,i),i),r=i=>{if(t.has(i))return t.get(i);const[o,a]=e[i];switch(o){case k2:case Nue:return n(a,i);case eb:{const s=n([],i);for(const l of a)s.push(r(l));return s}case UC:{const s=n({},i);for(const[l,c]of a)s[r(l)]=r(c);return s}case Fz:return n(new Date(a),i);case zz:{const{source:s,flags:l}=a;return n(new RegExp(s,l),i)}case Uz:{const s=n(new Map,i);for(const[l,c]of a)s.set(r(l),r(c));return s}case Bz:{const s=n(new Set,i);for(const l of a)s.add(r(l));return s}case Rue:{const{name:s,message:l}=a;return n(new nK[s](l),i)}case jue:return n(BigInt(a),i);case"BigInt":return n(Object(BigInt(a)),i);case"ArrayBuffer":return n(new Uint8Array(a).buffer,a);case"DataView":{const{buffer:s}=new Uint8Array(a);return n(new DataView(s),a)}}return n(new nK[o](a),i)};return r},rK=t=>zQe(new Map,t)(0),vy="",{toString:UQe}={},{keys:BQe}=Object,vw=t=>{const e=typeof t;if(e!=="object"||!t)return[k2,e];const n=UQe.call(t).slice(8,-1);switch(n){case"Array":return[eb,vy];case"Object":return[UC,vy];case"Date":return[Fz,vy];case"RegExp":return[zz,vy];case"Map":return[Uz,vy];case"Set":return[Bz,vy];case"DataView":return[eb,n]}return n.includes("Array")?[eb,n]:n.includes("Error")?[Rue,n]:[UC,n]},G_=([t,e])=>t===k2&&(e==="function"||e==="symbol"),$Qe=(t,e,n,r)=>{const i=(a,s)=>{const l=r.push(a)-1;return n.set(s,l),l},o=a=>{if(n.has(a))return n.get(a);let[s,l]=vw(a);switch(s){case k2:{let u=a;switch(l){case"bigint":s=jue,u=a.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+l);u=null;break;case"undefined":return i([Nue],a)}return i([s,u],a)}case eb:{if(l){let h=a;return l==="DataView"?h=new Uint8Array(a.buffer):l==="ArrayBuffer"&&(h=new Uint8Array(a)),i([l,[...h]],a)}const u=[],f=i([s,u],a);for(const h of a)u.push(o(h));return f}case UC:{if(l)switch(l){case"BigInt":return i([l,a.toString()],a);case"Boolean":case"Number":case"String":return i([l,a.valueOf()],a)}if(e&&"toJSON"in a)return o(a.toJSON());const u=[],f=i([s,u],a);for(const h of BQe(a))(t||!G_(vw(a[h])))&&u.push([o(h),o(a[h])]);return f}case Fz:return i([s,a.toISOString()],a);case zz:{const{source:u,flags:f}=a;return i([s,{source:u,flags:f}],a)}case Uz:{const u=[],f=i([s,u],a);for(const[h,p]of a)(t||!(G_(vw(h))||G_(vw(p))))&&u.push([o(h),o(p)]);return f}case Bz:{const u=[],f=i([s,u],a);for(const h of a)(t||!G_(vw(h)))&&u.push(o(h));return f}}const{message:c}=a;return i([s,{name:l,message:c}],a)};return o},iK=(t,{json:e,lossy:n}={})=>{const r=[];return $Qe(!(e||n),!!e,new Map,r)(t),r},BC=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?rK(iK(t,e)):structuredClone(t):(t,e)=>rK(iK(t,e));function HQe(t,e){const n=[{type:"text",value:""}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function VQe(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function WQe(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||HQe,r=t.options.footnoteBackLabel||VQe,i=t.options.footnoteLabel||"Footnotes",o=t.options.footnoteLabelTagName||"h2",a=t.options.footnoteLabelProperties||{className:["sr-only"]},s=[];let l=-1;for(;++l<t.footnoteOrder.length;){const c=t.footnoteById.get(t.footnoteOrder[l]);if(!c)continue;const u=t.all(c),f=String(c.identifier).toUpperCase(),h=G0(f.toLowerCase());let p=0;const y=[],g=t.footnoteCounts.get(f);for(;g!==void 0&&++p<=g;){y.length>0&&y.push({type:"text",value:" "});let w=typeof n=="string"?n:n(l,p);typeof w=="string"&&(w={type:"text",value:w}),y.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+h+(p>1?"-"+p:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(l,p),className:["data-footnote-backref"]},children:Array.isArray(w)?w:[w]})}const v=u[u.length-1];if(v&&v.type==="element"&&v.tagName==="p"){const w=v.children[v.children.length-1];w&&w.type==="text"?w.value+=" ":v.children.push({type:"text",value:" "}),v.children.push(...y)}else u.push(...y);const b={type:"element",tagName:"li",properties:{id:e+"fn-"+h},children:t.wrap(u,!0)};t.patch(c,b),s.push(b)}if(s.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:o,properties:{...BC(a),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(s,!0)},{type:"text",value:`
`}]}}const Iue=function(t){if(t==null)return XQe;if(typeof t=="function")return N2(t);if(typeof t=="object")return Array.isArray(t)?GQe(t):qQe(t);if(typeof t=="string")return YQe(t);throw new Error("Expected function, string, or object as test")};function GQe(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=Iue(t[n]);return N2(r);function r(...i){let o=-1;for(;++o<e.length;)if(e[o].apply(this,i))return!0;return!1}}function qQe(t){const e=t;return N2(n);function n(r){const i=r;let o;for(o in t)if(i[o]!==e[o])return!1;return!0}}function YQe(t){return N2(e);function e(n){return n&&n.type===t}}function N2(t){return e;function e(n,r,i){return!!(KQe(n)&&t.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function XQe(){return!0}function KQe(t){return t!==null&&typeof t=="object"&&"type"in t}const Oue=[],JQe=!0,oK=!1,ZQe="skip";function QQe(t,e,n,r){let i;typeof e=="function"&&typeof n!="function"?(r=n,n=e):i=e;const o=Iue(i),a=r?-1:1;s(t,void 0,[])();function s(l,c,u){const f=l&&typeof l=="object"?l:{};if(typeof f.type=="string"){const p=typeof f.tagName=="string"?f.tagName:typeof f.name=="string"?f.name:void 0;Object.defineProperty(h,"name",{value:"node ("+(l.type+(p?"<"+p+">":""))+")"})}return h;function h(){let p=Oue,y,g,v;if((!e||o(l,c,u[u.length-1]||void 0))&&(p=eet(n(l,u)),p[0]===oK))return p;if("children"in l&&l.children){const b=l;if(b.children&&p[0]!==ZQe)for(g=(r?b.children.length:-1)+a,v=u.concat(b);g>-1&&g<b.children.length;){const w=b.children[g];if(y=s(w,g,v)(),y[0]===oK)return y;g=typeof y[1]=="number"?y[1]:g+a}}return p}}}function eet(t){return Array.isArray(t)?t:typeof t=="number"?[JQe,t]:t==null?Oue:[t]}function Lue(t,e,n,r){let i,o,a;typeof e=="function"?(o=void 0,a=e,i=n):(o=e,a=n,i=r),QQe(t,o,s,i);function s(l,c){const u=c[c.length-1],f=u?u.children.indexOf(l):void 0;return a(l,f,u)}}const QD={}.hasOwnProperty,tet={};function net(t,e){const n=e||tet,r=new Map,i=new Map,o=new Map,a={...FQe,...n.handlers},s={all:c,applyData:iet,definitionById:r,footnoteById:i,footnoteCounts:o,footnoteOrder:[],handlers:a,one:l,options:n,patch:ret,wrap:aet};return Lue(t,function(u){if(u.type==="definition"||u.type==="footnoteDefinition"){const f=u.type==="definition"?r:i,h=String(u.identifier).toUpperCase();f.has(h)||f.set(h,u)}}),s;function l(u,f){const h=u.type,p=s.handlers[h];if(QD.call(s.handlers,h)&&p)return p(s,u,f);if(s.options.passThrough&&s.options.passThrough.includes(h)){if("children"in u){const{children:g,...v}=u,b=BC(v);return b.children=s.all(u),b}return BC(u)}return(s.options.unknownHandler||oet)(s,u,f)}function c(u){const f=[];if("children"in u){const h=u.children;let p=-1;for(;++p<h.length;){const y=s.one(h[p],u);if(y){if(p&&h[p-1].type==="break"&&(!Array.isArray(y)&&y.type==="text"&&(y.value=aK(y.value)),!Array.isArray(y)&&y.type==="element")){const g=y.children[0];g&&g.type==="text"&&(g.value=aK(g.value))}Array.isArray(y)?f.push(...y):f.push(y)}}}return f}}function ret(t,e){t.position&&(e.position=UKe(t))}function iet(t,e){let n=e;if(t&&t.data){const r=t.data.hName,i=t.data.hChildren,o=t.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const a="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:a}}n.type==="element"&&o&&Object.assign(n.properties,BC(o)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function oet(t,e){const n=e.data||{},r="value"in e&&!(QD.call(n,"hProperties")||QD.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function aet(t,e){const n=[];let r=-1;for(e&&n.push({type:"text",value:`
`});++r<t.length;)r&&n.push({type:"text",value:`
`}),n.push(t[r]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function aK(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function sK(t,e){const n=net(t,e),r=n.one(t,void 0),i=WQe(n),o=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&o.children.push({type:"text",value:`
`},i),o}function set(t,e){return t&&"run"in t?async function(n,r){const i=sK(n,{file:r,...e});await t.run(i,r)}:function(n,r){return sK(n,{file:r,...t||e})}}function lK(t){if(t)throw t}var MI,cK;function cet(){if(cK)return MI;cK=1;var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=function(c){return typeof Array.isArray=="function"?Array.isArray(c):e.call(c)==="[object Array]"},o=function(c){if(!c||e.call(c)!=="[object Object]")return!1;var u=t.call(c,"constructor"),f=c.constructor&&c.constructor.prototype&&t.call(c.constructor.prototype,"isPrototypeOf");if(c.constructor&&!u&&!f)return!1;var h;for(h in c);return typeof h>"u"||t.call(c,h)},a=function(c,u){n&&u.name==="__proto__"?n(c,u.name,{enumerable:!0,configurable:!0,value:u.newValue,writable:!0}):c[u.name]=u.newValue},s=function(c,u){if(u==="__proto__")if(t.call(c,u)){if(r)return r(c,u).value}else return;return c[u]};return MI=function l(){var c,u,f,h,p,y,g=arguments[0],v=1,b=arguments.length,w=!1;for(typeof g=="boolean"&&(w=g,g=arguments[1]||{},v=2),(g==null||typeof g!="object"&&typeof g!="function")&&(g={});v<b;++v)if(c=arguments[v],c!=null)for(u in c)f=s(g,u),h=s(c,u),g!==h&&(w&&h&&(o(h)||(p=i(h)))?(p?(p=!1,y=f&&i(f)?f:[]):y=f&&o(f)?f:{},a(g,{name:u,newValue:l(w,y,h)})):typeof h<"u"&&a(g,{name:u,newValue:h}));return g},MI}var uet=cet();const PI=$n(uet);function e3(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function det(){const t=[],e={run:n,use:r};return e;function n(...i){let o=-1;const a=i.pop();if(typeof a!="function")throw new TypeError("Expected function as last argument, not "+a);s(null,...i);function s(l,...c){const u=t[++o];let f=-1;if(l){a(l);return}for(;++f<i.length;)(c[f]===null||c[f]===void 0)&&(c[f]=i[f]);i=c,u?fet(u,s)(...c):a(null,...c)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return t.push(i),e}}function fet(t,e){let n;return r;function r(...a){const s=t.length>a.length;let l;s&&a.push(i);try{l=t.apply(this,a)}catch(c){const u=c;if(s&&n)throw u;return i(u)}s||(l&&l.then&&typeof l.then=="function"?l.then(o,i):l instanceof Error?i(l):o(l))}function i(a,...s){n||(n=!0,e(a,...s))}function o(a){i(null,a)}}const Oc={basename:het,dirname:pet,extname:met,join:get,sep:"/"};function het(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');xS(t);let n=0,r=-1,i=t.length,o;if(e===void 0||e.length===0||e.length>t.length){for(;i--;)if(t.codePointAt(i)===47){if(o){n=i+1;break}}else r<0&&(o=!0,r=i+1);return r<0?"":t.slice(n,r)}if(e===t)return"";let a=-1,s=e.length-1;for(;i--;)if(t.codePointAt(i)===47){if(o){n=i+1;break}}else a<0&&(o=!0,a=i+1),s>-1&&(t.codePointAt(i)===e.codePointAt(s--)?s<0&&(r=i):(s=-1,r=a));return n===r?r=a:r<0&&(r=t.length),t.slice(n,r)}function pet(t){if(xS(t),t.length===0)return".";let e=-1,n=t.length,r;for(;--n;)if(t.codePointAt(n)===47){if(r){e=n;break}}else r||(r=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function met(t){xS(t);let e=t.length,n=-1,r=0,i=-1,o=0,a;for(;e--;){const s=t.codePointAt(e);if(s===47){if(a){r=e+1;break}continue}n<0&&(a=!0,n=e+1),s===46?i<0?i=e:o!==1&&(o=1):i>-1&&(o=-1)}return i<0||n<0||o===0||o===1&&i===n-1&&i===r+1?"":t.slice(i,n)}function get(...t){let e=-1,n;for(;++e<t.length;)xS(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":yet(n)}function yet(t){xS(t);const e=t.codePointAt(0)===47;let n=vet(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function vet(t,e){let n="",r=0,i=-1,o=0,a=-1,s,l;for(;++a<=t.length;){if(a<t.length)s=t.codePointAt(a);else{if(s===47)break;s=47}if(s===47){if(!(i===a-1||o===1))if(i!==a-1&&o===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(l=n.lastIndexOf("/"),l!==n.length-1){l<0?(n="",r=0):(n=n.slice(0,l),r=n.length-1-n.lastIndexOf("/")),i=a,o=0;continue}}else if(n.length>0){n="",r=0,i=a,o=0;continue}}e&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+t.slice(i+1,a):n=t.slice(i+1,a),r=a-i-1;i=a,o=0}else s===46&&o>-1?o++:o=-1}return n}function xS(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const xet={cwd:wet};function wet(){return"/"}function t3(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function bet(t){if(typeof t=="string")t=new URL(t);else if(!t3(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return Eet(t)}function Eet(t){if(t.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const r=e.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(e)}const kI=["history","path","basename","stem","extname","dirname"];class Due{constructor(e){let n;e?t3(e)?n={path:e}:typeof e=="string"||_et(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":xet.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<kI.length;){const o=kI[r];o in n&&n[o]!==void 0&&n[o]!==null&&(this[o]=o==="history"?[...n[o]]:n[o])}let i;for(i in n)kI.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?Oc.basename(this.path):void 0}set basename(e){RI(e,"basename"),NI(e,"basename"),this.path=Oc.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?Oc.dirname(this.path):void 0}set dirname(e){uK(this.basename,"dirname"),this.path=Oc.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?Oc.extname(this.path):void 0}set extname(e){if(NI(e,"extname"),uK(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Oc.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){t3(e)&&(e=bet(e)),RI(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?Oc.basename(this.path,this.extname):void 0}set stem(e){RI(e,"stem"),NI(e,"stem"),this.path=Oc.join(this.dirname||"",e+(this.extname||""))}fail(e,n,r){const i=this.message(e,n,r);throw i.fatal=!0,i}info(e,n,r){const i=this.message(e,n,r);return i.fatal=void 0,i}message(e,n,r){const i=new ca(e,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function NI(t,e){if(t&&t.includes(Oc.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+Oc.sep+"`")}function RI(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function uK(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function _et(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const Tet=function(t){const r=this.constructor.prototype,i=r[t],o=function(){return i.apply(o,arguments)};return Object.setPrototypeOf(o,r),o},Cet={}.hasOwnProperty;class $z extends Tet{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=det()}copy(){const e=new $z;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];e.use(...r)}return e.data(PI(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(OI("data",this.frozen),this.namespace[e]=n,this):Cet.call(this.namespace,e)&&this.namespace[e]||void 0:e?(OI("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(e,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=q_(e),r=this.parser||this.Parser;return jI("parse",r),r(String(n),n)}process(e,n){const r=this;return this.freeze(),jI("process",this.parser||this.Parser),II("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(o,a){const s=q_(e),l=r.parse(s);r.run(l,s,function(u,f,h){if(u||!f||!h)return c(u);const p=f,y=r.stringify(p,h);Pet(y)?h.value=y:h.result=y,c(u,h)});function c(u,f){u||!f?a(u):o?o(f):n(void 0,f)}}}processSync(e){let n=!1,r;return this.freeze(),jI("processSync",this.parser||this.Parser),II("processSync",this.compiler||this.Compiler),this.process(e,i),fK("processSync","process",n),r;function i(o,a){n=!0,lK(o),r=a}}run(e,n,r){dK(e),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?o(void 0,r):new Promise(o);function o(a,s){const l=q_(n);i.run(e,l,c);function c(u,f,h){const p=f||e;u?s(u):a?a(p):r(void 0,p,h)}}}runSync(e,n){let r=!1,i;return this.run(e,n,o),fK("runSync","run",r),i;function o(a,s){lK(a),i=s,r=!0}}stringify(e,n){this.freeze();const r=q_(n),i=this.compiler||this.Compiler;return II("stringify",i),dK(e),i(e,r)}use(e,...n){const r=this.attachers,i=this.namespace;if(OI("use",this.frozen),e!=null)if(typeof e=="function")l(e,n);else if(typeof e=="object")Array.isArray(e)?s(e):a(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function o(c){if(typeof c=="function")l(c,[]);else if(typeof c=="object")if(Array.isArray(c)){const[u,...f]=c;l(u,f)}else a(c);else throw new TypeError("Expected usable value, not `"+c+"`")}function a(c){if(!("plugins"in c)&&!("settings"in c))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");s(c.plugins),c.settings&&(i.settings=PI(!0,i.settings,c.settings))}function s(c){let u=-1;if(c!=null)if(Array.isArray(c))for(;++u<c.length;){const f=c[u];o(f)}else throw new TypeError("Expected a list of plugins, not `"+c+"`")}function l(c,u){let f=-1,h=-1;for(;++f<r.length;)if(r[f][0]===c){h=f;break}if(h===-1)r.push([c,...u]);else if(u.length>0){let[p,...y]=u;const g=r[h][1];e3(g)&&e3(p)&&(p=PI(!0,g,p)),r[h]=[c,p,...y]}}}}const Aet=new $z().freeze();function jI(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function II(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function OI(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function dK(t){if(!e3(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function fK(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function q_(t){return Met(t)?t:new Due(t)}function Met(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function Pet(t){return typeof t=="string"||ket(t)}function ket(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const Net="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",hK=[],pK={allowDangerousHtml:!0},Ret=/^(https?|ircs?|mailto|xmpp)$/i,jet=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function Fue(t){const e=t.allowedElements,n=t.allowElement,r=t.children||"",i=t.className,o=t.components,a=t.disallowedElements,s=t.rehypePlugins||hK,l=t.remarkPlugins||hK,c=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...pK}:pK,u=t.skipHtml,f=t.unwrapDisallowed,h=t.urlTransform||Iet,p=Aet().use(fQe).use(l).use(set,c).use(s),y=new Due;typeof r=="string"&&(y.value=r);for(const w of jet)Object.hasOwn(t,w.from)&&(""+w.from+(w.to?"use `"+w.to+"` instead":"remove it")+Net+w.id,void 0);const g=p.parse(y);let v=p.runSync(g,y);return i&&(v={type:"element",tagName:"div",properties:{className:i},children:v.type==="root"?v.children:[v]}),Lue(v,b),WKe(v,{Fragment:d.Fragment,components:o,ignoreInvalidStyle:!0,jsx:d.jsx,jsxs:d.jsxs,passKeys:!0,passNode:!0});function b(w,T,C){if(w.type==="raw"&&C&&typeof T=="number")return u?C.children.splice(T,1):C.children[T]={type:"text",value:w.value},T;if(w.type==="element"){let P;for(P in TI)if(Object.hasOwn(TI,P)&&Object.hasOwn(w.properties,P)){const M=w.properties[P],k=TI[P];(k===null||k.includes(w.tagName))&&(w.properties[P]=h(String(M||""),P,w))}}if(w.type==="element"){let P=e?!e.includes(w.tagName):a?a.includes(w.tagName):!1;if(!P&&n&&typeof T=="number"&&(P=!n(w,T,C)),P&&C&&typeof T=="number")return f&&w.children?C.children.splice(T,1,...w.children):C.children.splice(T,1),T}}}function Iet(t){const e=t.indexOf(":"),n=t.indexOf("?"),r=t.indexOf("#"),i=t.indexOf("/");return e<0||i>-1&&e>i||n>-1&&e>n||r>-1&&e>r||Ret.test(t.slice(0,e))?t:""}const Oet=({references:t,threadId:e})=>{const[n,r]=_.useState(!1);return!t||t.length===0?null:d.jsxs("div",{className:"mt-3 text-sm",children:[d.jsxs(ct,{variant:"ghost",size:"sm",className:"p-0 h-6 text-xs font-normal flex items-center gap-1 text-muted-foreground hover:text-foreground",onClick:()=>r(!n),children:[d.jsx(Q,{text:`Based on ${t.length} journal ${t.length===1?"entry":"entries"}`}),n?d.jsx(D3,{className:"h-3 w-3 ml-1"}):d.jsx(b1,{className:"h-3 w-3 ml-1"})]}),n&&d.jsxs("div",{className:"mt-2 space-y-2 border-l-2 border-primary/20 pl-3",children:[t.slice(0,3).map((i,o)=>d.jsxs(Jr,{className:"p-2 text-xs",children:[d.jsx("div",{className:"font-medium",children:i.date?new Date(i.date).toLocaleDateString():"Unknown date"}),d.jsx("p",{className:"text-muted-foreground",children:i.snippet})]},o)),t.length>3&&d.jsx("div",{className:"text-xs text-muted-foreground",children:d.jsx(Q,{text:`+ ${t.length-3} more entries`})})]})]})},Let=({analysisData:t})=>{var e;return t?d.jsx("div",{className:"mt-3 text-sm",children:d.jsxs(Jr,{className:"p-3 bg-muted/50",children:[d.jsx("h4",{className:"font-medium mb-2",children:d.jsx(Q,{text:"Analysis Results",forceTranslate:!0})}),t.type==="quantitative_emotion"&&d.jsx("div",{children:d.jsx("p",{children:d.jsx(Q,{text:`Emotion strength: ${t.score.toFixed(1)}/10`,forceTranslate:!0})})}),t.type==="top_emotions"&&d.jsxs("div",{children:[d.jsx("p",{children:d.jsx(Q,{text:"Top emotions detected:",forceTranslate:!0})}),d.jsx("ul",{className:"list-disc list-inside",children:(e=t.emotions)==null?void 0:e.map((n,r)=>d.jsx("li",{children:d.jsx(Q,{text:`${n.name}: ${(n.score*100).toFixed(0)}%`,forceTranslate:!0})},r))})]}),t.type==="time_patterns"&&d.jsxs("div",{children:[d.jsx("p",{children:d.jsx(Q,{text:"Time pattern analysis:",forceTranslate:!0})}),d.jsx("p",{children:d.jsx(Q,{text:t.summary||"No clear patterns detected.",forceTranslate:!0})})]})]})}):null},Hz=({className:t="h-8 w-8",size:e=32})=>{const n=_.useRef(null),r=_.useRef(),i=_.useRef([]),{colorTheme:o,customColor:a}=Zr(),[s,l]=_.useState("#8b5cf6");_.useEffect(()=>{l((()=>{switch(o){case"Default":return"#3b82f6";case"Calm":return"#8b5cf6";case"Soothing":return"#FFDEE2";case"Energy":return"#f59e0b";case"Focus":return"#10b981";case"Custom":return a;default:return"#8b5cf6"}})())},[o,a]);const c=p=>{const y=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(p);return y?{r:parseInt(y[1],16),g:parseInt(y[2],16),b:parseInt(y[3],16)}:{r:139,g:92,b:246}},u=(p,y)=>{const g=[],v=p/2,b=p*.15,w=y*.25;for(let I=0;I<Math.PI*2;I+=.2)g.push({x:v+Math.cos(I)*b,y:w+Math.sin(I)*b});const T=p*.25,C=y*.4,P=y*.45;for(let I=0;I<C;I+=3)for(let U=-T/2;U<=T/2;U+=3)g.push({x:v+U,y:P+I});const M=p*.2,k=y*.5;for(let I=0;I<M;I+=3)g.push({x:v-T/2-I,y:k+I*.3});for(let I=0;I<M;I+=3)g.push({x:v+T/2+I,y:k+I*.3});return g},f=()=>{const p=n.current;if(!p)return;const y=u(p.width,p.height),g=[],v=c(s);y.forEach((b,w)=>{const T={x:b.x+(Math.random()-.5)*4,y:b.y+(Math.random()-.5)*4,vx:(Math.random()-.5)*.5,vy:(Math.random()-.5)*.5,targetX:b.x,targetY:b.y,size:Math.random()*1.5+.5,opacity:Math.random()*.6+.4,color:`rgba(${v.r}, ${v.g}, ${v.b}, ${Math.random()*.6+.4})`};g.push(T)});for(let b=0;b<50;b++){const w={x:Math.random()*p.width,y:Math.random()*p.height,vx:(Math.random()-.5)*1,vy:(Math.random()-.5)*1,targetX:Math.random()*p.width,targetY:Math.random()*p.height,size:Math.random()*1+.3,opacity:Math.random()*.3+.1,color:`rgba(${v.r}, ${v.g}, ${v.b}, ${Math.random()*.3+.1})`};g.push(w)}i.current=g},h=()=>{const p=n.current,y=p==null?void 0:p.getContext("2d");if(!p||!y)return;y.clearRect(0,0,p.width,p.height);const g=Date.now()*.001,v=Math.sin(g*2)*.02+1;i.current.forEach(b=>{const w=(b.targetX-b.x)*.05,T=(b.targetY-b.y)*.05;b.vx+=w,b.vy+=T,b.vx+=(Math.random()-.5)*.02,b.vy+=(Math.random()-.5)*.02,b.vx*=.98,b.vy*=.98,b.x+=b.vx,b.y+=b.vy;const C=p.width/2,P=p.height/2,M=(b.x-C)*(v-1)*.1,k=(b.y-P)*(v-1)*.1;y.globalAlpha=b.opacity,y.fillStyle=b.color,y.beginPath(),y.arc(b.x+M,b.y+k,b.size*v,0,Math.PI*2),y.fill()}),r.current=requestAnimationFrame(h)};return _.useEffect(()=>{const p=n.current;if(p)return p.width=e,p.height=e,f(),h(),()=>{r.current&&cancelAnimationFrame(r.current)}},[e,s]),_.useEffect(()=>{const p=c(s);i.current.forEach(y=>{y.color=`rgba(${p.r}, ${p.g}, ${p.b}, ${y.opacity})`})},[s]),d.jsx("div",{className:t,children:d.jsx("canvas",{ref:n,className:"w-full h-full rounded-full",style:{imageRendering:"auto"}})})},zue=({className:t=""})=>d.jsxs("div",{className:`flex items-center gap-3 ${t}`,children:[d.jsx(Hz,{className:"h-8 w-8",size:32}),d.jsx("div",{className:"flex items-center space-x-1 bg-muted/60 border border-border/50 rounded-2xl rounded-tl-none px-4 py-3",children:d.jsxs("div",{className:"flex space-x-1",children:[d.jsx("div",{className:"w-2 h-2 bg-muted-foreground rounded-full animate-pulse",style:{animationDelay:"0ms",animationDuration:"1.4s"}}),d.jsx("div",{className:"w-2 h-2 bg-muted-foreground rounded-full animate-pulse",style:{animationDelay:"200ms",animationDuration:"1.4s"}}),d.jsx("div",{className:"w-2 h-2 bg-muted-foreground rounded-full animate-pulse",style:{animationDelay:"400ms",animationDuration:"1.4s"}})]})})]}),Det=({chatMessages:t,isLoading:e,processingStage:n,threadId:r,onInteractiveOptionClick:i})=>{const o=_.useRef(null);return _.useEffect(()=>{var a;(a=o.current)==null||a.scrollIntoView({behavior:"smooth"})},[t,e]),_.useEffect(()=>{var a,s;if(t.length>0&&(console.log(`ChatArea: Rendering ${t.length} messages`),console.log("Last message:",((a=t[t.length-1])==null?void 0:a.content.substring(0,50))+"..."),r)){const l=(s=t.filter(c=>c.sender==="user"||c.role==="user").slice(-1)[0])==null?void 0:s.content;console.log("Last user question:",l),console.log("Full conversation context for analysis:",t.map(c=>`[${c.sender||c.role}]: ${c.content.substring(0,30)}...`))}},[t,r]),d.jsxs("div",{className:"flex flex-col p-4 overflow-y-auto h-full pb-20",children:[t.map((a,s)=>d.jsx("div",{className:`flex ${a.sender==="user"||a.role==="user"?"justify-end":"justify-start"} mb-4`,children:d.jsxs("div",{className:`flex gap-3 max-w-[80%] ${a.sender==="user"||a.role==="user"?"flex-row-reverse":""}`,children:[d.jsx("div",{className:"mt-1",children:a.sender==="user"||a.role==="user"?d.jsxs(C2,{className:"h-8 w-8",children:[d.jsx(A2,{src:void 0,alt:"User",className:"bg-primary/20",loading:"eager"}),d.jsx(M2,{className:"bg-primary text-primary-foreground",children:"U"})]}):d.jsx(Hz,{className:"h-8 w-8",size:32})}),d.jsx(Jr,{className:`${a.sender==="user"||a.role==="user"?"bg-primary text-primary-foreground":a.sender==="error"||a.role==="error"?"bg-destructive/10 border-destructive/50":""} overflow-hidden`,children:d.jsx(au,{className:"p-3",children:d.jsxs("div",{className:"prose prose-sm dark:prose-invert max-w-none",children:[d.jsx(Fue,{children:a.content}),a.isInteractive&&a.interactiveOptions&&i&&d.jsx("div",{className:"mt-4 flex flex-col gap-2",children:a.interactiveOptions.map((l,c)=>d.jsx(ct,{variant:"outline",className:"text-left justify-start",onClick:()=>i(l),"data-test-id":`interactive-option-${c}`,children:l.text},c))}),a.reference_entries&&Array.isArray(a.reference_entries)&&a.reference_entries.length>0&&d.jsx(Oet,{references:a.reference_entries,threadId:r||void 0}),a.analysis_data&&a.has_numeric_result&&d.jsx(Let,{analysisData:a.analysis_data})]})})})]})},s)),e&&d.jsx("div",{className:"flex justify-start mb-4",children:d.jsx(zue,{})}),d.jsx("div",{ref:o,className:"pb-5"})]})},Fet=()=>{const{isActive:t,isInStep:e,tutorialCompleted:n}=ka(),r=_.useRef(!0),i=t&&e(5);return _.useEffect(()=>(r.current=!0,()=>{r.current=!1}),[]),_.useEffect(()=>{if(i){console.log("EmptyChatState: In tutorial step 5, ensuring visibility");const o=()=>{if(!r.current)return;const s=document.querySelector(".chat-messages-container");s&&s instanceof HTMLElement&&(s.style.backgroundColor="#1A1F2C",s.style.backgroundImage="linear-gradient(to bottom, #1A1F2C, #2D243A)",s.style.boxShadow="inset 0 0 25px rgba(155, 135, 245, 0.15)",s.style.borderRadius="10px",s.style.opacity="1");const l=document.querySelector(".flex.flex-col.items-center.justify-center.p-6.text-center.h-full");l&&l instanceof HTMLElement&&(l.style.visibility="visible",l.style.display="flex",l.style.opacity="1",l.style.zIndex="5000"),document.querySelectorAll(".chat-suggestion-button, .empty-chat-suggestion").forEach(u=>{u instanceof HTMLElement&&(u.style.display="block",u.style.visibility="visible",u.style.opacity="1")})};o();const a=setInterval(o,500);return()=>{clearInterval(a)}}},[i]),_.useEffect(()=>{if(n){console.log("EmptyChatState: Tutorial completed, refreshing UI");const o=()=>{if(!r.current)return;console.log("EmptyChatState: Chat refresh event received"),window.dispatchEvent(new Event("resize"));const l=document.querySelector(".flex.flex-col.items-center.justify-center.p-6.text-center.h-full");l&&l instanceof HTMLElement&&(l.style.visibility="visible",l.style.display="flex",l.style.opacity="1")};window.addEventListener("chatRefreshNeeded",o),o();const a=setTimeout(o,300),s=setTimeout(o,1e3);return()=>{window.removeEventListener("chatRefreshNeeded",o),clearTimeout(a),clearTimeout(s)}}},[n]),d.jsxs(Ke.div,{initial:{opacity:0},animate:{opacity:1},className:"flex flex-col items-center justify-center p-6 text-center h-full",style:{visibility:"visible",zIndex:i?5e3:"auto",position:"relative"},children:[d.jsx("div",{className:"w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mb-4",children:d.jsx(tA,{className:"h-8 w-8 text-primary"})}),d.jsx("h3",{className:"text-xl font-bold mb-2",children:d.jsx(Q,{text:"Start a Conversation"})}),d.jsx("p",{className:"text-sm text-muted-foreground max-w-md",children:d.jsx(Q,{text:"Ask me anything about your thoughts, feelings, or daily life. I'm here to help!"})}),!i&&d.jsx(ct,{variant:"outline",size:"sm",className:"mt-6",onClick:()=>{const o=document.querySelector('[data-testid="new-chat-button"]');o&&o.click()},children:d.jsx(Q,{text:"New Chat"})}),d.jsxs("div",{className:`mt-8 space-y-3 w-full max-w-md ${i?"block":""}`,children:[d.jsx(ct,{variant:"secondary",size:"sm",className:`w-full justify-start px-4 py-3 h-auto ${i?"chat-question-highlight empty-chat-suggestion":""}`,children:d.jsx(Q,{text:"How am I feeling today based on my journal entries?"})}),d.jsx(ct,{variant:"secondary",size:"sm",className:`w-full justify-start px-4 py-3 h-auto ${i?"chat-question-highlight empty-chat-suggestion":""}`,children:d.jsx(Q,{text:"What emotions have I experienced most frequently?"})})]})]})};function Vz(t){const[e,n]=_.useState({isLoading:!1,isProcessing:!1,processingStage:null,processingStatus:"idle"});return _.useEffect(()=>{if(!t)return;(async()=>{try{const{data:l,error:c}=await Ze.from("chat_threads").select("processing_status").eq("id",t).single();if(c){console.error("Error fetching thread status:",c);return}if(l&&l.processing_status){const u=l.processing_status;n(f=>({...f,isLoading:u==="processing",isProcessing:u==="processing",processingStatus:u,processingStage:u==="processing"?"Retrieving information...":null}))}}catch(l){console.error("Error in fetchThreadStatus:",l)}})();const a=Ze.channel(`thread-status-${t}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"chat_threads",filter:`id=eq.${t}`},l=>{const u=l.new.processing_status;n(f=>({...f,isLoading:u==="processing",isProcessing:u==="processing",processingStatus:u,processingStage:u==="processing"?f.processingStage||"Retrieving information...":null}))}).subscribe(),s=Ze.channel(`thread-messages-${t}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"chat_messages",filter:`thread_id=eq.${t}`},l=>{const c=l.new;c.sender==="assistant"&&!c.is_processing&&n(u=>({...u,isLoading:!1,isProcessing:!1,processingStatus:"idle",processingStage:null}))}).subscribe();return()=>{Ze.removeChannel(a),Ze.removeChannel(s)}},[t]),{...e,updateProcessingStage:o=>{n(a=>({...a,processingStage:o}))},setLocalLoading:(o,a)=>{n(s=>({...s,isLoading:o,processingStage:o?a||s.processingStage||"Processing...":null}))}}}const mK=async(t,e)=>{var n,r;if(!t||!e)return null;try{console.log(`Generating title for thread ${t}`);const{data:i,error:o}=await Ze.from("chat_messages").select("*").eq("thread_id",t).order("created_at",{ascending:!0}).limit(3);if(o)return console.error("Error fetching messages for title generation:",o),null;if(!i||i.length===0)return"New Conversation";const{data:a}=await Ze.from("chat_threads").select("title").eq("id",t).single();if(a&&a.title&&a.title!=="New Conversation")return console.log("Thread already has a title, skipping generation:",a.title),a.title;const s=i.filter(l=>l.sender==="user").map(l=>l.content).join(`
`);if(!s)return"New Conversation";try{const l=await Ze.functions.invoke("smart-chat",{body:{messages:[{role:"system",content:"You are a helpful assistant that creates short, concise titles (maximum 5 words) for chat conversations. Based on the user's messages, create a title that captures the main topic or theme of the conversation."},{role:"user",content:`Create a short, concise title (maximum 5 words) for a conversation about: ${s}`}],userId:e,generateTitleOnly:!0}});if(l.error)return console.error("Error generating title:",l.error),null;const c=((n=l.data)==null?void 0:n.title)||((r=l.data)==null?void 0:r.content)||(typeof l.data=="string"?l.data:null),u=c?c.replace(/^["']|["']$/g,"").substring(0,30):"New Conversation";console.log(`Generated title: ${u}`);try{await Ze.from("chat_threads").update({title:u}).eq("id",t)}catch(f){console.error("Error updating thread title:",f)}return u}catch(l){return console.error("Error in title generation:",l),"New Conversation"}}catch(i){return console.error("Error in generateThreadTitle:",i),null}},lv=async(t,e)=>{try{const{error:n}=await Ze.from("chat_threads").update({processing_status:e,updated_at:new Date().toISOString()}).eq("id",t);return n?(console.error("Error updating thread processing status:",n),!1):!0}catch(n){return console.error("Error in updateThreadProcessingStatus:",n),!1}},zet=async(t,e="Processing your request...")=>{try{const{data:n,error:r}=await Ze.from("chat_messages").insert({thread_id:t,sender:"assistant",role:"assistant",content:e,is_processing:!0,created_at:new Date().toISOString()}).select("id").single();return r?(console.error("Error creating processing message:",r),null):(n==null?void 0:n.id)||null}catch(n){return console.error("Error in createProcessingMessage:",n),null}},Uet=async(t,e,n,r,i)=>{try{if(e===null){const{error:o}=await Ze.from("chat_messages").delete().eq("id",t);if(o)return console.error("Error deleting processing message:",o),!1}else{const{error:o}=await Ze.from("chat_messages").update({content:e,is_processing:!1,reference_entries:n||null,analysis_data:r||null,has_numeric_result:i||!1}).eq("id",t);if(o)return console.error("Error updating processing message:",o),!1}return!0}catch(o){return console.error("Error in updateProcessingMessage:",o),!1}},gK=["Speak in any language!!","Habla en cualquier idioma!","Parlez dans n'importe quelle langue !","Sprechen Sie in jeder Sprache!","Parli in qualsiasi lingua!","Fale em qualquer idioma!","    !","  !","Praat in enige taal!","Tala p valfritt sprk!","Snakk p hvilket som helst sprk!","Puhu mill tahansa kielell!","Tal p hvilket som helst sprog!","Berbicara dalam bahasa apa pun!","","","  !","Mwi w dowolnym jzyku!","Mluvte v jakmkoli jazyce!","!","Konu herhangi bir dilde!","Beszlj brmilyen nyelven!","Vorbete n orice limb!","   !","   !"];function Bet({contained:t=!1}){const{theme:e}=Zr();return d.jsx("div",{className:"absolute inset-0 overflow-hidden",children:gK.map((n,r)=>d.jsx(Ke.div,{className:"absolute pointer-events-none select-none whitespace-nowrap text-sm",initial:{x:t?`${Math.random()*100}%`:`${100+Math.random()*100}%`,y:t?`${Math.random()*100}%`:`${Math.random()*100}%`,opacity:0,scale:.8},animate:{x:t?`${Math.random()*100}%`:`${-50+Math.random()*50}%`,y:t?`${Math.random()*100}%`:`${Math.random()*100}%`,opacity:[0,1,0],scale:[.8,1,.8]},transition:{duration:10,repeat:1/0,delay:r*2,repeatDelay:gK.length*1.5,ease:"easeInOut"},style:{color:e==="dark"?"#fff":void 0},children:n},r))})}const $et={MAX_DURATION:300,MIN_DURATION:.5};function Het(){const t=typeof window<"u"&&/iPad|iPhone|iPod/.test(navigator.userAgent),e={echoCancellation:!0,noiseSuppression:!1,autoGainControl:!0};return t?{...e,sampleRate:44100,sampleSize:16,channelCount:1,mimeType:"audio/wav"}:{...e,sampleRate:48e3,sampleSize:16,channelCount:1,mimeType:"audio/webm"}}function Vet(t="web"){const e={type:"audio",recorderType:null,timeSlice:1e3,checkForInactiveTracks:!0,disableLogs:!1};switch(t){case"ios":return{...e,mimeType:"audio/wav",numberOfAudioChannels:1,desiredSampRate:44100,audioBitsPerSecond:128e3,noiseSuppression:!1};case"android":return{...e,mimeType:"audio/webm",numberOfAudioChannels:1,desiredSampRate:48e3,audioBitsPerSecond:192e3,noiseSuppression:!1};default:return{...e,mimeType:"audio/webm",numberOfAudioChannels:1,desiredSampRate:48e3,audioBitsPerSecond:192e3,noiseSuppression:!1}}}const Wet=({isLoading:t,isRecording:e,recordingTime:n,onStartRecording:r,onStopRecording:i,size:o="icon",className:a})=>{const[s,l]=_.useState(null),[c,u]=_.useState(null),{toast:f}=oh(),{isActive:h,isInStep:p}=ka();if(h&&p(5))return null;_.useEffect(()=>{let v=()=>{};return e&&(async()=>{try{console.log("[VoiceRecordingButton] Starting recording setup");const w=/iPad|iPhone|iPod/.test(navigator.userAgent),T=/Android/.test(navigator.userAgent),C=w?"ios":T?"android":"web";console.log(`[VoiceRecordingButton] Detected platform: ${C}`);const P=Het();console.log("[VoiceRecordingButton] Audio config:",P);const M=await navigator.mediaDevices.getUserMedia({audio:P});u(M),console.log("[VoiceRecordingButton] MediaStream obtained successfully");const k=Vet(C);console.log("[VoiceRecordingButton] Recorder options:",k);const I=new wne(M,{...k,type:"audio",recorderType:dF.StereoAudioRecorder,numberOfAudioChannels:C==="ios"?1:2,desiredSampRate:C==="ios"?44100:48e3,disableLogs:!1});console.log("[VoiceRecordingButton] Starting recorder"),I.startRecording(),l(I);const U=setTimeout(()=>{e&&(console.log("[VoiceRecordingButton] Maximum recording duration reached"),f({title:"Recording limit reached",description:"Maximum recording duration reached (5 minutes)",variant:"default"}),g())},$et.MAX_DURATION*1e3);v=()=>{console.log("[VoiceRecordingButton] Cleaning up recording"),clearTimeout(U),I&&I.stopRecording(()=>{I.destroy(),M.getTracks().forEach(z=>z.stop())})}}catch(w){console.error("[VoiceRecordingButton] Error recording audio:",w),f({title:"Recording error",description:"Could not access microphone. Check browser permissions.",variant:"destructive"})}})(),v},[e,f]);const g=()=>{e&&s?(console.log("[VoiceRecordingButton] Stopping recording"),s.stopRecording(()=>{const v=s.getBlob();console.log("[VoiceRecordingButton] Recording stopped, blob size:",v.size),Object.defineProperty(v,"duration",{value:n}),i(v),c&&(c.getTracks().forEach(b=>b.stop()),u(null)),l(null)})):(console.log("[VoiceRecordingButton] Starting recording"),r())};return d.jsxs("div",{className:"relative",children:[e&&d.jsx("div",{className:"absolute -z-10 inset-0 overflow-hidden rounded-full",style:{width:o==="sm"?"90px":"110px",height:o==="sm"?"90px":"110px",left:"50%",top:"50%",transform:"translate(-50%, -50%)"},children:d.jsx(Bet,{contained:!0})}),d.jsxs(ct,{type:"button",size:o,variant:e?"destructive":"default",onClick:g,disabled:t,className:He("relative rounded-full flex items-center justify-center",e?"bg-red-500 hover:bg-red-600":"",e&&"animate-pulse",a),style:{width:o==="sm"?"48px":"64px",height:o==="sm"?"48px":"64px",transition:"all 0.3s ease",backgroundColor:"#000000"},children:[e?d.jsx(RJ,{className:`${o==="sm"?"h-4 w-4":"h-5 w-5"} text-white`}):d.jsx(Vf,{className:`${o==="sm"?"h-4 w-4":"h-5 w-5"}`}),e&&d.jsx("span",{className:`absolute ${o==="sm"?"-bottom-5":"-bottom-6"} text-xs font-medium`,children:Mte(n)})]})]})},Get=async(t,e,n,r,i)=>{try{const{data:o,error:a}=await Ze.from("chat_threads").select("id").eq("id",t).eq("user_id",r).single();if(a||!o)return console.error("Thread not found or access denied:",a),null;const{data:s,error:l}=await Ze.from("chat_messages").insert({thread_id:t,content:e,sender:n,role:n,created_at:new Date().toISOString(),...i}).select().single();return l?(console.error("Error creating chat message:",l),null):(await Ze.from("chat_threads").update({updated_at:new Date().toISOString()}).eq("id",t).eq("user_id",r),{...s,sender:s.sender,role:s.role,sub_query_responses:Array.isArray(s.sub_query_responses)?s.sub_query_responses:[]})}catch(o){return console.error("Exception creating chat message:",o),null}},qet=async(t,e)=>{try{const{data:n,error:r}=await Ze.from("chat_threads").select("id").eq("id",t).eq("user_id",e).single();if(r||!n)return console.error("Thread not found or access denied:",r),[];const{data:i,error:o}=await Ze.from("chat_messages").select("*").eq("thread_id",t).order("created_at",{ascending:!0});return o?(console.error("Error fetching chat messages:",o),[]):(i||[]).map(a=>({...a,sender:a.sender,role:a.role,sub_query_responses:Array.isArray(a.sub_query_responses)?a.sub_query_responses:[]}))}catch(n){return console.error("Exception fetching chat messages:",n),[]}},Uue=qet,zp=async(t,e,n,r,i,o,a,s)=>{if(!r)return console.error("User ID is required for saveMessage"),null;const l={};return i&&(l.reference_entries=i),o!==void 0&&(l.has_numeric_result=o),a&&(l.isInteractive=a),s&&(l.interactiveOptions=s),Get(t,e,n,r,l)},Do=[];for(let t=0;t<256;++t)Do.push((t+256).toString(16).slice(1));function Yet(t,e=0){return(Do[t[e+0]]+Do[t[e+1]]+Do[t[e+2]]+Do[t[e+3]]+"-"+Do[t[e+4]]+Do[t[e+5]]+"-"+Do[t[e+6]]+Do[t[e+7]]+"-"+Do[t[e+8]]+Do[t[e+9]]+"-"+Do[t[e+10]]+Do[t[e+11]]+Do[t[e+12]]+Do[t[e+13]]+Do[t[e+14]]+Do[t[e+15]]).toLowerCase()}let LI;const Xet=new Uint8Array(16);function Ket(){if(!LI){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");LI=crypto.getRandomValues.bind(crypto)}return LI(Xet)}const Jet=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),yK={randomUUID:Jet};function n3(t,e,n){var i;if(yK.randomUUID&&!t)return yK.randomUUID();t=t||{};const r=t.random??((i=t.rng)==null?void 0:i.call(t))??Ket();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,Yet(r)}var r3=(t=>(t.JOURNAL_SPECIFIC="JOURNAL_SPECIFIC",t.GENERAL_MENTAL_HEALTH="GENERAL_MENTAL_HEALTH",t.CONVERSATIONAL="CONVERSATIONAL",t))(r3||{});function Zet(){const[t,e]=_.useState({category:"CONVERSATIONAL",confidence:0,reasoning:"",shouldUseJournal:!1,useAllEntries:!1,isLoading:!1,error:null});return{classifyMessage:_.useCallback(async(r,i=[])=>{if(!(r!=null&&r.trim()))return{category:"CONVERSATIONAL",confidence:0,reasoning:"Empty message",shouldUseJournal:!1,useAllEntries:!1};e(o=>({...o,isLoading:!0,error:null}));try{console.log("[Classification Hook] Classifying message with enhanced personal pronoun prioritization:",r);const{data:o,error:a}=await Ze.functions.invoke("chat-query-classifier",{body:{message:r,conversationContext:i}});if(a)throw a;if(o){const s={category:o.category,confidence:o.confidence,reasoning:o.reasoning,shouldUseJournal:o.shouldUseJournal||o.category==="JOURNAL_SPECIFIC",useAllEntries:o.useAllEntries||!1};return console.log("[Classification Hook] Enhanced classification result:",s),e({...s,isLoading:!1,error:null}),s}throw new Error("No data received from classification service")}catch(o){const a=o.message||"Unknown error classifying message";console.error("[Classification Hook] Classification error:",a);const l=/\b(i|me|my|mine|myself|am i|do i|how am i|what makes me|how do i|what about me)\b/i.test(r.toLowerCase()),c=/\b(last week|yesterday|this week|last month|today|recently|lately|this morning|last night)\b/i.test(r.toLowerCase()),u={category:l?"JOURNAL_SPECIFIC":"CONVERSATIONAL",confidence:l?.9:.3,reasoning:l?"PERSONAL PRONOUNS DETECTED (fallback) - automatically classified as journal-specific":"Error in classification (fallback)",shouldUseJournal:l,useAllEntries:l&&!c};return e({...u,isLoading:!1,error:a}),u}},[]),classification:t}}var Qet="VisuallyHidden",wS=_.forwardRef((t,e)=>d.jsx(At.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));wS.displayName=Qet;var ett=wS,[R2,kot]=sa("Tooltip",[sh]),j2=sh(),Bue="TooltipProvider",ttt=700,i3="tooltip.open",[ntt,Wz]=R2(Bue),$ue=t=>{const{__scopeTooltip:e,delayDuration:n=ttt,skipDelayDuration:r=300,disableHoverableContent:i=!1,children:o}=t,[a,s]=_.useState(!0),l=_.useRef(!1),c=_.useRef(0);return _.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),d.jsx(ntt,{scope:e,isOpenDelayed:a,delayDuration:n,onOpen:_.useCallback(()=>{window.clearTimeout(c.current),s(!1)},[]),onClose:_.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>s(!0),r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:_.useCallback(u=>{l.current=u},[]),disableHoverableContent:i,children:o})};$ue.displayName=Bue;var I2="Tooltip",[rtt,O2]=R2(I2),Hue=t=>{const{__scopeTooltip:e,children:n,open:r,defaultOpen:i=!1,onOpenChange:o,disableHoverableContent:a,delayDuration:s}=t,l=Wz(I2,t.__scopeTooltip),c=j2(e),[u,f]=_.useState(null),h=Xa(),p=_.useRef(0),y=a??l.disableHoverableContent,g=s??l.delayDuration,v=_.useRef(!1),[b=!1,w]=wo({prop:r,defaultProp:i,onChange:k=>{k?(l.onOpen(),document.dispatchEvent(new CustomEvent(i3))):l.onClose(),o==null||o(k)}}),T=_.useMemo(()=>b?v.current?"delayed-open":"instant-open":"closed",[b]),C=_.useCallback(()=>{window.clearTimeout(p.current),p.current=0,v.current=!1,w(!0)},[w]),P=_.useCallback(()=>{window.clearTimeout(p.current),p.current=0,w(!1)},[w]),M=_.useCallback(()=>{window.clearTimeout(p.current),p.current=window.setTimeout(()=>{v.current=!0,w(!0),p.current=0},g)},[g,w]);return _.useEffect(()=>()=>{p.current&&(window.clearTimeout(p.current),p.current=0)},[]),d.jsx(cA,{...c,children:d.jsx(rtt,{scope:e,contentId:h,open:b,stateAttribute:T,trigger:u,onTriggerChange:f,onTriggerEnter:_.useCallback(()=>{l.isOpenDelayed?M():C()},[l.isOpenDelayed,M,C]),onTriggerLeave:_.useCallback(()=>{y?P():(window.clearTimeout(p.current),p.current=0)},[P,y]),onOpen:C,onClose:P,disableHoverableContent:y,children:n})})};Hue.displayName=I2;var o3="TooltipTrigger",Vue=_.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,i=O2(o3,n),o=Wz(o3,n),a=j2(n),s=_.useRef(null),l=Kt(e,s,i.onTriggerChange),c=_.useRef(!1),u=_.useRef(!1),f=_.useCallback(()=>c.current=!1,[]);return _.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),d.jsx(C1,{asChild:!0,...a,children:d.jsx(At.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...r,ref:l,onPointerMove:ut(t.onPointerMove,h=>{h.pointerType!=="touch"&&!u.current&&!o.isPointerInTransitRef.current&&(i.onTriggerEnter(),u.current=!0)}),onPointerLeave:ut(t.onPointerLeave,()=>{i.onTriggerLeave(),u.current=!1}),onPointerDown:ut(t.onPointerDown,()=>{c.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:ut(t.onFocus,()=>{c.current||i.onOpen()}),onBlur:ut(t.onBlur,i.onClose),onClick:ut(t.onClick,i.onClose)})})});Vue.displayName=o3;var itt="TooltipPortal",[Not,ott]=R2(itt,{forceMount:void 0}),r0="TooltipContent",Wue=_.forwardRef((t,e)=>{const n=ott(r0,t.__scopeTooltip),{forceMount:r=n.forceMount,side:i="top",...o}=t,a=O2(r0,t.__scopeTooltip);return d.jsx(oo,{present:r||a.open,children:a.disableHoverableContent?d.jsx(Gue,{side:i,...o,ref:e}):d.jsx(att,{side:i,...o,ref:e})})}),att=_.forwardRef((t,e)=>{const n=O2(r0,t.__scopeTooltip),r=Wz(r0,t.__scopeTooltip),i=_.useRef(null),o=Kt(e,i),[a,s]=_.useState(null),{trigger:l,onClose:c}=n,u=i.current,{onPointerInTransitChange:f}=r,h=_.useCallback(()=>{s(null),f(!1)},[f]),p=_.useCallback((y,g)=>{const v=y.currentTarget,b={x:y.clientX,y:y.clientY},w=utt(b,v.getBoundingClientRect()),T=dtt(b,w),C=ftt(g.getBoundingClientRect()),P=ptt([...T,...C]);s(P),f(!0)},[f]);return _.useEffect(()=>()=>h(),[h]),_.useEffect(()=>{if(l&&u){const y=v=>p(v,u),g=v=>p(v,l);return l.addEventListener("pointerleave",y),u.addEventListener("pointerleave",g),()=>{l.removeEventListener("pointerleave",y),u.removeEventListener("pointerleave",g)}}},[l,u,p,h]),_.useEffect(()=>{if(a){const y=g=>{const v=g.target,b={x:g.clientX,y:g.clientY},w=(l==null?void 0:l.contains(v))||(u==null?void 0:u.contains(v)),T=!htt(b,a);w?h():T&&(h(),c())};return document.addEventListener("pointermove",y),()=>document.removeEventListener("pointermove",y)}},[l,u,a,c,h]),d.jsx(Gue,{...t,ref:o})}),[stt,ltt]=R2(I2,{isInside:!1}),Gue=_.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":i,onEscapeKeyDown:o,onPointerDownOutside:a,...s}=t,l=O2(r0,n),c=j2(n),{onClose:u}=l;return _.useEffect(()=>(document.addEventListener(i3,u),()=>document.removeEventListener(i3,u)),[u]),_.useEffect(()=>{if(l.trigger){const f=h=>{const p=h.target;p!=null&&p.contains(l.trigger)&&u()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[l.trigger,u]),d.jsx(gm,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:a,onFocusOutside:f=>f.preventDefault(),onDismiss:u,children:d.jsxs(uA,{"data-state":l.stateAttribute,...c,...s,ref:e,style:{...s.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[d.jsx(H3,{children:r}),d.jsx(stt,{scope:n,isInside:!0,children:d.jsx(ett,{id:l.contentId,role:"tooltip",children:i||r})})]})})});Wue.displayName=r0;var que="TooltipArrow",ctt=_.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,i=j2(n);return ltt(que,n).isInside?null:d.jsx(dA,{...i,...r,ref:e})});ctt.displayName=que;function utt(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),i=Math.abs(e.right-t.x),o=Math.abs(e.left-t.x);switch(Math.min(n,r,i,o)){case o:return"left";case i:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function dtt(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function ftt(t){const{top:e,right:n,bottom:r,left:i}=t;return[{x:i,y:e},{x:n,y:e},{x:n,y:r},{x:i,y:r}]}function htt(t,e){const{x:n,y:r}=t;let i=!1;for(let o=0,a=e.length-1;o<e.length;a=o++){const s=e[o].x,l=e[o].y,c=e[a].x,u=e[a].y;l>r!=u>r&&n<(c-s)*(r-l)/(u-l)+s&&(i=!i)}return i}function ptt(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),mtt(e)}function mtt(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const i=t[r];for(;e.length>=2;){const o=e[e.length-1],a=e[e.length-2];if((o.x-a.x)*(i.y-a.y)>=(o.y-a.y)*(i.x-a.x))e.pop();else break}e.push(i)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const i=t[r];for(;n.length>=2;){const o=n[n.length-1],a=n[n.length-2];if((o.x-a.x)*(i.y-a.y)>=(o.y-a.y)*(i.x-a.x))n.pop();else break}n.push(i)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var gtt=$ue,ytt=Hue,vtt=Vue,Yue=Wue;const Xue=({children:t,...e})=>d.jsx(gtt,{...e,children:t}),Kue=ytt,Jue=vtt,Gz=_.forwardRef(({className:t,sideOffset:e=4,...n},r)=>d.jsx(Yue,{ref:r,sideOffset:e,className:He("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n}));Gz.displayName=Yue.displayName;const Zue=({mentalHealthInsights:t})=>{const[e,n]=_.useState([]),[r,i]=_.useState(!0),[o,a]=_.useState(!0),[s,l]=_.useState(!1),[c,u]=_.useState(!1),{toast:f}=oh(),{user:h}=or(),{translate:p}=In(),y=_.useRef(null),g=_.useRef(null),v=$1(),[b,w]=_.useState(null),{classifyMessage:T}=Zet(),{isLoading:C,isProcessing:P,processingStage:M,processingStatus:k,updateProcessingStage:I,setLocalLoading:U}=Vz(b);_.useEffect(()=>{const K=H=>{H.detail.threadId&&(w(H.detail.threadId),O(H.detail.threadId),v.addEvent("Thread Change",`Thread selected: ${H.detail.threadId}`,"info"))};window.addEventListener("threadSelected",K);const Z=localStorage.getItem("lastActiveChatThreadId");return Z&&(h!=null&&h.id)?(w(Z),O(Z),v.addEvent("Initialization",`Loading stored thread: ${Z}`,"info")):(i(!1),v.addEvent("Initialization","No stored thread found, showing empty state","info")),()=>{window.removeEventListener("threadSelected",K)}},[h==null?void 0:h.id]),_.useEffect(()=>{z()},[e,C,P]);const z=()=>{setTimeout(()=>{var K;(K=y.current)==null||K.scrollIntoView({behavior:"smooth"})},100)},O=async K=>{if(!K||!(h!=null&&h.id)){i(!1);return}if(g.current===K){v.addEvent("Thread Loading",`Thread ${K} already loaded, skipping`,"info");return}i(!0),v.addEvent("Thread Loading",`Loading messages for thread ${K}`,"info");try{const{data:Z,error:H}=await Ze.from("chat_threads").select("id, processing_status").eq("id",K).eq("user_id",h.id).single();if(H||!Z){v.addEvent("Thread Loading",`Thread not found or doesn't belong to user: ${(H==null?void 0:H.message)||"Unknown error"}`,"error"),console.error("Thread not found or doesn't belong to user:",H),n([]),a(!0),i(!1);return}v.addEvent("Thread Loading",`Thread ${K} found, fetching messages`,"success");const Y=await Uue(K,h.id);if(Y&&Y.length>0){v.addEvent("Thread Loading",`Loaded ${Y.length} messages for thread ${K}`,"success"),console.log(`Loaded ${Y.length} messages for thread ${K}`);const L=Y.map(N=>({...N,sender:N.sender,role:N.role}));n(L),a(!1),g.current=K}else v.addEvent("Thread Loading",`No messages found for thread ${K}`,"info"),console.log(`No messages found for thread ${K}`),n([]),a(!0)}catch(Z){console.error("Error loading messages:",Z),v.addEvent("Thread Loading",`Error loading messages: ${Z instanceof Error?Z.message:"Unknown error"}`,"error"),f({title:"Error loading messages",description:"Could not load conversation history.",variant:"destructive"}),n([]),a(!0)}finally{i(!1)}},B=async(K,Z={})=>{var L,N;if(!K.trim())return;if(!(h!=null&&h.id)){f({title:"Authentication required",description:"Please sign in to use the chat feature.",variant:"destructive"}),v.addEvent("Authentication","User not authenticated, message sending blocked","error");return}let H=b;if(!H){f({title:"No conversation selected",description:"Please select a conversation or start a new one.",variant:"destructive"}),v.addEvent("Thread Selection","No thread selected for message sending","error");return}if(P||C){f({title:"Please wait",description:"Another request is currently being processed.",variant:"default"});return}const Y={id:`temp-${Date.now()}`,thread_id:H,content:K,sender:"user",role:"user",created_at:new Date().toISOString()};v.addEvent("User Message",`Adding temporary message to UI: ${Y.id}`,"info"),n(V=>[...V,Y]),U(!0,"Analyzing your question...");try{await lv(H,"processing");let V=null;try{if(v.addEvent("Database",`Saving user message to thread ${H}`,"info"),V=await zp(H,K,"user",h.id),v.addEvent("Database",`User message saved with ID: ${V==null?void 0:V.id}`,"success"),V)v.addEvent("UI Update",`Replacing temporary message with saved message: ${V.id}`,"info"),n(ie=>ie.map(pe=>pe.id===Y.id?{...V,sender:V.sender,role:V.role}:pe));else throw v.addEvent("Database","Failed to save user message - null response","error"),new Error("Failed to save message")}catch(ie){v.addEvent("Database",`Error saving user message: ${ie.message||"Unknown error"}`,"error"),f({title:"Error saving message",description:ie.message||"Could not save your message",variant:"destructive"})}const W=await zet(H,"Processing your request...");W&&v.addEvent("Database",`Created processing message with ID: ${W}`,"success"),v.addEvent("Query Classification",`Classifying query: "${K.substring(0,30)}${K.length>30?"...":""}"`,"info"),I("Analyzing your question...");const ne=e.slice(-5).map(ie=>({role:ie.role,content:ie.content})),se=await T(K,ne);v.addEvent("Query Classification",`Classification result: ${JSON.stringify({category:se.category,confidence:se.confidence,shouldUseJournal:se.shouldUseJournal,useAllEntries:se.useAllEntries,reasoning:se.reasoning})}`,"success"),I("Generating response...");let te;if(se.category===r3.JOURNAL_SPECIFIC){v.addEvent("Routing","Using chat-with-rag for journal-specific query","info");const{data:ie,error:pe}=await Ze.functions.invoke("chat-with-rag",{body:{message:K,userId:h.id,threadId:H,conversationContext:ne,useAllEntries:se.useAllEntries||!1,hasPersonalPronouns:K.toLowerCase().includes("i ")||K.toLowerCase().includes("my "),hasExplicitTimeReference:/\b(last week|yesterday|this week|last month|today|recently|lately)\b/i.test(K),threadMetadata:{}}});if(pe)throw new Error(`Journal analysis error: ${pe.message}`);te={content:ie.response,references:ie.references||[],analysis:ie.analysis||{},hasNumericResult:!1,role:"assistant"}}else if(se.category===r3.GENERAL_MENTAL_HEALTH){v.addEvent("Routing","Using general-mental-health-chat for mental health query","info");const{data:ie,error:pe}=await Ze.functions.invoke("general-mental-health-chat",{body:{message:K,conversationContext:ne,userInsights:t}});if(pe)throw new Error(`Mental health chat error: ${pe.message}`);te={content:ie.response,references:[],analysis:{},hasNumericResult:!1,role:"assistant"}}else{v.addEvent("Routing","Using smart-chat for conversational query","info");const{data:ie,error:pe}=await Ze.functions.invoke("smart-chat",{body:{message:K,conversationContext:ne}});if(pe)throw new Error(`Smart chat error: ${pe.message}`);te={content:ie.response,references:[],analysis:{},hasNumericResult:!1,role:"assistant"}}if(W&&await Uet(W,te.content,te.references,te.analysis,te.hasNumericResult),await lv(H,"idle"),te.isInteractive&&te.interactiveOptions){v.addEvent("AI Processing","Received interactive clarification message","info");try{const ie=await zp(H,te.content,"assistant",h.id,void 0,!1,!0,te.interactiveOptions);if(ie){v.addEvent("Database",`Interactive message saved with ID: ${ie.id}`,"success");const pe={...ie,sender:ie.sender,role:ie.role,isInteractive:!0,interactiveOptions:te.interactiveOptions};n(de=>[...de,pe])}else throw new Error("Failed to save interactive message")}catch(ie){v.addEvent("Database",`Error saving interactive message: ${ie.message}`,"error");const pe={id:`temp-interactive-${Date.now()}`,thread_id:H,content:te.content,sender:"assistant",role:"assistant",created_at:new Date().toISOString(),isInteractive:!0,interactiveOptions:te.interactiveOptions};n(de=>[...de,pe])}}else{const ie={role:te.role,hasReferences:!!((L=te.references)!=null&&L.length),refCount:((N=te.references)==null?void 0:N.length)||0,hasAnalysis:!!te.analysis,hasNumericResult:te.hasNumericResult,errorState:te.role==="error"};v.addEvent("AI Processing",`Response received: ${JSON.stringify(ie)}`,"success");try{v.addEvent("Database","Saving assistant response to database","info");const pe=await zp(H,te.content,"assistant",h.id,te.references,te.hasNumericResult);if(v.addEvent("Database",`Assistant response saved with ID: ${pe==null?void 0:pe.id}`,"success"),pe){v.addEvent("UI Update","Adding assistant response to chat history","info");const de={...pe,sender:pe.sender,role:pe.role};n(ce=>[...ce,de])}else throw new Error("Failed to save assistant response")}catch(pe){v.addEvent("Database",`Error saving assistant response: ${pe.message||"Unknown error"}`,"error");const de={id:`temp-response-${Date.now()}`,thread_id:H,content:te.content,sender:"assistant",role:"assistant",created_at:new Date().toISOString(),reference_entries:te.references,analysis_data:te.analysis,has_numeric_result:te.hasNumericResult};v.addEvent("UI Update","Adding fallback temporary assistant response to chat history","warning"),n(ce=>[...ce,de]),f({title:"Warning",description:"Response displayed but couldn't be saved to your conversation history",variant:"default"})}}}catch(V){v.addEvent("Error",`Error in message handling: ${(V==null?void 0:V.message)||"Unknown error"}`,"error"),H&&await lv(H,"failed");const W="I'm having trouble processing your request. Please try again later. "+(V!=null&&V.message?`Error: ${V.message}`:"");try{v.addEvent("Error Handling","Saving error message to database","info");const ne=await zp(H,W,"assistant",h.id);if(ne){v.addEvent("UI Update","Adding error message to chat history","warning");const se={...ne,sender:"assistant",role:"assistant"};n(te=>[...te,se])}else{const se={id:`error-${Date.now()}`,thread_id:H,content:W,sender:"assistant",role:"assistant",created_at:new Date().toISOString()};v.addEvent("UI Update","Adding fallback error message to chat history","warning"),n(te=>[...te,se])}v.addEvent("Error Handling","Error message saved to database","success")}catch(ne){v.addEvent("Error Handling",`Failed to save error message: ${ne instanceof Error?ne.message:"Unknown error"}`,"error");const se={id:`error-${Date.now()}`,thread_id:H,content:W,sender:"assistant",role:"assistant",created_at:new Date().toISOString()};v.addEvent("UI Update","Adding last-resort error message to chat history","warning"),n(te=>[...te,se])}}finally{U(!1),I(null)}},$=K=>{if(!(!K||!K.action))switch(v.addEvent("Interactive Option",`User clicked: ${K.text}`,"info"),K.action){case"expand_search":const Z=[...e].reverse().find(Y=>Y.role==="user"||Y.sender==="user");Z!=null&&Z.content&&(v.addEvent("Search Expansion","Re-running query with expanded historical scope","info"),B(`${Z.content} (searching all historical data)`,{}));break;case"default_search":const H=[...e].reverse().find(Y=>Y.role==="user"||Y.sender==="user");H!=null&&H.content&&(v.addEvent("Search Default","Re-running query with default time scope","info"),B(`${H.content} (recent entries only)`,{}));break;default:console.warn("Unknown interactive action:",K.action)}},F=async()=>{if(!b||!(h!=null&&h.id)){f({title:"Error",description:"No active conversation to delete",variant:"destructive"});return}if(P||k==="processing"){f({title:"Cannot delete conversation",description:"Please wait for the current request to complete before deleting this conversation.",variant:"destructive"});return}try{const{error:K}=await Ze.from("chat_messages").delete().eq("thread_id",b);if(K)throw console.error("[Desktop] Error deleting messages:",K),K;const{error:Z}=await Ze.from("chat_threads").delete().eq("id",b);if(Z)throw console.error("[Desktop] Error deleting thread:",Z),Z;n([]),a(!0),g.current=null;const{data:H,error:Y}=await Ze.from("chat_threads").select("*").eq("user_id",h.id).order("updated_at",{ascending:!1}).limit(1);if(Y)throw Y;if(H&&H.length>0)w(H[0].id),O(H[0].id),window.dispatchEvent(new CustomEvent("threadSelected",{detail:{threadId:H[0].id}}));else{const{data:L,error:N}=await Ze.from("chat_threads").insert({user_id:h.id,title:"New Conversation",created_at:new Date().toISOString(),updated_at:new Date().toISOString()}).select().single();!N&&L&&(w(L.id),window.dispatchEvent(new CustomEvent("threadSelected",{detail:{threadId:L.id}})))}f({title:"Success",description:"Conversation deleted successfully"}),l(!1)}catch(K){console.error("[Desktop] Error deleting thread:",K),f({title:"Error",description:"Failed to delete conversation",variant:"destructive"})}},J=P||k==="processing"||C;return d.jsxs("div",{className:"chat-interface flex flex-col h-full",children:[d.jsxs("div",{className:"chat-header flex items-center justify-between py-3 px-4 border-b",children:[d.jsx("h2",{className:"text-xl font-semibold",children:d.jsx(Q,{text:"R"})}),d.jsx("div",{className:"flex items-center gap-2",children:b&&d.jsx(Xue,{children:d.jsxs(Kue,{children:[d.jsx(Jue,{asChild:!0,children:d.jsx(ct,{variant:"ghost",size:"icon",className:`h-9 w-9 ${J?"text-muted-foreground/50 cursor-not-allowed":"text-muted-foreground hover:text-destructive hover:bg-destructive/10 dark:hover:bg-destructive/20"}`,onClick:()=>!J&&l(!0),disabled:J,"aria-label":"Delete conversation",children:d.jsx(jJ,{className:"h-5 w-5"})})}),d.jsx(Gz,{children:J?d.jsx(Q,{text:"Cannot delete while processing"}):d.jsx(Q,{text:"Delete conversation"})})]})})})]}),d.jsx("div",{className:"chat-content flex-1 overflow-hidden",children:r?d.jsxs("div",{className:"flex items-center justify-center h-full",children:[d.jsx("div",{className:"animate-spin h-6 w-6 border-2 border-primary border-t-transparent rounded-full"}),d.jsx("span",{className:"ml-2 text-muted-foreground",children:d.jsx(Q,{text:"Loading conversation..."})})]}):e.length===0?d.jsx(Fet,{}):d.jsx(Det,{chatMessages:e,isLoading:C||P,processingStage:M||void 0,threadId:b,onInteractiveOptionClick:$})}),d.jsx("div",{className:"chat-input-container bg-white border-t p-4",children:d.jsxs("div",{className:"flex items-end gap-2",children:[d.jsx("div",{className:"flex-1",children:d.jsx(dKe,{onSendMessage:B,isLoading:C||P,userId:h==null?void 0:h.id})}),d.jsx(Wet,{isLoading:C||P,isRecording:!1,recordingTime:0,onStartRecording:()=>{},onStopRecording:()=>{}})]})}),d.jsx(S0,{open:s,onOpenChange:l,children:d.jsxs(bm,{children:[d.jsxs(Sm,{children:[d.jsx(_m,{children:d.jsx(Q,{text:"Delete this conversation?"})}),d.jsx(Tm,{children:d.jsx(Q,{text:"This will permanently delete this conversation and all its messages. This action cannot be undone."})})]}),d.jsxs(Em,{children:[d.jsx(Am,{children:d.jsx(Q,{text:"Cancel"})}),d.jsx(Cm,{onClick:F,className:"bg-red-500 hover:bg-red-600 text-white",children:d.jsx(Q,{text:"Delete"})})]})]})})]})},xtt=sF,wtt=qte,btt=lF,Que=_.forwardRef(({className:t,...e},n)=>d.jsx(F1,{className:He("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));Que.displayName=F1.displayName;const Stt=mm("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),ede=_.forwardRef(({side:t="right",className:e,children:n,...r},i)=>d.jsxs(btt,{children:[d.jsx(Que,{}),d.jsxs(z1,{ref:i,className:He(Stt({side:t}),"max-h-screen overflow-y-auto","break-words overflow-wrap-anywhere",e),...r,children:[n,d.jsxs(_A,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[d.jsx(cc,{className:"h-5 w-5"}),d.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));ede.displayName=z1.displayName;const tde=({className:t,...e})=>d.jsx("div",{className:He("flex flex-col space-y-2 text-center sm:text-left","break-words overflow-wrap-anywhere",t),...e});tde.displayName="SheetHeader";const Ett=_.forwardRef(({className:t,...e},n)=>d.jsx(U1,{ref:n,className:He("text-lg font-semibold text-foreground","break-words overflow-wrap-anywhere hyphens-auto",t),...e}));Ett.displayName=U1.displayName;const _tt=_.forwardRef(({className:t,...e},n)=>d.jsx(B1,{ref:n,className:He("text-sm text-muted-foreground","break-words overflow-wrap-anywhere",t),...e}));_tt.displayName=B1.displayName;var Ttt="Separator",vK="horizontal",Ctt=["horizontal","vertical"],nde=_.forwardRef((t,e)=>{const{decorative:n,orientation:r=vK,...i}=t,o=Att(r)?r:vK,s=n?{role:"none"}:{"aria-orientation":o==="vertical"?o:void 0,role:"separator"};return d.jsx(At.div,{"data-orientation":o,...s,...i,ref:e})});nde.displayName=Ttt;function Att(t){return Ctt.includes(t)}var rde=nde;const ide=_.forwardRef(({className:t,orientation:e="horizontal",decorative:n=!0,...r},i)=>d.jsx(rde,{ref:i,decorative:n,orientation:e,className:He("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...r}));ide.displayName=rde.displayName;function Mtt({children:t,className:e="",forceTranslate:n=!0,onTranslationStart:r,onTranslationEnd:i,enableFontScaling:o=!1,scalingContext:a="general"}){const[s,l]=_.useState(t),[c,u]=_.useState(!1),{translate:f,currentLanguage:h,getCachedTranslation:p}=In(),y=_.useRef(h),g=_.useRef(!1),v=_.useRef(t),b=Wi(),w=ib(b.pathname),T=_.useRef(!0);W3(h);const C=async()=>{if(!(t!=null&&t.trim())){l("");return}if(w&&!n){l(t);return}if(h==="en"){l(t);return}const z=p(t);if(z){l(z);return}c||(u(!0),r&&r()),console.log(`TranslatableMarkdown: Translating markdown content to ${h}`);try{const O=await f(t,"en");T.current&&y.current===h&&v.current===t?O?(l(O),console.log("TranslatableMarkdown: Successfully translated markdown content")):(l(t),console.log("TranslatableMarkdown: Empty translation result, using original content")):console.log("Language or content changed during translation, discarding result")}catch(O){console.error("Markdown translation error:",O),T.current&&y.current===h&&v.current===t&&(l(t),console.warn(`TranslatableMarkdown: Failed to translate markdown content to ${h}`))}finally{T.current&&(u(!1),i&&i())}};_.useEffect(()=>(T.current=!0,y.current=h,v.current=t,(async()=>{T.current&&(await C(),T.current&&(g.current=!0))})(),()=>{T.current=!1}),[t,h,n]),_.useEffect(()=>{const z=()=>{y.current=h,v.current=t,C()};return window.addEventListener("languageChange",z),()=>{window.removeEventListener("languageChange",z)}},[t,h,n]);const P=o?G3(h,e):e,M=o?q3(h,{}):{};let k={};o&&a==="compact"&&(k={...k,overflow:"hidden",textOverflow:"ellipsis"});const I={...M,...k},U=s||t;return d.jsx("div",{className:`${c?"opacity-70":""}`,"data-translating":c?"true":"false","data-translated":s!==t?"true":"false","data-lang":h,"data-force-translate":n?"true":"false","data-font-scaled":o?"true":"false","data-scaling-context":a,style:I,children:d.jsx(Fue,{className:P,children:U})})}const xK=({message:t,showAnalysis:e=!1,isLoading:n=!1})=>{var c,u,f;const[r,i]=_.useState(!1),{user:o}=or();if(n)return d.jsx(Ke.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},className:"mb-3",children:d.jsx(zue,{className:"justify-start"})});const a=t.role==="assistant"&&t.references&&t.references.length>0,s=ve.useMemo(()=>t.content,[t]),l=t.role==="error"?"assistant":t.role;return d.jsxs(Ke.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},className:`relative flex items-start gap-2 ${l==="user"?"justify-end":"justify-start"} mb-3`,children:[l==="assistant"&&d.jsx("div",{className:"border border-primary/20 rounded-full",children:d.jsx(Hz,{className:"w-8 h-8",size:32})}),d.jsxs("div",{className:He("min-w-0 max-w-[85%] rounded-2xl p-3.5 text-sm shadow-sm",l==="user"?"bg-primary text-primary-foreground rounded-tr-none":"bg-muted/60 border border-border/50 rounded-tl-none"),children:[l==="assistant"?d.jsx(Mtt,{className:"prose dark:prose-invert prose-sm max-w-none break-words",forceTranslate:!0,enableFontScaling:!0,scalingContext:"compact",children:s}):d.jsx(Q,{text:t.content,forceTranslate:!0,className:"break-words",enableFontScaling:!0,scalingContext:"compact"}),e&&l==="assistant"&&t.analysis&&d.jsxs("div",{className:"mt-3 text-xs opacity-70",children:[d.jsx(ide,{className:"my-2"}),d.jsx("div",{className:"font-semibold",children:d.jsx(Q,{text:"Analysis:",forceTranslate:!0})}),d.jsx("p",{children:d.jsx(Q,{text:t.analysis.analysis,forceTranslate:!0})}),t.analysis.requiresSql&&d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"font-semibold mt-1",children:d.jsx(Q,{text:"SQL Query:",forceTranslate:!0})}),d.jsx("pre",{className:"text-[10px] bg-black/10 p-1 rounded overflow-x-auto",children:t.analysis.sqlQuery})]})]}),a&&d.jsxs("div",{className:"mt-2",children:[d.jsxs(ct,{variant:"ghost",size:"sm",className:"p-0 h-6 text-xs font-medium flex items-center gap-1 text-muted-foreground dark:text-white/70 dark:hover:text-white",onClick:()=>i(!r),children:[d.jsx(EJ,{className:"h-3 w-3 mr-1"}),d.jsx(Q,{text:`${t.references.length} journal entries`,forceTranslate:!0,enableFontScaling:!0,scalingContext:"compact"}),r?d.jsx(D3,{className:"h-3 w-3 ml-1"}):d.jsx(b1,{className:"h-3 w-3 ml-1"})]}),d.jsx(Kc,{children:r&&d.jsxs(Ke.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mt-1 text-xs max-h-32 overflow-y-auto border-l-2 border-primary/30 pl-2 pr-1",children:[t.references.slice(0,2).map((h,p)=>{const y=h.date&&!isNaN(new Date(h.date).getTime())?Pte(new Date(h.date)):{type:"translatable",text:"Unknown date"};return d.jsxs("div",{className:"mb-1 py-1",children:[d.jsx("div",{className:"font-medium dark:text-white/90",children:d.jsx(Q,{text:y.text,forceTranslate:y.type==="translatable",enableFontScaling:!0,scalingContext:"compact"})}),d.jsx("div",{className:"text-muted-foreground dark:text-white/70",children:d.jsx(Q,{text:h.snippet,forceTranslate:!0,enableFontScaling:!0,scalingContext:"compact"})})]},p)}),t.references.length>2&&d.jsx("div",{className:"text-xs text-muted-foreground dark:text-white/60",children:d.jsx(Q,{text:`+${t.references.length-2} more entries`,forceTranslate:!0,enableFontScaling:!0,scalingContext:"compact"})})]})})]})]}),l==="user"&&d.jsxs(C2,{className:"w-8 h-8 border border-primary/20",children:[d.jsx(A2,{src:(c=o==null?void 0:o.user_metadata)==null?void 0:c.avatar_url,alt:"User",className:"bg-primary/20",loading:"eager"}),d.jsx(M2,{className:"bg-primary/20 text-primary text-xs",children:(u=o==null?void 0:o.user_metadata)!=null&&u.full_name?o.user_metadata.full_name.charAt(0):((f=o==null?void 0:o.email)==null?void 0:f.charAt(0))||"U"})]})]})};function Ptt({onSendMessage:t,isLoading:e,userId:n}){const[r,i]=_.useState(""),[o,a]=_.useState("Type your message..."),[s,l]=_.useState(!1),[c,u]=_.useState(!1),f=_.useRef(null),h=_.useRef(null),p=$1(),{isActive:y,isInStep:g}=ka(),{translate:v,currentLanguage:b}=In(),w=y&&g(5);if(_.useEffect(()=>{(async()=>{try{if(b==="en")a("Type your message...");else{const k=await v("Type your message...");a(k||"Type your message...")}}catch(k){console.error("Error translating placeholder:",k),a("Type your message...")}})()},[b,v]),w)return console.log("In tutorial step 5 - not rendering chat input at all"),null;_.useEffect(()=>{const M=()=>{var k,I;if(window.visualViewport){const U=window.visualViewport.height<window.innerHeight*.75;if(c!==U){u(U);const z=U?"keyboardOpen":"keyboardClose";window.dispatchEvent(new Event(z)),U?(document.body.classList.add("keyboard-visible"),(k=document.querySelector(".mobile-chat-interface"))==null||k.classList.add("keyboard-visible")):(document.body.classList.remove("keyboard-visible"),(I=document.querySelector(".mobile-chat-interface"))==null||I.classList.remove("keyboard-visible"),setTimeout(()=>{window.scrollTo({top:document.body.scrollHeight,behavior:"smooth"})},100))}}};if(!w){M(),window.visualViewport&&(window.visualViewport.addEventListener("resize",M),window.addEventListener("resize",M));const k=()=>{var U;document.body.classList.add("keyboard-visible"),(U=document.querySelector(".mobile-chat-interface"))==null||U.classList.add("keyboard-visible"),setTimeout(()=>{f.current&&f.current.scrollIntoView({behavior:"smooth",block:"center"})},300)},I=f.current;return I&&I.addEventListener("focus",k),()=>{window.visualViewport&&(window.visualViewport.removeEventListener("resize",M),window.removeEventListener("resize",M)),I&&I.removeEventListener("focus",k),document.body.classList.remove("keyboard-visible")}}},[c,w]);const T=M=>{i(M.target.value)},C=M=>{M.key==="Enter"&&!M.shiftKey&&!e&&(M.preventDefault(),P())},P=async()=>{if(e||s)return;const M=r.trim();if(M)try{p.addEvent("User Message",`Preparing to send: "${M.substring(0,30)}${M.length>30?"...":""}"`,"info"),l(!0),p.addEvent("Send Message","Calling onSendMessage handler","info"),t(M),i(""),f.current&&f.current.focus(),p.addEvent("User Input","Reset input field after sending","success")}catch(k){console.error("Error sending message:",k),p.addEvent("Send Error",k instanceof Error?k.message:"Unknown error sending message","error")}finally{l(!1)}};return d.jsxs("div",{ref:h,className:`p-2 border-t border-border flex items-center gap-2 ${c?"input-keyboard-active":""}`,style:{position:"fixed",bottom:c?0:"54px",left:0,right:0,paddingBottom:c?"5px":"8px",marginBottom:0,zIndex:60,boxShadow:"0 -1px 3px rgba(0, 0, 0, 0.07)",transition:"all 0.2s ease",borderTop:c?"1px solid rgba(0, 0, 0, 0.1)":"none",borderBottom:c?"none":"1px solid rgba(0, 0, 0, 0.1)"},children:[d.jsx("div",{className:"flex-1 relative",children:d.jsx(xm,{ref:f,type:"text",value:r,onChange:T,onKeyDown:C,placeholder:o,className:"w-full pr-10 focus:outline-none focus:ring-2 focus:ring-primary border-2 border-primary/40 shadow-[0_0_8px_rgba(155,135,245,0.5)] bg-background text-foreground",disabled:e||s})}),d.jsx("div",{className:"flex-shrink-0 flex items-center",children:d.jsx(ct,{type:"button",size:"icon",className:"h-8 w-8 rounded-full flex items-center justify-center",onClick:P,disabled:e||s||!r.trim(),children:s||e?d.jsx(Aa,{className:"h-4 w-4 animate-spin"}):d.jsx(kJ,{className:"h-4 w-4"})})})]})}const ktt=async(t,e,n)=>{try{const{data:r,error:i}=await Ze.from("chat_threads").update({...e,updated_at:new Date().toISOString()}).eq("id",t).eq("user_id",n).select().single();return i?(console.error("Error updating chat thread:",i),null):r}catch(r){return console.error("Exception updating chat thread:",r),null}},Ntt=async t=>{try{const{data:e,error:n}=await Ze.from("chat_threads").select("*").eq("user_id",t).order("updated_at",{ascending:!1});return n?(console.error("Error fetching chat threads:",n),[]):e||[]}catch(e){return console.error("Exception fetching chat threads:",e),[]}},ode=({activeThreadId:t,onSelectThread:e,onCreateThread:n,showHeader:r=!0})=>{const[i,o]=_.useState([]),[a,s]=_.useState(!0),[l,c]=_.useState(null),[u,f]=_.useState(""),{user:h}=or();_.useEffect(()=>{const v=async()=>{if(!(h!=null&&h.id)){o([]),s(!1);return}s(!0);try{const C=await Ntt(h.id);o(C)}catch(C){console.error("Error loading threads:",C)}finally{s(!1)}};v();const b=C=>{var P;(P=C.detail)!=null&&P.threadId},w=C=>{var P,M;(P=C.detail)!=null&&P.threadId&&((M=C.detail)!=null&&M.title)&&o(k=>k.map(I=>I.id===C.detail.threadId?{...I,title:C.detail.title}:I))};window.addEventListener("threadSelected",b),window.addEventListener("threadTitleUpdated",w);let T;return h!=null&&h.id&&(T=Ze.channel(`threads_for_${h.id}`).on("postgres_changes",{event:"*",schema:"public",table:"chat_threads",filter:`user_id=eq.${h.id}`},()=>{v()}).subscribe()),()=>{window.removeEventListener("threadSelected",b),window.removeEventListener("threadTitleUpdated",w),T&&Ze.removeChannel(T)}},[h==null?void 0:h.id]);const p=v=>{c(v.id),f(v.title)},y=()=>{c(null),f("")},g=async v=>{if(!(!u.trim()||!(h!=null&&h.id))){try{await ktt(v,{title:u.trim()},h.id)&&(o(w=>w.map(T=>T.id===v?{...T,title:u.trim()}:T)),window.dispatchEvent(new CustomEvent("threadTitleUpdated",{detail:{threadId:v,title:u.trim()}})))}catch(b){console.error("Error updating thread title:",b)}c(null),f("")}};return d.jsxs("div",{className:"h-full flex flex-col",children:[r&&d.jsx("div",{className:"p-2 border-b flex items-center justify-between",children:d.jsxs(ct,{className:"flex items-center gap-1",onClick:n,size:"sm",children:[d.jsx(F3,{className:"h-4 w-4"}),d.jsx(Q,{text:"New Chat"})]})}),d.jsx("div",{className:"flex-1 overflow-y-auto p-2",children:a?d.jsx("div",{className:"flex justify-center p-4",children:d.jsx(Aa,{className:"h-6 w-6 animate-spin text-primary"})}):i.length===0?d.jsx("div",{className:"text-center p-4 text-sm text-muted-foreground",children:d.jsx(Q,{text:"No conversations yet"})}):d.jsx("div",{className:"space-y-0.5",children:i.map(v=>d.jsx("div",{className:`group px-2 py-2 rounded-md transition-colors ${t===v.id?"bg-primary/10 text-primary":"hover:bg-muted/60"}`,children:l===v.id?d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx(xm,{value:u,onChange:b=>f(b.target.value),autoFocus:!0,className:"h-8 text-sm",onKeyDown:b=>{b.key==="Enter"&&g(v.id),b.key==="Escape"&&y()}}),d.jsx(ct,{size:"icon",variant:"ghost",className:"h-6 w-6",onClick:()=>g(v.id),children:d.jsx(Sd,{className:"h-4 w-4"})}),d.jsx(ct,{size:"icon",variant:"ghost",className:"h-6 w-6",onClick:y,children:d.jsx(cc,{className:"h-4 w-4"})})]}):d.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>e(v.id),children:[d.jsx("div",{className:"flex-1 truncate text-sm font-medium",children:d.jsx(Q,{text:v.title})}),d.jsx(ct,{size:"icon",variant:"ghost",className:"h-6 w-6 opacity-0 group-hover:opacity-100",onClick:b=>{b.stopPropagation(),p(v)},children:d.jsx(MJ,{className:"h-3 w-3"})})]})},v.id))})})]})};function Rtt(t){const e=t.toLowerCase(),n={isEmotionFocused:!1,isQuantitative:!1,isWhyQuestion:!1,isTemporalQuery:!1,isTimePatternQuery:!1,isWhenQuestion:!1,needsVectorSearch:!0,needsMoreContext:!1,needsDataAggregation:!1,isSpecificQuery:!1,isThemeFocused:!1,requiresTimeAnalysis:!1,isRatingRequest:!1,isPersonalInsightQuery:!1,isMentalHealthQuery:!1,isStatisticalQuery:!1,needsEmergencyFixes:!1,timeRange:{startDate:null,endDate:null,periodName:"recently",duration:0}},r=["feel","feeling","felt","emotion","emotions","mood","moods","happy","sad","angry","anxious","joy","fear","happiness"];n.isEmotionFocused=r.some(c=>e.includes(c)),n.isWhyQuestion=e.includes("why")||e.includes("reason")||e.includes("reasons")||e.includes("explain")||e.includes("what caused")||e.includes("what makes"),n.needsMoreContext=n.isWhyQuestion||e.includes("explain")||e.includes("elaborate")||e.includes("details"),n.isQuantitative=e.includes("how much")||e.includes("how many")||e.includes("count")||e.includes("percentage")||e.includes("rate")||e.includes("average")||e.includes("top")||/\d+/.test(e),n.isRatingRequest=/\brate\b|\bscore\b|\bevaluate\b|\bassess\b|\banalyze\b|\breview\b|\brank\b/i.test(e),n.isRatingRequest&&(n.needsDataAggregation=!0);const i=[/\bam i\b|\bdo i\b|\bhow am i\b|\bwhat am i\b/i,/\bhave i been\b|\bhave i felt\b/i,/\bmy personality\b|\bmy traits\b|\bmy character\b/i,/\bdoes my\b|\bhow does my\b/i,/\bhow (do|would|did|should) i\b/i,/\bwhat (do|should) i\b/i,/\bi tend to\b|\bi usually\b|\bi often\b|\bi normally\b/i];n.isPersonalInsightQuery=i.some(c=>c.test(e));const o=["mental health","wellbeing","well-being","wellness","self-care","anxiety","depression","stress","burnout","trauma","therapy","coping","healing","mindfulness","meditation","overwhelm","sleep","insomnia","rest","mood","overthinking","worry","rumination","mental state"];n.isMentalHealthQuery=o.some(c=>e.includes(c)),n.isMentalHealthQuery&&/\b(i|me|my|myself)\b/i.test(e)&&(n.isPersonalInsightQuery=!0,n.needsMoreContext=!0),n.needsEmergencyFixes=n.isPersonalInsightQuery||n.isEmotionFocused;const a=["theme","themes","topic","topics","about","regarding","related to","concerning","fitness","health","exercise","workout","physical","training","active","fit"];if(n.isThemeFocused=a.some(c=>e.includes(c)),!n.isThemeFocused){const c=[/have i been (\w+) (lately|recently)/i,/am i (\w+)/i,/do i (\w+)/i,/how (\w+) (am|are) (i|we|my)/i,/how (is|was) my (\w+)/i,/my (\w+) (is|are|has been)/i];for(const u of c){const f=e.match(u);if(f){n.isThemeFocused=!0,u.toString().includes("how (is|was) my")?n.theme=f[2]:n.theme=f[1];break}}}const s=["happy","sad","angry","anxious","joy","fear","happiness","excitement","boredom","frustration","hope"];for(const c of s)if(e.includes(c)){n.emotion=c;break}if(!n.theme&&n.isThemeFocused){const c=e.match(/about\s+(\w+)/i)||e.match(/regarding\s+(\w+)/i)||e.match(/related to\s+(\w+)/i)||e.match(/my\s+(\w+)/i);c&&c[1]&&(n.theme=c[1])}n.isTimePatternQuery=e.includes("what time")||e.includes("when do i usually")||e.includes("time of day")||e.includes("morning")&&e.includes("night")||e.includes("time")&&e.includes("most"),n.requiresTimeAnalysis=n.isTimePatternQuery||e.includes("pattern")||e.includes("routine"),n.isTemporalQuery=e.includes("yesterday")||e.includes("last week")||e.includes("past week")||e.includes("past month")||e.includes("this week")||e.includes("this month")||e.includes("today")||e.includes("lately")||e.includes("recently")||e.includes("of late")||/\b(january|february|march|april|may|june|july|august|september|october|november|december)\b/.test(e)||/\b(jan|feb|mar|apr|may|jun|jul|aug|sep|sept|oct|nov|dec)\b/.test(e),n.isWhenQuestion=e.startsWith("when")||e.includes("what day")||e.includes("what date")||e.includes("which day")||e.includes("which date");const l=jtt(e);return l&&(n.timeRange=l,l.startDate&&(n.startDate=l.startDate),l.endDate&&(n.endDate=l.endDate)),n.isSpecificQuery=n.isTemporalQuery||n.isWhenQuestion||n.theme!==void 0,n.needsDataAggregation=n.isQuantitative||n.isRatingRequest||n.isPersonalInsightQuery||e.includes("pattern")||e.includes("usually")||e.includes("typically")||e.includes("often")||e.includes("most of the time")||e.includes("lately")||e.includes("of late")||e.includes("recently"),n}function jtt(t){const e=new Date,n=e.getFullYear(),r=e.getMonth(),i=e.getDate();let o=null,a=null,s="recently",l=30;const c=t.toLowerCase(),u=["january","february","march","april","may","june","july","august","september","october","november","december"],f=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"],h=/\b(\d{4})\s+(january|february|march|april|may|june|july|august|september|october|november|december|jan|feb|mar|apr|may|jun|jul|aug|sep|sept|oct|nov|dec)\b/i,p=/\b(january|february|march|april|may|june|july|august|september|october|november|december|jan|feb|mar|apr|may|jun|jul|aug|sep|sept|oct|nov|dec)\s+(\d{4})\b/i;let y=h.exec(c),g=null,v=null;if(y){g=parseInt(y[1]);const w=y[2].toLowerCase();v=b(w)}else if(y=p.exec(c),y){const w=y[1].toLowerCase();g=parseInt(y[2]),v=b(w)}if(g!==null&&v!==null)o=new Date(g,v,1),o.setHours(0,0,0,0),a=new Date(g,v+1,0),a.setHours(23,59,59,999),s=`${u[v]} ${g}`;else{let w="",T=-1;for(let C=0;C<u.length;C++)if(c.includes(u[C])){w=u[C],T=C;break}if(T===-1){for(let C=0;C<f.length;C++)if(f[C]==="may"){if(/\b(in|during|for|about|of|this|last)\s+may\b|\bmay\s+(of|\d{4}|\d{1,2}(st|nd|rd|th))\b/i.test(c)){w="may",T=4;break}}else if(c.includes(f[C])){w=f[C],T=C;break}}if(T!==-1){let C=n;T>r&&(C=n-1),o=new Date(C,T,1),o.setHours(0,0,0,0),a=new Date(C,T+1,0),a.setHours(23,59,59,999),s=w}}if(o===null)if(c.includes("yesterday"))o=new Date(n,r,i-1),o.setHours(0,0,0,0),a=new Date(n,r,i-1),a.setHours(23,59,59,999),s="yesterday";else if(c.includes("last week")){const w=e.getDay(),T=w===0?7:w;o=new Date(n,r,i-T-6),o.setHours(0,0,0,0),a=new Date(n,r,i-T),a.setHours(23,59,59,999),s="last week"}else if(c.includes("this week")){const w=e.getDay(),T=w===0?6:w-1;o=new Date(n,r,i-T),o.setHours(0,0,0,0),a=new Date(n,r,i),a.setHours(23,59,59,999),s="this week"}else c.includes("last month")?(o=new Date(n,r-1,1),o.setHours(0,0,0,0),a=new Date(n,r,0),a.setHours(23,59,59,999),s="last month"):c.includes("this month")?(o=new Date(n,r,1),o.setHours(0,0,0,0),a=e,s="this month"):c.includes("today")?(o=new Date(n,r,i),o.setHours(0,0,0,0),a=e,s="today"):(o=new Date(n,r,i-30),o.setHours(0,0,0,0),a=e,s="the last 30 days");function b(w){const T=["january","february","march","april","may","june","july","august","september","october","november","december"],C=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"];let P=T.indexOf(w);return P===-1&&(P=C.indexOf(w)),P}if(o&&a){const w=a.getTime()-o.getTime();l=Math.ceil(w/(1e3*60*60*24))}return console.log(`Time range extracted: ${o==null?void 0:o.toISOString()} to ${a==null?void 0:a.toISOString()} (${s}), duration: ${l} days`),{startDate:o?o.toISOString():null,endDate:a?a.toISOString():null,periodName:s,duration:l}}async function Itt(t,e,n,r,i=!1,o={}){var a;try{console.log("[ChatService] Processing message with enhanced database-aware context:",t);const{data:s,error:l}=await Ze.functions.invoke("chat-query-classifier",{body:{message:t,conversationContext:[]}});l&&console.error("[ChatService] Classification error:",l);const c=s||{category:"JOURNAL_SPECIFIC",shouldUseJournal:!0};if(console.log("[ChatService] Message classification:",c),c.category==="GENERAL_MENTAL_HEALTH"||c.category==="CONVERSATIONAL")return console.log("[ChatService] Handling general/conversational question"),{content:await Ott(t),role:"assistant"};console.log("[ChatService] Processing journal-specific question with enhanced database-aware dual-search SOULo");const{data:{session:u},error:f}=await Ze.auth.getSession();if(f||!(u!=null&&u.access_token))throw new Error("Authentication required");const{data:h}=await Ze.from("chat_messages").select("content, sender, role, created_at").eq("thread_id",r).order("created_at",{ascending:!1}).limit(5),p=h?[...h].reverse().map(b=>({role:b.sender==="user"?"user":"assistant",content:b.content,timestamp:b.created_at})):[],y=await Ze.functions.invoke("smart-query-planner",{body:{message:t,userId:e,conversationContext:p,isFollowUp:p.length>0,preserveTopicContext:!0,threadMetadata:{},isAnalysisFollowUp:!1,requireDualSearch:!0,requireDatabaseValidation:!0,confidenceThreshold:.9}});if(y.error)throw new Error(`Query planner error: ${y.error.message}`);const g=((a=y.data)==null?void 0:a.queryPlan)||{};g.searchConfidence<=.9&&console.log(`[ChatService] DATABASE-AWARE DUAL SEARCH ENFORCED - Confidence: ${g.searchConfidence} <= 90%`);const v=await Ze.functions.invoke("chat-with-rag",{body:{message:t,userId:e,threadId:r,conversationContext:p,queryPlan:g,useAllEntries:g.useAllEntries||!1,hasPersonalPronouns:g.hasPersonalPronouns||!1,hasExplicitTimeReference:g.hasExplicitTimeReference||!1,enforceDualSearch:g.searchConfidence<=.9,requireDatabaseValidation:!0,themeFilters:g.themeFilters||[],emotionFilters:g.emotionFilters||[],threadMetadata:{},databaseAware:!0},headers:{Authorization:`Bearer ${u.access_token}`}});if(v.error)throw new Error(`Chat RAG error: ${v.error.message}`);return{content:v.data.response||v.data,role:"assistant",references:v.data.references,analysis:{...v.data.analysis,databaseValidated:!0,enhancedThemeEmotionAwareness:!0},hasNumericResult:v.data.hasNumericResult}}catch(s){return console.error("[ChatService] Error processing message:",s),{content:"I'm having trouble understanding that right now. Could you try rephrasing your question? I'm here to help you explore your emotional patterns and wellbeing using both validated themes and emotional data from our comprehensive database.",role:"error"}}}async function Ott(t){console.log("[ChatService] Generating conversational response for:",t);try{const{data:e,error:n}=await Ze.functions.invoke("general-mental-health-chat",{body:{message:t}});return n?(console.error("[ChatService] General chat error:",n),DI(t)):e.response||DI(t)}catch(e){return console.error("[ChatService] General chat exception:",e),DI(t)}}function DI(t){const e=t.toLowerCase();return e.includes("confident")?`Building confidence is such a personal journey, and I love that you're thinking about it! 

Some gentle approaches that many people find helpful:
 **Start small** - celebrate tiny wins to build momentum
 **Practice self-compassion** - treat yourself like you would a good friend
 **Notice your strengths** - what are you naturally good at?
 **Challenge that inner critic** - would you talk to a friend the way you talk to yourself?

I'd love to help you understand your personal confidence patterns! If you're journaling with SOULo, try asking me something like "When do I feel most confident?" and I can analyze your entries for personalized insights using both your themes and emotional patterns.

What aspects of confidence feel most important to you right now?`:e.includes("anxiety")||e.includes("stress")?`I hear you, and anxiety can feel so overwhelming. You're not alone in this.

Some gentle strategies that often help:
 **Breathe mindfully** - try the 4-7-8 technique (inhale 4, hold 7, exhale 8)
 **Ground yourself** - name 5 things you can see, 4 you can hear, 3 you can touch
 **Move your body** - even a short walk can shift your energy
 **Be kind to yourself** - anxiety is tough, and you're doing your best

If you're using SOULo for journaling, I can help you understand your personal anxiety patterns and themes. Try asking me "What triggers my anxiety?" or "How am I handling stress?" and I'll analyze your entries for insights.

What would feel most helpful for you right now?`:`I'm here to support you with whatever's on your mind about emotional wellbeing and mental health. 

I can share general insights about topics like:
 Managing stress and anxiety
 Building confidence and self-esteem  
 Developing healthy habits and routines
 Understanding emotions and mood patterns
 Self-care and mindfulness practices

**For personalized insights,** I can also analyze your journal entries to understand your unique patterns and theme-emotion relationships. Just ask me something personal like "How am I doing?" or "What makes me happiest?" and I'll dive into your journaling data using both thematic and emotional analysis.

What would you like to explore together?`}function Ltt({currentThreadId:t,onSelectThread:e,onCreateNewThread:n,userId:r,mentalHealthInsights:i}){const[o,a]=_.useState([]),[s,l]=_.useState(!0),[c,u]=_.useState(t||null),[f,h]=_.useState(!0),[p,y]=_.useState(!1),g=$1(),{isLoading:v,isProcessing:b,processingStatus:w,setLocalLoading:T}=Vz(c),C=[{text:"What were my top emotions last week?",icon:d.jsx(SJ,{className:"h-4 w-4 flex-shrink-0 mr-2"})},{text:"What time of the day do I usually like journaling?",icon:d.jsx(_0e,{className:"h-4 w-4 flex-shrink-0 mr-2"})},{text:"Am i am introvert? Do i like people in general?",icon:d.jsx(z3,{className:"h-4 w-4 flex-shrink-0 mr-2"})},{text:"What should i particularly do to help my mental health?",icon:d.jsx(Qp,{className:"h-4 w-4 flex-shrink-0 mr-2"})},{text:"Rate my top 3 negative traits out of 100? What do i do to improve them?",icon:d.jsx(Qp,{className:"h-4 w-4 flex-shrink-0 mr-2"})}],{toast:P}=oh(),{user:M}=or(),{translate:k}=In(),[I,U]=_.useState(!1),z=_.useRef(null);_.useRef(null);const O=_.useRef(null);_.useEffect(()=>{if(c)$(c),g.addEvent("Thread Initialization",`Loading current thread: ${c}`,"info");else{const Z=localStorage.getItem("lastActiveChatThreadId");Z&&(M!=null&&M.id)?(u(Z),$(Z),g.addEvent("Thread Initialization",`Loading stored thread: ${Z}`,"info")):(l(!1),g.addEvent("Thread Initialization","No stored thread found","info"))}},[c,M==null?void 0:M.id]),_.useEffect(()=>{const Z=H=>{H.detail.threadId&&(u(H.detail.threadId),$(H.detail.threadId),g.addEvent("Thread Change",`Thread selected: ${H.detail.threadId}`,"info"))};return window.addEventListener("threadSelected",Z),()=>{window.removeEventListener("threadSelected",Z)}},[]),_.useEffect(()=>{B()},[o,v,b]);const B=()=>{setTimeout(()=>{var Z;(Z=z.current)==null||Z.scrollIntoView({behavior:"smooth"})},100)},$=async Z=>{if(!Z||!(M!=null&&M.id)){l(!1);return}if(O.current===Z){g.addEvent("Thread Loading",`Thread ${Z} already loaded, skipping`,"info");return}l(!0),g.addEvent("Thread Loading",`[Mobile] Loading messages for thread ${Z}`,"info");try{console.log(`[Mobile] Loading messages for thread ${Z}`);const{data:H,error:Y}=await Ze.from("chat_threads").select("id").eq("id",Z).eq("user_id",M.id).single();if(Y||!H){g.addEvent("Thread Loading",`[Mobile] Thread not found or doesn't belong to user: ${(Y==null?void 0:Y.message)||"Unknown error"}`,"error"),console.error("[Mobile] Thread not found or doesn't belong to user:",Y),a([]),h(!0),l(!1);return}g.addEvent("Thread Loading",`[Mobile] Thread ${Z} found, fetching messages`,"success");const L=await Uue(Z,M.id);if(L&&L.length>0){g.addEvent("Thread Loading",`[Mobile] Loaded ${L.length} messages for thread ${Z}`,"success"),console.log(`[Mobile] Loaded ${L.length} messages for thread ${Z}`);const N=L.map(V=>({role:V.sender,content:V.content,references:V.reference_entries?Array.isArray(V.reference_entries)?V.reference_entries:[]:void 0,hasNumericResult:V.has_numeric_result}));a(N),h(!1),O.current=Z}else g.addEvent("Thread Loading",`[Mobile] No messages found for thread ${Z}`,"info"),console.log(`[Mobile] No messages found for thread ${Z}`),a([]),h(!0)}catch(H){g.addEvent("Thread Loading",`[Mobile] Error loading messages: ${H instanceof Error?H.message:"Unknown error"}`,"error"),console.error("[Mobile] Error loading messages:",H),P({title:"Error loading messages",description:"Could not load conversation history.",variant:"destructive"}),a([]),h(!0)}finally{l(!1)}},F=async Z=>{var L,N;if(!Z.trim())return;if(!(M!=null&&M.id)){P({title:"Authentication required",description:"Please sign in to use the chat feature.",variant:"destructive"}),g.addEvent("Authentication","[Mobile] User not authenticated, message sending blocked","error");return}if(b||v){P({title:"Please wait",description:"Another request is currently being processed.",variant:"default"});return}let H=c,Y=!1;if(H){g.addEvent("Message Check",`[Mobile] Checking if first message in thread ${H}`,"info");const{count:V,error:W}=await Ze.from("chat_messages").select("*",{count:"exact",head:!0}).eq("thread_id",H);Y=!W&&V===0,Y&&g.addEvent("Message Check",`[Mobile] This is the first message in thread ${H}`,"info")}else try{if(g.addEvent("Thread Creation","[Mobile] Creating new thread for message","info"),n){const V=await n();if(!V)throw new Error("Failed to create new thread");H=V,g.addEvent("Thread Creation",`[Mobile] New thread created: ${V}`,"success")}else{const V=n3();g.addEvent("Thread Creation",`[Mobile] Creating new thread with ID: ${V}`,"info");const{error:W}=await Ze.from("chat_threads").insert({id:V,user_id:M.id,title:"New Conversation",created_at:new Date().toISOString(),updated_at:new Date().toISOString()});if(W)throw g.addEvent("Thread Creation",`[Mobile] Error creating thread: ${W.message}`,"error"),W;H=V,u(V),g.addEvent("Thread Creation",`[Mobile] New thread created: ${V}`,"success")}}catch(V){g.addEvent("Thread Creation",`[Mobile] Error creating thread: ${V.message||"Unknown error"}`,"error"),console.error("[Mobile] Error creating thread:",V),P({title:"Error",description:"Failed to create new conversation",variant:"destructive"});return}g.addEvent("User Message",`[Mobile] Adding user message to UI: "${Z.substring(0,30)}${Z.length>30?"...":""}"`,"info"),a(V=>[...V,{role:"user",content:Z}]),T(!0,"Processing your request...");try{await lv(H,"processing"),g.addEvent("Database",`[Mobile] Saving user message to thread ${H}`,"info");const V=await zp(H,Z,"user",M.id);g.addEvent("Database",`[Mobile] User message saved: ${V==null?void 0:V.id}`,"success"),console.log("[Mobile] User message saved:",V==null?void 0:V.id),window.dispatchEvent(new CustomEvent("messageCreated",{detail:{threadId:H,isFirstMessage:Y,content:Z}})),g.addEvent("Query Analysis",`[Mobile] Analyzing query: "${Z.substring(0,30)}${Z.length>30?"...":""}"`,"info"),console.log("[Mobile] Performing comprehensive query analysis for:",Z);const W=Rtt(Z),ne={isEmotionFocused:W.isEmotionFocused,isQuantitative:W.isQuantitative,isWhyQuestion:W.isWhyQuestion,isTemporalQuery:W.isTemporalQuery,timeRange:W.timeRange.periodName,emotion:W.emotion||"none detected"};g.addEvent("Query Analysis",`[Mobile] Analysis result: ${JSON.stringify(ne)}`,"success"),console.log("[Mobile] Query analysis result:",W),g.addEvent("AI Processing","[Mobile] Sending query to AI for processing","info");const se=await Itt(Z,M.id,W,H,!1);await lv(H,"idle");const te={role:se.role,hasReferences:!!((L=se.references)!=null&&L.length),refCount:((N=se.references)==null?void 0:N.length)||0,hasAnalysis:!!se.analysis,hasNumericResult:se.hasNumericResult,errorState:se.role==="error"};g.addEvent("AI Processing",`[Mobile] Response received: ${JSON.stringify(te)}`,"success"),console.log("[Mobile] Response received:",te);const ie={role:se.role==="error"?"assistant":se.role,content:se.content,...se.references&&{references:se.references},...se.analysis&&{analysis:se.analysis},...se.hasNumericResult!==void 0&&{hasNumericResult:se.hasNumericResult}};(se.role==="error"||se.content.includes("issue retrieving"))&&(g.addEvent("AI Processing",`[Mobile] Received error response: ${se.content.substring(0,100)}...`,"error"),console.error("[Mobile] Received error response:",se.content)),g.addEvent("Database","[Mobile] Saving assistant response to database","info");const pe=await zp(H,se.content,"assistant",M.id,se.references||null,se.hasNumericResult||!1);if(g.addEvent("Database",`[Mobile] Assistant response saved: ${pe==null?void 0:pe.id}`,"success"),console.log("[Mobile] Assistant response saved:",pe==null?void 0:pe.id),o.length===0){const de=Z.length>30?Z.substring(0,30)+"...":Z;g.addEvent("Thread Update",`[Mobile] Updating thread title to: ${de}`,"info"),await Ze.from("chat_threads").update({title:de,updated_at:new Date().toISOString()}).eq("id",H)}g.addEvent("Thread Update",`[Mobile] Updating thread timestamp for ${H}`,"info"),await Ze.from("chat_threads").update({updated_at:new Date().toISOString()}).eq("id",H),g.addEvent("UI Update","[Mobile] Adding assistant response to chat","info"),a(de=>[...de,ie])}catch(V){g.addEvent("Error",`[Mobile] Error in message handling: ${(V==null?void 0:V.message)||"Unknown error"}`,"error"),console.error("[Mobile] Error sending message:",V),H&&await lv(H,"failed");const W="I'm having trouble processing your request. Please try again later. "+(V!=null&&V.message?`Error: ${V.message}`:"");g.addEvent("UI Update","[Mobile] Adding error message to chat","warning"),a(ne=>[...ne,{role:"assistant",content:W}]);try{g.addEvent("Database","[Mobile] Saving error message to database","info");const ne=await zp(H,W,"assistant",M.id);g.addEvent("Database",`[Mobile] Error message saved to database: ${ne==null?void 0:ne.id}`,"success"),console.log("[Mobile] Error message saved to database:",ne==null?void 0:ne.id)}catch(ne){g.addEvent("Database",`[Mobile] Failed to save error message: ${ne instanceof Error?ne.message:"Unknown error"}`,"error"),console.error("[Mobile] Failed to save error message:",ne)}}finally{T(!1)}},J=async()=>{if(!c||!(M!=null&&M.id)){P({title:"Error",description:"No active conversation to delete",variant:"destructive"});return}if(b||w==="processing"){P({title:"Cannot delete conversation",description:"Please wait for the current request to complete before deleting this conversation.",variant:"destructive"}),y(!1);return}try{const{error:Z}=await Ze.from("chat_messages").delete().eq("thread_id",c);if(Z)throw console.error("[Mobile] Error deleting messages:",Z),Z;const{error:H}=await Ze.from("chat_threads").delete().eq("id",c);if(H)throw console.error("[Mobile] Error deleting thread:",H),H;a([]),h(!0),O.current=null;const{data:Y,error:L}=await Ze.from("chat_threads").select("*").eq("user_id",M.id).order("updated_at",{ascending:!1}).limit(1);if(L)throw L;if(Y&&Y.length>0)u(Y[0].id),$(Y[0].id);else{const N=n3();await Ze.from("chat_threads").insert({id:N,user_id:M.id,title:"New Conversation",created_at:new Date().toISOString(),updated_at:new Date().toISOString()}),u(N)}P({title:"Success",description:"Conversation deleted successfully"}),y(!1)}catch(Z){console.error("[Mobile] Error deleting thread:",Z),P({title:"Error",description:"Failed to delete conversation",variant:"destructive"})}},K=b||w==="processing"||v;return d.jsxs("div",{className:"mobile-chat-interface h-full flex flex-col relative",children:[d.jsx("div",{className:"sticky top-0 z-40 w-full bg-background border-b",children:d.jsxs("div",{className:"container flex h-14 max-w-screen-lg items-center",children:[d.jsxs(xtt,{open:I,onOpenChange:U,children:[d.jsx(wtt,{asChild:!0,children:d.jsxs(ct,{variant:"ghost",size:"icon",className:"mr-2",children:[d.jsx(AJ,{className:"h-5 w-5"}),d.jsx("span",{className:"sr-only",children:d.jsx(Q,{text:"Toggle Menu"})})]})}),d.jsxs(ede,{side:"left",className:"w-[80%] sm:w-[350px]",children:[d.jsx(tde,{className:"flex flex-row items-center justify-between py-2",children:d.jsxs(ct,{className:"flex items-center gap-1",onClick:()=>{n(),U(!1)},size:"sm",children:[d.jsx(F3,{className:"h-4 w-4"}),d.jsx(Q,{text:"New Chat"})]})}),d.jsx("div",{className:"mt-2 h-[calc(100vh-80px)]",children:d.jsx(ode,{activeThreadId:c,onSelectThread:Z=>{e(Z),U(!1)},showHeader:!1})})]})]}),d.jsx("div",{className:"flex-1 flex justify-center",children:d.jsx("h1",{className:"text-lg font-semibold",children:d.jsx(Q,{text:"Ruh"})})}),d.jsxs(ct,{variant:"ghost",size:"icon",className:`ml-2 ${K?"text-muted-foreground/50 cursor-not-allowed":"text-muted-foreground hover:text-destructive"}`,onClick:()=>!K&&y(!0),disabled:K,children:[d.jsx(pT,{className:"h-5 w-5"}),d.jsx("span",{className:"sr-only",children:d.jsx(Q,{text:K?"Cannot delete while processing":"Delete Chat"})})]})]})}),d.jsxs("div",{className:"mobile-chat-content flex-1 overflow-y-auto px-2 py-3 space-y-3 flex flex-col pb-20",children:[s?d.jsxs("div",{className:"flex items-center justify-center py-10",children:[d.jsx("div",{className:"animate-spin h-6 w-6 border-2 border-primary border-t-transparent rounded-full"}),d.jsx("span",{className:"ml-2 text-muted-foreground",children:d.jsx(Q,{text:"Loading conversation..."})})]}):o.length===0?d.jsx("div",{className:"flex flex-col justify-start h-full mt-6 pt-4",children:d.jsxs("div",{className:"text-center px-4",children:[d.jsx("h3",{className:"text-xl font-medium mb-2",children:d.jsx(Q,{text:"How can I help you?"})}),d.jsx("p",{className:"text-muted-foreground text-sm mb-4",children:d.jsx(Q,{text:"Ask me anything about your mental well-being and journal entries"})}),f&&d.jsx(Ke.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},className:"flex flex-col gap-2 mx-auto max-w-[280px]",children:C.map((Z,H)=>d.jsx(ct,{variant:"outline",size:"sm",className:"px-3 py-2 h-auto justify-start text-sm text-left bg-muted/50 hover:bg-muted w-full",onClick:()=>F(Z.text),disabled:v||b,children:d.jsxs("div",{className:"flex items-start w-full",children:[d.jsx("span",{className:"flex-shrink-0 mt-0.5",children:Z.icon}),d.jsx("span",{className:"ml-1 flex-grow break-words whitespace-normal",children:d.jsx(Q,{text:Z.text})})]})},H))})]})}):d.jsxs("div",{className:"flex-grow space-y-3",children:[o.map((Z,H)=>d.jsx(xK,{message:Z,showAnalysis:!1},H)),(v||b)&&d.jsx(xK,{message:{role:"assistant",content:""},isLoading:!0})]}),d.jsx("div",{ref:z})]}),d.jsx("div",{className:"fixed bottom-14 left-0 right-0 z-50",children:d.jsx(Ptt,{onSendMessage:F,isLoading:v||b,userId:r||(M==null?void 0:M.id)})}),d.jsx(S0,{open:p,onOpenChange:y,children:d.jsxs(bm,{children:[d.jsxs(Sm,{children:[d.jsx(_m,{children:d.jsx(Q,{text:"Delete this conversation?"})}),d.jsx(Tm,{children:K?d.jsx(Q,{text:"Cannot delete conversation while the chatbot is processing a request. Please wait for the current request to complete."}):d.jsx(Q,{text:"This will permanently delete this conversation and all its messages. This action cannot be undone."})})]}),d.jsxs(Em,{children:[d.jsx(Am,{children:d.jsx(Q,{text:"Cancel"})}),d.jsx(Cm,{onClick:J,disabled:K,className:`${K?"bg-muted text-muted-foreground cursor-not-allowed":"bg-destructive hover:bg-destructive/90 text-destructive-foreground"}`,children:d.jsx(Q,{text:"Delete"})})]})]})})]})}async function Dtt(t,e){try{const{data:n,error:r}=await Ze.from("Journal Entries").select("*, emotions, sentiment, master_themes").eq("user_id",t).order("created_at",{ascending:!1}).limit(20);if(r)return console.error("Error fetching mental health entries:",r),null;if(!n||n.length===0)return{hasEntries:!1,message:"No journal entries found. Please create some entries to get personalized mental health insights."};const i=new Map;let o=0,a=0;n.forEach(p=>{if(p.sentiment){const y=parseFloat(p.sentiment);isNaN(y)||(o+=y,a++)}if(p.emotions)try{const y=typeof p.emotions=="string"?JSON.parse(p.emotions):p.emotions;y&&(Array.isArray(y.emotions)?y.emotions.forEach(g=>{if(g&&g.name&&g.intensity){const v=g.name.toLowerCase();i.has(v)||i.set(v,{count:0,totalScore:0});const b=i.get(v);b.count++,b.totalScore+=g.intensity,i.set(v,b)}}):Object.entries(y).forEach(([g,v])=>{if(typeof v=="number"){const b=g.toLowerCase();i.has(b)||i.set(b,{count:0,totalScore:0});const w=i.get(b);w.count++,w.totalScore+=v,i.set(b,w)}}))}catch(y){console.error("Error processing emotions:",y)}});const s=a>0?o/a:0,l=[...i.entries()].map(([p,y])=>({name:p,score:y.count>0?y.totalScore/y.count:0,count:y.count})).sort((p,y)=>y.score-p.score).slice(0,5),c=new Set,u=new Map;n.forEach(p=>{p.master_themes&&Array.isArray(p.master_themes)&&p.master_themes.forEach(y=>{c.add(y);const g=u.get(y)||0;u.set(y,g+1)})});const f=[...c].sort((p,y)=>(u.get(y)||0)-(u.get(p)||0)),h=n.slice(0,3).map(p=>({content:p["refined text"]||p["transcription text"],created_at:p.created_at,sentiment:p.sentiment,themes:p.master_themes}));return{hasEntries:!0,entryCount:n.length,averageSentiment:s,dominantEmotions:l,themes:f,timeRange:(e==null?void 0:e.periodName)||"recent",entrySamples:h,recentEntryCount:n.length}}catch(n){return console.error("Error analyzing mental health entries:",n),null}}function qz(){return B2e()}function Ftt(){const{formattedRange:t}=wte();return t}function ade(){return new Date().getTimezoneOffset()}function sde(){return Intl.DateTimeFormat().resolvedOptions().timeZone||"UTC"}async function ztt(t,e){if(!t)return console.error("No user ID provided for time pattern analysis"),{hasEntries:!1,error:"Missing user ID"};try{qz();const n=sde()||"UTC";console.log(`Time pattern analysis using timezone: ${n}`);let r=Ze.from("Journal Entries").select("id, created_at, sentiment, emotions").eq("user_id",t).order("created_at",{ascending:!1});e!=null&&e.startDate&&(e!=null&&e.endDate),console.log("Fetching all journal entries for time pattern analysis");const{data:i,error:o}=await r;if(o)return console.error("Error fetching journal entries for time analysis:",o),{hasEntries:!1,error:"Failed to fetch journal entries"};if(!i||i.length===0)return{hasEntries:!1,entryCount:0,timeRange:(e==null?void 0:e.periodName)||"all time"};if(console.log(`Found and analyzing all ${i.length} entries for time pattern analysis`),i.length>0){const u=new Date(i[i.length-1].created_at),f=new Date(i[0].created_at);console.log(`Entry date range: ${RT(u,"yyyy-MM-dd")} to ${RT(f,"yyyy-MM-dd")}`)}const a=Utt(i),s=Btt(a),l=$tt(i),c=Htt(i);return{hasEntries:!0,entryCount:i.length,timeRange:(e==null?void 0:e.periodName)||"all time",mostActiveDay:s,timeDistribution:l,frequencyPatterns:c,firstEntryDate:i[i.length-1].created_at,lastEntryDate:i[0].created_at}}catch(n){return console.error("Error in time pattern analysis:",n),{hasEntries:!1,error:"Error analyzing time patterns"}}}function Utt(t){const e={};return t.forEach(n=>{const r=new Date(n.created_at).toISOString().split("T")[0];e[r]||(e[r]=[]),e[r].push(n)}),e}function Btt(t){let e=0,n=null;for(const[r,i]of Object.entries(t))i.length>e&&(e=i.length,n=r);return{date:n,entryCount:e}}function $tt(t){ade();const e={morning:0,afternoon:0,evening:0,night:0};return t.forEach(n=>{const i=new Date(n.created_at).getHours();i>=5&&i<12?e.morning+=1:i>=12&&i<17?e.afternoon+=1:i>=17&&i<21?e.evening+=1:e.night+=1}),e}function Htt(t){const e=[...t].sort((l,c)=>new Date(l.created_at).getTime()-new Date(c.created_at).getTime());if(e.length<=1)return{averageDaysBetweenEntries:null,consistency:"not enough data",longestStreak:0,currentStreak:0};const n=[];let r=1,i=1,o=[new Date(e[0].created_at).toISOString().split("T")[0]];for(let l=1;l<e.length;l++){const c=new Date(e[l].created_at),u=new Date(e[l-1].created_at),f=c.getTime()-u.getTime(),h=Math.floor(f/(1e3*3600*24));n.push(h);const p=c.toISOString().split("T")[0];o.includes(p)||(o.push(p),h<=1?(i++,i>r&&(r=i)):i=1)}const a=n.length>0?n.reduce((l,c)=>l+c,0)/n.length:null;let s="irregular";return a!==null&&(a<=1.5?s="daily":a<=3?s="every few days":a<=7?s="weekly":a<=14?s="bi-weekly":a<=31&&(s="monthly")),{averageDaysBetweenEntries:a,consistency:s,longestStreak:r,currentStreak:i}}async function Vtt(t,e){try{qz();const n=sde()||"UTC";console.log(`Time-emotion pattern analysis using timezone: ${n}`);let r=Ze.from("Journal Entries").select("id, created_at, sentiment, emotions").eq("user_id",t).order("created_at",{ascending:!0});e!=null&&e.startDate&&(e!=null&&e.endDate);const{data:i,error:o}=await r;if(o||!i||i.length===0)return console.error("Error or no entries found for time-emotion analysis:",o),null;if(console.log(`Found ${i.length} entries for time-emotion pattern analysis`),i.length>0){const f=new Date(i[0].created_at),h=new Date(i[i.length-1].created_at);console.log(`Entry date range: ${RT(f,"yyyy-MM-dd")} to ${RT(h,"yyyy-MM-dd")}`)}const a={morning:[],afternoon:[],evening:[],night:[]},s={0:[],1:[],2:[],3:[],4:[],5:[],6:[]},l=ade();i.forEach(f=>{const h=new Date(f.created_at),p=h.getHours(),y=h.getDay(),g=f.sentiment,v=f.emotions;p>=5&&p<12?a.morning.push(g):p>=12&&p<17?a.afternoon.push(g):p>=17&&p<21?a.evening.push(g):a.night.push(g),v&&Array.isArray(v)&&(s[y]=[...s[y],...v])});const c={};for(const[f,h]of Object.entries(a)){if(h.length===0)continue;const p=h.filter(g=>typeof g=="string").map(g=>g==="POSITIVE"?1:g==="NEGATIVE"?-1:0),y=p.length>0?p.reduce((g,v)=>g+v,0)/p.length:null;c[f]=y}const u={};for(const[f,h]of Object.entries(s)){if(h.length===0)continue;const p={};h.forEach(g=>{p[g]||(p[g]=0),p[g]++});const y=Object.entries(p).sort(([,g],[,v])=>v-g).slice(0,3).map(([g])=>g);u[f]=y}return{avgSentimentByTimeOfDay:c,topEmotionsByDayOfWeek:u}}catch(n){return console.error("Error in time-emotion pattern analysis:",n),null}}function Wtt(t,e){const[n,r]=_.useState({loading:!0,hasEntries:!1}),i=_.useCallback(async()=>{if(!t){r({loading:!1,hasEntries:!1,error:"No user ID provided"});return}try{r(l=>({...l,loading:!0}));const o=await Dtt(t,e),a=await ztt(t,e),s=await Vtt(t,e);if(!o){r({loading:!1,hasEntries:!1,error:"Error analyzing mental health data"});return}r({loading:!1,hasEntries:o.hasEntries,entryCount:o.entryCount,averageSentiment:o.averageSentiment,dominantEmotions:o.dominantEmotions,themes:o.themes,timeRange:o.timeRange,timePatterns:a||null,timeEmotionPatterns:s||null})}catch(o){console.error("Error fetching mental health insights:",o),r({loading:!1,hasEntries:!1,error:"Error fetching mental health insights"})}},[t,e]);return _.useEffect(()=>{i()},[i]),{insights:n,refreshInsights:i}}const Gtt=({children:t})=>{ui();const n=new URLSearchParams(window.location.search).get("mobileDemo")==="true";return _.useEffect(()=>{if(n){const r=document.querySelector('meta[name="viewport"]');if(r&&r.setAttribute("content","width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover"),!document.querySelector('meta[name="apple-mobile-web-app-capable"]')){const i=document.createElement("meta");i.name="apple-mobile-web-app-capable",i.content="yes",document.head.appendChild(i)}return()=>{r&&r.setAttribute("content","width=device-width, initial-scale=1.0");const i=document.querySelector('meta[name="apple-mobile-web-app-capable"]');i&&i.remove()}}},[n]),n?d.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-800 p-4 overflow-auto",children:d.jsxs("div",{className:"relative w-[375px] h-[812px] bg-white rounded-[40px] shadow-2xl overflow-hidden border-8 border-black",children:[d.jsx("div",{className:"absolute top-0 left-0 right-0 h-6 bg-black z-10",children:d.jsx("div",{className:"absolute top-1 left-1/2 transform -translate-x-1/2 w-16 h-4 bg-black rounded-b-lg"})}),d.jsx("div",{className:"absolute top-6 left-0 right-0 bottom-6 overflow-auto bg-background -webkit-overflow-scrolling-touch",children:t}),d.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-6 bg-black z-10",children:d.jsx("div",{className:"absolute bottom-1.5 left-1/2 transform -translate-x-1/2 w-24 h-1 bg-gray-400 rounded-full"})})]})}):d.jsx(d.Fragment,{children:t})},xy="lastActiveChatThreadId";function qtt(){const t=ui(),{user:e}=or();eF(e==null?void 0:e.id,0,!0),Za();const[n,r]=_.useState(null),[i,o]=_.useState(!1),[a,s]=_.useState(!1),l=_.useRef(null),{toast:c}=oh(),u=_.useRef(null),f=_.useRef(new Set),h=_.useRef(!1),p=_.useRef(!1),g=new URLSearchParams(window.location.search).get("mobileDemo")==="true",v=t||g,{insights:b}=Wtt(e==null?void 0:e.id),{isProcessing:w,processingStatus:T}=Vz(n),C=w||T==="processing";_.useEffect(()=>{document.title="Roha | SOULo";const O=document.querySelector('meta[name="viewport"]');O&&O.setAttribute("content","width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no");const B=async()=>{if(!(!(e!=null&&e.id)||p.current||h.current)){p.current=!0;try{const J=localStorage.getItem(xy);if(J)try{const{data:K,error:Z}=await Ze.from("chat_threads").select("id").eq("id",J).eq("user_id",e.id).single();if(K&&!Z){console.log("Found stored thread ID:",J),r(J),u.current=J,window.dispatchEvent(new CustomEvent("threadSelected",{detail:{threadId:J}})),h.current=!0;return}else console.log("Stored thread ID not found or not valid:",J,Z),localStorage.removeItem(xy)}catch(K){console.error("Error checking thread existence:",K)}try{console.log("Looking for most recent thread");const{data:K,error:Z}=await Ze.from("chat_threads").select("*").eq("user_id",e.id).order("updated_at",{ascending:!1}).limit(1);if(Z)throw Z;K&&K.length>0?(console.log("Found most recent thread:",K[0].id),r(K[0].id),u.current=K[0].id,localStorage.setItem(xy,K[0].id),window.dispatchEvent(new CustomEvent("threadSelected",{detail:{threadId:K[0].id}})),h.current=!0):(console.log("No existing threads, creating new one"),await P(),h.current=!0)}catch(K){console.error("Error checking threads:",K)}}finally{p.current=!1}}},$=()=>{o(!1)},F=async J=>{var K,Z;(K=J.detail)!=null&&K.threadId&&((Z=J.detail)!=null&&Z.isFirstMessage)&&setTimeout(async()=>{const H=await mK(J.detail.threadId,e==null?void 0:e.id);H&&(f.current.add(J.detail.threadId),window.dispatchEvent(new CustomEvent("threadTitleUpdated",{detail:{threadId:J.detail.threadId,title:H}})))},1e3)};return window.addEventListener("closeChatSidebar",$),window.addEventListener("messageCreated",F),e!=null&&e.id&&!h.current&&!p.current&&B(),()=>{window.removeEventListener("closeChatSidebar",$),window.removeEventListener("messageCreated",F)}},[t,g,e]),_.useEffect(()=>{(async()=>{if(u.current&&u.current!==n&&(e!=null&&e.id)){if(!f.current.has(u.current)){const{data:B,error:$}=await Ze.from("chat_messages").select("count").eq("thread_id",u.current);if(!$&&B&&B.length>0){console.log("Generating title for thread being left:",u.current);const F=await mK(u.current,e==null?void 0:e.id);F&&(f.current.add(u.current),window.dispatchEvent(new CustomEvent("threadTitleUpdated",{detail:{threadId:u.current,title:F}})))}}u.current=n}})()},[n,e==null?void 0:e.id]);const P=async()=>{if(!(e!=null&&e.id))return null;try{console.log("Creating new thread");const O=n3(),{error:B}=await Ze.from("chat_threads").insert({id:O,user_id:e.id,title:"New Conversation",created_at:new Date().toISOString(),updated_at:new Date().toISOString()});if(B)throw B;return console.log("Created new thread:",O),r(O),u.current=O,localStorage.setItem(xy,O),window.dispatchEvent(new CustomEvent("threadSelected",{detail:{threadId:O}})),O}catch(O){return console.error("Error creating thread:",O),c({title:"Error",description:"Failed to create new conversation",variant:"destructive"}),null}},M=O=>{console.log("Thread selected:",O),r(O),localStorage.setItem(xy,O),window.dispatchEvent(new CustomEvent("threadSelected",{detail:{threadId:O}}))},k=async()=>{if(!n||!(e!=null&&e.id)){c({title:"Error",description:"No active conversation to delete",variant:"destructive"});return}if(w||T==="processing"){c({title:"Cannot delete conversation",description:"Please wait for the current request to complete before deleting this conversation.",variant:"destructive"}),s(!1);return}try{const{error:O}=await Ze.from("chat_messages").delete().eq("thread_id",n);if(O)throw console.error("Error deleting messages:",O),O;const{error:B}=await Ze.from("chat_threads").delete().eq("id",n);if(B)throw console.error("Error deleting thread:",B),B;const{data:$,error:F}=await Ze.from("chat_threads").select("*").eq("user_id",e.id).order("updated_at",{ascending:!1}).limit(1);if(F)throw F;$&&$.length>0?(r($[0].id),u.current=$[0].id,localStorage.setItem(xy,$[0].id),window.dispatchEvent(new CustomEvent("threadSelected",{detail:{threadId:$[0].id}}))):await P(),c({title:"Success",description:"Conversation deleted successfully"}),s(!1)}catch(O){console.error("Error deleting thread:",O),c({title:"Error",description:"Failed to delete conversation",variant:"destructive"})}},I=d.jsxs(OT,{feature:"chat",children:[d.jsxs(Ke.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"smart-chat-container w-full h-[calc(100vh)] flex",ref:l,children:[d.jsx("div",{className:"w-72 h-full border-r",children:d.jsx(ode,{activeThreadId:n,onSelectThread:M,onCreateThread:P})}),d.jsxs("div",{className:"flex-1 p-4 relative",children:[n&&d.jsx("div",{className:"absolute top-4 right-4 z-10",children:d.jsx(Xue,{children:d.jsxs(Kue,{children:[d.jsx(Jue,{asChild:!0,children:d.jsx(ct,{variant:"ghost",size:"icon",className:`${C?"text-muted-foreground/50 cursor-not-allowed":"text-muted-foreground hover:text-destructive hover:bg-destructive/10 dark:hover:bg-destructive/20"}`,onClick:()=>!C&&s(!0),disabled:C,"aria-label":"Delete conversation",children:d.jsx(pT,{className:"h-5 w-5"})})}),d.jsx(Gz,{children:C?d.jsx(Q,{text:"Cannot delete while processing"}):d.jsx(Q,{text:"Delete conversation"})})]})})}),d.jsx(Zue,{mentalHealthInsights:b})]})]}),d.jsx(S0,{open:a,onOpenChange:s,children:d.jsxs(bm,{children:[d.jsxs(Sm,{children:[d.jsx(_m,{children:d.jsx(Q,{text:"Delete this conversation?"})}),d.jsx(Tm,{children:C?d.jsx(Q,{text:"Cannot delete conversation while the chatbot is processing a request. Please wait for the current request to complete."}):d.jsx(Q,{text:"This will permanently delete this conversation and all its messages. This action cannot be undone."})})]}),d.jsxs(Em,{children:[d.jsx(Am,{children:d.jsx(Q,{text:"Cancel"})}),d.jsx(Cm,{onClick:k,disabled:C,className:`${C?"bg-muted text-muted-foreground cursor-not-allowed":"bg-destructive hover:bg-destructive/90 text-destructive-foreground"}`,children:d.jsx(Q,{text:"Delete"})})]})]})})]}),U=d.jsx(OT,{feature:"chat",children:d.jsx("div",{className:"flex flex-col h-full",ref:l,children:d.jsx(Ke.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"smart-chat-container flex-1 flex flex-col",children:d.jsx("div",{className:"flex-1 flex flex-col",children:d.jsx(Ltt,{currentThreadId:n,onSelectThread:M,onCreateNewThread:P,userId:e==null?void 0:e.id,mentalHealthInsights:b})})})})}),z=v?U:I;return d.jsx(iPe,{children:g?d.jsx(Gtt,{children:z}):z})}const Ytt=["anxiety","anxious","depression","depressed","stress","stressed","mood","emotion","feeling","mental health","wellbeing","well-being","therapy","therapist","counseling","psychiatrist","psychologist","sleep","insomnia","tired","exhaustion","burnout","overwhelm","overthinking","ruminating","worry","worrying","trauma","self-care","self care","mindfulness","meditation","breathing","coping","cope","healing","recovery","growth","improve","relationship","friendship","family","partner","work-life","balance","boundaries","communication"];function Xtt(t){const e=[/\b(today|yesterday|this week|last week|this month|last month|this year|last year)\b/i,/\b(past|previous|recent) (\d+) (days?|weeks?|months?|years?)\b/i],n=[],r=[],i=[],o={},a={},s={};t.forEach((c,u)=>{const f=c.content.toLowerCase();(c.role==="user"||c.sender==="user")&&(e.forEach(p=>{const y=f.match(p);if(y){const g=y[0];r.includes(g)||(r.push(g),a[g]=u)}}),Ytt.forEach(p=>{f.includes(p.toLowerCase())&&(i.includes(p)||(i.push(p),s[p]=u))})),[/\b(?:about|regarding|my|on) ([a-z\s]{3,25})\b/i,/\b([A-Z][a-z]{2,25})\b/,/\b(?:how|what|why|when).{1,10}(anxiety|depression|stress|sleep|relationship|job|work|family|friend)/i].forEach(p=>{const y=f.match(p);if(y&&y[1]){const g=y[1].trim();g.length>2&&!n.includes(g)&&(n.push(g),o[g]=u)}})}),t.filter(c=>c.role==="assistant"||c.sender==="assistant").forEach((c,u)=>{const f=c.content;[/based on your (journals?|entries?) about ([a-z\s]{3,25})/i,/regarding your ([a-z\s]{3,25})/i,/your ([a-z\s]{3,25}) (seems|appears|is|shows|indicates)/i].forEach(p=>{const y=f.match(p);if(y&&y.length>1){const g=y.length-1,v=y[g].trim();v.length>2&&!n.includes(v)&&(n.push(v),o[v]=u)}})});const l=(c,u,f)=>(f[u]||0)-(f[c]||0);return{topics:n.sort((c,u)=>l(c,u,o)),timeReferences:r.sort((c,u)=>l(c,u,a)),mentalHealthTopics:i.sort((c,u)=>l(c,u,s))}}const Ktt=()=>{const{user:t}=or(),e=Za(),{toast:n}=oh(),{translate:r,currentLanguage:i}=In(),[o,a]=_.useState(!1);return _.useEffect(()=>{console.log("Chat component mounted, debugging timezone info:"),qz();const s=new Date;console.log("Current date details:"),console.log(`Date object: ${s}`),console.log(`ISO string: ${s.toISOString()}`),console.log(`Local string: ${s.toString()}`),console.log(`Formatted: ${ir(s,"yyyy-MM-dd HH:mm:ss")}`),console.log(`Date: ${s.getDate()}, Month: ${s.getMonth()+1}, Year: ${s.getFullYear()}`),console.log(`Day of week: ${s.getDay()} (0=Sunday, 1=Monday, ..., 6=Saturday)`),console.log("Current week dates calculation:");const l=Ftt();console.log(`Current week dates: ${l}`);try{const c=Intl.DateTimeFormat().resolvedOptions().timeZone;console.log(`Browser timezone: ${c}`);const u=vte(s,c);console.log(`Date in ${c}: ${ir(u,"yyyy-MM-dd HH:mm:ss")}`)}catch(c){console.error("Error getting timezone:",c)}},[]),_.useEffect(()=>{(async()=>{if(r&&i!=="en")try{console.log("Pre-translating chat strings for language:",i),await r("New Chat","en"),await r("Ruh","en"),await r("Your message...","en"),await r("Send","en"),await r("Chat","en"),await r("Loading...","en"),await r("Analysis:","en"),await r("SQL Query:","en"),await r("journal entries","en"),await r("Unknown date","en"),await r("more entries","en"),await r("Error loading messages","en"),await r("Could not load conversation history.","en"),await r("Authentication required","en"),await r("Please sign in to use the chat feature.","en"),await r("Analyzing your question...","en"),await r("Analyzing patterns in your journal...","en"),await r("Planning search strategy...","en"),await r("Searching for insights...","en"),await r("Processing your request...","en"),await r("Retrieving information...","en"),await r("today","en"),await r("yesterday","en"),await r("this week","en"),await r("last week","en"),await r("this month","en"),await r("last month","en"),await r("previous month","en"),await r("I need more information","en"),await r("Could you clarify","en"),await r("Can you be more specific","en"),await r("Which time period","en"),await r("What aspect specifically","en"),console.log("Chat strings pre-translated successfully")}catch(l){console.error("Error pre-translating chat strings:",l)}a(!0)})()},[r,i]),_.useEffect(()=>{t||e("/auth")},[t,e]),_.useEffect(()=>{t&&(async()=>{try{const{error:l}=await Ze.from("chat_threads").select("id").limit(1);l&&(console.error("Database connection error:",l),n({title:"Connection Error",description:"Having trouble connecting to the server. Some data might not load properly.",variant:"destructive"}))}catch(l){console.error("Supabase connection error:",l)}})()},[t,n]),_.useEffect(()=>{const s=async()=>{if(t!=null&&t.id)try{console.log("Initializing chat system...");const{data:l,error:c}=await Ze.from("chat_threads").select("id").eq("user_id",t.id).eq("processing_status","processing");if(c){console.error("Error checking for stale sessions:",c);return}if(l&&l.length>0){console.log(`Found ${l.length} stale processing sessions, cleaning up...`);for(const f of l)await Ze.from("chat_threads").update({processing_status:"idle"}).eq("id",f.id),await Ze.from("chat_messages").delete().eq("thread_id",f.id).eq("is_processing",!0)}const{data:u}=await Ze.from("chat_threads").select("id").eq("user_id",t.id).is("metadata",null).limit(10);if(u&&u.length>0){console.log(`Initializing metadata for ${u.length} threads`);for(const f of u){const{data:h}=await Ze.from("chat_messages").select("content, sender, created_at, id, thread_id").eq("thread_id",f.id).order("created_at",{ascending:!0});let p=null,y=null;if(h&&h.length>0){const g=h.map(b=>({id:b.id,thread_id:b.thread_id,content:b.content,sender:b.sender,role:b.sender,created_at:b.created_at})),v=Xtt(g);v.topics.length>0&&(p=v.topics[0]),v.timeReferences.length>0&&(y=v.timeReferences[0])}await Ze.from("chat_threads").update({metadata:{timeContext:y,topicContext:p,intentType:"new_query",confidenceScore:1,needsClarity:!1,ambiguities:[],lastQueryType:"journal_specific",lastUpdated:new Date().toISOString()}}).eq("id",f.id)}}console.log("Chat system initialization complete")}catch(l){console.error("Error initializing chat system:",l)}};t!=null&&t.id&&o&&s()},[t==null?void 0:t.id,o]),_.useEffect(()=>{const s=document.createElement("style");return s.innerHTML=`
      .chat-sidebar-close-duplicate {
        display: none !important;
      }
      
      /* Ensure chat input is always visible */
      .mobile-chat-input-container {
        padding-bottom: calc(env(safe-area-inset-bottom, 16px) + 5px);
        z-index: 9999;
        bottom: 3.6rem !important; /* Adjusted to match the new navbar height */
      }
      
      /* Add extra padding to chat area to prevent content from being hidden */
      .chat-messages-container {
        padding-bottom: 100px;
      }
      
      /* Ensure keyboard doesn't obscure input */
      .input-keyboard-active {
        position: sticky !important; 
        bottom: 0 !important;
        z-index: 9999 !important;
      }
      
      /* Make sidebar header compact */
      .sheet-header {
        padding: 12px !important;
        margin-bottom: 0 !important;
      }
      
      /* Reduce space after sidebar header */
      .sheet-content .mt-5 {
        margin-top: 0.5rem !important;
      }
      
      /* Ensure chat suggestions are visible during tutorial */
      body.tutorial-active .empty-chat-suggestion,
      body.tutorial-active .chat-suggestion-button {
        opacity: 1 !important;
        visibility: visible !important;
        display: block !important;
        pointer-events: auto !important;
      }
      
      /* Add extra styling to first suggestion button for tutorial */
      .chat-suggestion-button:first-child,
      .empty-chat-suggestion:first-child {
        position: relative;
      }
      
      /* Add styling for clarification questions */
      .assistant-clarification {
        border-left: 3px solid var(--primary) !important;
        background-color: rgba(var(--primary-rgb), 0.05) !important;
        font-style: italic;
      }
      
      /* Add special styling for follow-up context */
      .context-preserved {
        position: relative;
      }
      
      .context-preserved::before {
        content: '';
        position: absolute;
        top: -5px;
        left: 0;
        right: 0;
        height: 2px;
        background: linear-gradient(90deg, transparent, rgba(var(--primary-rgb), 0.3), transparent);
      }
    `,document.head.appendChild(s),()=>{document.head.removeChild(s)}},[]),d.jsx(OT,{feature:"chat",children:d.jsx("div",{className:"w-full h-full flex flex-col",children:d.jsx(Zue,{})})})},Jtt=()=>{const[t,e]=_.useState(!0),[n,r]=_.useState(null),i=Wi();return _.useEffect(()=>{(async()=>{var s;try{const{data:l}=await Ze.auth.getSession();r(((s=l.session)==null?void 0:s.user)||null),e(!1)}catch(l){console.error("Error checking authentication in ProtectedRoute:",l),e(!1)}})();const{data:{subscription:a}}=Ze.auth.onAuthStateChange((s,l)=>{r((l==null?void 0:l.user)||null),e(!1)});return()=>a.unsubscribe()},[]),_.useEffect(()=>{!t&&!n&&console.log("Protected route: No user, should redirect to onboarding",{path:i.pathname})},[n,t,i]),t?d.jsx("div",{className:"min-h-screen flex items-center justify-center",children:d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):n?d.jsx(DK,{}):(console.log("Redirecting to onboarding from protected route:",i.pathname),d.jsx(ws,{to:"/app/onboarding",replace:!0}))},Ztt=({isLoading:t,onLoadingChange:e,onError:n})=>{const{isIOS:r,isAndroid:i}=ui(),o=async()=>{try{e(!0),n(""),console.log("Initiating Google sign-in"),await iJ()}catch(s){console.error("Google sign-in error:",s.message),n(s.message),e(!1)}},a=async()=>{try{e(!0),n(""),console.log("Initiating Apple ID sign-in"),await oJ()}catch(s){console.error("Apple ID sign-in error:",s.message),n(s.message),e(!1)}};return r?d.jsxs(ct,{size:"lg",className:"w-full flex items-center justify-center gap-2 bg-black text-white hover:bg-gray-800",onClick:a,disabled:t,children:[t?d.jsx("span",{className:"animate-spin h-5 w-5 border-t-2 border-white rounded-full mr-2"}):d.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",xmlns:"http://www.w3.org/2000/svg",children:d.jsx("path",{fill:"currentColor",d:"M12.017 14.999c-1.45-.074-2.693-1.057-3.115-2.441-.422-1.384.07-2.888 1.221-3.73.65-.475 1.44-.742 2.259-.762 1.45.074 2.693 1.057 3.115 2.441.422 1.384-.07 2.888-1.221 3.73-.65.475-1.44.742-2.259.762zm7.5-1.999c0 5.523-4.477 10-10 10s-10-4.477-10-10 4.477-10 10-10 10 4.477 10 10z"})}),d.jsx(Q,{text:"Sign in with Apple",forceTranslate:!0})]}):i?d.jsxs(ct,{size:"lg",className:"w-full flex items-center justify-center gap-2",onClick:o,disabled:t,children:[t?d.jsx("span",{className:"animate-spin h-5 w-5 border-t-2 border-white rounded-full mr-2"}):d.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",xmlns:"http://www.w3.org/2000/svg",children:d.jsxs("g",{transform:"matrix(1, 0, 0, 1, 27.009001, -39.238998)",children:[d.jsx("path",{fill:"#4285F4",d:"M -3.264 51.509 C -3.264 50.719 -3.334 49.969 -3.454 49.239 L -14.754 49.239 L -14.754 53.749 L -8.284 53.749 C -8.574 55.229 -9.424 56.479 -10.684 57.329 L -10.684 60.329 L -6.824 60.329 C -4.564 58.239 -3.264 55.159 -3.264 51.509 Z"}),d.jsx("path",{fill:"#34A853",d:"M -14.754 63.239 C -11.514 63.239 -8.804 62.159 -6.824 60.329 L -10.684 57.329 C -11.764 58.049 -13.134 58.489 -14.754 58.489 C -17.884 58.489 -20.534 56.379 -21.484 53.529 L -25.464 53.529 L -25.464 56.619 C -23.494 60.539 -19.444 63.239 -14.754 63.239 Z"}),d.jsx("path",{fill:"#FBBC05",d:"M -21.484 53.529 C -21.734 52.809 -21.864 52.039 -21.864 51.239 C -21.864 50.439 -21.724 49.669 -21.484 48.949 L -21.484 45.859 L -25.464 45.859 C -26.284 47.479 -26.754 49.299 -26.754 51.239 C -26.754 53.179 -26.284 54.999 -25.464 56.619 L -21.484 53.529 Z"}),d.jsx("path",{fill:"#EA4335",d:"M -14.754 43.989 C -12.984 43.989 -11.404 44.599 -10.154 45.789 L -6.734 42.369 C -8.804 40.429 -11.514 39.239 -14.754 39.239 C -19.444 39.239 -23.494 41.939 -25.464 45.859 L -21.484 48.949 C -20.534 46.099 -17.884 43.989 -14.754 43.989 Z"})]})}),d.jsx(Q,{text:"Sign in with Google",forceTranslate:!0})]}):d.jsxs(ct,{size:"lg",className:"w-full flex items-center justify-center gap-2",onClick:o,disabled:t,children:[t?d.jsx("span",{className:"animate-spin h-5 w-5 border-t-2 border-white rounded-full mr-2"}):d.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",xmlns:"http://www.w3.org/2000/svg",children:d.jsxs("g",{transform:"matrix(1, 0, 0, 1, 27.009001, -39.238998)",children:[d.jsx("path",{fill:"#4285F4",d:"M -3.264 51.509 C -3.264 50.719 -3.334 49.969 -3.454 49.239 L -14.754 49.239 L -14.754 53.749 L -8.284 53.749 C -8.574 55.229 -9.424 56.479 -10.684 57.329 L -10.684 60.329 L -6.824 60.329 C -4.564 58.239 -3.264 55.159 -3.264 51.509 Z"}),d.jsx("path",{fill:"#34A853",d:"M -14.754 63.239 C -11.514 63.239 -8.804 62.159 -6.824 60.329 L -10.684 57.329 C -11.764 58.049 -13.134 58.489 -14.754 58.489 C -17.884 58.489 -20.534 56.379 -21.484 53.529 L -25.464 53.529 L -25.464 56.619 C -23.494 60.539 -19.444 63.239 -14.754 63.239 Z"}),d.jsx("path",{fill:"#FBBC05",d:"M -21.484 53.529 C -21.734 52.809 -21.864 52.039 -21.864 51.239 C -21.864 50.439 -21.724 49.669 -21.484 48.949 L -21.484 45.859 L -25.464 45.859 C -26.284 47.479 -26.754 49.299 -26.754 51.239 C -26.754 53.179 -26.284 54.999 -25.464 56.619 L -21.484 53.529 Z"}),d.jsx("path",{fill:"#EA4335",d:"M -14.754 43.989 C -12.984 43.989 -11.404 44.599 -10.154 45.789 L -6.734 42.369 C -8.804 40.429 -11.514 39.239 -14.754 39.239 C -19.444 39.239 -23.494 41.939 -25.464 45.859 L -21.484 48.949 C -20.534 46.099 -17.884 43.989 -14.754 43.989 Z"})]})}),d.jsx(Q,{text:"Sign in with Google",forceTranslate:!0})]})};function Qtt(){var b,w;const t=Wi(),e=Za(),[n]=mme(),[r,i]=_.useState(!1),[o,a]=_.useState(!1),{user:s,isLoading:l}=or(),{onboardingComplete:c}=KC(),[u,f]=_.useState(null),h=n.get("redirectTo"),p=(w=(b=t.state)==null?void 0:b.from)==null?void 0:w.pathname,y=typeof window<"u"?localStorage.getItem("authRedirectTo"):null;_.useEffect(()=>{const T=n.get("error"),C=n.get("error_description");if(T){console.error("[Auth] OAuth error from URL:",{error:T,errorDescription:C});const P=new URL(window.location.href);P.searchParams.delete("error"),P.searchParams.delete("error_description"),window.history.replaceState({},"",P.toString());let M="Sign-in failed";C!=null&&C.includes("redirect_uri_mismatch")?M="Google sign-in configuration error. Please try again or contact support.":C?M=`Sign-in failed: ${C}`:T==="access_denied"&&(M="Sign-in was cancelled"),f(M),It.error(M)}},[n]);const v=(T=>!T||T==="/home"||T==="/onboarding"?"/app/home":T)(h||p||y);return console.log("Auth page mounted",{redirectTo:v,redirectParam:h,fromLocation:p,storedRedirect:y,hasUser:!!s,currentPath:t.pathname,onboardingComplete:c}),_.useEffect(()=>{a(!1)},[]),_.useEffect(()=>{if(s&&!l&&!r){console.log("User is logged in, redirecting to:",v),i(!0),localStorage.removeItem("authRedirectTo");const T=setTimeout(()=>{e("/app/home",{replace:!0})},500);return()=>clearTimeout(T)}},[s,l,e,r,v]),l?d.jsx("div",{className:"min-h-screen flex items-center justify-center",children:d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):s?(console.log("User already logged in, redirecting to home"),d.jsx(ws,{to:"/app/home",replace:!0})):d.jsx("div",{className:"min-h-screen bg-background flex flex-col items-center justify-center px-4 py-12",children:d.jsxs(Ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"max-w-md w-full glass-card p-8 rounded-xl relative z-10",children:[d.jsxs("div",{className:"text-center mb-8",children:[d.jsxs("h1",{className:"text-3xl font-bold mb-2",children:[d.jsx(Q,{text:"Welcome to",forceTranslate:!0})," ",d.jsx(Yc,{size:"large",className:"text-blue-600"})]}),d.jsx("p",{className:"text-muted-foreground",children:d.jsx(Q,{text:"Sign in to start your journaling journey and track your emotional wellbeing",forceTranslate:!0})})]}),u&&d.jsxs("div",{className:"mb-4 p-3 border border-red-200 bg-red-50 text-red-700 rounded-md",children:[d.jsx("p",{className:"text-sm",children:u}),d.jsx("button",{onClick:()=>f(null),className:"mt-2 text-xs text-red-600 hover:text-red-800 underline",children:"Dismiss"})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsx(Ztt,{isLoading:o,onLoadingChange:a,onError:T=>{console.error("[Auth] Platform auth error:",T),f(T)}}),d.jsx("div",{className:"text-center text-sm text-muted-foreground",children:d.jsx("p",{children:d.jsx(Q,{text:"By signing in, you agree to our Terms of Service and Privacy Policy",forceTranslate:!0})})})]})]})})}var Yz="Switch",[ent,Rot]=sa(Yz),[tnt,nnt]=ent(Yz),lde=_.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:i,defaultChecked:o,required:a,disabled:s,value:l="on",onCheckedChange:c,form:u,...f}=t,[h,p]=_.useState(null),y=Kt(e,T=>p(T)),g=_.useRef(!1),v=h?u||!!h.closest("form"):!0,[b=!1,w]=wo({prop:i,defaultProp:o,onChange:c});return d.jsxs(tnt,{scope:n,checked:b,disabled:s,children:[d.jsx(At.button,{type:"button",role:"switch","aria-checked":b,"aria-required":a,"data-state":dde(b),"data-disabled":s?"":void 0,disabled:s,value:l,...f,ref:y,onClick:ut(t.onClick,T=>{w(C=>!C),v&&(g.current=T.isPropagationStopped(),g.current||T.stopPropagation())})}),v&&d.jsx(rnt,{control:h,bubbles:!g.current,name:r,value:l,checked:b,required:a,disabled:s,form:u,style:{transform:"translateX(-100%)"}})]})});lde.displayName=Yz;var cde="SwitchThumb",ude=_.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,i=nnt(cde,n);return d.jsx(At.span,{"data-state":dde(i.checked),"data-disabled":i.disabled?"":void 0,...r,ref:e})});ude.displayName=cde;var rnt=t=>{const{control:e,checked:n,bubbles:r=!0,...i}=t,o=_.useRef(null),a=TA(n),s=lA(e);return _.useEffect(()=>{const l=o.current,c=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(c,"checked").set;if(a!==n&&f){const h=new Event("click",{bubbles:r});f.call(l,n),l.dispatchEvent(h)}},[a,n,r]),d.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...i,tabIndex:-1,ref:o,style:{...t.style,...s,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function dde(t){return t?"checked":"unchecked"}var fde=lde,int=ude;const hde=_.forwardRef(({className:t,...e},n)=>d.jsx(fde,{className:He("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...e,ref:n,children:d.jsx(int,{className:He("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));hde.displayName=fde.displayName;function ont({value:t,onChange:e,className:n,applyImmediately:r=!1}){const[i,o]=_.useState(0),[a,s]=_.useState(80),[l,c]=_.useState(60),[u,f]=_.useState(t||"#3b82f6"),h=_.useRef(null),p=_.useRef(null);_.useEffect(()=>{if(t){const U=C(t);if(U){const[z,O,B]=P(U.r,U.g,U.b);o(z),s(O),c(B)}}},[t]);const y=_.useMemo(()=>(U,z,O)=>{O/=100;const B=z*Math.min(O,1-O)/100,$=F=>{const J=(F+U/30)%12,K=O-B*Math.max(Math.min(J-3,9-J,1),-1);return Math.round(255*K).toString(16).padStart(2,"0")};return`#${$(0)}${$(8)}${$(4)}`},[]);_.useEffect(()=>{const U=y(i,a,l);requestAnimationFrame(()=>{f(U),r&&e(U)})},[i,a,l,r,e,y]);const g=U=>{o(U[0])},v=U=>{s(U[0])},b=U=>{c(U[0])},w=()=>{e(u)},T=U=>{if(p.current){const z=p.current.getBoundingClientRect(),O=U.clientX-z.left,B=z.width,$=Math.round(O/B*360);o($)}},C=U=>{const z=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(U);return z?{r:parseInt(z[1],16),g:parseInt(z[2],16),b:parseInt(z[3],16)}:null},P=(U,z,O)=>{U/=255,z/=255,O/=255;const B=Math.max(U,z,O),$=Math.min(U,z,O);let F=0,J=0;const K=(B+$)/2;if(B!==$){const Z=B-$;switch(J=K>.5?Z/(2-B-$):Z/(B+$),B){case U:F=(z-O)/Z+(z<O?6:0);break;case z:F=(O-U)/Z+2;break;case O:F=(U-z)/Z+4;break}F/=6}return[Math.round(F*360),Math.round(J*100),Math.round(K*100)]},M=_.useMemo(()=>{let U="linear-gradient(to right, ";for(let z=0;z<=360;z+=30)U+=`hsl(${z}, ${a}%, ${l}%) ${z/3.6}%, `;return U=U.slice(0,-2),U+=")",U},[a,l]),k=_.useMemo(()=>`linear-gradient(to right, hsl(${i}, 0%, ${l}%), hsl(${i}, 100%, ${l}%))`,[i,l]),I=_.useMemo(()=>`linear-gradient(to right, hsl(${i}, ${a}%, 0%), hsl(${i}, ${a}%, 50%), hsl(${i}, ${a}%, 100%))`,[i,a]);return d.jsxs("div",{className:He("flex flex-col space-y-4",n),children:[d.jsx("div",{className:"flex items-center justify-center mb-2",children:d.jsx("div",{ref:h,className:"h-16 w-16 rounded-full border-2 border-gray-200 shadow-md",style:{backgroundColor:u}})}),d.jsxs("div",{children:[d.jsx("label",{className:"text-sm font-medium text-foreground mb-2 block",children:"Hue"}),d.jsx("div",{className:"w-full h-8 rounded-lg overflow-hidden relative cursor-pointer mb-2",style:{background:M},onClick:T,ref:p,children:d.jsx("div",{className:"absolute top-0 bottom-0 w-1 bg-white border-2 border-gray-800 transform -translate-x-1/2",style:{left:`${i/3.6}%`,boxShadow:"0 0 0 2px rgba(255,255,255,0.5)"}})}),d.jsx(Fw,{value:[i],min:0,max:360,step:1,onValueChange:g,className:"w-full"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"text-sm font-medium text-foreground mb-2 block",children:"Saturation"}),d.jsx("div",{className:"w-full h-8 rounded-lg overflow-hidden relative mb-2",style:{background:k}}),d.jsx(Fw,{value:[a],min:0,max:100,step:1,onValueChange:v,className:"w-full"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"text-sm font-medium text-foreground mb-2 block",children:"Lightness"}),d.jsx("div",{className:"w-full h-8 rounded-lg overflow-hidden relative mb-2",style:{background:I}}),d.jsx(Fw,{value:[l],min:10,max:90,step:1,onValueChange:b,className:"w-full"})]}),!r&&d.jsxs("button",{onClick:w,className:"mt-4 px-4 py-2 bg-theme text-white rounded-md flex items-center justify-center gap-2 hover:bg-theme-dark transition-colors",children:[d.jsx(Sd,{className:"h-4 w-4"}),"Apply Color"]})]})}const ant=({isPremium:t,isTrialActive:e,subscriptionStatus:n,isLoading:r=!1,className:i="",size:o="default"})=>{const a=o==="sm"?"text-xs px-2 py-0.5":"text-xs px-2.5 py-0.5",s=o==="sm"?"w-3 h-3":"w-4 h-4";return r?d.jsx(ec,{variant:"secondary",className:He("ml-2 animate-pulse",a,i),children:d.jsx("div",{className:"w-12 h-3 bg-muted-foreground/20 rounded"})}):t&&e?d.jsxs(ec,{variant:"secondary",className:He("ml-2 bg-gradient-to-r from-blue-400 to-blue-600 text-white border-0 font-semibold",a,i),children:[d.jsx(Zu,{className:He("mr-1",s)}),d.jsx(Q,{text:"Trial",forceTranslate:!0})]}):t?d.jsxs(ec,{variant:"secondary",className:He("ml-2 bg-gradient-to-r from-yellow-400 to-orange-500 text-white border-0 font-semibold",a,i),children:[d.jsx(rc,{className:He("mr-1",s)}),d.jsx(Q,{text:"Premium",forceTranslate:!0})]}):d.jsxs(ec,{variant:"outline",className:He("ml-2 text-muted-foreground border-muted-foreground/30",a,i),children:[d.jsx(fv,{className:He("mr-1",s)}),d.jsx(Q,{text:"Free",forceTranslate:!0})]})},snt=mm("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),pde=_.forwardRef(({className:t,variant:e,...n},r)=>d.jsx("div",{ref:r,role:"alert",className:He(snt({variant:e}),t),...n}));pde.displayName="Alert";const lnt=_.forwardRef(({className:t,...e},n)=>d.jsx("h5",{ref:n,className:He("mb-1 font-medium leading-none tracking-tight",t),...e}));lnt.displayName="AlertTitle";const mde=_.forwardRef(({className:t,...e},n)=>d.jsx("div",{ref:n,className:He("text-sm [&_p]:leading-relaxed",t),...e}));mde.displayName="AlertDescription";const cnt=()=>{console.log("[SubscriptionManagement] Rendering component");const{isPremium:t,isTrialActive:e,trialEndDate:n,daysRemainingInTrial:r,subscriptionStatus:i,isLoading:o,error:a,refreshSubscriptionStatus:s,hasInitialLoadCompleted:l}=H1(),{pricing:c,isLoading:u}=Y4(),[f,h]=_.useState(!1),[p,y]=_.useState(!1);console.log("[SubscriptionManagement] Subscription state:",{isPremium:t,isTrialActive:e,subscriptionStatus:i,isLoading:o,error:a,hasInitialLoadCompleted:l,pricing:c});const g=async()=>{console.log("[SubscriptionManagement] Refreshing subscription status..."),y(!0);try{await s(),It.success(d.jsx(Q,{text:"Subscription status refreshed",forceTranslate:!0}))}catch(w){console.error("[SubscriptionManagement] Failed to refresh status:",w),It.error(d.jsx(Q,{text:"Failed to refresh status. Please check your connection.",forceTranslate:!0}))}finally{y(!1)}},v=()=>{console.log("[SubscriptionManagement] Opening subscription modal"),h(!0)},b=w=>w?new Intl.DateTimeFormat("en-US",{year:"numeric",month:"long",day:"numeric"}).format(w):"";return o?(console.log("[SubscriptionManagement] Showing loading state"),d.jsx(Jr,{className:"p-6",children:d.jsxs("div",{className:"animate-pulse",children:[d.jsx("div",{className:"h-6 bg-muted rounded w-1/3 mb-4"}),d.jsxs("div",{className:"space-y-3",children:[d.jsx("div",{className:"h-4 bg-muted rounded w-1/2"}),d.jsx("div",{className:"h-4 bg-muted rounded w-2/3"})]})]})})):d.jsxs(d.Fragment,{children:[d.jsx(Ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:d.jsxs(Jr,{className:"p-6",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsxs("h3",{className:"text-lg font-semibold text-theme-color flex items-center gap-2",children:[t?d.jsx(rc,{className:"h-5 w-5"}):d.jsx(QC,{className:"h-5 w-5"}),d.jsx(Q,{text:"Subscription"})]}),d.jsxs(ct,{variant:"outline",size:"sm",onClick:g,disabled:p,className:"flex items-center gap-1",children:[p?d.jsx(Qu,{className:"h-3 w-3 animate-spin"}):d.jsx(Qu,{className:"h-3 w-3"}),d.jsx(Q,{text:p?"Refreshing...":"Refresh"})]})]}),a&&d.jsxs(pde,{className:"mb-4 bg-yellow-50 border-yellow-300 dark:bg-yellow-900/20 dark:border-yellow-700",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(H0e,{className:"h-4 w-4 text-yellow-600 dark:text-yellow-400"}),d.jsx(mde,{className:"text-sm text-yellow-800 dark:text-yellow-300",children:d.jsx(Q,{text:"Subscription information may be limited due to connectivity issues."})})]}),d.jsx("div",{className:"mt-2 flex items-center",children:d.jsxs(ct,{variant:"outline",size:"sm",onClick:g,className:"text-xs border-yellow-400 dark:border-yellow-600 text-yellow-700 dark:text-yellow-400",children:[d.jsx(V0e,{className:"h-3 w-3 mr-1"}),d.jsx(Q,{text:"Try again"})]})})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"flex flex-col space-y-2",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("span",{className:"text-sm font-medium text-foreground",children:d.jsx(Q,{text:"Current Plan"})}),d.jsx("div",{className:"flex items-center gap-2",children:t&&e?d.jsxs("div",{className:"flex items-center gap-1 text-blue-600 font-medium",children:[d.jsx(Zu,{className:"h-4 w-4"}),d.jsx(Q,{text:"Premium Trial"})]}):t?d.jsxs("div",{className:"flex items-center gap-1 text-orange-600 font-medium",children:[d.jsx(rc,{className:"h-4 w-4"}),d.jsx(Q,{text:"Premium"})]}):d.jsx("span",{className:"text-muted-foreground",children:d.jsx(Q,{text:"Free Plan"})})})]}),e&&n&&d.jsxs("div",{className:"bg-blue-50 dark:bg-blue-950/20 rounded-lg p-3 border border-blue-200 dark:border-blue-800",children:[d.jsxs("div",{className:"flex items-center justify-between text-sm",children:[d.jsx("span",{className:"text-blue-700 dark:text-blue-300 font-medium",children:d.jsx(Q,{text:"Trial ends on"})}),d.jsx("span",{className:"text-blue-900 dark:text-blue-100 font-semibold",children:b(n)})]}),r>=0&&d.jsx("div",{className:"mt-1 text-xs text-blue-600 dark:text-blue-400",children:r===0?d.jsx(Q,{text:"Trial ends today"}):r===1?d.jsx(Q,{text:"1 day remaining"}):d.jsxs(d.Fragment,{children:[r," ",d.jsx(Q,{text:"days remaining"})]})})]}),!t&&!a&&d.jsxs("div",{className:"bg-muted/50 rounded-lg p-3 border",children:[d.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:d.jsx(Q,{text:"Upgrade to Premium for unlimited journaling, advanced insights, and more features."})}),!u&&d.jsxs("div",{className:"text-xs text-muted-foreground mb-2",children:[c.country," - ",c.price,"/month"]}),d.jsxs(ct,{onClick:v,className:"w-full bg-gradient-to-r from-yellow-400 to-orange-500 hover:from-yellow-500 hover:to-orange-600 text-white border-0",disabled:u,children:[d.jsx(rc,{className:"h-4 w-4 mr-2"}),d.jsx(Q,{text:"Upgrade to Premium"})]})]}),t&&!e&&!a&&d.jsx("div",{className:"bg-green-50 dark:bg-green-950/20 rounded-lg p-3 border border-green-200 dark:border-green-800",children:d.jsx("p",{className:"text-sm text-green-700 dark:text-green-300",children:d.jsx(Q,{text:"You have access to all Premium features. Thank you for your support!"})})})]}),d.jsx("div",{className:"pt-2 border-t",children:d.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[d.jsxs("span",{children:[d.jsx(Q,{text:"Status"}),": ",i||"free"]}),d.jsxs("span",{children:[d.jsx(Q,{text:"Last updated"}),": ",new Date().toLocaleTimeString()]})]})})]})]})}),d.jsx(rre,{isOpen:f,onClose:()=>h(!1)})]})};class unt extends _.Component{constructor(n){super(n);Mt(this,"handleRetry",()=>{console.log("[SettingsErrorBoundary] Retrying..."),this.props.onReset&&this.props.onReset(),this.setState({hasError:!1,error:void 0,errorInfo:void 0})});Mt(this,"handleGoHome",()=>{window.location.href="/app"});this.state={hasError:!1}}static getDerivedStateFromError(n){return console.error("[SettingsErrorBoundary] Error caught:",n),{hasError:!0,error:n}}componentDidCatch(n,r){console.error("[SettingsErrorBoundary] Component stack:",r.componentStack),console.error("[SettingsErrorBoundary] Error details:",n.message,n.stack),this.setState({error:n,errorInfo:r})}render(){return this.state.hasError?this.props.fallback?this.props.fallback:d.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:d.jsxs(Jr,{className:"w-full max-w-md",children:[d.jsxs(w0,{className:"text-center",children:[d.jsx(dv,{className:"h-12 w-12 text-yellow-500 mx-auto mb-2"}),d.jsx(b0,{className:"text-lg",children:d.jsx(Q,{text:"Settings Error"})})]}),d.jsxs(au,{className:"text-center space-y-4",children:[d.jsx("p",{className:"text-sm text-muted-foreground",children:d.jsx(Q,{text:"We encountered an error loading your settings. This might be due to a temporary issue."})}),d.jsxs("div",{className:"flex flex-col gap-2",children:[d.jsxs(ct,{onClick:this.handleRetry,className:"w-full",variant:"default",children:[d.jsx(Qu,{className:"h-4 w-4 mr-2"}),d.jsx(Q,{text:"Try Again"})]}),d.jsxs(ct,{onClick:this.handleGoHome,className:"w-full",variant:"outline",children:[d.jsx(TJ,{className:"h-4 w-4 mr-2"}),d.jsx(Q,{text:"Go Home"})]})]}),!1]})]})}):this.props.children}}const dnt=()=>d.jsx("div",{className:"min-h-screen pb-20",children:d.jsxs("div",{className:"max-w-3xl mx-auto px-4 pt-2",children:[d.jsxs("div",{className:"mb-6",children:[d.jsx(xi,{className:"h-9 w-32 mb-2"}),d.jsx(xi,{className:"h-5 w-64"})]}),d.jsxs("div",{className:"space-y-6",children:[d.jsxs(Jr,{className:"p-6",children:[d.jsx("div",{className:"flex items-center justify-between mb-6",children:d.jsx(xi,{className:"h-7 w-32"})}),d.jsxs("div",{className:"flex flex-col sm:flex-row gap-6 items-center sm:items-start",children:[d.jsx(xi,{className:"h-24 w-24 rounded-full"}),d.jsxs("div",{className:"flex-1 space-y-4 text-center sm:text-left",children:[d.jsx(xi,{className:"h-6 w-48 mx-auto sm:mx-0"}),d.jsx(xi,{className:"h-4 w-32 mx-auto sm:mx-0"}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsx(xi,{className:"h-16 rounded-lg"}),d.jsx(xi,{className:"h-16 rounded-lg"})]}),d.jsx(xi,{className:"h-10 w-24"})]})]})]}),d.jsxs(Jr,{className:"p-6",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsx(xi,{className:"h-6 w-32"}),d.jsx(xi,{className:"h-8 w-20"})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx(xi,{className:"h-4 w-24"}),d.jsx(xi,{className:"h-5 w-16"})]}),d.jsx(xi,{className:"h-20 rounded-lg"})]})]}),d.jsxs(Jr,{className:"p-6",children:[d.jsx(xi,{className:"h-6 w-24 mb-4"}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx(xi,{className:"h-4 w-20 mb-2"}),d.jsx(xi,{className:"h-10 w-80"})]}),d.jsxs("div",{children:[d.jsx(xi,{className:"h-4 w-24 mb-2"}),d.jsx("div",{className:"flex flex-wrap gap-3",children:[1,2,3,4,5].map(t=>d.jsxs("div",{className:"flex flex-col items-center gap-1.5",children:[d.jsx(xi,{className:"h-10 w-10 rounded-full"}),d.jsx(xi,{className:"h-3 w-12"})]},t))})]})]})]})]})]})}),fnt=({isLoading:t,error:e,children:n})=>(console.log("[SettingsLoadingWrapper] Rendering - isLoading:",t,"error:",e),t?d.jsx(dnt,{}):e?d.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:d.jsxs(Jr,{className:"w-full max-w-md p-6 text-center",children:[d.jsx("h2",{className:"text-lg font-semibold mb-2 text-destructive",children:d.jsx(Q,{text:"Loading Error"})}),d.jsxs("p",{className:"text-sm text-muted-foreground mb-4",children:[d.jsx(Q,{text:"Failed to load settings:"})," ",e]}),d.jsx("button",{onClick:()=>window.location.reload(),className:"text-sm text-primary hover:underline",children:d.jsx(Q,{text:"Try refreshing the page"})})]})}):d.jsx(d.Fragment,{children:n}));function hnt(t,e){return _.useReducer((n,r)=>e[n][r]??n,t)}var Xz="ScrollArea",[gde,jot]=sa(Xz),[pnt,ll]=gde(Xz),yde=_.forwardRef((t,e)=>{const{__scopeScrollArea:n,type:r="hover",dir:i,scrollHideDelay:o=600,...a}=t,[s,l]=_.useState(null),[c,u]=_.useState(null),[f,h]=_.useState(null),[p,y]=_.useState(null),[g,v]=_.useState(null),[b,w]=_.useState(0),[T,C]=_.useState(0),[P,M]=_.useState(!1),[k,I]=_.useState(!1),U=Kt(e,O=>l(O)),z=ah(i);return d.jsx(pnt,{scope:n,type:r,dir:z,scrollHideDelay:o,scrollArea:s,viewport:c,onViewportChange:u,content:f,onContentChange:h,scrollbarX:p,onScrollbarXChange:y,scrollbarXEnabled:P,onScrollbarXEnabledChange:M,scrollbarY:g,onScrollbarYChange:v,scrollbarYEnabled:k,onScrollbarYEnabledChange:I,onCornerWidthChange:w,onCornerHeightChange:C,children:d.jsx(At.div,{dir:z,...a,ref:U,style:{position:"relative","--radix-scroll-area-corner-width":b+"px","--radix-scroll-area-corner-height":T+"px",...t.style}})})});yde.displayName=Xz;var vde="ScrollAreaViewport",xde=_.forwardRef((t,e)=>{const{__scopeScrollArea:n,children:r,asChild:i,nonce:o,...a}=t,s=ll(vde,n),l=_.useRef(null),c=Kt(e,l,s.onViewportChange);return d.jsxs(d.Fragment,{children:[d.jsx("style",{dangerouslySetInnerHTML:{__html:`
[data-radix-scroll-area-viewport] {
  scrollbar-width: none;
  -ms-overflow-style: none;
  -webkit-overflow-scrolling: touch;
}
[data-radix-scroll-area-viewport]::-webkit-scrollbar {
  display: none;
}
:where([data-radix-scroll-area-viewport]) {
  display: flex;
  flex-direction: column;
  align-items: stretch;
}
:where([data-radix-scroll-area-content]) {
  flex-grow: 1;
}
`},nonce:o}),d.jsx(At.div,{"data-radix-scroll-area-viewport":"",...a,asChild:i,ref:c,style:{overflowX:s.scrollbarXEnabled?"scroll":"hidden",overflowY:s.scrollbarYEnabled?"scroll":"hidden",...t.style},children:_nt({asChild:i,children:r},u=>d.jsx("div",{"data-radix-scroll-area-content":"",ref:s.onContentChange,style:{minWidth:s.scrollbarXEnabled?"fit-content":void 0},children:u}))})]})});xde.displayName=vde;var cu="ScrollAreaScrollbar",Kz=_.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=ll(cu,t.__scopeScrollArea),{onScrollbarXEnabledChange:o,onScrollbarYEnabledChange:a}=i,s=t.orientation==="horizontal";return _.useEffect(()=>(s?o(!0):a(!0),()=>{s?o(!1):a(!1)}),[s,o,a]),i.type==="hover"?d.jsx(mnt,{...r,ref:e,forceMount:n}):i.type==="scroll"?d.jsx(gnt,{...r,ref:e,forceMount:n}):i.type==="auto"?d.jsx(wde,{...r,ref:e,forceMount:n}):i.type==="always"?d.jsx(Jz,{...r,ref:e}):null});Kz.displayName=cu;var mnt=_.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=ll(cu,t.__scopeScrollArea),[o,a]=_.useState(!1);return _.useEffect(()=>{const s=i.scrollArea;let l=0;if(s){const c=()=>{window.clearTimeout(l),a(!0)},u=()=>{l=window.setTimeout(()=>a(!1),i.scrollHideDelay)};return s.addEventListener("pointerenter",c),s.addEventListener("pointerleave",u),()=>{window.clearTimeout(l),s.removeEventListener("pointerenter",c),s.removeEventListener("pointerleave",u)}}},[i.scrollArea,i.scrollHideDelay]),d.jsx(oo,{present:n||o,children:d.jsx(wde,{"data-state":o?"visible":"hidden",...r,ref:e})})}),gnt=_.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=ll(cu,t.__scopeScrollArea),o=t.orientation==="horizontal",a=D2(()=>l("SCROLL_END"),100),[s,l]=hnt("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return _.useEffect(()=>{if(s==="idle"){const c=window.setTimeout(()=>l("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(c)}},[s,i.scrollHideDelay,l]),_.useEffect(()=>{const c=i.viewport,u=o?"scrollLeft":"scrollTop";if(c){let f=c[u];const h=()=>{const p=c[u];f!==p&&(l("SCROLL"),a()),f=p};return c.addEventListener("scroll",h),()=>c.removeEventListener("scroll",h)}},[i.viewport,o,l,a]),d.jsx(oo,{present:n||s!=="hidden",children:d.jsx(Jz,{"data-state":s==="hidden"?"hidden":"visible",...r,ref:e,onPointerEnter:ut(t.onPointerEnter,()=>l("POINTER_ENTER")),onPointerLeave:ut(t.onPointerLeave,()=>l("POINTER_LEAVE"))})})}),wde=_.forwardRef((t,e)=>{const n=ll(cu,t.__scopeScrollArea),{forceMount:r,...i}=t,[o,a]=_.useState(!1),s=t.orientation==="horizontal",l=D2(()=>{if(n.viewport){const c=n.viewport.offsetWidth<n.viewport.scrollWidth,u=n.viewport.offsetHeight<n.viewport.scrollHeight;a(s?c:u)}},10);return i0(n.viewport,l),i0(n.content,l),d.jsx(oo,{present:r||o,children:d.jsx(Jz,{"data-state":o?"visible":"hidden",...i,ref:e})})}),Jz=_.forwardRef((t,e)=>{const{orientation:n="vertical",...r}=t,i=ll(cu,t.__scopeScrollArea),o=_.useRef(null),a=_.useRef(0),[s,l]=_.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=Tde(s.viewport,s.content),u={...r,sizes:s,onSizesChange:l,hasThumb:c>0&&c<1,onThumbChange:h=>o.current=h,onThumbPointerUp:()=>a.current=0,onThumbPointerDown:h=>a.current=h};function f(h,p){return Snt(h,a.current,s,p)}return n==="horizontal"?d.jsx(ynt,{...u,ref:e,onThumbPositionChange:()=>{if(i.viewport&&o.current){const h=i.viewport.scrollLeft,p=wK(h,s,i.dir);o.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:h=>{i.viewport&&(i.viewport.scrollLeft=h)},onDragScroll:h=>{i.viewport&&(i.viewport.scrollLeft=f(h,i.dir))}}):n==="vertical"?d.jsx(vnt,{...u,ref:e,onThumbPositionChange:()=>{if(i.viewport&&o.current){const h=i.viewport.scrollTop,p=wK(h,s);o.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:h=>{i.viewport&&(i.viewport.scrollTop=h)},onDragScroll:h=>{i.viewport&&(i.viewport.scrollTop=f(h))}}):null}),ynt=_.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...i}=t,o=ll(cu,t.__scopeScrollArea),[a,s]=_.useState(),l=_.useRef(null),c=Kt(e,l,o.onScrollbarXChange);return _.useEffect(()=>{l.current&&s(getComputedStyle(l.current))},[l]),d.jsx(Sde,{"data-orientation":"horizontal",...i,ref:c,sizes:n,style:{bottom:0,left:o.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:o.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":L2(n)+"px",...t.style},onThumbPointerDown:u=>t.onThumbPointerDown(u.x),onDragScroll:u=>t.onDragScroll(u.x),onWheelScroll:(u,f)=>{if(o.viewport){const h=o.viewport.scrollLeft+u.deltaX;t.onWheelScroll(h),Ade(h,f)&&u.preventDefault()}},onResize:()=>{l.current&&o.viewport&&a&&r({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:HC(a.paddingLeft),paddingEnd:HC(a.paddingRight)}})}})}),vnt=_.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...i}=t,o=ll(cu,t.__scopeScrollArea),[a,s]=_.useState(),l=_.useRef(null),c=Kt(e,l,o.onScrollbarYChange);return _.useEffect(()=>{l.current&&s(getComputedStyle(l.current))},[l]),d.jsx(Sde,{"data-orientation":"vertical",...i,ref:c,sizes:n,style:{top:0,right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":L2(n)+"px",...t.style},onThumbPointerDown:u=>t.onThumbPointerDown(u.y),onDragScroll:u=>t.onDragScroll(u.y),onWheelScroll:(u,f)=>{if(o.viewport){const h=o.viewport.scrollTop+u.deltaY;t.onWheelScroll(h),Ade(h,f)&&u.preventDefault()}},onResize:()=>{l.current&&o.viewport&&a&&r({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:HC(a.paddingTop),paddingEnd:HC(a.paddingBottom)}})}})}),[xnt,bde]=gde(cu),Sde=_.forwardRef((t,e)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:i,onThumbChange:o,onThumbPointerUp:a,onThumbPointerDown:s,onThumbPositionChange:l,onDragScroll:c,onWheelScroll:u,onResize:f,...h}=t,p=ll(cu,n),[y,g]=_.useState(null),v=Kt(e,U=>g(U)),b=_.useRef(null),w=_.useRef(""),T=p.viewport,C=r.content-r.viewport,P=Br(u),M=Br(l),k=D2(f,10);function I(U){if(b.current){const z=U.clientX-b.current.left,O=U.clientY-b.current.top;c({x:z,y:O})}}return _.useEffect(()=>{const U=z=>{const O=z.target;(y==null?void 0:y.contains(O))&&P(z,C)};return document.addEventListener("wheel",U,{passive:!1}),()=>document.removeEventListener("wheel",U,{passive:!1})},[T,y,C,P]),_.useEffect(M,[r,M]),i0(y,k),i0(p.content,k),d.jsx(xnt,{scope:n,scrollbar:y,hasThumb:i,onThumbChange:Br(o),onThumbPointerUp:Br(a),onThumbPositionChange:M,onThumbPointerDown:Br(s),children:d.jsx(At.div,{...h,ref:v,style:{position:"absolute",...h.style},onPointerDown:ut(t.onPointerDown,U=>{U.button===0&&(U.target.setPointerCapture(U.pointerId),b.current=y.getBoundingClientRect(),w.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",p.viewport&&(p.viewport.style.scrollBehavior="auto"),I(U))}),onPointerMove:ut(t.onPointerMove,I),onPointerUp:ut(t.onPointerUp,U=>{const z=U.target;z.hasPointerCapture(U.pointerId)&&z.releasePointerCapture(U.pointerId),document.body.style.webkitUserSelect=w.current,p.viewport&&(p.viewport.style.scrollBehavior=""),b.current=null})})})}),$C="ScrollAreaThumb",Ede=_.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=bde($C,t.__scopeScrollArea);return d.jsx(oo,{present:n||i.hasThumb,children:d.jsx(wnt,{ref:e,...r})})}),wnt=_.forwardRef((t,e)=>{const{__scopeScrollArea:n,style:r,...i}=t,o=ll($C,n),a=bde($C,n),{onThumbPositionChange:s}=a,l=Kt(e,f=>a.onThumbChange(f)),c=_.useRef(),u=D2(()=>{c.current&&(c.current(),c.current=void 0)},100);return _.useEffect(()=>{const f=o.viewport;if(f){const h=()=>{if(u(),!c.current){const p=Ent(f,s);c.current=p,s()}};return s(),f.addEventListener("scroll",h),()=>f.removeEventListener("scroll",h)}},[o.viewport,u,s]),d.jsx(At.div,{"data-state":a.hasThumb?"visible":"hidden",...i,ref:l,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:ut(t.onPointerDownCapture,f=>{const p=f.target.getBoundingClientRect(),y=f.clientX-p.left,g=f.clientY-p.top;a.onThumbPointerDown({x:y,y:g})}),onPointerUp:ut(t.onPointerUp,a.onThumbPointerUp)})});Ede.displayName=$C;var Zz="ScrollAreaCorner",_de=_.forwardRef((t,e)=>{const n=ll(Zz,t.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?d.jsx(bnt,{...t,ref:e}):null});_de.displayName=Zz;var bnt=_.forwardRef((t,e)=>{const{__scopeScrollArea:n,...r}=t,i=ll(Zz,n),[o,a]=_.useState(0),[s,l]=_.useState(0),c=!!(o&&s);return i0(i.scrollbarX,()=>{var f;const u=((f=i.scrollbarX)==null?void 0:f.offsetHeight)||0;i.onCornerHeightChange(u),l(u)}),i0(i.scrollbarY,()=>{var f;const u=((f=i.scrollbarY)==null?void 0:f.offsetWidth)||0;i.onCornerWidthChange(u),a(u)}),c?d.jsx(At.div,{...r,ref:e,style:{width:o,height:s,position:"absolute",right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function HC(t){return t?parseInt(t,10):0}function Tde(t,e){const n=t/e;return isNaN(n)?0:n}function L2(t){const e=Tde(t.viewport,t.content),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,r=(t.scrollbar.size-n)*e;return Math.max(r,18)}function Snt(t,e,n,r="ltr"){const i=L2(n),o=i/2,a=e||o,s=i-a,l=n.scrollbar.paddingStart+a,c=n.scrollbar.size-n.scrollbar.paddingEnd-s,u=n.content-n.viewport,f=r==="ltr"?[0,u]:[u*-1,0];return Cde([l,c],f)(t)}function wK(t,e,n="ltr"){const r=L2(e),i=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,o=e.scrollbar.size-i,a=e.content-e.viewport,s=o-r,l=n==="ltr"?[0,a]:[a*-1,0],c=vb(t,l);return Cde([0,a],[0,s])(c)}function Cde(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function Ade(t,e){return t>0&&t<e}var Ent=(t,e=()=>{})=>{let n={left:t.scrollLeft,top:t.scrollTop},r=0;return function i(){const o={left:t.scrollLeft,top:t.scrollTop},a=n.left!==o.left,s=n.top!==o.top;(a||s)&&e(),n=o,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)};function D2(t,e){const n=Br(t),r=_.useRef(0);return _.useEffect(()=>()=>window.clearTimeout(r.current),[]),_.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,e)},[n,e])}function i0(t,e){const n=Br(e);$i(()=>{let r=0;if(t){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(t),()=>{window.cancelAnimationFrame(r),i.unobserve(t)}}},[t,n])}function _nt(t,e){const{asChild:n,children:r}=t;if(!n)return typeof e=="function"?e(r):e;const i=_.Children.only(r);return _.cloneElement(i,{children:typeof e=="function"?e(i.props.children):e})}var Mde=yde,Tnt=xde,Cnt=_de;const a3=_.forwardRef(({className:t,children:e,...n},r)=>d.jsxs(Mde,{ref:r,className:He("relative overflow-hidden",t),...n,children:[d.jsx(Tnt,{className:"h-full w-full rounded-[inherit]",children:e}),d.jsx(Pde,{}),d.jsx(Cnt,{})]}));a3.displayName=Mde.displayName;const Pde=_.forwardRef(({className:t,orientation:e="vertical",...n},r)=>d.jsx(Kz,{ref:r,orientation:e,className:He("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...n,children:d.jsx(Ede,{className:"relative flex-1 rounded-full bg-border"})}));Pde.displayName=Kz.displayName;var Ant="Label",kde=_.forwardRef((t,e)=>d.jsx(At.label,{...t,ref:e,onMouseDown:n=>{var i;n.target.closest("button, input, select, textarea")||((i=t.onMouseDown)==null||i.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));kde.displayName=Ant;var Nde=kde;const Mnt=mm("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Rde=_.forwardRef(({className:t,...e},n)=>d.jsx(Nde,{ref:n,className:He(Mnt(),t),...e}));Rde.displayName=Nde.displayName;var Qz="Checkbox",[Pnt,Iot]=sa(Qz),[knt,Nnt]=Pnt(Qz),jde=_.forwardRef((t,e)=>{const{__scopeCheckbox:n,name:r,checked:i,defaultChecked:o,required:a,disabled:s,value:l="on",onCheckedChange:c,form:u,...f}=t,[h,p]=_.useState(null),y=Kt(e,C=>p(C)),g=_.useRef(!1),v=h?u||!!h.closest("form"):!0,[b=!1,w]=wo({prop:i,defaultProp:o,onChange:c}),T=_.useRef(b);return _.useEffect(()=>{const C=h==null?void 0:h.form;if(C){const P=()=>w(T.current);return C.addEventListener("reset",P),()=>C.removeEventListener("reset",P)}},[h,w]),d.jsxs(knt,{scope:n,state:b,disabled:s,children:[d.jsx(At.button,{type:"button",role:"checkbox","aria-checked":Hf(b)?"mixed":b,"aria-required":a,"data-state":Lde(b),"data-disabled":s?"":void 0,disabled:s,value:l,...f,ref:y,onKeyDown:ut(t.onKeyDown,C=>{C.key==="Enter"&&C.preventDefault()}),onClick:ut(t.onClick,C=>{w(P=>Hf(P)?!0:!P),v&&(g.current=C.isPropagationStopped(),g.current||C.stopPropagation())})}),v&&d.jsx(Rnt,{control:h,bubbles:!g.current,name:r,value:l,checked:b,required:a,disabled:s,form:u,style:{transform:"translateX(-100%)"},defaultChecked:Hf(o)?!1:o})]})});jde.displayName=Qz;var Ide="CheckboxIndicator",Ode=_.forwardRef((t,e)=>{const{__scopeCheckbox:n,forceMount:r,...i}=t,o=Nnt(Ide,n);return d.jsx(oo,{present:r||Hf(o.state)||o.state===!0,children:d.jsx(At.span,{"data-state":Lde(o.state),"data-disabled":o.disabled?"":void 0,...i,ref:e,style:{pointerEvents:"none",...t.style}})})});Ode.displayName=Ide;var Rnt=t=>{const{control:e,checked:n,bubbles:r=!0,defaultChecked:i,...o}=t,a=_.useRef(null),s=TA(n),l=lA(e);_.useEffect(()=>{const u=a.current,f=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(f,"checked").set;if(s!==n&&p){const y=new Event("click",{bubbles:r});u.indeterminate=Hf(n),p.call(u,Hf(n)?!1:n),u.dispatchEvent(y)}},[s,n,r]);const c=_.useRef(Hf(n)?!1:n);return d.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:i??c.current,...o,tabIndex:-1,ref:a,style:{...t.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function Hf(t){return t==="indeterminate"}function Lde(t){return Hf(t)?"indeterminate":t?"checked":"unchecked"}var Dde=jde,jnt=Ode;const Fde=_.forwardRef(({className:t,...e},n)=>d.jsx(Dde,{ref:n,className:He("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...e,children:d.jsx(jnt,{className:He("flex items-center justify-center text-current"),children:d.jsx(Sd,{className:"h-4 w-4"})})}));Fde.displayName=Dde.displayName;const Int=()=>{const{user:t}=or(),[e,n]=_.useState(!1),[r,i]=_.useState(!1),o=async()=>{if(!(t!=null&&t.id)){It.error(d.jsx(Q,{text:"User not found",forceTranslate:!0}));return}try{n(!0);const a=await q2e(t.id);a.success&&(It.success(d.jsx(Q,{text:`Successfully deleted ${a.deletedEntries} journal entries`,forceTranslate:!0})),window.dispatchEvent(new CustomEvent("journalEntriesDeleted",{detail:{deletedCount:a.deletedEntries}})),i(!1))}catch(a){console.error("Error deleting all entries:",a),It.error(d.jsx(Q,{text:"Failed to delete entries. Please try again.",forceTranslate:!0}))}finally{n(!1)}};return d.jsx("div",{className:"border border-red-200 bg-red-50 dark:bg-red-900/20 dark:border-red-800 rounded-lg p-4",children:d.jsxs("div",{className:"flex items-start gap-3",children:[d.jsx(dv,{className:"h-5 w-5 text-red-600 flex-shrink-0 mt-0.5"}),d.jsxs("div",{className:"flex-1",children:[d.jsx("h3",{className:"font-medium text-red-800 dark:text-red-200 mb-1",children:d.jsx(Q,{text:"Danger Zone"})}),d.jsx("p",{className:"text-sm text-red-700 dark:text-red-300 mb-4",children:d.jsx(Q,{text:"This action will permanently delete all your journal entries. This cannot be undone."})}),d.jsxs(S0,{open:r,onOpenChange:i,children:[d.jsx(hne,{asChild:!0,children:d.jsxs(ct,{variant:"destructive",size:"sm",className:"bg-red-600 hover:bg-red-700 text-white",children:[d.jsx(pT,{className:"h-4 w-4 mr-2"}),d.jsx(Q,{text:"Delete All Entries"})]})}),d.jsxs(bm,{children:[d.jsxs(Sm,{children:[d.jsxs(_m,{className:"flex items-center gap-2",children:[d.jsx(dv,{className:"h-5 w-5 text-red-600"}),d.jsx(Q,{text:"Delete All Journal Entries?"})]}),d.jsxs(Tm,{className:"space-y-2",children:[d.jsx("p",{children:d.jsx(Q,{text:"This will permanently delete ALL of your journal entries and their associated data."})}),d.jsx("p",{className:"font-medium text-red-600",children:d.jsx(Q,{text:"This action cannot be undone."})}),d.jsx("p",{children:d.jsx(Q,{text:"Are you sure you want to continue?"})})]})]}),d.jsxs(Em,{children:[d.jsx(Am,{disabled:e,children:d.jsx(Q,{text:"Cancel"})}),d.jsx(Cm,{onClick:o,disabled:e,className:"bg-red-600 hover:bg-red-700 text-white",children:e?d.jsxs(d.Fragment,{children:[d.jsx(Aa,{className:"h-4 w-4 mr-2 animate-spin"}),d.jsx(Q,{text:"Deleting..."})]}):d.jsxs(d.Fragment,{children:[d.jsx(pT,{className:"h-4 w-4 mr-2"}),d.jsx(Q,{text:"Yes, Delete All"})]})})]})]})]})]})]})})};function Ont({icon:t,title:e,description:n,children:r}){return d.jsxs("div",{className:"flex items-start justify-between py-4",children:[d.jsxs("div",{className:"flex gap-3",children:[d.jsx("div",{className:"h-10 w-10 rounded-full bg-secondary flex items-center justify-center flex-shrink-0",children:d.jsx(t,{className:"h-5 w-5 text-muted-foreground"})}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-medium text-foreground",children:d.jsx(Q,{text:e})}),d.jsx("p",{className:"text-sm text-muted-foreground",children:d.jsx(Q,{text:n})})]})]}),d.jsx("div",{children:r})]})}function Lnt(){var De,Ue,$e;console.log("[Settings] SettingsContent rendering");const{theme:t,setTheme:e,colorTheme:n,setColorTheme:r,customColor:i,setCustomColor:o,systemTheme:a}=Zr(),[s,l]=_.useState(!1),[c,u]=_.useState(["evening"]),[f,h]=_.useState(!1),{user:p,signOut:y}=or(),{isPremium:g,isTrialActive:v,subscriptionStatus:b,isLoading:w,error:T}=H1(),[C,P]=_.useState(0),{entries:M}=eF(p==null?void 0:p.id,0,!!p);Za();const k=ui(),{currentLanguage:I}=In(),[U,z]=_.useState(!1),[O,B]=_.useState(!1),[$,F]=_.useState(!1),[J,K]=_.useState(i),[Z,H]=_.useState(""),[Y,L]=_.useState(""),[N,V]=_.useState(!1),[W,ne]=_.useState(!0),[se,te]=_.useState(null),ie=25,pe=[{name:"Default",color:"bg-blue-500"},{name:"Calm",color:"bg-violet-500"},{name:"Soothing",color:"bg-pink-200"},{name:"Energy",color:"bg-amber-400"},{name:"Focus",color:"bg-emerald-400"}],de=[{label:"Morning (8:00 AM)",value:"morning"},{label:"Afternoon (2:00 PM)",value:"afternoon"},{label:"Evening (7:00 PM)",value:"evening"},{label:"Night (10:00 PM)",value:"night"}],{resetTutorial:ce}=ka();_.useEffect(()=>{console.log("[Settings] State update:",{user:p==null?void 0:p.id,subscriptionLoading:w,subscriptionError:T,isLoadingProfile:W,entriesCount:M.length,theme:t,colorTheme:n})},[p,w,T,W,M.length,t,n]),_.useEffect(()=>{(async()=>{if(p!=null&&p.id)try{const{data:fe,error:ke}=await Ze.from("Journal Entries").select("created_at").eq("user_id",p.id).order("created_at",{ascending:!1});if(ke){console.error("Error fetching entries for streak:",ke);return}if(!fe||fe.length===0){P(0);return}const qe=[...fe].sort((dt,ft)=>new Date(dt.created_at).getTime()-new Date(ft.created_at).getTime()).reduce((dt,ft)=>{const Ee=ol(new Date(ft.created_at)).toISOString();return dt[Ee]||(dt[Ee]=[]),dt[Ee].push(ft),dt},{}),tt=Object.keys(qe).sort();let ot=1,St=1;for(let dt=1;dt<tt.length;dt++){const ft=new Date(tt[dt]),Ee=new Date(tt[dt-1]),Ve=ft.getTime()-Ee.getTime();Math.round(Ve/(1e3*3600*24))===1?(ot++,St=Math.max(St,ot)):ot=1}P(St)}catch(fe){console.error("Error calculating max streak:",fe)}})()},[p,M]),_.useEffect(()=>{(async()=>{if(p!=null&&p.id)try{ne(!0);const{data:fe,error:ke}=await Ze.from("profiles").select("display_name").eq("id",p.id).single();ke&&ke.code!=="PGRST116"?console.error("Error fetching profile",ke):fe&&(H(fe.display_name||""),L(fe.display_name||""))}catch(fe){console.error("Error in profile fetching",fe)}finally{ne(!1)}})()},[p]),_.useEffect(()=>{const we=localStorage.getItem("notification_enabled")==="true",fe=localStorage.getItem("notification_times");if(we&&l(!0),fe)try{const ke=JSON.parse(fe);Array.isArray(ke)&&ke.length>0&&u(ke)}catch(ke){console.error("Error parsing notification times from localStorage",ke)}},[]),_.useEffect(()=>{s&&($O(!0,"once",c),(typeof window<"u"&&!("Notification"in window)||window.Notification&&window.Notification.permission!=="granted")&&t2e())},[s,c]);const he=()=>{const fe=`mailto:support@soulo.online?subject=${encodeURIComponent("Help me, I don't want to be SOuLO right now")}`;window.open(fe,"_blank")},ee=async()=>{try{It.info(d.jsx(Q,{text:"Logging out...",forceTranslate:!0})),await y()}catch(we){console.error("Error logging out from Settings page:",we),window.location.href="/"}},xe=we=>we.length>ie?(te(`Display name cannot exceed ${ie} characters`),!1):(te(null),!0),be=we=>{const fe=we.target.value;H(fe),xe(fe)},Ae=async()=>{if(p&&xe(Z.trim()))try{const{error:we}=await Ze.from("profiles").update({display_name:Z.trim(),updated_at:new Date().toISOString()}).eq("id",p.id);if(we){It.error(d.jsx(Q,{text:"Failed to update display name",forceTranslate:!0})),console.error(we);return}L(Z.trim()),It.success(d.jsx(Q,{text:"Display name updated successfully",forceTranslate:!0})),V(!1)}catch(we){console.error("Error updating display name",we),It.error(d.jsx(Q,{text:"Something went wrong",forceTranslate:!0}))}},Ce=()=>{H(Y),V(!1),te(null)},oe=async we=>{l(we),we?"Notification"in window?await Notification.requestPermission()==="granted"?(h(!0),It.success(d.jsx(Q,{text:"Notifications enabled! Set your preferences.",forceTranslate:!0}))):(l(!1),It.error(d.jsx(Q,{text:"Notification permission denied",forceTranslate:!0}))):(h(!0),It.success(d.jsx(Q,{text:"Customize your notification settings",forceTranslate:!0}))):(It.info(d.jsx(Q,{text:"Notifications disabled",forceTranslate:!0})),typeof window<"u"&&(localStorage.removeItem("notification_enabled"),localStorage.removeItem("notification_times")))},ae=we=>{u(fe=>fe.includes(we)?fe.filter(ke=>ke!==we):[...fe,we])},Se=()=>{if(c.length===0){It.error(d.jsx(Q,{text:"Please select at least one time for notifications",forceTranslate:!0}));return}$O(!0,"once",c),It.success(d.jsx(Q,{text:"Notification settings saved",forceTranslate:!0})),h(!1)},me=()=>{const we=localStorage.getItem("notification_enabled")==="true",fe=localStorage.getItem("notification_times");if(l(we),fe)try{const ke=JSON.parse(fe);Array.isArray(ke)&&ke.length>0?u(ke):u(["evening"])}catch{u(["evening"])}else u(["evening"]);h(!1)},ye=()=>{if(!s)return d.jsx(Q,{text:"Disabled"});const we=c.map(fe=>({morning:"Morning",afternoon:"Afternoon",evening:"Evening",night:"Night"})[fe]).join(", ");return d.jsx("div",{className:"flex flex-wrap items-center gap-1",children:d.jsx(Q,{text:we})})},Ie=()=>{o(J),r("Custom"),It.success(d.jsx(Q,{text:"Custom color applied",forceTranslate:!0})),F(!1)};return console.log("[Settings] About to render with loading states:",{subscriptionLoading:w,isLoadingProfile:W,subscriptionError:T}),d.jsx(fnt,{isLoading:w||W,error:T,children:d.jsxs("div",{className:"min-h-screen pb-20",children:[d.jsxs("div",{className:He("max-w-3xl mx-auto px-4",k?"pt-0":"pt-2"),children:[d.jsxs("div",{className:"mb-6",children:[d.jsx("h1",{className:"text-3xl font-bold mb-2 text-theme-color",children:d.jsx(Q,{text:"Settings",forceTranslate:!0})}),d.jsx("p",{className:"text-muted-foreground",children:d.jsx(Q,{text:"Personalize your SOuLO experience"})})]}),d.jsxs("div",{className:"space-y-6",children:[d.jsxs(Ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"bg-background rounded-xl p-6 shadow-sm border",children:[d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsx("h2",{className:"text-xl font-semibold text-theme-color",children:d.jsx(Q,{text:"Your Profile"})}),d.jsxs(ct,{variant:"outline",size:"sm",onClick:ee,className:"flex items-center gap-2 text-destructive hover:text-destructive hover:bg-destructive/10",children:[d.jsx(M0e,{className:"h-4 w-4"}),d.jsx(Q,{text:"Logout"})]})]}),d.jsxs("div",{className:"flex flex-col sm:flex-row gap-6 items-center sm:items-start",children:[d.jsx("div",{className:"flex flex-col items-center",children:d.jsxs(C2,{className:"h-24 w-24 mb-4",children:[d.jsx(A2,{src:(De=p==null?void 0:p.user_metadata)==null?void 0:De.avatar_url,optimizeSize:192}),d.jsx(M2,{children:((Ue=p==null?void 0:p.email)==null?void 0:Ue.substring(0,2).toUpperCase())||"U"})]})}),d.jsxs("div",{className:"flex-1 space-y-4 text-center sm:text-left",children:[N?d.jsxs("div",{className:"flex flex-col space-y-2",children:[d.jsx(xm,{value:Z,onChange:be,placeholder:"Enter your display name",className:He("max-w-xs",se&&"border-red-500"),autoFocus:!0,maxLength:ie}),se&&d.jsx("p",{className:"text-xs text-red-500",children:se}),d.jsxs("div",{className:"flex gap-2 mt-2",children:[d.jsxs(ct,{variant:"outline",size:"sm",onClick:Ce,className:"flex items-center gap-1",children:[d.jsx(cc,{className:"h-3 w-3"}),d.jsx(Q,{text:"Cancel"})]}),d.jsxs(ct,{variant:"default",size:"sm",onClick:Ae,className:"flex items-center gap-1 bg-theme hover:bg-theme/90",disabled:!Z.trim()||Z.trim()===Y||!!se||Z.length>ie,children:[d.jsx(D0e,{className:"h-3 w-3"}),d.jsx(Q,{text:"Save"})]})]})]}):d.jsxs("div",{className:"flex items-center justify-center sm:justify-start gap-2 flex-wrap",children:[d.jsx("h3",{className:"text-xl font-semibold text-foreground",children:W?d.jsx(Q,{text:"Loading..."}):Y||(($e=p==null?void 0:p.user_metadata)==null?void 0:$e.full_name)||d.jsx(Q,{text:"User"})}),d.jsx(ant,{isPremium:g,isTrialActive:v,subscriptionStatus:b,isLoading:w,size:"sm"}),d.jsx(ct,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>V(!0),children:d.jsx(MJ,{className:"h-3 w-3"})})]}),d.jsx("p",{className:"text-muted-foreground",children:p==null?void 0:p.email})]})]})]}),d.jsx(cnt,{}),d.jsxs(Ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1},className:"bg-background rounded-xl p-6 shadow-sm border",children:[d.jsx("h2",{className:"text-xl font-semibold mb-4 text-theme-color",children:d.jsx(Q,{text:"Appearance"})}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"text-sm font-medium mb-2 block text-foreground",children:d.jsx(Q,{text:"Theme Mode"})}),d.jsxs("div",{className:"flex p-1 bg-secondary rounded-full w-fit",children:[d.jsxs("button",{onClick:()=>{e("light"),It.success(d.jsx(Q,{text:"Light theme applied",forceTranslate:!0}))},className:He("flex items-center gap-1.5 px-4 py-1.5 rounded-full transition-all",t==="light"?"bg-background shadow-sm":"hover:text-foreground text-muted-foreground"),children:[d.jsx(z0e,{className:"h-4 w-4"}),d.jsx(Q,{text:"Light"})]}),d.jsxs("button",{onClick:()=>{e("dark"),It.success(d.jsx(Q,{text:"Dark theme applied",forceTranslate:!0}))},className:He("flex items-center gap-1.5 px-4 py-1.5 rounded-full transition-all",t==="dark"?"bg-background shadow-sm":"hover:text-foreground text-muted-foreground"),children:[d.jsx(j0e,{className:"h-4 w-4"}),d.jsx(Q,{text:"Dark"})]}),d.jsxs("button",{onClick:()=>{e("system"),It.success(d.jsx(Q,{text:"System theme applied",forceTranslate:!0}))},className:He("flex items-center gap-1.5 px-4 py-1.5 rounded-full transition-all",t==="system"?"bg-background shadow-sm":"hover:text-foreground text-muted-foreground"),children:[d.jsx(R0e,{className:"h-4 w-4 mr-1"}),d.jsxs("span",{children:[d.jsx(Q,{text:"System"}),t==="system"&&` (${a})`]})]})]}),t==="system"&&d.jsxs("p",{className:"mt-1 text-xs text-muted-foreground",children:[d.jsx(Q,{text:"Using your device's"})," ",a," ",d.jsx(Q,{text:"theme preference"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"text-sm font-medium mb-2 block text-theme-color",children:d.jsx(Q,{text:"Color Theme"})}),d.jsx("div",{className:"flex flex-wrap gap-3",children:pe.map(we=>d.jsxs("button",{onClick:()=>{r(we.name),It.success(d.jsx(Q,{text:`${we.name} theme applied`,forceTranslate:!0}))},className:He("flex flex-col items-center gap-1.5 transition-all"),children:[d.jsx("div",{className:He("h-10 w-10 rounded-full flex items-center justify-center border-2 transition-all",we.color,n===we.name?"border-foreground ring-2 ring-background ring-offset-2":"border-muted"),children:n===we.name&&d.jsx(Sd,{className:"h-5 w-5 text-white"})}),d.jsx("span",{className:He("text-xs",n===we.name?"text-theme-color font-medium":"text-foreground"),children:d.jsx(Q,{text:we.name})})]},we.name))}),d.jsx("div",{className:"mt-4",children:d.jsxs(ct,{variant:"outline",size:"sm",className:"flex items-center gap-2",onClick:()=>{K(i),F(!0)},children:[d.jsx(I0e,{className:"h-4 w-4"}),d.jsx(Q,{text:"Customize Your Color"})]})})]})]})]}),d.jsxs(Ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.2},className:"bg-background rounded-xl p-6 shadow-sm border",children:[d.jsx("h2",{className:"text-xl font-semibold mb-4 text-theme-color",children:d.jsx(Q,{text:"Preferences"})}),d.jsxs("div",{className:"space-y-3 divide-y",children:[d.jsx(Ont,{icon:bJ,title:"Journal Reminders",description:s?"":"Get reminders to journal and stay on track",children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(hde,{checked:s,onCheckedChange:oe}),s&&d.jsx(ct,{variant:"outline",size:"sm",onClick:()=>h(!0),children:d.jsx(Q,{text:"Customize"})})]})}),s&&d.jsx("div",{className:"pt-2 text-sm text-muted-foreground",children:ye()})]})]}),d.jsxs(Ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.3},className:"bg-background rounded-xl p-6 shadow-sm border",children:[d.jsx("h2",{className:"text-xl font-semibold mb-4 text-theme-color",children:d.jsx(Q,{text:"Help & Support"})}),d.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[d.jsx(ct,{variant:"outline",size:"lg",className:"h-auto py-6 rounded-xl justify-start",onClick:()=>{z(!0)},children:d.jsxs("div",{className:"flex flex-col items-start text-left",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[d.jsx(v0e,{className:"h-4 w-4 text-theme-color"}),d.jsx("span",{className:"font-medium text-foreground",children:d.jsx(Q,{text:"FAQ"})})]}),d.jsx("p",{className:"text-xs text-muted-foreground",children:d.jsx(Q,{text:"Frequently asked questions"})})]})}),d.jsx(ct,{variant:"outline",size:"lg",className:"h-auto py-6 rounded-xl justify-start",onClick:()=>{B(!0)},children:d.jsxs("div",{className:"flex flex-col items-start text-left",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[d.jsx(B3,{className:"h-4 w-4 text-theme-color"}),d.jsx("span",{className:"font-medium text-foreground",children:d.jsx(Q,{text:"Privacy Policy"})})]}),d.jsx("p",{className:"text-xs text-muted-foreground",children:d.jsx(Q,{text:"How we protect your data"})})]})})]}),d.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row justify-center gap-3",children:[d.jsxs(ct,{variant:"default",className:"gap-2 bg-theme-color hover:bg-theme-color/90 flex-1 sm:flex-none whitespace-normal text-center min-h-[44px] px-6",onClick:he,children:[d.jsx(CJ,{className:"h-4 w-4 flex-shrink-0"}),d.jsx("span",{className:"leading-tight",children:d.jsx(Q,{text:"Contact Support"})})]}),d.jsxs(ct,{variant:"outline",className:"gap-2 border-theme-color text-theme-color hover:bg-theme-color/10 flex-1 sm:flex-none whitespace-normal text-center min-h-[44px] px-6",onClick:ce,children:[d.jsx(Qu,{className:"h-4 w-4 flex-shrink-0"}),d.jsx("span",{className:"leading-tight",children:d.jsx(Q,{text:"Restart Tutorial"})})]})]})]}),d.jsxs(Ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.4},className:"bg-background rounded-xl p-6 shadow-sm border",children:[d.jsx("h2",{className:"text-xl font-semibold mb-4 text-theme-color",children:d.jsx(Q,{text:"Data Management"})}),d.jsx(Int,{})]}),d.jsx("div",{className:"py-4 text-center text-sm text-muted-foreground",children:d.jsxs("p",{className:"flex items-center justify-center gap-1",children:[d.jsx(Yc,{size:"small",useColorTheme:!0})," v1.0.0"]})})]})]}),d.jsx(Pp,{open:U,onOpenChange:we=>{z(we)},children:d.jsxs(Rf,{className:"max-w-2xl max-h-[80vh] overflow-hidden",children:[d.jsxs(jf,{children:[d.jsx(If,{className:"text-xl text-theme-color",children:d.jsx(Q,{text:"Frequently Asked Questions"})}),d.jsx(Oy,{children:d.jsx(Q,{text:"Find answers to common questions about SOuLO"})})]}),d.jsx(a3,{className:"h-[60vh] pr-4",children:d.jsxs("div",{className:"space-y-6 py-2",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx("h3",{className:"text-base font-semibold",children:d.jsx(Q,{text:"What is SOuLO?"})}),d.jsx("p",{className:"text-sm text-muted-foreground",children:d.jsx(Q,{text:"SOuLO is an AI-powered journaling app designed to help you track, analyze, and understand your emotions through voice recordings and text entries. Our app creates a safe space for self-reflection and personal growth."})})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("h3",{className:"text-base font-semibold",children:d.jsx(Q,{text:"How do I create a journal entry?"})}),d.jsx("p",{className:"text-sm text-muted-foreground",children:d.jsx(Q,{text:"You can create a journal entry by navigating to the Journal tab and clicking on the '+' button. You can either type your entry or use the voice recording feature, which will automatically transcribe and analyze your spoken thoughts."})})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("h3",{className:"text-base font-semibold",children:d.jsx(Q,{text:"Is my data private?"})}),d.jsx("p",{className:"text-sm text-muted-foreground",children:d.jsx(Q,{text:"Yes, your privacy is our top priority. All journal entries are encrypted and only accessible to you. We do not share or sell your personal data with third parties. See our Privacy Policy for more details."})})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("h3",{className:"text-base font-semibold",children:d.jsx(Q,{text:"How does the emotion analysis work?"})}),d.jsx("p",{className:"text-sm text-muted-foreground",children:d.jsx(Q,{text:"Our AI technology analyzes the text and tone of your journal entries to identify emotions and themes. It recognizes patterns in your writing or speech to provide insights about your emotional state and recurring topics."})})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("h3",{className:"text-base font-semibold",children:d.jsx(Q,{text:"Can I chat with my journal?"})}),d.jsx("p",{className:"text-sm text-muted-foreground",children:d.jsx(Q,{text:"Yes! One of SOuLO's unique features is the ability to chat with your journal. You can ask questions about your mood patterns, seek insights about your emotional trends, or get personalized reflections based on your journal entries."})})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("h3",{className:"text-base font-semibold",children:d.jsx(Q,{text:"What is a journal streak?"})}),d.jsx("p",{className:"text-sm text-muted-foreground",children:d.jsx(Q,{text:"A journal streak represents the number of consecutive days you've created at least one journal entry. It's a way to track your consistency and build a regular journaling habit."})})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("h3",{className:"text-base font-semibold",children:d.jsx(Q,{text:"How do I set up daily reminders?"})}),d.jsx("p",{className:"text-sm text-muted-foreground",children:d.jsx(Q,{text:"You can enable daily reminders by toggling on the Notifications option in the Settings page. You'll need to grant notification permissions to the app for this feature to work."})})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("h3",{className:"text-base font-semibold",children:d.jsx(Q,{text:"How do I customize the app's appearance?"})}),d.jsx("p",{className:"text-sm text-muted-foreground",children:d.jsx(Q,{text:"In the Settings page, you can switch between light and dark mode, and choose from several color themes. You can even create your own custom color theme to personalize your experience."})})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("h3",{className:"text-base font-semibold",children:d.jsx(Q,{text:"How do I view my emotional insights?"})}),d.jsx("p",{className:"text-sm text-muted-foreground",children:d.jsx(Q,{text:"Navigate to the Insights tab to see visualizations of your emotional patterns over time. You can view your mood calendar, emotion distribution, and recurring themes from your journal entries."})})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("h3",{className:"text-base font-semibold",children:d.jsx(Q,{text:"Is SOuLO available on all devices?"})}),d.jsx("p",{className:"text-sm text-muted-foreground",children:d.jsx(Q,{text:"SOuLO is available as a web application that works on all modern browsers. The responsive design ensures a great experience on both desktop and mobile devices."})})]})]})})]})}),d.jsx(Pp,{open:O,onOpenChange:we=>{B(we)},children:d.jsxs(Rf,{className:"max-w-2xl max-h-[80vh] overflow-hidden",children:[d.jsxs(jf,{children:[d.jsx(If,{className:"text-xl text-theme-color",children:d.jsx(Q,{text:"Privacy Policy"})}),d.jsx(Oy,{children:d.jsx(Q,{text:"How we protect your data and respect your privacy"})})]}),d.jsx(a3,{className:"h-[60vh] pr-4",children:d.jsxs("div",{className:"space-y-6 py-2",children:[d.jsxs("p",{className:"text-sm text-muted-foreground",children:[d.jsx(Q,{text:"Last Updated"}),": April 8, 2025"]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("h3",{className:"text-base font-semibold",children:d.jsx(Q,{text:"Introduction"})}),d.jsx("p",{className:"text-sm text-muted-foreground",children:d.jsx(Q,{text:"Welcome to SOuLO ('we,' 'our,' or 'us'). We are committed to protecting your privacy and handling your data with transparency and care. This Privacy Policy explains how we collect, use, disclose, and safeguard your information when you use our journaling application."})}),d.jsxs("p",{className:"text-sm text-muted-foreground",children:[d.jsx(Q,{text:"This Privacy Policy is available at"})," ",d.jsx("a",{href:"https://soulo.online/privacy-policy",className:"text-blue-500 hover:underline",target:"_blank",rel:"noopener noreferrer",children:"https://soulo.online/privacy-policy"})]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("h3",{className:"text-base font-semibold",children:d.jsx(Q,{text:"Information We Collect"})}),d.jsxs("p",{className:"text-sm text-muted-foreground",children:[d.jsx("strong",{children:d.jsx(Q,{text:"Account Information:"})})," ",d.jsx(Q,{text:"When you create an account, we collect your email address, name, and password."})]}),d.jsxs("p",{className:"text-sm text-muted-foreground",children:[d.jsx("strong",{children:d.jsx(Q,{text:"Journal Entries:"})})," ",d.jsx(Q,{text:"We store the content of your journal entries, including text and voice recordings."})]}),d.jsxs("p",{className:"text-sm text-muted-foreground",children:[d.jsx("strong",{children:d.jsx(Q,{text:"Usage Data:"})})," ",d.jsx(Q,{text:"We collect information about how you interact with our application, such as features used, time spent, and actions taken."})]}),d.jsxs("p",{className:"text-sm text-muted-foreground",children:[d.jsx("strong",{children:d.jsx(Q,{text:"Device Information:"})})," ",d.jsx(Q,{text:"We collect information about your device, including IP address, browser type, and operating system."})]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("h3",{className:"text-base font-semibold",children:d.jsx(Q,{text:"How We Use Your Information"})}),d.jsxs("p",{className:"text-sm text-muted-foreground",children:[d.jsx("strong",{children:d.jsx(Q,{text:"Provide and Improve Services:"})})," ",d.jsx(Q,{text:"We use your information to deliver our journaling features, analyze your entries, and generate insights."})]}),d.jsxs("p",{className:"text-sm text-muted-foreground",children:[d.jsx("strong",{children:d.jsx(Q,{text:"Personalization:"})})," ",d.jsx(Q,{text:"We personalize your experience based on your preferences and usage patterns."})]}),d.jsxs("p",{className:"text-sm text-muted-foreground",children:[d.jsx("strong",{children:d.jsx(Q,{text:"Communication:"})})," ",d.jsx(Q,{text:"We may send you notifications, updates, and support messages."})]}),d.jsxs("p",{className:"text-sm text-muted-foreground",children:[d.jsx("strong",{children:d.jsx(Q,{text:"Research and Development:"})})," ",d.jsx(Q,{text:"We use anonymized data to improve our AI algorithms and develop new features."})]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("h3",{className:"text-base font-semibold",children:d.jsx(Q,{text:"Data Security"})}),d.jsx("p",{className:"text-sm text-muted-foreground",children:d.jsx(Q,{text:"We implement appropriate technical and organizational measures to protect your personal information against unauthorized access, alteration, disclosure, or destruction. However, no method of transmission over the Internet or electronic storage is 100% secure, and we cannot guarantee absolute security."})})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("h3",{className:"text-base font-semibold",children:d.jsx(Q,{text:"Your Rights"})}),d.jsx("p",{className:"text-sm text-muted-foreground",children:d.jsx(Q,{text:"Depending on your location, you may have rights regarding your personal information, including:"})}),d.jsxs("ul",{className:"list-disc pl-5 text-sm text-muted-foreground space-y-1",children:[d.jsx("li",{children:d.jsx(Q,{text:"Access to your personal data"})}),d.jsx("li",{children:d.jsx(Q,{text:"Correction of inaccurate data"})}),d.jsx("li",{children:d.jsx(Q,{text:"Deletion of your data"})}),d.jsx("li",{children:d.jsx(Q,{text:"Restriction of processing"})}),d.jsx("li",{children:d.jsx(Q,{text:"Data portability"})}),d.jsx("li",{children:d.jsx(Q,{text:"Objection to processing"})})]}),d.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:d.jsx(Q,{text:"To exercise these rights, please contact us at support@soulo.online."})})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("h3",{className:"text-base font-semibold",children:d.jsx(Q,{text:"Contact Us"})}),d.jsx("p",{className:"text-sm text-muted-foreground",children:d.jsx(Q,{text:"If you have any questions or concerns about this Privacy Policy or our data practices, please contact us at:"})}),d.jsxs("p",{className:"text-sm text-muted-foreground",children:[d.jsx(Q,{text:"Email"}),": support@soulo.online",d.jsx("br",{}),d.jsx(Q,{text:"Address"}),": 123 Journal Street, San Francisco, CA 94105, USA"]})]})]})})]})}),d.jsx(Pp,{open:f,onOpenChange:we=>{we||me()},children:d.jsxs(Rf,{className:"max-w-md",children:[d.jsxs(jf,{children:[d.jsx(If,{children:d.jsx(Q,{text:"Notification Settings"})}),d.jsx(Oy,{children:d.jsx(Q,{text:"Choose when you want to receive journal reminders"})})]}),d.jsx("div",{className:"space-y-6 py-4",children:d.jsxs("div",{className:"space-y-4",children:[d.jsx("h3",{className:"font-medium text-sm",children:d.jsx(Q,{text:"Reminder Times"})}),d.jsx("div",{className:"grid grid-cols-2 gap-3",children:de.map(we=>d.jsxs("div",{className:He("border rounded-md px-3 py-2 flex items-center space-x-2 cursor-pointer",c.includes(we.value)?"border-primary bg-primary/10":"border-input"),onClick:()=>ae(we.value),children:[d.jsx(Fde,{checked:c.includes(we.value),onCheckedChange:()=>ae(we.value),id:`time-${we.value}`}),d.jsx(Rde,{htmlFor:`time-${we.value}`,className:"flex-1 cursor-pointer text-sm",children:d.jsx(Q,{text:we.label})})]},we.value))})]})}),d.jsxs("div",{className:"flex justify-end gap-3",children:[d.jsx(ct,{variant:"outline",onClick:me,children:d.jsx(Q,{text:"Cancel"})}),d.jsx(ct,{onClick:Se,disabled:c.length===0,children:d.jsx(Q,{text:"Save Settings"})})]})]})}),d.jsx(Pp,{open:$,onOpenChange:we=>{we||F(!1)},children:d.jsxs(Rf,{className:"max-w-md",children:[d.jsxs(jf,{children:[d.jsx(If,{children:d.jsx(Q,{text:"Custom Color"})}),d.jsx(Oy,{children:d.jsx(Q,{text:"Choose your own theme color"})})]}),d.jsx("div",{className:"py-4",children:d.jsx(ont,{value:J,onChange:K,applyImmediately:!0})}),d.jsxs("div",{className:"flex justify-end gap-3",children:[d.jsx(ct,{variant:"outline",onClick:()=>F(!1),children:d.jsx(Q,{text:"Cancel"})}),d.jsx(ct,{onClick:Ie,style:{backgroundColor:J},className:"text-white",children:d.jsx(Q,{text:"Apply Color"})})]})]})})]})})}function Dnt(){console.log("[Settings] Main Settings component rendering");const t=()=>{console.log("[Settings] Error boundary reset triggered"),window.location.reload()};return d.jsx(unt,{onReset:t,children:d.jsx(Lnt,{})})}function Fnt(){const t=_.useRef(null),e=_.useRef([]),n=_.useRef(),r=_.useRef(null),i=_.useRef(0),{theme:o,systemTheme:a}=Zr(),s=["#FFD700","#FFC125","#F1C232","#DAA520","#F7DC6F","#FFE082","#FEF7CD","#FFF4B2","#F97316","#FFBD17"],l=()=>s[Math.floor(Math.random()*s.length)],c=(h,p,y=15)=>{for(let g=0;g<y;g++){const v=Math.random()*Math.PI*2,b=.8+Math.random()*2.5;e.current.push({x:h,y:p,size:2+Math.random()*5,speedX:Math.cos(v)*b,speedY:Math.sin(v)*b,color:l(),opacity:.8,life:0,maxLife:50+Math.random()*100})}},u=(h,p=50)=>{const{width:y,height:g}=h;for(let v=0;v<p;v++)e.current.push({x:Math.random()*y,y:Math.random()*g,size:1.5+Math.random()*3,speedX:(Math.random()-.5)*.8,speedY:(Math.random()-.5)*.8,color:l(),opacity:.4+Math.random()*.4,life:0,maxLife:200+Math.random()*200})},f=(h,p)=>{h.clearRect(0,0,p.width,p.height);const y=Date.now();r.current&&y-i.current>40&&(c(r.current.x,r.current.y,6),i.current=y),e.current.length<120&&u(p,8);const g=[];e.current.forEach(v=>{if(v.life+=1,v.life<v.maxLife){const b=Math.min(1,v.life/20),w=Math.max(0,1-(v.life-v.maxLife*.7)/(v.maxLife*.3));v.opacity=.9*b*w,v.x+=v.speedX,v.y+=v.speedY,v.speedX*=.991,v.speedY*=.991,h.shadowBlur=6,h.shadowColor=v.color,h.globalAlpha=v.opacity*.6,h.fillStyle=v.color,h.beginPath(),h.arc(v.x,v.y,v.size+2,0,Math.PI*2),h.fill(),h.shadowBlur=0,h.globalAlpha=v.opacity,h.fillStyle=v.color,h.beginPath(),h.arc(v.x,v.y,v.size,0,Math.PI*2),h.fill(),g.push(v)}}),e.current=g,n.current=requestAnimationFrame(()=>f(h,p))};return _.useEffect(()=>{const h=t.current;if(!h)return;const p=h.getContext("2d");if(!p)return;const y=()=>{h.width=window.innerWidth,h.height=window.innerHeight};y(),window.addEventListener("resize",y),u(h,150);const g=T=>{r.current={x:T.clientX,y:T.clientY}},v=T=>{T.touches.length>0&&(r.current={x:T.touches[0].clientX,y:T.touches[0].clientY})},b=T=>{c(T.clientX,T.clientY,40)},w=T=>{T.touches.length>0&&c(T.touches[0].clientX,T.touches[0].clientY,40)};return window.addEventListener("mousemove",g),window.addEventListener("touchmove",v),window.addEventListener("click",b),window.addEventListener("touchstart",w),n.current=requestAnimationFrame(()=>f(p,h)),()=>{window.removeEventListener("resize",y),window.removeEventListener("mousemove",g),window.removeEventListener("touchmove",v),window.removeEventListener("click",b),window.removeEventListener("touchstart",w),n.current&&cancelAnimationFrame(n.current)}},[o,a]),d.jsx("canvas",{ref:t,className:"fixed inset-0 w-full h-full pointer-events-none",style:{zIndex:0}})}var eU="Popover",[zde,Oot]=sa(eU,[sh]),bS=sh(),[znt,yh]=zde(eU),Ude=t=>{const{__scopePopover:e,children:n,open:r,defaultOpen:i,onOpenChange:o,modal:a=!1}=t,s=bS(e),l=_.useRef(null),[c,u]=_.useState(!1),[f=!1,h]=wo({prop:r,defaultProp:i,onChange:o});return d.jsx(cA,{...s,children:d.jsx(znt,{scope:e,contentId:Xa(),triggerRef:l,open:f,onOpenChange:h,onOpenToggle:_.useCallback(()=>h(p=>!p),[h]),hasCustomAnchor:c,onCustomAnchorAdd:_.useCallback(()=>u(!0),[]),onCustomAnchorRemove:_.useCallback(()=>u(!1),[]),modal:a,children:n})})};Ude.displayName=eU;var Bde="PopoverAnchor",Unt=_.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=yh(Bde,n),o=bS(n),{onCustomAnchorAdd:a,onCustomAnchorRemove:s}=i;return _.useEffect(()=>(a(),()=>s()),[a,s]),d.jsx(C1,{...o,...r,ref:e})});Unt.displayName=Bde;var $de="PopoverTrigger",Hde=_.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=yh($de,n),o=bS(n),a=Kt(e,i.triggerRef),s=d.jsx(At.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":Yde(i.open),...r,ref:a,onClick:ut(t.onClick,i.onOpenToggle)});return i.hasCustomAnchor?s:d.jsx(C1,{asChild:!0,...o,children:s})});Hde.displayName=$de;var tU="PopoverPortal",[Bnt,$nt]=zde(tU,{forceMount:void 0}),Vde=t=>{const{__scopePopover:e,forceMount:n,children:r,container:i}=t,o=yh(tU,e);return d.jsx(Bnt,{scope:e,forceMount:n,children:d.jsx(oo,{present:n||o.open,children:d.jsx(m0,{asChild:!0,container:i,children:r})})})};Vde.displayName=tU;var o0="PopoverContent",Wde=_.forwardRef((t,e)=>{const n=$nt(o0,t.__scopePopover),{forceMount:r=n.forceMount,...i}=t,o=yh(o0,t.__scopePopover);return d.jsx(oo,{present:r||o.open,children:o.modal?d.jsx(Hnt,{...i,ref:e}):d.jsx(Vnt,{...i,ref:e})})});Wde.displayName=o0;var Hnt=_.forwardRef((t,e)=>{const n=yh(o0,t.__scopePopover),r=_.useRef(null),i=Kt(e,r),o=_.useRef(!1);return _.useEffect(()=>{const a=r.current;if(a)return hA(a)},[]),d.jsx(M1,{as:ud,allowPinchZoom:!0,children:d.jsx(Gde,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ut(t.onCloseAutoFocus,a=>{var s;a.preventDefault(),o.current||(s=n.triggerRef.current)==null||s.focus()}),onPointerDownOutside:ut(t.onPointerDownOutside,a=>{const s=a.detail.originalEvent,l=s.button===0&&s.ctrlKey===!0,c=s.button===2||l;o.current=c},{checkForDefaultPrevented:!1}),onFocusOutside:ut(t.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1})})})}),Vnt=_.forwardRef((t,e)=>{const n=yh(o0,t.__scopePopover),r=_.useRef(!1),i=_.useRef(!1);return d.jsx(Gde,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var a,s;(a=t.onCloseAutoFocus)==null||a.call(t,o),o.defaultPrevented||(r.current||(s=n.triggerRef.current)==null||s.focus(),o.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:o=>{var l,c;(l=t.onInteractOutside)==null||l.call(t,o),o.defaultPrevented||(r.current=!0,o.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const a=o.target;((c=n.triggerRef.current)==null?void 0:c.contains(a))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&i.current&&o.preventDefault()}})}),Gde=_.forwardRef((t,e)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEscapeKeyDown:s,onPointerDownOutside:l,onFocusOutside:c,onInteractOutside:u,...f}=t,h=yh(o0,n),p=bS(n);return iA(),d.jsx(_1,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:o,children:d.jsx(gm,{asChild:!0,disableOutsidePointerEvents:a,onInteractOutside:u,onEscapeKeyDown:s,onPointerDownOutside:l,onFocusOutside:c,onDismiss:()=>h.onOpenChange(!1),children:d.jsx(uA,{"data-state":Yde(h.open),role:"dialog",id:h.contentId,...p,...f,ref:e,style:{...f.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),qde="PopoverClose",Wnt=_.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=yh(qde,n);return d.jsx(At.button,{type:"button",...r,ref:e,onClick:ut(t.onClick,()=>i.onOpenChange(!1))})});Wnt.displayName=qde;var Gnt="PopoverArrow",qnt=_.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=bS(n);return d.jsx(dA,{...i,...r,ref:e})});qnt.displayName=Gnt;function Yde(t){return t?"open":"closed"}var Ynt=Ude,Xnt=Hde,Knt=Vde,Xde=Wde;const Jnt=Ynt,Znt=Xnt,Kde=_.forwardRef(({className:t,align:e="center",sideOffset:n=4,...r},i)=>d.jsx(Knt,{children:d.jsx(Xde,{ref:i,align:e,sideOffset:n,className:He("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","max-h-[85vh] overflow-y-auto","max-w-[90vw]",t),...r})}));Kde.displayName=Xde.displayName;const Qnt=({className:t})=>{const[e,n]=_.useState(!1),[r,i]=_.useState(pte()),[o,a]=_.useState("default");_.useEffect(()=>{"Notification"in window&&a(Notification.permission);const h=setInterval(()=>{"Notification"in window&&a(Notification.permission)},1e3);return()=>clearInterval(h)},[]);const s=async()=>{await dte()?(It.success(d.jsx(Q,{text:"Notification permission granted!",forceTranslate:!0})),a("granted")):It.error(d.jsx(Q,{text:"Notification permission denied",forceTranslate:!0}))},l=()=>{o==="granted"?(n2e(),It.success(d.jsx(Q,{text:"Test notification sent!",forceTranslate:!0}))):It.error(d.jsx(Q,{text:"Please grant notification permission first",forceTranslate:!0}))},c=()=>{switch(o){case"granted":return d.jsx(ec,{variant:"default",className:"bg-green-500",children:d.jsx(Q,{text:"Enabled"})});case"denied":return d.jsx(ec,{variant:"destructive",children:d.jsx(Q,{text:"Blocked"})});default:return d.jsx(ec,{variant:"secondary",children:d.jsx(Q,{text:"Not Set"})})}},u=()=>r.enabled&&o==="granted"?d.jsx(bJ,{className:"h-5 w-5"}):d.jsx(h0e,{className:"h-5 w-5"});return d.jsxs(Jnt,{open:e,onOpenChange:n,children:[d.jsx(Znt,{asChild:!0,children:d.jsxs(ct,{variant:"ghost",size:"sm",className:t,children:[u(),r.enabled&&o==="granted"&&d.jsx("div",{className:"absolute -top-1 -right-1 h-2 w-2 bg-green-500 rounded-full animate-pulse"})]})}),d.jsx(Kde,{className:"w-80",align:"end",children:d.jsxs(Jr,{className:"border-0 shadow-none",children:[d.jsx(w0,{className:"pb-3",children:d.jsxs(b0,{className:"flex items-center justify-between text-base",children:[d.jsx(Q,{text:"Notifications"}),d.jsx(ct,{variant:"ghost",size:"sm",onClick:()=>n(!1),children:d.jsx(cc,{className:"h-4 w-4"})})]})}),d.jsxs(au,{className:"space-y-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("span",{className:"text-sm font-medium",children:d.jsx(Q,{text:"Permission Status"})}),c()]}),o!=="granted"&&d.jsx(ct,{onClick:s,size:"sm",className:"w-full",variant:o==="denied"?"outline":"default",children:o==="denied"?d.jsx(Q,{text:"Enable in Browser Settings"}):d.jsx(Q,{text:"Grant Permission"})})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("span",{className:"text-sm font-medium",children:d.jsx(Q,{text:"Current Settings"})}),d.jsx("div",{className:"text-sm text-muted-foreground",children:r.enabled?d.jsxs(d.Fragment,{children:[d.jsx(Q,{text:"Enabled for:"})," ",r.times.join(", ")]}):d.jsx(Q,{text:"Disabled"})})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(ct,{onClick:l,size:"sm",variant:"outline",className:"w-full",disabled:o!=="granted",children:d.jsx(Q,{text:"Test Notification"})}),d.jsxs(ct,{onClick:()=>{n(!1),window.location.pathname!=="/app/settings"&&(window.location.href="/app/settings")},size:"sm",variant:"outline",className:"w-full",children:[d.jsx(U3,{className:"h-4 w-4 mr-2"}),d.jsx(Q,{text:"Notification Settings"})]})]}),o==="denied"&&d.jsx("div",{className:"p-3 bg-muted rounded-lg",children:d.jsx("p",{className:"text-xs text-muted-foreground",children:d.jsx(Q,{text:"To enable notifications, click the lock icon in your browser's address bar and allow notifications for this site."})})})]})]})})]})},nU=()=>{const{user:t}=or(),e=Za(),n=Wi();return!n.pathname.startsWith("/app")||!t?null:d.jsx("nav",{className:"fixed top-0 left-0 right-0 z-50 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 border-b",children:d.jsxs("div",{className:"flex items-center justify-between px-4 py-3 max-w-7xl mx-auto",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(Yc,{size:"small",useColorTheme:!0}),d.jsx("span",{className:"text-lg font-semibold text-theme-color",children:d.jsx(Q,{text:"SOuLO"})})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(Qnt,{}),d.jsx(ct,{variant:"ghost",size:"sm",onClick:()=>e("/app/settings"),className:He("text-muted-foreground hover:text-foreground",n.pathname==="/app/settings"&&"text-theme-color"),children:d.jsx(U3,{className:"h-5 w-5"})}),d.jsx(ct,{variant:"ghost",size:"sm",className:"text-muted-foreground hover:text-foreground",children:d.jsx(fv,{className:"h-5 w-5"})})]})]})})},ert=()=>d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("path",{d:"M12 20.94c1.5 0 2.75-.67 3.95-1.34 1.24-.67 2.23-1.76 2.73-3.02.32-.85.47-1.76.47-2.75 0-1.27-.47-2.44-1.28-3.32-.97-1.08-2.34-1.69-3.72-1.69-.53 0-1.13.15-1.76.44-.53.25-.97.49-1.32.73-.34-.23-.79-.48-1.32-.73-.62-.3-1.23-.45-1.77-.45-1.38 0-2.76.6-3.72 1.69-.82.88-1.29 2.05-1.29 3.32 0 .99.15 1.9.47 2.75.5 1.26 1.49 2.35 2.73 3.02 1.2.67 2.45 1.34 3.95 1.34z"}),d.jsx("path",{d:"M12 8.62c.16-.59.3-1.21.47-1.84.34-1.26 1.87-2.1 2.8-2.36 0 0-.74 2.72-2.3 2.72-1.13 0-1.28.88-.97 1.48z"}),d.jsx("path",{d:"M12 8.62c-.16-.59-.3-1.21-.47-1.84-.34-1.26-1.87-2.1-2.8-2.36 0 0 .74 2.72 2.3 2.72 1.13 0 1.28.88.97 1.48z"})]}),trt=()=>d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("path",{d:"M7.5 4.27c-.93.93-1.5 2.2-1.5 3.6v8.26c0 1.4.58 2.68 1.5 3.6"}),d.jsx("path",{d:"M16.5 4.27c.93.93 1.5 2.2 1.5 3.6v8.26c0 1.4-.58 2.68-1.5 3.6"}),d.jsx("path",{d:"M4 10.07h3"}),d.jsx("path",{d:"M17 10.07h3"}),d.jsx("path",{d:"M12 19.93v3.5"}),d.jsx("path",{d:"M12 6.57v-5"}),d.jsx("rect",{x:"7",y:"6.57",width:"10",height:"13.36",rx:"3"})]}),nrt=()=>{const t={hidden:{opacity:0},visible:{opacity:1,transition:{delayChildren:.3,staggerChildren:.2}}},e={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{duration:.5}}},n={pulse:{scale:[1,1.05,1],transition:{duration:2,repeat:1/0}}};return d.jsxs("div",{className:"flex flex-col min-h-screen bg-background",children:[d.jsx(Fnt,{}),d.jsx(nU,{}),d.jsxs(Ke.main,{className:"flex-1 container mx-auto px-4 py-12 relative z-10",initial:"hidden",animate:"visible",variants:t,children:[d.jsxs(Ke.div,{className:"text-center mb-12",variants:e,children:[d.jsxs("h1",{className:"text-4xl md:text-5xl font-bold mb-6 flex items-center justify-center",children:[d.jsx("span",{className:"text-foreground dark:text-white",children:"Download"}),d.jsx(Yc,{className:"ml-2",useColorTheme:!0,animate:!0})]}),d.jsx("p",{className:"text-xl max-w-2xl mx-auto text-primary mb-8",children:"SOULo is available exclusively as a mobile app for iOS and Android"}),d.jsx(Ke.div,{variants:n,animate:"pulse",className:"max-w-md mx-auto mb-12",children:d.jsx(Jr,{className:"border-primary/30 shadow-lg",children:d.jsxs(au,{className:"p-6",children:[d.jsx("p",{className:"mb-4 text-muted-foreground",children:"Our app provides the best experience on your mobile device, with features like:"}),d.jsxs("ul",{className:"text-left space-y-2 mb-6",children:[d.jsxs("li",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-primary",children:""})," Voice recording for easier journaling"]}),d.jsxs("li",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-primary",children:""})," Offline mode for journaling anywhere"]}),d.jsxs("li",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-primary",children:""})," Push notifications for journaling reminders"]}),d.jsxs("li",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-primary",children:""})," Enhanced privacy and security"]})]})]})})})]}),d.jsxs(Ke.div,{className:"flex flex-col md:flex-row gap-6 justify-center items-center max-w-xl mx-auto",variants:t,children:[d.jsx(Ke.div,{variants:e,className:"w-full md:w-1/2",children:d.jsxs(ct,{variant:"outline",size:"lg",className:"w-full h-16 text-lg border-2 hover:bg-primary/10",onClick:()=>window.open("https://apps.apple.com/app/soulo-journal","_blank"),children:[d.jsx(ert,{}),d.jsxs("div",{className:"flex flex-col items-start ml-2 text-left",children:[d.jsx("span",{className:"text-xs",children:"Download on the"}),d.jsx("span",{className:"font-semibold",children:"App Store"})]})]})}),d.jsx(Ke.div,{variants:e,className:"w-full md:w-1/2",children:d.jsxs(ct,{variant:"outline",size:"lg",className:"w-full h-16 text-lg border-2 hover:bg-primary/10",onClick:()=>window.open("https://play.google.com/store/apps/details?id=app.soulo.journal","_blank"),children:[d.jsx(trt,{}),d.jsxs("div",{className:"flex flex-col items-start ml-2 text-left",children:[d.jsx("span",{className:"text-xs",children:"Get it on"}),d.jsx("span",{className:"font-semibold",children:"Google Play"})]})]})})]}),d.jsxs(Ke.div,{className:"text-center mt-12",variants:e,children:[d.jsxs("p",{className:"text-muted-foreground",children:["By downloading, you agree to our ",d.jsx(li,{to:"/privacy-policy",className:"text-primary underline",children:"Privacy Policy"})]}),d.jsxs("div",{className:"mt-12",children:[d.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Questions or feedback?"}),d.jsxs("p",{className:"text-muted-foreground",children:["Contact us at ",d.jsx("a",{href:"mailto:support@soulo.online",className:"text-primary underline",children:"support@soulo.online"})]})]})]})]})]})},rrt=({isAppSubdomain:t}={})=>{const e=Wi(),n=nc(e.pathname);_.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname,{isAppPath:n})},[e.pathname,n]);const r=n?"/app/home":"/",i=n?"App Home":"Home";return d.jsxs("div",{className:"min-h-screen",children:[d.jsx(nU,{}),d.jsx("div",{className:"flex items-center justify-center min-h-screen",children:d.jsxs("div",{className:"text-center max-w-md px-4",children:[d.jsx("div",{className:"mb-6 flex justify-center",children:d.jsx("div",{className:"h-24 w-24 rounded-full bg-primary/10 flex items-center justify-center text-primary",children:d.jsx("span",{className:"text-5xl font-light",children:"404"})})}),d.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Page not found"}),d.jsx("p",{className:"text-muted-foreground mb-8",children:"The page you're looking for doesn't exist or has been moved."}),d.jsx(ct,{asChild:!0,size:"lg",className:"rounded-full",children:d.jsxs(li,{to:r,children:[d.jsx(L3,{className:"mr-2 h-4 w-4"}),"Back to ",i]})}),n&&d.jsx("div",{className:"mt-4 text-sm text-muted-foreground",children:d.jsxs("p",{children:["Looking for the main website? Visit ",d.jsx(li,{to:"/",className:"text-primary hover:underline",children:"soulo.online"})]})}),!n&&d.jsx("div",{className:"mt-4 text-sm text-muted-foreground",children:d.jsxs("p",{children:["Looking for the app? Visit ",d.jsx(li,{to:"/app",className:"text-primary hover:underline",children:"soulo.online/app"})]})})]})})]})},irt=({onboardingComplete:t})=>{const e=Wi(),n=ui(),[r,i]=_.useState(!1),[o,a]=_.useState(!1),{isActive:s}=ka(),{user:l}=or(),{currentLanguage:c}=In(),{hasActiveSubscription:u,isTrialActive:f}=H1(),[h,p]=_.useState(0);if(_.useEffect(()=>{const b=()=>{console.log("MobileNavigation: Language change detected, forcing re-render"),p(w=>w+1)};return window.addEventListener("languageChange",b),()=>window.removeEventListener("languageChange",b)},[]),_.useEffect(()=>{const b=()=>{if(window.visualViewport){const C=window.visualViewport.height<window.innerHeight*.75;a(C)}};b(),window.visualViewport&&(window.visualViewport.addEventListener("resize",b),window.addEventListener("resize",b));const w=()=>a(!0),T=()=>a(!1);return window.addEventListener("keyboardOpen",w),window.addEventListener("keyboardClose",T),()=>{window.visualViewport&&(window.visualViewport.removeEventListener("resize",b),window.removeEventListener("resize",b)),window.removeEventListener("keyboardOpen",w),window.removeEventListener("keyboardClose",T)}},[]),_.useEffect(()=>{const w=["/app/onboarding","/app/auth","/onboarding","/auth","/"].includes(e.pathname),T=(n||IB())&&!o&&!w&&!!l&&t!==!1;console.log("MobileNavigation visibility check:",{shouldShowNav:T,isMobile:n,isNativeApp:IB(),path:e.pathname,isKeyboardVisible:o,isOnboardingOrAuth:w,hasUser:!!l,onboardingComplete:t,isTutorialActive:s,currentLanguage:c,renderKey:h}),i(T)},[e.pathname,n,o,s,l,t,c,h]),!r)return null;if(t===!1)return console.log("MobileNavigation: Not rendering due to onboarding status"),null;const y=[{path:"/app/home",icon:TJ,label:"Home",isPremium:!1},{path:"/app/journal",icon:m0e,label:"Journal",isPremium:!1},{path:"/app/smart-chat",icon:k0e,label:"Chat",isPremium:!0},{path:"/app/insights",icon:SJ,label:"Insights",isPremium:!0},{path:"/app/settings",icon:U3,label:"Settings",isPremium:!1}],g=b=>e.pathname.startsWith(b),v=u||f;return console.log("MobileNavigation: Rendering with language:",c,"renderKey:",h),d.jsx(Ke.div,{className:He("fixed bottom-0 left-0 right-0 bg-background border-t border-muted",s&&"opacity-30 pointer-events-none"),style:{zIndex:9998,paddingTop:"0.40rem",paddingBottom:"max(0.40rem, env(safe-area-inset-bottom))",height:"calc(3.6rem + env(safe-area-inset-bottom))"},initial:{y:100},animate:{y:0},transition:{duration:.3},children:d.jsx("div",{className:"flex justify-around items-center",children:y.map(b=>{const w=g(b.path),T=b.isPremium&&!v;return console.log(`MobileNavigation: Rendering nav item "${b.label}" for path ${b.path} with language ${c}`),d.jsxs(li,{to:b.path,className:He("flex flex-col items-center py-1 transition-colors relative",w?"text-primary":T?"text-muted-foreground/50":"text-muted-foreground hover:text-primary"),children:[d.jsxs("div",{className:"relative",children:[d.jsx(b.icon,{size:22}),T&&d.jsx(rc,{size:12,className:"absolute -top-1 -right-1 text-orange-500 bg-background rounded-full p-0.5"}),w&&d.jsx(Ke.div,{layoutId:"mobileNavIndicator",className:"absolute -bottom-1 left-1/2 transform -translate-x-1/2 w-1 h-1 bg-primary rounded-full",transition:{type:"spring",bounce:.3}})]}),d.jsx("span",{className:He("text-xs mt-0.5 min-w-0 max-w-full",T&&"opacity-60"),children:d.jsx(Q,{text:b.label,forceTranslate:!0,enableFontScaling:!0,scalingContext:"mobile-nav",className:"block",onTranslationStart:()=>console.log(`MobileNavigation: Translation started for "${b.label}" to ${c}`),onTranslationEnd:()=>console.log(`MobileNavigation: Translation completed for "${b.label}" to ${c}`)},`${b.label}-${h}-${c}`)})]},`${b.path}-${h}`)})})},`nav-${h}-${c}`)},ort=()=>{const t=Wi(),{user:e}=or(),n=ui(),{onboardingComplete:r}=KC(),o=["/app/onboarding","/app/auth","/onboarding","/auth","/"].includes(t.pathname),a=t.pathname==="/app/home";return console.log("ViewportManager - Path:",t.pathname,{isAppRoute:nc(t.pathname),isWebsiteRoute:ib(t.pathname),isHomePage:a,user:!!e,isOnboardingOrAuth:o,onboardingComplete:r,hideNavigation:o||!e||t.pathname==="/app"&&!r}),_.useEffect(()=>((ib(t.pathname)||nc(t.pathname)&&!a)&&(console.log("ViewportManager: Non-home route detected, ensuring scrolling is enabled"),Gee()),a&&(console.log("ViewportManager: Home page detected, disabling scrolling"),document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.width="100%",document.body.style.height="100%",document.body.style.top="0",document.body.style.left="0"),()=>{a&&(document.body.style.overflow="",document.body.style.position="",document.body.style.width="",document.body.style.height="",document.body.style.top="",document.body.style.left="")}),[t.pathname,a]),d.jsxs(d.Fragment,{children:[d.jsx("div",{className:`app-container ${n?"mobile-view":"desktop-view"} ${a?"overflow-hidden":"overflow-x-hidden"}`,children:d.jsx(DK,{})}),nc(t.pathname)&&e&&!o&&r&&d.jsx(irt,{onboardingComplete:r})]})},art=()=>d.jsxs("div",{className:"min-h-screen bg-background",children:[d.jsx(nU,{}),d.jsx("section",{className:"pt-24 md:pt-32 pb-16",children:d.jsxs("div",{className:"container mx-auto max-w-4xl px-4",children:[d.jsx(ct,{variant:"ghost",asChild:!0,className:"pl-0 mb-6",children:d.jsxs(li,{to:"/",className:"flex items-center gap-2",children:[d.jsx(L3,{className:"h-4 w-4"}),d.jsx(Q,{text:"Back to Home",forceTranslate:!0})]})}),d.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-8",children:d.jsx(Q,{text:"Privacy Policy",forceTranslate:!0})}),d.jsxs("div",{className:"prose prose-lg dark:prose-invert max-w-none",children:[d.jsx("p",{className:"lead",children:d.jsx(Q,{text:"Last Updated: April 10, 2024",forceTranslate:!0})}),d.jsx("p",{children:d.jsx(Q,{text:"SOULo ('we', 'our', or 'us') is committed to protecting your privacy. This Privacy Policy explains how we collect, use, disclose, and safeguard your information when you use our SOULo application and related services (collectively, the 'Service').",forceTranslate:!0})}),d.jsx("h2",{children:d.jsx(Q,{text:"Data Collection",forceTranslate:!0})}),d.jsx("h3",{children:d.jsx(Q,{text:"Personal Data",forceTranslate:!0})}),d.jsx("p",{children:d.jsx(Q,{text:"When you register for an account, we collect your email address, name, and authentication information.",forceTranslate:!0})}),d.jsxs("ul",{children:[d.jsx("li",{children:d.jsx(Q,{text:"Account information including email and name",forceTranslate:!0})}),d.jsx("li",{children:d.jsx(Q,{text:"Profile information you provide",forceTranslate:!0})}),d.jsx("li",{children:d.jsx(Q,{text:"Authentication data",forceTranslate:!0})})]}),d.jsx("h3",{children:d.jsx(Q,{text:"Voice Recordings",forceTranslate:!0})}),d.jsx("p",{children:d.jsx(Q,{text:"We collect and store voice recordings that you create when using our service.",forceTranslate:!0})}),d.jsxs("ul",{children:[d.jsx("li",{children:d.jsx(Q,{text:"Audio files you record",forceTranslate:!0})}),d.jsx("li",{children:d.jsx(Q,{text:"Transcriptions of your recordings",forceTranslate:!0})}),d.jsx("li",{children:d.jsx(Q,{text:"Analysis derived from your recordings",forceTranslate:!0})})]}),d.jsx("h3",{children:d.jsx(Q,{text:"Usage Data",forceTranslate:!0})}),d.jsx("p",{children:d.jsx(Q,{text:"We collect information about how you interact with our Service.",forceTranslate:!0})}),d.jsxs("ul",{children:[d.jsx("li",{children:d.jsx(Q,{text:"Features you use and time spent",forceTranslate:!0})}),d.jsx("li",{children:d.jsx(Q,{text:"Interaction patterns",forceTranslate:!0})}),d.jsx("li",{children:d.jsx(Q,{text:"Device information",forceTranslate:!0})}),d.jsx("li",{children:d.jsx(Q,{text:"IP address and browser type",forceTranslate:!0})})]}),d.jsx("h2",{children:d.jsx(Q,{text:"How We Use Your Information",forceTranslate:!0})}),d.jsx("p",{children:d.jsx(Q,{text:"We use your information for the following purposes:",forceTranslate:!0})}),d.jsxs("ul",{children:[d.jsx("li",{children:d.jsx(Q,{text:"To provide and maintain our Service",forceTranslate:!0})}),d.jsx("li",{children:d.jsx(Q,{text:"To personalize your experience",forceTranslate:!0})}),d.jsx("li",{children:d.jsx(Q,{text:"To communicate with you about your account",forceTranslate:!0})}),d.jsx("li",{children:d.jsx(Q,{text:"To improve our Service",forceTranslate:!0})}),d.jsx("li",{children:d.jsx(Q,{text:"To analyze usage patterns",forceTranslate:!0})}),d.jsx("li",{children:d.jsx(Q,{text:"To process transactions",forceTranslate:!0})})]}),d.jsx("h2",{children:d.jsx(Q,{text:"Journal Privacy",forceTranslate:!0})}),d.jsxs("p",{children:[d.jsx("strong",{children:d.jsx(Q,{text:"Your journal entries are private",forceTranslate:!0})}),d.jsx(Q,{text:" and we take extensive measures to protect them.",forceTranslate:!0})]}),d.jsxs("ul",{children:[d.jsx("li",{children:d.jsx(Q,{text:"Entries are encrypted in transit and at rest",forceTranslate:!0})}),d.jsx("li",{children:d.jsx(Q,{text:"Only you can access your journal content",forceTranslate:!0})}),d.jsx("li",{children:d.jsx(Q,{text:"We do not share your journal entries with third parties",forceTranslate:!0})}),d.jsx("li",{children:d.jsx(Q,{text:"AI processing is done securely",forceTranslate:!0})})]}),d.jsx("h2",{children:d.jsx(Q,{text:"Security",forceTranslate:!0})}),d.jsx("p",{children:d.jsx(Q,{text:"We implement appropriate security measures to protect your personal information.",forceTranslate:!0})}),d.jsxs("ul",{children:[d.jsx("li",{children:d.jsx(Q,{text:"Encryption of sensitive data",forceTranslate:!0})}),d.jsx("li",{children:d.jsx(Q,{text:"Regular security assessments",forceTranslate:!0})}),d.jsx("li",{children:d.jsx(Q,{text:"Access controls and authentication",forceTranslate:!0})}),d.jsx("li",{children:d.jsx(Q,{text:"Secure infrastructure",forceTranslate:!0})})]}),d.jsx("p",{children:d.jsx(Q,{text:"No method of transmission over the Internet or electronic storage is 100% secure.",forceTranslate:!0})}),d.jsx("h2",{children:d.jsx(Q,{text:"Data Retention",forceTranslate:!0})}),d.jsx("p",{children:d.jsx(Q,{text:"We retain your personal information for as long as necessary to provide you with our services and as required by law.",forceTranslate:!0})}),d.jsx("h2",{children:d.jsx(Q,{text:"Your Rights",forceTranslate:!0})}),d.jsx("p",{children:d.jsx(Q,{text:"Depending on your location, you may have certain rights regarding your personal information:",forceTranslate:!0})}),d.jsxs("ul",{children:[d.jsx("li",{children:d.jsx(Q,{text:"Right to access your data",forceTranslate:!0})}),d.jsx("li",{children:d.jsx(Q,{text:"Right to correct inaccurate data",forceTranslate:!0})}),d.jsx("li",{children:d.jsx(Q,{text:"Right to delete your data",forceTranslate:!0})}),d.jsx("li",{children:d.jsx(Q,{text:"Right to restrict processing",forceTranslate:!0})}),d.jsx("li",{children:d.jsx(Q,{text:"Right to data portability",forceTranslate:!0})}),d.jsx("li",{children:d.jsx(Q,{text:"Right to object to processing",forceTranslate:!0})})]}),d.jsx("p",{children:d.jsx(Q,{text:"To exercise these rights, please contact us using the information below.",forceTranslate:!0})}),d.jsx("h2",{children:d.jsx(Q,{text:"Children's Privacy",forceTranslate:!0})}),d.jsx("p",{children:d.jsx(Q,{text:"Our Service is not intended for children under 13 years of age.",forceTranslate:!0})}),d.jsx("h2",{children:d.jsx(Q,{text:"Changes to Privacy Policy",forceTranslate:!0})}),d.jsx("p",{children:d.jsx(Q,{text:"We may update our Privacy Policy from time to time. We will notify you of any changes by posting the new Privacy Policy on this page.",forceTranslate:!0})}),d.jsx("h2",{children:d.jsx(Q,{text:"Contact Us",forceTranslate:!0})}),d.jsx("p",{children:d.jsx(Q,{text:"If you have any questions about this Privacy Policy, please contact us:",forceTranslate:!0})}),d.jsx("p",{children:d.jsx("a",{href:"mailto:hello@soulo.online",children:"hello@soulo.online"})})]})]})}),d.jsx(pv,{})]});var rU="Collapsible",[srt,Jde]=sa(rU),[lrt,iU]=srt(rU),Zde=_.forwardRef((t,e)=>{const{__scopeCollapsible:n,open:r,defaultOpen:i,disabled:o,onOpenChange:a,...s}=t,[l=!1,c]=wo({prop:r,defaultProp:i,onChange:a});return d.jsx(lrt,{scope:n,disabled:o,contentId:Xa(),open:l,onOpenToggle:_.useCallback(()=>c(u=>!u),[c]),children:d.jsx(At.div,{"data-state":aU(l),"data-disabled":o?"":void 0,...s,ref:e})})});Zde.displayName=rU;var Qde="CollapsibleTrigger",efe=_.forwardRef((t,e)=>{const{__scopeCollapsible:n,...r}=t,i=iU(Qde,n);return d.jsx(At.button,{type:"button","aria-controls":i.contentId,"aria-expanded":i.open||!1,"data-state":aU(i.open),"data-disabled":i.disabled?"":void 0,disabled:i.disabled,...r,ref:e,onClick:ut(t.onClick,i.onOpenToggle)})});efe.displayName=Qde;var oU="CollapsibleContent",tfe=_.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=iU(oU,t.__scopeCollapsible);return d.jsx(oo,{present:n||i.open,children:({present:o})=>d.jsx(crt,{...r,ref:e,present:o})})});tfe.displayName=oU;var crt=_.forwardRef((t,e)=>{const{__scopeCollapsible:n,present:r,children:i,...o}=t,a=iU(oU,n),[s,l]=_.useState(r),c=_.useRef(null),u=Kt(e,c),f=_.useRef(0),h=f.current,p=_.useRef(0),y=p.current,g=a.open||s,v=_.useRef(g),b=_.useRef();return _.useEffect(()=>{const w=requestAnimationFrame(()=>v.current=!1);return()=>cancelAnimationFrame(w)},[]),$i(()=>{const w=c.current;if(w){b.current=b.current||{transitionDuration:w.style.transitionDuration,animationName:w.style.animationName},w.style.transitionDuration="0s",w.style.animationName="none";const T=w.getBoundingClientRect();f.current=T.height,p.current=T.width,v.current||(w.style.transitionDuration=b.current.transitionDuration,w.style.animationName=b.current.animationName),l(r)}},[a.open,r]),d.jsx(At.div,{"data-state":aU(a.open),"data-disabled":a.disabled?"":void 0,id:a.contentId,hidden:!g,...o,ref:u,style:{"--radix-collapsible-content-height":h?`${h}px`:void 0,"--radix-collapsible-content-width":y?`${y}px`:void 0,...t.style},children:g&&i})});function aU(t){return t?"open":"closed"}var urt=Zde,drt=efe,frt=tfe,Pd="Accordion",hrt=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[sU,prt,mrt]=f0(Pd),[F2,Lot]=sa(Pd,[mrt,Jde]),lU=Jde(),nfe=ve.forwardRef((t,e)=>{const{type:n,...r}=t,i=r,o=r;return d.jsx(sU.Provider,{scope:t.__scopeAccordion,children:n==="multiple"?d.jsx(xrt,{...o,ref:e}):d.jsx(vrt,{...i,ref:e})})});nfe.displayName=Pd;var[rfe,grt]=F2(Pd),[ife,yrt]=F2(Pd,{collapsible:!1}),vrt=ve.forwardRef((t,e)=>{const{value:n,defaultValue:r,onValueChange:i=()=>{},collapsible:o=!1,...a}=t,[s,l]=wo({prop:n,defaultProp:r,onChange:i});return d.jsx(rfe,{scope:t.__scopeAccordion,value:s?[s]:[],onItemOpen:l,onItemClose:ve.useCallback(()=>o&&l(""),[o,l]),children:d.jsx(ife,{scope:t.__scopeAccordion,collapsible:o,children:d.jsx(ofe,{...a,ref:e})})})}),xrt=ve.forwardRef((t,e)=>{const{value:n,defaultValue:r,onValueChange:i=()=>{},...o}=t,[a=[],s]=wo({prop:n,defaultProp:r,onChange:i}),l=ve.useCallback(u=>s((f=[])=>[...f,u]),[s]),c=ve.useCallback(u=>s((f=[])=>f.filter(h=>h!==u)),[s]);return d.jsx(rfe,{scope:t.__scopeAccordion,value:a,onItemOpen:l,onItemClose:c,children:d.jsx(ife,{scope:t.__scopeAccordion,collapsible:!0,children:d.jsx(ofe,{...o,ref:e})})})}),[wrt,z2]=F2(Pd),ofe=ve.forwardRef((t,e)=>{const{__scopeAccordion:n,disabled:r,dir:i,orientation:o="vertical",...a}=t,s=ve.useRef(null),l=Kt(s,e),c=prt(n),f=ah(i)==="ltr",h=ut(t.onKeyDown,p=>{var I;if(!hrt.includes(p.key))return;const y=p.target,g=c().filter(U=>{var z;return!((z=U.ref.current)!=null&&z.disabled)}),v=g.findIndex(U=>U.ref.current===y),b=g.length;if(v===-1)return;p.preventDefault();let w=v;const T=0,C=b-1,P=()=>{w=v+1,w>C&&(w=T)},M=()=>{w=v-1,w<T&&(w=C)};switch(p.key){case"Home":w=T;break;case"End":w=C;break;case"ArrowRight":o==="horizontal"&&(f?P():M());break;case"ArrowDown":o==="vertical"&&P();break;case"ArrowLeft":o==="horizontal"&&(f?M():P());break;case"ArrowUp":o==="vertical"&&M();break}const k=w%b;(I=g[k].ref.current)==null||I.focus()});return d.jsx(wrt,{scope:n,disabled:r,direction:i,orientation:o,children:d.jsx(sU.Slot,{scope:n,children:d.jsx(At.div,{...a,"data-orientation":o,ref:l,onKeyDown:r?void 0:h})})})}),VC="AccordionItem",[brt,cU]=F2(VC),afe=ve.forwardRef((t,e)=>{const{__scopeAccordion:n,value:r,...i}=t,o=z2(VC,n),a=grt(VC,n),s=lU(n),l=Xa(),c=r&&a.value.includes(r)||!1,u=o.disabled||t.disabled;return d.jsx(brt,{scope:n,open:c,disabled:u,triggerId:l,children:d.jsx(urt,{"data-orientation":o.orientation,"data-state":ffe(c),...s,...i,ref:e,disabled:u,open:c,onOpenChange:f=>{f?a.onItemOpen(r):a.onItemClose(r)}})})});afe.displayName=VC;var sfe="AccordionHeader",lfe=ve.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,i=z2(Pd,n),o=cU(sfe,n);return d.jsx(At.h3,{"data-orientation":i.orientation,"data-state":ffe(o.open),"data-disabled":o.disabled?"":void 0,...r,ref:e})});lfe.displayName=sfe;var s3="AccordionTrigger",cfe=ve.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,i=z2(Pd,n),o=cU(s3,n),a=yrt(s3,n),s=lU(n);return d.jsx(sU.ItemSlot,{scope:n,children:d.jsx(drt,{"aria-disabled":o.open&&!a.collapsible||void 0,"data-orientation":i.orientation,id:o.triggerId,...s,...r,ref:e})})});cfe.displayName=s3;var ufe="AccordionContent",dfe=ve.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,i=z2(Pd,n),o=cU(ufe,n),a=lU(n);return d.jsx(frt,{role:"region","aria-labelledby":o.triggerId,"data-orientation":i.orientation,...a,...r,ref:e,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...t.style}})});dfe.displayName=ufe;function ffe(t){return t?"open":"closed"}var Srt=nfe,Ert=afe,_rt=lfe,hfe=cfe,pfe=dfe;const Trt=Srt,mfe=_.forwardRef(({className:t,...e},n)=>d.jsx(Ert,{ref:n,className:He("border-b",t),...e}));mfe.displayName="AccordionItem";const gfe=_.forwardRef(({className:t,children:e,...n},r)=>d.jsx(_rt,{className:"flex",children:d.jsxs(hfe,{ref:r,className:He("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",t),...n,children:[e,d.jsx(b1,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));gfe.displayName=hfe.displayName;const yfe=_.forwardRef(({className:t,children:e,...n},r)=>d.jsx(pfe,{ref:r,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...n,children:d.jsx("div",{className:He("pb-4 pt-0",t),children:e})}));yfe.displayName=pfe.displayName;const Crt=[{question:"What is SOULo?",answer:"SOULo is a voice journaling app that helps you record your thoughts, reflect on your emotions, and gain insights through AI analysis. Simply speak your thoughts, and SOULo will transcribe, analyze, and help you track your emotional patterns over time."},{question:"How does voice journaling work?",answer:"With SOULo, you simply tap the record button and start speaking your thoughts. The app will transcribe your voice into text, analyze the emotions and themes in your entry, and save it to your journal. You can review your entries anytime and get insights about your emotional patterns."},{question:"Is my data private and secure?",answer:"Yes, we take privacy extremely seriously. Your journal entries are stored locally on your device with end-to-end encryption. We never share your data with third parties, and our AI processing is designed with privacy at its core. You have complete control over your data at all times."},{question:"Can I use SOULo without an internet connection?",answer:"You can record entries offline, but transcription and AI analysis require an internet connection. Once processed, your entries are accessible offline for viewing and reflection."},{question:"What platforms is SOULo available on?",answer:"SOULo is available for both iOS (iPhone and iPad) and Android devices. You can download it from the App Store or Google Play Store."},{question:"Is there a cost to use SOULo?",answer:"SOULo offers both free and premium plans. The free plan includes basic voice journaling features, while the premium subscription provides additional features like advanced AI insights, unlimited entries, and deeper emotional analytics."},{question:"How accurate is the voice transcription?",answer:"SOULo uses advanced speech recognition technology that works well across different accents and speaking styles. While no transcription system is perfect, SOULo's technology is highly accurate and continuously improving."},{question:"Can I edit my journal entries after recording?",answer:"Yes, you can edit the transcribed text of your journal entries to correct any transcription errors or add additional thoughts."}],Art=()=>d.jsxs("div",{className:"min-h-screen bg-white",children:[d.jsx(Yy,{}),d.jsx("section",{className:"pt-32 pb-16",children:d.jsxs("div",{className:"container mx-auto px-4",children:[d.jsxs(Ke.div,{className:"text-center mb-12",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[d.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:"Frequently Asked Questions"}),d.jsx("p",{className:"text-muted-foreground text-lg max-w-2xl mx-auto",children:"Find answers to the most common questions about SOULo and voice journaling."})]}),d.jsx("div",{className:"max-w-3xl mx-auto",children:d.jsx(Trt,{type:"single",collapsible:!0,className:"w-full",children:Crt.map((t,e)=>d.jsx(Ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:e*.1},children:d.jsxs(mfe,{value:`item-${e}`,className:"border-b border-gray-200",children:[d.jsx(gfe,{className:"text-lg font-medium py-4 hover:text-primary transition-colors",children:t.question}),d.jsx(yfe,{className:"text-muted-foreground",children:t.answer})]})},e))})}),d.jsxs("div",{className:"mt-16 text-center",children:[d.jsx("p",{className:"text-muted-foreground mb-4",children:"Still have questions? We're here to help!"}),d.jsxs("p",{className:"text-lg",children:["Contact us at ",d.jsx("a",{href:"mailto:support@soulo.online",className:"text-primary hover:underline",children:"support@soulo.online"})]})]})]})}),d.jsx(pv,{})]}),l3=[{id:1,slug:"benefits-of-voice-journaling",title:"The Power of Your Voice: Benefits of Voice Journaling",subtitle:"Discover how voice journaling can transform your self-reflection practice",excerpt:"Voice journaling offers a more natural and efficient way to document your thoughts compared to traditional written methods, helping you capture authentic emotions and insights effortlessly.",content:`<p>In today's fast-paced world, finding time for self-reflection is increasingly challenging. Traditional journaling requires sitting down with pen and paper or typing on a keyboard, which can feel like yet another task on your to-do list. This is where voice journaling comes in as a revolutionary alternative.</p>
    
    <h2>What is Voice Journaling?</h2>
    <p>Voice journaling is exactly what it sounds like: recording your thoughts, feelings, and experiences using your voice rather than writing them down. With the advancement of speech-to-text technology, these voice notes can be automatically transcribed and analyzed, giving you insights that might otherwise remain hidden.</p>
    
    <h2>Natural Expression of Thoughts and Emotions</h2>
    <p>When we speak, we tend to be more spontaneous and authentic than when we write. The tone, pace, and inflection of our voice convey emotional nuances that written words often can't capture. This makes voice journaling particularly effective for emotional processing and self-discovery.</p>
    
    <p>Research has shown that our speaking voice connects more directly to our emotional brain than writing does. This means that voice journaling can help you access and process feelings more effectively, leading to greater emotional intelligence and self-awareness.</p>
    
    <h2>Convenience and Accessibility</h2>
    <p>One of the most significant advantages of voice journaling is its convenience. You can journal while:</p>
    <ul>
      <li>Taking a walk</li>
      <li>Commuting to work</li>
      <li>Cooking dinner</li>
      <li>Winding down before bed</li>
    </ul>
    
    <p>This flexibility removes the barriers that often prevent consistent journaling practice. Instead of having to set aside dedicated time to write, you can integrate journaling seamlessly into your daily routine.</p>
    
    <h2>Enhanced Memory and Clarity</h2>
    <p>Speaking our thoughts aloud activates different neural pathways than silent thinking. This vocalization can help clarify thinking and improve memory retention. Many users report having "aha moments" during voice journaling that they might not have experienced through written reflection.</p>
    
    <h2>Perfect for Processing Complex Emotions</h2>
    <p>During times of intense emotion or stress, sitting down to write coherently can be difficult. Voice journaling allows you to express and process these feelings in real-time, providing immediate emotional relief and perspective.</p>
    
    <h2>AI-Powered Insights</h2>
    <p>Modern voice journaling apps like SOuLO don't just record and transcribe your entries. They use artificial intelligence to analyze patterns in your speech, emotions, and recurring themes. This provides valuable insights into your mental and emotional health trends over time, helping you identify areas for growth or attention.</p>
    
    <h2>Getting Started with Voice Journaling</h2>
    <p>To begin your voice journaling practice:</p>
    <ol>
      <li>Choose a quiet, comfortable space where you feel free to express yourself</li>
      <li>Set an intention for your journal entry (reflection, problem-solving, gratitude, etc.)</li>
      <li>Speak naturally as if talking to a trusted friend</li>
      <li>Don't worry about perfectionauthentic expression is more valuable than polished speech</li>
      <li>Review insights and patterns revealed by your journals over time</li>
    </ol>
    
    <h2>Conclusion</h2>
    <p>Voice journaling represents the evolution of an ancient practice for our modern, busy lives. By removing barriers to regular reflection and adding the dimension of vocal expression, it offers unique benefits that traditional journaling cannot. Whether you're seeking emotional well-being, personal growth, or simply a more convenient way to document your life, voice journaling is worth exploring.</p>
    
    <p>Start speaking your truth today, and discover the power of your own voice in guiding your journey of self-discovery.</p>`,image:"/lovable-uploads/f1035a0b-8b30-4d38-9234-6560a14558de.png",category:"Self-Improvement",date:"April 10, 2025",author:{name:"Dr. Maya Patel",role:"Psychologist & Wellness Coach",avatar:"MP"},readTime:"8 min read",tags:["voice journaling","mental health","self-reflection","emotional intelligence","technology"]},{id:2,slug:"ai-enhancing-journaling-experience",title:"How AI Transforms Your Journaling Experience",subtitle:"Leveraging artificial intelligence for deeper self-understanding",excerpt:"Artificial intelligence is revolutionizing the journaling experience by providing personalized insights, identifying emotional patterns, and helping you understand yourself better than ever before.",content:`<p>Journaling has been a powerful tool for self-reflection and personal growth for centuries. From Marcus Aurelius to modern mindfulness practitioners, the act of recording one's thoughts has proven benefits for mental health and emotional well-being. Now, artificial intelligence is taking this ancient practice to new heights.</p>

    <h2>Beyond Simple Recording</h2>
    <p>Traditional journaling requires you to not only record your thoughts but also analyze them yourself. This self-analysis, while valuable, has limitationswe all have blind spots and patterns we may not recognize in ourselves. AI changes this dynamic completely.</p>
    
    <p>Modern AI-enhanced journaling tools can:</p>
    <ul>
      <li>Identify emotional patterns across entries</li>
      <li>Track your mood fluctuations over time</li>
      <li>Highlight recurring themes or concerns</li>
      <li>Suggest connections between events and emotional responses</li>
      <li>Provide personalized insights based on your unique expression</li>
    </ul>
    
    <h2>Emotional Intelligence as a Service</h2>
    <p>One of the most remarkable capabilities of AI in journaling is emotional intelligence. Advanced natural language processing can detect nuanced emotions in your journal entries that might not be immediately obvious even to you.</p>
    
    <p>For example, you might believe you're simply recording facts about your day, but AI analysis might reveal underlying anxiety, excitement, or frustration in your word choice and speech patterns. This emotional mapping provides a bird's-eye view of your emotional landscape over time.</p>
    
    <h2>Making the Invisible Visible</h2>
    <p>We all have patterns in our thinking and behavior that influence our lives. These patterns often operate below our conscious awareness. AI-enhanced journaling makes these invisible patterns visible through:</p>
    
    <h3>Visualization</h3>
    <p>Charts and graphs can display your emotional trends over days, weeks, or months, helping you see connections between life events and your mental state.</p>
    
    <h3>Theme Extraction</h3>
    <p>AI can identify and categorize the themes that appear most frequently in your journaling, showing you what truly occupies your mind.</p>
    
    <h3>Linguistic Analysis</h3>
    <p>Your word choice reveals more than you might think. AI can analyze your language patterns to uncover underlying thought processes and emotional states.</p>
    
    <h2>A Conversation with Your Journal</h2>
    <p>Perhaps the most revolutionary aspect of AI-enhanced journaling is the ability to have a conversation with your journal. Instead of simply recording thoughts, you can now ask questions about your past entries:</p>
    
    <ul>
      <li>"When was the last time I felt really enthusiastic about my work?"</li>
      <li>"What patterns do I notice in my relationships?"</li>
      <li>"How has my anxiety changed over the past month?"</li>
    </ul>
    
    <p>The AI can search through your entries, identify relevant information, and provide thoughtful responses based on your own recorded experiences and insights.</p>
    
    <h2>Privacy and Ethical Considerations</h2>
    <p>With great power comes great responsibility. When choosing an AI-enhanced journaling platform, it's essential to consider:</p>
    
    <ul>
      <li>End-to-end encryption of your entries</li>
      <li>Clear data ownership policies</li>
      <li>Transparency about how AI analyzes your content</li>
      <li>Options to delete your data permanently</li>
    </ul>
    
    <p>The best platforms prioritize your privacy while still providing powerful insights.</p>
    
    <h2>Getting Started with AI-Enhanced Journaling</h2>
    <p>Ready to experience the benefits of AI in your journaling practice? Here's how to begin:</p>
    
    <ol>
      <li>Choose a platform that offers both voice and text journaling options</li>
      <li>Journal consistently for at least a few weeks to give the AI enough data to identify patterns</li>
      <li>Explore the insights provided and reflect on how they align with your self-perception</li>
      <li>Ask questions of your journal to deepen your understanding</li>
      <li>Use the insights as starting points for further reflection, not as definitive conclusions</li>
    </ol>
    
    <h2>Conclusion</h2>
    <p>AI-enhanced journaling represents a powerful evolution in the ancient practice of self-reflection. By combining the natural human tendency to record and process experiences with cutting-edge artificial intelligence, we can achieve new levels of self-understanding and emotional intelligence.</p>
    
    <p>Your journal is no longer just a record of your thoughtsit's becoming an active partner in your journey of self-discovery and personal growth.</p>`,image:"/lovable-uploads/a6374f0f-2e81-45f4-8c42-dfe81f7fbf01.png",category:"Technology",date:"April 5, 2025",author:{name:"Alex Wang",role:"AI Research Specialist",avatar:"AW"},readTime:"10 min read",tags:["artificial intelligence","personal growth","emotional patterns","journaling","technology"]},{id:3,slug:"daily-reflection-through-voice",title:"The Science Behind Daily Voice Reflection",subtitle:"How consistent voice journaling impacts mental well-being",excerpt:"Research shows that regular voice journaling can reduce stress, improve emotional regulation, and enhance overall mental health through multiple psychological mechanisms.",content:`<p>The practice of daily reflection has been recommended by psychologists and wellness experts for decades. Now, science is revealing that when this reflection happens through voice journaling, the benefits can be even more profound. Let's explore the fascinating research behind why speaking your thoughts aloud can transform your mental health.</p>

    <h2>The Neuroscience of Vocalization</h2>
    <p>When you speak your thoughts aloud rather than simply thinking them or writing them down, different neural pathways are activated. Functional MRI studies have shown that vocalization engages motor areas of the brain along with language processing centers, creating a more comprehensive neural engagement.</p>
    
    <p>This broader activation has several benefits:</p>
    <ul>
      <li>Enhanced memory consolidation of the experience</li>
      <li>Stronger emotional processing</li>
      <li>Improved cognitive clarity</li>
    </ul>
    
    <h2>Emotional Regulation Through Verbalization</h2>
    <p>The act of putting feelings into spoken wordswhat psychologists call "affect labeling"has been shown to reduce emotional reactivity. A landmark study published in Psychological Science demonstrated that verbalizing emotions during stressful experiences reduced activity in the amygdala (the brain's threat detection center) and increased activity in the prefrontal cortex (responsible for rational thinking).</p>
    
    <p>In simpler terms: speaking about your emotions helps tame them. This is one reason why voice journaling can be particularly effective for managing anxiety and stress.</p>
    
    <h2>The Consistency Factor</h2>
    <p>One of the challenges with traditional journaling is maintaining consistency. Research from the University of California found that voice journaling has a 60% higher consistency rate compared to written journaling. The convenience factor removes barriers to regular practice, and consistency is where the real benefits emerge.</p>
    
    <p>Studies show that the most significant improvements in mental well-being occur when journaling happens at least 3-4 times per week over several months. Voice journaling makes this level of consistency much more achievable for most people.</p>
    
    <h2>Cognitive Restructuring Through Self-Listening</h2>
    <p>A unique aspect of voice journaling is the opportunity to listen back to your own thoughts. This creates a reflective loop that written journaling can't match. When you hear your own voice expressing concerns or negative thought patterns, it creates what psychologists call "psychological distance"allowing you to become an observer of your thoughts rather than being completely identified with them.</p>
    
    <p>This distance is foundational to cognitive restructuringthe process of identifying and challenging unhelpful thinking patterns that contribute to emotional distress.</p>
    
    <h2>Social Processing Benefits</h2>
    <p>Humans are inherently social creatures, and our brains process information differently when we perceive a social component. Interestingly, speaking aloud, even when alone, activates some of the same neural pathways as social interaction.</p>
    
    <p>Voice journaling leverages this by simulating aspects of social processing, potentially offering some of the benefits of talking to a supportive friend or therapist. The brain's social processing networks help organize experiences and place them in context, which is valuable for managing difficult emotions and situations.</p>
    
    <h2>Tracking Progress Through Voice Biomarkers</h2>
    <p>Advanced voice journaling applications are now incorporating analysis of voice biomarkerssubtle characteristics in your speech that can indicate emotional and mental states. Research from MIT and other institutions has shown that aspects of voice such as pitch, rhythm, energy, and articulation can reveal signs of stress, depression, anxiety, and other conditions.</p>
    
    <p>These biomarkers offer an objective measure of mental well-being that complements the subjective content of journal entries. Over time, you can actually hear the evidence of your emotional growth and resilience building.</p>
    
    <h2>Practical Application: Creating a Science-Based Voice Journaling Practice</h2>
    <p>Based on the research, here are evidence-based recommendations for maximizing the benefits of voice journaling:</p>
    
    <ol>
      <li><strong>Aim for consistency</strong>: 3-5 times per week is the sweet spot according to research</li>
      <li><strong>Journal for at least 5-10 minutes</strong>: This gives enough time for emotional processing to occur</li>
      <li><strong>Balance negative and positive</strong>: While processing difficulties is important, also record positive experiences and gratitude</li>
      <li><strong>Review periodically</strong>: Schedule time to listen back to entries from the past month</li>
      <li><strong>Track patterns</strong>: Notice recurring themes, triggers, and emotional responses</li>
    </ol>
    
    <h2>Conclusion: The Evidence-Based Future of Reflection</h2>
    <p>The science is clear: voice journaling offers a powerful, neurologically effective approach to self-reflection and emotional well-being. As research continues to evolve, we're gaining ever more sophisticated understanding of how the simple act of speaking our truth can literally reshape our brains and transform our emotional lives.</p>
    
    <p>In a world where mental health challenges are increasingly common, voice journaling represents an accessible, evidence-based tool for building resilience and self-understandingone spoken word at a time.</p>`,image:"/lovable-uploads/8dd08973-e7a2-4bef-a990-1e3ff0dede92.png",category:"Mental Health",date:"March 28, 2025",author:{name:"Dr. James Chen",role:"Neuroscientist & Researcher",avatar:"JC"},readTime:"9 min read",tags:["neuroscience","voice journaling","mental health","emotional regulation","research"]},{id:4,slug:"voice-journaling-for-busy-professionals",title:"Voice Journaling for Busy Professionals",subtitle:"How to maintain self-reflection when you barely have time to breathe",excerpt:"Learn how voice journaling can fit seamlessly into even the most demanding schedules, helping busy professionals manage stress and maintain perspective without adding to their workload.",content:`<p>In the constant rush of meetings, deadlines, and responsibilities, self-reflection often falls to the bottom of a busy professional's priority list. Yet paradoxically, those with the fullest schedules may need reflection the most. Voice journaling offers a solution that fits into the cracks of even the busiest day. Here's how to make it work for your professional life.</p>

    <h2>The Busy Professional's Dilemma</h2>
    <p>The modern professional faces a unique challenge: increasing demands on time and attention, coupled with the growing awareness that mental well-being is essential for sustained performance. Traditional self-care practices often feel like yet another task on an already overflowing to-do list.</p>
    
    <p>This is where voice journaling shines. By leveraging small pockets of time throughout your day, you can maintain a reflection practice without sacrificing productivity.</p>
    
    <h2>Micro-Journaling: The 2-Minute Method</h2>
    <p>Research shows that even brief moments of reflection can yield significant benefits. The 2-minute voice journaling method involves recording short reflections at transition points in your day:</p>
    
    <ul>
      <li><strong>Morning commute</strong>: Set intentions and priorities for the day ahead</li>
      <li><strong>Before meetings</strong>: Quickly center yourself and clarify your objectives</li>
      <li><strong>After challenging interactions</strong>: Process emotions before moving to the next task</li>
      <li><strong>End of workday</strong>: Mentally "close" work before transitioning home</li>
    </ul>
    
    <p>These micro-sessions prevent emotional buildup and help maintain perspective throughout demanding days.</p>
    
    <h2>Commute Transformation</h2>
    <p>The average professional spends 30-60 minutes commuting each day. This timewhether driving, on public transit, or walkingis ideal for voice journaling. Instead of scrolling through emails or social media, use this time to:</p>
    
    <ul>
      <li>Reflect on yesterday's achievements and challenges</li>
      <li>Process complex professional relationships</li>
      <li>Brainstorm solutions to ongoing problems</li>
      <li>Rehearse difficult conversations</li>
    </ul>
    
    <p>By the time you arrive at your destination, you'll have not only documented your thoughts but also achieved greater clarity through the process of articulation.</p>
    
    <h2>Strategic Topic Selection</h2>
    <p>For maximum benefit with minimal time investment, focus your voice journaling on high-leverage topics:</p>
    
    <h3>Decision Making</h3>
    <p>Research shows that verbally working through important decisions improves judgment by forcing structured thinking. Before making significant choices, spend 3-5 minutes voice journaling the pros, cons, and your intuitive response.</p>
    
    <h3>Conflict Resolution</h3>
    <p>Workplace tensions can consume mental bandwidth long after the interaction. A brief voice journal entry helps process these emotions efficiently, preventing them from affecting other areas of work.</p>
    
    <h3>Success Analysis</h3>
    <p>When things go well, quickly capture what contributed to the success. This creates a personal database of effective strategies to reference in the future.</p>
    
    <h2>Voice Journaling as Professional Development</h2>
    <p>Beyond personal reflection, voice journaling can directly enhance professional skills:</p>
    
    <h3>Presentation Preparation</h3>
    <p>Use voice journaling to practice key talking points for presentations. The playback feature allows you to hear how your ideas sound when verbalized.</p>
    
    <h3>Leadership Reflection</h3>
    <p>Executives and managers can benefit from regular reflection on their leadership approach. Voice journaling creates a private space to consider how your actions impact your team.</p>
    
    <h3>Continuous Learning</h3>
    <p>After webinars, meetings, or reading professional development materials, quickly voice record your key takeaways and implementation ideas before they fade from memory.</p>
    
    <h2>Practical Implementation for Professionals</h2>
    <p>To successfully integrate voice journaling into a busy professional life:</p>
    
    <ol>
      <li><strong>Use a dedicated app</strong> with high security standards to protect potentially sensitive professional reflections</li>
      <li><strong>Create topic templates</strong> for different situations to eliminate decision fatigue</li>
      <li><strong>Schedule journaling blocks</strong> in your calendar, even if just 5 minutes</li>
      <li><strong>Set realistic consistency goals</strong> that acknowledge your professional demands</li>
      <li><strong>Consider theme days</strong> (Monday for weekly planning, Friday for review, etc.)</li>
    </ol>
    
    <h2>Work-Life Integration Through Reflection</h2>
    <p>One of the greatest challenges for busy professionals is maintaining boundaries between work and personal life. Voice journaling can serve as a transition ritual, helping you mentally "clock out" from work mode.</p>
    
    <p>A dedicated end-of-workday voice journal entry might include:</p>
    <ul>
      <li>Three accomplishments from the day</li>
      <li>Any unresolved issues (and a quick plan to address them tomorrow)</li>
      <li>A conscious decision to be present for your personal life</li>
    </ul>
    
    <p>This practice creates psychological closure, reducing work rumination during personal time.</p>
    
    <h2>Conclusion: The Professional's Edge</h2>
    <p>In today's high-pressure professional environment, the ability to maintain clarity, emotional regulation, and strategic thinking is a significant competitive advantage. Voice journaling offers a time-efficient method to develop these capacities without adding substantial time commitments to an already full schedule.</p>
    
    <p>By capturing thoughts during transitional moments, commutes, and brief windows between responsibilities, even the busiest professionals can maintain a reflection practice that enhances both performance and well-being.</p>
    
    <p>Your voiceand the clarity it bringsmay be your most underutilized professional asset.</p>`,image:"/lovable-uploads/cb710491-93f0-42be-a596-f64d80d9800e.png",category:"Productivity",date:"March 20, 2025",author:{name:"Sarah Johnson",role:"Executive Coach",avatar:"SJ"},readTime:"7 min read",tags:["productivity","work-life balance","stress management","professional development","time management"]},{id:5,slug:"tracking-emotional-patterns",title:"Tracking Emotional Patterns With Voice Journaling",subtitle:"Using AI to visualize and understand your emotional landscape",excerpt:"Modern voice journaling apps can visualize your emotional patterns over time, helping you identify triggers, track progress, and make meaningful changes to improve your mental well-being.",content:`<p>We all experience a wide range of emotions throughout our lives, but few of us have a clear understanding of our emotional patterns. What triggers certain feelings? How do our emotions fluctuate over time? What impact do lifestyle changes have on our emotional well-being? Voice journaling, enhanced by AI analytics, offers unprecedented insights into these questions by visualizing your emotional landscape.</p>

    <h2>The Invisible Made Visible</h2>
    <p>Emotions are often fleeting and difficult to quantify. We might feel anxious on Tuesday and content on Wednesday without recognizing the patterns that connect these states. AI-powered voice journaling tools change this by converting your spoken reflections into visual representations of your emotional journey.</p>
    
    <p>These visualizations might include:</p>
    <ul>
      <li>Emotion wheels showing the distribution of feelings over time</li>
      <li>Intensity graphs tracking the strength of specific emotions</li>
      <li>Calendar views highlighting emotional trends by day, week, or month</li>
      <li>Word clouds of emotional language used in your entries</li>
    </ul>
    
    <p>By making the invisible visible, these tools help you develop greater emotional awarenessthe foundation of emotional intelligence.</p>
    
    <h2>From Data to Insights: Understanding Your Triggers</h2>
    <p>Perhaps the most valuable aspect of tracking emotional patterns is identifying your personal triggers. When you journal consistently, AI can correlate emotional states with other factors mentioned in your entries:</p>
    
    <h3>People Triggers</h3>
    <p>Do certain relationships consistently impact your emotional state? Voice journaling analysis might reveal that interactions with specific individuals correlate with particular emotionsinformation that can help you manage these relationships more effectively.</p>
    
    <h3>Situational Triggers</h3>
    <p>Your emotional patterns might be linked to specific situations: work presentations, family gatherings, or social events. Identifying these connections helps you prepare emotionally for challenging situations.</p>
    
    <h3>Physiological Triggers</h3>
    <p>Many don't realize how strongly physical factors influence emotions. Voice journaling might reveal patterns connecting your mood to sleep quality, exercise, nutrition, or hormonal cycles.</p>
    
    <h2>Tracking Emotional Growth Over Time</h2>
    <p>Personal growth can sometimes feel abstract or difficult to measure. Emotional pattern tracking provides concrete evidence of your progress. For example:</p>
    
    <ul>
      <li>Decreased frequency or intensity of anxiety after beginning a meditation practice</li>
      <li>Improved emotional recovery time following setbacks</li>
      <li>Greater emotional diversity (experiencing a wider range of positive emotions)</li>
      <li>Reduced emotional volatility as coping skills improve</li>
    </ul>
    
    <p>These measurable changes provide motivation to continue practices that support your emotional well-being.</p>
    
    <h2>Practical Applications: Using Emotional Insights</h2>
    <p>Understanding your emotional patterns isn't just interestingit's actionable information that can improve various aspects of your life:</p>
    
    <h3>Improved Decision Making</h3>
    <p>When you understand your emotional patterns, you can determine when you're in an optimal emotional state for important decisions versus when your judgment might be clouded by temporary feelings.</p>
    
    <h3>Better Timing for Challenging Tasks</h3>
    <p>If your emotional tracking reveals that you typically feel more optimistic and energetic in the mornings, you might schedule challenging or creative work during those hours.</p>
    
    <h3>More Effective Self-Care</h3>
    <p>By identifying early warning signs of emotional distress, you can implement self-care strategies before reaching a crisis point. This proactive approach transforms self-care from reactive to preventative.</p>
    
    <h3>Enhanced Communication</h3>
    <p>Understanding your emotional patterns improves your ability to communicate your needs to others. Instead of reacting in the moment, you can explain your patterns: "I've noticed I tend to feel overwhelmed on Sundays before the work weekI might need some extra space then."</p>
    
    <h2>The Technology Behind Emotional Pattern Recognition</h2>
    <p>Advanced voice journaling applications use several technologies to identify emotional patterns:</p>
    
    <h3>Natural Language Processing (NLP)</h3>
    <p>AI algorithms analyze the actual content of your journal entries, identifying emotional words and themes.</p>
    
    <h3>Voice Analysis</h3>
    <p>Beyond your words, the tone, pace, and acoustic properties of your voice contain emotional information that AI can detect, sometimes picking up on emotions you're not consciously expressing.</p>
    
    <h3>Pattern Recognition</h3>
    <p>Machine learning algorithms identify correlations between various factors in your entries, revealing patterns that might not be obvious to human analysis.</p>
    
    <h2>Getting Started With Emotional Pattern Tracking</h2>
    <p>To begin tracking your emotional patterns through voice journaling:</p>
    
    <ol>
      <li>Choose an app with robust emotional analysis features</li>
      <li>Journal consistently (at least 3-4 times weekly) for at least a month to establish baseline patterns</li>
      <li>Include context in your entriesmention sleep quality, activities, social interactions, etc.</li>
      <li>Review your emotional visualizations weekly, looking for patterns</li>
      <li>Experiment with lifestyle changes and observe their impact on your emotional trends</li>
    </ol>
    
    <h2>Conclusion: Your Emotional Map</h2>
    <p>We navigate physical space with maps and GPS, yet most of us traverse our emotional landscape without guidance. Voice journaling with emotional pattern tracking gives you a map of your inner terrainhighlighting the peaks, valleys, and pathways of your emotional experience.</p>
    
    <p>With this map in hand, you can make more intentional choices about how you live, work, and relate to others. You can avoid emotional pitfalls and cultivate conditions that support your well-being. Perhaps most importantly, you gain a deeper understanding of yourselfthe foundation for authentic living and meaningful growth.</p>
    
    <p>Your emotions tell an important story. With voice journaling, you can finally read it clearly.</p>`,image:"/lovable-uploads/a66f2232-4b39-4d46-ace5-19e4c81b1f05.png",category:"Emotional Intelligence",date:"March 15, 2025",author:{name:"Dr. Emily Rodriguez",role:"Clinical Psychologist",avatar:"ER"},readTime:"8 min read",tags:["emotional intelligence","pattern recognition","mental health","self-awareness","visualization"]}],Mrt=t=>l3.find(e=>e.slug===t)||null,Prt=()=>{const t=l3[0],e=l3.slice(1);return d.jsxs("div",{className:"min-h-screen bg-white",children:[d.jsx(Yy,{}),d.jsx("div",{className:"pt-24 md:pt-32 pb-16",children:d.jsxs("div",{className:"container mx-auto px-4",children:[d.jsxs("div",{className:"text-center mb-12",children:[d.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:d.jsx(Q,{text:"SOuLO Blog",forceTranslate:!0})}),d.jsx("p",{className:"text-muted-foreground text-lg max-w-2xl mx-auto",children:d.jsx(Q,{text:"Insights and guidance for your self-discovery journey through voice journaling",forceTranslate:!0})})]}),d.jsx(Ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"mb-16",children:d.jsx(li,{to:`/blog/${t.slug}`,className:"block group",children:d.jsx(Jr,{className:"overflow-hidden border-none shadow-lg hover:shadow-xl transition-shadow",children:d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[d.jsx("div",{className:"aspect-video overflow-hidden",children:d.jsx("img",{src:t.image,alt:t.title,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"})}),d.jsxs("div",{className:"p-6 md:p-8 flex flex-col justify-between",children:[d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[d.jsx("span",{className:"text-xs font-medium uppercase text-primary bg-primary/10 px-2 py-1 rounded-full",children:d.jsx(Q,{text:t.category,forceTranslate:!0})}),d.jsx("span",{className:"text-sm text-muted-foreground",children:d.jsx(Q,{text:t.date,forceTranslate:!0})})]}),d.jsx("h2",{className:"text-2xl md:text-3xl font-bold mb-4 group-hover:text-primary transition-colors",children:d.jsx(Q,{text:t.title,forceTranslate:!0})}),d.jsx("p",{className:"text-muted-foreground mb-4",children:d.jsx(Q,{text:t.excerpt,forceTranslate:!0})})]}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(fv,{className:"h-4 w-4 text-primary"}),d.jsx("span",{className:"text-sm",children:d.jsx(Q,{text:t.author.name,forceTranslate:!0})})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(Zu,{className:"h-4 w-4 text-primary"}),d.jsx("span",{className:"text-sm",children:d.jsx(Q,{text:t.readTime,forceTranslate:!0})})]})]}),d.jsxs(ct,{className:"w-full group",children:[d.jsx(Q,{text:"Read More",forceTranslate:!0}),d.jsx(d0,{className:"ml-2 h-4 w-4 transition-transform group-hover:translate-x-1"})]})]})]})]})})})}),d.jsxs("div",{children:[d.jsx("h2",{className:"text-2xl md:text-3xl font-bold mb-8",children:d.jsx(Q,{text:"Latest Articles",forceTranslate:!0})}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:e.map((n,r)=>d.jsx(Ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:r*.1},children:d.jsx(li,{to:`/blog/${n.slug}`,className:"block h-full",children:d.jsxs(Jr,{className:"h-full hover:shadow-md transition-shadow overflow-hidden",children:[d.jsx("div",{className:"aspect-video overflow-hidden",children:d.jsx("img",{src:n.image,alt:n.title,className:"w-full h-full object-cover transition-transform duration-500 hover:scale-105"})}),d.jsxs(w0,{className:"pb-2",children:[d.jsx("div",{className:"flex items-center gap-2 mb-2",children:d.jsx("span",{className:"text-xs font-medium uppercase text-primary bg-primary/10 px-2 py-1 rounded-full",children:d.jsx(Q,{text:n.category,forceTranslate:!0})})}),d.jsx(b0,{className:"text-xl hover:text-primary transition-colors line-clamp-2",children:d.jsx(Q,{text:n.title,forceTranslate:!0})})]}),d.jsx(au,{className:"pb-0",children:d.jsx(nF,{className:"line-clamp-3",children:d.jsx(Q,{text:n.excerpt,forceTranslate:!0})})}),d.jsx(Ate,{className:"pt-4",children:d.jsxs("div",{className:"flex items-center justify-between w-full text-sm text-muted-foreground",children:[d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx(fv,{className:"h-3 w-3"}),d.jsx("span",{children:d.jsx(Q,{text:n.author.name,forceTranslate:!0})})]}),d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx(Zu,{className:"h-3 w-3"}),d.jsx("span",{children:d.jsx(Q,{text:n.readTime,forceTranslate:!0})})]})]})})]})})},n.id))})]})]})}),d.jsx(pv,{})]})},krt=()=>{const{slug:t}=$pe(),[e,n]=_.useState(null),[r,i]=_.useState(!0);return _.useEffect(()=>{if(t){const o=Mrt(t);n(o),i(!1)}},[t]),r?d.jsxs("div",{className:"min-h-screen bg-white",children:[d.jsx(Yy,{}),d.jsx("div",{className:"pt-32 pb-16 container mx-auto px-4",children:d.jsx("div",{className:"flex justify-center items-center h-64",children:d.jsx("div",{className:"animate-pulse h-8 w-32 bg-gray-200 rounded"})})})]}):e?d.jsxs("div",{className:"min-h-screen bg-white",children:[d.jsx(Yy,{}),d.jsx("article",{className:"pt-32 pb-16",children:d.jsx("div",{className:"container mx-auto px-4",children:d.jsxs("div",{className:"max-w-3xl mx-auto",children:[d.jsxs(li,{to:"/blog",className:"flex items-center text-primary hover:underline mb-8",children:[d.jsx(L3,{className:"h-4 w-4 mr-2"}),d.jsx(Q,{text:"Back to Blog",forceTranslate:!0})]}),d.jsx("div",{className:"aspect-video overflow-hidden rounded-lg mb-8",children:d.jsx("img",{src:e.image,alt:e.title,className:"w-full h-full object-cover"})}),d.jsxs("div",{className:"mb-8",children:[d.jsxs("div",{className:"flex flex-wrap items-center gap-4 mb-4 text-sm text-muted-foreground",children:[d.jsx("span",{className:"text-xs font-medium uppercase text-primary bg-primary/10 px-2 py-1 rounded-full",children:d.jsx(Q,{text:e.category,forceTranslate:!0})}),d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx(QC,{className:"h-4 w-4"}),d.jsx("span",{children:d.jsx(Q,{text:e.date,forceTranslate:!0})})]}),d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx(fv,{className:"h-4 w-4"}),d.jsx("span",{children:d.jsx(Q,{text:e.author.name,forceTranslate:!0})})]}),d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx(Zu,{className:"h-4 w-4"}),d.jsx("span",{children:d.jsx(Q,{text:e.readTime,forceTranslate:!0})})]})]}),d.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-4",children:d.jsx(Q,{text:e.title,forceTranslate:!0})}),d.jsx("p",{className:"text-lg text-muted-foreground",children:d.jsx(Q,{text:e.excerpt,forceTranslate:!0})})]}),d.jsx("div",{className:"prose prose-lg max-w-none",children:d.jsx(Q,{as:"div",text:e.content,forceTranslate:!0})}),d.jsx("div",{className:"border-t border-gray-100 mt-12 pt-8",children:d.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center text-primary font-bold",children:e.author.avatar}),d.jsxs("div",{children:[d.jsx("p",{className:"font-medium",children:d.jsx(Q,{text:e.author.name,forceTranslate:!0})}),d.jsx("p",{className:"text-sm text-muted-foreground",children:d.jsx(Q,{text:e.author.role,forceTranslate:!0})})]})]}),d.jsx("div",{className:"flex gap-4",children:d.jsx(ct,{variant:"outline",asChild:!0,children:d.jsx(li,{to:"/blog",children:d.jsx(Q,{text:"More Articles",forceTranslate:!0})})})})]})})]})})}),d.jsx(pv,{})]}):d.jsxs("div",{className:"min-h-screen bg-white",children:[d.jsx(Yy,{}),d.jsxs("div",{className:"pt-32 pb-16 container mx-auto px-4 text-center",children:[d.jsx("h1",{className:"text-3xl font-bold mb-4",children:d.jsx(Q,{text:"Post Not Found",forceTranslate:!0})}),d.jsx("p",{className:"text-muted-foreground mb-8",children:d.jsx(Q,{text:"The blog post you're looking for doesn't exist or has been moved.",forceTranslate:!0})}),d.jsx(ct,{asChild:!0,children:d.jsx(li,{to:"/blog",children:d.jsx(Q,{text:"Back to Blog",forceTranslate:!0})})})]}),d.jsx(pv,{})]})};function Nrt({isRecording:t,audioLevel:e,ripples:n,fullWidth:r=!1}){const i=r?80:40,o=Array.from({length:i});return d.jsx("div",{className:`w-full h-full flex items-center justify-center overflow-hidden ${r?"px-0 absolute inset-0":""}`,children:d.jsx("div",{className:`flex items-center h-16 space-x-0.5 ${r?"w-full justify-between":""}`,children:o.map((a,s)=>{const l=Math.sin(s/i*Math.PI)*100,c=t?Math.max(15,l*(.3+e*.7)):l;return d.jsx(Ke.div,{className:"w-1 bg-theme rounded-full",initial:{height:5},animate:{height:t?[c*.3,c,c*.5,c*.8,c*.4]:[l*.3,l*.7,l*.5]},transition:{duration:t?.6:1.2,repeat:1/0,repeatType:"reverse",ease:"easeInOut",delay:s*.02},style:{opacity:t?.7:.4}},s)})})})}function vfe(t,e){_.useEffect(()=>{const n=t.current;if(!n||e.disabled)return;let r=0,i=0,o=0,a=0;const s=e.minDistance||50;let l=!1,c=null;const u=p=>{c=p.target,!(c instanceof HTMLElement&&(c.tagName==="INPUT"||c.tagName==="TEXTAREA"||c.tagName==="SELECT"))&&(r=p.touches[0].clientX,i=p.touches[0].clientY,l=!0)},f=p=>{l&&(o=p.touches[0].clientX,a=p.touches[0].clientY)},h=p=>{if(!l||(l=!1,c instanceof HTMLElement&&(c.tagName==="INPUT"||c.tagName==="TEXTAREA"||c.tagName==="SELECT")))return;const y=o-r,g=a-i;Math.abs(y)>Math.abs(g)?Math.abs(y)>s&&(y>0&&e.onSwipeRight?e.onSwipeRight():y<0&&e.onSwipeLeft&&e.onSwipeLeft()):Math.abs(g)>s&&(g>0&&e.onSwipeDown?e.onSwipeDown():g<0&&e.onSwipeUp&&e.onSwipeUp())};return n.addEventListener("touchstart",u,{passive:!0}),n.addEventListener("touchmove",f,{passive:!0}),n.addEventListener("touchend",h),()=>{n.removeEventListener("touchstart",u),n.removeEventListener("touchmove",f),n.removeEventListener("touchend",h)}},[t,e])}var Rrt=[" ","Enter","ArrowUp","ArrowDown"],jrt=[" ","Enter"],SS="Select",[U2,B2,Irt]=f0(SS),[q0,Dot]=sa(SS,[Irt,sh]),$2=sh(),[Ort,vh]=q0(SS),[Lrt,Drt]=q0(SS),xfe=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:i,onOpenChange:o,value:a,defaultValue:s,onValueChange:l,dir:c,name:u,autoComplete:f,disabled:h,required:p,form:y}=t,g=$2(e),[v,b]=_.useState(null),[w,T]=_.useState(null),[C,P]=_.useState(!1),M=ah(c),[k=!1,I]=wo({prop:r,defaultProp:i,onChange:o}),[U,z]=wo({prop:a,defaultProp:s,onChange:l}),O=_.useRef(null),B=v?y||!!v.closest("form"):!0,[$,F]=_.useState(new Set),J=Array.from($).map(K=>K.props.value).join(";");return d.jsx(cA,{...g,children:d.jsxs(Ort,{required:p,scope:e,trigger:v,onTriggerChange:b,valueNode:w,onValueNodeChange:T,valueNodeHasChildren:C,onValueNodeHasChildrenChange:P,contentId:Xa(),value:U,onValueChange:z,open:k,onOpenChange:I,dir:M,triggerPointerDownPosRef:O,disabled:h,children:[d.jsx(U2.Provider,{scope:e,children:d.jsx(Lrt,{scope:t.__scopeSelect,onNativeOptionAdd:_.useCallback(K=>{F(Z=>new Set(Z).add(K))},[]),onNativeOptionRemove:_.useCallback(K=>{F(Z=>{const H=new Set(Z);return H.delete(K),H})},[]),children:n})}),B?d.jsxs(Vfe,{"aria-hidden":!0,required:p,tabIndex:-1,name:u,autoComplete:f,value:U,onChange:K=>z(K.target.value),disabled:h,form:y,children:[U===void 0?d.jsx("option",{value:""}):null,Array.from($)]},J):null]})})};xfe.displayName=SS;var wfe="SelectTrigger",bfe=_.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...i}=t,o=$2(n),a=vh(wfe,n),s=a.disabled||r,l=Kt(e,a.onTriggerChange),c=B2(n),u=_.useRef("touch"),[f,h,p]=Wfe(g=>{const v=c().filter(T=>!T.disabled),b=v.find(T=>T.value===a.value),w=Gfe(v,g,b);w!==void 0&&a.onValueChange(w.value)}),y=g=>{s||(a.onOpenChange(!0),p()),g&&(a.triggerPointerDownPosRef.current={x:Math.round(g.pageX),y:Math.round(g.pageY)})};return d.jsx(C1,{asChild:!0,...o,children:d.jsx(At.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:s,"data-disabled":s?"":void 0,"data-placeholder":Hfe(a.value)?"":void 0,...i,ref:l,onClick:ut(i.onClick,g=>{g.currentTarget.focus(),u.current!=="mouse"&&y(g)}),onPointerDown:ut(i.onPointerDown,g=>{u.current=g.pointerType;const v=g.target;v.hasPointerCapture(g.pointerId)&&v.releasePointerCapture(g.pointerId),g.button===0&&g.ctrlKey===!1&&g.pointerType==="mouse"&&(y(g),g.preventDefault())}),onKeyDown:ut(i.onKeyDown,g=>{const v=f.current!=="";!(g.ctrlKey||g.altKey||g.metaKey)&&g.key.length===1&&h(g.key),!(v&&g.key===" ")&&Rrt.includes(g.key)&&(y(),g.preventDefault())})})})});bfe.displayName=wfe;var Sfe="SelectValue",Efe=_.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,children:o,placeholder:a="",...s}=t,l=vh(Sfe,n),{onValueNodeHasChildrenChange:c}=l,u=o!==void 0,f=Kt(e,l.onValueNodeChange);return $i(()=>{c(u)},[c,u]),d.jsx(At.span,{...s,ref:f,style:{pointerEvents:"none"},children:Hfe(l.value)?d.jsx(d.Fragment,{children:a}):o})});Efe.displayName=Sfe;var Frt="SelectIcon",_fe=_.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...i}=t;return d.jsx(At.span,{"aria-hidden":!0,...i,ref:e,children:r||""})});_fe.displayName=Frt;var zrt="SelectPortal",Tfe=t=>d.jsx(m0,{asChild:!0,...t});Tfe.displayName=zrt;var fm="SelectContent",Cfe=_.forwardRef((t,e)=>{const n=vh(fm,t.__scopeSelect),[r,i]=_.useState();if($i(()=>{i(new DocumentFragment)},[]),!n.open){const o=r;return o?a0.createPortal(d.jsx(Afe,{scope:t.__scopeSelect,children:d.jsx(U2.Slot,{scope:t.__scopeSelect,children:d.jsx("div",{children:t.children})})}),o):null}return d.jsx(Mfe,{...t,ref:e})});Cfe.displayName=fm;var Hl=10,[Afe,xh]=q0(fm),Urt="SelectContentImpl",Mfe=_.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:o,onPointerDownOutside:a,side:s,sideOffset:l,align:c,alignOffset:u,arrowPadding:f,collisionBoundary:h,collisionPadding:p,sticky:y,hideWhenDetached:g,avoidCollisions:v,...b}=t,w=vh(fm,n),[T,C]=_.useState(null),[P,M]=_.useState(null),k=Kt(e,ie=>C(ie)),[I,U]=_.useState(null),[z,O]=_.useState(null),B=B2(n),[$,F]=_.useState(!1),J=_.useRef(!1);_.useEffect(()=>{if(T)return hA(T)},[T]),iA();const K=_.useCallback(ie=>{const[pe,...de]=B().map(ee=>ee.ref.current),[ce]=de.slice(-1),he=document.activeElement;for(const ee of ie)if(ee===he||(ee==null||ee.scrollIntoView({block:"nearest"}),ee===pe&&P&&(P.scrollTop=0),ee===ce&&P&&(P.scrollTop=P.scrollHeight),ee==null||ee.focus(),document.activeElement!==he))return},[B,P]),Z=_.useCallback(()=>K([I,T]),[K,I,T]);_.useEffect(()=>{$&&Z()},[$,Z]);const{onOpenChange:H,triggerPointerDownPosRef:Y}=w;_.useEffect(()=>{if(T){let ie={x:0,y:0};const pe=ce=>{var he,ee;ie={x:Math.abs(Math.round(ce.pageX)-(((he=Y.current)==null?void 0:he.x)??0)),y:Math.abs(Math.round(ce.pageY)-(((ee=Y.current)==null?void 0:ee.y)??0))}},de=ce=>{ie.x<=10&&ie.y<=10?ce.preventDefault():T.contains(ce.target)||H(!1),document.removeEventListener("pointermove",pe),Y.current=null};return Y.current!==null&&(document.addEventListener("pointermove",pe),document.addEventListener("pointerup",de,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",pe),document.removeEventListener("pointerup",de,{capture:!0})}}},[T,H,Y]),_.useEffect(()=>{const ie=()=>H(!1);return window.addEventListener("blur",ie),window.addEventListener("resize",ie),()=>{window.removeEventListener("blur",ie),window.removeEventListener("resize",ie)}},[H]);const[L,N]=Wfe(ie=>{const pe=B().filter(he=>!he.disabled),de=pe.find(he=>he.ref.current===document.activeElement),ce=Gfe(pe,ie,de);ce&&setTimeout(()=>ce.ref.current.focus())}),V=_.useCallback((ie,pe,de)=>{const ce=!J.current&&!de;(w.value!==void 0&&w.value===pe||ce)&&(U(ie),ce&&(J.current=!0))},[w.value]),W=_.useCallback(()=>T==null?void 0:T.focus(),[T]),ne=_.useCallback((ie,pe,de)=>{const ce=!J.current&&!de;(w.value!==void 0&&w.value===pe||ce)&&O(ie)},[w.value]),se=r==="popper"?c3:Pfe,te=se===c3?{side:s,sideOffset:l,align:c,alignOffset:u,arrowPadding:f,collisionBoundary:h,collisionPadding:p,sticky:y,hideWhenDetached:g,avoidCollisions:v}:{};return d.jsx(Afe,{scope:n,content:T,viewport:P,onViewportChange:M,itemRefCallback:V,selectedItem:I,onItemLeave:W,itemTextRefCallback:ne,focusSelectedItem:Z,selectedItemText:z,position:r,isPositioned:$,searchRef:L,children:d.jsx(M1,{as:ud,allowPinchZoom:!0,children:d.jsx(_1,{asChild:!0,trapped:w.open,onMountAutoFocus:ie=>{ie.preventDefault()},onUnmountAutoFocus:ut(i,ie=>{var pe;(pe=w.trigger)==null||pe.focus({preventScroll:!0}),ie.preventDefault()}),children:d.jsx(gm,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:a,onFocusOutside:ie=>ie.preventDefault(),onDismiss:()=>w.onOpenChange(!1),children:d.jsx(se,{role:"listbox",id:w.contentId,"data-state":w.open?"open":"closed",dir:w.dir,onContextMenu:ie=>ie.preventDefault(),...b,...te,onPlaced:()=>F(!0),ref:k,style:{display:"flex",flexDirection:"column",outline:"none",...b.style},onKeyDown:ut(b.onKeyDown,ie=>{const pe=ie.ctrlKey||ie.altKey||ie.metaKey;if(ie.key==="Tab"&&ie.preventDefault(),!pe&&ie.key.length===1&&N(ie.key),["ArrowUp","ArrowDown","Home","End"].includes(ie.key)){let ce=B().filter(he=>!he.disabled).map(he=>he.ref.current);if(["ArrowUp","End"].includes(ie.key)&&(ce=ce.slice().reverse()),["ArrowUp","ArrowDown"].includes(ie.key)){const he=ie.target,ee=ce.indexOf(he);ce=ce.slice(ee+1)}setTimeout(()=>K(ce)),ie.preventDefault()}})})})})})})});Mfe.displayName=Urt;var Brt="SelectItemAlignedPosition",Pfe=_.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...i}=t,o=vh(fm,n),a=xh(fm,n),[s,l]=_.useState(null),[c,u]=_.useState(null),f=Kt(e,k=>u(k)),h=B2(n),p=_.useRef(!1),y=_.useRef(!0),{viewport:g,selectedItem:v,selectedItemText:b,focusSelectedItem:w}=a,T=_.useCallback(()=>{if(o.trigger&&o.valueNode&&s&&c&&g&&v&&b){const k=o.trigger.getBoundingClientRect(),I=c.getBoundingClientRect(),U=o.valueNode.getBoundingClientRect(),z=b.getBoundingClientRect();if(o.dir!=="rtl"){const he=z.left-I.left,ee=U.left-he,xe=k.left-ee,be=k.width+xe,Ae=Math.max(be,I.width),Ce=window.innerWidth-Hl,oe=vb(ee,[Hl,Math.max(Hl,Ce-Ae)]);s.style.minWidth=be+"px",s.style.left=oe+"px"}else{const he=I.right-z.right,ee=window.innerWidth-U.right-he,xe=window.innerWidth-k.right-ee,be=k.width+xe,Ae=Math.max(be,I.width),Ce=window.innerWidth-Hl,oe=vb(ee,[Hl,Math.max(Hl,Ce-Ae)]);s.style.minWidth=be+"px",s.style.right=oe+"px"}const O=h(),B=window.innerHeight-Hl*2,$=g.scrollHeight,F=window.getComputedStyle(c),J=parseInt(F.borderTopWidth,10),K=parseInt(F.paddingTop,10),Z=parseInt(F.borderBottomWidth,10),H=parseInt(F.paddingBottom,10),Y=J+K+$+H+Z,L=Math.min(v.offsetHeight*5,Y),N=window.getComputedStyle(g),V=parseInt(N.paddingTop,10),W=parseInt(N.paddingBottom,10),ne=k.top+k.height/2-Hl,se=B-ne,te=v.offsetHeight/2,ie=v.offsetTop+te,pe=J+K+ie,de=Y-pe;if(pe<=ne){const he=O.length>0&&v===O[O.length-1].ref.current;s.style.bottom="0px";const ee=c.clientHeight-g.offsetTop-g.offsetHeight,xe=Math.max(se,te+(he?W:0)+ee+Z),be=pe+xe;s.style.height=be+"px"}else{const he=O.length>0&&v===O[0].ref.current;s.style.top="0px";const xe=Math.max(ne,J+g.offsetTop+(he?V:0)+te)+de;s.style.height=xe+"px",g.scrollTop=pe-ne+g.offsetTop}s.style.margin=`${Hl}px 0`,s.style.minHeight=L+"px",s.style.maxHeight=B+"px",r==null||r(),requestAnimationFrame(()=>p.current=!0)}},[h,o.trigger,o.valueNode,s,c,g,v,b,o.dir,r]);$i(()=>T(),[T]);const[C,P]=_.useState();$i(()=>{c&&P(window.getComputedStyle(c).zIndex)},[c]);const M=_.useCallback(k=>{k&&y.current===!0&&(T(),w==null||w(),y.current=!1)},[T,w]);return d.jsx(Hrt,{scope:n,contentWrapper:s,shouldExpandOnScrollRef:p,onScrollButtonChange:M,children:d.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:C},children:d.jsx(At.div,{...i,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});Pfe.displayName=Brt;var $rt="SelectPopperPosition",c3=_.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:i=Hl,...o}=t,a=$2(n);return d.jsx(uA,{...a,...o,ref:e,align:r,collisionPadding:i,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});c3.displayName=$rt;var[Hrt,uU]=q0(fm,{}),u3="SelectViewport",kfe=_.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...i}=t,o=xh(u3,n),a=uU(u3,n),s=Kt(e,o.onViewportChange),l=_.useRef(0);return d.jsxs(d.Fragment,{children:[d.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),d.jsx(U2.Slot,{scope:n,children:d.jsx(At.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:s,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:ut(i.onScroll,c=>{const u=c.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:h}=a;if(h!=null&&h.current&&f){const p=Math.abs(l.current-u.scrollTop);if(p>0){const y=window.innerHeight-Hl*2,g=parseFloat(f.style.minHeight),v=parseFloat(f.style.height),b=Math.max(g,v);if(b<y){const w=b+p,T=Math.min(y,w),C=w-T;f.style.height=T+"px",f.style.bottom==="0px"&&(u.scrollTop=C>0?C:0,f.style.justifyContent="flex-end")}}}l.current=u.scrollTop})})})]})});kfe.displayName=u3;var Nfe="SelectGroup",[Vrt,Wrt]=q0(Nfe),Grt=_.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=Xa();return d.jsx(Vrt,{scope:n,id:i,children:d.jsx(At.div,{role:"group","aria-labelledby":i,...r,ref:e})})});Grt.displayName=Nfe;var Rfe="SelectLabel",jfe=_.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=Wrt(Rfe,n);return d.jsx(At.div,{id:i.id,...r,ref:e})});jfe.displayName=Rfe;var WC="SelectItem",[qrt,Ife]=q0(WC),Ofe=_.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:i=!1,textValue:o,...a}=t,s=vh(WC,n),l=xh(WC,n),c=s.value===r,[u,f]=_.useState(o??""),[h,p]=_.useState(!1),y=Kt(e,w=>{var T;return(T=l.itemRefCallback)==null?void 0:T.call(l,w,r,i)}),g=Xa(),v=_.useRef("touch"),b=()=>{i||(s.onValueChange(r),s.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return d.jsx(qrt,{scope:n,value:r,disabled:i,textId:g,isSelected:c,onItemTextChange:_.useCallback(w=>{f(T=>T||((w==null?void 0:w.textContent)??"").trim())},[]),children:d.jsx(U2.ItemSlot,{scope:n,value:r,disabled:i,textValue:u,children:d.jsx(At.div,{role:"option","aria-labelledby":g,"data-highlighted":h?"":void 0,"aria-selected":c&&h,"data-state":c?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...a,ref:y,onFocus:ut(a.onFocus,()=>p(!0)),onBlur:ut(a.onBlur,()=>p(!1)),onClick:ut(a.onClick,()=>{v.current!=="mouse"&&b()}),onPointerUp:ut(a.onPointerUp,()=>{v.current==="mouse"&&b()}),onPointerDown:ut(a.onPointerDown,w=>{v.current=w.pointerType}),onPointerMove:ut(a.onPointerMove,w=>{var T;v.current=w.pointerType,i?(T=l.onItemLeave)==null||T.call(l):v.current==="mouse"&&w.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ut(a.onPointerLeave,w=>{var T;w.currentTarget===document.activeElement&&((T=l.onItemLeave)==null||T.call(l))}),onKeyDown:ut(a.onKeyDown,w=>{var C;((C=l.searchRef)==null?void 0:C.current)!==""&&w.key===" "||(jrt.includes(w.key)&&b(),w.key===" "&&w.preventDefault())})})})})});Ofe.displayName=WC;var Mw="SelectItemText",Lfe=_.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,...o}=t,a=vh(Mw,n),s=xh(Mw,n),l=Ife(Mw,n),c=Drt(Mw,n),[u,f]=_.useState(null),h=Kt(e,b=>f(b),l.onItemTextChange,b=>{var w;return(w=s.itemTextRefCallback)==null?void 0:w.call(s,b,l.value,l.disabled)}),p=u==null?void 0:u.textContent,y=_.useMemo(()=>d.jsx("option",{value:l.value,disabled:l.disabled,children:p},l.value),[l.disabled,l.value,p]),{onNativeOptionAdd:g,onNativeOptionRemove:v}=c;return $i(()=>(g(y),()=>v(y)),[g,v,y]),d.jsxs(d.Fragment,{children:[d.jsx(At.span,{id:l.textId,...o,ref:h}),l.isSelected&&a.valueNode&&!a.valueNodeHasChildren?a0.createPortal(o.children,a.valueNode):null]})});Lfe.displayName=Mw;var Dfe="SelectItemIndicator",Ffe=_.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return Ife(Dfe,n).isSelected?d.jsx(At.span,{"aria-hidden":!0,...r,ref:e}):null});Ffe.displayName=Dfe;var d3="SelectScrollUpButton",zfe=_.forwardRef((t,e)=>{const n=xh(d3,t.__scopeSelect),r=uU(d3,t.__scopeSelect),[i,o]=_.useState(!1),a=Kt(e,r.onScrollButtonChange);return $i(()=>{if(n.viewport&&n.isPositioned){let s=function(){const c=l.scrollTop>0;o(c)};const l=n.viewport;return s(),l.addEventListener("scroll",s),()=>l.removeEventListener("scroll",s)}},[n.viewport,n.isPositioned]),i?d.jsx(Bfe,{...t,ref:a,onAutoScroll:()=>{const{viewport:s,selectedItem:l}=n;s&&l&&(s.scrollTop=s.scrollTop-l.offsetHeight)}}):null});zfe.displayName=d3;var f3="SelectScrollDownButton",Ufe=_.forwardRef((t,e)=>{const n=xh(f3,t.__scopeSelect),r=uU(f3,t.__scopeSelect),[i,o]=_.useState(!1),a=Kt(e,r.onScrollButtonChange);return $i(()=>{if(n.viewport&&n.isPositioned){let s=function(){const c=l.scrollHeight-l.clientHeight,u=Math.ceil(l.scrollTop)<c;o(u)};const l=n.viewport;return s(),l.addEventListener("scroll",s),()=>l.removeEventListener("scroll",s)}},[n.viewport,n.isPositioned]),i?d.jsx(Bfe,{...t,ref:a,onAutoScroll:()=>{const{viewport:s,selectedItem:l}=n;s&&l&&(s.scrollTop=s.scrollTop+l.offsetHeight)}}):null});Ufe.displayName=f3;var Bfe=_.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...i}=t,o=xh("SelectScrollButton",n),a=_.useRef(null),s=B2(n),l=_.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return _.useEffect(()=>()=>l(),[l]),$i(()=>{var u;const c=s().find(f=>f.ref.current===document.activeElement);(u=c==null?void 0:c.ref.current)==null||u.scrollIntoView({block:"nearest"})},[s]),d.jsx(At.div,{"aria-hidden":!0,...i,ref:e,style:{flexShrink:0,...i.style},onPointerDown:ut(i.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(r,50))}),onPointerMove:ut(i.onPointerMove,()=>{var c;(c=o.onItemLeave)==null||c.call(o),a.current===null&&(a.current=window.setInterval(r,50))}),onPointerLeave:ut(i.onPointerLeave,()=>{l()})})}),Yrt="SelectSeparator",$fe=_.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return d.jsx(At.div,{"aria-hidden":!0,...r,ref:e})});$fe.displayName=Yrt;var h3="SelectArrow",Xrt=_.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=$2(n),o=vh(h3,n),a=xh(h3,n);return o.open&&a.position==="popper"?d.jsx(dA,{...i,...r,ref:e}):null});Xrt.displayName=h3;function Hfe(t){return t===""||t===void 0}var Vfe=_.forwardRef((t,e)=>{const{value:n,...r}=t,i=_.useRef(null),o=Kt(e,i),a=TA(n);return _.useEffect(()=>{const s=i.current,l=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(a!==n&&u){const f=new Event("change",{bubbles:!0});u.call(s,n),s.dispatchEvent(f)}},[a,n]),d.jsx(wS,{asChild:!0,children:d.jsx("select",{...r,ref:o,defaultValue:n})})});Vfe.displayName="BubbleSelect";function Wfe(t){const e=Br(t),n=_.useRef(""),r=_.useRef(0),i=_.useCallback(a=>{const s=n.current+a;e(s),function l(c){n.current=c,window.clearTimeout(r.current),c!==""&&(r.current=window.setTimeout(()=>l(""),1e3))}(s)},[e]),o=_.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return _.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,i,o]}function Gfe(t,e,n){const i=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,o=n?t.indexOf(n):-1;let a=Krt(t,Math.max(o,0));i.length===1&&(a=a.filter(c=>c!==n));const l=a.find(c=>c.textValue.toLowerCase().startsWith(i.toLowerCase()));return l!==n?l:void 0}function Krt(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var Jrt=xfe,qfe=bfe,Zrt=Efe,Qrt=_fe,eit=Tfe,Yfe=Cfe,tit=kfe,Xfe=jfe,Kfe=Ofe,nit=Lfe,rit=Ffe,Jfe=zfe,Zfe=Ufe,Qfe=$fe;const iit=Jrt,oit=Zrt,ehe=_.forwardRef(({className:t,children:e,...n},r)=>d.jsxs(qfe,{ref:r,className:He("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,d.jsx(Qrt,{asChild:!0,children:d.jsx(b1,{className:"h-4 w-4 opacity-50"})})]}));ehe.displayName=qfe.displayName;const the=_.forwardRef(({className:t,...e},n)=>d.jsx(Jfe,{ref:n,className:He("flex cursor-default items-center justify-center py-1",t),...e,children:d.jsx(D3,{className:"h-4 w-4"})}));the.displayName=Jfe.displayName;const nhe=_.forwardRef(({className:t,...e},n)=>d.jsx(Zfe,{ref:n,className:He("flex cursor-default items-center justify-center py-1",t),...e,children:d.jsx(b1,{className:"h-4 w-4"})}));nhe.displayName=Zfe.displayName;const rhe=_.forwardRef(({className:t,children:e,position:n="popper",...r},i)=>d.jsx(eit,{children:d.jsxs(Yfe,{ref:i,className:He("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[d.jsx(the,{}),d.jsx(tit,{className:He("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),d.jsx(nhe,{})]})}));rhe.displayName=Yfe.displayName;const ait=_.forwardRef(({className:t,...e},n)=>d.jsx(Xfe,{ref:n,className:He("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));ait.displayName=Xfe.displayName;const p3=_.forwardRef(({className:t,children:e,...n},r)=>d.jsxs(Kfe,{ref:r,className:He("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[d.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:d.jsx(rit,{children:d.jsx(Sd,{className:"h-4 w-4"})})}),d.jsx(nit,{children:e})]}));p3.displayName=Kfe.displayName;const sit=_.forwardRef(({className:t,...e},n)=>d.jsx(Qfe,{ref:n,className:He("-mx-1 my-1 h-px bg-muted",t),...e}));sit.displayName=Qfe.displayName;const m3=({className:t="",style:e})=>d.jsxs(ec,{variant:"secondary",className:`ml-2 bg-gradient-to-r from-yellow-400 to-orange-500 text-white border-0 text-xs font-semibold ${t}`,style:e,children:[d.jsx(rc,{className:"w-3 h-3 mr-1"}),d.jsx(Q,{text:"Premium",forceTranslate:!0})]}),bK=[{code:"en",label:"English",region:"European"},{code:"es",label:"Espaol",region:"European"},{code:"fr",label:"Franais",region:"European"},{code:"de",label:"Deutsch",region:"European"},{code:"hi",label:"",region:"Indian"},{code:"zh",label:"",region:"Asian"},{code:"ja",label:"",region:"Asian"},{code:"ru",label:"",region:"European"},{code:"ar",label:"",region:"Middle Eastern"},{code:"pt",label:"Portugus",region:"European"},{code:"bn",label:"",region:"Indian"},{code:"ta",label:"",region:"Indian"},{code:"te",label:"",region:"Indian"},{code:"mr",label:"",region:"Indian"},{code:"gu",label:"",region:"Indian"},{code:"kn",label:"",region:"Indian"},{code:"ml",label:"",region:"Indian"},{code:"pa",label:"",region:"Indian"},{code:"as",label:"",region:"Indian"},{code:"or",label:"",region:"Indian"},{code:"ur",label:"",region:"Indian"},{code:"sd",label:"",region:"Indian"},{code:"ks",label:"",region:"Indian"},{code:"kok",label:"",region:"Indian"},{code:"mai",label:"",region:"Indian"},{code:"it",label:"Italiano",region:"European"},{code:"ko",label:"",region:"Asian"},{code:"tr",label:"Trke",region:"European"},{code:"nl",label:"Nederlands",region:"European"},{code:"pl",label:"Polski",region:"European"},{code:"sv",label:"Svenska",region:"European"},{code:"th",label:"",region:"Asian"},{code:"vi",label:"Ting Vit",region:"Asian"},{code:"id",label:"Bahasa Indonesia",region:"Asian"},{code:"uk",label:"",region:"European"},{code:"el",label:"",region:"European"},{code:"ro",label:"Romn",region:"European"},{code:"hu",label:"Magyar",region:"European"},{code:"cs",label:"etina",region:"European"},{code:"he",label:"",region:"Middle Eastern"}],wy=[{title:"Your Voice Journaling Companion",subtitle:"",description:"Welcome to Voice Journaling - Just speak and we'll do the rest",illustration:t=>d.jsxs("div",{className:"flex flex-col justify-center items-center my-2",children:[d.jsxs(Ke.div,{className:"relative w-full h-48",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.5,delay:.2},children:[d.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-10 mb-12",children:d.jsx("div",{className:"relative z-20",children:d.jsx(Yc,{size:"large",className:"scale-[2.2]",useColorTheme:!1,textClassName:"font-bold text-white"})})}),d.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-5 mt-12",children:d.jsx("div",{className:"absolute w-full h-16 flex items-center justify-center overflow-hidden",children:d.jsx(Nrt,{isRecording:!1,audioLevel:.5,ripples:[],fullWidth:!0})})})]}),d.jsx(Ke.h1,{className:"text-2xl font-bold mb-3 mt-8 text-foreground text-center",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:d.jsx(Q,{text:"Your Voice Journaling Companion",forceTranslate:!0})}),d.jsx(Ke.p,{className:"text-muted-foreground mb-6 max-w-xs font-medium text-theme animate-pulse text-center",initial:{opacity:0,y:20},animate:{opacity:1,y:0,scale:[1,1.05,1]},transition:{delay:.4,scale:{repeat:1/0,duration:2,ease:"easeInOut"}},children:d.jsx(Q,{text:"Express your thoughts and feelings with voice notes - we'll do the rest.",forceTranslate:!0})}),d.jsx(Ke.div,{className:"mt-4 w-full max-w-xs",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},children:d.jsxs("div",{className:"flex flex-col gap-2 bg-background/90 p-4 rounded-lg border border-theme-light",children:[d.jsx("label",{className:"text-sm font-medium text-foreground",children:d.jsx(Q,{text:"Preferred Language",forceTranslate:!0})}),d.jsx(cit,{})]})})]}),buttonText:"Get Started"},{title:"Your Data is Private",subtitle:"",description:"Your journal entries are securely stored and only accessible to you. We take your privacy seriously.",illustration:t=>d.jsx("div",{className:"flex justify-center items-center my-2",children:d.jsx(Ke.div,{className:"relative w-64 h-64 flex items-center justify-center",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:d.jsx(Ke.div,{className:"relative z-10 bg-white/90 dark:bg-gray-800/90 rounded-xl p-5 shadow-lg border border-theme-light",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3},children:d.jsxs("div",{className:"w-44 h-44 flex flex-col items-center justify-center",children:[d.jsx(Ke.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",delay:.5},className:"w-20 h-20 bg-theme-light rounded-full flex items-center justify-center mb-4",children:d.jsxs(Ke.div,{className:"relative w-10 h-10",children:[d.jsx(Ke.div,{initial:{opacity:0},animate:{opacity:[0,1,1,0]},transition:{times:[0,.2,.8,1],duration:2.5,repeat:1/0,repeatDelay:1.5},className:"absolute inset-0 flex justify-center items-center z-20",children:d.jsx(C0e,{className:"w-10 h-10 text-theme"})}),d.jsx(Ke.div,{initial:{opacity:0},animate:{opacity:[0,0,1,1]},transition:{times:[0,.8,.9,1],duration:2.5,repeat:1/0,repeatDelay:1.5},className:"absolute inset-0 flex justify-center items-center z-10",children:d.jsx(A0e,{className:"w-10 h-10 text-theme"})}),d.jsx(Ke.div,{className:"absolute top-0 left-0 w-full h-full overflow-hidden",initial:{opacity:0},animate:{opacity:1},children:[...Array(12)].map((e,n)=>d.jsx(Ke.div,{className:"absolute w-1.5 h-1.5 rounded-full bg-theme",style:{left:`${40+Math.random()*20}%`,top:n%2===0?"-20%":"-30%"},initial:{opacity:0},animate:{y:[0,55],opacity:[0,1,0]},transition:{y:{duration:1},opacity:{duration:1,times:[0,.3,1]},delay:n*.1,repeat:1/0,repeatDelay:2}},`data-particle-${n}`))}),d.jsx(Ke.div,{className:"absolute top-0 left-0 w-full h-full pointer-events-none",animate:{scale:[1,1.3,1],opacity:[0,.7,0]},transition:{duration:.8,delay:2,repeat:1/0,repeatDelay:2.2},children:d.jsx("div",{className:"w-full h-full rounded-full border-2 border-theme"})})]})}),d.jsx(Ke.div,{className:"w-full h-2 bg-muted rounded-full overflow-hidden mt-2",initial:{width:0},animate:{width:"100%"},transition:{delay:.7,duration:.5},children:d.jsx(Ke.div,{className:"h-full bg-theme",initial:{width:"0%"},animate:{width:"100%"},transition:{delay:.9,duration:.7}})}),d.jsx(Ke.div,{className:"mt-4 flex space-x-1",initial:{opacity:0},animate:{opacity:1},transition:{delay:1.2},children:[...Array(3)].map((e,n)=>d.jsx("div",{className:"w-2 h-2 rounded-full bg-theme-light"},n))})]})})})}),buttonText:"Next"},{title:"Voice Journaling",subtitle:"",description:"Record your thoughts with voice notes that are automatically transcribed and analyzed for emotional patterns.",illustration:t=>d.jsx("div",{className:"flex justify-center items-center my-2",children:d.jsxs("div",{className:"relative w-64 h-64 flex items-center justify-center overflow-hidden",children:[[45,60,80,100].map((e,n)=>d.jsx(Ke.div,{className:`absolute rounded-full ${n%2===0?"bg-theme/30 dark:bg-theme/30":"bg-theme-light/30 dark:bg-theme-light/30"}`,style:{width:e,height:e},animate:{scale:[1,1.2,1],opacity:[.15,.25,.15]},transition:{duration:2+n*.5,repeat:1/0,ease:"easeInOut",delay:n*.2}},`circle-${n}`)),d.jsx(Ke.div,{className:"relative w-28 h-28 rounded-full bg-theme-light flex items-center justify-center",animate:{scale:[1,1.1,1],boxShadow:["0 0 0 0 rgba(var(--color-theme), 0.7)","0 0 0 15px rgba(var(--color-theme), 0)","0 0 0 0 rgba(var(--color-theme), 0)"]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"},children:d.jsx("div",{className:"w-20 h-20 rounded-full bg-theme flex items-center justify-center text-white",children:d.jsx(Vf,{className:"w-10 h-10 animate-pulse"})})})]})}),buttonText:"Next"},{title:"AI Analysis",subtitle:"",description:"Get insights into your emotional patterns and growth through advanced AI analysis.",isPremium:!0,illustration:t=>d.jsx("div",{className:"flex justify-center items-center my-2",children:d.jsxs("div",{className:"relative w-64 h-64 flex flex-col items-center justify-center overflow-hidden p-4",children:[d.jsx(Ke.div,{className:"relative z-10 mb-3",initial:{scale:0},animate:{scale:1},transition:{type:"spring",delay:.2},children:d.jsx(Qp,{className:"w-12 h-12 text-theme"})}),d.jsx(Ke.div,{className:"flex flex-wrap gap-2 max-w-[200px] justify-center relative z-10",initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},children:["Joy","Growth","Progress","Health","Focus","Connection","Creativity"].map((e,n)=>d.jsx(Ke.div,{className:"px-3 py-1 bg-theme/20 rounded-full text-sm font-medium text-theme",initial:{scale:0,opacity:0},animate:{scale:1,opacity:1,y:[0,n%2===0?-5:5,0]},transition:{delay:n*.1+.5,y:{duration:2,repeat:1/0,repeatType:"reverse",ease:"easeInOut",delay:n*.2}},children:d.jsx(Q,{text:e,forceTranslate:!0})},e))})]})}),buttonText:"Next"},{title:"Chat with Your Journal",subtitle:"",description:"Ask questions about your emotions, patterns, and growth through natural conversation with AI.",isPremium:!0,illustration:t=>d.jsx("div",{className:"flex justify-center items-center my-2 w-full",children:d.jsxs("div",{className:"relative w-full max-w-xs bg-theme-dark/30 dark:bg-theme-dark/30 rounded-xl flex items-center justify-center overflow-hidden p-4",children:[d.jsx(Ke.div,{className:"absolute inset-0 bg-gradient-to-b from-transparent to-theme/10",animate:{opacity:[.3,.5,.3]},transition:{duration:3,repeat:1/0,ease:"easeInOut"}}),d.jsxs("div",{className:"relative z-10 flex flex-col gap-3 w-full mt-4 mb-2",children:[d.jsx(Ke.div,{className:"self-start max-w-[90%] bg-white dark:bg-white p-2.5 rounded-2xl rounded-bl-none text-sm text-gray-800",initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.3},children:d.jsx(Q,{text:"How have I been feeling lately?",forceTranslate:!0})}),d.jsx(Ke.div,{className:"self-end max-w-[90%] bg-theme text-white p-2.5 rounded-2xl rounded-br-none text-sm",initial:{x:20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.9},children:d.jsx(Q,{text:"Based on your recent entries, you've been feeling more positive and energetic this week...",forceTranslate:!0})}),d.jsx(Ke.div,{className:"self-start flex items-center justify-center w-10 h-10 bg-muted rounded-full mt-1.5",initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},transition:{delay:1.5,type:"spring"},children:d.jsx(tA,{className:"w-5 h-5 text-primary"})})]})]})}),buttonText:"Next"},{title:"Track Your Emotional Journey",subtitle:"",description:"See your emotional patterns and growth over time with beautiful visualizations.",isPremium:!0,illustration:t=>d.jsx("div",{className:"flex justify-center items-center my-2",children:d.jsxs("div",{className:"relative w-64 h-64 flex items-center justify-center overflow-hidden",children:[d.jsx(Ke.div,{className:"absolute inset-0 bg-gradient-to-b from-theme/10 to-theme/30 dark:from-theme/10 dark:to-theme/30",animate:{opacity:[.3,.5,.3],rotate:[0,5,0,-5,0]},transition:{opacity:{duration:3,repeat:1/0,ease:"easeInOut"},rotate:{duration:10,repeat:1/0,ease:"easeInOut"}}}),d.jsx("div",{className:"relative z-10 w-48 h-48 flex items-center justify-center",children:d.jsxs(Ke.div,{className:"w-44 h-32 bg-white/90 dark:bg-gray-800/90 rounded-xl p-3 shadow-lg",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:[d.jsxs("div",{className:"flex items-center justify-between mb-2",children:[d.jsx("div",{className:"text-xs font-medium text-theme",children:d.jsx(Q,{text:"Mood Trends",forceTranslate:!0})}),d.jsx(Ff,{className:"w-4 h-4 text-theme"})]}),d.jsxs("svg",{viewBox:"0 0 100 50",className:"w-full h-16",children:[d.jsx("defs",{children:d.jsxs("linearGradient",{id:"gradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[d.jsx("stop",{offset:"0%",stopColor:"var(--color-theme)",stopOpacity:"0.5"}),d.jsx("stop",{offset:"100%",stopColor:"var(--color-theme)",stopOpacity:"0"})]})}),d.jsx(Ke.path,{d:"M0,40 C10,35 20,25 30,30 C40,35 50,20 60,15 C70,10 80,5 100,10",fill:"none",stroke:"var(--color-theme)",strokeWidth:"2",initial:{pathLength:0},animate:{pathLength:1},transition:{duration:2,delay:.5}}),d.jsx(Ke.path,{d:"M0,40 C10,35 20,25 30,30 C40,35 50,20 60,15 C70,10 80,5 100,10 V50 H0 Z",fill:"url(#gradient)",initial:{opacity:0},animate:{opacity:1},transition:{duration:1,delay:2}}),[{x:30,y:30,delay:1.5},{x:60,y:15,delay:1.8},{x:80,y:5,delay:2.1}].map((e,n)=>d.jsx(Ke.circle,{cx:e.x,cy:e.y,r:"3",fill:"var(--color-theme)",initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{delay:e.delay}},`point-${n}`))]}),d.jsxs(Ke.div,{className:"flex justify-between text-xs text-muted-foreground mt-1",initial:{opacity:0},animate:{opacity:1},transition:{delay:2.2},children:[d.jsx("span",{children:d.jsx(Q,{text:"Jan",forceTranslate:!0})}),d.jsx("span",{children:d.jsx(Q,{text:"Mar",forceTranslate:!0})}),d.jsx("span",{children:d.jsx(Q,{text:"Now",forceTranslate:!0})})]})]})})]})}),buttonText:"Next"},{title:"What Should We Call You?",subtitle:"",description:"Your name helps us make your journey more personal.",illustration:t=>d.jsx("div",{className:"flex flex-col justify-center items-center my-2 w-full",children:d.jsxs(Ke.div,{className:"relative w-full max-w-xs bg-theme-dark/30 dark:bg-theme-dark/30 rounded-xl flex flex-col items-center justify-center overflow-hidden p-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[d.jsx(Ke.div,{className:"w-20 h-20 bg-theme/20 rounded-full flex items-center justify-center mb-6",initial:{scale:0},animate:{scale:1},transition:{type:"spring",delay:.3},children:d.jsx(fv,{className:"w-10 h-10 text-theme"})}),d.jsxs(Ke.div,{className:"w-full space-y-4",initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},children:[d.jsx(lit,{name:t.name,setName:t.setName}),d.jsx("div",{className:"text-sm text-muted-foreground text-center",children:d.jsx(Q,{text:"This is how SOuLO will address you",forceTranslate:!0})})]}),d.jsx(Ke.div,{className:"absolute -z-10 inset-0 opacity-20",animate:{background:["radial-gradient(circle at 20% 20%, var(--color-theme-dark) 0%, transparent 70%)","radial-gradient(circle at 80% 80%, var(--color-theme-dark) 0%, transparent 70%)","radial-gradient(circle at 20% 20%, var(--color-theme-dark) 0%, transparent 70%)"]},transition:{duration:8,repeat:1/0,ease:"easeInOut"}})]})}),buttonText:"Continue"},{title:"Ready to Start Your Journey?",subtitle:"",description:"",illustration:t=>d.jsx("div",{className:"flex justify-center items-center my-2",children:d.jsxs(Ke.div,{className:"relative w-64 h-64 rounded-xl flex items-center justify-center overflow-hidden",animate:{boxShadow:["0 0 0 0px rgba(var(--color-theme), 0.2)","0 0 0 20px rgba(var(--color-theme), 0)","0 0 0 0px rgba(var(--color-theme), 0.2)"]},transition:{repeat:1/0,duration:2.5,ease:"easeInOut"},children:[d.jsx(Ke.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:100,delay:.3},children:d.jsx(Yc,{size:"large",className:"scale-[2.5]",useColorTheme:!1,animate:!0,textClassName:"font-bold text-white"})}),d.jsx(Ke.div,{className:"absolute bottom-5 w-full flex justify-center",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1},children:d.jsx("div",{className:"text-theme text-sm font-medium text-center",children:d.jsx(Q,{text:"Emotional wellness through voice",forceTranslate:!0})})})]})}),buttonText:"Sign In"}],lit=({name:t,setName:e})=>{const{translate:n,currentLanguage:r}=In(),[i,o]=_.useState("Enter your name");return _.useEffect(()=>{(async()=>{if(r!=="en")try{const s=await n("Enter your name","en");o(s)}catch(s){console.error("Failed to translate placeholder:",s),o("Enter your name")}else o("Enter your name")})()},[r,n]),d.jsx(xm,{placeholder:i,value:t,onChange:a=>e(a.target.value),className:"bg-background/80 border-theme/20 focus:border-theme text-white",autoFocus:!0})},cit=()=>{var s;const{currentLanguage:t,setLanguage:e}=In(),n=l=>{e(l);try{const c=localStorage.getItem("recentLanguages")||"[]",u=JSON.parse(c),f=[l,...u.filter(h=>h!==l)].slice(0,3);localStorage.setItem("recentLanguages",JSON.stringify(f))}catch(c){console.error("Failed to store recent language:",c)}},i=(()=>{const l={};return bK.forEach(c=>{l[c.region]||(l[c.region]=[]),l[c.region].push(c)}),l})(),o=Object.keys(i),a=((s=bK.find(l=>l.code===t))==null?void 0:s.label)||"Select a language";return d.jsx("div",{className:"w-full",children:d.jsxs(iit,{value:t,onValueChange:n,children:[d.jsx(ehe,{className:"w-full bg-background/80 border-theme/20 text-white",children:d.jsx(oit,{placeholder:"Select a language",className:"text-white",children:a})}),d.jsx(rhe,{className:"max-h-[300px] bg-background/90 border-theme/30",children:o.map(l=>d.jsxs(ve.Fragment,{children:[d.jsx(p3,{value:`group_${l}`,disabled:!0,className:"font-semibold text-muted-foreground",children:l}),i[l].map(c=>d.jsx(p3,{value:c.code,className:"pl-6 hover:bg-theme/20 data-[state=checked]:bg-theme/40 data-[state=checked]:text-white",children:c.label},c.code))]},l))})]})})},uit=({onComplete:t})=>{const[e,n]=_.useState(0),[r,i]=_.useState(""),o=Za(),{setColorTheme:a}=Zr(),s=_.useRef(null),{user:l}=or(),c=e===6,u=e===wy.length-1;_.useEffect(()=>{a("Calm")},[a]);const f=()=>{if(e<wy.length-1){if(e===6&&!r.trim()){It.error("Please enter your name to continue");return}n(v=>v+1)}else r&&localStorage.setItem("user_display_name",r.trim()),localStorage.setItem("onboardingComplete","true"),t?t():o("/app/auth")},h=()=>{e>0&&n(v=>v-1)},p=()=>{console.log("Skip button clicked, user auth status:",!!l),r&&localStorage.setItem("user_display_name",r.trim()),localStorage.setItem("onboardingComplete","true"),t?t():l?(console.log("User is authenticated, navigating to /app/home"),o("/app/home")):(console.log("User is not authenticated, navigating to /app/auth"),o("/app/auth"))};vfe(s,{onSwipeLeft:()=>{e<wy.length-1&&f()},onSwipeRight:()=>{e>0&&h()},minDistance:50,disabled:c});const y=wy[e].illustration,g=wy[e];return d.jsx("div",{className:"flex flex-col h-[100dvh] bg-background dark",children:d.jsxs("div",{ref:s,className:"flex-1 flex flex-col overflow-hidden relative",children:[d.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-background to-theme/5 pointer-events-none"}),d.jsx("div",{className:"absolute top-4 left-0 right-0 z-10 flex justify-center",children:d.jsx("div",{className:"flex space-x-2",children:wy.map((v,b)=>d.jsx(Ke.div,{className:He("w-2 h-2 rounded-full transition-all duration-300",e===b?"bg-theme w-6":"bg-muted"),animate:e===b?{scale:[1,1.2,1]}:{},transition:{duration:.5,repeat:e===b?1/0:0,repeatDelay:1.5}},b))})}),d.jsx("div",{className:"absolute top-4 right-4 z-10",children:d.jsx(ct,{variant:"ghost",size:"sm",onClick:p,className:"text-foreground hover:text-theme",children:d.jsx(Q,{text:"Skip",forceTranslate:!0})})}),d.jsx("div",{className:"flex-1 relative pt-12",children:d.jsx(Kc,{mode:"wait",children:d.jsx(Ke.div,{initial:{opacity:0,x:100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},transition:{duration:.3},className:"absolute inset-0 flex flex-col justify-center items-center px-6 text-center",children:e===0?d.jsx(y,{}):c?d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"flex items-center justify-center mb-2",children:[d.jsx("h2",{className:"text-2xl font-bold text-theme",children:d.jsx(Q,{text:g.title,forceTranslate:!0})}),g.isPremium&&d.jsx(m3,{})]}),g.description&&d.jsx("p",{className:"mb-8 text-muted-foreground max-w-xs",children:d.jsx(Q,{text:g.description,forceTranslate:!0})}),d.jsx(y,{name:r,setName:i})]}):d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"flex items-center justify-center mb-2",children:[d.jsx("h2",{className:"text-2xl font-bold text-theme",children:d.jsx(Q,{text:g.title,forceTranslate:!0})}),g.isPremium&&d.jsx(m3,{})]}),g.description&&d.jsx("p",{className:"mb-8 text-muted-foreground max-w-xs",children:d.jsx(Q,{text:g.description,forceTranslate:!0})}),d.jsx(y,{})]})},e)})}),d.jsx("div",{className:"pb-12 pt-4 px-6 relative z-10",children:d.jsxs("div",{className:"flex justify-between items-center",children:[e>0?d.jsx(ct,{variant:"outline",size:"icon",onClick:h,className:"bg-background/50 dark:bg-muted/20 border-muted hover:bg-muted/30 h-10 w-10",children:d.jsx(eA,{className:"w-5 h-5 text-foreground"})}):d.jsx("div",{className:"w-10"}),d.jsxs(ct,{size:"lg",onClick:f,className:"bg-theme hover:bg-theme-dark text-white",children:[d.jsx(Q,{text:g.buttonText,forceTranslate:!0}),!u&&d.jsx(S1,{className:"w-4 h-4 ml-2"})]})]})})]})})},dit=()=>{const{user:t}=or(),{onboardingComplete:e}=KC(),n=()=>t?e?d.jsx(ws,{to:"/app/home",replace:!0}):d.jsx(ws,{to:"/app/onboarding",replace:!0}):d.jsx(ws,{to:"/app/onboarding",replace:!0});return d.jsx(rme,{children:d.jsxs(pr,{element:d.jsx(ort,{}),children:[d.jsx(pr,{path:"/",element:d.jsx(kCe,{})}),d.jsx(pr,{path:"/privacy-policy",element:d.jsx(art,{})}),d.jsx(pr,{path:"/faq",element:d.jsx(Art,{})}),d.jsx(pr,{path:"/download",element:d.jsx(nrt,{})}),d.jsx(pr,{path:"/blog",element:d.jsx(Prt,{})}),d.jsx(pr,{path:"/blog/:slug",element:d.jsx(krt,{})}),d.jsx(pr,{path:"/app/onboarding",element:d.jsx(uit,{})}),d.jsx(pr,{path:"/app/auth",element:d.jsx(Qtt,{})}),d.jsx(pr,{path:"/app",element:d.jsx(n,{})}),d.jsxs(pr,{path:"/app",element:d.jsx(Jtt,{}),children:[d.jsx(pr,{path:"home",element:d.jsx(G2e,{})}),d.jsx(pr,{path:"journal",element:d.jsx(VPe,{})}),d.jsx(pr,{path:"insights",element:d.jsx(ve.Suspense,{fallback:d.jsx("div",{className:"flex items-center justify-center h-screen",children:"Loading..."}),children:d.jsx(uKe,{})})}),d.jsx(pr,{path:"chat",element:d.jsx(Ktt,{})}),d.jsx(pr,{path:"smart-chat",element:d.jsx(qtt,{})}),d.jsx(pr,{path:"settings",element:d.jsx(Dnt,{})})]}),d.jsx(pr,{path:"/auth",element:d.jsx(ws,{to:"/app/auth",replace:!0})}),d.jsx(pr,{path:"/onboarding",element:d.jsx(ws,{to:"/app/onboarding",replace:!0})}),d.jsx(pr,{path:"/home",element:d.jsx(ws,{to:"/app/home",replace:!0})}),d.jsx(pr,{path:"/journal",element:d.jsx(ws,{to:"/app/journal",replace:!0})}),d.jsx(pr,{path:"/insights",element:d.jsx(ws,{to:"/app/insights",replace:!0})}),d.jsx(pr,{path:"/chat",element:d.jsx(ws,{to:"/app/chat",replace:!0})}),d.jsx(pr,{path:"/smart-chat",element:d.jsx(ws,{to:"/app/smart-chat",replace:!0})}),d.jsx(pr,{path:"/settings",element:d.jsx(ws,{to:"/app/settings",replace:!0})}),d.jsx(pr,{path:"*",element:d.jsx(rrt,{})})]})})};var dU="ToastProvider",[fU,fit,hit]=f0("Toast"),[ihe,Fot]=sa("Toast",[hit]),[pit,H2]=ihe(dU),ohe=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:i="right",swipeThreshold:o=50,children:a}=t,[s,l]=_.useState(null),[c,u]=_.useState(0),f=_.useRef(!1),h=_.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${dU}\`. Expected non-empty \`string\`.`),d.jsx(fU.Provider,{scope:e,children:d.jsx(pit,{scope:e,label:n,duration:r,swipeDirection:i,swipeThreshold:o,toastCount:c,viewport:s,onViewportChange:l,onToastAdd:_.useCallback(()=>u(p=>p+1),[]),onToastRemove:_.useCallback(()=>u(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:h,children:a})})};ohe.displayName=dU;var ahe="ToastViewport",mit=["F8"],g3="toast.viewportPause",y3="toast.viewportResume",she=_.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=mit,label:i="Notifications ({hotkey})",...o}=t,a=H2(ahe,n),s=fit(n),l=_.useRef(null),c=_.useRef(null),u=_.useRef(null),f=_.useRef(null),h=Kt(e,f,a.onViewportChange),p=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),y=a.toastCount>0;_.useEffect(()=>{const v=b=>{var T;r.length!==0&&r.every(C=>b[C]||b.code===C)&&((T=f.current)==null||T.focus())};return document.addEventListener("keydown",v),()=>document.removeEventListener("keydown",v)},[r]),_.useEffect(()=>{const v=l.current,b=f.current;if(y&&v&&b){const w=()=>{if(!a.isClosePausedRef.current){const M=new CustomEvent(g3);b.dispatchEvent(M),a.isClosePausedRef.current=!0}},T=()=>{if(a.isClosePausedRef.current){const M=new CustomEvent(y3);b.dispatchEvent(M),a.isClosePausedRef.current=!1}},C=M=>{!v.contains(M.relatedTarget)&&T()},P=()=>{v.contains(document.activeElement)||T()};return v.addEventListener("focusin",w),v.addEventListener("focusout",C),v.addEventListener("pointermove",w),v.addEventListener("pointerleave",P),window.addEventListener("blur",w),window.addEventListener("focus",T),()=>{v.removeEventListener("focusin",w),v.removeEventListener("focusout",C),v.removeEventListener("pointermove",w),v.removeEventListener("pointerleave",P),window.removeEventListener("blur",w),window.removeEventListener("focus",T)}}},[y,a.isClosePausedRef]);const g=_.useCallback(({tabbingDirection:v})=>{const w=s().map(T=>{const C=T.ref.current,P=[C,...Mit(C)];return v==="forwards"?P:P.reverse()});return(v==="forwards"?w.reverse():w).flat()},[s]);return _.useEffect(()=>{const v=f.current;if(v){const b=w=>{var P,M,k;const T=w.altKey||w.ctrlKey||w.metaKey;if(w.key==="Tab"&&!T){const I=document.activeElement,U=w.shiftKey;if(w.target===v&&U){(P=c.current)==null||P.focus();return}const B=g({tabbingDirection:U?"backwards":"forwards"}),$=B.findIndex(F=>F===I);FI(B.slice($+1))?w.preventDefault():U?(M=c.current)==null||M.focus():(k=u.current)==null||k.focus()}};return v.addEventListener("keydown",b),()=>v.removeEventListener("keydown",b)}},[s,g]),d.jsxs(fxe,{ref:l,role:"region","aria-label":i.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:y?void 0:"none"},children:[y&&d.jsx(v3,{ref:c,onFocusFromOutsideViewport:()=>{const v=g({tabbingDirection:"forwards"});FI(v)}}),d.jsx(fU.Slot,{scope:n,children:d.jsx(At.ol,{tabIndex:-1,...o,ref:h})}),y&&d.jsx(v3,{ref:u,onFocusFromOutsideViewport:()=>{const v=g({tabbingDirection:"backwards"});FI(v)}})]})});she.displayName=ahe;var lhe="ToastFocusProxy",v3=_.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...i}=t,o=H2(lhe,n);return d.jsx(wS,{"aria-hidden":!0,tabIndex:0,...i,ref:e,style:{position:"fixed"},onFocus:a=>{var c;const s=a.relatedTarget;!((c=o.viewport)!=null&&c.contains(s))&&r()}})});v3.displayName=lhe;var V2="Toast",git="toast.swipeStart",yit="toast.swipeMove",vit="toast.swipeCancel",xit="toast.swipeEnd",che=_.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:i,onOpenChange:o,...a}=t,[s=!0,l]=wo({prop:r,defaultProp:i,onChange:o});return d.jsx(oo,{present:n||s,children:d.jsx(Sit,{open:s,...a,ref:e,onClose:()=>l(!1),onPause:Br(t.onPause),onResume:Br(t.onResume),onSwipeStart:ut(t.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:ut(t.onSwipeMove,c=>{const{x:u,y:f}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:ut(t.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:ut(t.onSwipeEnd,c=>{const{x:u,y:f}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),l(!1)})})})});che.displayName=V2;var[wit,bit]=ihe(V2,{onClose(){}}),Sit=_.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:i,open:o,onClose:a,onEscapeKeyDown:s,onPause:l,onResume:c,onSwipeStart:u,onSwipeMove:f,onSwipeCancel:h,onSwipeEnd:p,...y}=t,g=H2(V2,n),[v,b]=_.useState(null),w=Kt(e,F=>b(F)),T=_.useRef(null),C=_.useRef(null),P=i||g.duration,M=_.useRef(0),k=_.useRef(P),I=_.useRef(0),{onToastAdd:U,onToastRemove:z}=g,O=Br(()=>{var J;(v==null?void 0:v.contains(document.activeElement))&&((J=g.viewport)==null||J.focus()),a()}),B=_.useCallback(F=>{!F||F===1/0||(window.clearTimeout(I.current),M.current=new Date().getTime(),I.current=window.setTimeout(O,F))},[O]);_.useEffect(()=>{const F=g.viewport;if(F){const J=()=>{B(k.current),c==null||c()},K=()=>{const Z=new Date().getTime()-M.current;k.current=k.current-Z,window.clearTimeout(I.current),l==null||l()};return F.addEventListener(g3,K),F.addEventListener(y3,J),()=>{F.removeEventListener(g3,K),F.removeEventListener(y3,J)}}},[g.viewport,P,l,c,B]),_.useEffect(()=>{o&&!g.isClosePausedRef.current&&B(P)},[o,P,g.isClosePausedRef,B]),_.useEffect(()=>(U(),()=>z()),[U,z]);const $=_.useMemo(()=>v?ghe(v):null,[v]);return g.viewport?d.jsxs(d.Fragment,{children:[$&&d.jsx(Eit,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:$}),d.jsx(wit,{scope:n,onClose:O,children:a0.createPortal(d.jsx(fU.ItemSlot,{scope:n,children:d.jsx(dxe,{asChild:!0,onEscapeKeyDown:ut(s,()=>{g.isFocusedToastEscapeKeyDownRef.current||O(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:d.jsx(At.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":o?"open":"closed","data-swipe-direction":g.swipeDirection,...y,ref:w,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:ut(t.onKeyDown,F=>{F.key==="Escape"&&(s==null||s(F.nativeEvent),F.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,O()))}),onPointerDown:ut(t.onPointerDown,F=>{F.button===0&&(T.current={x:F.clientX,y:F.clientY})}),onPointerMove:ut(t.onPointerMove,F=>{if(!T.current)return;const J=F.clientX-T.current.x,K=F.clientY-T.current.y,Z=!!C.current,H=["left","right"].includes(g.swipeDirection),Y=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,L=H?Y(0,J):0,N=H?0:Y(0,K),V=F.pointerType==="touch"?10:2,W={x:L,y:N},ne={originalEvent:F,delta:W};Z?(C.current=W,Y_(yit,f,ne,{discrete:!1})):SK(W,g.swipeDirection,V)?(C.current=W,Y_(git,u,ne,{discrete:!1}),F.target.setPointerCapture(F.pointerId)):(Math.abs(J)>V||Math.abs(K)>V)&&(T.current=null)}),onPointerUp:ut(t.onPointerUp,F=>{const J=C.current,K=F.target;if(K.hasPointerCapture(F.pointerId)&&K.releasePointerCapture(F.pointerId),C.current=null,T.current=null,J){const Z=F.currentTarget,H={originalEvent:F,delta:J};SK(J,g.swipeDirection,g.swipeThreshold)?Y_(xit,p,H,{discrete:!0}):Y_(vit,h,H,{discrete:!0}),Z.addEventListener("click",Y=>Y.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),Eit=t=>{const{__scopeToast:e,children:n,...r}=t,i=H2(V2,e),[o,a]=_.useState(!1),[s,l]=_.useState(!1);return Cit(()=>a(!0)),_.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),s?null:d.jsx(m0,{asChild:!0,children:d.jsx(wS,{...r,children:o&&d.jsxs(d.Fragment,{children:[i.label," ",n]})})})},_it="ToastTitle",uhe=_.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return d.jsx(At.div,{...r,ref:e})});uhe.displayName=_it;var Tit="ToastDescription",dhe=_.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return d.jsx(At.div,{...r,ref:e})});dhe.displayName=Tit;var fhe="ToastAction",hhe=_.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?d.jsx(mhe,{altText:n,asChild:!0,children:d.jsx(hU,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${fhe}\`. Expected non-empty \`string\`.`),null)});hhe.displayName=fhe;var phe="ToastClose",hU=_.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,i=bit(phe,n);return d.jsx(mhe,{asChild:!0,children:d.jsx(At.button,{type:"button",...r,ref:e,onClick:ut(t.onClick,i.onClose)})})});hU.displayName=phe;var mhe=_.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...i}=t;return d.jsx(At.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...i,ref:e})});function ghe(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),Ait(r)){const i=r.ariaHidden||r.hidden||r.style.display==="none",o=r.dataset.radixToastAnnounceExclude==="";if(!i)if(o){const a=r.dataset.radixToastAnnounceAlt;a&&e.push(a)}else e.push(...ghe(r))}}),e}function Y_(t,e,n,{discrete:r}){const i=n.originalEvent.currentTarget,o=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?Y3(i,o):i.dispatchEvent(o)}var SK=(t,e,n=0)=>{const r=Math.abs(t.x),i=Math.abs(t.y),o=r>i;return e==="left"||e==="right"?o&&r>n:!o&&i>n};function Cit(t=()=>{}){const e=Br(t);$i(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function Ait(t){return t.nodeType===t.ELEMENT_NODE}function Mit(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function FI(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var Pit=ohe,yhe=she,vhe=che,xhe=uhe,whe=dhe,bhe=hhe,She=hU;const kit=Pit,Ehe=_.forwardRef(({className:t,...e},n)=>d.jsx(yhe,{ref:n,className:He("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));Ehe.displayName=yhe.displayName;const Nit=mm("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border font-medium",destructive:"destructive group border-destructive bg-destructive font-medium"}},defaultVariants:{variant:"default"}}),_he=_.forwardRef(({className:t,variant:e,...n},r)=>{const i=_.useRef(null),{onOpenChange:o}=n,{colorTheme:a,theme:s,systemTheme:l}=Zr();return vfe(i,{onSwipeLeft:()=>o==null?void 0:o(!1),onSwipeRight:()=>o==null?void 0:o(!1),onSwipeUp:()=>o==null?void 0:o(!1),minDistance:30}),d.jsx(vhe,{ref:c=>{typeof r=="function"?r(c):r&&(r.current=c),i&&(i.current=c)},className:He(Nit({variant:e}),t,"bg-theme border-theme/30","text-black"),...n})});_he.displayName=vhe.displayName;const Rit=_.forwardRef(({className:t,...e},n)=>d.jsx(bhe,{ref:n,className:He("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-black group-[.destructive]:focus:ring-destructive",t),...e}));Rit.displayName=bhe.displayName;const jit=_.forwardRef(({className:t,...e},n)=>d.jsx(She,{ref:n,className:He("absolute right-2 top-2 rounded-full p-1 opacity-0 transition-opacity hover:opacity-100 focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100","text-black/50 hover:text-black focus:ring-black",t),"toast-close":"",...e,children:d.jsx(cc,{className:"h-4 w-4"})}));jit.displayName=She.displayName;const The=_.forwardRef(({className:t,...e},n)=>d.jsx(xhe,{ref:n,className:He("text-sm font-semibold text-black",t),...e}));The.displayName=xhe.displayName;const Che=_.forwardRef(({className:t,...e},n)=>d.jsx(whe,{ref:n,className:He("text-sm opacity-90 font-normal text-black/90",t),...e}));Che.displayName=whe.displayName;function Iit(){const{toasts:t}=oh(),{theme:e,systemTheme:n}=Zr(),r=e==="dark"||e==="system"&&n==="dark";return d.jsxs(kit,{children:[t.map(function({id:i,title:o,description:a,action:s,variant:l,...c}){const{duration:u,dismissible:f,...h}=c,p=i||crypto.randomUUID(),y=l==="default"||l==="destructive"?l:"default";return d.jsxs(_he,{...h,variant:y,className:r?"bg-theme border-white/10 text-black shadow-lg":"bg-theme border-black/10 text-black shadow-lg",children:[d.jsxs("div",{className:"grid gap-1",children:[o&&d.jsx(The,{className:"text-black",children:o}),a&&d.jsx(Che,{className:"text-black",children:a})]}),s&&typeof s=="object"&&_.isValidElement(s)?s:null]},p)}),d.jsx(Ehe,{})]})}function Oit(){let t=!1,e=0;try{const n=In();t=(n==null?void 0:n.isTranslating)||!1,e=(n==null?void 0:n.translationProgress)||0}catch(n){return console.error("TranslationLoadingOverlay: Error accessing translation context",n),null}return d.jsx(Kc,{children:t&&d.jsx(Ke.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-background/80 backdrop-blur-sm z-50 flex flex-col items-center justify-center",children:d.jsxs("div",{className:"flex flex-col items-center gap-6 max-w-md mx-auto px-4",children:[d.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent"}),d.jsx(yF,{value:e,className:"w-full"}),d.jsxs("p",{className:"text-sm text-muted-foreground",children:["Translating content... ",e,"%"]})]})})})}function Lit(){return Ht.restoreFromLocalStorage(),window.addEventListener("beforeunload",()=>{Ht.saveToLocalStorage()}),window.addEventListener("processingEntryCompleted",t=>{if(t.detail&&t.detail.tempId){const{tempId:e,entryId:n}=t.detail;console.log(`[Journal] Processing completed for ${e}${n?` -> ${n}`:""}`),n&&Ht.setEntryId(e,n),Ht.updateEntryState(e,Ql.COMPLETED)}}),window.addEventListener("processingEntryMapped",t=>{if(t.detail&&t.detail.tempId&&t.detail.entryId){const{tempId:e,entryId:n}=t.detail;console.log(`[Journal] Processing entry mapped: ${e} -> ${n}`),Ht.setEntryId(e,n)}}),window.addEventListener("journalEntryDeleted",t=>{if(t.detail&&t.detail.entryId){const{entryId:e}=t.detail;console.log(`[Journal] Entry deleted event for entry ID: ${e}`);const n=Ht.getProcessingEntries();let r=0;n.forEach(i=>{i.entryId===e&&(Ht.removeEntry(i.tempId),r++,console.log(`[Journal] Removed processing entry ${i.tempId} related to deleted entry ${e}`))}),r>0&&window.dispatchEvent(new CustomEvent("journalUIForceRefresh",{detail:{timestamp:Date.now(),deletedEntryId:e}}))}}),console.log("[Journal] Processing state management initialized"),{processingStateManager:Ht}}function Dit(){return _.useEffect(()=>{console.log("[JournalProcessingInitializer] Initializing journal processing system");const{processingStateManager:t}=Lit();console.log("[JournalProcessingInitializer] Running cleanup of stale entries");const e=t.getProcessingEntries();console.log(`[JournalProcessingInitializer] Found ${e.length} entries to check for cleanup`);let n=0;e.forEach(i=>{const o=Date.now()-i.startTime;o>3e4&&(t.removeEntry(i.tempId),n++,console.log(`[JournalProcessingInitializer] Force cleaned up entry ${i.tempId} (age: ${o}ms)`))}),n>0&&console.log(`[JournalProcessingInitializer] Cleaned up ${n} entries on init`);const r=setInterval(()=>{const i=t.getProcessingEntries(),o=Date.now();let a=0;i.forEach(s=>{const l=o-s.startTime;l>6e4&&(t.removeEntry(s.tempId),a++,console.log(`[JournalProcessingInitializer] Cleaned up stale entry ${s.tempId} (age: ${l}ms)`))}),a>0&&console.log(`[JournalProcessingInitializer] Cleaned up ${a} stale entries in periodic check`)},3e4);return()=>{console.log("[JournalProcessingInitializer] Cleaning up processing state manager"),t.dispose(),clearInterval(r)}},[]),null}const Fit=({type:t,className:e=""})=>{const n="w-full rounded-md overflow-hidden border border-white/30 bg-[#1A1F2C]/80",i={primary:"#9b87f5",secondary:"#7E69AB",tertiary:"#6E59A5",light:"#D6BCFA",brightBlue:"#1EAEDB",skyBlue:"#33C3F0"},o=()=>{switch(t){case"insights-overview":return d.jsxs("div",{className:"p-4 flex flex-col items-center",children:[d.jsxs("div",{className:"mb-3 flex items-center justify-center w-full",children:[d.jsx("h3",{className:"text-white text-lg font-semibold",children:d.jsx(Q,{text:"Emotional Insights",forceTranslate:!0})}),d.jsx(g0e,{className:"ml-2 text-[#9b87f5]",size:24})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-3 w-full",children:[d.jsxs("div",{className:"bg-[#2D243A] p-3 rounded-lg border border-[#9b87f5]/30",children:[d.jsx("div",{className:"text-xs text-[#aaadb0] mb-1",children:d.jsx(Q,{text:"Top Emotion",forceTranslate:!0})}),d.jsx("div",{className:"text-white font-medium",children:d.jsx(Q,{text:"Happiness",forceTranslate:!0})}),d.jsx("div",{className:"w-full h-2 bg-[#1A1F2C] rounded-full mt-2",children:d.jsx("div",{className:"h-full rounded-full",style:{width:"70%",backgroundColor:i.primary}})})]}),d.jsxs("div",{className:"bg-[#2D243A] p-3 rounded-lg border border-[#9b87f5]/30",children:[d.jsx("div",{className:"text-xs text-[#aaadb0] mb-1",children:d.jsx(Q,{text:"This Week",forceTranslate:!0})}),d.jsx("div",{className:"text-white font-medium",children:d.jsx(Q,{text:"Positive Trend",forceTranslate:!0})}),d.jsx("div",{className:"w-full h-2 bg-[#1A1F2C] rounded-full mt-2",children:d.jsx("div",{className:"h-full rounded-full",style:{width:"85%",backgroundColor:i.brightBlue}})})]}),d.jsxs("div",{className:"bg-[#2D243A] p-3 rounded-lg border border-[#9b87f5]/30",children:[d.jsx("div",{className:"text-xs text-[#aaadb0] mb-1",children:d.jsx(Q,{text:"Entries",forceTranslate:!0})}),d.jsx("div",{className:"text-white font-medium",children:d.jsx(Q,{text:"24 Total",forceTranslate:!0})}),d.jsxs("div",{className:"flex items-center justify-between mt-1",children:[d.jsx("div",{className:"w-2 h-2 rounded-full bg-[#9b87f5]"}),d.jsx("div",{className:"w-2 h-2 rounded-full bg-[#9b87f5]"}),d.jsx("div",{className:"w-2 h-2 rounded-full bg-[#9b87f5]"}),d.jsx("div",{className:"w-2 h-2 rounded-full bg-[#9b87f5]"}),d.jsx("div",{className:"w-2 h-2 rounded-full bg-[#9b87f5]"})]})]}),d.jsxs("div",{className:"bg-[#2D243A] p-3 rounded-lg border border-[#9b87f5]/30",children:[d.jsx("div",{className:"text-xs text-[#aaadb0] mb-1",children:d.jsx(Q,{text:"Time Range",forceTranslate:!0})}),d.jsx("div",{className:"text-white font-medium",children:d.jsx(Q,{text:"Last 30 Days",forceTranslate:!0})}),d.jsx("div",{className:"flex items-center justify-between mt-1",children:d.jsx("div",{className:"w-full h-1 bg-[#1A1F2C] rounded-full",children:d.jsx("div",{className:"h-full rounded-full",style:{width:"30%",backgroundColor:i.skyBlue}})})})]})]})]});case"emotion-trends":return d.jsxs("div",{className:"p-4 flex flex-col items-center",children:[d.jsxs("div",{className:"mb-3 flex items-center justify-center w-full",children:[d.jsx("h3",{className:"text-white text-lg font-semibold",children:d.jsx(Q,{text:"Emotion Trends",forceTranslate:!0})}),d.jsx(Ff,{className:"ml-2 text-[#9b87f5]",size:24})]}),d.jsxs("div",{className:"w-full h-[140px] relative px-2",children:[d.jsxs("div",{className:"absolute inset-x-0 bottom-0 h-[120px] border-b border-l border-[#aaadb0]/30",children:[d.jsx("div",{className:"absolute w-full border-t border-[#aaadb0]/20 h-0",style:{top:"25%"}}),d.jsx("div",{className:"absolute w-full border-t border-[#aaadb0]/20 h-0",style:{top:"50%"}}),d.jsx("div",{className:"absolute w-full border-t border-[#aaadb0]/20 h-0",style:{top:"75%"}}),d.jsx("div",{className:"absolute bottom-[-20px] left-[25%] text-[10px] text-[#aaadb0]",children:d.jsx(Q,{text:"Week 1",forceTranslate:!0})}),d.jsx("div",{className:"absolute bottom-[-20px] left-[50%] text-[10px] text-[#aaadb0]",children:d.jsx(Q,{text:"Week 2",forceTranslate:!0})}),d.jsx("div",{className:"absolute bottom-[-20px] left-[75%] text-[10px] text-[#aaadb0]",children:d.jsx(Q,{text:"Week 3",forceTranslate:!0})}),d.jsxs("svg",{className:"absolute inset-0 h-full w-full",children:[d.jsx("path",{d:"M10,80 Q50,35 100,70 T200,50 T300,20",fill:"none",stroke:i.primary,strokeWidth:"3",strokeLinecap:"round"}),d.jsx("circle",{cx:"10",cy:"80",r:"4",fill:i.primary}),d.jsx("circle",{cx:"100",cy:"70",r:"4",fill:i.primary}),d.jsx("circle",{cx:"200",cy:"50",r:"4",fill:i.primary}),d.jsx("circle",{cx:"300",cy:"20",r:"4",fill:i.primary})]}),d.jsxs("svg",{className:"absolute inset-0 h-full w-full",children:[d.jsx("path",{d:"M10,90 Q50,70 100,85 T200,75 T300,60",fill:"none",stroke:i.skyBlue,strokeWidth:"3",strokeLinecap:"round"}),d.jsx("circle",{cx:"10",cy:"90",r:"4",fill:i.skyBlue}),d.jsx("circle",{cx:"100",cy:"85",r:"4",fill:i.skyBlue}),d.jsx("circle",{cx:"200",cy:"75",r:"4",fill:i.skyBlue}),d.jsx("circle",{cx:"300",cy:"60",r:"4",fill:i.skyBlue})]})]}),d.jsxs("div",{className:"absolute top-[-5px] right-2 flex items-center",children:[d.jsx("div",{className:"h-3 w-3 rounded-full bg-[#9b87f5] mr-1"}),d.jsx("span",{className:"text-[10px] text-white mr-3",children:d.jsx(Q,{text:"Joy",forceTranslate:!0})}),d.jsx("div",{className:"h-3 w-3 rounded-full bg-[#33C3F0] mr-1"}),d.jsx("span",{className:"text-[10px] text-white",children:d.jsx(Q,{text:"Calm",forceTranslate:!0})})]})]})]});case"mood-calendar":return d.jsxs("div",{className:"p-4 flex flex-col items-center",children:[d.jsxs("div",{className:"mb-3 flex items-center justify-center w-full",children:[d.jsx("h3",{className:"text-white text-lg font-semibold",children:d.jsx(Q,{text:"Mood Calendar",forceTranslate:!0})}),d.jsx(QC,{className:"ml-2 text-[#9b87f5]",size:24})]}),d.jsxs("div",{className:"w-full grid grid-cols-7 gap-1",children:[[{short:"S",full:"Sunday"},{short:"M",full:"Monday"},{short:"T",full:"Tuesday"},{short:"W",full:"Wednesday"},{short:"T",full:"Thursday"},{short:"F",full:"Friday"},{short:"S",full:"Saturday"}].map((a,s)=>d.jsx("div",{className:"text-[10px] text-center text-[#aaadb0] mb-1",children:d.jsx(Q,{text:a.short,forceTranslate:!0})},s)),d.jsx("div",{className:"aspect-square rounded bg-green-500/80 flex items-center justify-center text-[10px] text-white font-medium",children:"1"}),d.jsx("div",{className:"aspect-square rounded bg-yellow-500/80 flex items-center justify-center text-[10px] text-white font-medium",children:"2"}),d.jsx("div",{className:"aspect-square rounded bg-green-500/80 flex items-center justify-center text-[10px] text-white font-medium",children:"3"}),d.jsx("div",{className:"aspect-square rounded border border-gray-600/50 flex items-center justify-center text-[10px] text-gray-500",children:"4"}),d.jsx("div",{className:"aspect-square rounded bg-red-500/80 flex items-center justify-center text-[10px] text-white font-medium",children:"5"}),d.jsx("div",{className:"aspect-square rounded bg-green-500/80 flex items-center justify-center text-[10px] text-white font-medium",children:"6"}),d.jsx("div",{className:"aspect-square rounded bg-green-500/80 flex items-center justify-center text-[10px] text-white font-medium",children:"7"}),d.jsx("div",{className:"aspect-square rounded bg-yellow-500/80 flex items-center justify-center text-[10px] text-white font-medium",children:"8"}),d.jsx("div",{className:"aspect-square rounded bg-green-500/80 flex items-center justify-center text-[10px] text-white font-medium",children:"9"}),d.jsx("div",{className:"aspect-square rounded bg-green-500/80 flex items-center justify-center text-[10px] text-white font-medium",children:"10"}),d.jsx("div",{className:"aspect-square rounded bg-yellow-500/80 flex items-center justify-center text-[10px] text-white font-medium",children:"11"}),d.jsx("div",{className:"aspect-square rounded border border-gray-600/50 flex items-center justify-center text-[10px] text-gray-500",children:"12"}),d.jsx("div",{className:"aspect-square rounded border border-gray-600/50 flex items-center justify-center text-[10px] text-gray-500",children:"13"}),d.jsx("div",{className:"aspect-square rounded bg-red-500/80 flex items-center justify-center text-[10px] text-white font-medium",children:"14"}),d.jsx("div",{className:"aspect-square rounded bg-yellow-500/80 flex items-center justify-center text-[10px] text-white font-medium",children:"15"}),d.jsx("div",{className:"aspect-square rounded bg-green-500/80 flex items-center justify-center text-[10px] text-white font-medium",children:"16"}),d.jsx("div",{className:"aspect-square rounded bg-green-500/80 flex items-center justify-center text-[10px] text-white font-medium",children:"17"}),d.jsx("div",{className:"aspect-square rounded bg-yellow-500/80 flex items-center justify-center text-[10px] text-white font-medium",children:"18"}),d.jsx("div",{className:"aspect-square rounded bg-green-500/80 flex items-center justify-center text-[10px] text-white font-medium",children:"19"}),d.jsx("div",{className:"aspect-square rounded border border-gray-600/50 flex items-center justify-center text-[10px] text-gray-500",children:"20"}),d.jsx("div",{className:"aspect-square rounded bg-green-500/80 flex items-center justify-center text-[10px] text-white font-medium",children:"21"})]}),d.jsxs("div",{className:"mt-3 flex items-center justify-center space-x-3",children:[d.jsxs("div",{className:"flex items-center",children:[d.jsx("div",{className:"h-3 w-3 rounded bg-green-500/80 mr-1"}),d.jsx("span",{className:"text-[10px] text-white",children:d.jsx(Q,{text:"Positive",forceTranslate:!0})})]}),d.jsxs("div",{className:"flex items-center",children:[d.jsx("div",{className:"h-3 w-3 rounded bg-yellow-500/80 mr-1"}),d.jsx("span",{className:"text-[10px] text-white",children:d.jsx(Q,{text:"Neutral",forceTranslate:!0})})]}),d.jsxs("div",{className:"flex items-center",children:[d.jsx("div",{className:"h-3 w-3 rounded bg-red-500/80 mr-1"}),d.jsx("span",{className:"text-[10px] text-white",children:d.jsx(Q,{text:"Negative",forceTranslate:!0})})]}),d.jsxs("div",{className:"flex items-center",children:[d.jsx("div",{className:"h-3 w-3 rounded border border-gray-600/50 mr-1"}),d.jsx("span",{className:"text-[10px] text-white",children:d.jsx(Q,{text:"No Entry",forceTranslate:!0})})]})]})]});case"soul-net":return d.jsxs("div",{className:"p-4 flex flex-col items-center",children:[d.jsxs("div",{className:"mb-3 flex items-center justify-center w-full",children:[d.jsx("h3",{className:"text-white text-lg font-semibold",children:d.jsx(Q,{text:"Soul-Net Visualization",forceTranslate:!0})}),d.jsx(w0e,{className:"ml-2 text-[#9b87f5]",size:24})]}),d.jsxs("div",{className:"w-full h-[140px] relative",children:[d.jsx("div",{className:"absolute top-[50%] left-[50%] transform -translate-x-1/2 -translate-y-1/2",children:d.jsx("div",{className:"w-12 h-12 rounded-full bg-[#9b87f5] flex items-center justify-center",children:d.jsx("span",{className:"text-xs text-white font-medium",children:d.jsx(Q,{text:"YOU",forceTranslate:!0})})})}),d.jsxs("svg",{className:"absolute inset-0 h-full w-full",children:[d.jsx("line",{x1:"50%",y1:"50%",x2:"30%",y2:"30%",stroke:i.primary,strokeWidth:"2"}),d.jsx("line",{x1:"50%",y1:"50%",x2:"70%",y2:"30%",stroke:i.skyBlue,strokeWidth:"2"}),d.jsx("line",{x1:"50%",y1:"50%",x2:"30%",y2:"70%",stroke:i.light,strokeWidth:"2"}),d.jsx("line",{x1:"50%",y1:"50%",x2:"70%",y2:"70%",stroke:i.tertiary,strokeWidth:"2"}),d.jsx("line",{x1:"50%",y1:"50%",x2:"15%",y2:"50%",stroke:i.brightBlue,strokeWidth:"2"}),d.jsx("line",{x1:"50%",y1:"50%",x2:"85%",y2:"50%",stroke:i.secondary,strokeWidth:"2"}),d.jsx("circle",{cx:"30%",cy:"30%",r:"15",fill:i.primary}),d.jsx("circle",{cx:"70%",cy:"30%",r:"15",fill:i.skyBlue}),d.jsx("circle",{cx:"30%",cy:"70%",r:"15",fill:i.light}),d.jsx("circle",{cx:"70%",cy:"70%",r:"15",fill:i.tertiary}),d.jsx("circle",{cx:"15%",cy:"50%",r:"15",fill:i.brightBlue}),d.jsx("circle",{cx:"85%",cy:"50%",r:"15",fill:i.secondary})]}),d.jsx("div",{className:"absolute text-[10px] text-white font-medium",style:{top:"25%",left:"28%",transform:"translate(-50%, -50%)"},children:d.jsx(Q,{text:"Work",forceTranslate:!0})}),d.jsx("div",{className:"absolute text-[10px] text-white font-medium",style:{top:"25%",left:"72%",transform:"translate(-50%, -50%)"},children:d.jsx(Q,{text:"Health",forceTranslate:!0})}),d.jsx("div",{className:"absolute text-[10px] text-white font-medium",style:{top:"75%",left:"28%",transform:"translate(-50%, -50%)"},children:d.jsx(Q,{text:"Family",forceTranslate:!0})}),d.jsx("div",{className:"absolute text-[10px] text-white font-medium",style:{top:"75%",left:"72%",transform:"translate(-50%, -50%)"},children:d.jsx(Q,{text:"Joy",forceTranslate:!0})}),d.jsx("div",{className:"absolute text-[10px] text-white font-medium",style:{top:"50%",left:"15%",transform:"translate(-50%, -50%)"},children:d.jsx(Q,{text:"Stress",forceTranslate:!0})}),d.jsx("div",{className:"absolute text-[10px] text-white font-medium",style:{top:"50%",left:"85%",transform:"translate(-50%, -50%)"},children:d.jsx(Q,{text:"Peace",forceTranslate:!0})})]})]});default:return d.jsx("div",{className:"p-4 text-center text-white",children:d.jsx(Q,{text:"Infographic not found",forceTranslate:!0})})}};return d.jsx("div",{className:`${n} ${e}`,children:d.jsx(Wee,{ratio:16/9,className:"bg-[#1A1F2C]/80",children:o()})})},zit=({step:t,onNext:e,onPrev:n,onSkip:r,isFirst:i,isLast:o,stepNumber:a,totalSteps:s})=>{const l=_.useRef(null),c=_.useRef(null),[u]=_.useState(Date.now());_.useEffect(()=>(console.log(`TutorialStep mounted for step ${t.id}, renderKey: ${u}`),()=>{console.log(`TutorialStep unmounted for step ${t.id}`)}),[t.id,u]);const f=T=>{T.preventDefault(),T.stopPropagation(),console.log(`Next button clicked for step ${t.id}`),e()},h=T=>{T.preventDefault(),T.stopPropagation(),console.log(`Previous button clicked for step ${t.id}`),n()},p=T=>{T.preventDefault(),T.stopPropagation(),console.log(`Skip button clicked for step ${t.id}`),r()};_.useEffect(()=>{if(c.current){const T=C=>{C.preventDefault(),C.stopPropagation(),console.log(`Direct DOM click handler fired for step ${t.id}`),e()};return c.current.addEventListener("click",T,{capture:!0}),()=>{c.current&&c.current.removeEventListener("click",T,{capture:!0})}}},[e,t.id]);const y=()=>t.id===5?{backgroundColor:"transparent",border:"none",boxShadow:"none",backdropFilter:"none",color:"white",textShadow:"0 0 8px rgba(0, 0, 0, 1)"}:t.id===1?{backgroundColor:"rgba(26, 31, 44, 1)",color:"white",textShadow:"0 0 4px rgba(0, 0, 0, 0.8)"}:{backgroundColor:"rgba(26, 31, 44, 0.2)",backdropFilter:"blur(2px)",color:"white",textShadow:"0 0 4px rgba(0, 0, 0, 0.8)"},g=()=>t.infographicType&&t.id>=6&&t.id<=9?{maxWidth:"350px",width:"calc(100% - 40px)"}:{maxWidth:"320px",width:"calc(100% - 40px)"},v=()=>t.id===2?{top:"10%",left:"50%",transform:"translate(-50%, 0)",position:"fixed"}:t.id===5?{top:"10%",left:"50%",transform:"translate(-50%, 0)",position:"fixed",zIndex:3e4}:t.infographicType&&t.id>=6&&t.id<=9?{top:"50%",left:"50%",transform:"translate(-50%, -50%)",position:"fixed",zIndex:3e4}:t.id===3||t.id===4?{top:"50%",left:"50%",transform:"translate(-50%, -50%)",position:"fixed"}:{top:"50%",left:"50%",transform:"translate(-50%, -50%)",position:"fixed"},b=!!t.infographicType&&t.id>=6&&t.id<=9,w=t.id>=5&&t.id<=9;return d.jsxs(Ke.div,{ref:l,className:"tutorial-step-container rounded-xl p-4",style:{...v(),...y(),...g(),...t.id===5?{border:"none",boxShadow:"none",background:"transparent"}:{border:"3px solid var(--color-theme)",boxShadow:"0 0 30px rgba(0, 0, 0, 0.7)"},zIndex:3e4,pointerEvents:"auto"},initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{duration:.3},onClick:T=>T.stopPropagation(),"data-step":t.id,children:[d.jsxs("div",{className:"flex justify-between items-center mb-2",children:[d.jsxs("div",{className:"flex items-center",children:[d.jsx("div",{className:"bg-theme text-white text-xs px-2 py-1 rounded-md",style:t.id===5?{backgroundColor:"rgba(var(--primary-h), var(--primary-s), var(--primary-l), 0.9)",textShadow:"0 0 6px rgba(0, 0, 0, 1)",border:"1px solid rgba(255, 255, 255, 0.3)"}:{},children:d.jsx(Q,{text:`Step ${a} of ${s}`,forceTranslate:!0,className:"text-white",style:t.id===5?{textShadow:"0 0 6px rgba(0, 0, 0, 1)"}:{}})}),w&&d.jsx(m3,{className:"ml-2",style:t.id===5?{textShadow:"0 0 6px rgba(0, 0, 0, 1)",backgroundColor:"rgba(var(--primary-h), var(--primary-s), var(--primary-l), 0.9)",border:"1px solid rgba(255, 255, 255, 0.3)"}:{}})]}),d.jsx(ct,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 text-white hover:text-white/90",onClick:p,style:t.id===5?{backgroundColor:"rgba(255, 255, 255, 0.1)",textShadow:"0 0 6px rgba(0, 0, 0, 1)",border:"1px solid rgba(255, 255, 255, 0.3)"}:{},children:d.jsx(cc,{className:"h-4 w-4"})})]}),d.jsx("h3",{className:"text-lg font-semibold mb-1 text-white",style:t.id===5?{textShadow:"0 0 8px rgba(0, 0, 0, 1)"}:{textShadow:"0 0 4px rgba(0, 0, 0, 0.8)"},children:d.jsx(Q,{text:t.title,forceTranslate:!0,className:"text-white font-semibold",style:t.id===5?{textShadow:"0 0 8px rgba(0, 0, 0, 1)"}:{textShadow:"0 0 4px rgba(0, 0, 0, 0.8)"}})}),d.jsx("p",{className:"text-sm text-white/80 mb-4",style:t.id===5?{textShadow:"0 0 8px rgba(0, 0, 0, 1)",color:"white"}:{textShadow:"0 0 4px rgba(0, 0, 0, 0.8)"},children:d.jsx(Q,{text:t.content,forceTranslate:!0,className:t.id===5?"text-white":"text-white/80",style:t.id===5?{textShadow:"0 0 8px rgba(0, 0, 0, 1)"}:{textShadow:"0 0 4px rgba(0, 0, 0, 0.8)"}})}),b&&t.infographicType&&d.jsx("div",{className:"mb-4",children:d.jsx(Fit,{type:t.infographicType})}),d.jsxs("div",{className:"flex justify-between mt-2 tutorial-buttons",children:[!i&&d.jsxs(ct,{variant:"outline",size:"sm",onClick:h,className:"flex items-center gap-1 pointer-events-auto bg-gray-800 border-white/50 text-white hover:text-white hover:bg-gray-700",style:t.id===5?{color:"#FFFFFF !important",backgroundColor:"rgba(51,51,51,0.9)",borderColor:"rgba(255,255,255,0.7)",textShadow:"0 0 6px rgba(0, 0, 0, 1)",border:"2px solid rgba(255, 255, 255, 0.5)"}:{color:"#FFFFFF !important",backgroundColor:"rgba(51,51,51,0.8)",borderColor:"rgba(255,255,255,0.5)"},children:[d.jsx(eA,{className:"h-4 w-4"}),d.jsx(Q,{text:"Back",forceTranslate:!0,className:"text-white",style:t.id===5?{textShadow:"0 0 6px rgba(0, 0, 0, 1)"}:{}})]}),d.jsx("div",{className:"flex-1"}),t.showNextButton&&d.jsxs(ct,{ref:c,variant:"default",size:"sm",onClick:f,className:"flex items-center gap-1 bg-theme hover:bg-theme/80 pointer-events-auto z-50","data-testid":"tutorial-next-button",style:t.id===5?{cursor:"pointer",position:"relative",zIndex:30001,backgroundColor:"var(--color-theme)",opacity:1,textShadow:"0 0 6px rgba(0, 0, 0, 1)",border:"2px solid rgba(255, 255, 255, 0.3)"}:{cursor:"pointer",position:"relative",zIndex:30001,backgroundColor:"var(--color-theme)",opacity:1},children:[d.jsx(Q,{text:o?"Finish":"Next",forceTranslate:!0,className:"text-white",style:t.id===5?{textShadow:"0 0 6px rgba(0, 0, 0, 1)"}:{}}),!o&&d.jsx(S1,{className:"h-4 w-4"})]})]})]},`step-${t.id}-${u}`)},Uit=()=>{const t=ka();if(!t.isInitialized)return console.log("[TutorialOverlay] Context not yet initialized, waiting..."),null;const{isActive:e,currentStep:n,totalSteps:r,steps:i,nextStep:o,prevStep:a,skipTutorial:s,tutorialCompleted:l,navigationState:c}=t,u=Wi(),f=nc(u.pathname),h=e&&f&&!l&&!c.inProgress;_.useEffect(()=>{var M;console.log("[TutorialOverlay] State update:",{isActive:e,currentStep:n,currentStepId:(M=i[n])==null?void 0:M.id,navigationState:c,shouldShowTutorial:h,pathname:u.pathname,isAppRoute:f,tutorialCompleted:l,transitionProtected:to.isStepTransitionProtected(),highlightingState:_s.getState(),tutorialInitialized:t.isInitialized})},[e,n,i,c,h,u.pathname,f,l,t.isInitialized]),_.useEffect(()=>{var M,k;if(h){console.log("[TutorialOverlay] Tutorial active, disabling page scrolling");try{const I=window.scrollY;return document.body.classList.add("tutorial-active"),document.body.style.overflow="hidden",document.body.style.touchAction="none",document.body.setAttribute("data-current-step",String(((M=i[n])==null?void 0:M.id)||"")),((k=i[n])==null?void 0:k.id)===5&&p(),()=>{console.log("[TutorialOverlay] Cleaning up tutorial styles");try{document.body.classList.remove("tutorial-active"),document.body.style.overflow="",document.body.style.touchAction="",document.body.style.position="",document.body.style.width="",document.body.style.height="",document.body.removeAttribute("data-current-step"),_s.reset(),window.scrollTo(0,I),console.log("[TutorialOverlay] Tutorial inactive, restored page scrolling"),UO(),y(),setTimeout(()=>{window.dispatchEvent(new Event("resize")),u.pathname==="/app/chat"&&(console.log("[TutorialOverlay] Triggering chat refresh after tutorial"),window.dispatchEvent(new CustomEvent("chatRefreshNeeded")))},300)}catch(U){console.error("[TutorialOverlay] Error during cleanup:",U)}}}catch(I){return console.error("[TutorialOverlay] Error setting up tutorial scrolling prevention:",I),()=>{}}}},[h,n,i,u.pathname]),_.useEffect(()=>{if(!h)return;const M=i[n];console.log(`[TutorialOverlay] Setting up enhanced highlighting for step ${M==null?void 0:M.id}`);try{to.startStepTransition(M==null?void 0:M.id);const k=[M==null?void 0:M.id].filter(Boolean);OCe(k);const I=setTimeout(()=>{try{g(M)}catch(U){console.error(`[TutorialOverlay] Error applying enhanced highlighting for step ${M==null?void 0:M.id}:`,U)}},250);return()=>{clearTimeout(I),console.log("[TutorialOverlay] Effect cleanup - clearing step transition protection")}}catch(k){return console.error("[TutorialOverlay] Error in enhanced highlighting effect setup:",k),()=>{to.clearStepTransition()}}},[h,n,i]);const p=()=>{try{console.log("[TutorialOverlay] Setting up transparent chat visibility for step 5 (Soul-Net fix)"),document.querySelectorAll(".smart-chat-container, .mobile-chat-interface, .chat-messages-container").forEach(I=>{I instanceof HTMLElement&&(I.style.backgroundColor="transparent",I.style.backgroundImage="none",I.style.boxShadow="none",I.style.opacity="1",I.style.visibility="visible")});const k=document.querySelector(".flex.flex-col.items-center.justify-center.p-6.text-center.h-full");k&&k instanceof HTMLElement&&(k.style.visibility="visible",k.style.opacity="1",k.style.zIndex="5000",k.style.display="flex",k.style.backgroundColor="transparent"),setTimeout(()=>{var I;((I=i[n])==null?void 0:I.id)===5&&document.querySelectorAll(".empty-chat-suggestion, .chat-suggestion-button").forEach(z=>{z instanceof HTMLElement&&(z.style.visibility="visible",z.style.display="block",z.style.opacity="1",z.classList.add("chat-question-highlight","tutorial-target"))})},500)}catch(M){console.error("[TutorialOverlay] Error setting up transparent chat visibility for step 5:",M)}},y=()=>{try{const M=document.querySelector(".journal-arrow-button");if(M instanceof HTMLElement){console.log("[TutorialOverlay] Resetting arrow button position after tutorial cleanup"),M.style.position="fixed",M.style.top="50%",M.style.left="50%",M.style.transform="translate(-50%, -50%)",M.style.zIndex="40",M.style.margin="0",M.style.padding="0";const k=M.querySelector("button");k instanceof HTMLElement&&["boxShadow","animation","border","transform","position","zIndex"].forEach(U=>{try{k.style[U]=""}catch(z){console.warn(`[TutorialOverlay] Could not reset button style ${U}:`,z)}})}}catch(M){console.error("[TutorialOverlay] Error resetting arrow button position:",M)}},g=M=>{if(M)try{if(console.log(`[TutorialOverlay] Applying enhanced highlighting for step ${M.id}`),M.id===1){const k=document.querySelector(".journal-header-container");k?(k.classList.add("tutorial-target"),console.log("[TutorialOverlay] Applied highlighting to journal header")):console.warn("[TutorialOverlay] Journal header element not found")}else if(M.id===2)console.log("[TutorialOverlay] Step 2: ButtonStateManager will handle arrow button highlighting");else if(M.id===3)console.log("[TutorialOverlay] Step 3: Using enhanced highlighting manager for Record Entry button"),_s.applyStaggeredHighlighting(qee,["tutorial-target","record-entry-tab","tutorial-record-entry-button"],3);else if(M.id===4)console.log("[TutorialOverlay] Step 4: Using enhanced highlighting manager for Past Entries tab"),_s.applyStaggeredHighlighting(Yee,["tutorial-target","entries-tab"],4);else if(M.id===5)v();else if(M.id===6){const k=_y(Kee,"insights-header-highlight")}else if(M.id===7){const k=_y(Jee,"emotion-chart-highlight")}else if(M.id===8){const k=_y(Zee,"mood-calendar-highlight")}else M.id===9&&w()}catch(k){console.error(`[TutorialOverlay] Error in applyEnhancedStepHighlighting for step ${M.id}:`,k)}},v=()=>{try{console.log("[TutorialOverlay] Setting up highlight for chat question (step 5)"),p(),ete();const M=document.querySelectorAll(".empty-chat-suggestion, .chat-suggestion-button");if(M.length>0)console.log(`[TutorialOverlay] Found ${M.length} chat suggestions in EmptyChatState`),M.forEach((k,I)=>{I===0&&(k.classList.add("chat-question-highlight","tutorial-target"),k instanceof HTMLElement&&(k.style.display="block",k.style.visibility="visible",k.style.opacity="1",k.style.zIndex="8000",k.style.position="relative",k.style.boxShadow="0 0 40px 25px var(--color-theme)",k.style.animation="ultra-strong-pulse 1.5s infinite alternate",k.style.border="2px solid white",k.style.transform="scale(1.1)"),console.log("[TutorialOverlay] Applied highlighting to first chat suggestion in EmptyChatState"))});else{const k=_y(Xee,"chat-question-highlight")}setTimeout(()=>{var I;const k=document.querySelectorAll(".empty-chat-suggestion, .chat-suggestion-button");if(k.length>0&&((I=i[n])==null?void 0:I.id)===5){console.log("[TutorialOverlay] Found chat suggestions after delay, highlighting first one");const U=k[0];U.classList.add("chat-question-highlight","tutorial-target"),U instanceof HTMLElement&&(U.style.display="block",U.style.visibility="visible",U.style.opacity="1",U.style.zIndex="8000")}},800)}catch(M){console.error("[TutorialOverlay] Error in applyChatQuestionHighlighting:",M)}},b=()=>{try{const M=document.querySelector(".flex.flex-col.items-center.justify-center.p-6.text-center.h-full");if(M&&M instanceof HTMLElement){console.log("[TutorialOverlay] Creating fallback chat suggestions");let k=M.querySelector(".mt-8.space-y-3.w-full.max-w-md");if(k||(k=document.createElement("div"),k.className="mt-8 space-y-3 w-full max-w-md",M.appendChild(k)),k&&k instanceof HTMLElement){const I=k.querySelectorAll("button");if(I.length===0){const U=document.createElement("button");U.className="w-full justify-start px-4 py-3 h-auto bg-secondary text-secondary-foreground hover:bg-secondary/80 rounded-md chat-question-highlight tutorial-target empty-chat-suggestion",U.textContent="How am I feeling today based on my journal entries?",U.style.display="block",U.style.visibility="visible",U.style.opacity="1",U.style.zIndex="8000",k.appendChild(U),z6(U,"chat-question-highlight")}else{const U=I[0];U.classList.add("chat-question-highlight","tutorial-target","empty-chat-suggestion"),U instanceof HTMLElement&&(U.style.display="block",U.style.visibility="visible",U.style.opacity="1",U.style.zIndex="8000",z6(U,"chat-question-highlight"))}}}}catch(M){console.error("[TutorialOverlay] Error creating fallback chat suggestion:",M)}},w=()=>{try{console.log("[TutorialOverlay] Setting up highlight for soul-net visualization (step 9)"),_y(Qee,"soul-net-highlight")&&console.log("[TutorialOverlay] Successfully highlighted Soul-Net visualization for step 9"),setTimeout(()=>{console.log("[TutorialOverlay] Step 9: Debugging Soul-Net label visibility");const k=document.querySelector('[class*="soul-net"], [class*="soulnet"], .bg-background.rounded-xl.shadow-sm.border.w-full');if(k){console.log("[TutorialOverlay] Found Soul-Net container:",k);const I=k.querySelector("canvas");I?(console.log("[TutorialOverlay] Found Soul-Net canvas:",I.style),I.style.display="block",I.style.visibility="visible",I.style.opacity="1",I.style.width="100%",I.style.height="500px",window.dispatchEvent(new Event("resize")),console.log("[TutorialOverlay] Applied visibility fixes to Soul-Net canvas")):console.warn("[TutorialOverlay] No canvas found in Soul-Net container")}else console.warn("[TutorialOverlay] No Soul-Net container found for step 9");window.dispatchEvent(new CustomEvent("tutorial-soul-net-debug",{detail:{step:9,forceShowLabels:!0}}))},1e3)}catch(M){console.error("[TutorialOverlay] Error in applySoulNetHighlighting:",M)}};if(!h)return null;const T=i[n],C=n===0,P=n===r-1;return d.jsxs("div",{className:"fixed inset-0 z-[50000] pointer-events-auto",children:[d.jsx(Ke.div,{className:"tutorial-overlay absolute inset-0",initial:{opacity:0},animate:{opacity:.75},exit:{opacity:0},transition:{duration:.3},onClick:M=>M.stopPropagation()}),d.jsx(Kc,{mode:"wait",children:T&&d.jsx(zit,{step:T,onNext:o,onPrev:a,onSkip:s,isFirst:C,isLast:P,stepNumber:n+1,totalSteps:r},`step-${n}-${T.id}`)})]})},Bit=t=>new Promise((e,n)=>{const r=new Image;r.onload=()=>e(),r.onerror=()=>n(new Error(`Failed to load image: ${t}`)),r.src=t}),$it=async()=>{const t=[];try{await Promise.all(t.map(e=>Bit(e))),console.log("Critical images preloaded successfully")}catch(e){console.warn("Some images failed to preload:",e)}},x3={smartChatV2:!1,premiumMessaging:!1,emotionCalendar:!1,insightsV2:!1,journalVoicePlayback:!1,otherReservedFlags:!1},Hit=_.createContext({flags:x3,isEnabled:()=>!1,loading:!1,error:null,refetch:async()=>{}}),Vit=({children:t})=>{const{user:e}=or(),[n,r]=_.useState(x3),[i,o]=_.useState(!1),[a,s]=_.useState(null),l=async()=>{try{o(!0),s(null);const{data:f,error:h}=await Ze.from("feature_flags").select("*");if(h){console.error("Error fetching feature flags:",h),s("Failed to fetch feature flags");return}let p=[];if(e){const{data:g,error:v}=await Ze.from("user_feature_flags").select("feature_flag_id, is_enabled").eq("user_id",e.id);v?console.warn("Error fetching user feature flag overrides:",v):p=g||[]}const y={...x3};f==null||f.forEach(g=>{if(g.name in y){const v=p.find(b=>b.feature_flag_id===g.id);if(v)y[g.name]=v.is_enabled;else{const b=g.is_enabled&&(g.rollout_percentage===100||Math.random()*100<g.rollout_percentage);y[g.name]=b}}}),r(y)}catch(f){console.error("Unexpected error fetching feature flags:",f),s("Unexpected error occurred")}finally{o(!1)}};_.useEffect(()=>{l()},[e==null?void 0:e.id]);const c=f=>!!n[f],u=_.useMemo(()=>({flags:n,isEnabled:c,loading:i,error:a,refetch:l}),[n,i,a]);return d.jsx(Hit.Provider,{value:u,children:t})},Wit=(t={})=>{const[e,n]=_.useState(!1),[r,i]=_.useState(null),[o,a]=_.useState(!1),s=Wi();Za();const l=ih(),c=_.useCallback(h=>{var y,g;if(!l.isTWA&&!l.isStandalone||o)return;a(!0);const p=window.location.pathname;console.log("[TWA BackHandler] Popstate event for path:",p),NM(p)&&(h.preventDefault(),window.history.pushState({intercepted:!0},"",p),!LB()||window.history.length<=1?(console.log("[TWA BackHandler] No back history, showing exit modal"),n(!0),(y=t.onExitConfirmation)==null||y.call(t)):(console.log("[TWA BackHandler] Intercepting back navigation"),i(p),n(!0),(g=t.onBackIntercepted)==null||g.call(t))),setTimeout(()=>{a(!1)},500)},[l,t,o]);_.useEffect(()=>{if(!l.isAndroidTWA)return;const h=p=>{var y,g;if(!o&&(p.key==="Escape"||p.keyCode===27)){a(!0);const v=s.pathname;console.log("[TWA BackHandler] Hardware back button for path:",v),NM(v)&&(p.preventDefault(),p.stopPropagation(),!LB()||window.history.length<=1?(console.log("[TWA BackHandler] No back history, showing exit modal"),n(!0),(y=t.onExitConfirmation)==null||y.call(t)):(console.log("[TWA BackHandler] Intercepting hardware back navigation"),n(!0),(g=t.onBackIntercepted)==null||g.call(t))),setTimeout(()=>{a(!1)},500)}};return document.addEventListener("keydown",h,!0),()=>document.removeEventListener("keydown",h,!0)},[s.pathname,l.isAndroidTWA,t,o]),_.useEffect(()=>{if(!l.isTWA&&!l.isStandalone)return;const h=s.pathname;return NM(h)&&(console.log("[TWA BackHandler] Setting up interception for path:",h),window.history.pushState({intercepted:!0,path:h},"",h)),window.addEventListener("popstate",c),()=>{window.removeEventListener("popstate",c)}},[s.pathname,c,l]);const u=_.useCallback(()=>{console.log("[TWA BackHandler] User confirmed exit"),n(!1),i(null),a(!1),setTimeout(()=>{nve()},100)},[]),f=_.useCallback(()=>{console.log("[TWA BackHandler] User cancelled exit"),n(!1),i(null),a(!1);const h=s.pathname;window.history.replaceState({intercepted:!0,path:h},"",h)},[s.pathname]);return{showExitModal:e,confirmExit:u,cancelExit:f,isTWAEnvironment:l.isTWA||l.isStandalone}},Git=({isOpen:t,onConfirm:e,onCancel:n})=>{const{translate:r}=In(),[i,o]=_.useState({title:"Exit App",description:"Are you sure you want to exit Soul Symphony? Your progress will be saved.",cancel:"Cancel",exit:"Exit App"});return _.useEffect(()=>{t&&(async()=>{if(r)try{const[s,l,c,u]=await Promise.all([r("Exit App","en"),r("Are you sure you want to exit Soul Symphony? Your progress will be saved.","en"),r("Cancel","en"),r("Exit App","en")]);o({title:s||"Exit App",description:l||"Are you sure you want to exit Soul Symphony? Your progress will be saved.",cancel:c||"Cancel",exit:u||"Exit App"})}catch(s){console.error("Error loading translations for exit modal:",s)}})()},[t,r]),d.jsx(S0,{open:t,onOpenChange:a=>!a&&n(),children:d.jsxs(bm,{children:[d.jsxs(Sm,{children:[d.jsx(_m,{children:i.title}),d.jsx(Tm,{children:i.description})]}),d.jsxs(Em,{children:[d.jsx(Am,{onClick:n,children:i.cancel}),d.jsx(Cm,{onClick:e,children:i.exit})]})]})})},qit=({children:t})=>{const{showExitModal:e,confirmExit:n,cancelExit:r,isTWAEnvironment:i}=Wit({onExitConfirmation:()=>{console.log("[TWA] User attempted to exit app")},onBackIntercepted:()=>{console.log("[TWA] Back navigation intercepted")}});return i?d.jsxs(d.Fragment,{children:[t,d.jsx(Git,{isOpen:e,onConfirm:n,onCancel:r})]}):d.jsx(d.Fragment,{children:t})},EK=2,Yit=12e3,Xit=5e3,pU=()=>{const[t,e]=_.useState({isStuckDetected:!1,refreshCount:0,lastRefreshTime:0}),n=_.useRef(null),r=_.useRef(0),i=ih(),o=()=>{!i.isTWA&&!i.isStandalone||(r.current=Date.now(),console.log("[TWA AutoRefresh] Starting stuck detection monitoring"),n.current&&clearTimeout(n.current),n.current=setTimeout(()=>{Date.now()-t.lastRefreshTime>Xit&&t.refreshCount<EK?(console.log("[TWA AutoRefresh] Stuck loader detected, triggering automatic refresh"),s()):t.refreshCount>=EK&&(console.warn("[TWA AutoRefresh] Max refresh attempts reached, stopping auto-refresh"),e(f=>({...f,isStuckDetected:!0})))},Yit))},a=()=>{console.log("[TWA AutoRefresh] Stopping stuck detection monitoring"),n.current&&(clearTimeout(n.current),n.current=null)},s=()=>{const c=Date.now();e(u=>({isStuckDetected:!0,refreshCount:u.refreshCount+1,lastRefreshTime:c})),console.log("[TWA AutoRefresh] Executing automatic refresh attempt",t.refreshCount+1),setTimeout(()=>{window.location.reload()},100)},l=()=>{console.log("[TWA AutoRefresh] Resetting refresh state - initialization successful"),e({isStuckDetected:!1,refreshCount:0,lastRefreshTime:0}),a()};return _.useEffect(()=>()=>{n.current&&clearTimeout(n.current)},[]),{...t,startStuckDetection:o,stopStuckDetection:a,resetRefreshState:l,triggerAutoRefresh:s,isTWAEnvironment:i.isTWA||i.isStandalone}},Kit=()=>{const[t,e]=_.useState({isInitialized:!1,isLoading:!0,initializationComplete:!1,hasTimedOut:!1}),{user:n,isLoading:r}=or(),i=ih(),o=_.useRef(!1),a=_.useRef(null),s=_.useRef(!1),{startStuckDetection:l,stopStuckDetection:c,resetRefreshState:u}=pU();return _.useEffect(()=>{if(o.current||!i.isTWA&&!i.isStandalone){!i.isTWA&&!i.isStandalone&&!t.initializationComplete&&e(f=>({...f,isInitialized:!0,isLoading:!1,initializationComplete:!0}));return}return o.current=!0,console.log("[TWA Init] Starting TWA initialization process with auto-refresh monitoring",{isTWA:i.isTWA,isStandalone:i.isStandalone,authLoading:r,hasUser:!!n}),l(),a.current=setTimeout(()=>{console.log("[TWA Init] Initialization timeout reached, forcing completion"),e(f=>({...f,isInitialized:!0,isLoading:!1,initializationComplete:!0,hasTimedOut:!0})),c()},8e3),()=>{a.current&&(clearTimeout(a.current),a.current=null),c()}},[i.isTWA,i.isStandalone,l,c]),_.useEffect(()=>{!i.isTWA&&!i.isStandalone||!r&&!s.current&&(s.current=!0,console.log("[TWA Init] Auth has stabilized, completing initialization"),a.current&&(clearTimeout(a.current),a.current=null),setTimeout(()=>{e(f=>({...f,isInitialized:!0,isLoading:!1,initializationComplete:!0})),u()},1e3))},[r,i.isTWA,i.isStandalone,u]),_.useEffect(()=>{!i.isTWA&&!i.isStandalone||(s.current=!1)},[n==null?void 0:n.id,i.isTWA,i.isStandalone]),{...t,isTWAEnvironment:i.isTWA||i.isStandalone}},Jit=({children:t})=>{const{isLoading:e,initializationComplete:n,isTWAEnvironment:r,hasTimedOut:i}=Kit(),{isStuckDetected:o,refreshCount:a}=pU();return r&&e&&!n?d.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:d.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"}),d.jsx("p",{className:"text-muted-foreground text-center",children:o&&a>0?`Refreshing app... (attempt ${a})`:i?"Finalizing startup...":"Starting Soul Symphony..."}),i&&!o&&d.jsx("p",{className:"text-xs text-muted-foreground/70",children:"Taking longer than expected..."}),o&&d.jsx("p",{className:"text-xs text-muted-foreground/70",children:"Auto-refresh in progress..."})]})}):d.jsx(d.Fragment,{children:t})};class Zit{constructor(){Mt(this,"updateCheckInterval",null);Mt(this,"lastUpdateCheck",0);Mt(this,"CHECK_INTERVAL",5*60*1e3);Mt(this,"CACHE_BUST_PARAM","v")}init(){const e=ih();(e.isTWA||e.isStandalone)&&(console.log("[TWA Update] Initializing update service for TWA environment"),this.startPeriodicUpdateCheck(),this.setupVisibilityChangeListener())}startPeriodicUpdateCheck(){this.updateCheckInterval&&clearInterval(this.updateCheckInterval),this.updateCheckInterval=setInterval(()=>{this.checkForUpdates()},this.CHECK_INTERVAL),setTimeout(()=>{this.checkForUpdates()},2e3)}setupVisibilityChangeListener(){document.addEventListener("visibilitychange",()=>{document.hidden||Date.now()-this.lastUpdateCheck>this.CHECK_INTERVAL/2&&(console.log("[TWA Update] App became visible, checking for updates"),this.checkForUpdates())})}async checkForUpdates(){try{this.lastUpdateCheck=Date.now(),console.log("[TWA Update] Checking for updates...");const e=Date.now(),n=`${window.location.origin}/app/manifest.json?${this.CACHE_BUST_PARAM}=${e}`,r=await fetch(n,{method:"GET",headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0"},cache:"no-store"});if(r.ok){const i=await r.json(),o=i.version||i.short_name||"unknown",a=this.getLocalVersion();if(console.log("[TWA Update] Version check:",{serverVersion:o,localVersion:a}),this.isUpdateAvailable(o,a)){console.log("[TWA Update] Update available!");const s={available:!0,version:o,timestamp:Date.now()};return this.handleUpdateAvailable(s),s}else console.log("[TWA Update] No updates available")}else console.warn("[TWA Update] Failed to check for updates:",r.status)}catch(e){console.error("[TWA Update] Error checking for updates:",e)}return{available:!1}}getLocalVersion(){return localStorage.getItem("app_version")||"1.0.0"}isUpdateAvailable(e,n){return e!==n}handleUpdateAvailable(e){console.log("[TWA Update] Handling available update:",e),e.version&&localStorage.setItem("app_version",e.version),this.showUpdateNotification(),setTimeout(()=>{this.applyUpdate()},3e3)}showUpdateNotification(){It.success("App update available! Refreshing...",{duration:2500})}async applyUpdate(){try{console.log("[TWA Update] Applying update..."),await this.clearAllCaches();const e=Date.now(),n=new URL(window.location.href);n.searchParams.set(this.CACHE_BUST_PARAM,e.toString()),window.location.href=n.toString()}catch(e){console.error("[TWA Update] Error applying update:",e),window.location.reload()}}async clearAllCaches(){try{if("caches"in window){const r=await caches.keys();await Promise.all(r.map(i=>(console.log("[TWA Update] Clearing cache:",i),caches.delete(i))))}const e=["app_version","user_preferences"],n=[];for(let r=0;r<localStorage.length;r++){const i=localStorage.key(r);i&&!e.includes(i)&&n.push(i)}n.forEach(r=>localStorage.removeItem(r)),console.log("[TWA Update] Caches cleared successfully")}catch(e){console.error("[TWA Update] Error clearing caches:",e)}}async forceUpdateCheck(){return console.log("[TWA Update] Forcing update check..."),await this.checkForUpdates()}destroy(){this.updateCheckInterval&&(clearInterval(this.updateCheckInterval),this.updateCheckInterval=null)}}const zI=new Zit,Ep=class Ep{constructor(){Mt(this,"isInitialized",!1)}static getInstance(){return Ep.instance||(Ep.instance=new Ep),Ep.instance}async initialize(){if(!this.isInitialized)try{console.log("[MobileOptimization] Initializing mobile optimizations"),this.applyMobileCSSOptimizations(),this.setupTouchOptimizations(),this.setupPerformanceMonitoring(),this.setupMemoryManagement(),this.setupViewportOptimizations(),this.isInitialized=!0,console.log("[MobileOptimization] Mobile optimizations initialized")}catch(e){console.error("[MobileOptimization] Failed to initialize:",e),Ur.handleError({type:"unknown",message:`Mobile optimization initialization failed: ${e}`})}}applyMobileCSSOptimizations(){const e=document.createElement("style");e.textContent=`
      /* Mobile-specific optimizations */
      * {
        -webkit-tap-highlight-color: transparent;
        -webkit-touch-callout: none;
        -webkit-user-select: none;
        user-select: none;
      }

      input, textarea, [contenteditable] {
        -webkit-user-select: text;
        user-select: text;
      }

      body {
        -webkit-overflow-scrolling: touch;
        overscroll-behavior-y: contain;
        touch-action: pan-y;
      }

      /* Prevent zoom on input focus */
      input, select, textarea {
        font-size: 16px !important;
      }

      /* Optimize scrolling performance */
      .scroll-container {
        transform: translateZ(0);
        will-change: scroll-position;
      }

      /* Reduce motion for better performance */
      @media (prefers-reduced-motion: reduce) {
        * {
          animation-duration: 0.01ms !important;
          animation-iteration-count: 1 !important;
          transition-duration: 0.01ms !important;
        }
      }
    `,document.head.appendChild(e)}setupTouchOptimizations(){document.addEventListener("touchstart",e=>{e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement||e.target instanceof HTMLSelectElement},{passive:!0}),document.addEventListener("touchmove",e=>{e.target===document.body&&e.preventDefault()},{passive:!1}),document.addEventListener("touchstart",e=>{const n=e.target;(n.closest("button")||n.closest('[role="button"]'))&&(n.style.opacity="0.7")},{passive:!0}),document.addEventListener("touchend",e=>{const n=e.target;(n.closest("button")||n.closest('[role="button"]'))&&setTimeout(()=>{n.style.opacity=""},150)},{passive:!0})}setupPerformanceMonitoring(){if("performance"in window&&"PerformanceObserver"in window)try{new PerformanceObserver(n=>{n.getEntries().forEach(i=>{if(i.entryType==="navigation"){const o=i;console.log("[MobileOptimization] Navigation timing:",{loadTime:o.loadEventEnd-o.loadEventStart,domContentLoaded:o.domContentLoadedEventEnd-o.domContentLoadedEventStart,type:o.type})}})}).observe({entryTypes:["navigation","measure"]})}catch(e){console.warn("[MobileOptimization] Performance observer not supported:",e)}}setupMemoryManagement(){setInterval(()=>{document.visibilityState==="hidden"&&this.cleanupResources()},3e4),"memory"in performance&&setInterval(()=>{const e=performance.memory;if(e){const n=e.usedJSHeapSize/1048576,r=e.totalJSHeapSize/1048576;n/r>.9&&(console.warn("[MobileOptimization] High memory usage detected:",{used:`${n.toFixed(2)}MB`,total:`${r.toFixed(2)}MB`}),this.cleanupResources())}},1e4)}setupViewportOptimizations(){const e=document.querySelector('meta[name="viewport"]');e&&e.setAttribute("content","width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover"),window.addEventListener("orientationchange",()=>{setTimeout(()=>{const r=window.innerHeight*.01;document.documentElement.style.setProperty("--vh",`${r}px`)},100)});const n=window.innerHeight*.01;document.documentElement.style.setProperty("--vh",`${n}px`)}cleanupResources(){try{"caches"in window&&caches.keys().then(e=>{e.forEach(n=>{(n.includes("temp")||n.includes("cache"))&&caches.delete(n)})}),"gc"in window&&window.gc(),console.log("[MobileOptimization] Resources cleaned up")}catch(e){console.warn("[MobileOptimization] Resource cleanup failed:",e)}}optimizeForLowMemory(){this.cleanupResources(),document.body.classList.add("low-memory-mode");const e=document.createElement("style");e.id="low-memory-optimizations",e.textContent=`
      .low-memory-mode * {
        animation: none !important;
        transition: none !important;
      }
      .low-memory-mode img:not(.critical) {
        display: none;
      }
    `,document.head.appendChild(e)}restoreNormalMode(){document.body.classList.remove("low-memory-mode");const e=document.getElementById("low-memory-optimizations");e&&e.remove()}};Mt(Ep,"instance");let w3=Ep;const Ahe=w3.getInstance(),Qit=()=>{const[t,e]=_.useState(!1),[n,r]=_.useState(!1),[i,o]=_.useState(null),a=ih(),{refreshCount:s,isStuckDetected:l}=pU();_.useEffect(()=>{if((async()=>{try{console.log("[App] Starting app initialization...");const f=window.location.pathname;(f.includes("https://")||f.includes("soulo.online"))&&window.history.replaceState(null,"","/"),document.body.classList.add("app-initialized");try{console.log("[App] Initializing mobile optimization service..."),await Ahe.initialize(),console.log("[App] Mobile optimization service initialized")}catch(p){console.warn("[App] Mobile optimization failed:",p),Ur.handleError({type:"unknown",message:`Mobile optimization failed: ${p}`})}try{if(console.log("[App] Initializing native integration service..."),await Di.initialize(),console.log("[App] Native integration initialized"),Di.isRunningNatively()){console.log("[App] Running natively - initializing native auth service...");try{await w1.initialize(),console.log("[App] Native auth service initialized successfully")}catch(p){console.warn("[App] Native auth service initialization failed:",p),Ur.handleError({type:"capacitor",message:`Native auth service failed: ${p}`})}}else console.log("[App] Running in browser - skipping native auth service initialization")}catch(p){console.warn("[App] Native integration failed:",p),Ur.handleError({type:"capacitor",message:`Native integration failed: ${p}`})}if(a.isTWA||a.isStandalone){console.log("[App] Initializing TWA update service");try{zI.init()}catch(p){console.warn("[App] TWA update service failed:",p),Ur.handleError({type:"unknown",message:`TWA update service failed: ${p}`})}}try{console.log("[App] Preloading critical images..."),$it()}catch(p){console.warn("Failed to preload some images:",p)}const h=a.isTWA||a.isStandalone?1500:500;setTimeout(()=>{console.log("[App] App initialization completed"),e(!0)},h)}catch(f){console.error("[App] Critical initialization error:",f),o(f.toString()),Ur.handleError({type:"crash",message:`App initialization failed: ${f}`})}})(),a.isTWA||a.isStandalone){const f=setTimeout(()=>{!l&&s===0&&!t&&(console.warn("[App] Emergency recovery triggered - forcing app initialization"),Ur.handleError({type:"crash",message:"App initialization timeout - emergency recovery triggered"}),r(!0),e(!0))},25e3);return()=>{clearTimeout(f),zI.destroy()}}return()=>{zI.destroy()}},[a.isTWA,a.isStandalone,l,s,t]);const c=(u,f)=>{console.error("Application-level error:",u,f),Ur.handleError({type:"crash",message:u.message,stack:u.stack,timestamp:Date.now()});const h={message:u.message,stack:u.stack,componentStack:f.componentStack,timestamp:new Date().toISOString(),userAgent:navigator.userAgent,url:window.location.href,isTWA:a.isTWA||a.isStandalone,isNative:Di.isRunningNatively(),platform:Di.getPlatform(),emergencyRecovery:n,autoRefreshCount:s,deviceInfo:Di.getDeviceInfo()};console.error("Detailed error info:",h),It.error("Something went wrong. The app will try to recover automatically."),(a.isTWA||a.isStandalone)&&!n&&s===0&&(console.log("[App] Triggering emergency recovery due to error"),r(!0))};return i?d.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-6",children:d.jsxs("div",{className:"flex flex-col items-center space-y-4 text-center max-w-md",children:[d.jsx("div",{className:"text-4xl",children:""}),d.jsx("h2",{className:"text-xl font-semibold text-red-600",children:"Initialization Failed"}),d.jsx("p",{className:"text-muted-foreground",children:"The app failed to initialize properly. This usually happens due to network issues or device compatibility."}),d.jsxs("details",{className:"w-full",children:[d.jsx("summary",{className:"cursor-pointer text-sm text-muted-foreground mb-2",children:"Technical Details"}),d.jsx("pre",{className:"text-xs bg-gray-100 dark:bg-gray-800 p-2 rounded overflow-auto max-h-32",children:i})]}),d.jsxs("div",{className:"flex flex-col space-y-2 w-full",children:[d.jsx("button",{onClick:()=>{o(null),e(!1),window.location.reload()},className:"px-4 py-2 bg-primary text-primary-foreground rounded-md",children:"Retry Initialization"}),d.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-gray-600 text-white rounded-md",children:"Force Refresh"})]})]})}):n?d.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:d.jsxs("div",{className:"flex flex-col items-center space-y-4 p-6 text-center max-w-md",children:[d.jsx("div",{className:"text-2xl animate-spin",children:""}),d.jsx("h2",{className:"text-xl font-semibold",children:"App Recovery"}),d.jsx("p",{className:"text-muted-foreground",children:"The app encountered an issue and is recovering. Please wait a moment..."}),s>0&&d.jsxs("p",{className:"text-sm text-muted-foreground",children:["Auto-refresh attempts: ",s]}),d.jsxs("div",{className:"flex flex-col space-y-2 w-full",children:[d.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-primary text-primary-foreground rounded-md",children:"Refresh App"}),d.jsx("button",{onClick:()=>{localStorage.clear(),window.location.reload()},className:"px-4 py-2 bg-red-600 text-white rounded-md text-sm",children:"Reset App Data"})]})]})}):d.jsx(Kne,{onError:c,children:d.jsx(Vit,{children:d.jsx(xJ,{children:d.jsx(oke,{children:d.jsx(DCe,{children:d.jsx(qit,{children:d.jsxs(Jit,{children:[d.jsx(Oit,{}),d.jsx(Dit,{}),d.jsx(dit,{},t?"initialized":"initializing"),d.jsx(Uit,{}),d.jsx(Iit,{}),d.jsx(Lye,{position:"top-right"})]})})})})})})})},eot=_.createContext(void 0);function tot({children:t}){const[e,n]=_.useState({isReady:!1,error:null}),r=()=>{n(o=>({...o,isReady:!0}))},i=o=>{n(a=>({...a,error:o}))};return _.useEffect(()=>{const o=setTimeout(()=>{e.error||r()},100);return()=>clearTimeout(o)},[e.error]),d.jsx(eot.Provider,{value:{isReady:e.isReady,error:e.error,markReady:r,markError:i},children:t})}class not{constructor(){Mt(this,"registration",null);Mt(this,"isRegistered",!1)}async register(){if(!("serviceWorker"in navigator))return console.warn("[SW] Service workers not supported"),{success:!1,error:new Error("Service workers not supported")};try{console.log("[SW] Registering enhanced service worker...");const e=await navigator.serviceWorker.register("/sw.js",{scope:"/",updateViaCache:"none"});return this.registration=e,this.isRegistered=!0,e.addEventListener("updatefound",()=>{console.log("[SW] Update found, installing new version..."),this.handleUpdate(e)}),navigator.serviceWorker.addEventListener("message",this.handleMessage.bind(this)),e.update(),console.log("[SW] Enhanced service worker registered successfully"),{success:!0,registration:e}}catch(e){return console.error("[SW] Service worker registration failed:",e),{success:!1,error:e}}}async forceCacheRefresh(){try{if(console.log("[SW] Forcing cache refresh..."),this.registration&&this.registration.active&&this.registration.active.postMessage({type:"CLEAR_CACHE"}),"caches"in window){const r=await caches.keys();await Promise.all(r.map(i=>(console.log("[SW] Clearing cache:",i),caches.delete(i))))}const e=Date.now(),n=new URL(window.location.href);n.searchParams.set("v",e.toString()),setTimeout(()=>{window.location.href=n.toString()},500)}catch(e){console.error("[SW] Error forcing cache refresh:",e),window.location.reload()}}async unregister(){if(!this.registration)return!0;try{const e=await this.registration.unregister();return this.registration=null,this.isRegistered=!1,console.log("[SW] Service worker unregistered"),e}catch(e){return console.error("[SW] Failed to unregister service worker:",e),!1}}isServiceWorkerRegistered(){return this.isRegistered&&this.registration!==null}getCapabilities(){return{backgroundSync:"serviceWorker"in navigator&&"sync"in window.ServiceWorkerRegistration.prototype,pushNotifications:"serviceWorker"in navigator&&"PushManager"in window,periodicSync:"serviceWorker"in navigator&&"periodicSync"in window.ServiceWorkerRegistration.prototype}}async requestBackgroundSync(e="journal-entry-sync"){if(!this.registration)return console.warn("[SW] No service worker registration available"),!1;const n=this.registration;if(!n.sync)return console.warn("[SW] Background sync not supported"),!1;try{return await n.sync.register(e),console.log("[SW] Background sync registered:",e),!0}catch(r){return console.error("[SW] Failed to register background sync:",r),!1}}handleUpdate(e){const n=e.installing;n&&n.addEventListener("statechange",()=>{n.state==="installed"&&navigator.serviceWorker.controller&&(console.log("[SW] New content is available, clearing caches..."),this.forceCacheRefresh())})}handleMessage(e){console.log("[SW] Message received from service worker:",e.data),e.data.type==="JOURNAL_SYNC_STATUS"&&this.handleJournalSyncStatus(e.data.payload)}handleJournalSyncStatus(e){const{entry:n,status:r}=e;r==="success"&&window.dispatchEvent(new CustomEvent("journalSyncSuccess",{detail:{entry:n}}))}getRegistration(){return this.registration}async skipWaiting(){!this.registration||!this.registration.waiting||(this.registration.waiting.postMessage({type:"SKIP_WAITING"}),setTimeout(()=>{this.forceCacheRefresh()},1e3))}}const Vl=new not;async function rot(){return window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone,await Vl.register()}const _p=class _p{constructor(){Mt(this,"dbName","SouloOfflineDB");Mt(this,"dbVersion",1);Mt(this,"storeName","journalEntries")}static getInstance(){return _p.instance||(_p.instance=new _p),_p.instance}async initDB(){return new Promise((e,n)=>{const r=indexedDB.open(this.dbName,this.dbVersion);r.onerror=()=>n(r.error),r.onsuccess=()=>e(r.result),r.onupgradeneeded=i=>{const o=i.target.result;if(!o.objectStoreNames.contains(this.storeName)){const a=o.createObjectStore(this.storeName,{keyPath:"id",autoIncrement:!0});a.createIndex("timestamp","timestamp",{unique:!1}),a.createIndex("offline","offline",{unique:!1}),a.createIndex("userId","userId",{unique:!1})}}})}async storeOfflineEntry(e){const n=await this.initDB();return new Promise((r,i)=>{const s=n.transaction([this.storeName],"readwrite").objectStore(this.storeName).add({...e,offline:!0,timestamp:Date.now()});s.onsuccess=()=>{console.log("[BackgroundSync] Stored offline journal entry:",s.result),r(s.result),this.requestSync()},s.onerror=()=>i(s.error)})}async getOfflineEntries(){const e=await this.initDB();return new Promise((n,r)=>{const s=e.transaction([this.storeName],"readonly").objectStore(this.storeName).index("offline").getAll(IDBKeyRange.only(!0));s.onsuccess=()=>n(s.result||[]),s.onerror=()=>r(s.error)})}async removeEntry(e){const n=await this.initDB();return new Promise((r,i)=>{const s=n.transaction([this.storeName],"readwrite").objectStore(this.storeName).delete(e);s.onsuccess=()=>{console.log("[BackgroundSync] Removed synced entry:",e),r()},s.onerror=()=>i(s.error)})}async getPendingCount(){const e=await this.initDB();return new Promise((n,r)=>{const s=e.transaction([this.storeName],"readonly").objectStore(this.storeName).index("offline").count(IDBKeyRange.only(!0));s.onsuccess=()=>n(s.result),s.onerror=()=>r(s.error)})}async clearAllEntries(){const e=await this.initDB();return new Promise((n,r)=>{const a=e.transaction([this.storeName],"readwrite").objectStore(this.storeName).clear();a.onsuccess=()=>{console.log("[BackgroundSync] Cleared all offline entries"),n()},a.onerror=()=>r(a.error)})}async requestSync(){return Vl.isServiceWorkerRegistered()?await Vl.requestBackgroundSync("journal-entry-sync"):(console.warn("[BackgroundSync] Service worker not registered"),!1)}async manualSync(){const e={success:!0,syncedCount:0,failedCount:0,errors:[]};if(!navigator.onLine)return e.success=!1,e.errors.push("Device is offline"),e;try{const n=await this.getOfflineEntries();if(n.length===0)return e;console.log(`[BackgroundSync] Starting manual sync of ${n.length} entries`);for(const r of n)try{await this.syncEntry(r),await this.removeEntry(r.id),e.syncedCount++,window.dispatchEvent(new CustomEvent("journalSyncSuccess",{detail:{entry:r}}))}catch(i){e.failedCount++,e.errors.push(`Failed to sync entry ${r.id}: ${i.message}`),console.error("[BackgroundSync] Failed to sync entry:",r.id,i)}return e.failedCount>0&&(e.success=!1),console.log(`[BackgroundSync] Manual sync completed: ${e.syncedCount} synced, ${e.failedCount} failed`),e.syncedCount>0&&It.success(`Synced ${e.syncedCount} journal entries`),e.failedCount>0&&It.error(`Failed to sync ${e.failedCount} entries`),e}catch(n){return console.error("[BackgroundSync] Manual sync error:",n),e.success=!1,e.errors.push(n.message),e}}async syncEntry(e){const r=await fetch("https://kwnwhgucnzqxndzjayyq.supabase.co/functions/v1/transcribe-audio",{method:"POST",headers:{"Content-Type":"application/json","x-timezone":Intl.DateTimeFormat().resolvedOptions().timeZone,"x-request-timestamp":new Date().toISOString(),"x-client-version":"1.0.0"},body:JSON.stringify({audio:e.audio,userId:e.userId,highQuality:e.highQuality,directTranscription:e.directTranscription,recordingTime:e.recordingTime})});if(!r.ok){const i=await r.json().catch(()=>({}));throw new Error(i.error||`Server responded with ${r.status}`)}return await r.json()}initializeListeners(){var e;window.addEventListener("online",()=>{console.log("[BackgroundSync] Device came online, triggering sync"),setTimeout(()=>{this.manualSync()},1e3)}),(e=navigator.serviceWorker)==null||e.addEventListener("message",n=>{var r;((r=n.data)==null?void 0:r.type)==="JOURNAL_SYNC_STATUS"&&console.log("[BackgroundSync] Received sync status:",n.data.payload)})}};Mt(_p,"instance");let b3=_p;const Pw=b3.getInstance(),Tp=class Tp{constructor(){Mt(this,"JOURNAL_SYNC_TAG","journal-periodic-sync");Mt(this,"INSIGHTS_REFRESH_TAG","insights-periodic-sync")}static getInstance(){return Tp.instance||(Tp.instance=new Tp),Tp.instance}isSupported(){return"serviceWorker"in navigator&&"periodicSync"in window.ServiceWorkerRegistration.prototype}async registerJournalSync(){if(!this.isSupported())return console.log("[PeriodicSync] Periodic sync not supported, falling back to manual sync"),this.setupFallbackSync(),!1;if(!Vl.isServiceWorkerRegistered())return console.warn("[PeriodicSync] Service worker not registered"),!1;try{const e=Vl.getRegistration();return e.periodicSync?(await e.periodicSync.register(this.JOURNAL_SYNC_TAG,{minInterval:12*60*60*1e3}),console.log("[PeriodicSync] Journal sync registered"),!0):(console.warn("[PeriodicSync] Periodic sync not available on registration"),this.setupFallbackSync(),!1)}catch(e){return console.error("[PeriodicSync] Failed to register journal sync:",e),this.setupFallbackSync(),!1}}async registerInsightsSync(){if(!this.isSupported())return console.log("[PeriodicSync] Periodic sync not supported for insights"),!1;if(!Vl.isServiceWorkerRegistered())return console.warn("[PeriodicSync] Service worker not registered"),!1;try{const e=Vl.getRegistration();return e.periodicSync?(await e.periodicSync.register(this.INSIGHTS_REFRESH_TAG,{minInterval:6*60*60*1e3}),console.log("[PeriodicSync] Insights sync registered"),!0):(console.warn("[PeriodicSync] Periodic sync not available on registration"),!1)}catch(e){return console.error("[PeriodicSync] Failed to register insights sync:",e),!1}}async unregister(e){if(!this.isSupported()||!Vl.isServiceWorkerRegistered())return!1;try{const n=Vl.getRegistration();return n.periodicSync?(await n.periodicSync.unregister(e),console.log("[PeriodicSync] Unregistered:",e),!0):!1}catch(n){return console.error("[PeriodicSync] Failed to unregister:",e,n),!1}}async getRegisteredTags(){if(!this.isSupported()||!Vl.isServiceWorkerRegistered())return[];try{const e=Vl.getRegistration();return e.periodicSync?await e.periodicSync.getTags():[]}catch(e){return console.error("[PeriodicSync] Failed to get registered tags:",e),[]}}setupFallbackSync(){console.log("[PeriodicSync] Setting up fallback sync with intervals");const e=setInterval(async()=>{if(document.visibilityState==="visible"&&navigator.onLine)try{await Pw.getPendingCount()>0&&(console.log("[PeriodicSync] Fallback sync: found pending items, triggering sync"),await Pw.manualSync())}catch(n){console.error("[PeriodicSync] Fallback sync error:",n)}},5*60*1e3);window.addEventListener("beforeunload",()=>{clearInterval(e)}),document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&navigator.onLine&&setTimeout(async()=>{try{await Pw.getPendingCount()>0&&await Pw.manualSync()}catch(n){console.error("[PeriodicSync] Visibility sync error:",n)}},1e3)})}async initialize(){console.log("[PeriodicSync] Initializing periodic sync services..."),await this.registerJournalSync(),await this.registerInsightsSync();const e=await this.getRegisteredTags();console.log("[PeriodicSync] Registered periodic sync tags:",e)}};Mt(Tp,"instance");let S3=Tp;const iot=S3.getInstance(),oot=async()=>{console.log("[FontSystem] Starting font initialization...");const t=["Inter","Noto Sans","Noto Sans Devanagari","Noto Sans Arabic","Noto Sans SC","Noto Sans JP","Noto Sans KR","Noto Sans Bengali","Noto Sans Thai"],e=async(r,i=3)=>{for(let o=0;o<i;o++)try{if(document.fonts&&document.fonts.check){if(document.fonts.check(`12px "${r}"`))return console.log(`[FontSystem] ${r} already loaded`),!0;const s=new FontFace(r,`local("${r}")`);return await Promise.race([s.load(),new Promise((l,c)=>setTimeout(()=>c(new Error("Timeout")),3e3))]),console.log(`[FontSystem] ${r} loaded successfully`),!0}}catch(a){console.warn(`[FontSystem] Attempt ${o+1} failed for ${r}:`,a),o<i-1&&await new Promise(s=>setTimeout(s,500))}return console.error(`[FontSystem] Failed to load ${r} after ${i} attempts`),!1},n=t.map(r=>e(r));try{await Promise.race([document.fonts?document.fonts.ready:Promise.resolve(),new Promise(o=>setTimeout(o,5e3))]);const i=(await Promise.allSettled(n)).filter(o=>o.status==="fulfilled"&&o.value).length;console.log(`[FontSystem] Font loading complete: ${i}/${t.length} fonts loaded`),window.__SOULO_FONTS_READY__=!0,window.dispatchEvent(new CustomEvent("fontsReady",{detail:{loadedCount:i,totalCount:t.length,timestamp:Date.now()}}))}catch(r){console.error("[FontSystem] Font initialization error:",r),window.__SOULO_FONTS_READY__=!0,window.dispatchEvent(new CustomEvent("fontsReady",{detail:{error:r}}))}},aot=()=>{const t=()=>{const e=window.innerHeight*.01;document.documentElement.style.setProperty("--vh",`${e}px`)};t(),window.addEventListener("resize",t),window.addEventListener("orientationchange",()=>{setTimeout(t,100)}),(/iPad|iPhone|iPod/.test(navigator.userAgent)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1)&&document.querySelectorAll("input, textarea").forEach(n=>{n.addEventListener("focus",()=>{document.body.classList.add("keyboard-visible"),setTimeout(()=>{window.scrollTo(0,0),t()},50)}),n.addEventListener("blur",()=>{document.body.classList.remove("keyboard-visible"),setTimeout(t,50)})})},sot=async()=>{var t,e;try{console.log("[PWA] Initializing service worker...");const n=await rot();n.success?(console.log("[PWA] Service worker registered successfully"),Pw.initializeListeners(),await iot.initialize(),window.addEventListener("swUpdateAvailable",()=>{console.log("[PWA] Service worker update available")}),(t=navigator.serviceWorker)==null||t.addEventListener("message",r=>{var i;((i=r.data)==null?void 0:i.type)==="PERIODIC_SYNC_STATUS"&&console.log("[PWA] Periodic sync completed:",r.data.payload)})):console.warn("[PWA] Service worker registration failed:",(e=n.error)==null?void 0:e.message)}catch(n){console.error("[PWA] PWA initialization error:",n),Ur.handleError({type:"unknown",message:`PWA initialization failed: ${n}`})}},lot=async()=>{try{await oot(),aot(),await Ahe.initialize(),await sot(),(/iPad|iPhone|iPod/.test(navigator.userAgent)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1)&&document.documentElement.classList.add("ios-device"),/Android/.test(navigator.userAgent)&&document.documentElement.classList.add("android-device"),console.log("[App] Initialization complete")}catch(t){console.error("[App] Initialization failed:",t),Ur.handleError({type:"crash",message:`App initialization failed: ${t}`})}};lot();upe.createRoot(document.getElementById("root")).render(d.jsx(ve.StrictMode,{children:d.jsx(dme,{children:d.jsx(tot,{children:d.jsx(ave,{children:d.jsx(xJ,{children:d.jsx(ive,{children:d.jsx(Qit,{})})})})})})}));export{NYe as C,IXe as O,ve as R,nJ as W,$n as g,d as j,_ as r,V0 as u};
