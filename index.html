
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SOULo - Your Mental Wellness Companion</title>
    <meta name="description" content="SOULo helps you understand your emotions through AI-powered voice journaling." />
    <meta name="author" content="SOULo" />

    <meta property="og:title" content="SOULo - Mental Wellness Companion" />
    <meta property="og:description" content="Track your emotions and gain insights with AI-powered voice journaling" />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="https://soulo.online/opengraph-image.png" />
    <meta property="og:url" content="https://soulo.online" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@soulo_online" />
    <meta name="twitter:image" content="https://soulo.online/opengraph-image.png" />
    
    <!-- Improved font loading strategy with preload -->
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Noto+Sans:wght@400;500;700&family=Noto+Sans+Devanagari:wght@400;500;700&family=Mukta:wght@400;500;700&display=swap" as="style" />
    <link rel="preload" href="https://fonts.gstatic.com/s/notosans/v28/o-0NIpQlx3QUlC5A4PNjXhFlY9aA5Wl6PQ.woff2" crossorigin as="font" type="font/woff2" />
    <link rel="preload" href="https://fonts.gstatic.com/s/notosansdevanagari/v20/ia8KK5nt6hRBopQRNEzDyCgaEf2Wpfm92gY.woff2" crossorigin as="font" type="font/woff2" />
    <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans:wght@400;500;700&family=Noto+Sans+Devanagari:wght@400;500;700&family=Mukta:wght@400;500;700&display=swap" rel="stylesheet" />
    
    <style>
      /* Font fallback mechanism */
      .fonts-loading {
        font-family: sans-serif;
      }
      .fonts-loaded {
        font-family: 'Noto Sans', 'Noto Sans Devanagari', 'Mukta', sans-serif;
      }
      /* Font loading indicator - hidden by default */
      #font-loading-indicator {
        display: none;
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: rgba(255,255,255,0.9);
        padding: 20px;
        border-radius: 8px;
        z-index: 9999;
        text-align: center;
      }
    </style>
  </head>
  <body class="fonts-loading">
    <div id="root"></div>
    <div id="font-loading-indicator">
      <div>Loading fonts...</div>
      <div class="progress-bar"></div>
    </div>
    <div id="google_translate_element" style="position: absolute; top: -9999px; left: -9999px;"></div>
    <script type="module" src="/src/main.tsx"></script>
    <script type="text/javascript" src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit" async defer></script>
    <script src="https://cdn.gpteng.co/gptengineer.js" type="module"></script>
    
    <script>
      // Enhanced font loading detection
      document.fonts.ready.then(function() {
        console.log("All fonts are loaded and ready");
        document.documentElement.classList.add('fonts-loaded');
        document.body.classList.remove('fonts-loading');
        document.body.classList.add('fonts-loaded');
        
        // Check specifically for Devanagari font
        const testDevanagari = document.createElement('span');
        testDevanagari.style.fontFamily = "'Noto Sans Devanagari', 'Mukta'";
        testDevanagari.innerHTML = 'हिन्दी';
        testDevanagari.style.visibility = 'hidden';
        document.body.appendChild(testDevanagari);
        
        // Let the app know fonts are truly ready via custom event
        setTimeout(() => {
          document.dispatchEvent(new CustomEvent('fontsLoaded', { 
            detail: { 
              devanagari: true 
            }
          }));
          document.body.removeChild(testDevanagari);
        }, 500); // Small delay to ensure font metrics are calculated
      }).catch(function(err) {
        console.warn("Error when loading fonts:", err);
        // Still mark fonts as loaded to prevent indefinite wait
        document.documentElement.classList.add('fonts-loaded');
        document.body.classList.remove('fonts-loading');
        document.body.classList.add('fonts-loaded');
        // Dispatch event with error flag
        document.dispatchEvent(new CustomEvent('fontsLoaded', { 
          detail: { error: true } 
        }));
      });
      
      // Force reload if the app fails to load within 10 seconds
      setTimeout(function() {
        if (document.readyState !== 'complete') {
          console.log('Application failed to load completely. Reloading...');
          window.location.reload();
        }
      }, 10000);
    </script>
  </body>
</html>
